/**
* @vue/shared v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function e(e,t){const n=new Set(e.split(","));return e=>n.has(e)}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t={},n=[],r=()=>{},i=()=>!1,o=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),a=e=>e.startsWith("onUpdate:"),s=Object.assign,l=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},c=Object.prototype.hasOwnProperty,u=(e,t)=>c.call(e,t),d=Array.isArray,h=e=>"[object Map]"===b(e),p=e=>"[object Set]"===b(e),A=e=>"function"==typeof e,f=e=>"string"==typeof e,m=e=>"symbol"==typeof e,g=e=>null!==e&&"object"==typeof e,v=e=>(g(e)||A(e))&&A(e.then)&&A(e.catch),y=Object.prototype.toString,b=e=>y.call(e),w=e=>b(e).slice(8,-1),x=e=>"[object Object]"===b(e),C=e=>f(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,S=e(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),B=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},_=/-(\w)/g,E=B((e=>e.replace(_,((e,t)=>t?t.toUpperCase():"")))),M=/\B([A-Z])/g,P=B((e=>e.replace(M,"-$1").toLowerCase())),T=B((e=>e.charAt(0).toUpperCase()+e.slice(1))),D=B((e=>e?`on${T(e)}`:"")),F=(e,t)=>!Object.is(e,t),I=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},k=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},O=e=>{const t=parseFloat(e);return isNaN(t)?e:t},L=e=>{const t=f(e)?Number(e):NaN;return isNaN(t)?e:t};let R;const U=()=>R||(R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function z(e){if(d(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=f(r)?Q(r):z(r);if(i)for(const e in i)t[e]=i[e]}return t}if(f(e)||g(e))return e}const N=/;(?![^(]*\))/g,j=/:([^]+)/,H=/\/\*[^]*?\*\//g;function Q(e){const t={};return e.replace(H,"").split(N).forEach((e=>{if(e){const n=e.split(j);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function V(e){let t="";if(f(e))t=e;else if(d(e))for(let n=0;n<e.length;n++){const r=V(e[n]);r&&(t+=r+" ")}else if(g(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const W=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function G(e){return!!e||""===e}const q=e=>!(!e||!0!==e.__v_isRef),K=e=>f(e)?e:null==e?"":d(e)||g(e)&&(e.toString===y||!A(e.toString))?q(e)?K(e.value):JSON.stringify(e,Y,2):String(e),Y=(e,t)=>q(t)?Y(e,t.value):h(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n],r)=>(e[X(t,r)+" =>"]=n,e)),{})}:p(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>X(e)))}:m(t)?X(t):!g(t)||d(t)||x(t)?t:String(t),X=(e,t="")=>{var n;return m(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};
/**
* @vue/reactivity v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let $,J;class Z{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$,!e&&$&&(this.index=($.scopes||($.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=$;try{return $=this,e()}finally{$=t}}}on(){$=this}off(){$=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function ee(e){return new Z(e)}function te(){return $}class ne{constructor(e,t,n,r){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,function(e,t=$){t&&t.active&&t.effects.push(e)}(this,r)}get dirty(){if(2===this._dirtyLevel||3===this._dirtyLevel){this._dirtyLevel=1,ce();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(t.computed.value,this._dirtyLevel>=4))break}1===this._dirtyLevel&&(this._dirtyLevel=0),ue()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ae,t=J;try{return ae=!0,J=this,this._runnings++,re(this),this.fn()}finally{ie(this),this._runnings--,J=t,ae=e}}stop(){this.active&&(re(this),ie(this),this.onStop&&this.onStop(),this.active=!1)}}function re(e){e._trackId++,e._depsLength=0}function ie(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)oe(e.deps[t],e);e.deps.length=e._depsLength}}function oe(e,t){const n=e.get(t);void 0!==n&&t._trackId!==n&&(e.delete(t),0===e.size&&e.cleanup())}let ae=!0,se=0;const le=[];function ce(){le.push(ae),ae=!1}function ue(){const e=le.pop();ae=void 0===e||e}function de(){se++}function he(){for(se--;!se&&Ae.length;)Ae.shift()()}function pe(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&oe(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Ae=[];function fe(e,t,n){de();for(const r of e.keys()){let n;r._dirtyLevel<t&&(null!=n?n:n=e.get(r)===r._trackId)&&(r._shouldSchedule||(r._shouldSchedule=0===r._dirtyLevel),r._dirtyLevel=t),r._shouldSchedule&&(null!=n?n:n=e.get(r)===r._trackId)&&(r.trigger(),r._runnings&&!r.allowRecurse||2===r._dirtyLevel||(r._shouldSchedule=!1,r.scheduler&&Ae.push(r.scheduler)))}he()}const me=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},ge=new WeakMap,ve=Symbol(""),ye=Symbol("");function be(e,t,n){if(ae&&J){let t=ge.get(e);t||ge.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=me((()=>t.delete(n)))),pe(J,r)}}function we(e,t,n,r,i,o){const a=ge.get(e);if(!a)return;let s=[];if("clear"===t)s=[...a.values()];else if("length"===n&&d(e)){const e=Number(r);a.forEach(((t,n)=>{("length"===n||!m(n)&&n>=e)&&s.push(t)}))}else switch(void 0!==n&&s.push(a.get(n)),t){case"add":d(e)?C(n)&&s.push(a.get("length")):(s.push(a.get(ve)),h(e)&&s.push(a.get(ye)));break;case"delete":d(e)||(s.push(a.get(ve)),h(e)&&s.push(a.get(ye)));break;case"set":h(e)&&s.push(a.get(ve))}de();for(const l of s)l&&fe(l,4);he()}const xe=e("__proto__,__v_isRef,__isVue"),Ce=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(m)),Se=Be();function Be(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ht(this);for(let t=0,i=this.length;t<i;t++)be(n,0,t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(ht)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){ce(),de();const n=ht(this)[t].apply(this,e);return he(),ue(),n}})),e}function _e(e){m(e)||(e=String(e));const t=ht(this);return be(t,0,e),t.hasOwnProperty(e)}class Ee{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const r=this._isReadonly,i=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return i;if("__v_raw"===t)return n===(r?i?rt:nt:i?tt:et).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=d(e);if(!r){if(o&&u(Se,t))return Reflect.get(Se,t,n);if("hasOwnProperty"===t)return _e}const a=Reflect.get(e,t,n);return(m(t)?Ce.has(t):xe(t))?a:(r||be(e,0,t),i?a:yt(a)?o&&C(t)?a:a.value:g(a)?r?at(a):it(a):a)}}class Me extends Ee{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const t=ct(i);if(ut(n)||ct(n)||(i=ht(i),n=ht(n)),!d(e)&&yt(i)&&!yt(n))return!t&&(i.value=n,!0)}const o=d(e)&&C(t)?Number(t)<e.length:u(e,t),a=Reflect.set(e,t,n,r);return e===ht(r)&&(o?F(n,i)&&we(e,"set",t,n):we(e,"add",t,n)),a}deleteProperty(e,t){const n=u(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&we(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return m(t)&&Ce.has(t)||be(e,0,t),n}ownKeys(e){return be(e,0,d(e)?"length":ve),Reflect.ownKeys(e)}}class Pe extends Ee{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Te=new Me,De=new Pe,Fe=new Me(!0),Ie=e=>e,ke=e=>Reflect.getPrototypeOf(e);function Oe(e,t,n=!1,r=!1){const i=ht(e=e.__v_raw),o=ht(t);n||(F(t,o)&&be(i,0,t),be(i,0,o));const{has:a}=ke(i),s=r?Ie:n?ft:At;return a.call(i,t)?s(e.get(t)):a.call(i,o)?s(e.get(o)):void(e!==i&&e.get(t))}function Le(e,t=!1){const n=this.__v_raw,r=ht(n),i=ht(e);return t||(F(e,i)&&be(r,0,e),be(r,0,i)),e===i?n.has(e):n.has(e)||n.has(i)}function Re(e,t=!1){return e=e.__v_raw,!t&&be(ht(e),0,ve),Reflect.get(e,"size",e)}function Ue(e){e=ht(e);const t=ht(this);return ke(t).has.call(t,e)||(t.add(e),we(t,"add",e,e)),this}function ze(e,t){t=ht(t);const n=ht(this),{has:r,get:i}=ke(n);let o=r.call(n,e);o||(e=ht(e),o=r.call(n,e));const a=i.call(n,e);return n.set(e,t),o?F(t,a)&&we(n,"set",e,t):we(n,"add",e,t),this}function Ne(e){const t=ht(this),{has:n,get:r}=ke(t);let i=n.call(t,e);i||(e=ht(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&we(t,"delete",e,void 0),o}function je(){const e=ht(this),t=0!==e.size,n=e.clear();return t&&we(e,"clear",void 0,void 0),n}function He(e,t){return function(n,r){const i=this,o=i.__v_raw,a=ht(o),s=t?Ie:e?ft:At;return!e&&be(a,0,ve),o.forEach(((e,t)=>n.call(r,s(e),s(t),i)))}}function Qe(e,t,n){return function(...r){const i=this.__v_raw,o=ht(i),a=h(o),s="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,c=i[e](...r),u=n?Ie:t?ft:At;return!t&&be(o,0,l?ye:ve),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function Ve(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function We(){const e={get(e){return Oe(this,e)},get size(){return Re(this)},has:Le,add:Ue,set:ze,delete:Ne,clear:je,forEach:He(!1,!1)},t={get(e){return Oe(this,e,!1,!0)},get size(){return Re(this)},has:Le,add:Ue,set:ze,delete:Ne,clear:je,forEach:He(!1,!0)},n={get(e){return Oe(this,e,!0)},get size(){return Re(this,!0)},has(e){return Le.call(this,e,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:He(!0,!1)},r={get(e){return Oe(this,e,!0,!0)},get size(){return Re(this,!0)},has(e){return Le.call(this,e,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:He(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{e[i]=Qe(i,!1,!1),n[i]=Qe(i,!0,!1),t[i]=Qe(i,!1,!0),r[i]=Qe(i,!0,!0)})),[e,n,t,r]}const[Ge,qe,Ke,Ye]=We();function Xe(e,t){const n=t?e?Ye:Ke:e?qe:Ge;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(u(n,r)&&r in t?n:t,r,i)}const $e={get:Xe(!1,!1)},Je={get:Xe(!1,!0)},Ze={get:Xe(!0,!1)},et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap;function it(e){return ct(e)?e:st(e,!1,Te,$e,et)}function ot(e){return st(e,!1,Fe,Je,tt)}function at(e){return st(e,!0,De,Ze,nt)}function st(e,t,n,r,i){if(!g(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=(s=e).__v_skip||!Object.isExtensible(s)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(w(s));var s;if(0===a)return e;const l=new Proxy(e,2===a?r:n);return i.set(e,l),l}function lt(e){return ct(e)?lt(e.__v_raw):!(!e||!e.__v_isReactive)}function ct(e){return!(!e||!e.__v_isReadonly)}function ut(e){return!(!e||!e.__v_isShallow)}function dt(e){return!!e&&!!e.__v_raw}function ht(e){const t=e&&e.__v_raw;return t?ht(t):e}function pt(e){return Object.isExtensible(e)&&k(e,"__v_skip",!0),e}const At=e=>g(e)?it(e):e,ft=e=>g(e)?at(e):e;class mt{constructor(e,t,n,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ne((()=>e(this._value)),(()=>vt(this,2===this.effect._dirtyLevel?2:3))),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=ht(this);return e._cacheable&&!e.effect.dirty||!F(e._value,e._value=e.effect.run())||vt(e,4),gt(e),e.effect._dirtyLevel>=2&&vt(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function gt(e){var t;ae&&J&&(e=ht(e),pe(J,null!=(t=e.dep)?t:e.dep=me((()=>e.dep=void 0),e instanceof mt?e:void 0)))}function vt(e,t=4,n,r){const i=(e=ht(e)).dep;i&&fe(i,t)}function yt(e){return!(!e||!0!==e.__v_isRef)}function bt(e){return xt(e,!1)}function wt(e){return xt(e,!0)}function xt(e,t){return yt(e)?e:new Ct(e,t)}class Ct{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ht(e),this._value=t?e:At(e)}get value(){return gt(this),this._value}set value(e){const t=this.__v_isShallow||ut(e)||ct(e);e=t?e:ht(e),F(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:At(e),vt(this,4))}}function St(e){return yt(e)?e.value:e}const Bt={get:(e,t,n)=>St(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return yt(i)&&!yt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function _t(e){return lt(e)?e:new Proxy(e,Bt)}function Et(e){const t=d(e)?new Array(e.length):{};for(const n in e)t[n]=Dt(e,n);return t}class Mt{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){const n=ge.get(e);return n&&n.get(t)}(ht(this._object),this._key)}}class Pt{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Tt(e,t,n){return yt(e)?e:A(e)?new Pt(e):g(e)&&arguments.length>1?Dt(e,t,n):bt(e)}function Dt(e,t,n){const r=e[t];return yt(r)?r:new Mt(e,t,n)}
/**
* @vue/runtime-core v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ft(e,t,n,r){try{return r?e(...r):e()}catch(i){kt(i,t,n)}}function It(e,t,n,r){if(A(e)){const i=Ft(e,t,n,r);return i&&v(i)&&i.catch((e=>{kt(e,t,n)})),i}if(d(e)){const i=[];for(let o=0;o<e.length;o++)i.push(It(e[o],t,n,r));return i}}function kt(e,t,n,r=!0){t&&t.vnode;if(t){let r=t.parent;const i=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,o))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return ce(),Ft(a,null,10,[e,i,o]),void ue()}}let Ot=!1,Lt=!1;const Rt=[];let Ut=0;const zt=[];let Nt=null,jt=0;const Ht=Promise.resolve();let Qt=null;function Vt(e){const t=Qt||Ht;return e?t.then(this?e.bind(this):e):t}function Wt(e){Rt.length&&Rt.includes(e,Ot&&e.allowRecurse?Ut+1:Ut)||(null==e.id?Rt.push(e):Rt.splice(function(e){let t=Ut+1,n=Rt.length;for(;t<n;){const r=t+n>>>1,i=Rt[r],o=Yt(i);o<e||o===e&&i.pre?t=r+1:n=r}return t}(e.id),0,e),Gt())}function Gt(){Ot||Lt||(Lt=!0,Qt=Ht.then($t))}function qt(e,t,n=(Ot?Ut+1:0)){for(;n<Rt.length;n++){const t=Rt[n];if(t&&t.pre){if(e&&t.id!==e.uid)continue;Rt.splice(n,1),n--,t()}}}function Kt(e){if(zt.length){const e=[...new Set(zt)].sort(((e,t)=>Yt(e)-Yt(t)));if(zt.length=0,Nt)return void Nt.push(...e);for(Nt=e,jt=0;jt<Nt.length;jt++){const e=Nt[jt];!1!==e.active&&e()}Nt=null,jt=0}}const Yt=e=>null==e.id?1/0:e.id,Xt=(e,t)=>{const n=Yt(e)-Yt(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function $t(e){Lt=!1,Ot=!0,Rt.sort(Xt);try{for(Ut=0;Ut<Rt.length;Ut++){const e=Rt[Ut];e&&!1!==e.active&&Ft(e,null,14)}}finally{Ut=0,Rt.length=0,Kt(),Ot=!1,Qt=null,(Rt.length||zt.length)&&$t()}}function Jt(e,n,...r){if(e.isUnmounted)return;const i=e.vnode.props||t;let o=r;const a=n.startsWith("update:"),s=a&&n.slice(7);if(s&&s in i){const e=`${"modelValue"===s?"model":s}Modifiers`,{number:n,trim:a}=i[e]||t;a&&(o=r.map((e=>f(e)?e.trim():e))),n&&(o=r.map(O))}let l,c=i[l=D(n)]||i[l=D(E(n))];!c&&a&&(c=i[l=D(P(n))]),c&&It(c,e,6,o);const u=i[l+"Once"];if(u){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,It(u,e,6,o)}}function Zt(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const o=e.emits;let a={},l=!1;if(!A(e)){const r=e=>{const n=Zt(e,t,!0);n&&(l=!0,s(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return o||l?(d(o)?o.forEach((e=>a[e]=null)):s(a,o),g(e)&&r.set(e,a),a):(g(e)&&r.set(e,null),null)}function en(e,t){return!(!e||!o(t))&&(t=t.slice(2).replace(/Once$/,""),u(e,t[0].toLowerCase()+t.slice(1))||u(e,P(t))||u(e,t))}let tn=null,nn=null;function rn(e){const t=tn;return tn=e,nn=e&&e.type.__scopeId||null,t}function on(e){nn=e}function an(){nn=null}function sn(e,t=tn,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&yi(-1);const i=rn(t);let o;try{o=e(...n)}finally{rn(i),r._d&&yi(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ln(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:l,emit:c,render:u,renderCache:d,props:h,data:p,setupState:A,ctx:f,inheritAttrs:m}=e,g=rn(e);let v,y;try{if(4&n.shapeFlag){const e=i||r,t=e;v=Ii(u.call(t,e,d,h,A,p,f)),y=l}else{const e=t;0,v=Ii(e.length>1?e(h,{attrs:l,slots:s,emit:c}):e(h,null)),y=t.props?l:cn(l)}}catch(w){fi.length=0,kt(w,e,1),v=Mi(pi)}let b=v;if(y&&!1!==m){const e=Object.keys(y),{shapeFlag:t}=b;e.length&&7&t&&(o&&e.some(a)&&(y=un(y,o)),b=Pi(b,y,!1,!0))}return n.dirs&&(b=Pi(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),v=b,rn(g),v}const cn=e=>{let t;for(const n in e)("class"===n||"style"===n||o(n))&&((t||(t={}))[n]=e[n]);return t},un=(e,t)=>{const n={};for(const r in e)a(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function dn(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!en(n,o))return!0}return!1}function hn(e,t){return function(e,t,n=!0,r=!1){const i=tn||Ni;if(i){const n=i.type;{const e=Zi(n,!1);if(e&&(e===t||e===E(t)||e===T(E(t))))return n}const o=An(i[e]||n[e],t)||An(i.appContext[e],t);return!o&&r?n:o}}("components",e,!0,t)||e}const pn=Symbol.for("v-ndc");function An(e,t){return e&&(e[t]||e[E(t)]||e[T(E(t))])}function fn(e,t,n=Ni,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{ce();const i=Vi(n),o=It(t,n,e,r);return i(),ue(),o});return r?i.unshift(o):i.push(o),o}}const mn=e=>(t,n=Ni)=>{Ki&&"sp"!==e||fn(e,((...e)=>t(...e)),n)},gn=mn("bm"),vn=mn("m"),yn=mn("bu"),bn=mn("u"),wn=mn("bum"),xn=mn("um"),Cn=mn("sp"),Sn=mn("rtg"),Bn=mn("rtc");function _n(e,t=Ni){fn("ec",e,t)}function En(e,n){if(null===tn)return e;const r=Ji(tn),i=e.dirs||(e.dirs=[]);for(let o=0;o<n.length;o++){let[e,a,s,l=t]=n[o];e&&(A(e)&&(e={mounted:e,updated:e}),e.deep&&Rr(a),i.push({dir:e,instance:r,value:a,oldValue:void 0,arg:s,modifiers:l}))}return e}function Mn(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(ce(),It(l,n,8,[e.el,s,e,t]),ue())}}function Pn(e,t,n,r){let i;const o=n;if(d(e)||f(e)){i=new Array(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=t(e[n],n,void 0,o)}else if("number"==typeof e){i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,o)}else if(g(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,o)));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];i[r]=t(e[a],a,r,o)}}else i=[];return i}function Tn(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(d(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.key?(...e)=>{const t=r.fn(...e);return t&&(t.key=r.key),t}:r.fn)}return e}
/*! #__NO_SIDE_EFFECTS__ */function Dn(e,t){return A(e)?(()=>s({name:e.name},t,{setup:e}))():e}const Fn=e=>!!e.type.__asyncLoader;function In(e,t,n={},r,i){if(tn.isCE||tn.parent&&Fn(tn.parent)&&tn.parent.isCE)return"default"!==t&&(n.name=t),Mi("slot",n,r);let o=e[t];o&&o._c&&(o._d=!1),gi();const a=o&&kn(o(n)),s=xi(di,{key:n.key||a&&a.key||`_${t}`},a||[],a&&1===e._?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function kn(e){return e.some((e=>!Ci(e)||e.type!==pi&&!(e.type===di&&!kn(e.children))))?e:null}const On=e=>e?Gi(e)?Ji(e):On(e.parent):null,Ln=s(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>On(e.parent),$root:e=>On(e.root),$emit:e=>e.emit,$options:e=>Vn(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Wt(e.update)}),$nextTick:e=>e.n||(e.n=Vt.bind(e.proxy)),$watch:e=>Or.bind(e)}),Rn=(e,n)=>e!==t&&!e.__isScriptSetup&&u(e,n),Un={get({_:e},n){if("__v_skip"===n)return!0;const{ctx:r,setupState:i,data:o,props:a,accessCache:s,type:l,appContext:c}=e;let d;if("$"!==n[0]){const l=s[n];if(void 0!==l)switch(l){case 1:return i[n];case 2:return o[n];case 4:return r[n];case 3:return a[n]}else{if(Rn(i,n))return s[n]=1,i[n];if(o!==t&&u(o,n))return s[n]=2,o[n];if((d=e.propsOptions[0])&&u(d,n))return s[n]=3,a[n];if(r!==t&&u(r,n))return s[n]=4,r[n];Nn&&(s[n]=0)}}const h=Ln[n];let p,A;return h?("$attrs"===n&&be(e.attrs,0,""),h(e)):(p=l.__cssModules)&&(p=p[n])?p:r!==t&&u(r,n)?(s[n]=4,r[n]):(A=c.config.globalProperties,u(A,n)?A[n]:void 0)},set({_:e},n,r){const{data:i,setupState:o,ctx:a}=e;return Rn(o,n)?(o[n]=r,!0):i!==t&&u(i,n)?(i[n]=r,!0):!u(e.props,n)&&(("$"!==n[0]||!(n.slice(1)in e))&&(a[n]=r,!0))},has({_:{data:e,setupState:n,accessCache:r,ctx:i,appContext:o,propsOptions:a}},s){let l;return!!r[s]||e!==t&&u(e,s)||Rn(n,s)||(l=a[0])&&u(l,s)||u(i,s)||u(Ln,s)||u(o.config.globalProperties,s)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:u(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function zn(e){return d(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}let Nn=!0;function jn(e){const t=Vn(e),n=e.proxy,i=e.ctx;Nn=!1,t.beforeCreate&&Hn(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:s,watch:l,provide:c,inject:u,created:h,beforeMount:p,mounted:f,beforeUpdate:m,updated:v,activated:y,deactivated:b,beforeDestroy:w,beforeUnmount:x,destroyed:C,unmounted:S,render:B,renderTracked:_,renderTriggered:E,errorCaptured:M,serverPrefetch:P,expose:T,inheritAttrs:D,components:F,directives:I,filters:k}=t;if(u&&function(e,t){d(e)&&(e=Kn(e));for(const n in e){const r=e[n];let i;i=g(r)?"default"in r?rr(r.from||n,r.default,!0):rr(r.from||n):rr(r),yt(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[n]=i}}(u,i,null),s)for(const r in s){const e=s[r];A(e)&&(i[r]=e.bind(n))}if(o){const t=o.call(n,n);g(t)&&(e.data=it(t))}if(Nn=!0,a)for(const d in a){const e=a[d],t=A(e)?e.bind(n,n):A(e.get)?e.get.bind(n,n):r,o=!A(e)&&A(e.set)?e.set.bind(n):r,s=eo({get:t,set:o});Object.defineProperty(i,d,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e})}if(l)for(const r in l)Qn(l[r],i,n,r);if(c){const e=A(c)?c.call(n):c;Reflect.ownKeys(e).forEach((t=>{nr(t,e[t])}))}function O(e,t){d(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(h&&Hn(h,e,"c"),O(gn,p),O(vn,f),O(yn,m),O(bn,v),O(zr,y),O(Nr,b),O(_n,M),O(Bn,_),O(Sn,E),O(wn,x),O(xn,S),O(Cn,P),d(T))if(T.length){const t=e.exposed||(e.exposed={});T.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});B&&e.render===r&&(e.render=B),null!=D&&(e.inheritAttrs=D),F&&(e.components=F),I&&(e.directives=I)}function Hn(e,t,n){It(d(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Qn(e,t,n,r){const i=r.includes(".")?Lr(n,r):()=>n[r];if(f(e)){const n=t[e];A(n)&&Ir(i,n)}else if(A(e))Ir(i,e.bind(n));else if(g(e))if(d(e))e.forEach((e=>Qn(e,t,n,r)));else{const r=A(e.handler)?e.handler.bind(n):t[e.handler];A(r)&&Ir(i,r,e)}}function Vn(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:i.length||n||r?(l={},i.length&&i.forEach((e=>Wn(l,e,a,!0))),Wn(l,t,a)):l=t,g(t)&&o.set(t,l),l}function Wn(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Wn(e,o,n,!0),i&&i.forEach((t=>Wn(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=Gn[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const Gn={data:qn,props:$n,emits:$n,methods:Xn,computed:Xn,beforeCreate:Yn,created:Yn,beforeMount:Yn,mounted:Yn,beforeUpdate:Yn,updated:Yn,beforeDestroy:Yn,beforeUnmount:Yn,destroyed:Yn,unmounted:Yn,activated:Yn,deactivated:Yn,errorCaptured:Yn,serverPrefetch:Yn,components:Xn,directives:Xn,watch:function(e,t){if(!e)return t;if(!t)return e;const n=s(Object.create(null),e);for(const r in t)n[r]=Yn(e[r],t[r]);return n},provide:qn,inject:function(e,t){return Xn(Kn(e),Kn(t))}};function qn(e,t){return t?e?function(){return s(A(e)?e.call(this,this):e,A(t)?t.call(this,this):t)}:t:e}function Kn(e){if(d(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Yn(e,t){return e?[...new Set([].concat(e,t))]:t}function Xn(e,t){return e?s(Object.create(null),e,t):t}function $n(e,t){return e?d(e)&&d(t)?[...new Set([...e,...t])]:s(Object.create(null),zn(e),zn(null!=t?t:{})):t}function Jn(){return{app:null,config:{isNativeTag:i,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zn=0;function er(e,t){return function(n,r=null){A(n)||(n=s({},n)),null==r||g(r)||(r=null);const i=Jn(),o=new WeakSet;let a=!1;const l=i.app={_uid:Zn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:no,get config(){return i.config},set config(e){},use:(e,...t)=>(o.has(e)||(e&&A(e.install)?(o.add(e),e.install(l,...t)):A(e)&&(o.add(e),e(l,...t))),l),mixin:e=>(i.mixins.includes(e)||i.mixins.push(e),l),component:(e,t)=>t?(i.components[e]=t,l):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,l):i.directives[e],mount(o,s,c){if(!a){const u=Mi(n,r);return u.appContext=i,!0===c?c="svg":!1===c&&(c=void 0),s&&t?t(u,o):e(u,o,c),a=!0,l._container=o,o.__vue_app__=l,Ji(u.component)}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,l),runWithContext(e){const t=tr;tr=l;try{return e()}finally{tr=t}}};return l}}let tr=null;function nr(e,t){if(Ni){let n=Ni.provides;const r=Ni.parent&&Ni.parent.provides;r===n&&(n=Ni.provides=Object.create(r)),n[e]=t}else;}function rr(e,t,n=!1){const r=Ni||tn;if(r||tr){const i=r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:tr._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&A(t)?t.call(r&&r.proxy):t}}const ir={},or=()=>Object.create(ir),ar=e=>Object.getPrototypeOf(e)===ir;function sr(e,n,r,i){const[o,a]=e.propsOptions;let s,l=!1;if(n)for(let t in n){if(S(t))continue;const c=n[t];let d;o&&u(o,d=E(t))?a&&a.includes(d)?(s||(s={}))[d]=c:r[d]=c:en(e.emitsOptions,t)||t in i&&c===i[t]||(i[t]=c,l=!0)}if(a){const n=ht(r),i=s||t;for(let t=0;t<a.length;t++){const s=a[t];r[s]=lr(o,n,s,i[s],e,!u(i,s))}}return l}function lr(e,t,n,r,i,o){const a=e[n];if(null!=a){const e=u(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&!a.skipFactory&&A(e)){const{propsDefaults:o}=i;if(n in o)r=o[n];else{const a=Vi(i);r=o[n]=e.call(null,t),a()}}else r=e}a[0]&&(o&&!e?r=!1:!a[1]||""!==r&&r!==P(n)||(r=!0))}return r}function cr(e,r,i=!1){const o=r.propsCache,a=o.get(e);if(a)return a;const l=e.props,c={},h=[];let p=!1;if(!A(e)){const t=e=>{p=!0;const[t,n]=cr(e,r,!0);s(c,t),n&&h.push(...n)};!i&&r.mixins.length&&r.mixins.forEach(t),e.extends&&t(e.extends),e.mixins&&e.mixins.forEach(t)}if(!l&&!p)return g(e)&&o.set(e,n),n;if(d(l))for(let n=0;n<l.length;n++){const e=E(l[n]);ur(e)&&(c[e]=t)}else if(l)for(const t in l){const e=E(t);if(ur(e)){const n=l[t],r=c[e]=d(n)||A(n)?{type:n}:s({},n);if(r){const t=pr(Boolean,r.type),n=pr(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||u(r,"default"))&&h.push(e)}}}const f=[c,h];return g(e)&&o.set(e,f),f}function ur(e){return"$"!==e[0]&&!S(e)}function dr(e){if(null===e)return"null";if("function"==typeof e)return e.name||"";if("object"==typeof e){return e.constructor&&e.constructor.name||""}return""}function hr(e,t){return dr(e)===dr(t)}function pr(e,t){return d(t)?t.findIndex((t=>hr(t,e))):A(t)&&hr(t,e)?0:-1}const Ar=e=>"_"===e[0]||"$stable"===e,fr=e=>d(e)?e.map(Ii):[Ii(e)],mr=(e,t,n)=>{if(t._n)return t;const r=sn(((...e)=>fr(t(...e))),n);return r._c=!1,r},gr=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Ar(i))continue;const n=e[i];if(A(n))t[i]=mr(0,n,r);else if(null!=n){const e=fr(n);t[i]=()=>e}}},vr=(e,t)=>{const n=fr(t);e.slots.default=()=>n},yr=(e,t)=>{const n=e.slots=or();if(32&e.vnode.shapeFlag){const e=t._;e?(s(n,t),k(n,"_",e,!0)):gr(t,n)}else t&&vr(e,t)},br=(e,n,r)=>{const{vnode:i,slots:o}=e;let a=!0,l=t;if(32&i.shapeFlag){const e=n._;e?r&&1===e?a=!1:(s(o,n),r||1!==e||delete o._):(a=!n.$stable,gr(n,o)),l=n}else n&&(vr(e,n),l={default:1});if(a)for(const t in o)Ar(t)||null!=l[t]||delete o[t]};function wr(e,n,r,i,o=!1){if(d(e))return void e.forEach(((e,t)=>wr(e,n&&(d(n)?n[t]:n),r,i,o)));if(Fn(i)&&!o)return;const a=4&i.shapeFlag?Ji(i.component):i.el,s=o?null:a,{i:c,r:h}=e,p=n&&n.r,m=c.refs===t?c.refs={}:c.refs,g=c.setupState;if(null!=p&&p!==h&&(f(p)?(m[p]=null,u(g,p)&&(g[p]=null)):yt(p)&&(p.value=null)),A(h))Ft(h,c,12,[s,m]);else{const t=f(h),n=yt(h);if(t||n){const i=()=>{if(e.f){const n=t?u(g,h)?g[h]:m[h]:h.value;o?d(n)&&l(n,a):d(n)?n.includes(a)||n.push(a):t?(m[h]=[a],u(g,h)&&(g[h]=m[h])):(h.value=[a],e.k&&(m[e.k]=h.value))}else t?(m[h]=s,u(g,h)&&(g[h]=s)):n&&(h.value=s,e.k&&(m[e.k]=s))};s?(i.id=-1,xr(i,r)):i()}}}const xr=function(e,t){var n;t&&t.pendingBranch?d(e)?t.effects.push(...e):t.effects.push(e):(d(n=e)?zt.push(...n):Nt&&Nt.includes(n,n.allowRecurse?jt+1:jt)||zt.push(n),Gt())};function Cr(e){return function(e){U().__VUE__=!0;const{insert:i,remove:o,patchProp:a,createElement:s,createText:l,createComment:c,setText:d,setElementText:h,parentNode:p,nextSibling:A,setScopeId:f=r,insertStaticContent:m}=e,g=(e,t,n,r=null,i=null,o=null,a=void 0,s=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Si(e,t)&&(r=$(e),G(e,i,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case hi:y(e,t,n,r);break;case pi:b(e,t,n,r);break;case Ai:null==e&&w(t,n,r,a);break;case di:O(e,t,n,r,i,o,a,s,l);break;default:1&d?B(e,t,n,r,i,o,a,s,l):6&d?L(e,t,n,r,i,o,a,s,l):(64&d||128&d)&&c.process(e,t,n,r,i,o,a,s,l,te)}null!=u&&i&&wr(u,e&&e.ref,o,t||e,!t)},y=(e,t,n,r)=>{if(null==e)i(t.el=l(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&d(n,t.children)}},b=(e,t,n,r)=>{null==e?i(t.el=c(t.children||""),n,r):t.el=e.el},w=(e,t,n,r)=>{[e.el,e.anchor]=m(e.children,t,n,r,e.el,e.anchor)},x=({el:e,anchor:t},n,r)=>{let o;for(;e&&e!==t;)o=A(e),i(e,n,r),e=o;i(t,n,r)},C=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=A(e),o(e),e=n;o(t)},B=(e,t,n,r,i,o,a,s,l)=>{"svg"===t.type?a="svg":"math"===t.type&&(a="mathml"),null==e?_(t,n,r,i,o,a,s,l):D(e,t,i,o,a,s,l)},_=(e,t,n,r,o,l,c,u)=>{let d,p;const{props:A,shapeFlag:f,transition:m,dirs:g}=e;if(d=e.el=s(e.type,l,A&&A.is,A),8&f?h(d,e.children):16&f&&T(e.children,d,null,r,o,Sr(e,l),c,u),g&&Mn(e,null,r,"created"),M(d,e,e.scopeId,c,r),A){for(const t in A)"value"===t||S(t)||a(d,t,null,A[t],l,e.children,r,o,X);"value"in A&&a(d,"value",null,A.value,l),(p=A.onVnodeBeforeMount)&&Ri(p,r,e)}g&&Mn(e,null,r,"beforeMount");const v=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(o,m);v&&m.beforeEnter(d),i(d,t,n),((p=A&&A.onVnodeMounted)||v||g)&&xr((()=>{p&&Ri(p,r,e),v&&m.enter(d),g&&Mn(e,null,r,"mounted")}),o)},M=(e,t,n,r,i)=>{if(n&&f(e,n),r)for(let o=0;o<r.length;o++)f(e,r[o]);if(i){if(t===i.subTree){const t=i.vnode;M(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},T=(e,t,n,r,i,o,a,s,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=s?ki(e[c]):Ii(e[c]);g(null,l,t,n,r,i,o,a,s)}},D=(e,n,r,i,o,s,l)=>{const c=n.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:p}=n;u|=16&e.patchFlag;const A=e.props||t,f=n.props||t;let m;if(r&&Br(r,!1),(m=f.onVnodeBeforeUpdate)&&Ri(m,r,n,e),p&&Mn(n,e,r,"beforeUpdate"),r&&Br(r,!0),d?F(e.dynamicChildren,d,c,r,i,Sr(n,o),s):l||H(e,n,c,null,r,i,Sr(n,o),s,!1),u>0){if(16&u)k(c,n,A,f,r,i,o);else if(2&u&&A.class!==f.class&&a(c,"class",null,f.class,o),4&u&&a(c,"style",A.style,f.style,o),8&u){const t=n.dynamicProps;for(let n=0;n<t.length;n++){const s=t[n],l=A[s],u=f[s];u===l&&"value"!==s||a(c,s,l,u,o,e.children,r,i,X)}}1&u&&e.children!==n.children&&h(c,n.children)}else l||null!=d||k(c,n,A,f,r,i,o);((m=f.onVnodeUpdated)||p)&&xr((()=>{m&&Ri(m,r,n,e),p&&Mn(n,e,r,"updated")}),i)},F=(e,t,n,r,i,o,a)=>{for(let s=0;s<t.length;s++){const l=e[s],c=t[s],u=l.el&&(l.type===di||!Si(l,c)||70&l.shapeFlag)?p(l.el):n;g(l,c,u,null,r,i,o,a,!0)}},k=(e,n,r,i,o,s,l)=>{if(r!==i){if(r!==t)for(const t in r)S(t)||t in i||a(e,t,r[t],null,l,n.children,o,s,X);for(const t in i){if(S(t))continue;const c=i[t],u=r[t];c!==u&&"value"!==t&&a(e,t,u,c,l,n.children,o,s,X)}"value"in i&&a(e,"value",r.value,i.value,l)}},O=(e,t,n,r,o,a,s,c,u)=>{const d=t.el=e?e.el:l(""),h=t.anchor=e?e.anchor:l("");let{patchFlag:p,dynamicChildren:A,slotScopeIds:f}=t;f&&(c=c?c.concat(f):f),null==e?(i(d,n,r),i(h,n,r),T(t.children||[],n,h,o,a,s,c,u)):p>0&&64&p&&A&&e.dynamicChildren?(F(e.dynamicChildren,A,n,o,a,s,c),(null!=t.key||o&&t===o.subTree)&&_r(e,t,!0)):H(e,t,n,h,o,a,s,c,u)},L=(e,t,n,r,i,o,a,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,l):R(t,n,r,i,o,a,l):z(e,t,l)},R=(e,n,r,i,o,a,s)=>{const l=e.component=function(e,n,r){const i=e.type,o=(n?n.appContext:e.appContext)||Ui,a={uid:zi++,vnode:e,type:i,parent:n,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Z(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cr(i,o),emitsOptions:Zt(i,o),emit:null,emitted:null,propsDefaults:t,inheritAttrs:i.inheritAttrs,ctx:t,data:t,props:t,attrs:t,slots:t,refs:t,setupState:t,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};a.ctx={_:a},a.root=n?n.root:a,a.emit=Jt.bind(null,a),e.ce&&e.ce(a);return a}(e,i,o);if(Ur(e)&&(l.ctx.renderer=te),function(e,t=!1){t&&Qi(t);const{props:n,children:r}=e.vnode,i=Gi(e);(function(e,t,n,r=!1){const i={},o=or();e.propsDefaults=Object.create(null),sr(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:ot(i):e.type.props?e.props=i:e.props=o,e.attrs=o})(e,n,i,t),yr(e,r);const o=i?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Un);const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,$i),slots:e.slots,emit:e.emit,expose:t}}(e):null,i=Vi(e);ce();const o=Ft(r,e,0,[e.props,n]);if(ue(),i(),v(o)){if(o.then(Wi,Wi),t)return o.then((n=>{Yi(e,n,t)})).catch((t=>{kt(t,e,0)}));e.asyncDep=o}else Yi(e,o,t)}else Xi(e,t)}(e,t):void 0;t&&Qi(!1)}(l),l.asyncDep){if(o&&o.registerDep(l,N,s),!e.el){const e=l.subTree=Mi(pi);b(null,e,n,r)}}else N(l,e,n,r,o,a,s)},z=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||dn(r,a,c):!!a);if(1024&l)return!0;if(16&l)return r?dn(r,a,c):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!en(c,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void j(r,t,n);r.next=t,function(e){const t=Rt.indexOf(e);t>Ut&&Rt.splice(t,1)}(r.update),r.effect.dirty=!0,r.update()}else t.el=e.el,r.vnode=t},N=(e,t,n,i,o,a,s)=>{const l=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:i,vnode:c}=e;{const n=Er(e);if(n)return t&&(t.el=c.el,j(e,t,s)),void n.asyncDep.then((()=>{e.isUnmounted||l()}))}let u,d=t;Br(e,!1),t?(t.el=c.el,j(e,t,s)):t=c,n&&I(n),(u=t.props&&t.props.onVnodeBeforeUpdate)&&Ri(u,i,t,c),Br(e,!0);const h=ln(e),A=e.subTree;e.subTree=h,g(A,h,p(A.el),$(A),e,o,a),t.el=h.el,null===d&&function({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}(e,h.el),r&&xr(r,o),(u=t.props&&t.props.onVnodeUpdated)&&xr((()=>Ri(u,i,t,c)),o)}else{let r;const{el:s,props:l}=t,{bm:c,m:u,parent:d}=e,h=Fn(t);if(Br(e,!1),c&&I(c),!h&&(r=l&&l.onVnodeBeforeMount)&&Ri(r,d,t),Br(e,!0),s&&ie){const n=()=>{e.subTree=ln(e),ie(s,e.subTree,e,o,null)};h?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const r=e.subTree=ln(e);g(null,r,n,i,e,o,a),t.el=r.el}if(u&&xr(u,o),!h&&(r=l&&l.onVnodeMounted)){const e=t;xr((()=>Ri(r,d,e)),o)}(256&t.shapeFlag||d&&Fn(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&xr(e.a,o),e.isMounted=!0,t=n=i=null}},c=e.effect=new ne(l,r,(()=>Wt(u)),e.scope),u=e.update=()=>{c.dirty&&c.run()};u.id=e.uid,Br(e,!0),u()},j=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=ht(i),[l]=e.propsOptions;let c=!1;if(!(r||a>0)||16&a){let r;sr(e,t,i,o)&&(c=!0);for(const o in s)t&&(u(t,o)||(r=P(o))!==o&&u(t,r))||(l?!n||void 0===n[o]&&void 0===n[r]||(i[o]=lr(l,s,o,void 0,e,!0)):delete i[o]);if(o!==s)for(const e in o)t&&u(t,e)||(delete o[e],c=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];if(en(e.emitsOptions,a))continue;const d=t[a];if(l)if(u(o,a))d!==o[a]&&(o[a]=d,c=!0);else{const t=E(a);i[t]=lr(l,s,t,d,e,!1)}else d!==o[a]&&(o[a]=d,c=!0)}}c&&we(e.attrs,"set","")}(e,t.props,r,n),br(e,t.children,n),ce(),qt(e),ue()},H=(e,t,n,r,i,o,a,s,l=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:A}=t;if(p>0){if(128&p)return void V(c,d,n,r,i,o,a,s,l);if(256&p)return void Q(c,d,n,r,i,o,a,s,l)}8&A?(16&u&&X(c,i,o),d!==c&&h(n,d)):16&u?16&A?V(c,d,n,r,i,o,a,s,l):X(c,i,o,!0):(8&u&&h(n,""),16&A&&T(d,n,r,i,o,a,s,l))},Q=(e,t,r,i,o,a,s,l,c)=>{t=t||n;const u=(e=e||n).length,d=t.length,h=Math.min(u,d);let p;for(p=0;p<h;p++){const n=t[p]=c?ki(t[p]):Ii(t[p]);g(e[p],n,r,null,o,a,s,l,c)}u>d?X(e,o,a,!0,!1,h):T(t,r,i,o,a,s,l,c,h)},V=(e,t,r,i,o,a,s,l,c)=>{let u=0;const d=t.length;let h=e.length-1,p=d-1;for(;u<=h&&u<=p;){const n=e[u],i=t[u]=c?ki(t[u]):Ii(t[u]);if(!Si(n,i))break;g(n,i,r,null,o,a,s,l,c),u++}for(;u<=h&&u<=p;){const n=e[h],i=t[p]=c?ki(t[p]):Ii(t[p]);if(!Si(n,i))break;g(n,i,r,null,o,a,s,l,c),h--,p--}if(u>h){if(u<=p){const e=p+1,n=e<d?t[e].el:i;for(;u<=p;)g(null,t[u]=c?ki(t[u]):Ii(t[u]),r,n,o,a,s,l,c),u++}}else if(u>p)for(;u<=h;)G(e[u],o,a,!0),u++;else{const A=u,f=u,m=new Map;for(u=f;u<=p;u++){const e=t[u]=c?ki(t[u]):Ii(t[u]);null!=e.key&&m.set(e.key,u)}let v,y=0;const b=p-f+1;let w=!1,x=0;const C=new Array(b);for(u=0;u<b;u++)C[u]=0;for(u=A;u<=h;u++){const n=e[u];if(y>=b){G(n,o,a,!0);continue}let i;if(null!=n.key)i=m.get(n.key);else for(v=f;v<=p;v++)if(0===C[v-f]&&Si(n,t[v])){i=v;break}void 0===i?G(n,o,a,!0):(C[i-f]=u+1,i>=x?x=i:w=!0,g(n,t[i],r,null,o,a,s,l,c),y++)}const S=w?function(e){const t=e.slice(),n=[0];let r,i,o,a,s;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,e[n[s]]<l?o=s+1:a=s;l<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];for(;o-- >0;)n[o]=a,a=t[a];return n}(C):n;for(v=S.length-1,u=b-1;u>=0;u--){const e=f+u,n=t[e],h=e+1<d?t[e+1].el:i;0===C[u]?g(null,n,r,h,o,a,s,l,c):w&&(v<0||u!==S[v]?W(n,r,h,2):v--)}}},W=(e,t,n,r,o=null)=>{const{el:a,type:s,transition:l,children:c,shapeFlag:u}=e;if(6&u)return void W(e.component.subTree,t,n,r);if(128&u)return void e.suspense.move(t,n,r);if(64&u)return void s.move(e,t,n,te);if(s===di){i(a,t,n);for(let e=0;e<c.length;e++)W(c[e],t,n,r);return void i(e.anchor,t,n)}if(s===Ai)return void x(e,t,n);if(2!==r&&1&u&&l)if(0===r)l.beforeEnter(a),i(a,t,n),xr((()=>l.enter(a)),o);else{const{leave:e,delayLeave:r,afterLeave:o}=l,s=()=>i(a,t,n),c=()=>{e(a,(()=>{s(),o&&o()}))};r?r(a,s,c):c()}else i(a,t,n)},G=(e,t,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:h,memoIndex:p}=e;if(-2===d&&(i=!1),null!=s&&wr(s,null,n,e,!0),null!=p&&(t.renderCache[p]=void 0),256&u)return void t.ctx.deactivate(e);const A=1&u&&h,f=!Fn(e);let m;if(f&&(m=a&&a.onVnodeBeforeUnmount)&&Ri(m,t,e),6&u)Y(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);A&&Mn(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,te,r):c&&(o!==di||d>0&&64&d)?X(c,t,n,!1,!0):(o===di&&384&d||!i&&16&u)&&X(l,t,n),r&&q(e)}(f&&(m=a&&a.onVnodeUnmounted)||A)&&xr((()=>{m&&Ri(m,t,e),A&&Mn(e,null,t,"unmounted")}),n)},q=e=>{const{type:t,el:n,anchor:r,transition:i}=e;if(t===di)return void K(n,r);if(t===Ai)return void C(e);const a=()=>{o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:r}=i,o=()=>t(n,a);r?r(e.el,a,o):o()}else a()},K=(e,t)=>{let n;for(;e!==t;)n=A(e),o(e),e=n;o(t)},Y=(e,t,n)=>{const{bum:r,scope:i,update:o,subTree:a,um:s,m:l,a:c}=e;Mr(l),Mr(c),r&&I(r),i.stop(),o&&(o.active=!1,G(a,e,t,n)),s&&xr(s,t),xr((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},X=(e,t,n,r=!1,i=!1,o=0)=>{for(let a=o;a<e.length;a++)G(e[a],t,n,r,i)},$=e=>6&e.shapeFlag?$(e.component.subTree):128&e.shapeFlag?e.suspense.next():A(e.anchor||e.el);let J=!1;const ee=(e,t,n)=>{null==e?t._vnode&&G(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,n),J||(J=!0,qt(),Kt(),J=!1),t._vnode=e},te={p:g,um:G,m:W,r:q,mt:R,mc:T,pc:H,pbc:F,n:$,o:e};let re,ie;return{render:ee,hydrate:re,createApp:er(ee,re)}}(e)}function Sr({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Br({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function _r(e,t,n=!1){const r=e.children,i=t.children;if(d(r)&&d(i))for(let o=0;o<r.length;o++){const e=r[o];let t=i[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[o]=ki(i[o]),t.el=e.el),n||-2===t.patchFlag||_r(e,t)),t.type===hi&&(t.el=e.el)}}function Er(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Er(t)}function Mr(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const Pr=Symbol.for("v-scx"),Tr=()=>rr(Pr);function Dr(e,t){return kr(e,null,t)}const Fr={};function Ir(e,t,n){return kr(e,t,n)}function kr(e,n,{immediate:i,deep:o,flush:a,once:s,onTrack:c,onTrigger:u}=t){if(n&&s){const e=n;n=(...t)=>{e(...t),_()}}const h=Ni,p=e=>!0===o?e:Rr(e,!1===o?1:void 0);let f,m,g=!1,v=!1;if(yt(e)?(f=()=>e.value,g=ut(e)):lt(e)?(f=()=>p(e),g=!0):d(e)?(v=!0,g=e.some((e=>lt(e)||ut(e))),f=()=>e.map((e=>yt(e)?e.value:lt(e)?p(e):A(e)?Ft(e,h,2):void 0))):f=A(e)?n?()=>Ft(e,h,2):()=>(m&&m(),It(e,h,3,[b])):r,n&&o){const e=f;f=()=>Rr(e())}let y,b=e=>{m=S.onStop=()=>{Ft(e,h,4),m=S.onStop=void 0}};if(Ki){if(b=r,n?i&&It(n,h,3,[f(),v?[]:void 0,b]):f(),"sync"!==a)return r;{const e=Tr();y=e.__watcherHandles||(e.__watcherHandles=[])}}let w=v?new Array(e.length).fill(Fr):Fr;const x=()=>{if(S.active&&S.dirty)if(n){const e=S.run();(o||g||(v?e.some(((e,t)=>F(e,w[t]))):F(e,w)))&&(m&&m(),It(n,h,3,[e,w===Fr?void 0:v&&w[0]===Fr?[]:w,b]),w=e)}else S.run()};let C;x.allowRecurse=!!n,"sync"===a?C=x:"post"===a?C=()=>xr(x,h&&h.suspense):(x.pre=!0,h&&(x.id=h.uid),C=()=>Wt(x));const S=new ne(f,r,C),B=te(),_=()=>{S.stop(),B&&l(B.effects,S)};return n?i?x():w=S.run():"post"===a?xr(S.run.bind(S),h&&h.suspense):S.run(),y&&y.push(_),_}function Or(e,t,n){const r=this.proxy,i=f(e)?e.includes(".")?Lr(r,e):()=>r[e]:e.bind(r,r);let o;A(t)?o=t:(o=t.handler,n=t);const a=Vi(this),s=kr(i,o.bind(r),n);return a(),s}function Lr(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Rr(e,t=1/0,n){if(t<=0||!g(e)||e.__v_skip)return e;if((n=n||new Set).has(e))return e;if(n.add(e),t--,yt(e))Rr(e.value,t,n);else if(d(e))for(let r=0;r<e.length;r++)Rr(e[r],t,n);else if(p(e)||h(e))e.forEach((e=>{Rr(e,t,n)}));else if(x(e)){for(const r in e)Rr(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Rr(e[r],t,n)}return e}const Ur=e=>e.type.__isKeepAlive;function zr(e,t){jr(e,"a",t)}function Nr(e,t){jr(e,"da",t)}function jr(e,t,n=Ni){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(fn(t,r,n),n){let e=n.parent;for(;e&&e.parent;)Ur(e.parent.vnode)&&Hr(r,t,n,e),e=e.parent}}function Hr(e,t,n,r){const i=fn(t,e,r,!0);xn((()=>{l(r[t],i)}),n)}const Qr=Symbol("_leaveCb"),Vr=Symbol("_enterCb");function Wr(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vn((()=>{e.isMounted=!0})),wn((()=>{e.isUnmounting=!0})),e}const Gr=[Function,Array],qr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Gr,onEnter:Gr,onAfterEnter:Gr,onEnterCancelled:Gr,onBeforeLeave:Gr,onLeave:Gr,onAfterLeave:Gr,onLeaveCancelled:Gr,onBeforeAppear:Gr,onAppear:Gr,onAfterAppear:Gr,onAppearCancelled:Gr},Kr=e=>{const t=e.subTree;return t.component?Kr(t.component):t},Yr={name:"BaseTransition",props:qr,setup(e,{slots:t}){const n=ji(),r=Wr();return()=>{const i=t.default&&ni(t.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1)for(const e of i)if(e.type!==pi){o=e;break}const a=ht(e),{mode:s}=a;if(r.isLeaving)return Zr(o);const l=ei(o);if(!l)return Zr(o);let c=Jr(l,a,r,n,(e=>c=e));ti(l,c);const u=n.subTree,d=u&&ei(u);if(d&&d.type!==pi&&!Si(l,d)&&Kr(n).type!==pi){const e=Jr(d,a,r,n);if(ti(d,e),"out-in"===s&&l.type!==pi)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&(n.effect.dirty=!0,n.update())},Zr(o);"in-out"===s&&l.type!==pi&&(e.delayLeave=(e,t,n)=>{$r(r,d)[String(d.key)]=d,e[Qr]=()=>{t(),e[Qr]=void 0,delete c.delayedLeave},c.delayedLeave=n})}return o}}},Xr=Yr;function $r(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Jr(e,t,n,r,i){const{appear:o,mode:a,persisted:s=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:p,onLeave:A,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=t,w=String(e.key),x=$r(n,e),C=(e,t)=>{e&&It(e,r,9,t)},S=(e,t)=>{const n=t[1];C(e,t),d(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},B={mode:a,persisted:s,beforeEnter(t){let r=l;if(!n.isMounted){if(!o)return;r=g||l}t[Qr]&&t[Qr](!0);const i=x[w];i&&Si(e,i)&&i.el[Qr]&&i.el[Qr](),C(r,[t])},enter(e){let t=c,r=u,i=h;if(!n.isMounted){if(!o)return;t=v||c,r=y||u,i=b||h}let a=!1;const s=e[Vr]=t=>{a||(a=!0,C(t?i:r,[e]),B.delayedLeave&&B.delayedLeave(),e[Vr]=void 0)};t?S(t,[e,s]):s()},leave(t,r){const i=String(e.key);if(t[Vr]&&t[Vr](!0),n.isUnmounting)return r();C(p,[t]);let o=!1;const a=t[Qr]=n=>{o||(o=!0,r(),C(n?m:f,[t]),t[Qr]=void 0,x[i]===e&&delete x[i])};x[i]=e,A?S(A,[t,a]):a()},clone(e){const o=Jr(e,t,n,r,i);return i&&i(o),o}};return B}function Zr(e){if(Ur(e))return(e=Pi(e)).children=null,e}function ei(e){if(!Ur(e))return e;const{shapeFlag:t,children:n}=e;if(n){if(16&t)return n[0];if(32&t&&A(n.default))return n.default()}}function ti(e,t){6&e.shapeFlag&&e.component?ti(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ni(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let a=e[o];const s=null==n?a.key:String(n)+String(null!=a.key?a.key:o);a.type===di?(128&a.patchFlag&&i++,r=r.concat(ni(a.children,t,s))):(t||a.type!==pi)&&r.push(null!=s?Pi(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}const ri=e=>e&&(e.disabled||""===e.disabled),ii=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,oi=e=>"function"==typeof MathMLElement&&e instanceof MathMLElement,ai=(e,t)=>{const n=e&&e.to;if(f(n)){if(t){return t(n)}return null}return n},si={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,o,a,s,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:A,createText:f,createComment:m}}=c,g=ri(t.props);let{shapeFlag:v,children:y,dynamicChildren:b}=t;if(null==e){const e=t.el=f(""),c=t.anchor=f("");p(e,n,r),p(c,n,r);const d=t.target=ai(t.props,A),h=t.targetAnchor=f("");d&&(p(h,d),"svg"===a||ii(d)?a="svg":("mathml"===a||oi(d))&&(a="mathml"));const m=(e,t)=>{16&v&&u(y,e,t,i,o,a,s,l)};g?m(n,c):d&&m(d,h)}else{t.el=e.el;const r=t.anchor=e.anchor,u=t.target=e.target,p=t.targetAnchor=e.targetAnchor,f=ri(e.props),m=f?n:u,v=f?r:p;if("svg"===a||ii(u)?a="svg":("mathml"===a||oi(u))&&(a="mathml"),b?(h(e.dynamicChildren,b,m,i,o,a,s),_r(e,t,!0)):l||d(e,t,m,v,i,o,a,s,!1),g)f?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):li(t,n,r,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=ai(t.props,A);e&&li(t,e,null,c,0)}else f&&li(t,u,p,c,1)}ui(t)},remove(e,t,n,{um:r,o:{remove:i}},o){const{shapeFlag:a,children:s,anchor:l,targetAnchor:c,target:u,props:d}=e;if(u&&i(c),o&&i(l),16&a){const e=o||!ri(d);for(let i=0;i<s.length;i++){const o=s[i];r(o,t,n,e,!!o.dynamicChildren)}}},move:li,hydrate:function(e,t,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:l}},c){const u=t.target=ai(t.props,l);if(u){const l=u._lpa||u.firstChild;if(16&t.shapeFlag)if(ri(t.props))t.anchor=c(a(e),t,s(e),n,r,i,o),t.targetAnchor=l;else{t.anchor=a(e);let s=l;for(;s;)if(s=a(s),s&&8===s.nodeType&&"teleport anchor"===s.data){t.targetAnchor=s,u._lpa=t.targetAnchor&&a(t.targetAnchor);break}c(l,t,u,n,r,i,o)}ui(t)}return t.anchor&&a(t.anchor)}};function li(e,t,n,{o:{insert:r},m:i},o=2){0===o&&r(e.targetAnchor,t,n);const{el:a,anchor:s,shapeFlag:l,children:c,props:u}=e,d=2===o;if(d&&r(a,t,n),(!d||ri(u))&&16&l)for(let h=0;h<c.length;h++)i(c[h],t,n,2);d&&r(s,t,n)}const ci=si;function ui(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n&&n!==e.targetAnchor;)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const di=Symbol.for("v-fgt"),hi=Symbol.for("v-txt"),pi=Symbol.for("v-cmt"),Ai=Symbol.for("v-stc"),fi=[];let mi=null;function gi(e=!1){fi.push(mi=e?null:[])}let vi=1;function yi(e){vi+=e}function bi(e){return e.dynamicChildren=vi>0?mi||n:null,fi.pop(),mi=fi[fi.length-1]||null,vi>0&&mi&&mi.push(e),e}function wi(e,t,n,r,i,o){return bi(Ei(e,t,n,r,i,o,!0))}function xi(e,t,n,r,i){return bi(Mi(e,t,n,r,i,!0))}function Ci(e){return!!e&&!0===e.__v_isVNode}function Si(e,t){return e.type===t.type&&e.key===t.key}const Bi=({key:e})=>null!=e?e:null,_i=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?f(e)||yt(e)||A(e)?{i:tn,r:e,k:t,f:!!n}:e:null);function Ei(e,t=null,n=null,r=0,i=null,o=(e===di?0:1),a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Bi(t),ref:t&&_i(t),scopeId:nn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:tn};return s?(Oi(l,n),128&o&&e.normalize(l)):n&&(l.shapeFlag|=f(n)?8:16),vi>0&&!a&&mi&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&mi.push(l),l}const Mi=function(e,t=null,n=null,r=0,i=null,o=!1){e&&e!==pn||(e=pi);if(Ci(e)){const r=Pi(e,t,!0);return n&&Oi(r,n),vi>0&&!o&&mi&&(6&r.shapeFlag?mi[mi.indexOf(e)]=r:mi.push(r)),r.patchFlag=-2,r}a=e,A(a)&&"__vccOpts"in a&&(e=e.__vccOpts);var a;if(t){t=function(e){return e?dt(e)||ar(e)?s({},e):e:null}(t);let{class:e,style:n}=t;e&&!f(e)&&(t.class=V(e)),g(n)&&(dt(n)&&!d(n)&&(n=s({},n)),t.style=z(n))}const l=f(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:g(e)?4:A(e)?2:0;return Ei(e,t,n,r,i,l,o,!0)};function Pi(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:a,children:s,transition:l}=e,c=t?Li(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Bi(c),ref:t&&t.ref?n&&o?d(o)?o.concat(_i(t)):[o,_i(t)]:_i(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==di?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pi(e.ssContent),ssFallback:e.ssFallback&&Pi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&ti(u,l.clone(u)),u}function Ti(e=" ",t=0){return Mi(hi,null,e,t)}function Di(e,t){const n=Mi(Ai,null,e);return n.staticCount=t,n}function Fi(e="",t=!1){return t?(gi(),xi(pi,null,e)):Mi(pi,null,e)}function Ii(e){return null==e||"boolean"==typeof e?Mi(pi):d(e)?Mi(di,null,e.slice()):"object"==typeof e?ki(e):Mi(hi,null,String(e))}function ki(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Pi(e)}function Oi(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(d(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),Oi(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||ar(t)?3===r&&tn&&(1===tn.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=tn}}else A(t)?(t={default:t,_ctx:tn},n=32):(t=String(t),64&r?(n=16,t=[Ti(t)]):n=8);e.children=t,e.shapeFlag|=n}function Li(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=V([t.class,r.class]));else if("style"===e)t.style=z([t.style,r.style]);else if(o(e)){const n=t[e],i=r[e];!i||n===i||d(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}function Ri(e,t,n,r=null){It(e,t,7,[n,r])}const Ui=Jn();let zi=0;let Ni=null;const ji=()=>Ni||tn;let Hi,Qi;{const e=U(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach((t=>t(e))):r[0](e)}};Hi=t("__VUE_INSTANCE_SETTERS__",(e=>Ni=e)),Qi=t("__VUE_SSR_SETTERS__",(e=>Ki=e))}const Vi=e=>{const t=Ni;return Hi(e),e.scope.on(),()=>{e.scope.off(),Hi(t)}},Wi=()=>{Ni&&Ni.scope.off(),Hi(null)};function Gi(e){return 4&e.vnode.shapeFlag}let qi,Ki=!1;function Yi(e,t,n){A(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:g(t)&&(e.setupState=_t(t)),Xi(e,n)}function Xi(e,t,n){const i=e.type;if(!e.render){if(!t&&qi&&!i.render){const t=i.template||Vn(e).template;if(t){const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:o,compilerOptions:a}=i,l=s(s({isCustomElement:n,delimiters:o},r),a);i.render=qi(t,l)}}e.render=i.render||r}{const t=Vi(e);ce();try{jn(e)}finally{ue(),t()}}}const $i={get:(e,t)=>(be(e,0,""),e[t])};function Ji(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(_t(pt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in Ln?Ln[n](e):void 0,has:(e,t)=>t in e||t in Ln})):e.proxy}function Zi(e,t=!0){return A(e)?e.displayName||e.name:e.name||t&&e.__name}const eo=(e,t)=>{const n=function(e,t,n=!1){let i,o;const a=A(e);return a?(i=e,o=r):(i=e.get,o=e.set),new mt(i,o,a||!o,n)}(e,0,Ki);return n};function to(e,t,n){const r=arguments.length;return 2===r?g(t)&&!d(t)?Ci(t)?Mi(e,null,[t]):Mi(e,t):Mi(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Ci(n)&&(n=[n]),Mi(e,t,n))}const no="3.4.31",ro="undefined"!=typeof document?document:null,io=ro&&ro.createElement("template"),oo={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i="svg"===t?ro.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?ro.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?ro.createElement(e,{is:n}):ro.createElement(e);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>ro.createTextNode(e),createComment:e=>ro.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ro.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==o&&(i=i.nextSibling););else{io.innerHTML="svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e;const i=io.content;if("svg"===r||"mathml"===r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ao="transition",so="animation",lo=Symbol("_vtc"),co=(e,{slots:t})=>to(Xr,fo(e),t);
/**
* @vue/runtime-dom v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/co.displayName="Transition";const uo={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ho=co.props=s({},qr,uo),po=(e,t=[])=>{d(e)?e.forEach((e=>e(...t))):e&&e(...t)},Ao=e=>!!e&&(d(e)?e.some((e=>e.length>1)):e.length>1);function fo(e){const t={};for(const s in e)s in uo||(t[s]=e[s]);if(!1===e.css)return t;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:u=a,appearToClass:d=l,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:A=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(g(e))return[mo(e.enter),mo(e.leave)];{const t=mo(e);return[t,t]}}(i),m=f&&f[0],v=f&&f[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:w,onLeave:x,onLeaveCancelled:C,onBeforeAppear:S=y,onAppear:B=b,onAppearCancelled:_=w}=t,E=(e,t,n)=>{vo(e,t?d:l),vo(e,t?u:a),n&&n()},M=(e,t)=>{e._isLeaving=!1,vo(e,h),vo(e,A),vo(e,p),t&&t()},P=e=>(t,n)=>{const i=e?B:b,a=()=>E(t,e,n);po(i,[t,a]),yo((()=>{vo(t,e?c:o),go(t,e?d:l),Ao(i)||wo(t,r,m,a)}))};return s(t,{onBeforeEnter(e){po(y,[e]),go(e,o),go(e,a)},onBeforeAppear(e){po(S,[e]),go(e,c),go(e,u)},onEnter:P(!1),onAppear:P(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>M(e,t);go(e,h),go(e,p),Bo(),yo((()=>{e._isLeaving&&(vo(e,h),go(e,A),Ao(x)||wo(e,r,v,n))})),po(x,[e,n])},onEnterCancelled(e){E(e,!1),po(w,[e])},onAppearCancelled(e){E(e,!0),po(_,[e])},onLeaveCancelled(e){M(e),po(C,[e])}})}function mo(e){return L(e)}function go(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e[lo]||(e[lo]=new Set)).add(t)}function vo(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const n=e[lo];n&&(n.delete(t),n.size||(e[lo]=void 0))}function yo(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let bo=0;function wo(e,t,n,r){const i=e._endId=++bo,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:l}=xo(e,t);if(!a)return r();const c=a+"end";let u=0;const d=()=>{e.removeEventListener(c,h),o()},h=t=>{t.target===e&&++u>=l&&d()};setTimeout((()=>{u<l&&d()}),s+1),e.addEventListener(c,h)}function xo(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(`${ao}Delay`),o=r(`${ao}Duration`),a=Co(i,o),s=r(`${so}Delay`),l=r(`${so}Duration`),c=Co(s,l);let u=null,d=0,h=0;t===ao?a>0&&(u=ao,d=a,h=o.length):t===so?c>0&&(u=so,d=c,h=l.length):(d=Math.max(a,c),u=d>0?a>c?ao:so:null,h=u?u===ao?o.length:l.length:0);return{type:u,timeout:d,propCount:h,hasTransform:u===ao&&/\b(transform|all)(,|$)/.test(r(`${ao}Property`).toString())}}function Co(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>So(t)+So(e[n]))))}function So(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function Bo(){return document.body.offsetHeight}const _o=Symbol("_vod"),Eo=Symbol("_vsh"),Mo={beforeMount(e,{value:t},{transition:n}){e[_o]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Po(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Po(e,!0),r.enter(e)):r.leave(e,(()=>{Po(e,!1)})):Po(e,t))},beforeUnmount(e,{value:t}){Po(e,t)}};function Po(e,t){e.style.display=t?e[_o]:"none",e[Eo]=!t}const To=Symbol(""),Do=/(^|;)\s*display\s*:/;const Fo=/\s*!important$/;function Io(e,t,n){if(d(n))n.forEach((n=>Io(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Oo[t];if(n)return n;let r=E(t);if("filter"!==r&&r in e)return Oo[t]=r;r=T(r);for(let i=0;i<ko.length;i++){const n=ko[i]+r;if(n in e)return Oo[t]=n}return t}(e,t);Fo.test(n)?e.setProperty(P(r),n.replace(Fo,""),"important"):e[r]=n}}const ko=["Webkit","Moz","ms"],Oo={};const Lo="http://www.w3.org/1999/xlink";function Ro(e,t,n,r,i,o=W(t)){r&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(Lo,t.slice(6,t.length)):e.setAttributeNS(Lo,t,n):null==n||o&&!G(n)?e.removeAttribute(t):e.setAttribute(t,o?"":m(n)?String(n):n)}function Uo(e,t,n,r){e.addEventListener(t,n,r)}const zo=Symbol("_vei");function No(e,t,n,r,i=null){const o=e[zo]||(e[zo]={}),a=o[t];if(r&&a)a.value=r;else{const[n,s]=function(e){let t;if(jo.test(e)){let n;for(t={};n=e.match(jo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):P(e.slice(2));return[n,t]}(t);if(r){const a=o[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();It(function(e,t){if(d(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Vo(),n}(r,i);Uo(e,n,a,s)}else a&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,a,s),o[t]=void 0)}}const jo=/(?:Once|Passive|Capture)$/;let Ho=0;const Qo=Promise.resolve(),Vo=()=>Ho||(Qo.then((()=>Ho=0)),Ho=Date.now());const Wo=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const Go=new WeakMap,qo=new WeakMap,Ko=Symbol("_moveCb"),Yo=Symbol("_enterCb"),Xo={name:"TransitionGroup",props:s({},ho,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=ji(),r=Wr();let i,o;return bn((()=>{if(!i.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,n){const r=e.cloneNode(),i=e[lo];i&&i.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))}));n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const o=1===t.nodeType?t:t.parentNode;o.appendChild(r);const{hasTransform:a}=xo(r);return o.removeChild(r),a}(i[0].el,n.vnode.el,t))return;i.forEach(Jo),i.forEach(Zo);const r=i.filter(ea);Bo(),r.forEach((e=>{const n=e.el,r=n.style;go(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const i=n[Ko]=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n[Ko]=null,vo(n,t))};n.addEventListener("transitionend",i)}))})),()=>{const a=ht(e),s=fo(a);let l=a.tag||di;if(i=[],o)for(let e=0;e<o.length;e++){const t=o[e];t.el&&t.el instanceof Element&&(i.push(t),ti(t,Jr(t,s,r,n)),Go.set(t,t.el.getBoundingClientRect()))}o=t.default?ni(t.default()):[];for(let e=0;e<o.length;e++){const t=o[e];null!=t.key&&ti(t,Jr(t,s,r,n))}return Mi(l,null,o)}}},$o=Xo;function Jo(e){const t=e.el;t[Ko]&&t[Ko](),t[Yo]&&t[Yo]()}function Zo(e){qo.set(e,e.el.getBoundingClientRect())}function ea(e){const t=Go.get(e),n=qo.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${i}px)`,t.transitionDuration="0s",e}}const ta=e=>{const t=e.props["onUpdate:modelValue"]||!1;return d(t)?e=>I(t,e):t};function na(e){e.target.composing=!0}function ra(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ia=Symbol("_assign"),oa={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[ia]=ta(i);const o=r||i.props&&"number"===i.props.type;Uo(e,t?"change":"input",(t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),o&&(r=O(r)),e[ia](r)})),n&&Uo(e,"change",(()=>{e.value=e.value.trim()})),t||(Uo(e,"compositionstart",na),Uo(e,"compositionend",ra),Uo(e,"change",ra))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},a){if(e[ia]=ta(a),e.composing)return;const s=null==t?"":t;if((!o&&"number"!==e.type||/^0\d/.test(e.value)?e.value:O(e.value))!==s){if(document.activeElement===e&&"range"!==e.type){if(r&&t===n)return;if(i&&e.value.trim()===s)return}e.value=s}}},aa=["ctrl","shift","alt","meta"],sa={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>aa.some((n=>e[`${n}Key`]&&!t.includes(n)))},la=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(n,...r)=>{for(let e=0;e<t.length;e++){const r=sa[t[e]];if(r&&r(n,t))return}return e(n,...r)})},ca=s({patchProp:(e,t,n,r,i,s,l,c,u)=>{const d="svg"===i;"class"===t?function(e,t,n){const r=e[lo];r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,d):"style"===t?function(e,t,n){const r=e.style,i=f(n);let o=!1;if(n&&!i){if(t)if(f(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&Io(r,t,"")}else for(const e in t)null==n[e]&&Io(r,e,"");for(const e in n)"display"===e&&(o=!0),Io(r,e,n[e])}else if(i){if(t!==n){const e=r[To];e&&(n+=";"+e),r.cssText=n,o=Do.test(n)}}else t&&e.removeAttribute("style");_o in e&&(e[_o]=o?r.display:"",e[Eo]&&(r.display="none"))}(e,n,r):o(t)?a(t)||No(e,t,0,r,l):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Wo(t)&&A(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}if(Wo(t)&&f(n))return!1;return t in e}(e,t,r,d))?(!function(e,t,n,r,i,o,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,i,o),void(e[t]=null==n?"":n);const s=e.tagName;if("value"===t&&"PROGRESS"!==s&&!s.includes("-")){const r="OPTION"===s?e.getAttribute("value")||"":e.value,i=null==n?"":String(n);return r===i&&"_value"in e||(e.value=i),null==n&&e.removeAttribute(t),void(e._value=n)}let l=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=G(n):null==n&&"string"===r?(n="",l=!0):"number"===r&&(n=0,l=!0)}try{e[t]=n}catch(g9){}l&&e.removeAttribute(t)}(e,t,r,s,l,c,u),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||Ro(e,t,r,d,0,"value"!==t)):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),Ro(e,t,r,d))}},oo);let ua;let da=[];const ha=new WeakMap;function pa(){da.forEach((e=>e(...ha.get(e)))),da=[]}function Aa(e,...t){ha.set(e,t),da.includes(e)||1===da.push(e)&&requestAnimationFrame(pa)}function fa(e,t){let{target:n}=e;for(;n;){if(n.dataset&&void 0!==n.dataset[t])return!0;n=n.parentElement}return!1}function ma(e){return e.composedPath()[0]||null}function ga(e){return"string"==typeof e?e.endsWith("px")?Number(e.slice(0,e.length-2)):Number(e):e}function va(e){if(null!=e)return"number"==typeof e?`${e}px`:e.endsWith("px")?e:`${e}px`}function ya(e,t){const n=e.trim().split(/\s+/g),r={top:n[0]};switch(n.length){case 1:r.right=n[0],r.bottom=n[0],r.left=n[0];break;case 2:r.right=n[1],r.left=n[1],r.bottom=n[0];break;case 3:r.right=n[1],r.bottom=n[2],r.left=n[1];break;case 4:r.right=n[1],r.bottom=n[2],r.left=n[3];break;default:throw new Error("[seemly/getMargin]:"+e+" is not a valid value.")}return void 0===t?r:r[t]}function ba(e,t){const[n,r]=e.split(" ");return{row:n,col:r||n}}const wa={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},xa="^\\s*",Ca="\\s*$",Sa="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",Ba="([0-9A-Fa-f])",_a="([0-9A-Fa-f]{2})",Ea=new RegExp(`${xa}rgb\\s*\\(${Sa},${Sa},${Sa}\\)${Ca}`),Ma=new RegExp(`${xa}rgba\\s*\\(${Sa},${Sa},${Sa},${Sa}\\)${Ca}`),Pa=new RegExp(`${xa}#${Ba}${Ba}${Ba}${Ca}`),Ta=new RegExp(`${xa}#${_a}${_a}${_a}${Ca}`),Da=new RegExp(`${xa}#${Ba}${Ba}${Ba}${Ba}${Ca}`),Fa=new RegExp(`${xa}#${_a}${_a}${_a}${_a}${Ca}`);function Ia(e){return parseInt(e,16)}function ka(e){try{let t;if(t=Ta.exec(e))return[Ia(t[1]),Ia(t[2]),Ia(t[3]),1];if(t=Ea.exec(e))return[ja(t[1]),ja(t[5]),ja(t[9]),1];if(t=Ma.exec(e))return[ja(t[1]),ja(t[5]),ja(t[9]),Na(t[13])];if(t=Pa.exec(e))return[Ia(t[1]+t[1]),Ia(t[2]+t[2]),Ia(t[3]+t[3]),1];if(t=Fa.exec(e))return[Ia(t[1]),Ia(t[2]),Ia(t[3]),Na(Ia(t[4])/255)];if(t=Da.exec(e))return[Ia(t[1]+t[1]),Ia(t[2]+t[2]),Ia(t[3]+t[3]),Na(Ia(t[4]+t[4])/255)];if(e in wa)return ka(wa[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(g9){throw g9}}function Oa(e,t,n,r){return`rgba(${ja(e)}, ${ja(t)}, ${ja(n)}, ${i=r,i>1?1:i<0?0:i})`;var i}function La(e,t,n,r,i){return ja((e*t*(1-r)+n*r)/i)}function Ra(e,t){Array.isArray(e)||(e=ka(e)),Array.isArray(t)||(t=ka(t));const n=e[3],r=t[3],i=Na(n+r-n*r);return Oa(La(e[0],n,t[0],r,i),La(e[1],n,t[1],r,i),La(e[2],n,t[2],r,i),i)}function Ua(e,t){const[n,r,i,o=1]=Array.isArray(e)?e:ka(e);return t.alpha?Oa(n,r,i,t.alpha):Oa(n,r,i,o)}function za(e,t){const[n,r,i,o=1]=Array.isArray(e)?e:ka(e),{lightness:a=1,alpha:s=1}=t;return function(e){const[t,n,r]=e;if(3 in e)return`rgba(${ja(t)}, ${ja(n)}, ${ja(r)}, ${Na(e[3])})`;return`rgba(${ja(t)}, ${ja(n)}, ${ja(r)}, 1)`}([n*a,r*a,i*a,o*s])}function Na(e){const t=Math.round(100*Number(e))/100;return t>1?1:t<0?0:t}function ja(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}function Ha(e=8){return Math.random().toString(16).slice(2,2+e)}function Qa(e,t){const n=[];for(let r=0;r<e;++r)n.push(t);return n}function Va(e,t="default",n=[]){const r=e.$slots[t];return void 0===r?n:r()}function Wa(e,t=[],n){const r={};return t.forEach((t=>{r[t]=e[t]})),Object.assign(r,n)}function Ga(e,t=[],n){const r={};return Object.getOwnPropertyNames(e).forEach((n=>{t.includes(n)||(r[n]=e[n])})),Object.assign(r,n)}function qa(e,t=!0,n=[]){return e.forEach((e=>{if(null!==e)if("object"==typeof e)if(Array.isArray(e))qa(e,t,n);else if(e.type===di){if(null===e.children)return;Array.isArray(e.children)&&qa(e.children,t,n)}else{if(e.type===pi&&t)return;n.push(e)}else"string"!=typeof e&&"number"!=typeof e||n.push(Ti(String(e)))})),n}function Ka(e,...t){if(!Array.isArray(e))return e(...t);e.forEach((e=>Ka(e,...t)))}function Ya(e){return Object.keys(e)}const Xa=(e,...t)=>"function"==typeof e?e(...t):"string"==typeof e?Ti(e):"number"==typeof e?Ti(String(e)):null;function $a(e,t){throw new Error(`[naive/${e}]: ${t}`)}function Ja(e){switch(e){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error(`${e} has no smaller size.`)}function Za(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function es(e,t="default",n=void 0){const r=e[t];if(!r)return null;const i=qa(r(n));return 1===i.length?i[0]:null}function ts(e){return t=>{e.value=t?t.$el:null}}function ns(e){return e.some((e=>!Ci(e)||e.type!==pi&&!(e.type===di&&!ns(e.children))))?e:null}function rs(e,t){return e&&ns(e())||t()}function is(e,t,n){return e&&ns(e(t))||n(t)}function os(e,t){return t(e&&ns(e())||null)}function as(e){return!(e&&ns(e()))}function ss(e){const t=e.filter((e=>void 0!==e));if(0!==t.length)return 1===t.length?t[0]:t=>{e.forEach((e=>{e&&e(t)}))}}const ls=Dn({render(){var e,t;return null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)}}),cs=/^(\d|\.)+$/,us=/(\d|\.)+/;function ds(e,{c:t=1,offset:n=0,attachPx:r=!0}={}){if("number"==typeof e){const r=(e+n)*t;return 0===r?"0":`${r}px`}if("string"==typeof e){if(cs.test(e)){const i=(Number(e)+n)*t;return r?0===i?"0":`${i}px`:`${i}`}{const r=us.exec(e);return r?e.replace(us,String((Number(r[0])+n)*t)):e}}return e}function hs(e){return e.replace(/#|\(|\)|,|\s|\./g,"_")}function ps(e){const{left:t,right:n,top:r,bottom:i}=ya(e);return`${r} ${n} ${i} ${t}`}const As=/\s*,(?![^(]*\))\s*/g,fs=/\s+/g;function ms(e){let t=[""];return e.forEach((e=>{(e=e&&e.trim())&&(t=e.includes("&")?function(e,t){const n=[];return t.split(As).forEach((t=>{let r=function(e){let t=0;for(let n=0;n<e.length;++n)"&"===e[n]&&++t;return t}(t);if(!r)return void e.forEach((e=>{n.push((e&&e+" ")+t)}));if(1===r)return void e.forEach((e=>{n.push(t.replace("&",e))}));let i=[t];for(;r--;){const t=[];i.forEach((n=>{e.forEach((e=>{t.push(n.replace("&",e))}))})),i=t}i.forEach((e=>n.push(e)))})),n}(t,e):function(e,t){const n=[];return t.split(As).forEach((t=>{e.forEach((e=>{n.push((e&&e+" ")+t)}))})),n}(t,e))})),t.join(", ").replace(fs," ")}function gs(e){if(!e)return;const t=e.parentElement;t&&t.removeChild(e)}function vs(e,t){return(null!=t?t:document.head).querySelector(`style[cssr-id="${e}"]`)}function ys(e){return!!e&&/^\s*@(s|m)/.test(e)}const bs=/[A-Z]/g;function ws(e){return e.replace(bs,(e=>"-"+e.toLowerCase()))}function xs(e,t,n,r){if(!t)return"";const i=function(e,t,n){return"function"==typeof e?e({context:t.context,props:n}):e}(t,n,r);if(!i)return"";if("string"==typeof i)return`${e} {\n${i}\n}`;const o=Object.keys(i);if(0===o.length)return n.config.keepEmptyBlock?e+" {\n}":"";const a=e?[e+" {"]:[];return o.forEach((e=>{const t=i[e];"raw"!==e?(e=ws(e),null!=t&&a.push(`  ${e}${function(e,t="  "){return"object"==typeof e&&null!==e?" {\n"+Object.entries(e).map((e=>t+`  ${ws(e[0])}: ${e[1]};`)).join("\n")+"\n"+t+"}":`: ${e};`}(t)}`)):a.push("\n"+t+"\n")})),e&&a.push("}"),a.join("\n")}function Cs(e,t,n){e&&e.forEach((e=>{if(Array.isArray(e))Cs(e,t,n);else if("function"==typeof e){const r=e(t);Array.isArray(r)?Cs(r,t,n):r&&n(r)}else e&&n(e)}))}function Ss(e,t,n,r,i){const o=e.$;let a="";if(o&&"string"!=typeof o)if("function"==typeof o){const e=o({context:r.context,props:i});ys(e)?a=e:t.push(e)}else if(o.before&&o.before(r.context),o.$&&"string"!=typeof o.$){if(o.$){const e=o.$({context:r.context,props:i});ys(e)?a=e:t.push(e)}}else ys(o.$)?a=o.$:t.push(o.$);else ys(o)?a=o:t.push(o);const s=ms(t),l=xs(s,e.props,r,i);a?n.push(`${a} {`):l.length&&n.push(l),e.children&&Cs(e.children,{context:r.context,props:i},(e=>{if("string"==typeof e){const t=xs(s,{raw:e},r,i);n.push(t)}else Ss(e,t,n,r,i)})),t.pop(),a&&n.push("}"),o&&o.after&&o.after(r.context)}function Bs(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}function _s(e,t){e.push(t)}function Es(e,t,n,r,i,o,a,s,l){let c;if(void 0===n&&(c=t.render(r),n=Bs(c)),l)return void l.adapter(n,null!=c?c:t.render(r));void 0===s&&(s=document.head);const u=vs(n,s);if(null!==u&&!o)return u;const d=null!=u?u:function(e){const t=document.createElement("style");return t.setAttribute("cssr-id",e),t}(n);if(void 0===c&&(c=t.render(r)),d.textContent=c,null!==u)return u;if(a){const e=s.querySelector(`meta[name="${a}"]`);if(e)return s.insertBefore(d,e),_s(t.els,d),d}return i?s.insertBefore(d,s.querySelector("style, link")):s.appendChild(d),_s(t.els,d),d}function Ms(e){return function(e,t,n){const r=[];return Ss(e,[],r,t,n),r.join("\n\n")}(this,this.instance,e)}function Ps(e={}){const{id:t,ssr:n,props:r,head:i=!1,force:o=!1,anchorMetaName:a,parent:s}=e;return Es(this.instance,this,t,r,i,o,a,s,n)}function Ts(e={}){const{id:t,parent:n}=e;!function(e,t,n,r){const{els:i}=t;if(void 0===n)i.forEach(gs),t.els=[];else{const e=vs(n,r);e&&i.includes(e)&&(gs(e),t.els=i.filter((t=>t!==e)))}}(this.instance,this,t,n)}"undefined"!=typeof window&&(window.__cssrContext={});const Ds=function(e,t,n,r){return{instance:e,$:t,props:n,children:r,els:[],render:Ms,mount:Ps,unmount:Ts}};function Fs(e={}){const t={c:(...e)=>function(e,t,n,r){return Array.isArray(t)?Ds(e,{$:null},null,t):Array.isArray(n)?Ds(e,t,null,n):Array.isArray(r)?Ds(e,t,n,r):Ds(e,t,n,null)}(t,...e),use:(e,...n)=>e.install(t,...n),find:vs,context:{},config:e};return t}const Is=".n-",ks=Fs(),Os=function(e){let t,n=".",r="__",i="--";if(e){let t=e.blockPrefix;t&&(n=t),t=e.elementPrefix,t&&(r=t),t=e.modifierPrefix,t&&(i=t)}const o={install(e){t=e.c;const n=e.context;n.bem={},n.bem.b=null,n.bem.els=null}};return Object.assign(o,{cB:(...e)=>t(function(e){let t,r;return{before(e){t=e.bem.b,r=e.bem.els,e.bem.els=null},after(e){e.bem.b=t,e.bem.els=r},$:({context:t,props:r})=>(e="string"==typeof e?e:e({context:t,props:r}),t.bem.b=e,`${(null==r?void 0:r.bPrefix)||n}${t.bem.b}`)}}(e[0]),e[1],e[2]),cE:(...e)=>t(function(e){let t;return{before(e){t=e.bem.els},after(e){e.bem.els=t},$:({context:t,props:i})=>(e="string"==typeof e?e:e({context:t,props:i}),t.bem.els=e.split(",").map((e=>e.trim())),t.bem.els.map((e=>`${(null==i?void 0:i.bPrefix)||n}${t.bem.b}${r}${e}`)).join(", "))}}(e[0]),e[1],e[2]),cM:(...e)=>{return t((o=e[0],{$({context:e,props:t}){const a=(o="string"==typeof o?o:o({context:e,props:t})).split(",").map((e=>e.trim()));function s(o){return a.map((a=>`&${(null==t?void 0:t.bPrefix)||n}${e.bem.b}${void 0!==o?`${r}${o}`:""}${i}${a}`)).join(", ")}const l=e.bem.els;return null!==l?s(l[0]):s()}}),e[1],e[2]);var o},cNotM:(...e)=>{return t((o=e[0],{$({context:e,props:t}){o="string"==typeof o?o:o({context:e,props:t});const a=e.bem.els;return`&:not(${(null==t?void 0:t.bPrefix)||n}${e.bem.b}${null!==a&&a.length>0?`${r}${a[0]}`:""}${i}${o})`}}),e[1],e[2]);var o}}),o}({blockPrefix:Is,elementPrefix:"__",modifierPrefix:"--"});ks.use(Os);const{c:Ls,find:Rs}=ks,{cB:Us,cE:zs,cM:Ns,cNotM:js}=Os;function Hs(e){return Ls((({props:{bPrefix:e}})=>`${e||Is}modal, ${e||Is}drawer`),[e])}function Qs(e){return Ls((({props:{bPrefix:e}})=>`${e||Is}popover`),[e])}function Vs(e){return Ls((({props:{bPrefix:e}})=>`&${e||Is}modal`),e)}const Ws=(...e)=>Ls(">",[Us(...e)]);function Gs(e,t){return e+("default"===t?"":t.replace(/^[a-z]/,(e=>e.toUpperCase())))}let qs;const Ks="undefined"!=typeof document&&"undefined"!=typeof window,Ys=new WeakSet;function Xs(e){Ys.add(e)}function $s(e,t,n){var r;const i=rr(e,null);if(null===i)return;const o=null===(r=ji())||void 0===r?void 0:r.proxy;function a(e,n){if(!i)return;const r=i[t];void 0!==n&&function(e,t){e[t]||(e[t]=[]);e[t].splice(e[t].findIndex((e=>e===o)),1)}(r,n),void 0!==e&&function(e,t){e[t]||(e[t]=[]);~e[t].findIndex((e=>e===o))||e[t].push(o)}(r,e)}Ir(n,a),a(n.value),wn((()=>{a(void 0,n.value)}))}function Js(e){const t=bt(!!e.value);if(t.value)return at(t);const n=Ir(e,(e=>{e&&(t.value=!0,n())}));return at(t)}function Zs(e){const t=eo(e),n=bt(t.value);return Ir(t,(e=>{n.value=e})),"function"==typeof e?n:{__v_isRef:!0,get value(){return n.value},set value(t){e.set(t)}}}function el(){return null!==ji()}const tl="undefined"!=typeof window;let nl,rl;var il,ol;function al(e){if(rl)return;let t=!1;vn((()=>{rl||null==nl||nl.then((()=>{t||e()}))})),wn((()=>{t=!0}))}function sl(e){return e.composedPath()[0]}nl=tl?null===(ol=null===(il=document)||void 0===il?void 0:il.fonts)||void 0===ol?void 0:ol.ready:void 0,rl=!1,void 0!==nl?nl.then((()=>{rl=!0})):rl=!0;const ll={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function cl(e,t,n){const r=ll[e];let i=r.get(t);void 0===i&&r.set(t,i=new WeakMap);let o=i.get(n);return void 0===o&&i.set(n,o=function(e,t,n){if("mousemoveoutside"===e){const e=e=>{t.contains(sl(e))||n(e)};return{mousemove:e,touchstart:e}}if("clickoutside"===e){let e=!1;const r=n=>{e=!t.contains(sl(n))},i=r=>{e&&(t.contains(sl(r))||n(r))};return{mousedown:r,mouseup:i,touchstart:r,touchend:i}}return{}}(e,t,n)),o}const{on:ul,off:dl}=function(){if("undefined"==typeof window)return{on:()=>{},off:()=>{}};const e=new WeakMap,t=new WeakMap;function n(){e.set(this,!0)}function r(){e.set(this,!0),t.set(this,!0)}function i(e,t,n){const r=e[t];return e[t]=function(){return n.apply(e,arguments),r.apply(e,arguments)},e}function o(e,t){e[t]=Event.prototype[t]}const a=new WeakMap,s=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function l(){var e;return null!==(e=a.get(this))&&void 0!==e?e:null}function c(e,t){void 0!==s&&Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:null!=t?t:s.get})}const u={bubble:{},capture:{}},d={},h=function(){const s=function(s){const{type:d,eventPhase:h,bubbles:p}=s,A=sl(s);if(2===h)return;const f=1===h?"capture":"bubble";let m=A;const g=[];for(;null===m&&(m=window),g.push(m),m!==window;)m=m.parentNode||null;const v=u.capture[d],y=u.bubble[d];if(i(s,"stopPropagation",n),i(s,"stopImmediatePropagation",r),c(s,l),"capture"===f){if(void 0===v)return;for(let n=g.length-1;n>=0&&!e.has(s);--n){const e=g[n],r=v.get(e);if(void 0!==r){a.set(s,e);for(const e of r){if(t.has(s))break;e(s)}}if(0===n&&!p&&void 0!==y){const n=y.get(e);if(void 0!==n)for(const e of n){if(t.has(s))break;e(s)}}}}else if("bubble"===f){if(void 0===y)return;for(let n=0;n<g.length&&!e.has(s);++n){const e=g[n],r=y.get(e);if(void 0!==r){a.set(s,e);for(const e of r){if(t.has(s))break;e(s)}}}}o(s,"stopPropagation"),o(s,"stopImmediatePropagation"),c(s)};return s.displayName="evtdUnifiedHandler",s}(),p=function(){const e=function(e){const{type:t,eventPhase:n}=e;if(2!==n)return;const r=d[t];void 0!==r&&r.forEach((t=>t(e)))};return e.displayName="evtdUnifiedWindowEventHandler",e}();function A(e,t){const n=u[e];return void 0===n[t]&&(n[t]=new Map,window.addEventListener(t,h,"capture"===e)),n[t]}function f(e,t){let n=e.get(t);return void 0===n&&e.set(t,n=new Set),n}function m(e,t,n,r){const i=function(e,t,n,r){if("mousemoveoutside"===e||"clickoutside"===e){const i=cl(e,t,n);return Object.keys(i).forEach((e=>{dl(e,document,i[e],r)})),!0}return!1}(e,t,n,r);if(i)return;const o=!0===r||"object"==typeof r&&!0===r.capture,a=o?"capture":"bubble",s=A(a,e),l=f(s,t);if(t===window){if(!function(e,t,n,r){const i=u[t][n];if(void 0!==i){const t=i.get(e);if(void 0!==t&&t.has(r))return!0}return!1}(t,o?"bubble":"capture",e,n)&&function(e,t){const n=d[e];return!(void 0===n||!n.has(t))}(e,n)){const t=d[e];t.delete(n),0===t.size&&(window.removeEventListener(e,p),d[e]=void 0)}}l.has(n)&&l.delete(n),0===l.size&&s.delete(t),0===s.size&&(window.removeEventListener(e,h,"capture"===a),u[a][e]=void 0)}return{on:function(e,t,n,r){let i;i="object"==typeof r&&!0===r.once?o=>{m(e,t,i,r),n(o)}:n;if(function(e,t,n,r){if("mousemoveoutside"===e||"clickoutside"===e){const i=cl(e,t,n);return Object.keys(i).forEach((e=>{ul(e,document,i[e],r)})),!0}return!1}(e,t,i,r))return;const o=f(A(!0===r||"object"==typeof r&&!0===r.capture?"capture":"bubble",e),t);if(o.has(i)||o.add(i),t===window){const t=function(e){return void 0===d[e]&&(d[e]=new Set,window.addEventListener(e,p)),d[e]}(e);t.has(i)||t.add(i)}},off:m}}(),hl=bt(null);function pl(e){if(e.clientX>0||e.clientY>0)hl.value={x:e.clientX,y:e.clientY};else{const{target:t}=e;if(t instanceof Element){const{left:e,top:n,width:r,height:i}=t.getBoundingClientRect();hl.value=e>0||n>0?{x:e+r/2,y:n+i/2}:{x:0,y:0}}else hl.value=null}}let Al=0,fl=!0;function ml(){if(!tl)return at(bt(null));0===Al&&ul("click",document,pl,!0);const e=()=>{Al+=1};return fl&&(fl=el())?(gn(e),wn((()=>{Al-=1,0===Al&&dl("click",document,pl,!0)}))):e(),at(hl)}const gl=bt(void 0);let vl=0;function yl(){gl.value=Date.now()}let bl=!0;function wl(e){if(!tl)return at(bt(!1));const t=bt(!1);let n=null;function r(){null!==n&&window.clearTimeout(n)}function i(){r(),t.value=!0,n=window.setTimeout((()=>{t.value=!1}),e)}0===vl&&ul("click",window,yl,!0);const o=()=>{vl+=1,ul("click",window,i,!0)};return bl&&(bl=el())?(gn(o),wn((()=>{vl-=1,0===vl&&dl("click",window,yl,!0),dl("click",window,i,!0),r()}))):o(),at(t)}function xl(e,t){return Ir(e,(e=>{void 0!==e&&(t.value=e)})),eo((()=>void 0===e.value?t.value:e.value))}function Cl(){const e=bt(!1);return vn((()=>{e.value=!0})),at(e)}function Sl(e,t){return eo((()=>{for(const n of t)if(void 0!==e[n])return e[n];return e[t[t.length-1]]}))}const Bl="undefined"!=typeof window&&(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream;function _l(e={},t){const n=it({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:r,keyup:i}=e,o=e=>{switch(e.key){case"Control":n.ctrl=!0;break;case"Meta":n.command=!0,n.win=!0;break;case"Shift":n.shift=!0;break;case"Tab":n.tab=!0}void 0!==r&&Object.keys(r).forEach((t=>{if(t!==e.key)return;const n=r[t];if("function"==typeof n)n(e);else{const{stop:t=!1,prevent:r=!1}=n;t&&e.stopPropagation(),r&&e.preventDefault(),n.handler(e)}}))},a=e=>{switch(e.key){case"Control":n.ctrl=!1;break;case"Meta":n.command=!1,n.win=!1;break;case"Shift":n.shift=!1;break;case"Tab":n.tab=!1}void 0!==i&&Object.keys(i).forEach((t=>{if(t!==e.key)return;const n=i[t];if("function"==typeof n)n(e);else{const{stop:t=!1,prevent:r=!1}=n;t&&e.stopPropagation(),r&&e.preventDefault(),n.handler(e)}}))},s=()=>{(void 0===t||t.value)&&(ul("keydown",document,o),ul("keyup",document,a)),void 0!==t&&Ir(t,(e=>{e?(ul("keydown",document,o),ul("keyup",document,a)):(dl("keydown",document,o),dl("keyup",document,a))}))};return el()?(gn(s),wn((()=>{(void 0===t||t.value)&&(dl("keydown",document,o),dl("keyup",document,a))}))):s(),at(n)}const El="n-internal-select-menu",Ml="n-internal-select-menu-body",Pl="n-modal-body",Tl="n-modal",Dl="n-drawer-body",Fl="n-popover-body",Il="__disabled__";function kl(e){const t=rr(Pl,null),n=rr(Dl,null),r=rr(Fl,null),i=rr(Ml,null),o=bt();if("undefined"!=typeof document){o.value=document.fullscreenElement;const e=()=>{o.value=document.fullscreenElement};vn((()=>{ul("fullscreenchange",document,e)})),wn((()=>{dl("fullscreenchange",document,e)}))}return Zs((()=>{var a;const{to:s}=e;return void 0!==s?!1===s?Il:!0===s?o.value||"body":s:(null==t?void 0:t.value)?null!==(a=t.value.$el)&&void 0!==a?a:t.value:(null==n?void 0:n.value)?n.value:(null==r?void 0:r.value)?r.value:(null==i?void 0:i.value)?i.value:null!=s?s:o.value||"body"}))}kl.tdkey=Il,kl.propTo={type:[String,Object,Boolean],default:void 0};let Ol=!1;function Ll(){if(Ks&&window.CSS&&!Ol&&(Ol=!0,"registerProperty"in(null===window||void 0===window?void 0:window.CSS)))try{CSS.registerProperty({name:"--n-color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--n-color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})}catch(g9){}}function Rl(e,t,n="default"){const r=t[n];if(void 0===r)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);return r()}function Ul(e,t=!0,n=[]){return e.forEach((e=>{if(null!==e)if("object"==typeof e)if(Array.isArray(e))Ul(e,t,n);else if(e.type===di){if(null===e.children)return;Array.isArray(e.children)&&Ul(e.children,t,n)}else e.type!==pi&&n.push(e);else"string"!=typeof e&&"number"!=typeof e||n.push(Ti(String(e)))})),n}function zl(e,t,n="default"){const r=t[n];if(void 0===r)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);const i=Ul(r());if(1===i.length)return i[0];throw new Error(`[vueuc/${e}]: slot[${n}] should have exactly one child.`)}let Nl=null;function jl(){if(null===Nl&&(Nl=document.getElementById("v-binder-view-measurer"),null===Nl)){Nl=document.createElement("div"),Nl.id="v-binder-view-measurer";const{style:e}=Nl;e.position="fixed",e.left="0",e.right="0",e.top="0",e.bottom="0",e.pointerEvents="none",e.visibility="hidden",document.body.appendChild(Nl)}return Nl.getBoundingClientRect()}function Hl(e){const t=e.getBoundingClientRect(),n=jl();return{left:t.left-n.left,top:t.top-n.top,bottom:n.height+n.top-t.bottom,right:n.width+n.left-t.right,width:t.width,height:t.height}}function Ql(e){if(null===e)return null;const t=function(e){return 9===e.nodeType?null:e.parentNode}(e);if(null===t)return null;if(9===t.nodeType)return document;if(1===t.nodeType){const{overflow:e,overflowX:n,overflowY:r}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+r+n))return t}return Ql(t)}const Vl=Dn({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(e){var t;nr("VBinder",null===(t=ji())||void 0===t?void 0:t.proxy);const n=rr("VBinder",null),r=bt(null);let i=[];const o=()=>{for(const e of i)dl("scroll",e,s,!0);i=[]},a=new Set,s=()=>{Aa(l)},l=()=>{a.forEach((e=>e()))},c=new Set,u=()=>{c.forEach((e=>e()))};return wn((()=>{dl("resize",window,u),o()})),{targetRef:r,setTargetRef:t=>{r.value=t,n&&e.syncTargetWithParent&&n.setTargetRef(t)},addScrollListener:e=>{0===a.size&&(()=>{let e=r.value;for(;e=Ql(e),null!==e;)i.push(e);for(const t of i)ul("scroll",t,s,!0)})(),a.has(e)||a.add(e)},removeScrollListener:e=>{a.has(e)&&a.delete(e),0===a.size&&o()},addResizeListener:e=>{0===c.size&&ul("resize",window,u),c.has(e)||c.add(e)},removeResizeListener:e=>{c.has(e)&&c.delete(e),0===c.size&&dl("resize",window,u)}}},render(){return Rl("binder",this.$slots)}}),Wl=Dn({name:"Target",setup(){const{setTargetRef:e,syncTarget:t}=rr("VBinder");return{syncTarget:t,setTargetDirective:{mounted:e,updated:e}}},render(){const{syncTarget:e,setTargetDirective:t}=this;return e?En(zl("follower",this.$slots),[[t]]):zl("follower",this.$slots)}}),Gl="@@mmoContext",ql={mounted(e,{value:t}){e[Gl]={handler:void 0},"function"==typeof t&&(e[Gl].handler=t,ul("mousemoveoutside",e,t))},updated(e,{value:t}){const n=e[Gl];"function"==typeof t?n.handler?n.handler!==t&&(dl("mousemoveoutside",e,n.handler),n.handler=t,ul("mousemoveoutside",e,t)):(e[Gl].handler=t,ul("mousemoveoutside",e,t)):n.handler&&(dl("mousemoveoutside",e,n.handler),n.handler=void 0)},unmounted(e){const{handler:t}=e[Gl];t&&dl("mousemoveoutside",e,t),e[Gl].handler=void 0}},Kl="@@coContext",Yl={mounted(e,{value:t,modifiers:n}){e[Kl]={handler:void 0},"function"==typeof t&&(e[Kl].handler=t,ul("clickoutside",e,t,{capture:n.capture}))},updated(e,{value:t,modifiers:n}){const r=e[Kl];"function"==typeof t?r.handler?r.handler!==t&&(dl("clickoutside",e,r.handler,{capture:n.capture}),r.handler=t,ul("clickoutside",e,t,{capture:n.capture})):(e[Kl].handler=t,ul("clickoutside",e,t,{capture:n.capture})):r.handler&&(dl("clickoutside",e,r.handler,{capture:n.capture}),r.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:n}=e[Kl];n&&dl("clickoutside",e,n,{capture:t.capture}),e[Kl].handler=void 0}};const Xl=new class{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,t){const{elementZIndex:n}=this;if(void 0!==t)return e.style.zIndex=`${t}`,void n.delete(e);const{nextZIndex:r}=this;if(n.has(e)){if(n.get(e)+1===this.nextZIndex)return}e.style.zIndex=`${r}`,n.set(e,r),this.nextZIndex=r+1,this.squashState()}unregister(e,t){const{elementZIndex:n}=this;n.has(e)&&n.delete(e),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort(((e,t)=>e[1]-t[1])),this.nextZIndex=2e3,e.forEach((e=>{const t=e[0],n=this.nextZIndex++;`${n}`!==t.style.zIndex&&(t.style.zIndex=`${n}`)}))}},$l="@@ziContext",Jl={mounted(e,t){const{value:n={}}=t,{zIndex:r,enabled:i}=n;e[$l]={enabled:!!i,initialized:!1},i&&(Xl.ensureZIndex(e,r),e[$l].initialized=!0)},updated(e,t){const{value:n={}}=t,{zIndex:r,enabled:i}=n,o=e[$l].enabled;i&&!o&&(Xl.ensureZIndex(e,r),e[$l].initialized=!0),e[$l].enabled=!!i},unmounted(e,t){if(!e[$l].initialized)return;const{value:n={}}=t,{zIndex:r}=n;Xl.unregister(e,r)}},Zl="@css-render/vue3-ssr";const ec="undefined"!=typeof document;function tc(){if(ec)return;const e=rr(Zl,null);return null!==e?{adapter:(t,n)=>function(e,t,n){const{styles:r,ids:i}=n;i.has(e)||null!==r&&(i.add(e),r.push(function(e,t){return`<style cssr-id="${e}">\n${t}\n</style>`}(e,t)))}(t,n,e),context:e}:void 0}const{c:nc}=Fs(),rc="vueuc-style";function ic(e){return e&-e}class oc{constructor(e,t){this.l=e,this.min=t;const n=new Array(e+1);for(let r=0;r<e+1;++r)n[r]=0;this.ft=n}add(e,t){if(0===t)return;const{l:n,ft:r}=this;for(e+=1;e<=n;)r[e]+=t,e+=ic(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(void 0===e&&(e=this.l),e<=0)return 0;const{ft:t,min:n,l:r}=this;if(e>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let i=e*n;for(;e>0;)i+=t[e],e-=ic(e);return i}getBound(e){let t=0,n=this.l;for(;n>t;){const r=Math.floor((t+n)/2),i=this.sum(r);if(i>e)n=r;else{if(!(i<e))return r;if(t===r)return this.sum(t+1)<=e?t+1:r;t=r}}return t}}function ac(e){return"string"==typeof e?document.querySelector(e):e()}const sc=Dn({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup:e=>({showTeleport:Js(Tt(e,"show")),mergedTo:eo((()=>{const{to:t}=e;return null!=t?t:"body"}))}),render(){return this.showTeleport?this.disabled?Rl("lazy-teleport",this.$slots):to(ci,{disabled:this.disabled,to:this.mergedTo},Rl("lazy-teleport",this.$slots)):null}}),lc={top:"bottom",bottom:"top",left:"right",right:"left"},cc={start:"end",center:"center",end:"start"},uc={top:"height",bottom:"height",left:"width",right:"width"},dc={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},hc={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},pc={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},Ac={top:!0,bottom:!1,left:!0,right:!1},fc={top:"end",bottom:"start",left:"end",right:"start"};const mc=nc([nc(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),nc(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[nc("> *",{pointerEvents:"all"})])]),gc=Dn({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(e){const t=rr("VBinder"),n=Zs((()=>void 0!==e.enabled?e.enabled:e.show)),r=bt(null),i=bt(null),o=()=>{const{syncTrigger:n}=e;n.includes("scroll")&&t.addScrollListener(l),n.includes("resize")&&t.addResizeListener(l)},a=()=>{t.removeScrollListener(l),t.removeResizeListener(l)};vn((()=>{n.value&&(l(),o())}));const s=tc();mc.mount({id:"vueuc/binder",head:!0,anchorMetaName:rc,ssr:s}),wn((()=>{a()})),al((()=>{n.value&&l()}));const l=()=>{if(!n.value)return;const o=r.value;if(null===o)return;const a=t.targetRef,{x:s,y:l,overlap:c}=e,u=void 0!==s&&void 0!==l?function(e,t){const n=jl();return{top:t,left:e,height:0,width:0,right:n.width-e,bottom:n.height-t}}(s,l):Hl(a);o.style.setProperty("--v-target-width",`${Math.round(u.width)}px`),o.style.setProperty("--v-target-height",`${Math.round(u.height)}px`);const{width:d,minWidth:h,placement:p,internalShift:A,flip:f}=e;o.setAttribute("v-placement",p),c?o.setAttribute("v-overlap",""):o.removeAttribute("v-overlap");const{style:m}=o;m.width="target"===d?`${u.width}px`:void 0!==d?d:"",m.minWidth="target"===h?`${u.width}px`:void 0!==h?h:"";const g=Hl(o),v=Hl(i.value),{left:y,top:b,placement:w}=function(e,t,n,r,i,o){if(!i||o)return{placement:e,top:0,left:0};const[a,s]=e.split("-");let l=null!=s?s:"center",c={top:0,left:0};const u=(e,i,o)=>{let a=0,s=0;const l=n[e]-t[i]-t[e];return l>0&&r&&(o?s=Ac[i]?l:-l:a=Ac[i]?l:-l),{left:a,top:s}},d="left"===a||"right"===a;if("center"!==l){const r=pc[e],i=lc[r],o=uc[r];if(n[o]>t[o]){if(t[r]+t[o]<n[o]){const e=(n[o]-t[o])/2;t[r]<e||t[i]<e?t[r]<t[i]?(l=cc[s],c=u(o,i,d)):c=u(o,r,d):l="center"}}else n[o]<t[o]&&t[i]<0&&t[r]>t[i]&&(l=cc[s])}else{const e="bottom"===a||"top"===a?"left":"top",r=lc[e],i=uc[e],o=(n[i]-t[i])/2;(t[e]<o||t[r]<o)&&(t[e]>t[r]?(l=fc[e],c=u(i,e,d)):(l=fc[r],c=u(i,r,d)))}let h=a;return t[a]<n[uc[a]]&&t[a]<t[lc[a]]&&(h=lc[a]),{placement:"center"!==l?`${h}-${l}`:h,left:c.left,top:c.top}}(p,u,g,A,f,c),x=function(e,t){return t?hc[e]:dc[e]}(w,c),{left:C,top:S,transform:B}=function(e,t,n,r,i,o){if(o)switch(e){case"bottom-start":case"left-end":return{top:`${Math.round(n.top-t.top+n.height)}px`,left:`${Math.round(n.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":case"right-end":return{top:`${Math.round(n.top-t.top+n.height)}px`,left:`${Math.round(n.left-t.left+n.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":case"left-start":return{top:`${Math.round(n.top-t.top)}px`,left:`${Math.round(n.left-t.left)}px`,transform:""};case"top-end":case"right-start":return{top:`${Math.round(n.top-t.top)}px`,left:`${Math.round(n.left-t.left+n.width)}px`,transform:"translateX(-100%)"};case"top":return{top:`${Math.round(n.top-t.top)}px`,left:`${Math.round(n.left-t.left+n.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(n.top-t.top+n.height/2)}px`,left:`${Math.round(n.left-t.left+n.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(n.top-t.top+n.height/2)}px`,left:`${Math.round(n.left-t.left)}px`,transform:"translateY(-50%)"};default:return{top:`${Math.round(n.top-t.top+n.height)}px`,left:`${Math.round(n.left-t.left+n.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(e){case"bottom-start":return{top:`${Math.round(n.top-t.top+n.height+r)}px`,left:`${Math.round(n.left-t.left+i)}px`,transform:""};case"bottom-end":return{top:`${Math.round(n.top-t.top+n.height+r)}px`,left:`${Math.round(n.left-t.left+n.width+i)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(n.top-t.top+r)}px`,left:`${Math.round(n.left-t.left+i)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(n.top-t.top+r)}px`,left:`${Math.round(n.left-t.left+n.width+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(n.top-t.top+r)}px`,left:`${Math.round(n.left-t.left+n.width+i)}px`,transform:""};case"right-end":return{top:`${Math.round(n.top-t.top+n.height+r)}px`,left:`${Math.round(n.left-t.left+n.width+i)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(n.top-t.top+r)}px`,left:`${Math.round(n.left-t.left+i)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(n.top-t.top+n.height+r)}px`,left:`${Math.round(n.left-t.left+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(n.top-t.top+r)}px`,left:`${Math.round(n.left-t.left+n.width/2+i)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(n.top-t.top+n.height/2+r)}px`,left:`${Math.round(n.left-t.left+n.width+i)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(n.top-t.top+n.height/2+r)}px`,left:`${Math.round(n.left-t.left+i)}px`,transform:"translateY(-50%) translateX(-100%)"};default:return{top:`${Math.round(n.top-t.top+n.height+r)}px`,left:`${Math.round(n.left-t.left+n.width/2+i)}px`,transform:"translateX(-50%)"}}}(w,v,u,b,y,c);o.setAttribute("v-placement",w),o.style.setProperty("--v-offset-left",`${Math.round(y)}px`),o.style.setProperty("--v-offset-top",`${Math.round(b)}px`),o.style.transform=`translateX(${C}) translateY(${S}) ${B}`,o.style.setProperty("--v-transform-origin",x),o.style.transformOrigin=x};Ir(n,(e=>{e?(o(),c()):a()}));const c=()=>{Vt().then(l).catch((e=>{}))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach((t=>{Ir(Tt(e,t),l)})),["teleportDisabled"].forEach((t=>{Ir(Tt(e,t),c)})),Ir(Tt(e,"syncTrigger"),(e=>{e.includes("resize")?t.addResizeListener(l):t.removeResizeListener(l),e.includes("scroll")?t.addScrollListener(l):t.removeScrollListener(l)}));const u=Cl(),d=Zs((()=>{const{to:t}=e;if(void 0!==t)return t;u.value}));return{VBinder:t,mergedEnabled:n,offsetContainerRef:i,followerRef:r,mergedTo:d,syncPosition:l}},render(){return to(sc,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var e,t;const n=to("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[to("div",{class:"v-binder-follower-content",ref:"followerRef"},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))]);return this.zindexable?En(n,[[Jl,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):n}})}});var vc,yc,bc=[],wc="ResizeObserver loop completed with undelivered notifications.";(yc=vc||(vc={})).BORDER_BOX="border-box",yc.CONTENT_BOX="content-box",yc.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var xc,Cc=function(e){return Object.freeze(e)},Sc=function(){return function(e,t){this.inlineSize=e,this.blockSize=t,Cc(this)}}(),Bc=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Cc(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),_c=function(e){return e instanceof SVGElement&&"getBBox"in e},Ec=function(e){if(_c(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||e.getClientRects().length)},Mc=function(e){var t;if(e instanceof Element)return!0;var n=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},Pc="undefined"!=typeof window?window:{},Tc=new WeakMap,Dc=/auto|scroll/,Fc=/^tb|vertical/,Ic=/msie|trident/i.test(Pc.navigator&&Pc.navigator.userAgent),kc=function(e){return parseFloat(e||"0")},Oc=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new Sc((n?t:e)||0,(n?e:t)||0)},Lc=Cc({devicePixelContentBoxSize:Oc(),borderBoxSize:Oc(),contentBoxSize:Oc(),contentRect:new Bc(0,0,0,0)}),Rc=function(e,t){if(void 0===t&&(t=!1),Tc.has(e)&&!t)return Tc.get(e);if(Ec(e))return Tc.set(e,Lc),Lc;var n=getComputedStyle(e),r=_c(e)&&e.ownerSVGElement&&e.getBBox(),i=!Ic&&"border-box"===n.boxSizing,o=Fc.test(n.writingMode||""),a=!r&&Dc.test(n.overflowY||""),s=!r&&Dc.test(n.overflowX||""),l=r?0:kc(n.paddingTop),c=r?0:kc(n.paddingRight),u=r?0:kc(n.paddingBottom),d=r?0:kc(n.paddingLeft),h=r?0:kc(n.borderTopWidth),p=r?0:kc(n.borderRightWidth),A=r?0:kc(n.borderBottomWidth),f=d+c,m=l+u,g=(r?0:kc(n.borderLeftWidth))+p,v=h+A,y=s?e.offsetHeight-v-e.clientHeight:0,b=a?e.offsetWidth-g-e.clientWidth:0,w=i?f+g:0,x=i?m+v:0,C=r?r.width:kc(n.width)-w-b,S=r?r.height:kc(n.height)-x-y,B=C+f+b+g,_=S+m+y+v,E=Cc({devicePixelContentBoxSize:Oc(Math.round(C*devicePixelRatio),Math.round(S*devicePixelRatio),o),borderBoxSize:Oc(B,_,o),contentBoxSize:Oc(C,S,o),contentRect:new Bc(d,l,C,S)});return Tc.set(e,E),E},Uc=function(e,t,n){var r=Rc(e,n),i=r.borderBoxSize,o=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(t){case vc.DEVICE_PIXEL_CONTENT_BOX:return a;case vc.BORDER_BOX:return i;default:return o}},zc=function(){return function(e){var t=Rc(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Cc([t.borderBoxSize]),this.contentBoxSize=Cc([t.contentBoxSize]),this.devicePixelContentBoxSize=Cc([t.devicePixelContentBoxSize])}}(),Nc=function(e){if(Ec(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},jc=function(){var e=1/0,t=[];bc.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new zc(t.target),i=Nc(t.target);r.push(n),t.lastReportedSize=Uc(t.target,t.observedBox),i<e&&(e=i)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},Hc=function(e){bc.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(Nc(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},Qc=function(){var e,t=0;for(Hc(t);bc.some((function(e){return e.activeTargets.length>0}));)t=jc(),Hc(t);return bc.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:wc}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=wc),window.dispatchEvent(e)),t>0},Vc=[],Wc=function(e){if(!xc){var t=0,n=document.createTextNode("");new MutationObserver((function(){return Vc.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),xc=function(){n.textContent="".concat(t?t--:t++)}}Vc.push(e),xc()},Gc=0,qc={attributes:!0,characterData:!0,childList:!0,subtree:!0},Kc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Yc=function(e){return void 0===e&&(e=0),Date.now()+e},Xc=!1,$c=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!Xc){Xc=!0;var n,r=Yc(e);n=function(){var n=!1;try{n=Qc()}finally{if(Xc=!1,e=r-Yc(),!Gc)return;n?t.run(1e3):e>0?t.run(e):t.start()}},Wc((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,qc)};document.body?t():Pc.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Kc.forEach((function(t){return Pc.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Kc.forEach((function(t){return Pc.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),Jc=function(e){!Gc&&e>0&&$c.start(),!(Gc+=e)&&$c.stop()},Zc=function(){function e(e,t){this.target=e,this.observedBox=t||vc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=Uc(this.target,this.observedBox,!0);return e=this.target,_c(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),eu=function(){return function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}}(),tu=new WeakMap,nu=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},ru=function(){function e(){}return e.connect=function(e,t){var n=new eu(e,t);tu.set(e,n)},e.observe=function(e,t,n){var r=tu.get(e),i=0===r.observationTargets.length;nu(r.observationTargets,t)<0&&(i&&bc.push(r),r.observationTargets.push(new Zc(t,n&&n.box)),Jc(1),$c.schedule())},e.unobserve=function(e,t){var n=tu.get(e),r=nu(n.observationTargets,t),i=1===n.observationTargets.length;r>=0&&(i&&bc.splice(bc.indexOf(n),1),n.observationTargets.splice(r,1),Jc(-1))},e.disconnect=function(e){var t=this,n=tu.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),iu=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ru.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Mc(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ru.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Mc(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ru.unobserve(this,e)},e.prototype.disconnect=function(){ru.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const ou=new class{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new("undefined"!=typeof window&&window.ResizeObserver||iu)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const e=this.elHandlersMap.get(t.target);void 0!==e&&e(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}},au=Dn({name:"ResizeObserver",props:{onResize:Function},setup(e){let t=!1;const n=ji().proxy;function r(t){const{onResize:n}=e;void 0!==n&&n(t)}vn((()=>{const e=n.$el;void 0!==e&&(e.nextElementSibling!==e.nextSibling&&3===e.nodeType&&""!==e.nodeValue||null!==e.nextElementSibling&&(ou.registerHandler(e.nextElementSibling,r),t=!0))})),wn((()=>{t&&ou.unregisterHandler(n.$el.nextElementSibling)}))},render(){return In(this.$slots,"default")}});let su,lu;function cu(){return"undefined"==typeof document?1:(void 0===lu&&(lu="chrome"in window?window.devicePixelRatio:1),lu)}const uu=nc(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[nc("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[nc("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),du=Dn({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const t=tc();uu.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:rc,ssr:t}),vn((()=>{const{defaultScrollIndex:t,defaultScrollKey:n}=e;null!=t?A({index:t}):null!=n&&A({key:n})}));let n=!1,r=!1;zr((()=>{n=!1,r?A({top:d.value,left:u}):r=!0})),Nr((()=>{n=!0,r||(r=!0)}));const i=eo((()=>{const t=new Map,{keyField:n}=e;return e.items.forEach(((e,r)=>{t.set(e[n],r)})),t})),o=bt(null),a=bt(void 0),s=new Map,l=eo((()=>{const{items:t,itemSize:n,keyField:r}=e,i=new oc(t.length,n);return t.forEach(((e,t)=>{const n=e[r],o=s.get(n);void 0!==o&&i.add(t,o)})),i})),c=bt(0);let u=0;const d=bt(0),h=Zs((()=>Math.max(l.value.getBound(d.value-ga(e.paddingTop))-1,0))),p=eo((()=>{const{value:t}=a;if(void 0===t)return[];const{items:n,itemSize:r}=e,i=h.value,o=Math.min(i+Math.ceil(t/r+1),n.length-1),s=[];for(let e=i;e<=o;++e)s.push(n[e]);return s})),A=(e,t)=>{if("number"==typeof e)return void v(e,t,"auto");const{left:n,top:r,index:o,key:a,position:s,behavior:l,debounce:c=!0}=e;if(void 0!==n||void 0!==r)v(n,r,l);else if(void 0!==o)g(o,l,c);else if(void 0!==a){const e=i.value.get(a);void 0!==e&&g(e,l,c)}else"bottom"===s?v(0,Number.MAX_SAFE_INTEGER,l):"top"===s&&v(0,0,l)};let f,m=null;function g(t,n,r){const{value:i}=l,a=i.sum(t)+ga(e.paddingTop);if(r){f=t,null!==m&&window.clearTimeout(m),m=window.setTimeout((()=>{f=void 0,m=null}),16);const{scrollTop:e,offsetHeight:r}=o.value;if(a>e){const s=i.get(t);a+s<=e+r||o.value.scrollTo({left:0,top:a+s-r,behavior:n})}else o.value.scrollTo({left:0,top:a,behavior:n})}else o.value.scrollTo({left:0,top:a,behavior:n})}function v(e,t,n){o.value.scrollTo({left:e,top:t,behavior:n})}const y=!("undefined"!=typeof document&&(void 0===su&&(su="matchMedia"in window&&window.matchMedia("(pointer:coarse)").matches),su));let b=!1;function w(){const{value:e}=o;null!=e&&(d.value=e.scrollTop,u=e.scrollLeft)}function x(e){let t=e;for(;null!==t;){if("none"===t.style.display)return!0;t=t.parentElement}return!1}return{listHeight:a,listStyle:{overflow:"auto"},keyToIndex:i,itemsStyle:eo((()=>{const{itemResizable:t}=e,n=va(l.value.sum());return c.value,[e.itemsStyle,{boxSizing:"content-box",height:t?"":n,minHeight:t?n:"",paddingTop:va(e.paddingTop),paddingBottom:va(e.paddingBottom)}]})),visibleItemsStyle:eo((()=>(c.value,{transform:`translateY(${va(l.value.sum(h.value))})`}))),viewportItems:p,listElRef:o,itemsElRef:bt(null),scrollTo:A,handleListResize:function(t){if(n)return;if(x(t.target))return;if(t.contentRect.height===a.value)return;a.value=t.contentRect.height;const{onResize:r}=e;void 0!==r&&r(t)},handleListScroll:function(t){var n;null===(n=e.onScroll)||void 0===n||n.call(e,t),y&&b||w()},handleListWheel:function(t){var n;if(null===(n=e.onWheel)||void 0===n||n.call(e,t),y){const e=o.value;if(null!=e){if(0===t.deltaX){if(0===e.scrollTop&&t.deltaY<=0)return;if(e.scrollTop+e.offsetHeight>=e.scrollHeight&&t.deltaY>=0)return}t.preventDefault(),e.scrollTop+=t.deltaY/cu(),e.scrollLeft+=t.deltaX/cu(),w(),b=!0,Aa((()=>{b=!1}))}}},handleItemResize:function(t,r){var a,u,d;if(n)return;if(e.ignoreItemResize)return;if(x(r.target))return;const{value:h}=l,p=i.value.get(t),A=h.get(p),m=null!==(d=null===(u=null===(a=r.borderBoxSize)||void 0===a?void 0:a[0])||void 0===u?void 0:u.blockSize)&&void 0!==d?d:r.contentRect.height;if(m===A)return;0===m-e.itemSize?s.delete(t):s.set(t,m-e.itemSize);const g=m-A;if(0===g)return;h.add(p,g);const v=o.value;if(null!=v){if(void 0===f){const e=h.sum(p);v.scrollTop>e&&v.scrollBy(0,g)}else if(p<f)v.scrollBy(0,g);else if(p===f){m+h.sum(p)>v.scrollTop+v.offsetHeight&&v.scrollBy(0,g)}w()}c.value++}}},render(){const{itemResizable:e,keyField:t,keyToIndex:n,visibleItemsTag:r}=this;return to(au,{onResize:this.handleListResize},{default:()=>{var i,o;return to("div",Li(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[0!==this.items.length?to("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[to(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map((r=>{const i=r[t],o=n.get(i),a=this.$slots.default({item:r,index:o})[0];return e?to(au,{key:i,onResize:e=>this.handleItemResize(i,e)},{default:()=>a}):(a.key=i,a)}))})]):null===(o=(i=this.$slots).empty)||void 0===o?void 0:o.call(i)])}})}}),hu=nc(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[nc("&::-webkit-scrollbar",{width:0,height:0})]),pu=Dn({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const e=bt(null);const t=tc();hu.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:rc,ssr:t});const n={scrollTo(...t){var n;null===(n=e.value)||void 0===n||n.scrollTo(...t)}};return Object.assign({selfRef:e,handleWheel:function(e){e.currentTarget.offsetWidth<e.currentTarget.scrollWidth&&0!==e.deltaY&&(e.currentTarget.scrollLeft+=e.deltaY+e.deltaX,e.preventDefault())}},n)},render(){return to("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}}),Au="v-hidden",fu=nc("[v-hidden]",{display:"none!important"}),mu=Dn({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(e,{slots:t}){const n=bt(null),r=bt(null);function i(i){const{value:o}=n,{getCounter:a,getTail:s}=e;let l;if(l=void 0!==a?a():r.value,!o||!l)return;l.hasAttribute(Au)&&l.removeAttribute(Au);const{children:c}=o;if(i.showAllItemsBeforeCalculate)for(const e of c)e.hasAttribute(Au)&&e.removeAttribute(Au);const u=o.offsetWidth,d=[],h=t.tail?null==s?void 0:s():null;let p=h?h.offsetWidth:0,A=!1;const f=o.children.length-(t.tail?1:0);for(let t=0;t<f-1;++t){if(t<0)continue;const n=c[t];if(A){n.hasAttribute(Au)||n.setAttribute(Au,"");continue}n.hasAttribute(Au)&&n.removeAttribute(Au);const r=n.offsetWidth;if(p+=r,d[t]=r,p>u){const{updateCounter:n}=e;for(let r=t;r>=0;--r){const i=f-1-r;void 0!==n?n(i):l.textContent=`${i}`;const o=l.offsetWidth;if(p-=d[r],p+o<=u||0===r){A=!0,t=r-1,h&&(-1===t?(h.style.maxWidth=u-o+"px",h.style.boxSizing="border-box"):h.style.maxWidth="");const{onUpdateCount:n}=e;n&&n(i);break}}}}const{onUpdateOverflow:m}=e;A?void 0!==m&&m(!0):(void 0!==m&&m(!1),l.setAttribute(Au,""))}const o=tc();return fu.mount({id:"vueuc/overflow",head:!0,anchorMetaName:rc,ssr:o}),vn((()=>i({showAllItemsBeforeCalculate:!1}))),{selfRef:n,counterRef:r,sync:i}},render(){const{$slots:e}=this;return Vt((()=>this.sync({showAllItemsBeforeCalculate:!1}))),to("div",{class:"v-overflow",ref:"selfRef"},[In(e,"default"),e.counter?e.counter():to("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function gu(e){return e instanceof HTMLElement}function vu(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(gu(n)&&(bu(n)||vu(n)))return!0}return!1}function yu(e){for(let t=e.childNodes.length-1;t>=0;t--){const n=e.childNodes[t];if(gu(n)&&(bu(n)||yu(n)))return!0}return!1}function bu(e){if(!function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}(e))return!1;try{e.focus({preventScroll:!0})}catch(g9){}return document.activeElement===e}let wu=[];const xu=Dn({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=Ha(),n=bt(null),r=bt(null);let i=!1,o=!1;const a="undefined"==typeof document?null:document.activeElement;function s(){return wu[wu.length-1]===t}function l(t){var n;"Escape"===t.code&&s()&&(null===(n=e.onEsc)||void 0===n||n.call(e,t))}function c(e){if(!o&&s()){const t=u();if(null===t)return;if(t.contains(ma(e)))return;h("first")}}function u(){const e=n.value;if(null===e)return null;let t=e;for(;!(t=t.nextSibling,null===t||t instanceof Element&&"DIV"===t.tagName););return t}function d(){var n;if(e.disabled)return;if(document.removeEventListener("focus",c,!0),wu=wu.filter((e=>e!==t)),s())return;const{finalFocusTo:r}=e;void 0!==r?null===(n=ac(r))||void 0===n||n.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&a instanceof HTMLElement&&(o=!0,a.focus({preventScroll:!0}),o=!1)}function h(t){if(s()&&e.active){const e=n.value,i=r.value;if(null!==e&&null!==i){const n=u();if(null==n||n===i)return o=!0,e.focus({preventScroll:!0}),void(o=!1);o=!0;const r="first"===t?vu(n):yu(n);o=!1,r||(o=!0,e.focus({preventScroll:!0}),o=!1)}}}return vn((()=>{Ir((()=>e.active),(n=>{n?(!function(){var n;if(e.disabled)return;if(wu.push(t),e.autoFocus){const{initialFocusTo:t}=e;void 0===t?h("first"):null===(n=ac(t))||void 0===n||n.focus({preventScroll:!0})}i=!0,document.addEventListener("focus",c,!0)}(),ul("keydown",document,l)):(dl("keydown",document,l),i&&d())}),{immediate:!0})})),wn((()=>{dl("keydown",document,l),i&&d()})),{focusableStartRef:n,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:function(e){if(o)return;const t=u();null!==t&&(null!==e.relatedTarget&&t.contains(e.relatedTarget)?h("last"):h("first"))},handleEndFocus:function(e){o||(null!==e.relatedTarget&&e.relatedTarget===n.value?h("last"):h("first"))}}},render(){const{default:e}=this.$slots;if(void 0===e)return null;if(this.disabled)return e();const{active:t,focusableStyle:n}=this;return to(di,null,[to("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:n,onFocus:this.handleStartFocus}),e(),to("div",{"aria-hidden":"true",style:n,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}});function Cu(e,t){t&&(vn((()=>{const{value:n}=e;n&&ou.registerHandler(n,t)})),wn((()=>{const{value:t}=e;t&&ou.unregisterHandler(t)})))}let Su=0,Bu="",_u="",Eu="",Mu="";const Pu=bt("0px");const Tu=bt(!1),Du=()=>{Tu.value=!0},Fu=()=>{Tu.value=!1};let Iu=0;function ku(e){const t={isDeactivated:!1};let n=!1;return zr((()=>{t.isDeactivated=!1,n?e():n=!0})),Nr((()=>{t.isDeactivated=!0,n||(n=!0)})),t}const Ou="n-form-item";function Lu(e,{defaultSize:t="medium",mergedSize:n,mergedDisabled:r}={}){const i=rr(Ou,null);nr(Ou,null);const o=eo(n?()=>n(i):()=>{const{size:n}=e;if(n)return n;if(i){const{mergedSize:e}=i;if(void 0!==e.value)return e.value}return t}),a=eo(r?()=>r(i):()=>{const{disabled:t}=e;return void 0!==t?t:!!i&&i.disabled.value}),s=eo((()=>{const{status:t}=e;return t||(null==i?void 0:i.mergedValidationStatus.value)}));return wn((()=>{i&&i.restoreValidation()})),{mergedSizeRef:o,mergedDisabledRef:a,mergedStatusRef:s,nTriggerFormBlur(){i&&i.handleContentBlur()},nTriggerFormChange(){i&&i.handleContentChange()},nTriggerFormFocus(){i&&i.handleContentFocus()},nTriggerFormInput(){i&&i.handleContentInput()}}}var Ru="object"==typeof global&&global&&global.Object===Object&&global,Uu="object"==typeof self&&self&&self.Object===Object&&self,zu=Ru||Uu||Function("return this")(),Nu=zu.Symbol,ju=Object.prototype,Hu=ju.hasOwnProperty,Qu=ju.toString,Vu=Nu?Nu.toStringTag:void 0;var Wu=Object.prototype.toString;var Gu="[object Null]",qu="[object Undefined]",Ku=Nu?Nu.toStringTag:void 0;function Yu(e){return null==e?void 0===e?qu:Gu:Ku&&Ku in Object(e)?function(e){var t=Hu.call(e,Vu),n=e[Vu];try{e[Vu]=void 0;var r=!0}catch(g9){}var i=Qu.call(e);return r&&(t?e[Vu]=n:delete e[Vu]),i}(e):function(e){return Wu.call(e)}(e)}function Xu(e){return null!=e&&"object"==typeof e}var $u="[object Symbol]";function Ju(e){return"symbol"==typeof e||Xu(e)&&Yu(e)==$u}function Zu(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var ed=Array.isArray,td=1/0,nd=Nu?Nu.prototype:void 0,rd=nd?nd.toString:void 0;function id(e){if("string"==typeof e)return e;if(ed(e))return Zu(e,id)+"";if(Ju(e))return rd?rd.call(e):"";var t=e+"";return"0"==t&&1/e==-td?"-0":t}var od=/\s/;var ad=/^\s+/;function sd(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&od.test(e.charAt(t)););return t}(e)+1).replace(ad,""):e}function ld(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var cd=NaN,ud=/^[-+]0x[0-9a-f]+$/i,dd=/^0b[01]+$/i,hd=/^0o[0-7]+$/i,pd=parseInt;function Ad(e){if("number"==typeof e)return e;if(Ju(e))return cd;if(ld(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ld(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=sd(e);var n=dd.test(e);return n||hd.test(e)?pd(e.slice(2),n?2:8):ud.test(e)?cd:+e}function fd(e){return e}var md="[object AsyncFunction]",gd="[object Function]",vd="[object GeneratorFunction]",yd="[object Proxy]";function bd(e){if(!ld(e))return!1;var t=Yu(e);return t==gd||t==vd||t==md||t==yd}var wd,xd=zu["__core-js_shared__"],Cd=(wd=/[^.]+$/.exec(xd&&xd.keys&&xd.keys.IE_PROTO||""))?"Symbol(src)_1."+wd:"";var Sd=Function.prototype.toString;function Bd(e){if(null!=e){try{return Sd.call(e)}catch(g9){}try{return e+""}catch(g9){}}return""}var _d=/^\[object .+?Constructor\]$/,Ed=Function.prototype,Md=Object.prototype,Pd=Ed.toString,Td=Md.hasOwnProperty,Dd=RegExp("^"+Pd.call(Td).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fd(e){return!(!ld(e)||(t=e,Cd&&Cd in t))&&(bd(e)?Dd:_d).test(Bd(e));var t}function Id(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Fd(n)?n:void 0}var kd=Id(zu,"WeakMap"),Od=Object.create,Ld=function(){function e(){}return function(t){if(!ld(t))return{};if(Od)return Od(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var Rd=Date.now;var Ud,zd,Nd,jd=function(){try{var e=Id(Object,"defineProperty");return e({},"",{}),e}catch(g9){}}(),Hd=jd?function(e,t){return jd(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:fd,Qd=(Ud=Hd,zd=0,Nd=0,function(){var e=Rd(),t=16-(e-Nd);if(Nd=e,t>0){if(++zd>=800)return arguments[0]}else zd=0;return Ud.apply(void 0,arguments)}),Vd=9007199254740991,Wd=/^(?:0|[1-9]\d*)$/;function Gd(e,t){var n=typeof e;return!!(t=null==t?Vd:t)&&("number"==n||"symbol"!=n&&Wd.test(e))&&e>-1&&e%1==0&&e<t}function qd(e,t,n){"__proto__"==t&&jd?jd(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Kd(e,t){return e===t||e!=e&&t!=t}var Yd=Object.prototype.hasOwnProperty;function Xd(e,t,n){var r=e[t];Yd.call(e,t)&&Kd(r,n)&&(void 0!==n||t in e)||qd(e,t,n)}var $d=Math.max;function Jd(e,t){return Qd(function(e,t,n){return t=$d(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=$d(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,fd),e+"")}var Zd=9007199254740991;function eh(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Zd}function th(e){return null!=e&&eh(e.length)&&!bd(e)}var nh=Object.prototype;function rh(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||nh)}function ih(e){return Xu(e)&&"[object Arguments]"==Yu(e)}var oh=Object.prototype,ah=oh.hasOwnProperty,sh=oh.propertyIsEnumerable,lh=ih(function(){return arguments}())?ih:function(e){return Xu(e)&&ah.call(e,"callee")&&!sh.call(e,"callee")};var ch="object"==typeof exports&&exports&&!exports.nodeType&&exports,uh=ch&&"object"==typeof module&&module&&!module.nodeType&&module,dh=uh&&uh.exports===ch?zu.Buffer:void 0,hh=(dh?dh.isBuffer:void 0)||function(){return!1},ph={};ph["[object Float32Array]"]=ph["[object Float64Array]"]=ph["[object Int8Array]"]=ph["[object Int16Array]"]=ph["[object Int32Array]"]=ph["[object Uint8Array]"]=ph["[object Uint8ClampedArray]"]=ph["[object Uint16Array]"]=ph["[object Uint32Array]"]=!0,ph["[object Arguments]"]=ph["[object Array]"]=ph["[object ArrayBuffer]"]=ph["[object Boolean]"]=ph["[object DataView]"]=ph["[object Date]"]=ph["[object Error]"]=ph["[object Function]"]=ph["[object Map]"]=ph["[object Number]"]=ph["[object Object]"]=ph["[object RegExp]"]=ph["[object Set]"]=ph["[object String]"]=ph["[object WeakMap]"]=!1;var Ah="object"==typeof exports&&exports&&!exports.nodeType&&exports,fh=Ah&&"object"==typeof module&&module&&!module.nodeType&&module,mh=fh&&fh.exports===Ah&&Ru.process,gh=function(){try{var e=fh&&fh.require&&fh.require("util").types;return e||mh&&mh.binding&&mh.binding("util")}catch(g9){}}(),vh=gh&&gh.isTypedArray,yh=vh?function(e){return function(t){return e(t)}}(vh):function(e){return Xu(e)&&eh(e.length)&&!!ph[Yu(e)]},bh=Object.prototype.hasOwnProperty;function wh(e,t){var n=ed(e),r=!n&&lh(e),i=!n&&!r&&hh(e),o=!n&&!r&&!i&&yh(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!bh.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Gd(c,l))||s.push(c);return s}function xh(e,t){return function(n){return e(t(n))}}var Ch=xh(Object.keys,Object),Sh=Object.prototype.hasOwnProperty;function Bh(e){return th(e)?wh(e):function(e){if(!rh(e))return Ch(e);var t=[];for(var n in Object(e))Sh.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var _h=Object.prototype.hasOwnProperty;function Eh(e){if(!ld(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=rh(e),n=[];for(var r in e)("constructor"!=r||!t&&_h.call(e,r))&&n.push(r);return n}function Mh(e){return th(e)?wh(e,!0):Eh(e)}var Ph=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Th=/^\w*$/;function Dh(e,t){if(ed(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ju(e))||(Th.test(e)||!Ph.test(e)||null!=t&&e in Object(t))}var Fh=Id(Object,"create");var Ih=Object.prototype.hasOwnProperty;var kh=Object.prototype.hasOwnProperty;function Oh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Lh(e,t){for(var n=e.length;n--;)if(Kd(e[n][0],t))return n;return-1}Oh.prototype.clear=function(){this.__data__=Fh?Fh(null):{},this.size=0},Oh.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Oh.prototype.get=function(e){var t=this.__data__;if(Fh){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ih.call(t,e)?t[e]:void 0},Oh.prototype.has=function(e){var t=this.__data__;return Fh?void 0!==t[e]:kh.call(t,e)},Oh.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fh&&void 0===t?"__lodash_hash_undefined__":t,this};var Rh=Array.prototype.splice;function Uh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Uh.prototype.clear=function(){this.__data__=[],this.size=0},Uh.prototype.delete=function(e){var t=this.__data__,n=Lh(t,e);return!(n<0)&&(n==t.length-1?t.pop():Rh.call(t,n,1),--this.size,!0)},Uh.prototype.get=function(e){var t=this.__data__,n=Lh(t,e);return n<0?void 0:t[n][1]},Uh.prototype.has=function(e){return Lh(this.__data__,e)>-1},Uh.prototype.set=function(e,t){var n=this.__data__,r=Lh(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var zh=Id(zu,"Map");function Nh(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function jh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jh.prototype.clear=function(){this.size=0,this.__data__={hash:new Oh,map:new(zh||Uh),string:new Oh}},jh.prototype.delete=function(e){var t=Nh(this,e).delete(e);return this.size-=t?1:0,t},jh.prototype.get=function(e){return Nh(this,e).get(e)},jh.prototype.has=function(e){return Nh(this,e).has(e)},jh.prototype.set=function(e,t){var n=Nh(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Hh="Expected a function";function Qh(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Hh);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Qh.Cache||jh),n}Qh.Cache=jh;var Vh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wh=/\\(\\)?/g,Gh=function(e){var t=Qh(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Vh,(function(e,n,r,i){t.push(r?i.replace(Wh,"$1"):n||e)})),t}));function qh(e){return null==e?"":id(e)}function Kh(e,t){return ed(e)?e:Dh(e,t)?[e]:Gh(qh(e))}var Yh=1/0;function Xh(e){if("string"==typeof e||Ju(e))return e;var t=e+"";return"0"==t&&1/e==-Yh?"-0":t}function $h(e,t){for(var n=0,r=(t=Kh(t,e)).length;null!=e&&n<r;)e=e[Xh(t[n++])];return n&&n==r?e:void 0}function Jh(e,t,n){var r=null==e?void 0:$h(e,t);return void 0===r?n:r}var Zh=xh(Object.getPrototypeOf,Object),ep="[object Object]",tp=Function.prototype,np=Object.prototype,rp=tp.toString,ip=np.hasOwnProperty,op=rp.call(Object);function ap(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)}var sp=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function lp(e){return sp.test(e)}var cp="\\ud800-\\udfff",up="["+cp+"]",dp="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",hp="\\ud83c[\\udffb-\\udfff]",pp="[^"+cp+"]",Ap="(?:\\ud83c[\\udde6-\\uddff]){2}",fp="[\\ud800-\\udbff][\\udc00-\\udfff]",mp="(?:"+dp+"|"+hp+")"+"?",gp="[\\ufe0e\\ufe0f]?",vp=gp+mp+("(?:\\u200d(?:"+[pp,Ap,fp].join("|")+")"+gp+mp+")*"),yp="(?:"+[pp+dp+"?",dp,Ap,fp,up].join("|")+")",bp=RegExp(hp+"(?="+hp+")|"+yp+vp,"g");function wp(e){return lp(e)?function(e){return e.match(bp)||[]}(e):function(e){return e.split("")}(e)}var xp,Cp=(xp="toUpperCase",function(e){var t=lp(e=qh(e))?wp(e):void 0,n=t?t[0]:e.charAt(0),r=t?ap(t,1).join(""):e.slice(1);return n[xp]()+r});function Sp(e){var t=this.__data__=new Uh(e);this.size=t.size}Sp.prototype.clear=function(){this.__data__=new Uh,this.size=0},Sp.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Sp.prototype.get=function(e){return this.__data__.get(e)},Sp.prototype.has=function(e){return this.__data__.has(e)},Sp.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Uh){var r=n.__data__;if(!zh||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new jh(r)}return n.set(e,t),this.size=n.size,this};var Bp="object"==typeof exports&&exports&&!exports.nodeType&&exports,_p=Bp&&"object"==typeof module&&module&&!module.nodeType&&module,Ep=_p&&_p.exports===Bp?zu.Buffer:void 0;Ep&&Ep.allocUnsafe;var Mp=Object.prototype.propertyIsEnumerable,Pp=Object.getOwnPropertySymbols,Tp=Pp?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(Pp(e),(function(t){return Mp.call(e,t)})))}:function(){return[]};function Dp(e){return function(e,t,n){var r=t(e);return ed(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Bh,Tp)}var Fp=Id(zu,"DataView"),Ip=Id(zu,"Promise"),kp=Id(zu,"Set"),Op="[object Map]",Lp="[object Promise]",Rp="[object Set]",Up="[object WeakMap]",zp="[object DataView]",Np=Bd(Fp),jp=Bd(zh),Hp=Bd(Ip),Qp=Bd(kp),Vp=Bd(kd),Wp=Yu;(Fp&&Wp(new Fp(new ArrayBuffer(1)))!=zp||zh&&Wp(new zh)!=Op||Ip&&Wp(Ip.resolve())!=Lp||kp&&Wp(new kp)!=Rp||kd&&Wp(new kd)!=Up)&&(Wp=function(e){var t=Yu(e),n="[object Object]"==t?e.constructor:void 0,r=n?Bd(n):"";if(r)switch(r){case Np:return zp;case jp:return Op;case Hp:return Lp;case Qp:return Rp;case Vp:return Up}return t});var Gp=zu.Uint8Array;function qp(e,t){var n,r,i=(n=e.buffer,r=new n.constructor(n.byteLength),new Gp(r).set(new Gp(n)),r);return new e.constructor(i,e.byteOffset,e.length)}function Kp(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new jh;++t<n;)this.add(e[t])}function Yp(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}Kp.prototype.add=Kp.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Kp.prototype.has=function(e){return this.__data__.has(e)};var Xp=1,$p=2;function Jp(e,t,n,r,i,o){var a=n&Xp,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=n&$p?new Kp:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var A=e[d],f=t[d];if(r)var m=a?r(f,A,d,t,e,o):r(A,f,d,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!Yp(t,(function(e,t){if(a=t,!p.has(a)&&(A===e||i(A,e,n,r,o)))return p.push(t);var a}))){h=!1;break}}else if(A!==f&&!i(A,f,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Zp(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function eA(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var tA=1,nA=2,rA="[object Boolean]",iA="[object Date]",oA="[object Error]",aA="[object Map]",sA="[object Number]",lA="[object RegExp]",cA="[object Set]",uA="[object String]",dA="[object Symbol]",hA="[object ArrayBuffer]",pA="[object DataView]",AA=Nu?Nu.prototype:void 0,fA=AA?AA.valueOf:void 0;var mA=1,gA=Object.prototype.hasOwnProperty;var vA=1,yA="[object Arguments]",bA="[object Array]",wA="[object Object]",xA=Object.prototype.hasOwnProperty;function CA(e,t,n,r,i,o){var a=ed(e),s=ed(t),l=a?bA:Wp(e),c=s?bA:Wp(t),u=(l=l==yA?wA:l)==wA,d=(c=c==yA?wA:c)==wA,h=l==c;if(h&&hh(e)){if(!hh(t))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new Sp),a||yh(e)?Jp(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case pA:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case hA:return!(e.byteLength!=t.byteLength||!o(new Gp(e),new Gp(t)));case rA:case iA:case sA:return Kd(+e,+t);case oA:return e.name==t.name&&e.message==t.message;case lA:case uA:return e==t+"";case aA:var s=Zp;case cA:var l=r&tA;if(s||(s=eA),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=nA,a.set(e,t);var u=Jp(s(e),s(t),r,i,o,a);return a.delete(e),u;case dA:if(fA)return fA.call(e)==fA.call(t)}return!1}(e,t,l,n,r,i,o);if(!(n&vA)){var p=u&&xA.call(e,"__wrapped__"),A=d&&xA.call(t,"__wrapped__");if(p||A){var f=p?e.value():e,m=A?t.value():t;return o||(o=new Sp),i(f,m,n,r,o)}}return!!h&&(o||(o=new Sp),function(e,t,n,r,i,o){var a=n&mA,s=Dp(e),l=s.length;if(l!=Dp(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:gA.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var A=a;++c<l;){var f=e[u=s[c]],m=t[u];if(r)var g=a?r(m,f,u,t,e,o):r(f,m,u,e,t,o);if(!(void 0===g?f===m||i(f,m,n,r,o):g)){p=!1;break}A||(A="constructor"==u)}if(p&&!A){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))}function SA(e,t,n,r,i){return e===t||(null==e||null==t||!Xu(e)&&!Xu(t)?e!=e&&t!=t:CA(e,t,n,r,SA,i))}var BA=1,_A=2;function EA(e){return e==e&&!ld(e)}function MA(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function PA(e){var t=function(e){for(var t=Bh(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,EA(i)]}return t}(e);return 1==t.length&&t[0][2]?MA(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var s=(a=n[i])[0],l=e[s],c=a[1];if(a[2]){if(void 0===l&&!(s in e))return!1}else{var u=new Sp;if(!SA(c,l,BA|_A,r,u))return!1}}return!0}(n,0,t)}}function TA(e,t){return null!=e&&t in Object(e)}function DA(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=Kh(t,e)).length,o=!1;++r<i;){var a=Xh(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&eh(i)&&Gd(a,i)&&(ed(e)||lh(e))}(e,t,TA)}var FA=1,IA=2;function kA(e){return Dh(e)?(t=Xh(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return $h(t,e)}}(e);var t}function OA(e){return"function"==typeof e?e:null==e?fd:"object"==typeof e?ed(e)?(t=e[0],n=e[1],Dh(t)&&EA(n)?MA(Xh(t),n):function(e){var r=Jh(e,t);return void 0===r&&r===n?DA(e,t):SA(n,r,FA|IA)}):PA(e):kA(e);var t,n}var LA=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e};var RA,UA=(RA=function(e,t){return e&&LA(e,t,Bh)},function(e,t){if(null==e)return e;if(!th(e))return RA(e,t);for(var n=e.length,r=-1,i=Object(e);++r<n&&!1!==t(i[r],r,i););return e}),zA=function(){return zu.Date.now()},NA="Expected a function",jA=Math.max,HA=Math.min;function QA(e,t,n){var r,i,o,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(NA);function p(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function A(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function f(){var e=zA();if(A(e))return m(e);s=setTimeout(f,function(e){var n=t-(e-l);return d?HA(n,o-(e-c)):n}(e))}function m(e){return s=void 0,h&&r?p(e):(r=i=void 0,a)}function g(){var e=zA(),n=A(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(f,t),u?p(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(f,t),p(l)}return void 0===s&&(s=setTimeout(f,t)),a}return t=Ad(t)||0,ld(n)&&(u=!!n.leading,o=(d="maxWait"in n)?jA(Ad(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),g.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},g.flush=function(){return void 0===s?a:m(zA())},g}function VA(e,t,n){(void 0!==n&&!Kd(e[t],n)||void 0===n&&!(t in e))&&qd(e,t,n)}function WA(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function GA(e){return function(e,t,n){var r=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=void 0;void 0===s&&(s=e[a]),r?qd(n,a,s):Xd(n,a,s)}return n}(e,Mh(e))}function qA(e,t,n,r,i,o,a){var s=WA(e,n),l=WA(t,n),c=a.get(l);if(c)VA(e,n,c);else{var u,d=o?o(s,l,n+"",e,t,a):void 0,h=void 0===d;if(h){var p=ed(l),A=!p&&hh(l),f=!p&&!A&&yh(l);d=l,p||A||f?ed(s)?d=s:Xu(u=s)&&th(u)?d=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):A?(h=!1,d=l.slice()):f?(h=!1,d=qp(l)):d=[]:function(e){if(!Xu(e)||Yu(e)!=ep)return!1;var t=Zh(e);if(null===t)return!0;var n=ip.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&rp.call(n)==op}(l)||lh(l)?(d=s,lh(s)?d=GA(s):ld(s)&&!bd(s)||(d=function(e){return"function"!=typeof e.constructor||rh(e)?{}:Ld(Zh(e))}(l))):h=!1}h&&(a.set(l,d),i(d,l,r,o,a),a.delete(l)),VA(e,n,d)}}function KA(e,t,n,r,i){e!==t&&LA(t,(function(o,a){if(i||(i=new Sp),ld(o))qA(e,t,a,n,KA,r,i);else{var s=r?r(WA(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),VA(e,a,s)}}),Mh)}function YA(e,t){var n=-1,r=th(e)?Array(e.length):[];return UA(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}var XA,$A=(XA=function(e,t,n){KA(e,t,n)},Jd((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=XA.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!ld(n))return!1;var r=typeof t;return!!("number"==r?th(n)&&Gd(t,n.length):"string"==r&&t in n)&&Kd(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&XA(e,a,n,i)}return e})));function JA(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ld(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),QA(e,t,{leading:r,maxWait:t,trailing:i})}const ZA={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightMini:"16px",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px"},{fontSize:ef,fontFamily:tf,lineHeight:nf}=ZA,rf=Ls("body",`\n margin: 0;\n font-size: ${ef};\n font-family: ${tf};\n line-height: ${nf};\n -webkit-text-size-adjust: 100%;\n -webkit-tap-highlight-color: transparent;\n`,[Ls("input","\n font-family: inherit;\n font-size: inherit;\n ")]),of="n-config-provider",af="naive-ui-style";function sf(e,t,n,r,i,o){const a=tc(),s=rr(of,null);if(n){const e=()=>{const e=null==o?void 0:o.value;n.mount({id:void 0===e?t:e+t,head:!0,props:{bPrefix:e?`.${e}-`:void 0},anchorMetaName:af,ssr:a}),(null==s?void 0:s.preflightStyleDisabled)||rf.mount({id:"n-global",head:!0,anchorMetaName:af,ssr:a})};a?e():gn(e)}const l=eo((()=>{var t;const{theme:{common:n,self:o,peers:a={}}={},themeOverrides:l={},builtinThemeOverrides:c={}}=i,{common:u,peers:d}=l,{common:h,[e]:{common:p,self:A,peers:f={}}={}}=(null==s?void 0:s.mergedThemeRef.value)||{},{common:m,[e]:g={}}=(null==s?void 0:s.mergedThemeOverridesRef.value)||{},{common:v,peers:y={}}=g,b=$A({},n||p||h||r.common,m,v,u);return{common:b,self:$A(null===(t=o||A||r.self)||void 0===t?void 0:t(b),c,g,l),peers:$A({},r.peers,f,a),peerOverrides:$A({},c.peers,y,d)}}));return l}sf.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const lf="n";function cf(e={},t={defaultBordered:!0}){const n=rr(of,null);return{inlineThemeDisabled:null==n?void 0:n.inlineThemeDisabled,mergedRtlRef:null==n?void 0:n.mergedRtlRef,mergedComponentPropsRef:null==n?void 0:n.mergedComponentPropsRef,mergedBreakpointsRef:null==n?void 0:n.mergedBreakpointsRef,mergedBorderedRef:eo((()=>{var r,i;const{bordered:o}=e;return void 0!==o?o:null===(i=null!==(r=null==n?void 0:n.mergedBorderedRef.value)&&void 0!==r?r:t.defaultBordered)||void 0===i||i})),mergedClsPrefixRef:n?n.mergedClsPrefixRef:wt(lf),namespaceRef:eo((()=>null==n?void 0:n.mergedNamespaceRef.value))}}function uf(){const e=rr(of,null);return e?e.mergedClsPrefixRef:wt(lf)}const df={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm",clear:"Clear"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:e=>`Please load all ${e}'s descendants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",yearTypeFormat:"yyyy",monthTypeFormat:"yyyy-MM",dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",quarterFormat:"yyyy-qqq",weekFormat:"yyyy-w",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",quarterPlaceholder:"Select Quarter",weekPlaceholder:"Select Week",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",startMonthPlaceholder:"Start Month",endMonthPlaceholder:"End Month",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},LegacyTransfer:{sourceTitle:"Source",targetTitle:"Target"},Transfer:{selectAll:"Select all",unselectAll:"Unselect all",clearAll:"Clear",total:e=>`Total ${e} items`,selected:e=>`${e} items selected`},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now",clear:"Clear"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"},Image:{tipPrevious:"Previous picture (←)",tipNext:"Next picture (→)",tipCounterclockwise:"Counterclockwise",tipClockwise:"Clockwise",tipZoomOut:"Zoom out",tipZoomIn:"Zoom in",tipDownload:"Download",tipClose:"Close (Esc)",tipOriginalSize:"Zoom to original size"}};function hf(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}function pf(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Af(e){return(Af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ff(e){pf(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Af(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):new Date(NaN)}function mf(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var gf={};function vf(){return gf}function yf(e,t){var n,r,i,o,a,s,l,c;pf(1,arguments);var u=vf(),d=mf(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ff(e),p=h.getUTCDay(),A=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-A),h.setUTCHours(0,0,0,0),h}function bf(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!=n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function wf(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(s)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(s)}));return a=e.valueCallback?e.valueCallback(c):c,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(s.length)}}}var xf,Cf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Sf={date:hf({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:hf({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:hf({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Bf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_f={code:"en-US",formatDistance:function(e,t,n){var r,i=Cf[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Sf,formatRelative:function(e,t,n,r){return Bf[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:bf({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:bf({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:bf({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:bf({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:bf({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(xf={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(xf.matchPattern);if(!n)return null;var r=n[0],i=e.match(xf.parsePattern);if(!i)return null;var o=xf.valueCallback?xf.valueCallback(i[0]):i[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:wf({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:wf({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:wf({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:wf({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:wf({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};const Ef={name:"en-US",locale:_f};function Mf(e,t){pf(2,arguments);var n=ff(e),r=mf(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function Pf(e,t){pf(2,arguments);var n=ff(e),r=mf(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());return o.setMonth(n.getMonth()+r+1,0),i>=o.getDate()?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function Tf(e,t){var n,r,i,o,a,s,l,c;pf(1,arguments);var u=vf(),d=mf(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ff(e),p=h.getDay(),A=(p<d?7:0)+p-d;return h.setDate(h.getDate()-A),h.setHours(0,0,0,0),h}function Df(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Ff(e){pf(1,arguments);var t=ff(e);return t.setHours(0,0,0,0),t}function If(e,t){return pf(2,arguments),Pf(e,3*mf(t))}function kf(e,t){return pf(2,arguments),Pf(e,12*mf(t))}function Of(e){if(pf(1,arguments),!function(e){return pf(1,arguments),e instanceof Date||"object"===Af(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var t=ff(e);return!isNaN(Number(t))}function Lf(e){pf(1,arguments);var t=ff(e);return Math.floor(t.getMonth()/3)+1}function Rf(e){pf(1,arguments);var t=ff(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function Uf(e){pf(1,arguments);var t=ff(e);return t.setDate(1),t.setHours(0,0,0,0),t}function zf(e){pf(1,arguments);var t=ff(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Nf(e,t){return pf(2,arguments),function(e,t){pf(2,arguments);var n=ff(e).getTime(),r=mf(t);return new Date(n+r)}(e,-mf(t))}function jf(e){pf(1,arguments);var t=ff(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function Hf(e){pf(1,arguments);var t=ff(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=jf(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=jf(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}var Qf=6048e5;function Vf(e){pf(1,arguments);var t=ff(e),n=jf(t).getTime()-function(e){pf(1,arguments);var t=Hf(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),jf(n)}(t).getTime();return Math.round(n/Qf)+1}function Wf(e,t){var n,r,i,o,a,s,l,c;pf(1,arguments);var u=ff(e),d=u.getUTCFullYear(),h=vf(),p=mf(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=new Date(0);A.setUTCFullYear(d+1,0,p),A.setUTCHours(0,0,0,0);var f=yf(A,t),m=new Date(0);m.setUTCFullYear(d,0,p),m.setUTCHours(0,0,0,0);var g=yf(m,t);return u.getTime()>=f.getTime()?d+1:u.getTime()>=g.getTime()?d:d-1}var Gf=6048e5;function qf(e,t){pf(1,arguments);var n=ff(e),r=yf(n,t).getTime()-function(e,t){var n,r,i,o,a,s,l,c;pf(1,arguments);var u=vf(),d=mf(null!==(n=null!==(r=null!==(i=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=Wf(e,t),p=new Date(0);return p.setUTCFullYear(h,0,d),p.setUTCHours(0,0,0,0),yf(p,t)}(n,t).getTime();return Math.round(r/Gf)+1}function Kf(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Yf=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Kf("yy"===t?r%100:r,t.length)},Xf=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Kf(n+1,2)},$f=function(e,t){return Kf(e.getUTCDate(),t.length)},Jf=function(e,t){return Kf(e.getUTCHours()%12||12,t.length)},Zf=function(e,t){return Kf(e.getUTCHours(),t.length)},em=function(e,t){return Kf(e.getUTCMinutes(),t.length)},tm=function(e,t){return Kf(e.getUTCSeconds(),t.length)},nm=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return Kf(Math.floor(r*Math.pow(10,n-3)),t.length)},rm="midnight",im="noon",om="morning",am="afternoon",sm="evening",lm="night",cm={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Yf(e,t)},Y:function(e,t,n,r){var i=Wf(e,r),o=i>0?i:1-i;return"YY"===t?Kf(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):Kf(o,t.length)},R:function(e,t){return Kf(Hf(e),t.length)},u:function(e,t){return Kf(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Kf(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Kf(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Xf(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Kf(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=qf(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Kf(i,t.length)},I:function(e,t,n){var r=Vf(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Kf(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):$f(e,t)},D:function(e,t,n){var r=function(e){pf(1,arguments);var t=ff(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Kf(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Kf(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Kf(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Kf(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?im:0===i?rm:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?sm:i>=12?am:i>=4?om:lm,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Jf(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Zf(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Kf(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Kf(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):em(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):tm(e,t)},S:function(e,t){return nm(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return dm(i);case"XXXX":case"XX":return hm(i);default:return hm(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return dm(i);case"xxxx":case"xx":return hm(i);default:return hm(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+um(i,":");default:return"GMT"+hm(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+um(i,":");default:return"GMT"+hm(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return Kf(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return Kf((r._originalDate||e).getTime(),t.length)}};function um(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t;return n+String(i)+a+Kf(o,2)}function dm(e,t){return e%60==0?(e>0?"-":"+")+Kf(Math.abs(e)/60,2):hm(e,t)}function hm(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+Kf(Math.floor(i/60),2)+n+Kf(i%60,2)}var pm=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Am=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},fm={p:Am,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return pm(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",pm(i,t)).replace("{{time}}",Am(o,t))}},mm=["D","DD"],gm=["YY","YYYY"];function vm(e){return-1!==mm.indexOf(e)}function ym(e){return-1!==gm.indexOf(e)}function bm(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var wm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cm=/^'([^]*?)'?$/,Sm=/''/g,Bm=/[a-zA-Z]/;function _m(e,t,n){var r,i,o,a,s,l,c,u,d,h,p,A,f,m,g,v,y,b;pf(2,arguments);var w=String(t),x=vf(),C=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:x.locale)&&void 0!==r?r:_f,S=mf(null!==(o=null!==(a=null!==(s=null!==(l=null==n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null==n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:x.firstWeekContainsDate)&&void 0!==a?a:null===(d=x.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var B=mf(null!==(p=null!==(A=null!==(f=null!==(m=null==n?void 0:n.weekStartsOn)&&void 0!==m?m:null==n||null===(g=n.locale)||void 0===g||null===(v=g.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==f?f:x.weekStartsOn)&&void 0!==A?A:null===(y=x.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==p?p:0);if(!(B>=0&&B<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var _=ff(e);if(!Of(_))throw new RangeError("Invalid time value");var E=Nf(_,Df(_)),M={firstWeekContainsDate:S,weekStartsOn:B,locale:C,_originalDate:_};return w.match(xm).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,fm[t])(e,C.formatLong):e})).join("").match(wm).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(Cm);if(!t)return e;return t[1].replace(Sm,"'")}(r);var o=cm[i];if(o)return null!=n&&n.useAdditionalWeekYearTokens||!ym(r)||bm(r,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!vm(r)||bm(r,t,String(e)),o(E,r,C.localize,M);if(i.match(Bm))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}function Em(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Mm(e){return pf(1,arguments),ff(e).getDate()}function Pm(e){return pf(1,arguments),ff(e).getDay()}function Tm(e){return pf(1,arguments),ff(e).getHours()}function Dm(e){return pf(1,arguments),ff(e).getMilliseconds()}function Fm(e){return pf(1,arguments),ff(e).getMinutes()}function Im(e){return pf(1,arguments),ff(e).getMonth()}function km(e){return pf(1,arguments),ff(e).getSeconds()}function Om(e){return pf(1,arguments),ff(e).getTime()}function Lm(e){return pf(1,arguments),ff(e).getFullYear()}function Rm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Um(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rm(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rm(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function zm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nm(e,t){return(Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nm(e,t)}function Hm(e){return(Hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qm=function(){return!!e})()}function Vm(e){var t=Qm();return function(){var n,r=Hm(e);if(t){var i=Hm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Af(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zm(e)}(this,n)}}function Wm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gm(e){var t=function(e,t){if("object"!=Af(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Af(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Af(t)?t:t+""}function qm(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gm(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Km(e,t,n){return(t=Gm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ym=function(){function e(){Wm(this,e),Km(this,"priority",void 0),Km(this,"subPriority",0)}return qm(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),Xm=function(){jm(t,Ym);var e=Vm(t);function t(n,r,i,o,a){var s;return Wm(this,t),(s=e.call(this)).value=n,s.validateValue=r,s.setValue=i,s.priority=o,a&&(s.subPriority=a),s}return qm(t,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),t}(),$m=function(){jm(t,Ym);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",10),Km(zm(n),"subPriority",-1),n}return qm(t,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),t}(),Jm=function(){function e(){Wm(this,e),Km(this,"incompatibleTokens",void 0),Km(this,"priority",void 0),Km(this,"subPriority",void 0)}return qm(e,[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new Xm(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),Zm=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",140),Km(zm(n),"incompatibleTokens",["R","u","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),eg=/^(1[0-2]|0?\d)/,tg=/^(3[0-1]|[0-2]?\d)/,ng=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,rg=/^(5[0-3]|[0-4]?\d)/,ig=/^(2[0-3]|[0-1]?\d)/,og=/^(2[0-4]|[0-1]?\d)/,ag=/^(1[0-1]|0?\d)/,sg=/^(1[0-2]|0?\d)/,lg=/^[0-5]?\d/,cg=/^[0-5]?\d/,ug=/^\d/,dg=/^\d{1,2}/,hg=/^\d{1,3}/,pg=/^\d{1,4}/,Ag=/^-?\d+/,fg=/^-?\d/,mg=/^-?\d{1,2}/,gg=/^-?\d{1,3}/,vg=/^-?\d{1,4}/,yg=/^([+-])(\d{2})(\d{2})?|Z/,bg=/^([+-])(\d{2})(\d{2})|Z/,wg=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,xg=/^([+-])(\d{2}):(\d{2})|Z/,Cg=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Sg(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Bg(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function _g(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function Eg(e){return Bg(Ag,e)}function Mg(e,t){switch(e){case 1:return Bg(ug,t);case 2:return Bg(dg,t);case 3:return Bg(hg,t);case 4:return Bg(pg,t);default:return Bg(new RegExp("^\\d{1,"+e+"}"),t)}}function Pg(e,t){switch(e){case 1:return Bg(fg,t);case 2:return Bg(mg,t);case 3:return Bg(gg,t);case 4:return Bg(vg,t);default:return Bg(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Tg(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Dg(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function Fg(e){return e%400==0||e%4==0&&e%100!=0}var Ig=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",130),Km(zm(n),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Sg(Mg(4,e),r);case"yo":return Sg(n.ordinalNumber(e,{unit:"year"}),r);default:return Sg(Mg(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=Dg(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),kg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",130),Km(zm(n),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Sg(Mg(4,e),r);case"Yo":return Sg(n.ordinalNumber(e,{unit:"year"}),r);default:return Sg(Mg(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=Wf(e,r);if(n.isTwoDigitYear){var o=Dg(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),yf(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),yf(e,r)}}]),t}(),Og=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",130),Km(zm(n),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t){return Pg("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),jf(r)}}]),t}(),Lg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",130),Km(zm(n),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t){return Pg("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),Rg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",120),Km(zm(n),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return Mg(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(),Ug=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",120),Km(zm(n),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return Mg(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(),zg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Km(zm(n),"priority",110),n}return qm(t,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return Sg(Bg(eg,e),r);case"MM":return Sg(Mg(2,e),r);case"Mo":return Sg(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),t}(),Ng=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",110),Km(zm(n),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return Sg(Bg(eg,e),r);case"LL":return Sg(Mg(2,e),r);case"Lo":return Sg(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),t}();var jg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",100),Km(zm(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"w":return Bg(rg,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return yf(function(e,t,n){pf(2,arguments);var r=ff(e),i=mf(t),o=qf(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}]),t}();var Hg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",100),Km(zm(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"I":return Bg(rg,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return jf(function(e,t){pf(2,arguments);var n=ff(e),r=mf(t),i=Vf(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}]),t}(),Qg=[31,28,31,30,31,30,31,31,30,31,30,31],Vg=[31,29,31,30,31,30,31,31,30,31,30,31],Wg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",90),Km(zm(n),"subPriority",1),Km(zm(n),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"d":return Bg(tg,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){var n=Fg(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Vg[r]:t>=1&&t<=Qg[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),t}(),Gg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",90),Km(zm(n),"subpriority",1),Km(zm(n),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return Bg(ng,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return Fg(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),t}();function qg(e,t,n){var r,i,o,a,s,l,c,u;pf(2,arguments);var d=vf(),h=mf(null!==(r=null!==(i=null!==(o=null!==(a=null==n?void 0:n.weekStartsOn)&&void 0!==a?a:null==n||null===(s=n.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:d.weekStartsOn)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ff(e),A=mf(t),f=((A%7+7)%7<h?7:0)+A-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+f),p}var Kg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",90),Km(zm(n),"incompatibleTokens",["D","i","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=qg(e,n,r)).setUTCHours(0,0,0,0),e}}]),t}(),Yg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",90),Km(zm(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Sg(Mg(t.length,e),i);case"eo":return Sg(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=qg(e,n,r)).setUTCHours(0,0,0,0),e}}]),t}(),Xg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",90),Km(zm(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Sg(Mg(t.length,e),i);case"co":return Sg(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=qg(e,n,r)).setUTCHours(0,0,0,0),e}}]),t}();var $g=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",90),Km(zm(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Mg(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Sg(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Sg(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Sg(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return Sg(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){pf(2,arguments);var n=mf(t);n%7==0&&(n-=7);var r=ff(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),t}(),Jg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",80),Km(zm(n),"incompatibleTokens",["b","B","H","k","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Tg(n),0,0,0),e}}]),t}(),Zg=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",80),Km(zm(n),"incompatibleTokens",["a","B","H","k","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Tg(n),0,0,0),e}}]),t}(),ev=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",80),Km(zm(n),"incompatibleTokens",["a","b","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Tg(n),0,0,0),e}}]),t}(),tv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",70),Km(zm(n),"incompatibleTokens",["H","K","k","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"h":return Bg(sg,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),t}(),nv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",70),Km(zm(n),"incompatibleTokens",["a","b","h","K","k","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"H":return Bg(ig,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),t}(),rv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",70),Km(zm(n),"incompatibleTokens",["h","H","k","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"K":return Bg(ag,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),t}(),iv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",70),Km(zm(n),"incompatibleTokens",["a","b","h","H","K","t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"k":return Bg(og,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),t}(),ov=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",60),Km(zm(n),"incompatibleTokens",["t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"m":return Bg(lg,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),t}(),av=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",50),Km(zm(n),"incompatibleTokens",["t","T"]),n}return qm(t,[{key:"parse",value:function(e,t,n){switch(t){case"s":return Bg(cg,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Mg(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),t}(),sv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",30),Km(zm(n),"incompatibleTokens",["t","T"]),n}return qm(t,[{key:"parse",value:function(e,t){return Sg(Mg(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),t}(),lv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",10),Km(zm(n),"incompatibleTokens",["t","T","x"]),n}return qm(t,[{key:"parse",value:function(e,t){switch(t){case"X":return _g(yg,e);case"XX":return _g(bg,e);case"XXXX":return _g(wg,e);case"XXXXX":return _g(Cg,e);default:return _g(xg,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),t}(),cv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",10),Km(zm(n),"incompatibleTokens",["t","T","X"]),n}return qm(t,[{key:"parse",value:function(e,t){switch(t){case"x":return _g(yg,e);case"xx":return _g(bg,e);case"xxxx":return _g(wg,e);case"xxxxx":return _g(Cg,e);default:return _g(xg,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),t}(),uv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",40),Km(zm(n),"incompatibleTokens","*"),n}return qm(t,[{key:"parse",value:function(e){return Eg(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),t}(),dv=function(){jm(t,Jm);var e=Vm(t);function t(){var n;Wm(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Km(zm(n=e.call.apply(e,[this].concat(i))),"priority",20),Km(zm(n),"incompatibleTokens","*"),n}return qm(t,[{key:"parse",value:function(e){return Eg(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),t}(),hv={G:new Zm,y:new Ig,Y:new kg,R:new Og,u:new Lg,Q:new Rg,q:new Ug,M:new zg,L:new Ng,w:new jg,I:new Hg,d:new Wg,D:new Gg,E:new Kg,e:new Yg,c:new Xg,i:new $g,a:new Jg,b:new Zg,B:new ev,h:new tv,H:new nv,K:new rv,k:new iv,m:new ov,s:new av,S:new sv,X:new lv,x:new cv,t:new uv,T:new dv},pv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Av=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fv=/^'([^]*?)'?$/,mv=/''/g,gv=/\S/,vv=/[a-zA-Z]/;function yv(e,t,n,r){var i,o,a,s,l,c,u,d,h,p,A,f,m,g,v,y,b,w;pf(3,arguments);var x=String(e),C=String(t),S=vf(),B=null!==(i=null!==(o=null==r?void 0:r.locale)&&void 0!==o?o:S.locale)&&void 0!==i?i:_f;if(!B.match)throw new RangeError("locale must contain match property");var _=mf(null!==(a=null!==(s=null!==(l=null!==(c=null==r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null==r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:S.firstWeekContainsDate)&&void 0!==s?s:null===(h=S.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==a?a:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=mf(null!==(A=null!==(f=null!==(m=null!==(g=null==r?void 0:r.weekStartsOn)&&void 0!==g?g:null==r||null===(v=r.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:S.weekStartsOn)&&void 0!==f?f:null===(b=S.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==A?A:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===C)return""===x?ff(n):new Date(NaN);var M,P={firstWeekContainsDate:_,weekStartsOn:E,locale:B},T=[new $m],D=C.match(Av).map((function(e){var t=e[0];return t in fm?(0,fm[t])(e,B.formatLong):e})).join("").match(pv),F=[],I=Um(D);try{var k=function(){var t=M.value;null!=r&&r.useAdditionalWeekYearTokens||!ym(t)||bm(t,C,e),null!=r&&r.useAdditionalDayOfYearTokens||!vm(t)||bm(t,C,e);var n=t[0],i=hv[n];if(i){var o=i.incompatibleTokens;if(Array.isArray(o)){var a=F.find((function(e){return o.includes(e.token)||e.token===n}));if(a)throw new RangeError("The format string mustn't contain `".concat(a.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&F.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));F.push({token:n,fullToken:t});var s=i.run(x,t,B.match,P);if(!s)return{v:new Date(NaN)};T.push(s.setter),x=s.rest}else{if(n.match(vv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(fv)[1].replace(mv,"'")),0!==x.indexOf(t))return{v:new Date(NaN)};x=x.slice(t.length)}};for(I.s();!(M=I.n()).done;){var O=k();if("object"===Af(O))return O.v}}catch(V){I.e(V)}finally{I.f()}if(x.length>0&&gv.test(x))return new Date(NaN);var L=T.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return T.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),R=ff(n);if(isNaN(R.getTime()))return new Date(NaN);var U,z=Nf(R,Df(R)),N={},j=Um(L);try{for(j.s();!(U=j.n()).done;){var H=U.value;if(!H.validate(z,P))return new Date(NaN);var Q=H.set(z,N,P);Array.isArray(Q)?(z=Q[0],Em(N,Q[1])):z=Q}}catch(V){j.e(V)}finally{j.f()}return z}function bv(e,t){pf(2,arguments);var n=ff(e),r=ff(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function wv(e,t){pf(2,arguments);var n=Rf(e),r=Rf(t);return n.getTime()===r.getTime()}function xv(e){pf(1,arguments);var t=ff(e);return t.setMilliseconds(0),t}function Cv(e,t){pf(2,arguments);var n=ff(e),r=ff(t);return n.getFullYear()===r.getFullYear()}function Sv(e,t){pf(2,arguments);var n=ff(e),r=mf(t),i=n.getFullYear(),o=n.getDate(),a=new Date(0);a.setFullYear(i,r,15),a.setHours(0,0,0,0);var s=function(e){pf(1,arguments);var t=ff(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}(a);return n.setMonth(r,Math.min(o,s)),n}function Bv(e,t){if(pf(2,arguments),"object"!==Af(t)||null===t)throw new RangeError("values parameter must be an object");var n=ff(e);return isNaN(n.getTime())?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=Sv(n,t.month)),null!=t.date&&n.setDate(mf(t.date)),null!=t.hours&&n.setHours(mf(t.hours)),null!=t.minutes&&n.setMinutes(mf(t.minutes)),null!=t.seconds&&n.setSeconds(mf(t.seconds)),null!=t.milliseconds&&n.setMilliseconds(mf(t.milliseconds)),n)}function _v(e,t){pf(2,arguments);var n=ff(e),r=mf(t);return n.setHours(r),n}function Ev(e,t){pf(2,arguments);var n=ff(e),r=mf(t);return n.setMinutes(r),n}function Mv(e,t){pf(2,arguments);var n=ff(e),r=mf(t);return n.setSeconds(r),n}function Pv(e,t){pf(2,arguments);var n=ff(e),r=mf(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}function Tv(e){const{mergedLocaleRef:t,mergedDateLocaleRef:n}=rr(of,null)||{},r=eo((()=>{var n,r;return null!==(r=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n[e])&&void 0!==r?r:df[e]})),i=eo((()=>{var e;return null!==(e=null==n?void 0:n.value)&&void 0!==e?e:Ef}));return{dateLocaleRef:i,localeRef:r}}function Dv(e,t,n){if(!t)return;const r=tc(),i=rr(of,null),o=()=>{const o=n.value;t.mount({id:void 0===o?e:o+e,head:!0,anchorMetaName:af,props:{bPrefix:o?`.${o}-`:void 0},ssr:r}),(null==i?void 0:i.preflightStyleDisabled)||rf.mount({id:"n-global",head:!0,anchorMetaName:af,ssr:r})};r?o():gn(o)}function Fv(e,t,n,r){var i;n||$a("useThemeClass","cssVarsRef is not passed");const o=null===(i=rr(of,null))||void 0===i?void 0:i.mergedThemeHashRef,a=bt(""),s=tc();let l;const c=`__${e}`;return Dr((()=>{(()=>{let e=c;const i=t?t.value:void 0,u=null==o?void 0:o.value;u&&(e+="-"+u),i&&(e+="-"+i);const{themeOverrides:d,builtinThemeOverrides:h}=r;d&&(e+="-"+Bs(JSON.stringify(d))),h&&(e+="-"+Bs(JSON.stringify(h))),a.value=e,l=()=>{const t=n.value;let r="";for(const e in t)r+=`${e}: ${t[e]};`;Ls(`.${e}`,r).mount({id:e,ssr:s}),l=void 0}})()})),{themeClass:a,onRender:()=>{null==l||l()}}}function Iv(e,t,n){if(!t)return;const r=tc(),i=eo((()=>{const{value:n}=t;if(!n)return;const r=n[e];return r||void 0})),o=()=>{Dr((()=>{const{value:t}=n,o=`${t}${e}Rtl`;if(function(e,t){if(void 0===e)return!1;if(t){const{context:{ids:n}}=t;return n.has(e)}return null!==vs(e)}(o,r))return;const{value:a}=i;a&&a.style.mount({id:o,head:!0,anchorMetaName:af,props:{bPrefix:t?`.${t}-`:void 0},ssr:r})}))};return r?o():gn(o),i}const kv=Dn({name:"Add",render:()=>to("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},to("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}),Ov=Dn({name:"ArrowDown",render:()=>to("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},to("g",{"fill-rule":"nonzero"},to("path",{d:"M23.7916,15.2664 C24.0788,14.9679 24.0696,14.4931 23.7711,14.206 C23.4726,13.9188 22.9978,13.928 22.7106,14.2265 L14.7511,22.5007 L14.7511,3.74792 C14.7511,3.33371 14.4153,2.99792 14.0011,2.99792 C13.5869,2.99792 13.2511,3.33371 13.2511,3.74793 L13.2511,22.4998 L5.29259,14.2265 C5.00543,13.928 4.53064,13.9188 4.23213,14.206 C3.93361,14.4931 3.9244,14.9679 4.21157,15.2664 L13.2809,24.6944 C13.6743,25.1034 14.3289,25.1034 14.7223,24.6944 L23.7916,15.2664 Z"}))))}),Lv=Dn({name:"ArrowUp",render:()=>to("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},to("g",{fill:"none"},to("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))});function Rv(e,t){return Dn({name:Cp(e),setup(){var n;const r=null===(n=rr(of,null))||void 0===n?void 0:n.mergedIconsRef;return()=>{var n;const i=null===(n=null==r?void 0:r.value)||void 0===n?void 0:n[e];return i?i():t}}})}const Uv=Dn({name:"Backward",render:()=>to("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},to("path",{d:"M12.2674 15.793C11.9675 16.0787 11.4927 16.0672 11.2071 15.7673L6.20572 10.5168C5.9298 10.2271 5.9298 9.7719 6.20572 9.48223L11.2071 4.23177C11.4927 3.93184 11.9675 3.92031 12.2674 4.206C12.5673 4.49169 12.5789 4.96642 12.2932 5.26634L7.78458 9.99952L12.2932 14.7327C12.5789 15.0326 12.5673 15.5074 12.2674 15.793Z",fill:"currentColor"}))}),zv=Rv("date",to("svg",{width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},to("g",{"fill-rule":"nonzero"},to("path",{d:"M21.75,3 C23.5449254,3 25,4.45507456 25,6.25 L25,21.75 C25,23.5449254 23.5449254,25 21.75,25 L6.25,25 C4.45507456,25 3,23.5449254 3,21.75 L3,6.25 C3,4.45507456 4.45507456,3 6.25,3 L21.75,3 Z M23.5,9.503 L4.5,9.503 L4.5,21.75 C4.5,22.7164983 5.28350169,23.5 6.25,23.5 L21.75,23.5 C22.7164983,23.5 23.5,22.7164983 23.5,21.75 L23.5,9.503 Z M21.75,4.5 L6.25,4.5 C5.28350169,4.5 4.5,5.28350169 4.5,6.25 L4.5,8.003 L23.5,8.003 L23.5,6.25 C23.5,5.28350169 22.7164983,4.5 21.75,4.5 Z"}))))),Nv=Dn({name:"Checkmark",render:()=>to("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},to("g",{fill:"none"},to("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}),jv=Dn({name:"ChevronLeft",render:()=>to("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},to("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}),Hv=Dn({name:"ChevronRight",render:()=>to("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},to("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}),Qv=Rv("close",to("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},to("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},to("g",{fill:"currentColor","fill-rule":"nonzero"},to("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),Vv=Dn({name:"Eye",render:()=>to("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},to("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),to("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}),Wv=Dn({name:"EyeOff",render:()=>to("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},to("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),to("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),to("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),to("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),to("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}),Gv=Dn({name:"Empty",render:()=>to("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},to("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),to("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}),qv=Rv("error",to("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},to("g",{"fill-rule":"nonzero"},to("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),Kv=Dn({name:"FastBackward",render:()=>to("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},to("g",{fill:"currentColor","fill-rule":"nonzero"},to("path",{d:"M8.73171,16.7949 C9.03264,17.0795 9.50733,17.0663 9.79196,16.7654 C10.0766,16.4644 10.0634,15.9897 9.76243,15.7051 L4.52339,10.75 L17.2471,10.75 C17.6613,10.75 17.9971,10.4142 17.9971,10 C17.9971,9.58579 17.6613,9.25 17.2471,9.25 L4.52112,9.25 L9.76243,4.29275 C10.0634,4.00812 10.0766,3.53343 9.79196,3.2325 C9.50733,2.93156 9.03264,2.91834 8.73171,3.20297 L2.31449,9.27241 C2.14819,9.4297 2.04819,9.62981 2.01448,9.8386 C2.00308,9.89058 1.99707,9.94459 1.99707,10 C1.99707,10.0576 2.00356,10.1137 2.01585,10.1675 C2.05084,10.3733 2.15039,10.5702 2.31449,10.7254 L8.73171,16.7949 Z"}))))}),Yv=Dn({name:"FastForward",render:()=>to("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},to("g",{fill:"currentColor","fill-rule":"nonzero"},to("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))}),Xv=Dn({name:"Filter",render:()=>to("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},to("g",{"fill-rule":"nonzero"},to("path",{d:"M17,19 C17.5522847,19 18,19.4477153 18,20 C18,20.5522847 17.5522847,21 17,21 L11,21 C10.4477153,21 10,20.5522847 10,20 C10,19.4477153 10.4477153,19 11,19 L17,19 Z M21,13 C21.5522847,13 22,13.4477153 22,14 C22,14.5522847 21.5522847,15 21,15 L7,15 C6.44771525,15 6,14.5522847 6,14 C6,13.4477153 6.44771525,13 7,13 L21,13 Z M24,7 C24.5522847,7 25,7.44771525 25,8 C25,8.55228475 24.5522847,9 24,9 L4,9 C3.44771525,9 3,8.55228475 3,8 C3,7.44771525 3.44771525,7 4,7 L24,7 Z"}))))}),$v=Dn({name:"Forward",render:()=>to("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},to("path",{d:"M7.73271 4.20694C8.03263 3.92125 8.50737 3.93279 8.79306 4.23271L13.7944 9.48318C14.0703 9.77285 14.0703 10.2281 13.7944 10.5178L8.79306 15.7682C8.50737 16.0681 8.03263 16.0797 7.73271 15.794C7.43279 15.5083 7.42125 15.0336 7.70694 14.7336L12.2155 10.0005L7.70694 5.26729C7.42125 4.96737 7.43279 4.49264 7.73271 4.20694Z",fill:"currentColor"}))}),Jv=Rv("info",to("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},to("g",{"fill-rule":"nonzero"},to("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),Zv=Dn({name:"More",render:()=>to("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},to("g",{fill:"currentColor","fill-rule":"nonzero"},to("path",{d:"M4,7 C4.55228,7 5,7.44772 5,8 C5,8.55229 4.55228,9 4,9 C3.44772,9 3,8.55229 3,8 C3,7.44772 3.44772,7 4,7 Z M8,7 C8.55229,7 9,7.44772 9,8 C9,8.55229 8.55229,9 8,9 C7.44772,9 7,8.55229 7,8 C7,7.44772 7.44772,7 8,7 Z M12,7 C12.5523,7 13,7.44772 13,8 C13,8.55229 12.5523,9 12,9 C11.4477,9 11,8.55229 11,8 C11,7.44772 11.4477,7 12,7 Z"}))))}),ey=Dn({name:"Remove",render:()=>to("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},to("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:"\n        fill: none;\n        stroke: currentColor;\n        stroke-linecap: round;\n        stroke-linejoin: round;\n        stroke-width: 32px;\n      "}))}),ty=Dn({name:"Search",render:()=>to("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:"enable-background: new 0 0 512 512"},to("path",{d:"M443.5,420.2L336.7,312.4c20.9-26.2,33.5-59.4,33.5-95.5c0-84.5-68.5-153-153.1-153S64,132.5,64,217s68.5,153,153.1,153\n  c36.6,0,70.1-12.8,96.5-34.2l106.1,107.1c3.2,3.4,7.6,5.1,11.9,5.1c4.1,0,8.2-1.5,11.3-4.5C449.5,437.2,449.7,426.8,443.5,420.2z\n   M217.1,337.1c-32.1,0-62.3-12.5-85-35.2c-22.7-22.7-35.2-52.9-35.2-84.9c0-32.1,12.5-62.3,35.2-84.9c22.7-22.7,52.9-35.2,85-35.2\n  c32.1,0,62.3,12.5,85,35.2c22.7,22.7,35.2,52.9,35.2,84.9c0,32.1-12.5,62.3-35.2,84.9C279.4,324.6,249.2,337.1,217.1,337.1z"}))}),ny=Rv("success",to("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},to("g",{"fill-rule":"nonzero"},to("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),ry=Rv("time",to("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},to("path",{d:"M256,64C150,64,64,150,64,256s86,192,192,192,192-86,192-192S362,64,256,64Z",style:"\n        fill: none;\n        stroke: currentColor;\n        stroke-miterlimit: 10;\n        stroke-width: 32px;\n      "}),to("polyline",{points:"256 128 256 272 352 272",style:"\n        fill: none;\n        stroke: currentColor;\n        stroke-linecap: round;\n        stroke-linejoin: round;\n        stroke-width: 32px;\n      "}))),iy=Rv("warning",to("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},to("g",{"fill-rule":"nonzero"},to("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),oy=Dn({name:"ChevronDown",render:()=>to("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},to("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}),ay=Rv("clear",to("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},to("g",{fill:"currentColor","fill-rule":"nonzero"},to("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),sy=Dn({name:"ChevronDownFilled",render:()=>to("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},to("path",{d:"M3.20041 5.73966C3.48226 5.43613 3.95681 5.41856 4.26034 5.70041L8 9.22652L11.7397 5.70041C12.0432 5.41856 12.5177 5.43613 12.7996 5.73966C13.0815 6.0432 13.0639 6.51775 12.7603 6.7996L8.51034 10.7996C8.22258 11.0668 7.77743 11.0668 7.48967 10.7996L3.23966 6.7996C2.93613 6.51775 2.91856 6.0432 3.20041 5.73966Z",fill:"currentColor"}))}),ly=Rv("to",to("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},to("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},to("g",{fill:"currentColor","fill-rule":"nonzero"},to("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))),cy=Dn({name:"ArrowBack",render:()=>to("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},to("path",{d:"M0 0h24v24H0V0z",fill:"none"}),to("path",{d:"M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42-.39-.39-1.02-.39-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1z"}))}),uy=Dn({name:"BaseIconSwitchTransition",setup(e,{slots:t}){const n=Cl();return()=>to(co,{name:"icon-switch-transition",appear:n.value},t)}}),dy=Dn({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(e,{slots:t}){function n(t){e.width?t.style.maxWidth=`${t.offsetWidth}px`:t.style.maxHeight=`${t.offsetHeight}px`,t.offsetWidth}function r(t){e.width?t.style.maxWidth="0":t.style.maxHeight="0",t.offsetWidth;const{onLeave:n}=e;n&&n()}function i(t){e.width?t.style.maxWidth="":t.style.maxHeight="";const{onAfterLeave:n}=e;n&&n()}function o(t){if(t.style.transition="none",e.width){const e=t.offsetWidth;t.style.maxWidth="0",t.offsetWidth,t.style.transition="",t.style.maxWidth=`${e}px`}else if(e.reverse)t.style.maxHeight=`${t.offsetHeight}px`,t.offsetHeight,t.style.transition="",t.style.maxHeight="0";else{const e=t.offsetHeight;t.style.maxHeight="0",t.offsetWidth,t.style.transition="",t.style.maxHeight=`${e}px`}t.offsetWidth}function a(t){var n;e.width?t.style.maxWidth="":e.reverse||(t.style.maxHeight=""),null===(n=e.onAfterEnter)||void 0===n||n.call(e)}return()=>{const{group:s,width:l,appear:c,mode:u}=e,d=s?$o:co,h={name:l?"fade-in-width-expand-transition":"fade-in-height-expand-transition",appear:c,onEnter:o,onAfterEnter:a,onBeforeLeave:n,onLeave:r,onAfterLeave:i};return s||(h.mode=u),to(d,h,t)}}}),hy=Us("base-icon","\n height: 1em;\n width: 1em;\n line-height: 1em;\n text-align: center;\n display: inline-block;\n position: relative;\n fill: currentColor;\n transform: translateZ(0);\n",[Ls("svg","\n height: 1em;\n width: 1em;\n ")]),py=Dn({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(e){Dv("-base-icon",hy,Tt(e,"clsPrefix"))},render(){return to("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),Ay=Us("base-close","\n display: flex;\n align-items: center;\n justify-content: center;\n cursor: pointer;\n background-color: transparent;\n color: var(--n-close-icon-color);\n border-radius: var(--n-close-border-radius);\n height: var(--n-close-size);\n width: var(--n-close-size);\n font-size: var(--n-close-icon-size);\n outline: none;\n border: none;\n position: relative;\n padding: 0;\n",[Ns("absolute","\n height: var(--n-close-icon-size);\n width: var(--n-close-icon-size);\n "),Ls("&::before",'\n content: "";\n position: absolute;\n width: var(--n-close-size);\n height: var(--n-close-size);\n left: 50%;\n top: 50%;\n transform: translateY(-50%) translateX(-50%);\n transition: inherit;\n border-radius: inherit;\n '),js("disabled",[Ls("&:hover","\n color: var(--n-close-icon-color-hover);\n "),Ls("&:hover::before","\n background-color: var(--n-close-color-hover);\n "),Ls("&:focus::before","\n background-color: var(--n-close-color-hover);\n "),Ls("&:active","\n color: var(--n-close-icon-color-pressed);\n "),Ls("&:active::before","\n background-color: var(--n-close-color-pressed);\n ")]),Ns("disabled","\n cursor: not-allowed;\n color: var(--n-close-icon-color-disabled);\n background-color: transparent;\n "),Ns("round",[Ls("&::before","\n border-radius: 50%;\n ")])]),fy=Dn({name:"BaseClose",props:{isButtonTag:{type:Boolean,default:!0},clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},focusable:{type:Boolean,default:!0},round:Boolean,onClick:Function,absolute:Boolean},setup:e=>(Dv("-base-close",Ay,Tt(e,"clsPrefix")),()=>{const{clsPrefix:t,disabled:n,absolute:r,round:i,isButtonTag:o}=e;return to(o?"button":"div",{type:o?"button":void 0,tabindex:n||!e.focusable?-1:0,"aria-disabled":n,"aria-label":"close",role:o?void 0:"button",disabled:n,class:[`${t}-base-close`,r&&`${t}-base-close--absolute`,n&&`${t}-base-close--disabled`,i&&`${t}-base-close--round`],onMousedown:t=>{e.focusable||t.preventDefault()},onClick:e.onClick},to(py,{clsPrefix:t},{default:()=>to(Qv,null)}))})}),my=Dn({props:{onFocus:Function,onBlur:Function},setup:e=>()=>to("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}),{cubicBezierEaseInOut:gy}=ZA;function vy({originalTransform:e="",left:t=0,top:n=0,transition:r=`all .3s ${gy} !important`}={}){return[Ls("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:e+" scale(0.75)",left:t,top:n,opacity:0}),Ls("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`scale(1) ${e}`,left:t,top:n,opacity:1}),Ls("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:t,top:n,transition:r})]}const yy=Ls([Ls("@keyframes rotator","\n 0% {\n -webkit-transform: rotate(0deg);\n transform: rotate(0deg);\n }\n 100% {\n -webkit-transform: rotate(360deg);\n transform: rotate(360deg);\n }"),Us("base-loading","\n position: relative;\n line-height: 0;\n width: 1em;\n height: 1em;\n ",[zs("transition-wrapper","\n position: absolute;\n width: 100%;\n height: 100%;\n ",[vy()]),zs("placeholder","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n ",[vy({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),zs("container","\n animation: rotator 3s linear infinite both;\n ",[zs("icon","\n height: 1em;\n width: 1em;\n ")])])]),by="1.6s",wy={strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0}},xy=Dn({name:"BaseLoading",props:Object.assign({clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!0},scale:{type:Number,default:1},radius:{type:Number,default:100}},wy),setup(e){Dv("-base-loading",yy,Tt(e,"clsPrefix"))},render(){const{clsPrefix:e,radius:t,strokeWidth:n,stroke:r,scale:i}=this,o=t/i;return to("div",{class:`${e}-base-loading`,role:"img","aria-label":"loading"},to(uy,null,{default:()=>this.show?to("div",{key:"icon",class:`${e}-base-loading__transition-wrapper`},to("div",{class:`${e}-base-loading__container`},to("svg",{class:`${e}-base-loading__icon`,viewBox:`0 0 ${2*o} ${2*o}`,xmlns:"http://www.w3.org/2000/svg",style:{color:r}},to("g",null,to("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${o} ${o};270 ${o} ${o}`,begin:"0s",dur:by,fill:"freeze",repeatCount:"indefinite"}),to("circle",{class:`${e}-base-loading__icon`,fill:"none",stroke:"currentColor","stroke-width":n,"stroke-linecap":"round",cx:o,cy:o,r:t-n/2,"stroke-dasharray":5.67*t,"stroke-dashoffset":18.48*t},to("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${o} ${o};135 ${o} ${o};450 ${o} ${o}`,begin:"0s",dur:by,fill:"freeze",repeatCount:"indefinite"}),to("animate",{attributeName:"stroke-dashoffset",values:`${5.67*t};${1.42*t};${5.67*t}`,begin:"0s",dur:by,fill:"freeze",repeatCount:"indefinite"})))))):to("div",{key:"placeholder",class:`${e}-base-loading__placeholder`},this.$slots)}))}});function Cy(e){return Array.isArray(e)?e:[e]}const Sy={STOP:"STOP"};function By(e,t){const n=t(e);void 0!==e.children&&n!==Sy.STOP&&e.children.forEach((e=>By(e,t)))}function _y(e){return e.children}function Ey(e){return e.key}function My(){return!1}function Py(e){return!0===e.disabled}function Ty(e){var t;return null==e?[]:Array.isArray(e)?e:null!==(t=e.checkedKeys)&&void 0!==t?t:[]}function Dy(e){var t;return null==e||Array.isArray(e)?[]:null!==(t=e.indeterminateKeys)&&void 0!==t?t:[]}function Fy(e,t){const n=new Set(e);return t.forEach((e=>{n.has(e)||n.add(e)})),Array.from(n)}function Iy(e,t){const n=new Set(e);return t.forEach((e=>{n.has(e)&&n.delete(e)})),Array.from(n)}function ky(e){return"group"===(null==e?void 0:e.type)}class Oy extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function Ly(e,t,n,r){const i=Uy(t,n,r,!1),o=Uy(e,n,r,!0),a=function(e,t){const n=new Set;return e.forEach((e=>{const r=t.treeNodeMap.get(e);if(void 0!==r){let e=r.parent;for(;null!==e&&!e.disabled&&!n.has(e.key);)n.add(e.key),e=e.parent}})),n}(e,n),s=[];return i.forEach((e=>{(o.has(e)||a.has(e))&&s.push(e)})),s.forEach((e=>i.delete(e))),i}function Ry(e,t){const{checkedKeys:n,keysToCheck:r,keysToUncheck:i,indeterminateKeys:o,cascade:a,leafOnly:s,checkStrategy:l,allowNotLoaded:c}=e;if(!a)return void 0!==r?{checkedKeys:Fy(n,r),indeterminateKeys:Array.from(o)}:void 0!==i?{checkedKeys:Iy(n,i),indeterminateKeys:Array.from(o)}:{checkedKeys:Array.from(n),indeterminateKeys:Array.from(o)};const{levelTreeNodeMap:u}=t;let d;d=void 0!==i?Ly(i,n,t,c):void 0!==r?function(e,t,n,r){return Uy(t.concat(e),n,r,!1)}(r,n,t,c):Uy(n,t,c,!1);const h="parent"===l,p="child"===l||s,A=d,f=new Set;for(let m=Math.max.apply(null,Array.from(u.keys()));m>=0;m-=1){const e=0===m,t=u.get(m);for(const n of t){if(n.isLeaf)continue;const{key:t,shallowLoaded:r}=n;if(p&&r&&n.children.forEach((e=>{!e.disabled&&!e.isLeaf&&e.shallowLoaded&&A.has(e.key)&&A.delete(e.key)})),n.disabled||!r)continue;let i=!0,o=!1,a=!0;for(const e of n.children){const t=e.key;if(!e.disabled)if(a&&(a=!1),A.has(t))o=!0;else{if(f.has(t)){o=!0,i=!1;break}if(i=!1,o)break}}i&&!a?(h&&n.children.forEach((e=>{!e.disabled&&A.has(e.key)&&A.delete(e.key)})),A.add(t)):o&&f.add(t),e&&p&&A.has(t)&&A.delete(t)}}return{checkedKeys:Array.from(A),indeterminateKeys:Array.from(f)}}function Uy(e,t,n,r){const{treeNodeMap:i,getChildren:o}=t,a=new Set,s=new Set(e);return e.forEach((e=>{const t=i.get(e);void 0!==t&&By(t,(e=>{if(e.disabled)return Sy.STOP;const{key:t}=e;if(!a.has(t)&&(a.add(t),s.add(t),function(e,t){return!1===e.isLeaf&&!Array.isArray(t(e))}(e.rawNode,o))){if(r)return Sy.STOP;if(!n)throw new Oy}}))})),s}function zy(e,t){const n=e.siblings,r=n.length,{index:i}=e;return t?n[(i+1)%r]:i===n.length-1?null:n[i+1]}function Ny(e,t,{loop:n=!1,includeDisabled:r=!1}={}){const i="prev"===t?jy:zy,o={reverse:"prev"===t};let a=!1,s=null;return function t(l){if(null!==l){if(l===e)if(a){if(!e.disabled&&!e.isGroup)return void(s=e)}else a=!0;else if((!l.disabled||r)&&!l.ignored&&!l.isGroup)return void(s=l);if(l.isGroup){const e=Hy(l,o);null!==e?s=e:t(i(l,n))}else{const e=i(l,!1);if(null!==e)t(e);else{const e=function(e){return e.parent}(l);(null==e?void 0:e.isGroup)?t(i(e,n)):n&&t(i(l,!0))}}}}(e),s}function jy(e,t){const n=e.siblings,r=n.length,{index:i}=e;return t?n[(i-1+r)%r]:0===i?null:n[i-1]}function Hy(e,t={}){const{reverse:n=!1}=t,{children:r}=e;if(r){const{length:e}=r,i=n?-1:e,o=n?-1:1;for(let a=n?e-1:0;a!==i;a+=o){const e=r[a];if(!e.disabled&&!e.ignored){if(!e.isGroup)return e;{const n=Hy(e,t);if(null!==n)return n}}}}return null}const Qy={getChild(){return this.ignored?null:Hy(this)},getParent(){const{parent:e}=this;return(null==e?void 0:e.isGroup)?e.getParent():e},getNext(e={}){return Ny(this,"next",e)},getPrev(e={}){return Ny(this,"prev",e)}};function Vy(e,t,n,r,i,o=null,a=0){const s=[];return e.forEach(((l,c)=>{var u;const d=Object.create(r);if(d.rawNode=l,d.siblings=s,d.level=a,d.index=c,d.isFirstChild=0===c,d.isLastChild=c+1===e.length,d.parent=o,!d.ignored){const e=i(l);Array.isArray(e)&&(d.children=Vy(e,t,n,r,i,d,a+1))}s.push(d),t.set(d.key,d),n.has(a)||n.set(a,[]),null===(u=n.get(a))||void 0===u||u.push(d)})),s}function Wy(e,t={}){var n;const r=new Map,i=new Map,{getDisabled:o=Py,getIgnored:a=My,getIsGroup:s=ky,getKey:l=Ey}=t,c=null!==(n=t.getChildren)&&void 0!==n?n:_y,u=t.ignoreEmptyChildren?e=>{const t=c(e);return Array.isArray(t)?t.length?t:null:t}:c,d=Object.assign({get key(){return l(this.rawNode)},get disabled(){return o(this.rawNode)},get isGroup(){return s(this.rawNode)},get isLeaf(){return function(e,t){const{isLeaf:n}=e;return void 0!==n?n:!t(e)}(this.rawNode,u)},get shallowLoaded(){return function(e,t){const{isLeaf:n}=e;return!(!1===n&&!Array.isArray(t(e)))}(this.rawNode,u)},get ignored(){return a(this.rawNode)},contains(e){return function(e,t){const n=e.key;for(;t;){if(t.key===n)return!0;t=t.parent}return!1}(this,e)}},Qy),h=Vy(e,r,i,d,u);function p(e){if(null==e)return null;const t=r.get(e);return t&&!t.ignored?t:null}const A={treeNodes:h,treeNodeMap:r,levelTreeNodeMap:i,maxLevel:Math.max(...i.keys()),getChildren:u,getFlattenedNodes:e=>function(e,t){const n=t?new Set(t):void 0,r=[];return function e(t){t.forEach((t=>{r.push(t),t.isLeaf||!t.children||t.ignored||(t.isGroup||void 0===n||n.has(t.key))&&e(t.children)}))}(e),r}(h,e),getNode:function(e){if(null==e)return null;const t=r.get(e);return!t||t.isGroup||t.ignored?null:t},getPrev:function(e,t){const n=p(e);return n?n.getPrev(t):null},getNext:function(e,t){const n=p(e);return n?n.getNext(t):null},getParent:function(e){const t=p(e);return t?t.getParent():null},getChild:function(e){const t=p(e);return t?t.getChild():null},getFirstAvailableNode:()=>function(e){if(0===e.length)return null;const t=e[0];return t.isGroup||t.ignored||t.disabled?t.getNext():t}(h),getPath:(e,t={})=>function(e,{includeGroup:t=!1,includeSelf:n=!0},r){var i;const o=r.treeNodeMap;let a=null==e?null:null!==(i=o.get(e))&&void 0!==i?i:null;const s={keyPath:[],treeNodePath:[],treeNode:a};if(null==a?void 0:a.ignored)return s.treeNode=null,s;for(;a;)a.ignored||!t&&a.isGroup||s.treeNodePath.push(a),a=a.parent;return s.treeNodePath.reverse(),n||s.treeNodePath.pop(),s.keyPath=s.treeNodePath.map((e=>e.key)),s}(e,t,A),getCheckedKeys(e,t={}){const{cascade:n=!0,leafOnly:r=!1,checkStrategy:i="all",allowNotLoaded:o=!1}=t;return Ry({checkedKeys:Ty(e),indeterminateKeys:Dy(e),cascade:n,leafOnly:r,checkStrategy:i,allowNotLoaded:o},A)},check(e,t,n={}){const{cascade:r=!0,leafOnly:i=!1,checkStrategy:o="all",allowNotLoaded:a=!1}=n;return Ry({checkedKeys:Ty(t),indeterminateKeys:Dy(t),keysToCheck:null==e?[]:Cy(e),cascade:r,leafOnly:i,checkStrategy:o,allowNotLoaded:a},A)},uncheck(e,t,n={}){const{cascade:r=!0,leafOnly:i=!1,checkStrategy:o="all",allowNotLoaded:a=!1}=n;return Ry({checkedKeys:Ty(t),indeterminateKeys:Dy(t),keysToUncheck:null==e?[]:Cy(e),cascade:r,leafOnly:i,checkStrategy:o,allowNotLoaded:a},A)},getNonLeafKeys:(e={})=>function(e,t={}){const{preserveGroup:n=!1}=t,r=[],i=n?e=>{e.isLeaf||(r.push(e.key),o(e.children))}:e=>{e.isLeaf||(e.isGroup||r.push(e.key),o(e.children))};function o(e){e.forEach(i)}return o(e),r}(h,e)};return A}const Gy="#FFF",qy="#000",Ky="#000",Yy="#fff",Xy="#fff",$y="#fff",Jy="#fff",Zy="0.82",eb="0.72",tb="0.38",nb="0.24",rb="0.18",ib="0.6",ob="0.5",ab="0.2",sb=".08",lb="0",cb="0.25",ub="0.4",db="#36ad6a",hb="#18a058",pb="#0c7a43",Ab="#36ad6a",fb="#4098fc",mb="#2080f0",gb="#1060c9",vb="#4098fc",yb="#de576d",bb="#d03050",wb="#ab1f3f",xb="#de576d",Cb="#fcb040",Sb="#f0a020",Bb="#c97c10",_b="#fcb040",Eb="#36ad6a",Mb="#18a058",Pb="#0c7a43",Tb="#36ad6a",Db=ka(Gy),Fb=ka(qy),Ib="rgba("+Fb.slice(0,3).join(", ")+", ";function kb(e){return Ib+String(e)+")"}function Ob(e){const t=Array.from(Fb);return t[3]=Number(e),Ra(Db,t)}const Lb=Object.assign(Object.assign({name:"common"},ZA),{baseColor:Gy,primaryColor:hb,primaryColorHover:db,primaryColorPressed:pb,primaryColorSuppl:Ab,infoColor:mb,infoColorHover:fb,infoColorPressed:gb,infoColorSuppl:vb,successColor:Mb,successColorHover:Eb,successColorPressed:Pb,successColorSuppl:Tb,warningColor:Sb,warningColorHover:Cb,warningColorPressed:Bb,warningColorSuppl:_b,errorColor:bb,errorColorHover:yb,errorColorPressed:wb,errorColorSuppl:xb,textColorBase:Ky,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:Ob(nb),placeholderColor:Ob(nb),placeholderColorDisabled:Ob(rb),iconColor:Ob(nb),iconColorHover:za(Ob(nb),{lightness:.75}),iconColorPressed:za(Ob(nb),{lightness:.9}),iconColorDisabled:Ob(rb),opacity1:Zy,opacity2:eb,opacity3:tb,opacity4:nb,opacity5:rb,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeIconColor:Ob(Number(ib)),closeIconColorHover:Ob(Number(ib)),closeIconColorPressed:Ob(Number(ib)),closeColorHover:"rgba(0, 0, 0, .09)",closeColorPressed:"rgba(0, 0, 0, .13)",clearColor:Ob(nb),clearColorHover:za(Ob(nb),{lightness:.75}),clearColorPressed:za(Ob(nb),{lightness:.9}),scrollbarColor:kb(cb),scrollbarColorHover:kb(ub),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:Ob(sb),railColor:"rgb(219, 219, 223)",popoverColor:Yy,tableColor:Xy,cardColor:Xy,modalColor:$y,bodyColor:Jy,tagColor:"#eee",avatarColor:Ob(ab),invertedColor:"rgb(0, 20, 40)",inputColor:Ob(lb),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:ob,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),Rb={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"},Ub={name:"Empty",common:Lb,self:e=>{const{textColorDisabled:t,iconColor:n,textColor2:r,fontSizeSmall:i,fontSizeMedium:o,fontSizeLarge:a,fontSizeHuge:s}=e;return Object.assign(Object.assign({},Rb),{fontSizeSmall:i,fontSizeMedium:o,fontSizeLarge:a,fontSizeHuge:s,textColor:t,iconColor:n,extraTextColor:r})}},zb=Us("empty","\n display: flex;\n flex-direction: column;\n align-items: center;\n font-size: var(--n-font-size);\n",[zs("icon","\n width: var(--n-icon-size);\n height: var(--n-icon-size);\n font-size: var(--n-icon-size);\n line-height: var(--n-icon-size);\n color: var(--n-icon-color);\n transition:\n color .3s var(--n-bezier);\n ",[Ls("+",[zs("description","\n margin-top: 8px;\n ")])]),zs("description","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n "),zs("extra","\n text-align: center;\n transition: color .3s var(--n-bezier);\n margin-top: 12px;\n color: var(--n-extra-text-color);\n ")]),Nb=Dn({name:"Empty",props:Object.assign(Object.assign({},sf.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Empty","-empty",zb,Ub,e,t),{localeRef:i}=Tv("Empty"),o=rr(of,null),a=eo((()=>{var t,n,r;return null!==(t=e.description)&&void 0!==t?t:null===(r=null===(n=null==o?void 0:o.mergedComponentPropsRef.value)||void 0===n?void 0:n.Empty)||void 0===r?void 0:r.description})),s=eo((()=>{var e,t;return(null===(t=null===(e=null==o?void 0:o.mergedComponentPropsRef.value)||void 0===e?void 0:e.Empty)||void 0===t?void 0:t.renderIcon)||(()=>to(Gv,null))})),l=eo((()=>{const{size:t}=e,{common:{cubicBezierEaseInOut:n},self:{[Gs("iconSize",t)]:i,[Gs("fontSize",t)]:o,textColor:a,iconColor:s,extraTextColor:l}}=r.value;return{"--n-icon-size":i,"--n-font-size":o,"--n-bezier":n,"--n-text-color":a,"--n-icon-color":s,"--n-extra-text-color":l}})),c=n?Fv("empty",eo((()=>{let t="";const{size:n}=e;return t+=n[0],t})),l,e):void 0;return{mergedClsPrefix:t,mergedRenderIcon:s,localizedDescription:eo((()=>a.value||i.value.description)),cssVars:n?void 0:l,themeClass:null==c?void 0:c.themeClass,onRender:null==c?void 0:c.onRender}},render(){const{$slots:e,mergedClsPrefix:t,onRender:n}=this;return null==n||n(),to("div",{class:[`${t}-empty`,this.themeClass],style:this.cssVars},this.showIcon?to("div",{class:`${t}-empty__icon`},e.icon?e.icon():to(py,{clsPrefix:t},{default:this.mergedRenderIcon})):null,this.showDescription?to("div",{class:`${t}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?to("div",{class:`${t}-empty__extra`},e.extra()):null)}}),jb={railInsetHorizontal:"auto 2px 4px 2px",railInsetVertical:"2px 4px 2px auto",railColor:"transparent"},Hb={name:"Scrollbar",common:Lb,self:e=>{const{scrollbarColor:t,scrollbarColorHover:n,scrollbarHeight:r,scrollbarWidth:i,scrollbarBorderRadius:o}=e;return Object.assign(Object.assign({},jb),{height:r,width:i,borderRadius:o,color:t,colorHover:n})}},{cubicBezierEaseInOut:Qb}=ZA;function Vb({name:e="fade-in",enterDuration:t="0.2s",leaveDuration:n="0.2s",enterCubicBezier:r=Qb,leaveCubicBezier:i=Qb}={}){return[Ls(`&.${e}-transition-enter-active`,{transition:`all ${t} ${r}!important`}),Ls(`&.${e}-transition-leave-active`,{transition:`all ${n} ${i}!important`}),Ls(`&.${e}-transition-enter-from, &.${e}-transition-leave-to`,{opacity:0}),Ls(`&.${e}-transition-leave-from, &.${e}-transition-enter-to`,{opacity:1})]}const Wb=Us("scrollbar","\n overflow: hidden;\n position: relative;\n z-index: auto;\n height: 100%;\n width: 100%;\n",[Ls(">",[Us("scrollbar-container","\n width: 100%;\n overflow: scroll;\n height: 100%;\n min-height: inherit;\n max-height: inherit;\n scrollbar-width: none;\n ",[Ls("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb","\n width: 0;\n height: 0;\n display: none;\n "),Ls(">",[Us("scrollbar-content","\n box-sizing: border-box;\n min-width: 100%;\n ")])])]),Ls(">, +",[Us("scrollbar-rail","\n position: absolute;\n pointer-events: none;\n user-select: none;\n background: var(--n-scrollbar-rail-color);\n -webkit-user-select: none;\n ",[Ns("horizontal","\n inset: var(--n-scrollbar-rail-inset-horizontal);\n height: var(--n-scrollbar-height);\n ",[Ls(">",[zs("scrollbar","\n height: var(--n-scrollbar-height);\n border-radius: var(--n-scrollbar-border-radius);\n right: 0;\n ")])]),Ns("vertical","\n inset: var(--n-scrollbar-rail-inset-vertical);\n width: var(--n-scrollbar-width);\n ",[Ls(">",[zs("scrollbar","\n width: var(--n-scrollbar-width);\n border-radius: var(--n-scrollbar-border-radius);\n bottom: 0;\n ")])]),Ns("disabled",[Ls(">",[zs("scrollbar","pointer-events: none;")])]),Ls(">",[zs("scrollbar","\n z-index: 1;\n position: absolute;\n cursor: pointer;\n pointer-events: all;\n background-color: var(--n-scrollbar-color);\n transition: background-color .2s var(--n-scrollbar-bezier);\n ",[Vb(),Ls("&:hover","background-color: var(--n-scrollbar-color-hover);")])])])])]),Gb=Dn({name:"Scrollbar",props:Object.assign(Object.assign({},sf.props),{duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean}),inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:r}=cf(e),i=Iv("Scrollbar",r,t),o=bt(null),a=bt(null),s=bt(null),l=bt(null),c=bt(null),u=bt(null),d=bt(null),h=bt(null),p=bt(null),A=bt(null),f=bt(null),m=bt(0),g=bt(0),v=bt(!1),y=bt(!1);let b,w,x=!1,C=!1,S=0,B=0,_=0,E=0;const M=Bl,P=sf("Scrollbar","-scrollbar",Wb,Hb,e,t),T=eo((()=>{const{value:e}=h,{value:t}=u,{value:n}=A;return null===e||null===t||null===n?0:Math.min(e,n*e/t+1.5*ga(P.value.self.width))})),D=eo((()=>`${T.value}px`)),F=eo((()=>{const{value:e}=p,{value:t}=d,{value:n}=f;return null===e||null===t||null===n?0:n*e/t+1.5*ga(P.value.self.height)})),I=eo((()=>`${F.value}px`)),k=eo((()=>{const{value:e}=h,{value:t}=m,{value:n}=u,{value:r}=A;if(null===e||null===n||null===r)return 0;{const i=n-e;return i?t/i*(r-T.value):0}})),O=eo((()=>`${k.value}px`)),L=eo((()=>{const{value:e}=p,{value:t}=g,{value:n}=d,{value:r}=f;if(null===e||null===n||null===r)return 0;{const i=n-e;return i?t/i*(r-F.value):0}})),R=eo((()=>`${L.value}px`)),U=eo((()=>{const{value:e}=h,{value:t}=u;return null!==e&&null!==t&&t>e})),z=eo((()=>{const{value:e}=p,{value:t}=d;return null!==e&&null!==t&&t>e})),N=eo((()=>{const{trigger:t}=e;return"none"===t||v.value})),j=eo((()=>{const{trigger:t}=e;return"none"===t||y.value})),H=eo((()=>{const{container:t}=e;return t?t():a.value})),Q=eo((()=>{const{content:t}=e;return t?t():s.value})),V=ku((()=>{e.container||W({top:m.value,left:g.value})})),W=(t,n)=>{if(!e.scrollable)return;if("number"==typeof t)return void G(t,null!=n?n:0,0,!1,"auto");const{left:r,top:i,index:o,elSize:a,position:s,behavior:l,el:c,debounce:u=!0}=t;void 0===r&&void 0===i||G(null!=r?r:0,null!=i?i:0,0,!1,l),void 0!==c?G(0,c.offsetTop,c.offsetHeight,u,l):void 0!==o&&void 0!==a?G(0,o*a,a,u,l):"bottom"===s?G(0,Number.MAX_SAFE_INTEGER,0,!1,l):"top"===s&&G(0,0,0,!1,l)};function G(e,t,n,r,i){const{value:o}=H;if(o){if(r){const{scrollTop:r,offsetHeight:a}=o;if(t>r)return void(t+n<=r+a||o.scrollTo({left:e,top:t+n-a,behavior:i}))}o.scrollTo({left:e,top:t,behavior:i})}}function q(){!function(){void 0!==w&&window.clearTimeout(w);w=window.setTimeout((()=>{y.value=!1}),e.duration)}(),function(){void 0!==b&&window.clearTimeout(b);b=window.setTimeout((()=>{v.value=!1}),e.duration)}()}function K(){const{value:e}=H;e&&(m.value=e.scrollTop,g.value=e.scrollLeft*((null==i?void 0:i.value)?-1:1))}function Y(){const{value:e}=H;e&&(m.value=e.scrollTop,g.value=e.scrollLeft*((null==i?void 0:i.value)?-1:1),h.value=e.offsetHeight,p.value=e.offsetWidth,u.value=e.scrollHeight,d.value=e.scrollWidth);const{value:t}=c,{value:n}=l;t&&(f.value=t.offsetWidth),n&&(A.value=n.offsetHeight)}function X(){e.scrollable&&(e.useUnifiedContainer?Y():(!function(){const{value:e}=Q;e&&(u.value=e.offsetHeight,d.value=e.offsetWidth);const{value:t}=H;t&&(h.value=t.offsetHeight,p.value=t.offsetWidth);const{value:n}=c,{value:r}=l;n&&(f.value=n.offsetWidth),r&&(A.value=r.offsetHeight)}(),K()))}function $(e){var t;return!(null===(t=o.value)||void 0===t?void 0:t.contains(ma(e)))}function J(t){if(!C)return;void 0!==b&&window.clearTimeout(b),void 0!==w&&window.clearTimeout(w);const{value:n}=p,{value:r}=d,{value:o}=F;if(null===n||null===r)return;const a=(null==i?void 0:i.value)?window.innerWidth-t.clientX-_:t.clientX-_,s=r-n;let l=B+a*(r-n)/(n-o);l=Math.min(s,l),l=Math.max(l,0);const{value:c}=H;if(c){c.scrollLeft=l*((null==i?void 0:i.value)?-1:1);const{internalOnUpdateScrollLeft:t}=e;t&&t(l)}}function Z(e){e.preventDefault(),e.stopPropagation(),dl("mousemove",window,J,!0),dl("mouseup",window,Z,!0),C=!1,X(),$(e)&&q()}function ee(e){if(!x)return;void 0!==b&&window.clearTimeout(b),void 0!==w&&window.clearTimeout(w);const{value:t}=h,{value:n}=u,{value:r}=T;if(null===t||null===n)return;const i=e.clientY-E,o=n-t;let a=S+i*(n-t)/(t-r);a=Math.min(o,a),a=Math.max(a,0);const{value:s}=H;s&&(s.scrollTop=a)}function te(e){e.preventDefault(),e.stopPropagation(),dl("mousemove",window,ee,!0),dl("mouseup",window,te,!0),x=!1,X(),$(e)&&q()}Dr((()=>{const{value:e}=z,{value:n}=U,{value:r}=t,{value:i}=c,{value:o}=l;i&&(e?i.classList.remove(`${r}-scrollbar-rail--disabled`):i.classList.add(`${r}-scrollbar-rail--disabled`)),o&&(n?o.classList.remove(`${r}-scrollbar-rail--disabled`):o.classList.add(`${r}-scrollbar-rail--disabled`))})),vn((()=>{e.container||X()})),wn((()=>{void 0!==b&&window.clearTimeout(b),void 0!==w&&window.clearTimeout(w),dl("mousemove",window,ee,!0),dl("mouseup",window,te,!0)}));const ne=eo((()=>{const{common:{cubicBezierEaseInOut:e},self:{color:t,colorHover:n,height:r,width:o,borderRadius:a,railInsetHorizontal:s,railInsetVertical:l,railColor:c}}=P.value;return{"--n-scrollbar-bezier":e,"--n-scrollbar-color":t,"--n-scrollbar-color-hover":n,"--n-scrollbar-border-radius":a,"--n-scrollbar-width":o,"--n-scrollbar-height":r,"--n-scrollbar-rail-inset-horizontal":s,"--n-scrollbar-rail-inset-vertical":(null==i?void 0:i.value)?ps(l):l,"--n-scrollbar-rail-color":c}})),re=n?Fv("scrollbar",void 0,ne,e):void 0,ie={scrollTo:W,scrollBy:(t,n)=>{if(!e.scrollable)return;const{value:r}=H;r&&("object"==typeof t?r.scrollBy(t):r.scrollBy(t,n||0))},sync:X,syncUnifiedContainer:Y,handleMouseEnterWrapper:function(){!function(){void 0!==b&&window.clearTimeout(b);v.value=!0}(),function(){void 0!==w&&window.clearTimeout(w);y.value=!0}(),X()},handleMouseLeaveWrapper:function(){q()}};return Object.assign(Object.assign({},ie),{mergedClsPrefix:t,rtlEnabled:i,containerScrollTop:m,wrapperRef:o,containerRef:a,contentRef:s,yRailRef:l,xRailRef:c,needYBar:U,needXBar:z,yBarSizePx:D,xBarSizePx:I,yBarTopPx:O,xBarLeftPx:R,isShowXBar:N,isShowYBar:j,isIos:M,handleScroll:function(t){const{onScroll:n}=e;n&&n(t),K()},handleContentResize:()=>{V.isDeactivated||X()},handleContainerResize:t=>{if(V.isDeactivated)return;const{onResize:n}=e;n&&n(t),X()},handleYScrollMouseDown:function(e){e.preventDefault(),e.stopPropagation(),x=!0,ul("mousemove",window,ee,!0),ul("mouseup",window,te,!0),S=m.value,E=e.clientY},handleXScrollMouseDown:function(e){e.preventDefault(),e.stopPropagation(),C=!0,ul("mousemove",window,J,!0),ul("mouseup",window,Z,!0),B=g.value,_=(null==i?void 0:i.value)?window.innerWidth-e.clientX:e.clientX},cssVars:n?void 0:ne,themeClass:null==re?void 0:re.themeClass,onRender:null==re?void 0:re.onRender})},render(){var e;const{$slots:t,mergedClsPrefix:n,triggerDisplayManually:r,rtlEnabled:i,internalHoistYRail:o}=this;if(!this.scrollable)return null===(e=t.default)||void 0===e?void 0:e.call(t);const a="none"===this.trigger,s=(e,t)=>to("div",{ref:"yRailRef",class:[`${n}-scrollbar-rail`,`${n}-scrollbar-rail--vertical`,e],"data-scrollbar-rail":!0,style:[t||"",this.verticalRailStyle],"aria-hidden":!0},to(a?ls:co,a?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?to("div",{class:`${n}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),l=()=>{var e,l;return null===(e=this.onRender)||void 0===e||e.call(this),to("div",Li(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${n}-scrollbar`,this.themeClass,i&&`${n}-scrollbar--rtl`],style:this.cssVars,onMouseenter:r?void 0:this.handleMouseEnterWrapper,onMouseleave:r?void 0:this.handleMouseLeaveWrapper}),[this.container?null===(l=t.default)||void 0===l?void 0:l.call(t):to("div",{role:"none",ref:"containerRef",class:[`${n}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},to(au,{onResize:this.handleContentResize},{default:()=>to("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${n}-scrollbar-content`,this.contentClass]},t)})),o?null:s(void 0,void 0),this.xScrollable&&to("div",{ref:"xRailRef",class:[`${n}-scrollbar-rail`,`${n}-scrollbar-rail--horizontal`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},to(a?ls:co,a?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?to("div",{class:`${n}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:i?this.xBarLeftPx:void 0,left:i?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},c=this.container?l():to(au,{onResize:this.handleContainerResize},{default:l});return o?to(di,null,c,s(this.themeClass,this.cssVars)):c}}),qb=Gb,Kb={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"},Yb={name:"InternalSelectMenu",common:Lb,peers:{Scrollbar:Hb,Empty:Ub},self:e=>{const{borderRadius:t,popoverColor:n,textColor3:r,dividerColor:i,textColor2:o,primaryColorPressed:a,textColorDisabled:s,primaryColor:l,opacityDisabled:c,hoverColor:u,fontSizeSmall:d,fontSizeMedium:h,fontSizeLarge:p,fontSizeHuge:A,heightSmall:f,heightMedium:m,heightLarge:g,heightHuge:v}=e;return Object.assign(Object.assign({},Kb),{optionFontSizeSmall:d,optionFontSizeMedium:h,optionFontSizeLarge:p,optionFontSizeHuge:A,optionHeightSmall:f,optionHeightMedium:m,optionHeightLarge:g,optionHeightHuge:v,borderRadius:t,color:n,groupHeaderTextColor:r,actionDividerColor:i,optionTextColor:o,optionTextColorPressed:a,optionTextColorDisabled:s,optionTextColorActive:l,optionOpacityDisabled:c,optionCheckColor:l,optionColorPending:u,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:u,actionTextColor:o,loadingColor:l})}};const Xb=Dn({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:t,pendingTmNodeRef:n,multipleRef:r,valueSetRef:i,renderLabelRef:o,renderOptionRef:a,labelFieldRef:s,valueFieldRef:l,showCheckmarkRef:c,nodePropsRef:u,handleOptionClick:d,handleOptionMouseEnter:h}=rr(El),p=Zs((()=>{const{value:t}=n;return!!t&&e.tmNode.key===t.key}));return{multiple:r,isGrouped:Zs((()=>{const{tmNode:t}=e,{parent:n}=t;return n&&"group"===n.rawNode.type})),showCheckmark:c,nodeProps:u,isPending:p,isSelected:Zs((()=>{const{value:n}=t,{value:o}=r;if(null===n)return!1;const a=e.tmNode.rawNode[l.value];if(o){const{value:e}=i;return e.has(a)}return n===a})),labelField:s,renderLabel:o,renderOption:a,handleMouseMove:function(t){const{tmNode:n}=e,{value:r}=p;n.disabled||r||h(t,n)},handleMouseEnter:function(t){const{tmNode:n}=e;n.disabled||h(t,n)},handleClick:function(t){const{tmNode:n}=e;n.disabled||d(t,n)}}},render(){const{clsPrefix:e,tmNode:{rawNode:t},isSelected:n,isPending:r,isGrouped:i,showCheckmark:o,nodeProps:a,renderOption:s,renderLabel:l,handleClick:c,handleMouseEnter:u,handleMouseMove:d}=this,h=function(e,t){return to(co,{name:"fade-in-scale-up-transition"},{default:()=>e?to(py,{clsPrefix:t,class:`${t}-base-select-option__check`},{default:()=>to(Nv)}):null})}(n,e),p=l?[l(t,n),o&&h]:[Xa(t[this.labelField],t,n),o&&h],A=null==a?void 0:a(t),f=to("div",Object.assign({},A,{class:[`${e}-base-select-option`,t.class,null==A?void 0:A.class,{[`${e}-base-select-option--disabled`]:t.disabled,[`${e}-base-select-option--selected`]:n,[`${e}-base-select-option--grouped`]:i,[`${e}-base-select-option--pending`]:r,[`${e}-base-select-option--show-checkmark`]:o}],style:[(null==A?void 0:A.style)||"",t.style||""],onClick:ss([c,null==A?void 0:A.onClick]),onMouseenter:ss([u,null==A?void 0:A.onMouseenter]),onMousemove:ss([d,null==A?void 0:A.onMousemove])}),to("div",{class:`${e}-base-select-option__content`},p));return t.render?t.render({node:f,option:t,selected:n}):s?s({node:f,option:t,selected:n}):f}}),$b=Dn({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:t,labelFieldRef:n,nodePropsRef:r}=rr(El);return{labelField:n,nodeProps:r,renderLabel:e,renderOption:t}},render(){const{clsPrefix:e,renderLabel:t,renderOption:n,nodeProps:r,tmNode:{rawNode:i}}=this,o=null==r?void 0:r(i),a=t?t(i,!1):Xa(i[this.labelField],i,!1),s=to("div",Object.assign({},o,{class:[`${e}-base-select-group-header`,null==o?void 0:o.class]}),a);return i.render?i.render({node:s,option:i}):n?n({node:s,option:i,selected:!1}):s}}),{cubicBezierEaseIn:Jb,cubicBezierEaseOut:Zb}=ZA;function ew({transformOrigin:e="inherit",duration:t=".2s",enterScale:n=".9",originalTransform:r="",originalTransition:i=""}={}){return[Ls("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${t} ${Jb}, transform ${t} ${Jb} ${i&&","+i}`}),Ls("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${t} ${Zb}, transform ${t} ${Zb} ${i&&","+i}`}),Ls("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${r} scale(${n})`}),Ls("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${r} scale(1)`})]}const tw=Us("base-select-menu","\n line-height: 1.5;\n outline: none;\n z-index: 0;\n position: relative;\n border-radius: var(--n-border-radius);\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-color);\n",[Us("scrollbar","\n max-height: var(--n-height);\n "),Us("virtual-list","\n max-height: var(--n-height);\n "),Us("base-select-option","\n min-height: var(--n-option-height);\n font-size: var(--n-option-font-size);\n display: flex;\n align-items: center;\n ",[zs("content","\n z-index: 1;\n white-space: nowrap;\n text-overflow: ellipsis;\n overflow: hidden;\n ")]),Us("base-select-group-header","\n min-height: var(--n-option-height);\n font-size: .93em;\n display: flex;\n align-items: center;\n "),Us("base-select-menu-option-wrapper","\n position: relative;\n width: 100%;\n "),zs("loading, empty","\n display: flex;\n padding: 12px 32px;\n flex: 1;\n justify-content: center;\n "),zs("loading","\n color: var(--n-loading-color);\n font-size: var(--n-loading-size);\n "),zs("header","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),zs("action","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-top: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),Us("base-select-group-header","\n position: relative;\n cursor: default;\n padding: var(--n-option-padding);\n color: var(--n-group-header-text-color);\n "),Us("base-select-option","\n cursor: pointer;\n position: relative;\n padding: var(--n-option-padding);\n transition:\n color .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n box-sizing: border-box;\n color: var(--n-option-text-color);\n opacity: 1;\n ",[Ns("show-checkmark","\n padding-right: calc(var(--n-option-padding-right) + 20px);\n "),Ls("&::before",'\n content: "";\n position: absolute;\n left: 4px;\n right: 4px;\n top: 0;\n bottom: 0;\n border-radius: var(--n-border-radius);\n transition: background-color .3s var(--n-bezier);\n '),Ls("&:active","\n color: var(--n-option-text-color-pressed);\n "),Ns("grouped","\n padding-left: calc(var(--n-option-padding-left) * 1.5);\n "),Ns("pending",[Ls("&::before","\n background-color: var(--n-option-color-pending);\n ")]),Ns("selected","\n color: var(--n-option-text-color-active);\n ",[Ls("&::before","\n background-color: var(--n-option-color-active);\n "),Ns("pending",[Ls("&::before","\n background-color: var(--n-option-color-active-pending);\n ")])]),Ns("disabled","\n cursor: not-allowed;\n ",[js("selected","\n color: var(--n-option-text-color-disabled);\n "),Ns("selected","\n opacity: var(--n-option-opacity-disabled);\n ")]),zs("check","\n font-size: 16px;\n position: absolute;\n right: calc(var(--n-option-padding-right) - 4px);\n top: calc(50% - 7px);\n color: var(--n-option-check-color);\n transition: color .3s var(--n-bezier);\n ",[ew({enterScale:"0.5"})])])]),nw=Dn({name:"InternalSelectMenu",props:Object.assign(Object.assign({},sf.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=cf(e),r=Iv("InternalSelectMenu",n,t),i=sf("InternalSelectMenu","-internal-select-menu",tw,Yb,e,Tt(e,"clsPrefix")),o=bt(null),a=bt(null),s=bt(null),l=eo((()=>e.treeMate.getFlattenedNodes())),c=eo((()=>function(e){const t=new Map;return e.forEach(((e,n)=>{t.set(e.key,n)})),e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:null}}(l.value))),u=bt(null);function d(){const{value:t}=u;t&&!e.treeMate.getNode(t.key)&&(u.value=null)}let h;Ir((()=>e.show),(t=>{t?h=Ir((()=>e.treeMate),(()=>{e.resetMenuOnOptionsChange?(e.autoPending?function(){const{treeMate:t}=e;let n=null;const{value:r}=e;null===r?n=t.getFirstAvailableNode():(n=e.multiple?t.getNode((r||[])[(r||[]).length-1]):t.getNode(r),n&&!n.disabled||(n=t.getFirstAvailableNode())),v(n||null)}():d(),Vt(y)):d()}),{immediate:!0}):null==h||h()}),{immediate:!0}),wn((()=>{null==h||h()}));const p=eo((()=>ga(i.value.self[Gs("optionHeight",e.size)]))),A=eo((()=>ya(i.value.self[Gs("padding",e.size)]))),f=eo((()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set)),m=eo((()=>{const e=l.value;return e&&0===e.length}));function g(t){const{onScroll:n}=e;n&&n(t)}function v(e,t=!1){u.value=e,t&&y()}function y(){var t,n;const r=u.value;if(!r)return;const i=c.value(r.key);null!==i&&(e.virtualScroll?null===(t=a.value)||void 0===t||t.scrollTo({index:i}):null===(n=s.value)||void 0===n||n.scrollTo({index:i,elSize:p.value}))}nr(El,{handleOptionMouseEnter:function(e,t){t.disabled||v(t,!1)},handleOptionClick:function(t,n){n.disabled||function(t){const{onToggle:n}=e;n&&n(t)}(n)},valueSetRef:f,pendingTmNodeRef:u,nodePropsRef:Tt(e,"nodeProps"),showCheckmarkRef:Tt(e,"showCheckmark"),multipleRef:Tt(e,"multiple"),valueRef:Tt(e,"value"),renderLabelRef:Tt(e,"renderLabel"),renderOptionRef:Tt(e,"renderOption"),labelFieldRef:Tt(e,"labelField"),valueFieldRef:Tt(e,"valueField")}),nr(Ml,o),vn((()=>{const{value:e}=s;e&&e.sync()}));const b=eo((()=>{const{size:t}=e,{common:{cubicBezierEaseInOut:n},self:{height:r,borderRadius:o,color:a,groupHeaderTextColor:s,actionDividerColor:l,optionTextColorPressed:c,optionTextColor:u,optionTextColorDisabled:d,optionTextColorActive:h,optionOpacityDisabled:p,optionCheckColor:A,actionTextColor:f,optionColorPending:m,optionColorActive:g,loadingColor:v,loadingSize:y,optionColorActivePending:b,[Gs("optionFontSize",t)]:w,[Gs("optionHeight",t)]:x,[Gs("optionPadding",t)]:C}}=i.value;return{"--n-height":r,"--n-action-divider-color":l,"--n-action-text-color":f,"--n-bezier":n,"--n-border-radius":o,"--n-color":a,"--n-option-font-size":w,"--n-group-header-text-color":s,"--n-option-check-color":A,"--n-option-color-pending":m,"--n-option-color-active":g,"--n-option-color-active-pending":b,"--n-option-height":x,"--n-option-opacity-disabled":p,"--n-option-text-color":u,"--n-option-text-color-active":h,"--n-option-text-color-disabled":d,"--n-option-text-color-pressed":c,"--n-option-padding":C,"--n-option-padding-left":ya(C,"left"),"--n-option-padding-right":ya(C,"right"),"--n-loading-color":v,"--n-loading-size":y}})),{inlineThemeDisabled:w}=e,x=w?Fv("internal-select-menu",eo((()=>e.size[0])),b,e):void 0,C={selfRef:o,next:function(){const{value:e}=u;e&&v(e.getNext({loop:!0}),!0)},prev:function(){const{value:e}=u;e&&v(e.getPrev({loop:!0}),!0)},getPendingTmNode:function(){const{value:e}=u;return e||null}};return Cu(o,e.onResize),Object.assign({mergedTheme:i,mergedClsPrefix:t,rtlEnabled:r,virtualListRef:a,scrollbarRef:s,itemSize:p,padding:A,flattenedNodes:l,empty:m,virtualListContainer(){const{value:e}=a;return null==e?void 0:e.listElRef},virtualListContent(){const{value:e}=a;return null==e?void 0:e.itemsElRef},doScroll:g,handleFocusin:function(t){var n,r;(null===(n=o.value)||void 0===n?void 0:n.contains(t.target))&&(null===(r=e.onFocus)||void 0===r||r.call(e,t))},handleFocusout:function(t){var n,r;(null===(n=o.value)||void 0===n?void 0:n.contains(t.relatedTarget))||null===(r=e.onBlur)||void 0===r||r.call(e,t)},handleKeyUp:function(t){var n;fa(t,"action")||null===(n=e.onKeyup)||void 0===n||n.call(e,t)},handleKeyDown:function(t){var n;fa(t,"action")||null===(n=e.onKeydown)||void 0===n||n.call(e,t)},handleMouseDown:function(t){var n;null===(n=e.onMousedown)||void 0===n||n.call(e,t),e.focusable||t.preventDefault()},handleVirtualListResize:function(){var e;null===(e=s.value)||void 0===e||e.sync()},handleVirtualListScroll:function(e){var t;null===(t=s.value)||void 0===t||t.sync(),g(e)},cssVars:w?void 0:b,themeClass:null==x?void 0:x.themeClass,onRender:null==x?void 0:x.onRender},C)},render(){const{$slots:e,virtualScroll:t,clsPrefix:n,mergedTheme:r,themeClass:i,onRender:o}=this;return null==o||o(),to("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${n}-base-select-menu`,this.rtlEnabled&&`${n}-base-select-menu--rtl`,i,this.multiple&&`${n}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},os(e.header,(e=>e&&to("div",{class:`${n}-base-select-menu__header`,"data-header":!0,key:"header"},e))),this.loading?to("div",{class:`${n}-base-select-menu__loading`},to(xy,{clsPrefix:n,strokeWidth:20})):this.empty?to("div",{class:`${n}-base-select-menu__empty`,"data-empty":!0},rs(e.empty,(()=>[to(Nb,{theme:r.peers.Empty,themeOverrides:r.peerOverrides.Empty})]))):to(Gb,{ref:"scrollbarRef",theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar,scrollable:this.scrollable,container:t?this.virtualListContainer:void 0,content:t?this.virtualListContent:void 0,onScroll:t?void 0:this.doScroll},{default:()=>t?to(du,{ref:"virtualListRef",class:`${n}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:e})=>e.isGroup?to($b,{key:e.key,clsPrefix:n,tmNode:e}):e.ignored?null:to(Xb,{clsPrefix:n,key:e.key,tmNode:e})}):to("div",{class:`${n}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map((e=>e.isGroup?to($b,{key:e.key,clsPrefix:n,tmNode:e}):to(Xb,{clsPrefix:n,key:e.key,tmNode:e}))))}),os(e.action,(e=>e&&[to("div",{class:`${n}-base-select-menu__action`,"data-action":!0,key:"action"},e),to(my,{onFocus:this.onTabOut,key:"focus-detector"})])))}}),rw=Us("base-wave","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n"),iw=Dn({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(e){Dv("-base-wave",rw,Tt(e,"clsPrefix"));const t=bt(null),n=bt(!1);let r=null;return wn((()=>{null!==r&&window.clearTimeout(r)})),{active:n,selfRef:t,play(){null!==r&&(window.clearTimeout(r),n.value=!1,r=null),Vt((()=>{var e;null===(e=t.value)||void 0===e||e.offsetHeight,n.value=!0,r=window.setTimeout((()=>{n.value=!1,r=null}),1e3)}))}}},render(){const{clsPrefix:e}=this;return to("div",{ref:"selfRef","aria-hidden":!0,class:[`${e}-base-wave`,this.active&&`${e}-base-wave--active`]})}}),ow={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"},aw={name:"Popover",common:Lb,self:e=>{const{boxShadow2:t,popoverColor:n,textColor2:r,borderRadius:i,fontSize:o,dividerColor:a}=e;return Object.assign(Object.assign({},ow),{fontSize:o,borderRadius:i,color:n,dividerColor:a,textColor:r,boxShadow:t})}},sw={top:"bottom",bottom:"top",left:"right",right:"left"},lw="var(--n-arrow-height) * 1.414",cw=Ls([Us("popover","\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n position: relative;\n font-size: var(--n-font-size);\n color: var(--n-text-color);\n box-shadow: var(--n-box-shadow);\n word-break: break-word;\n ",[Ls(">",[Us("scrollbar","\n height: inherit;\n max-height: inherit;\n ")]),js("raw","\n background-color: var(--n-color);\n border-radius: var(--n-border-radius);\n ",[js("scrollable",[js("show-header-or-footer","padding: var(--n-padding);")])]),zs("header","\n padding: var(--n-padding);\n border-bottom: 1px solid var(--n-divider-color);\n transition: border-color .3s var(--n-bezier);\n "),zs("footer","\n padding: var(--n-padding);\n border-top: 1px solid var(--n-divider-color);\n transition: border-color .3s var(--n-bezier);\n "),Ns("scrollable, show-header-or-footer",[zs("content","\n padding: var(--n-padding);\n ")])]),Us("popover-shared","\n transform-origin: inherit;\n ",[Us("popover-arrow-wrapper","\n position: absolute;\n overflow: hidden;\n pointer-events: none;\n ",[Us("popover-arrow",`\n transition: background-color .3s var(--n-bezier);\n position: absolute;\n display: block;\n width: calc(${lw});\n height: calc(${lw});\n box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);\n transform: rotate(45deg);\n background-color: var(--n-color);\n pointer-events: all;\n `)]),Ls("&.popover-transition-enter-from, &.popover-transition-leave-to","\n opacity: 0;\n transform: scale(.85);\n "),Ls("&.popover-transition-enter-to, &.popover-transition-leave-from","\n transform: scale(1);\n opacity: 1;\n "),Ls("&.popover-transition-enter-active","\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n opacity .15s var(--n-bezier-ease-out),\n transform .15s var(--n-bezier-ease-out);\n "),Ls("&.popover-transition-leave-active","\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n opacity .15s var(--n-bezier-ease-in),\n transform .15s var(--n-bezier-ease-in);\n ")]),pw("top-start",`\n top: calc(${lw} / -2);\n left: calc(${hw("top-start")} - var(--v-offset-left));\n `),pw("top",`\n top: calc(${lw} / -2);\n transform: translateX(calc(${lw} / -2)) rotate(45deg);\n left: 50%;\n `),pw("top-end",`\n top: calc(${lw} / -2);\n right: calc(${hw("top-end")} + var(--v-offset-left));\n `),pw("bottom-start",`\n bottom: calc(${lw} / -2);\n left: calc(${hw("bottom-start")} - var(--v-offset-left));\n `),pw("bottom",`\n bottom: calc(${lw} / -2);\n transform: translateX(calc(${lw} / -2)) rotate(45deg);\n left: 50%;\n `),pw("bottom-end",`\n bottom: calc(${lw} / -2);\n right: calc(${hw("bottom-end")} + var(--v-offset-left));\n `),pw("left-start",`\n left: calc(${lw} / -2);\n top: calc(${hw("left-start")} - var(--v-offset-top));\n `),pw("left",`\n left: calc(${lw} / -2);\n transform: translateY(calc(${lw} / -2)) rotate(45deg);\n top: 50%;\n `),pw("left-end",`\n left: calc(${lw} / -2);\n bottom: calc(${hw("left-end")} + var(--v-offset-top));\n `),pw("right-start",`\n right: calc(${lw} / -2);\n top: calc(${hw("right-start")} - var(--v-offset-top));\n `),pw("right",`\n right: calc(${lw} / -2);\n transform: translateY(calc(${lw} / -2)) rotate(45deg);\n top: 50%;\n `),pw("right-end",`\n right: calc(${lw} / -2);\n bottom: calc(${hw("right-end")} + var(--v-offset-top));\n `),...(uw={top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},dw=(e,t)=>{const n=["right","left"].includes(t),r=n?"width":"height";return e.map((e=>{const i="end"===e.split("-")[1],o=`calc((var(--v-target-${r}, 0px) - ${lw}) / 2)`,a=hw(e);return Ls(`[v-placement="${e}"] >`,[Us("popover-shared",[Ns("center-arrow",[Us("popover-arrow",`${t}: calc(max(${o}, ${a}) ${i?"+":"-"} var(--v-offset-${n?"left":"top"}));`)])])])}))},(ed(uw)?Zu:YA)(uw,OA(dw)))]);var uw,dw;function hw(e){return["top","bottom"].includes(e.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function pw(e,t){const n=e.split("-")[0],r=["top","bottom"].includes(n)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return Ls(`[v-placement="${e}"] >`,[Us("popover-shared",`\n margin-${sw[n]}: var(--n-space);\n `,[Ns("show-arrow",`\n margin-${sw[n]}: var(--n-space-arrow);\n `),Ns("overlap","\n margin: 0;\n "),Ws("popover-arrow-wrapper",`\n right: 0;\n left: 0;\n top: 0;\n bottom: 0;\n ${n}: 100%;\n ${sw[n]}: auto;\n ${r}\n `,[Us("popover-arrow",t)])])])}const Aw=Object.assign(Object.assign({},sf.props),{to:kl.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number}),fw=({arrowClass:e,arrowStyle:t,arrowWrapperClass:n,arrowWrapperStyle:r,clsPrefix:i})=>to("div",{key:"__popover-arrow__",style:r,class:[`${i}-popover-arrow-wrapper`,n]},to("div",{class:[`${i}-popover-arrow`,e],style:t})),mw=Dn({name:"PopoverBody",inheritAttrs:!1,props:Aw,setup(e,{slots:t,attrs:n}){const{namespaceRef:r,mergedClsPrefixRef:i,inlineThemeDisabled:o}=cf(e),a=sf("Popover","-popover",cw,aw,e,i),s=bt(null),l=rr("NPopover"),c=bt(null),u=bt(e.show),d=bt(!1);Dr((()=>{const{show:t}=e;!t||(void 0===qs&&(qs=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),qs)||e.internalDeactivateImmediately||(d.value=!0)}));const h=eo((()=>{const{trigger:t,onClickoutside:n}=e,r=[],{positionManuallyRef:{value:i}}=l;return i||("click"!==t||n||r.push([Yl,y,void 0,{capture:!0}]),"hover"===t&&r.push([ql,v])),n&&r.push([Yl,y,void 0,{capture:!0}]),("show"===e.displayDirective||e.animated&&d.value)&&r.push([Mo,e.show]),r})),p=eo((()=>{const t="trigger"===e.width?void 0:ds(e.width),n=[];t&&n.push({width:t});const{maxWidth:r,minWidth:i}=e;return r&&n.push({maxWidth:ds(r)}),i&&n.push({maxWidth:ds(i)}),o||n.push(A.value),n})),A=eo((()=>{const{common:{cubicBezierEaseInOut:e,cubicBezierEaseIn:t,cubicBezierEaseOut:n},self:{space:r,spaceArrow:i,padding:o,fontSize:s,textColor:l,dividerColor:c,color:u,boxShadow:d,borderRadius:h,arrowHeight:p,arrowOffset:A,arrowOffsetVertical:f}}=a.value;return{"--n-box-shadow":d,"--n-bezier":e,"--n-bezier-ease-in":t,"--n-bezier-ease-out":n,"--n-font-size":s,"--n-text-color":l,"--n-color":u,"--n-divider-color":c,"--n-border-radius":h,"--n-arrow-height":p,"--n-arrow-offset":A,"--n-arrow-offset-vertical":f,"--n-padding":o,"--n-space":r,"--n-space-arrow":i}})),f=o?Fv("popover",void 0,A,e):void 0;function m(t){"hover"===e.trigger&&e.keepAliveOnHover&&e.show&&l.handleMouseEnter(t)}function g(t){"hover"===e.trigger&&e.keepAliveOnHover&&l.handleMouseLeave(t)}function v(t){"hover"!==e.trigger||b().contains(ma(t))||l.handleMouseMoveOutside(t)}function y(t){("click"===e.trigger&&!b().contains(ma(t))||e.onClickoutside)&&l.handleClickOutside(t)}function b(){return l.getTriggerElement()}return l.setBodyInstance({syncPosition:function(){var e;null===(e=s.value)||void 0===e||e.syncPosition()}}),wn((()=>{l.setBodyInstance(null)})),Ir(Tt(e,"show"),(t=>{e.animated||(u.value=!!t)})),nr(Fl,c),nr(Dl,null),nr(Pl,null),{displayed:d,namespace:r,isMounted:l.isMountedRef,zIndex:l.zIndexRef,followerRef:s,adjustedTo:kl(e),followerEnabled:u,renderContentNode:function(){if(null==f||f.onRender(),!("show"===e.displayDirective||e.show||e.animated&&d.value))return null;let r;const o=l.internalRenderBodyRef.value,{value:a}=i;if(o)r=o([`${a}-popover-shared`,null==f?void 0:f.themeClass.value,e.overlap&&`${a}-popover-shared--overlap`,e.showArrow&&`${a}-popover-shared--show-arrow`,e.arrowPointToCenter&&`${a}-popover-shared--center-arrow`],c,p.value,m,g);else{const{value:i}=l.extraClassRef,{internalTrapFocus:o}=e,s=!as(t.header)||!as(t.footer),u=()=>{var n,r;const i=s?to(di,null,os(t.header,(t=>t?to("div",{class:[`${a}-popover__header`,e.headerClass],style:e.headerStyle},t):null)),os(t.default,(n=>n?to("div",{class:[`${a}-popover__content`,e.contentClass],style:e.contentStyle},t):null)),os(t.footer,(t=>t?to("div",{class:[`${a}-popover__footer`,e.footerClass],style:e.footerStyle},t):null))):e.scrollable?null===(n=t.default)||void 0===n?void 0:n.call(t):to("div",{class:[`${a}-popover__content`,e.contentClass],style:e.contentStyle},t);return[e.scrollable?to(qb,{contentClass:s?void 0:`${a}-popover__content ${null!==(r=e.contentClass)&&void 0!==r?r:""}`,contentStyle:s?void 0:e.contentStyle},{default:()=>i}):i,e.showArrow?fw({arrowClass:e.arrowClass,arrowStyle:e.arrowStyle,arrowWrapperClass:e.arrowWrapperClass,arrowWrapperStyle:e.arrowWrapperStyle,clsPrefix:a}):null]};r=to("div",Li({class:[`${a}-popover`,`${a}-popover-shared`,null==f?void 0:f.themeClass.value,i.map((e=>`${a}-${e}`)),{[`${a}-popover--scrollable`]:e.scrollable,[`${a}-popover--show-header-or-footer`]:s,[`${a}-popover--raw`]:e.raw,[`${a}-popover-shared--overlap`]:e.overlap,[`${a}-popover-shared--show-arrow`]:e.showArrow,[`${a}-popover-shared--center-arrow`]:e.arrowPointToCenter}],ref:c,style:p.value,onKeydown:l.handleKeydown,onMouseenter:m,onMouseleave:g},n),o?to(xu,{active:e.show,autoFocus:!0},{default:u}):u())}return En(r,h.value)}}},render(){return to(gc,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:"trigger"===this.width?"target":void 0,teleportDisabled:this.adjustedTo===kl.tdkey},{default:()=>this.animated?to(co,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var e;null===(e=this.internalOnAfterLeave)||void 0===e||e.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),gw=Object.keys(Aw),vw={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};const yw={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:kl.propTo,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},bw=Dn({name:"Popover",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},sf.props),yw),{internalOnAfterLeave:Function,internalRenderBody:Function}),__popover__:!0,setup(e){const t=Cl(),n=bt(null),r=eo((()=>e.show)),i=bt(e.defaultShow),o=xl(r,i),a=Zs((()=>!e.disabled&&o.value)),s=()=>{if(e.disabled)return!0;const{getDisabled:t}=e;return!!(null==t?void 0:t())},l=()=>!s()&&o.value,c=Sl(e,["arrow","showArrow"]),u=eo((()=>!e.overlap&&c.value));let d=null;const h=bt(null),p=bt(null),A=Zs((()=>void 0!==e.x&&void 0!==e.y));function f(t){const{"onUpdate:show":n,onUpdateShow:r,onShow:o,onHide:a}=e;i.value=t,n&&Ka(n,t),r&&Ka(r,t),t&&o&&Ka(o,!0),t&&a&&Ka(a,!1)}function m(){const{value:e}=h;e&&(window.clearTimeout(e),h.value=null)}function g(){const{value:e}=p;e&&(window.clearTimeout(e),p.value=null)}function v(){const t=s();if("hover"===e.trigger&&!t){if(g(),null!==h.value)return;if(l())return;const t=()=>{f(!0),h.value=null},{delay:n}=e;0===n?t():h.value=window.setTimeout(t,n)}}function y(){const t=s();if("hover"===e.trigger&&!t){if(m(),null!==p.value)return;if(!l())return;const t=()=>{f(!1),p.value=null},{duration:n}=e;0===n?t():p.value=window.setTimeout(t,n)}}nr("NPopover",{getTriggerElement:function(){var e;return null===(e=n.value)||void 0===e?void 0:e.targetRef},handleKeydown:function(t){e.internalTrapFocus&&"Escape"===t.key&&(m(),g(),f(!1))},handleMouseEnter:v,handleMouseLeave:y,handleClickOutside:function(t){var n;l()&&("click"===e.trigger&&(m(),g(),f(!1)),null===(n=e.onClickoutside)||void 0===n||n.call(e,t))},handleMouseMoveOutside:function(){y()},setBodyInstance:function(e){d=e},positionManuallyRef:A,isMountedRef:t,zIndexRef:Tt(e,"zIndex"),extraClassRef:Tt(e,"internalExtraClass"),internalRenderBodyRef:Tt(e,"internalRenderBody")}),Dr((()=>{o.value&&s()&&f(!1)}));return{binderInstRef:n,positionManually:A,mergedShowConsideringDisabledProp:a,uncontrolledShow:i,mergedShowArrow:u,getMergedShow:l,setShow:function(e){i.value=e},handleClick:function(){if("click"===e.trigger&&!s()){m(),g();f(!l())}},handleMouseEnter:v,handleMouseLeave:y,handleFocus:function(){const t=s();if("focus"===e.trigger&&!t){if(l())return;f(!0)}},handleBlur:function(){const t=s();if("focus"===e.trigger&&!t){if(!l())return;f(!1)}},syncPosition:function(){d&&d.syncPosition()}}},render(){var e;const{positionManually:t,$slots:n}=this;let r,i=!1;if(!t&&(r=n.activator?es(n,"activator"):es(n,"trigger"),r)){r=Pi(r),r=r.type===hi?to("span",[r]):r;const n={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(null===(e=r.type)||void 0===e?void 0:e.__popover__)i=!0,r.props||(r.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),r.props.internalSyncTargetWithParent=!0,r.props.internalInheritedEventHandlers?r.props.internalInheritedEventHandlers=[n,...r.props.internalInheritedEventHandlers]:r.props.internalInheritedEventHandlers=[n];else{const{internalInheritedEventHandlers:e}=this,i=[n,...e],l={onBlur:e=>{i.forEach((t=>{t.onBlur(e)}))},onFocus:e=>{i.forEach((t=>{t.onFocus(e)}))},onClick:e=>{i.forEach((t=>{t.onClick(e)}))},onMouseenter:e=>{i.forEach((t=>{t.onMouseenter(e)}))},onMouseleave:e=>{i.forEach((t=>{t.onMouseleave(e)}))}};o=r,a=e?"nested":t?"manual":this.trigger,s=l,vw[a].forEach((e=>{o.props?o.props=Object.assign({},o.props):o.props={};const t=o.props[e],n=s[e];o.props[e]=t?(...e)=>{t(...e),n(...e)}:n}))}}var o,a,s;return to(Vl,{ref:"binderInstRef",syncTarget:!i,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const e=this.getMergedShow();return[this.internalTrapFocus&&e?En(to("div",{style:{position:"fixed",inset:0}}),[[Jl,{enabled:e,zIndex:this.zIndex}]]):null,t?null:to(Wl,null,{default:()=>r}),to(mw,Wa(this.$props,gw,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:e})),{default:()=>{var e,t;return null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)},header:()=>{var e,t;return null===(t=(e=this.$slots).header)||void 0===t?void 0:t.call(e)},footer:()=>{var e,t;return null===(t=(e=this.$slots).footer)||void 0===t?void 0:t.call(e)}})]}})}}),ww={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"},xw={name:"Tag",common:Lb,self:e=>{const{textColor2:t,primaryColorHover:n,primaryColorPressed:r,primaryColor:i,infoColor:o,successColor:a,warningColor:s,errorColor:l,baseColor:c,borderColor:u,opacityDisabled:d,tagColor:h,closeIconColor:p,closeIconColorHover:A,closeIconColorPressed:f,borderRadiusSmall:m,fontSizeMini:g,fontSizeTiny:v,fontSizeSmall:y,fontSizeMedium:b,heightMini:w,heightTiny:x,heightSmall:C,heightMedium:S,closeColorHover:B,closeColorPressed:_,buttonColor2Hover:E,buttonColor2Pressed:M,fontWeightStrong:P}=e;return Object.assign(Object.assign({},ww),{closeBorderRadius:m,heightTiny:w,heightSmall:x,heightMedium:C,heightLarge:S,borderRadius:m,opacityDisabled:d,fontSizeTiny:g,fontSizeSmall:v,fontSizeMedium:y,fontSizeLarge:b,fontWeightStrong:P,textColorCheckable:t,textColorHoverCheckable:t,textColorPressedCheckable:t,textColorChecked:c,colorCheckable:"#0000",colorHoverCheckable:E,colorPressedCheckable:M,colorChecked:i,colorCheckedHover:n,colorCheckedPressed:r,border:`1px solid ${u}`,textColor:t,color:h,colorBordered:"rgb(250, 250, 252)",closeIconColor:p,closeIconColorHover:A,closeIconColorPressed:f,closeColorHover:B,closeColorPressed:_,borderPrimary:`1px solid ${Ua(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:Ua(i,{alpha:.12}),colorBorderedPrimary:Ua(i,{alpha:.1}),closeIconColorPrimary:i,closeIconColorHoverPrimary:i,closeIconColorPressedPrimary:i,closeColorHoverPrimary:Ua(i,{alpha:.12}),closeColorPressedPrimary:Ua(i,{alpha:.18}),borderInfo:`1px solid ${Ua(o,{alpha:.3})}`,textColorInfo:o,colorInfo:Ua(o,{alpha:.12}),colorBorderedInfo:Ua(o,{alpha:.1}),closeIconColorInfo:o,closeIconColorHoverInfo:o,closeIconColorPressedInfo:o,closeColorHoverInfo:Ua(o,{alpha:.12}),closeColorPressedInfo:Ua(o,{alpha:.18}),borderSuccess:`1px solid ${Ua(a,{alpha:.3})}`,textColorSuccess:a,colorSuccess:Ua(a,{alpha:.12}),colorBorderedSuccess:Ua(a,{alpha:.1}),closeIconColorSuccess:a,closeIconColorHoverSuccess:a,closeIconColorPressedSuccess:a,closeColorHoverSuccess:Ua(a,{alpha:.12}),closeColorPressedSuccess:Ua(a,{alpha:.18}),borderWarning:`1px solid ${Ua(s,{alpha:.35})}`,textColorWarning:s,colorWarning:Ua(s,{alpha:.15}),colorBorderedWarning:Ua(s,{alpha:.12}),closeIconColorWarning:s,closeIconColorHoverWarning:s,closeIconColorPressedWarning:s,closeColorHoverWarning:Ua(s,{alpha:.12}),closeColorPressedWarning:Ua(s,{alpha:.18}),borderError:`1px solid ${Ua(l,{alpha:.23})}`,textColorError:l,colorError:Ua(l,{alpha:.1}),colorBorderedError:Ua(l,{alpha:.08}),closeIconColorError:l,closeIconColorHoverError:l,closeIconColorPressedError:l,closeColorHoverError:Ua(l,{alpha:.12}),closeColorPressedError:Ua(l,{alpha:.18})})}},Cw={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},Sw=Us("tag","\n --n-close-margin: var(--n-close-margin-top) var(--n-close-margin-right) var(--n-close-margin-bottom) var(--n-close-margin-left);\n white-space: nowrap;\n position: relative;\n box-sizing: border-box;\n cursor: default;\n display: inline-flex;\n align-items: center;\n flex-wrap: nowrap;\n padding: var(--n-padding);\n border-radius: var(--n-border-radius);\n color: var(--n-text-color);\n background-color: var(--n-color);\n transition: \n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n line-height: 1;\n height: var(--n-height);\n font-size: var(--n-font-size);\n",[Ns("strong","\n font-weight: var(--n-font-weight-strong);\n "),zs("border","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n border: var(--n-border);\n transition: border-color .3s var(--n-bezier);\n "),zs("icon","\n display: flex;\n margin: 0 4px 0 0;\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n font-size: var(--n-avatar-size-override);\n "),zs("avatar","\n display: flex;\n margin: 0 6px 0 0;\n "),zs("close","\n margin: var(--n-close-margin);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n "),Ns("round","\n padding: 0 calc(var(--n-height) / 3);\n border-radius: calc(var(--n-height) / 2);\n ",[zs("icon","\n margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);\n "),zs("avatar","\n margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);\n "),Ns("closable","\n padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);\n ")]),Ns("icon, avatar",[Ns("round","\n padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);\n ")]),Ns("disabled","\n cursor: not-allowed !important;\n opacity: var(--n-opacity-disabled);\n "),Ns("checkable","\n cursor: pointer;\n box-shadow: none;\n color: var(--n-text-color-checkable);\n background-color: var(--n-color-checkable);\n ",[js("disabled",[Ls("&:hover","background-color: var(--n-color-hover-checkable);",[js("checked","color: var(--n-text-color-hover-checkable);")]),Ls("&:active","background-color: var(--n-color-pressed-checkable);",[js("checked","color: var(--n-text-color-pressed-checkable);")])]),Ns("checked","\n color: var(--n-text-color-checked);\n background-color: var(--n-color-checked);\n ",[js("disabled",[Ls("&:hover","background-color: var(--n-color-checked-hover);"),Ls("&:active","background-color: var(--n-color-checked-pressed);")])])])]),Bw=Object.assign(Object.assign(Object.assign({},sf.props),Cw),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),_w="n-tag",Ew=Dn({name:"Tag",props:Bw,setup(e){const t=bt(null),{mergedBorderedRef:n,mergedClsPrefixRef:r,inlineThemeDisabled:i,mergedRtlRef:o}=cf(e),a=sf("Tag","-tag",Sw,xw,e,r);nr(_w,{roundRef:Tt(e,"round")});const s={setTextContent(e){const{value:n}=t;n&&(n.textContent=e)}},l=Iv("Tag",o,r),c=eo((()=>{const{type:t,size:r,color:{color:i,textColor:o}={}}=e,{common:{cubicBezierEaseInOut:s},self:{padding:l,closeMargin:c,borderRadius:u,opacityDisabled:d,textColorCheckable:h,textColorHoverCheckable:p,textColorPressedCheckable:A,textColorChecked:f,colorCheckable:m,colorHoverCheckable:g,colorPressedCheckable:v,colorChecked:y,colorCheckedHover:b,colorCheckedPressed:w,closeBorderRadius:x,fontWeightStrong:C,[Gs("colorBordered",t)]:S,[Gs("closeSize",r)]:B,[Gs("closeIconSize",r)]:_,[Gs("fontSize",r)]:E,[Gs("height",r)]:M,[Gs("color",t)]:P,[Gs("textColor",t)]:T,[Gs("border",t)]:D,[Gs("closeIconColor",t)]:F,[Gs("closeIconColorHover",t)]:I,[Gs("closeIconColorPressed",t)]:k,[Gs("closeColorHover",t)]:O,[Gs("closeColorPressed",t)]:L}}=a.value,R=ya(c);return{"--n-font-weight-strong":C,"--n-avatar-size-override":`calc(${M} - 8px)`,"--n-bezier":s,"--n-border-radius":u,"--n-border":D,"--n-close-icon-size":_,"--n-close-color-pressed":L,"--n-close-color-hover":O,"--n-close-border-radius":x,"--n-close-icon-color":F,"--n-close-icon-color-hover":I,"--n-close-icon-color-pressed":k,"--n-close-icon-color-disabled":F,"--n-close-margin-top":R.top,"--n-close-margin-right":R.right,"--n-close-margin-bottom":R.bottom,"--n-close-margin-left":R.left,"--n-close-size":B,"--n-color":i||(n.value?S:P),"--n-color-checkable":m,"--n-color-checked":y,"--n-color-checked-hover":b,"--n-color-checked-pressed":w,"--n-color-hover-checkable":g,"--n-color-pressed-checkable":v,"--n-font-size":E,"--n-height":M,"--n-opacity-disabled":d,"--n-padding":l,"--n-text-color":o||T,"--n-text-color-checkable":h,"--n-text-color-checked":f,"--n-text-color-hover-checkable":p,"--n-text-color-pressed-checkable":A}})),u=i?Fv("tag",eo((()=>{let t="";const{type:r,size:i,color:{color:o,textColor:a}={}}=e;return t+=r[0],t+=i[0],o&&(t+=`a${hs(o)}`),a&&(t+=`b${hs(a)}`),n.value&&(t+="c"),t})),c,e):void 0;return Object.assign(Object.assign({},s),{rtlEnabled:l,mergedClsPrefix:r,contentRef:t,mergedBordered:n,handleClick:function(t){if(!e.disabled&&e.checkable){const{checked:t,onCheckedChange:n,onUpdateChecked:r,"onUpdate:checked":i}=e;r&&r(!t),i&&i(!t),n&&n(!t)}},handleCloseClick:function(t){if(e.triggerClickOnClose||t.stopPropagation(),!e.disabled){const{onClose:n}=e;n&&Ka(n,t)}},cssVars:i?void 0:c,themeClass:null==u?void 0:u.themeClass,onRender:null==u?void 0:u.onRender})},render(){var e,t;const{mergedClsPrefix:n,rtlEnabled:r,closable:i,color:{borderColor:o}={},round:a,onRender:s,$slots:l}=this;null==s||s();const c=os(l.avatar,(e=>e&&to("div",{class:`${n}-tag__avatar`},e))),u=os(l.icon,(e=>e&&to("div",{class:`${n}-tag__icon`},e)));return to("div",{class:[`${n}-tag`,this.themeClass,{[`${n}-tag--rtl`]:r,[`${n}-tag--strong`]:this.strong,[`${n}-tag--disabled`]:this.disabled,[`${n}-tag--checkable`]:this.checkable,[`${n}-tag--checked`]:this.checkable&&this.checked,[`${n}-tag--round`]:a,[`${n}-tag--avatar`]:c,[`${n}-tag--icon`]:u,[`${n}-tag--closable`]:i}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},u||c,to("span",{class:`${n}-tag__content`,ref:"contentRef"},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)),!this.checkable&&i?to(fy,{clsPrefix:n,class:`${n}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:a,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?to("div",{class:`${n}-tag__border`,style:{borderColor:o}}):null)}}),Mw=Us("base-clear","\n flex-shrink: 0;\n height: 1em;\n width: 1em;\n position: relative;\n",[Ls(">",[zs("clear","\n font-size: var(--n-clear-size);\n height: 1em;\n width: 1em;\n cursor: pointer;\n color: var(--n-clear-color);\n transition: color .3s var(--n-bezier);\n display: flex;\n ",[Ls("&:hover","\n color: var(--n-clear-color-hover)!important;\n "),Ls("&:active","\n color: var(--n-clear-color-pressed)!important;\n ")]),zs("placeholder","\n display: flex;\n "),zs("clear, placeholder","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n ",[vy({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),Pw=Dn({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup:e=>(Dv("-base-clear",Mw,Tt(e,"clsPrefix")),{handleMouseDown(e){e.preventDefault()}}),render(){const{clsPrefix:e}=this;return to("div",{class:`${e}-base-clear`},to(uy,null,{default:()=>{var t,n;return this.show?to("div",{key:"dismiss",class:`${e}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},rs(this.$slots.icon,(()=>[to(py,{clsPrefix:e},{default:()=>to(ay,null)})]))):to("div",{key:"icon",class:`${e}-base-clear__placeholder`},null===(n=(t=this.$slots).placeholder)||void 0===n?void 0:n.call(t))}}))}}),Tw=Dn({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup:(e,{slots:t})=>()=>{const{clsPrefix:n}=e;return to(xy,{clsPrefix:n,class:`${n}-base-suffix`,strokeWidth:24,scale:.85,show:e.loading},{default:()=>e.showArrow?to(Pw,{clsPrefix:n,show:e.showClear,onClear:e.onClear},{placeholder:()=>to(py,{clsPrefix:n,class:`${n}-base-suffix__arrow`},{default:()=>rs(t.default,(()=>[to(oy,null)]))})}):null})}}),Dw={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"},Fw={name:"InternalSelection",common:Lb,peers:{Popover:aw},self:e=>{const{borderRadius:t,textColor2:n,textColorDisabled:r,inputColor:i,inputColorDisabled:o,primaryColor:a,primaryColorHover:s,warningColor:l,warningColorHover:c,errorColor:u,errorColorHover:d,borderColor:h,iconColor:p,iconColorDisabled:A,clearColor:f,clearColorHover:m,clearColorPressed:g,placeholderColor:v,placeholderColorDisabled:y,fontSizeTiny:b,fontSizeSmall:w,fontSizeMedium:x,fontSizeLarge:C,heightTiny:S,heightSmall:B,heightMedium:_,heightLarge:E}=e;return Object.assign(Object.assign({},Dw),{fontSizeTiny:b,fontSizeSmall:w,fontSizeMedium:x,fontSizeLarge:C,heightTiny:S,heightSmall:B,heightMedium:_,heightLarge:E,borderRadius:t,textColor:n,textColorDisabled:r,placeholderColor:v,placeholderColorDisabled:y,color:i,colorDisabled:o,colorActive:i,border:`1px solid ${h}`,borderHover:`1px solid ${s}`,borderActive:`1px solid ${a}`,borderFocus:`1px solid ${s}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${Ua(a,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${Ua(a,{alpha:.2})}`,caretColor:a,arrowColor:p,arrowColorDisabled:A,loadingColor:a,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${c}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${c}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${Ua(l,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${Ua(l,{alpha:.2})}`,colorActiveWarning:i,caretColorWarning:l,borderError:`1px solid ${u}`,borderHoverError:`1px solid ${d}`,borderActiveError:`1px solid ${u}`,borderFocusError:`1px solid ${d}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${Ua(u,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${Ua(u,{alpha:.2})}`,colorActiveError:i,caretColorError:u,clearColor:f,clearColorHover:m,clearColorPressed:g})}},Iw=Ls([Us("base-selection","\n --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);\n --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);\n position: relative;\n z-index: auto;\n box-shadow: none;\n width: 100%;\n max-width: 100%;\n display: inline-block;\n vertical-align: bottom;\n border-radius: var(--n-border-radius);\n min-height: var(--n-height);\n line-height: 1.5;\n font-size: var(--n-font-size);\n ",[Us("base-loading","\n color: var(--n-loading-color);\n "),Us("base-selection-tags","min-height: var(--n-height);"),zs("border, state-border","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border: var(--n-border);\n border-radius: inherit;\n transition:\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n "),zs("state-border","\n z-index: 1;\n border-color: #0000;\n "),Us("base-suffix","\n cursor: pointer;\n position: absolute;\n top: 50%;\n transform: translateY(-50%);\n right: 10px;\n ",[zs("arrow","\n font-size: var(--n-arrow-size);\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n ")]),Us("base-selection-overlay","\n display: flex;\n align-items: center;\n white-space: nowrap;\n pointer-events: none;\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n padding: var(--n-padding-single);\n transition: color .3s var(--n-bezier);\n ",[zs("wrapper","\n flex-basis: 0;\n flex-grow: 1;\n overflow: hidden;\n text-overflow: ellipsis;\n ")]),Us("base-selection-placeholder","\n color: var(--n-placeholder-color);\n ",[zs("inner","\n max-width: 100%;\n overflow: hidden;\n ")]),Us("base-selection-tags","\n cursor: pointer;\n outline: none;\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n display: flex;\n padding: var(--n-padding-multiple);\n flex-wrap: wrap;\n align-items: center;\n width: 100%;\n vertical-align: bottom;\n background-color: var(--n-color);\n border-radius: inherit;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),Us("base-selection-label","\n height: var(--n-height);\n display: inline-flex;\n width: 100%;\n vertical-align: bottom;\n cursor: pointer;\n outline: none;\n z-index: auto;\n box-sizing: border-box;\n position: relative;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: inherit;\n background-color: var(--n-color);\n align-items: center;\n ",[Us("base-selection-input","\n font-size: inherit;\n line-height: inherit;\n outline: none;\n cursor: pointer;\n box-sizing: border-box;\n border:none;\n width: 100%;\n padding: var(--n-padding-single);\n background-color: #0000;\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n caret-color: var(--n-caret-color);\n ",[zs("content","\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap; \n ")]),zs("render-label","\n color: var(--n-text-color);\n ")]),js("disabled",[Ls("&:hover",[zs("state-border","\n box-shadow: var(--n-box-shadow-hover);\n border: var(--n-border-hover);\n ")]),Ns("focus",[zs("state-border","\n box-shadow: var(--n-box-shadow-focus);\n border: var(--n-border-focus);\n ")]),Ns("active",[zs("state-border","\n box-shadow: var(--n-box-shadow-active);\n border: var(--n-border-active);\n "),Us("base-selection-label","background-color: var(--n-color-active);"),Us("base-selection-tags","background-color: var(--n-color-active);")])]),Ns("disabled","cursor: not-allowed;",[zs("arrow","\n color: var(--n-arrow-color-disabled);\n "),Us("base-selection-label","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n ",[Us("base-selection-input","\n cursor: not-allowed;\n color: var(--n-text-color-disabled);\n "),zs("render-label","\n color: var(--n-text-color-disabled);\n ")]),Us("base-selection-tags","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n "),Us("base-selection-placeholder","\n cursor: not-allowed;\n color: var(--n-placeholder-color-disabled);\n ")]),Us("base-selection-input-tag","\n height: calc(var(--n-height) - 6px);\n line-height: calc(var(--n-height) - 6px);\n outline: none;\n display: none;\n position: relative;\n margin-bottom: 3px;\n max-width: 100%;\n vertical-align: bottom;\n ",[zs("input","\n font-size: inherit;\n font-family: inherit;\n min-width: 1px;\n padding: 0;\n background-color: #0000;\n outline: none;\n border: none;\n max-width: 100%;\n overflow: hidden;\n width: 1em;\n line-height: inherit;\n cursor: pointer;\n color: var(--n-text-color);\n caret-color: var(--n-caret-color);\n "),zs("mirror","\n position: absolute;\n left: 0;\n top: 0;\n white-space: pre;\n visibility: hidden;\n user-select: none;\n -webkit-user-select: none;\n opacity: 0;\n ")]),["warning","error"].map((e=>Ns(`${e}-status`,[zs("state-border",`border: var(--n-border-${e});`),js("disabled",[Ls("&:hover",[zs("state-border",`\n box-shadow: var(--n-box-shadow-hover-${e});\n border: var(--n-border-hover-${e});\n `)]),Ns("active",[zs("state-border",`\n box-shadow: var(--n-box-shadow-active-${e});\n border: var(--n-border-active-${e});\n `),Us("base-selection-label",`background-color: var(--n-color-active-${e});`),Us("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),Ns("focus",[zs("state-border",`\n box-shadow: var(--n-box-shadow-focus-${e});\n border: var(--n-border-focus-${e});\n `)])])])))]),Us("base-selection-popover","\n margin-bottom: -3px;\n display: flex;\n flex-wrap: wrap;\n margin-right: -8px;\n "),Us("base-selection-tag-wrapper","\n max-width: 100%;\n display: inline-flex;\n padding: 0 7px 3px 0;\n ",[Ls("&:last-child","padding-right: 0;"),Us("tag","\n font-size: 14px;\n max-width: 100%;\n ",[zs("content","\n line-height: 1.25;\n text-overflow: ellipsis;\n overflow: hidden;\n ")])])]),kw=Dn({name:"InternalSelection",props:Object.assign(Object.assign({},sf.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=cf(e),r=Iv("InternalSelection",n,t),i=bt(null),o=bt(null),a=bt(null),s=bt(null),l=bt(null),c=bt(null),u=bt(null),d=bt(null),h=bt(null),p=bt(null),A=bt(!1),f=bt(!1),m=bt(!1),g=sf("InternalSelection","-internal-selection",Iw,Fw,e,Tt(e,"clsPrefix")),v=eo((()=>e.clearable&&!e.disabled&&(m.value||e.active))),y=eo((()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):Xa(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder)),b=eo((()=>{const t=e.selectedOption;if(t)return t[e.labelField]})),w=eo((()=>e.multiple?!(!Array.isArray(e.selectedOptions)||!e.selectedOptions.length):null!==e.selectedOption));function x(){var t;const{value:n}=i;if(n){const{value:r}=o;r&&(r.style.width=`${n.offsetWidth}px`,"responsive"!==e.maxTagCount&&(null===(t=h.value)||void 0===t||t.sync({showAllItemsBeforeCalculate:!1})))}}function C(t){const{onPatternInput:n}=e;n&&n(t)}function S(t){!function(t){const{onDeleteOption:n}=e;n&&n(t)}(t)}Ir(Tt(e,"active"),(e=>{e||function(){const{value:e}=p;e&&(e.style.display="none")}()})),Ir(Tt(e,"pattern"),(()=>{e.multiple&&Vt(x)}));const B=bt(!1);let _=null;let E=null;function M(){null!==E&&window.clearTimeout(E)}Ir(w,(e=>{e||(A.value=!1)})),vn((()=>{Dr((()=>{const t=c.value;t&&(e.disabled?t.removeAttribute("tabindex"):t.tabIndex=f.value?-1:0)}))})),Cu(a,e.onResize);const{inlineThemeDisabled:P}=e,T=eo((()=>{const{size:t}=e,{common:{cubicBezierEaseInOut:n},self:{borderRadius:r,color:i,placeholderColor:o,textColor:a,paddingSingle:s,paddingMultiple:l,caretColor:c,colorDisabled:u,textColorDisabled:d,placeholderColorDisabled:h,colorActive:p,boxShadowFocus:A,boxShadowActive:f,boxShadowHover:m,border:v,borderFocus:y,borderHover:b,borderActive:w,arrowColor:x,arrowColorDisabled:C,loadingColor:S,colorActiveWarning:B,boxShadowFocusWarning:_,boxShadowActiveWarning:E,boxShadowHoverWarning:M,borderWarning:P,borderFocusWarning:T,borderHoverWarning:D,borderActiveWarning:F,colorActiveError:I,boxShadowFocusError:k,boxShadowActiveError:O,boxShadowHoverError:L,borderError:R,borderFocusError:U,borderHoverError:z,borderActiveError:N,clearColor:j,clearColorHover:H,clearColorPressed:Q,clearSize:V,arrowSize:W,[Gs("height",t)]:G,[Gs("fontSize",t)]:q}}=g.value,K=ya(s),Y=ya(l);return{"--n-bezier":n,"--n-border":v,"--n-border-active":w,"--n-border-focus":y,"--n-border-hover":b,"--n-border-radius":r,"--n-box-shadow-active":f,"--n-box-shadow-focus":A,"--n-box-shadow-hover":m,"--n-caret-color":c,"--n-color":i,"--n-color-active":p,"--n-color-disabled":u,"--n-font-size":q,"--n-height":G,"--n-padding-single-top":K.top,"--n-padding-multiple-top":Y.top,"--n-padding-single-right":K.right,"--n-padding-multiple-right":Y.right,"--n-padding-single-left":K.left,"--n-padding-multiple-left":Y.left,"--n-padding-single-bottom":K.bottom,"--n-padding-multiple-bottom":Y.bottom,"--n-placeholder-color":o,"--n-placeholder-color-disabled":h,"--n-text-color":a,"--n-text-color-disabled":d,"--n-arrow-color":x,"--n-arrow-color-disabled":C,"--n-loading-color":S,"--n-color-active-warning":B,"--n-box-shadow-focus-warning":_,"--n-box-shadow-active-warning":E,"--n-box-shadow-hover-warning":M,"--n-border-warning":P,"--n-border-focus-warning":T,"--n-border-hover-warning":D,"--n-border-active-warning":F,"--n-color-active-error":I,"--n-box-shadow-focus-error":k,"--n-box-shadow-active-error":O,"--n-box-shadow-hover-error":L,"--n-border-error":R,"--n-border-focus-error":U,"--n-border-hover-error":z,"--n-border-active-error":N,"--n-clear-size":V,"--n-clear-color":j,"--n-clear-color-hover":H,"--n-clear-color-pressed":Q,"--n-arrow-size":W}})),D=P?Fv("internal-selection",eo((()=>e.size[0])),T,e):void 0;return{mergedTheme:g,mergedClearable:v,mergedClsPrefix:t,rtlEnabled:r,patternInputFocused:f,filterablePlaceholder:y,label:b,selected:w,showTagsPanel:A,isComposing:B,counterRef:u,counterWrapperRef:d,patternInputMirrorRef:i,patternInputRef:o,selfRef:a,multipleElRef:s,singleElRef:l,patternInputWrapperRef:c,overflowRef:h,inputTagElRef:p,handleMouseDown:function(t){e.active&&e.filterable&&t.target!==o.value&&t.preventDefault()},handleFocusin:function(t){var n;t.relatedTarget&&(null===(n=a.value)||void 0===n?void 0:n.contains(t.relatedTarget))||function(t){const{onFocus:n}=e;n&&n(t)}(t)},handleClear:function(t){!function(t){const{onClear:n}=e;n&&n(t)}(t)},handleMouseEnter:function(){m.value=!0},handleMouseLeave:function(){m.value=!1},handleDeleteOption:S,handlePatternKeyDown:function(t){if("Backspace"===t.key&&!B.value&&!e.pattern.length){const{selectedOptions:t}=e;(null==t?void 0:t.length)&&S(t[t.length-1])}},handlePatternInputInput:function(t){const{value:n}=i;if(n){const e=t.target.value;n.textContent=e,x()}e.ignoreComposition&&B.value?_=t:C(t)},handlePatternInputBlur:function(t){var n;f.value=!1,null===(n=e.onPatternBlur)||void 0===n||n.call(e,t)},handlePatternInputFocus:function(t){var n;f.value=!0,null===(n=e.onPatternFocus)||void 0===n||n.call(e,t)},handleMouseEnterCounter:function(){e.active||(M(),E=window.setTimeout((()=>{w.value&&(A.value=!0)}),100))},handleMouseLeaveCounter:function(){M()},handleFocusout:function(t){var n;(null===(n=a.value)||void 0===n?void 0:n.contains(t.relatedTarget))||function(t){const{onBlur:n}=e;n&&n(t)}(t)},handleCompositionEnd:function(){B.value=!1,e.ignoreComposition&&C(_),_=null},handleCompositionStart:function(){B.value=!0},onPopoverUpdateShow:function(e){e||(M(),A.value=!1)},focus:function(){var t,n,r;e.filterable?(f.value=!1,null===(t=c.value)||void 0===t||t.focus()):e.multiple?null===(n=s.value)||void 0===n||n.focus():null===(r=l.value)||void 0===r||r.focus()},focusInput:function(){const{value:e}=o;e&&(!function(){const{value:e}=p;e&&(e.style.display="inline-block")}(),e.focus())},blur:function(){var t,n;if(e.filterable)f.value=!1,null===(t=c.value)||void 0===t||t.blur(),null===(n=o.value)||void 0===n||n.blur();else if(e.multiple){const{value:e}=s;null==e||e.blur()}else{const{value:e}=l;null==e||e.blur()}},blurInput:function(){const{value:e}=o;e&&e.blur()},updateCounter:function(e){const{value:t}=u;t&&t.setTextContent(`+${e}`)},getCounter:function(){const{value:e}=d;return e},getTail:function(){return o.value},renderLabel:e.renderLabel,cssVars:P?void 0:T,themeClass:null==D?void 0:D.themeClass,onRender:null==D?void 0:D.onRender}},render(){const{status:e,multiple:t,size:n,disabled:r,filterable:i,maxTagCount:o,bordered:a,clsPrefix:s,ellipsisTagPopoverProps:l,onRender:c,renderTag:u,renderLabel:d}=this;null==c||c();const h="responsive"===o,p="number"==typeof o,A=h||p,f=to(ls,null,{default:()=>to(Tw,{clsPrefix:s,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var e,t;return null===(t=(e=this.$slots).arrow)||void 0===t?void 0:t.call(e)}})});let m;if(t){const{labelField:e}=this,t=t=>to("div",{class:`${s}-base-selection-tag-wrapper`,key:t.value},u?u({option:t,handleClose:()=>{this.handleDeleteOption(t)}}):to(Ew,{size:n,closable:!t.disabled,disabled:r,onClose:()=>{this.handleDeleteOption(t)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>d?d(t,!0):Xa(t[e],t,!0)})),a=()=>(p?this.selectedOptions.slice(0,o):this.selectedOptions).map(t),c=i?to("div",{class:`${s}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},to("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:r,value:this.pattern,autofocus:this.autofocus,class:`${s}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),to("span",{ref:"patternInputMirrorRef",class:`${s}-base-selection-input-tag__mirror`},this.pattern)):null,g=h?()=>to("div",{class:`${s}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},to(Ew,{size:n,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:r})):void 0;let v;if(p){const e=this.selectedOptions.length-o;e>0&&(v=to("div",{class:`${s}-base-selection-tag-wrapper`,key:"__counter__"},to(Ew,{size:n,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:r},{default:()=>`+${e}`})))}const y=h?i?to(mu,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:a,counter:g,tail:()=>c}):to(mu,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:a,counter:g}):p&&v?a().concat(v):a(),b=A?()=>to("div",{class:`${s}-base-selection-popover`},h?a():this.selectedOptions.map(t)):void 0,w=A?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},l):null,x=!this.selected&&(!this.active||!this.pattern&&!this.isComposing)?to("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`},to("div",{class:`${s}-base-selection-placeholder__inner`},this.placeholder)):null,C=i?to("div",{ref:"patternInputWrapperRef",class:`${s}-base-selection-tags`},y,h?null:c,f):to("div",{ref:"multipleElRef",class:`${s}-base-selection-tags`,tabindex:r?void 0:0},y,f);m=to(di,null,A?to(bw,Object.assign({},w,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>C,default:b}):C,x)}else if(i){const e=this.pattern||this.isComposing,t=this.active?!e:!this.selected,n=!this.active&&this.selected;m=to("div",{ref:"patternInputWrapperRef",class:`${s}-base-selection-label`,title:this.patternInputFocused?void 0:Za(this.label)},to("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${s}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:r,disabled:r,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),n?to("div",{class:`${s}-base-selection-label__render-label ${s}-base-selection-overlay`,key:"input"},to("div",{class:`${s}-base-selection-overlay__wrapper`},u?u({option:this.selectedOption,handleClose:()=>{}}):d?d(this.selectedOption,!0):Xa(this.label,this.selectedOption,!0))):null,t?to("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`,key:"placeholder"},to("div",{class:`${s}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,f)}else m=to("div",{ref:"singleElRef",class:`${s}-base-selection-label`,tabindex:this.disabled?void 0:0},void 0!==this.label?to("div",{class:`${s}-base-selection-input`,title:Za(this.label),key:"input"},to("div",{class:`${s}-base-selection-input__content`},u?u({option:this.selectedOption,handleClose:()=>{}}):d?d(this.selectedOption,!0):Xa(this.label,this.selectedOption,!0))):to("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`,key:"placeholder"},to("div",{class:`${s}-base-selection-placeholder__inner`},this.placeholder)),f);return to("div",{ref:"selfRef",class:[`${s}-base-selection`,this.rtlEnabled&&`${s}-base-selection--rtl`,this.themeClass,e&&`${s}-base-selection--${e}-status`,{[`${s}-base-selection--active`]:this.active,[`${s}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${s}-base-selection--disabled`]:this.disabled,[`${s}-base-selection--multiple`]:this.multiple,[`${s}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},m,a?to("div",{class:`${s}-base-selection__border`}):null,a?to("div",{class:`${s}-base-selection__state-border`}):null)}}),{cubicBezierEaseInOut:Ow}=ZA;const{cubicBezierEaseInOut:Lw,cubicBezierEaseOut:Rw,cubicBezierEaseIn:Uw}=ZA;function zw({overflow:e="hidden",duration:t=".3s",originalTransition:n="",leavingDelay:r="0s",foldPadding:i=!1,enterToProps:o,leaveToProps:a,reverse:s=!1}={}){const l=s?"leave":"enter",c=s?"enter":"leave";return[Ls(`&.fade-in-height-expand-transition-${c}-from,\n &.fade-in-height-expand-transition-${l}-to`,Object.assign(Object.assign({},o),{opacity:1})),Ls(`&.fade-in-height-expand-transition-${c}-to,\n &.fade-in-height-expand-transition-${l}-from`,Object.assign(Object.assign({},a),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:i?"0 !important":void 0,paddingBottom:i?"0 !important":void 0})),Ls(`&.fade-in-height-expand-transition-${c}-active`,`\n overflow: ${e};\n transition:\n max-height ${t} ${Lw} ${r},\n opacity ${t} ${Rw} ${r},\n margin-top ${t} ${Lw} ${r},\n margin-bottom ${t} ${Lw} ${r},\n padding-top ${t} ${Lw} ${r},\n padding-bottom ${t} ${Lw} ${r}\n ${n?","+n:""}\n `),Ls(`&.fade-in-height-expand-transition-${l}-active`,`\n overflow: ${e};\n transition:\n max-height ${t} ${Lw},\n opacity ${t} ${Uw},\n margin-top ${t} ${Lw},\n margin-bottom ${t} ${Lw},\n padding-top ${t} ${Lw},\n padding-bottom ${t} ${Lw}\n ${n?","+n:""}\n `)]}function Nw(e){return"group"===e.type}function jw(e){return"ignored"===e.type}function Hw(e,t){try{return!!(1+t.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch(n){return!1}}function Qw(e,t){return{getIsGroup:Nw,getIgnored:jw,getKey:t=>Nw(t)?t.name||t.key||"key-required":t[e],getChildren:e=>e[t]}}const Vw=Ks&&"chrome"in window;Ks&&navigator.userAgent.includes("Firefox");const Ww=Ks&&navigator.userAgent.includes("Safari")&&!Vw,Gw={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"},qw={name:"Input",common:Lb,self:e=>{const{textColor2:t,textColor3:n,textColorDisabled:r,primaryColor:i,primaryColorHover:o,inputColor:a,inputColorDisabled:s,borderColor:l,warningColor:c,warningColorHover:u,errorColor:d,errorColorHover:h,borderRadius:p,lineHeight:A,fontSizeTiny:f,fontSizeSmall:m,fontSizeMedium:g,fontSizeLarge:v,heightTiny:y,heightSmall:b,heightMedium:w,heightLarge:x,actionColor:C,clearColor:S,clearColorHover:B,clearColorPressed:_,placeholderColor:E,placeholderColorDisabled:M,iconColor:P,iconColorDisabled:T,iconColorHover:D,iconColorPressed:F}=e;return Object.assign(Object.assign({},Gw),{countTextColorDisabled:r,countTextColor:n,heightTiny:y,heightSmall:b,heightMedium:w,heightLarge:x,fontSizeTiny:f,fontSizeSmall:m,fontSizeMedium:g,fontSizeLarge:v,lineHeight:A,lineHeightTextarea:A,borderRadius:p,iconSize:"16px",groupLabelColor:C,groupLabelTextColor:t,textColor:t,textColorDisabled:r,textDecorationColor:t,caretColor:i,placeholderColor:E,placeholderColorDisabled:M,color:a,colorDisabled:s,colorFocus:a,groupLabelBorder:`1px solid ${l}`,border:`1px solid ${l}`,borderHover:`1px solid ${o}`,borderDisabled:`1px solid ${l}`,borderFocus:`1px solid ${o}`,boxShadowFocus:`0 0 0 2px ${Ua(i,{alpha:.2})}`,loadingColor:i,loadingColorWarning:c,borderWarning:`1px solid ${c}`,borderHoverWarning:`1px solid ${u}`,colorFocusWarning:a,borderFocusWarning:`1px solid ${u}`,boxShadowFocusWarning:`0 0 0 2px ${Ua(c,{alpha:.2})}`,caretColorWarning:c,loadingColorError:d,borderError:`1px solid ${d}`,borderHoverError:`1px solid ${h}`,colorFocusError:a,borderFocusError:`1px solid ${h}`,boxShadowFocusError:`0 0 0 2px ${Ua(d,{alpha:.2})}`,caretColorError:d,clearColor:S,clearColorHover:B,clearColorPressed:_,iconColor:P,iconColorDisabled:T,iconColorHover:D,iconColorPressed:F,suffixTextColor:t})}},Kw="n-input";function Yw(e){let t=0;for(const n of e)t++;return t}function Xw(e){return""===e||null==e}const $w=Dn({name:"InputWordCount",setup(e,{slots:t}){const{mergedValueRef:n,maxlengthRef:r,mergedClsPrefixRef:i,countGraphemesRef:o}=rr(Kw),a=eo((()=>{const{value:e}=n;return null===e||Array.isArray(e)?0:(o.value||Yw)(e)}));return()=>{const{value:e}=r,{value:o}=n;return to("span",{class:`${i.value}-input-word-count`},is(t.default,{value:null===o||Array.isArray(o)?"":o},(()=>[void 0===e?a.value:`${a.value} / ${e}`])))}}}),Jw=Us("input","\n max-width: 100%;\n cursor: text;\n line-height: 1.5;\n z-index: auto;\n outline: none;\n box-sizing: border-box;\n position: relative;\n display: inline-flex;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color .3s var(--n-bezier);\n font-size: var(--n-font-size);\n --n-padding-vertical: calc((var(--n-height) - 1.5 * var(--n-font-size)) / 2);\n",[zs("input, textarea","\n overflow: hidden;\n flex-grow: 1;\n position: relative;\n "),zs("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder","\n box-sizing: border-box;\n font-size: inherit;\n line-height: 1.5;\n font-family: inherit;\n border: none;\n outline: none;\n background-color: #0000;\n text-align: inherit;\n transition:\n -webkit-text-fill-color .3s var(--n-bezier),\n caret-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n text-decoration-color .3s var(--n-bezier);\n "),zs("input-el, textarea-el","\n -webkit-appearance: none;\n scrollbar-width: none;\n width: 100%;\n min-width: 0;\n text-decoration-color: var(--n-text-decoration-color);\n color: var(--n-text-color);\n caret-color: var(--n-caret-color);\n background-color: transparent;\n ",[Ls("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb","\n width: 0;\n height: 0;\n display: none;\n "),Ls("&::placeholder","\n color: #0000;\n -webkit-text-fill-color: transparent !important;\n "),Ls("&:-webkit-autofill ~",[zs("placeholder","display: none;")])]),Ns("round",[js("textarea","border-radius: calc(var(--n-height) / 2);")]),zs("placeholder","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n overflow: hidden;\n color: var(--n-placeholder-color);\n ",[Ls("span","\n width: 100%;\n display: inline-block;\n ")]),Ns("textarea",[zs("placeholder","overflow: visible;")]),js("autosize","width: 100%;"),Ns("autosize",[zs("textarea-el, input-el","\n position: absolute;\n top: 0;\n left: 0;\n height: 100%;\n ")]),Us("input-wrapper","\n overflow: hidden;\n display: inline-flex;\n flex-grow: 1;\n position: relative;\n padding-left: var(--n-padding-left);\n padding-right: var(--n-padding-right);\n "),zs("input-mirror","\n padding: 0;\n height: var(--n-height);\n line-height: var(--n-height);\n overflow: hidden;\n visibility: hidden;\n position: static;\n white-space: pre;\n pointer-events: none;\n "),zs("input-el","\n padding: 0;\n height: var(--n-height);\n line-height: var(--n-height);\n ",[Ls("&[type=password]::-ms-reveal","display: none;"),Ls("+",[zs("placeholder","\n display: flex;\n align-items: center; \n ")])]),js("textarea",[zs("placeholder","white-space: nowrap;")]),zs("eye","\n display: flex;\n align-items: center;\n justify-content: center;\n transition: color .3s var(--n-bezier);\n "),Ns("textarea","width: 100%;",[Us("input-word-count","\n position: absolute;\n right: var(--n-padding-right);\n bottom: var(--n-padding-vertical);\n "),Ns("resizable",[Us("input-wrapper","\n resize: vertical;\n min-height: var(--n-height);\n ")]),zs("textarea-el, textarea-mirror, placeholder","\n height: 100%;\n padding-left: 0;\n padding-right: 0;\n padding-top: var(--n-padding-vertical);\n padding-bottom: var(--n-padding-vertical);\n word-break: break-word;\n display: inline-block;\n vertical-align: bottom;\n box-sizing: border-box;\n line-height: var(--n-line-height-textarea);\n margin: 0;\n resize: none;\n white-space: pre-wrap;\n scroll-padding-block-end: var(--n-padding-vertical);\n "),zs("textarea-mirror","\n width: 100%;\n pointer-events: none;\n overflow: hidden;\n visibility: hidden;\n position: static;\n white-space: pre-wrap;\n overflow-wrap: break-word;\n ")]),Ns("pair",[zs("input-el, placeholder","text-align: center;"),zs("separator","\n display: flex;\n align-items: center;\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n white-space: nowrap;\n ",[Us("icon","\n color: var(--n-icon-color);\n "),Us("base-icon","\n color: var(--n-icon-color);\n ")])]),Ns("disabled","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n ",[zs("border","border: var(--n-border-disabled);"),zs("input-el, textarea-el","\n cursor: not-allowed;\n color: var(--n-text-color-disabled);\n text-decoration-color: var(--n-text-color-disabled);\n "),zs("placeholder","color: var(--n-placeholder-color-disabled);"),zs("separator","color: var(--n-text-color-disabled);",[Us("icon","\n color: var(--n-icon-color-disabled);\n "),Us("base-icon","\n color: var(--n-icon-color-disabled);\n ")]),Us("input-word-count","\n color: var(--n-count-text-color-disabled);\n "),zs("suffix, prefix","color: var(--n-text-color-disabled);",[Us("icon","\n color: var(--n-icon-color-disabled);\n "),Us("internal-icon","\n color: var(--n-icon-color-disabled);\n ")])]),js("disabled",[zs("eye","\n color: var(--n-icon-color);\n cursor: pointer;\n ",[Ls("&:hover","\n color: var(--n-icon-color-hover);\n "),Ls("&:active","\n color: var(--n-icon-color-pressed);\n ")]),Ls("&:hover",[zs("state-border","border: var(--n-border-hover);")]),Ns("focus","background-color: var(--n-color-focus);",[zs("state-border","\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),zs("border, state-border","\n box-sizing: border-box;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border-radius: inherit;\n border: var(--n-border);\n transition:\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n "),zs("state-border","\n border-color: #0000;\n z-index: 1;\n "),zs("prefix","margin-right: 4px;"),zs("suffix","\n margin-left: 4px;\n "),zs("suffix, prefix","\n transition: color .3s var(--n-bezier);\n flex-wrap: nowrap;\n flex-shrink: 0;\n line-height: var(--n-height);\n white-space: nowrap;\n display: inline-flex;\n align-items: center;\n justify-content: center;\n color: var(--n-suffix-text-color);\n ",[Us("base-loading","\n font-size: var(--n-icon-size);\n margin: 0 2px;\n color: var(--n-loading-color);\n "),Us("base-clear","\n font-size: var(--n-icon-size);\n ",[zs("placeholder",[Us("base-icon","\n transition: color .3s var(--n-bezier);\n color: var(--n-icon-color);\n font-size: var(--n-icon-size);\n ")])]),Ls(">",[Us("icon","\n transition: color .3s var(--n-bezier);\n color: var(--n-icon-color);\n font-size: var(--n-icon-size);\n ")]),Us("base-icon","\n font-size: var(--n-icon-size);\n ")]),Us("input-word-count","\n pointer-events: none;\n line-height: 1.5;\n font-size: .85em;\n color: var(--n-count-text-color);\n transition: color .3s var(--n-bezier);\n margin-left: 4px;\n font-variant: tabular-nums;\n "),["warning","error"].map((e=>Ns(`${e}-status`,[js("disabled",[Us("base-loading",`\n color: var(--n-loading-color-${e})\n `),zs("input-el, textarea-el",`\n caret-color: var(--n-caret-color-${e});\n `),zs("state-border",`\n border: var(--n-border-${e});\n `),Ls("&:hover",[zs("state-border",`\n border: var(--n-border-hover-${e});\n `)]),Ls("&:focus",`\n background-color: var(--n-color-focus-${e});\n `,[zs("state-border",`\n box-shadow: var(--n-box-shadow-focus-${e});\n border: var(--n-border-focus-${e});\n `)]),Ns("focus",`\n background-color: var(--n-color-focus-${e});\n `,[zs("state-border",`\n box-shadow: var(--n-box-shadow-focus-${e});\n border: var(--n-border-focus-${e});\n `)])])])))]),Zw=Us("input",[Ns("disabled",[zs("input-el, textarea-el","\n -webkit-text-fill-color: var(--n-text-color-disabled);\n ")])]),ex=Dn({name:"Input",props:Object.assign(Object.assign({},sf.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},allowInput:Function,renderCount:Function,onMousedown:Function,onKeydown:Function,onKeyup:[Function,Array],onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],countGraphemes:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,internalLoadingBeforeSuffix:{type:Boolean,default:!0},showPasswordToggle:Boolean}),setup(e){const{mergedClsPrefixRef:t,mergedBorderedRef:n,inlineThemeDisabled:r,mergedRtlRef:i}=cf(e),o=sf("Input","-input",Jw,qw,e,t);Ww&&Dv("-input-safari",Zw,t);const a=bt(null),s=bt(null),l=bt(null),c=bt(null),u=bt(null),d=bt(null),h=bt(null),p=function(e){const t=bt(null);function n(){t.value=null}return Ir(e,n),{recordCursor:function(){const{value:r}=e;if(!(null==r?void 0:r.focus))return void n();const{selectionStart:i,selectionEnd:o,value:a}=r;null!=i&&null!=o?t.value={start:i,end:o,beforeText:a.slice(0,i),afterText:a.slice(o)}:n()},restoreCursor:function(){var n;const{value:r}=t,{value:i}=e;if(!r||!i)return;const{value:o}=i,{start:a,beforeText:s,afterText:l}=r;let c=o.length;if(o.endsWith(l))c=o.length-l.length;else if(o.startsWith(s))c=s.length;else{const e=s[a-1],t=o.indexOf(e,a-1);-1!==t&&(c=t+1)}null===(n=i.setSelectionRange)||void 0===n||n.call(i,c,c)}}}(h),A=bt(null),{localeRef:f}=Tv("Input"),m=bt(e.defaultValue),g=xl(Tt(e,"value"),m),v=Lu(e),{mergedSizeRef:y,mergedDisabledRef:b,mergedStatusRef:w}=v,x=bt(!1),C=bt(!1),S=bt(!1),B=bt(!1);let _=null;const E=eo((()=>{const{placeholder:t,pair:n}=e;return n?Array.isArray(t)?t:void 0===t?["",""]:[t,t]:void 0===t?[f.value.placeholder]:[t]})),M=eo((()=>{const{value:e}=S,{value:t}=g,{value:n}=E;return!e&&(Xw(t)||Array.isArray(t)&&Xw(t[0]))&&n[0]})),P=eo((()=>{const{value:e}=S,{value:t}=g,{value:n}=E;return!e&&n[1]&&(Xw(t)||Array.isArray(t)&&Xw(t[1]))})),T=Zs((()=>e.internalForceFocus||x.value)),D=Zs((()=>{if(b.value||e.readonly||!e.clearable||!T.value&&!C.value)return!1;const{value:t}=g,{value:n}=T;return e.pair?!(!Array.isArray(t)||!t[0]&&!t[1])&&(C.value||n):!!t&&(C.value||n)})),F=eo((()=>{const{showPasswordOn:t}=e;return t||(e.showPasswordToggle?"click":void 0)})),I=bt(!1),k=eo((()=>{const{textDecoration:t}=e;return t?Array.isArray(t)?t.map((e=>({textDecoration:e}))):[{textDecoration:t}]:["",""]})),O=bt(void 0),L=eo((()=>{const{maxlength:t}=e;return void 0===t?void 0:Number(t)}));vn((()=>{const{value:e}=g;Array.isArray(e)||W(e)}));const R=ji().proxy;function U(t,n){const{onUpdateValue:r,"onUpdate:value":i,onInput:o}=e,{nTriggerFormInput:a}=v;r&&Ka(r,t,n),i&&Ka(i,t,n),o&&Ka(o,t,n),m.value=t,a()}function z(t,n){const{onChange:r}=e,{nTriggerFormChange:i}=v;r&&Ka(r,t,n),m.value=t,i()}function N(t,n=0,r="input"){const i=t.target.value;if(W(i),t instanceof InputEvent&&!t.isComposing&&(S.value=!1),"textarea"===e.type){const{value:e}=A;e&&e.syncUnifiedContainer()}if(_=i,S.value)return;p.recordCursor();const o=function(t){const{countGraphemes:n,maxlength:r,minlength:i}=e;if(n){let e;if(void 0!==r&&(void 0===e&&(e=n(t)),e>Number(r)))return!1;if(void 0!==i&&(void 0===e&&(e=n(t)),e<Number(r)))return!1}const{allowInput:o}=e;if("function"==typeof o)return o(t);return!0}(i);if(o)if(e.pair){let{value:e}=g;e=Array.isArray(e)?[e[0],e[1]]:["",""],e[n]=i,"input"===r?U(e,{source:n}):z(e,{source:n})}else"input"===r?U(i,{source:n}):z(i,{source:n});R.$forceUpdate(),o||Vt(p.restoreCursor)}function j(t,n){(null===t.relatedTarget||t.relatedTarget!==u.value&&t.relatedTarget!==d.value&&t.relatedTarget!==s.value&&t.relatedTarget!==a.value)&&("focus"===n?(!function(t){const{onFocus:n}=e,{nTriggerFormFocus:r}=v;n&&Ka(n,t),r()}(t),x.value=!0):"blur"===n&&(!function(t){const{onBlur:n}=e,{nTriggerFormBlur:r}=v;n&&Ka(n,t),r()}(t),x.value=!1))}function H(){e.pair?(U(["",""],{source:"clear"}),z(["",""],{source:"clear"})):(U("",{source:"clear"}),z("",{source:"clear"}))}function Q(){e.passivelyActivated&&(B.value=!1,Vt((()=>{var e;null===(e=a.value)||void 0===e||e.focus()})))}function V(){var t,n,r;b.value||(e.passivelyActivated?null===(t=a.value)||void 0===t||t.focus():(null===(n=s.value)||void 0===n||n.focus(),null===(r=u.value)||void 0===r||r.focus()))}function W(t){const{type:n,pair:r,autosize:i}=e;if(!r&&i)if("textarea"===n){const{value:e}=l;e&&(e.textContent=(null!=t?t:"")+"\r\n")}else{const{value:e}=c;e&&(t?e.textContent=t:e.innerHTML="&nbsp;")}}const G=bt({top:"0"});let q=null;Dr((()=>{const{autosize:t,type:n}=e;t&&"textarea"===n?q=Ir(g,(e=>{Array.isArray(e)||e===_||W(e)})):null==q||q()}));let K=null;Dr((()=>{"textarea"===e.type?K=Ir(g,(e=>{var t;Array.isArray(e)||e===_||null===(t=A.value)||void 0===t||t.syncUnifiedContainer()})):null==K||K()})),nr(Kw,{mergedValueRef:g,maxlengthRef:L,mergedClsPrefixRef:t,countGraphemesRef:Tt(e,"countGraphemes")});const Y={wrapperElRef:a,inputElRef:u,textareaElRef:s,isCompositing:S,clear:H,focus:V,blur:function(){var e;(null===(e=a.value)||void 0===e?void 0:e.contains(document.activeElement))&&document.activeElement.blur()},select:function(){var e,t;null===(e=s.value)||void 0===e||e.select(),null===(t=u.value)||void 0===t||t.select()},deactivate:function(){const{value:e}=a;(null==e?void 0:e.contains(document.activeElement))&&e!==document.activeElement&&Q()},activate:function(){b.value||(s.value?s.value.focus():u.value&&u.value.focus())},scrollTo:function(t){if("textarea"===e.type){const{value:e}=s;null==e||e.scrollTo(t)}else{const{value:e}=u;null==e||e.scrollTo(t)}}},X=Iv("Input",i,t),$=eo((()=>{const{value:e}=y,{common:{cubicBezierEaseInOut:t},self:{color:n,borderRadius:r,textColor:i,caretColor:a,caretColorError:s,caretColorWarning:l,textDecorationColor:c,border:u,borderDisabled:d,borderHover:h,borderFocus:p,placeholderColor:A,placeholderColorDisabled:f,lineHeightTextarea:m,colorDisabled:g,colorFocus:v,textColorDisabled:b,boxShadowFocus:w,iconSize:x,colorFocusWarning:C,boxShadowFocusWarning:S,borderWarning:B,borderFocusWarning:_,borderHoverWarning:E,colorFocusError:M,boxShadowFocusError:P,borderError:T,borderFocusError:D,borderHoverError:F,clearSize:I,clearColor:k,clearColorHover:O,clearColorPressed:L,iconColor:R,iconColorDisabled:U,suffixTextColor:z,countTextColor:N,countTextColorDisabled:j,iconColorHover:H,iconColorPressed:Q,loadingColor:V,loadingColorError:W,loadingColorWarning:G,[Gs("padding",e)]:q,[Gs("fontSize",e)]:K,[Gs("height",e)]:Y}}=o.value,{left:X,right:$}=ya(q);return{"--n-bezier":t,"--n-count-text-color":N,"--n-count-text-color-disabled":j,"--n-color":n,"--n-font-size":K,"--n-border-radius":r,"--n-height":Y,"--n-padding-left":X,"--n-padding-right":$,"--n-text-color":i,"--n-caret-color":a,"--n-text-decoration-color":c,"--n-border":u,"--n-border-disabled":d,"--n-border-hover":h,"--n-border-focus":p,"--n-placeholder-color":A,"--n-placeholder-color-disabled":f,"--n-icon-size":x,"--n-line-height-textarea":m,"--n-color-disabled":g,"--n-color-focus":v,"--n-text-color-disabled":b,"--n-box-shadow-focus":w,"--n-loading-color":V,"--n-caret-color-warning":l,"--n-color-focus-warning":C,"--n-box-shadow-focus-warning":S,"--n-border-warning":B,"--n-border-focus-warning":_,"--n-border-hover-warning":E,"--n-loading-color-warning":G,"--n-caret-color-error":s,"--n-color-focus-error":M,"--n-box-shadow-focus-error":P,"--n-border-error":T,"--n-border-focus-error":D,"--n-border-hover-error":F,"--n-loading-color-error":W,"--n-clear-color":k,"--n-clear-size":I,"--n-clear-color-hover":O,"--n-clear-color-pressed":L,"--n-icon-color":R,"--n-icon-color-hover":H,"--n-icon-color-pressed":Q,"--n-icon-color-disabled":U,"--n-suffix-text-color":z}})),J=r?Fv("input",eo((()=>{const{value:e}=y;return e[0]})),$,e):void 0;return Object.assign(Object.assign({},Y),{wrapperElRef:a,inputElRef:u,inputMirrorElRef:c,inputEl2Ref:d,textareaElRef:s,textareaMirrorElRef:l,textareaScrollbarInstRef:A,rtlEnabled:X,uncontrolledValue:m,mergedValue:g,passwordVisible:I,mergedPlaceholder:E,showPlaceholder1:M,showPlaceholder2:P,mergedFocus:T,isComposing:S,activated:B,showClearButton:D,mergedSize:y,mergedDisabled:b,textDecorationStyle:k,mergedClsPrefix:t,mergedBordered:n,mergedShowPasswordOn:F,placeholderStyle:G,mergedStatus:w,textAreaScrollContainerWidth:O,handleTextAreaScroll:function(e){var t;const{scrollTop:n}=e.target;G.value.top=-n+"px",null===(t=A.value)||void 0===t||t.syncUnifiedContainer()},handleCompositionStart:function(){S.value=!0},handleCompositionEnd:function(e){S.value=!1,e.target===d.value?N(e,1):N(e,0)},handleInput:N,handleInputBlur:function(t){!function(t){const{onInputBlur:n}=e;n&&Ka(n,t)}(t),t.relatedTarget===a.value&&function(){const{onDeactivate:t}=e;t&&Ka(t)}(),(null===t.relatedTarget||t.relatedTarget!==u.value&&t.relatedTarget!==d.value&&t.relatedTarget!==s.value)&&(B.value=!1),j(t,"blur"),h.value=null},handleInputFocus:function(t,n){!function(t){const{onInputFocus:n}=e;n&&Ka(n,t)}(t),x.value=!0,B.value=!0,function(){const{onActivate:t}=e;t&&Ka(t)}(),j(t,"focus"),0===n?h.value=u.value:1===n?h.value=d.value:2===n&&(h.value=s.value)},handleWrapperBlur:function(t){e.passivelyActivated&&(!function(t){const{onWrapperBlur:n}=e;n&&Ka(n,t)}(t),j(t,"blur"))},handleWrapperFocus:function(t){e.passivelyActivated&&(x.value=!0,function(t){const{onWrapperFocus:n}=e;n&&Ka(n,t)}(t),j(t,"focus"))},handleMouseEnter:function(){var t;C.value=!0,"textarea"===e.type&&(null===(t=A.value)||void 0===t||t.handleMouseEnterWrapper())},handleMouseLeave:function(){var t;C.value=!1,"textarea"===e.type&&(null===(t=A.value)||void 0===t||t.handleMouseLeaveWrapper())},handleMouseDown:function(t){const{onMousedown:n}=e;n&&n(t);const{tagName:r}=t.target;if("INPUT"!==r&&"TEXTAREA"!==r){if(e.resizable){const{value:e}=a;if(e){const{left:n,top:r,width:i,height:o}=e.getBoundingClientRect(),a=14;if(n+i-a<t.clientX&&t.clientX<n+i&&r+o-a<t.clientY&&t.clientY<r+o)return}}t.preventDefault(),x.value||V()}},handleChange:function(e,t){N(e,t,"change")},handleClick:function(t){!function(t){const{onClick:n}=e;n&&Ka(n,t)}(t)},handleClear:function(t){!function(t){const{onClear:n}=e;n&&Ka(n,t)}(t),H()},handlePasswordToggleClick:function(){b.value||"click"===F.value&&(I.value=!I.value)},handlePasswordToggleMousedown:function(e){if(b.value)return;e.preventDefault();const t=e=>{e.preventDefault(),dl("mouseup",document,t)};if(ul("mouseup",document,t),"mousedown"!==F.value)return;I.value=!0;const n=()=>{I.value=!1,dl("mouseup",document,n)};ul("mouseup",document,n)},handleWrapperKeydown:function(t){switch(e.onKeydown&&Ka(e.onKeydown,t),t.key){case"Escape":Q();break;case"Enter":!function(t){var n,r;if(e.passivelyActivated){const{value:i}=B;if(i)return void(e.internalDeactivateOnEnter&&Q());t.preventDefault(),"textarea"===e.type?null===(n=s.value)||void 0===n||n.focus():null===(r=u.value)||void 0===r||r.focus()}}(t)}},handleWrapperKeyup:function(t){e.onKeyup&&Ka(e.onKeyup,t)},handleTextAreaMirrorResize:function(){(()=>{var t,n;if("textarea"===e.type){const{autosize:r}=e;if(r&&(O.value=null===(n=null===(t=A.value)||void 0===t?void 0:t.$el)||void 0===n?void 0:n.offsetWidth),!s.value)return;if("boolean"==typeof r)return;const{paddingTop:i,paddingBottom:o,lineHeight:a}=window.getComputedStyle(s.value),c=Number(i.slice(0,-2)),u=Number(o.slice(0,-2)),d=Number(a.slice(0,-2)),{value:h}=l;if(!h)return;if(r.minRows){const e=`${c+u+d*Math.max(r.minRows,1)}px`;h.style.minHeight=e}if(r.maxRows){const e=`${c+u+d*r.maxRows}px`;h.style.maxHeight=e}}})()},getTextareaScrollContainer:()=>s.value,mergedTheme:o,cssVars:r?void 0:$,themeClass:null==J?void 0:J.themeClass,onRender:null==J?void 0:J.onRender})},render(){var e,t;const{mergedClsPrefix:n,mergedStatus:r,themeClass:i,type:o,countGraphemes:a,onRender:s}=this,l=this.$slots;return null==s||s(),to("div",{ref:"wrapperElRef",class:[`${n}-input`,i,r&&`${n}-input--${r}-status`,{[`${n}-input--rtl`]:this.rtlEnabled,[`${n}-input--disabled`]:this.mergedDisabled,[`${n}-input--textarea`]:"textarea"===o,[`${n}-input--resizable`]:this.resizable&&!this.autosize,[`${n}-input--autosize`]:this.autosize,[`${n}-input--round`]:this.round&&!("textarea"===o),[`${n}-input--pair`]:this.pair,[`${n}-input--focus`]:this.mergedFocus,[`${n}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:this.mergedDisabled||!this.passivelyActivated||this.activated?void 0:0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.handleWrapperKeyup,onKeydown:this.handleWrapperKeydown},to("div",{class:`${n}-input-wrapper`},os(l.prefix,(e=>e&&to("div",{class:`${n}-input__prefix`},e))),"textarea"===o?to(Gb,{ref:"textareaScrollbarInstRef",class:`${n}-input__textarea`,container:this.getTextareaScrollContainer,triggerDisplayManually:!0,useUnifiedContainer:!0,internalHoistYRail:!0},{default:()=>{var e,t;const{textAreaScrollContainerWidth:r}=this,i={width:this.autosize&&r&&`${r}px`};return to(di,null,to("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:[`${n}-input__textarea-el`,null===(e=this.inputProps)||void 0===e?void 0:e.class],autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:a?void 0:this.maxlength,minlength:a?void 0:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:[this.textDecorationStyle[0],null===(t=this.inputProps)||void 0===t?void 0:t.style,i],onBlur:this.handleInputBlur,onFocus:e=>{this.handleInputFocus(e,2)},onInput:this.handleInput,onChange:this.handleChange,onScroll:this.handleTextAreaScroll})),this.showPlaceholder1?to("div",{class:`${n}-input__placeholder`,style:[this.placeholderStyle,i],key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?to(au,{onResize:this.handleTextAreaMirrorResize},{default:()=>to("div",{ref:"textareaMirrorElRef",class:`${n}-input__textarea-mirror`,key:"mirror"})}):null)}}):to("div",{class:`${n}-input__input`},to("input",Object.assign({type:"password"===o&&this.mergedShowPasswordOn&&this.passwordVisible?"text":o},this.inputProps,{ref:"inputElRef",class:[`${n}-input__input-el`,null===(e=this.inputProps)||void 0===e?void 0:e.class],style:[this.textDecorationStyle[0],null===(t=this.inputProps)||void 0===t?void 0:t.style],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:a?void 0:this.maxlength,minlength:a?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:e=>{this.handleInputFocus(e,0)},onInput:e=>{this.handleInput(e,0)},onChange:e=>{this.handleChange(e,0)}})),this.showPlaceholder1?to("div",{class:`${n}-input__placeholder`},to("span",null,this.mergedPlaceholder[0])):null,this.autosize?to("div",{class:`${n}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"}," "):null),!this.pair&&os(l.suffix,(e=>e||this.clearable||this.showCount||this.mergedShowPasswordOn||void 0!==this.loading?to("div",{class:`${n}-input__suffix`},[os(l["clear-icon-placeholder"],(e=>(this.clearable||e)&&to(Pw,{clsPrefix:n,show:this.showClearButton,onClear:this.handleClear},{placeholder:()=>e,icon:()=>{var e,t;return null===(t=(e=this.$slots)["clear-icon"])||void 0===t?void 0:t.call(e)}}))),this.internalLoadingBeforeSuffix?null:e,void 0!==this.loading?to(Tw,{clsPrefix:n,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.internalLoadingBeforeSuffix?e:null,this.showCount&&"textarea"!==this.type?to($w,null,{default:e=>{var t;return null===(t=l.count)||void 0===t?void 0:t.call(l,e)}}):null,this.mergedShowPasswordOn&&"password"===this.type?to("div",{class:`${n}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},this.passwordVisible?rs(l["password-visible-icon"],(()=>[to(py,{clsPrefix:n},{default:()=>to(Vv,null)})])):rs(l["password-invisible-icon"],(()=>[to(py,{clsPrefix:n},{default:()=>to(Wv,null)})]))):null]):null))),this.pair?to("span",{class:`${n}-input__separator`},rs(l.separator,(()=>[this.separator]))):null,this.pair?to("div",{class:`${n}-input-wrapper`},to("div",{class:`${n}-input__input`},to("input",{ref:"inputEl2Ref",type:this.type,class:`${n}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:a?void 0:this.maxlength,minlength:a?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:e=>{this.handleInputFocus(e,1)},onInput:e=>{this.handleInput(e,1)},onChange:e=>{this.handleChange(e,1)}}),this.showPlaceholder2?to("div",{class:`${n}-input__placeholder`},to("span",null,this.mergedPlaceholder[1])):null),os(l.suffix,(e=>(this.clearable||e)&&to("div",{class:`${n}-input__suffix`},[this.clearable&&to(Pw,{clsPrefix:n,show:this.showClearButton,onClear:this.handleClear},{icon:()=>{var e;return null===(e=l["clear-icon"])||void 0===e?void 0:e.call(l)},placeholder:()=>{var e;return null===(e=l["clear-icon-placeholder"])||void 0===e?void 0:e.call(l)}}),e])))):null,this.mergedBordered?to("div",{class:`${n}-input__border`}):null,this.mergedBordered?to("div",{class:`${n}-input__state-border`}):null,this.showCount&&"textarea"===o?to($w,null,{default:e=>{var t;const{renderCount:n}=this;return n?n(e):null===(t=l.count)||void 0===t?void 0:t.call(l,e)}}):null)}});const tx={name:"AutoComplete",common:Lb,peers:{InternalSelectMenu:Yb,Input:qw},self:function(e){const{boxShadow2:t}=e;return{menuBoxShadow:t}}};function nx(e){var t,n;if("string"==typeof e)return{label:e,value:e};if("group"===e.type){return{type:"group",label:null!==(t=e.label)&&void 0!==t?t:e.name,value:null!==(n=e.value)&&void 0!==n?n:e.name,key:e.key||e.name,children:e.children.map((e=>nx(e)))}}return e}const rx=Ls([Us("auto-complete","\n z-index: auto;\n position: relative;\n display: inline-flex;\n width: 100%;\n "),Us("auto-complete-menu","\n margin: 4px 0;\n box-shadow: var(--n-menu-box-shadow);\n ",[ew({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),ix=Dn({name:"AutoComplete",props:Object.assign(Object.assign({},sf.props),{to:kl.propTo,menuProps:Object,append:Boolean,bordered:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},defaultValue:{type:String,default:null},loading:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},placeholder:String,placement:{type:String,default:"bottom-start"},value:String,blurAfterSelect:Boolean,clearAfterSelect:Boolean,getShow:Function,showEmpty:Boolean,inputProps:Object,renderOption:Function,renderLabel:Function,size:String,options:{type:Array,default:()=>[]},zIndex:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onSelect:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],onInput:[Function,Array]}),setup(e){const{mergedBorderedRef:t,namespaceRef:n,mergedClsPrefixRef:r,inlineThemeDisabled:i}=cf(e),o=Lu(e),{mergedSizeRef:a,mergedDisabledRef:s,mergedStatusRef:l}=o,c=bt(null),u=bt(null),d=bt(e.defaultValue),h=xl(Tt(e,"value"),d),p=bt(!1),A=bt(!1),f=sf("AutoComplete","-auto-complete",rx,tx,e,r),m=eo((()=>e.options.map(nx))),g=eo((()=>{const{getShow:t}=e;return t?t(h.value||""):!!h.value})),v=eo((()=>g.value&&p.value&&(!!e.showEmpty||!!m.value.length))),y=eo((()=>Wy(m.value,Qw("value","children"))));function b(t){const{"onUpdate:value":n,onUpdateValue:r,onInput:i}=e,{nTriggerFormInput:a,nTriggerFormChange:s}=o;r&&Ka(r,t),n&&Ka(n,t),i&&Ka(i,t),d.value=t,a(),s()}function w(t){void 0!==(null==t?void 0:t.value)&&(function(t){const{onSelect:n}=e,{nTriggerFormInput:r,nTriggerFormChange:i}=o;n&&Ka(n,t),r(),i()}(t.value),e.clearAfterSelect?b(null):void 0!==t.label&&b(e.append?`${h.value}${t.label}`:t.label),p.value=!1,e.blurAfterSelect&&function(){var e,t;(null===(e=c.value)||void 0===e?void 0:e.contains(document.activeElement))&&(null===(t=document.activeElement)||void 0===t||t.blur())}())}const x=eo((()=>{const{common:{cubicBezierEaseInOut:e},self:{menuBoxShadow:t}}=f.value;return{"--n-menu-box-shadow":t,"--n-bezier":e}})),C=i?Fv("auto-complete",void 0,x,e):void 0,S=bt(null),B={focus:()=>{var e;null===(e=S.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=S.value)||void 0===e||e.blur()}};return{focus:B.focus,blur:B.blur,inputInstRef:S,uncontrolledValue:d,mergedValue:h,isMounted:Cl(),adjustedTo:kl(e),menuInstRef:u,triggerElRef:c,treeMate:y,mergedSize:a,mergedDisabled:s,active:v,mergedStatus:l,handleClear:function(){b(null)},handleFocus:function(t){p.value=!0,function(t){const{onFocus:n}=e,{nTriggerFormFocus:r}=o;n&&Ka(n,t),r()}(t)},handleBlur:function(t){p.value=!1,function(t){const{onBlur:n}=e,{nTriggerFormBlur:r}=o;n&&Ka(n,t),r()}(t)},handleInput:function(e){p.value=!0,b(e)},handleToggle:function(e){w(e.rawNode)},handleClickOutsideMenu:function(e){var t;(null===(t=c.value)||void 0===t?void 0:t.contains(ma(e)))||(p.value=!1)},handleCompositionStart:function(){A.value=!0},handleCompositionEnd:function(){window.setTimeout((()=>{A.value=!1}),0)},handleKeyDown:function(e){var t,n,r;switch(e.key){case"Enter":if(!A.value){const n=null===(t=u.value)||void 0===t?void 0:t.getPendingTmNode();n&&(w(n.rawNode),e.preventDefault())}break;case"ArrowDown":null===(n=u.value)||void 0===n||n.next();break;case"ArrowUp":null===(r=u.value)||void 0===r||r.prev()}},mergedTheme:f,cssVars:i?void 0:x,themeClass:null==C?void 0:C.themeClass,onRender:null==C?void 0:C.onRender,mergedBordered:t,namespace:n,mergedClsPrefix:r}},render(){const{mergedClsPrefix:e}=this;return to("div",{class:`${e}-auto-complete`,ref:"triggerElRef",onKeydown:this.handleKeyDown,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd},to(Vl,null,{default:()=>[to(Wl,null,{default:()=>{if(this.$slots.default)return es(this.$slots,"default",{handleInput:this.handleInput,handleFocus:this.handleFocus,handleBlur:this.handleBlur,value:this.mergedValue});const{mergedTheme:e}=this;return to(ex,{ref:"inputInstRef",status:this.mergedStatus,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,bordered:this.mergedBordered,value:this.mergedValue,placeholder:this.placeholder,size:this.mergedSize,disabled:this.mergedDisabled,clearable:this.clearable,loading:this.loading,inputProps:this.inputProps,onClear:this.handleClear,onFocus:this.handleFocus,onUpdateValue:this.handleInput,onBlur:this.handleBlur},{suffix:()=>{var e,t;return null===(t=(e=this.$slots).suffix)||void 0===t?void 0:t.call(e)},prefix:()=>{var e,t;return null===(t=(e=this.$slots).prefix)||void 0===t?void 0:t.call(e)}})}}),to(gc,{show:this.active,to:this.adjustedTo,containerClass:this.namespace,zIndex:this.zIndex,teleportDisabled:this.adjustedTo===kl.tdkey,placement:this.placement,width:"target"},{default:()=>to(co,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{var t;if(null===(t=this.onRender)||void 0===t||t.call(this),!this.active)return null;const{menuProps:n}=this;return En(to(nw,Object.assign({},n,{clsPrefix:e,ref:"menuInstRef",theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,"auto-pending":!0,class:[`${e}-auto-complete-menu`,this.themeClass,null==n?void 0:n.class],style:[null==n?void 0:n.style,this.cssVars],treeMate:this.treeMate,multiple:!1,renderLabel:this.renderLabel,renderOption:this.renderOption,size:"medium",onToggle:this.handleToggle}),{empty:()=>{var e,t;return null===(t=(e=this.$slots).empty)||void 0===t?void 0:t.call(e)}}),[[Yl,this.handleClickOutsideMenu,void 0,{capture:!0}]])}})})]}))}}),ox=Ks&&"loading"in document.createElement("img"),ax=new WeakMap,sx=new WeakMap,lx=new WeakMap,cx=(e,t,n)=>{if(!e)return()=>{};const r=((e={})=>{var t;const{root:n=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):null!==(t=e.threshold)&&void 0!==t?t:"0"}`,options:Object.assign(Object.assign({},e),{root:("string"==typeof n?document.querySelector(n):n)||document.documentElement})}})(t),{root:i}=r.options;let o;const a=ax.get(i);let s,l;a?o=a:(o=new Map,ax.set(i,o)),o.has(r.hash)?(l=o.get(r.hash),l[1].has(e)||(s=l[0],l[1].add(e),s.observe(e))):(s=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=sx.get(e.target),n=lx.get(e.target);t&&t(),n&&(n.value=!0)}}))}),r.options),s.observe(e),l=[s,new Set([e])],o.set(r.hash,l));let c=!1;const u=()=>{c||(sx.delete(e),lx.delete(e),c=!0,l[1].has(e)&&(l[0].unobserve(e),l[1].delete(e)),l[1].size<=0&&o.delete(r.hash),o.size||ax.delete(i))};return sx.set(e,u),lx.set(e,n),u},ux={name:"Avatar",common:Lb,self:e=>{const{borderRadius:t,avatarColor:n,cardColor:r,fontSize:i,heightTiny:o,heightSmall:a,heightMedium:s,heightLarge:l,heightHuge:c,modalColor:u,popoverColor:d}=e;return{borderRadius:t,fontSize:i,border:`2px solid ${r}`,heightTiny:o,heightSmall:a,heightMedium:s,heightLarge:l,heightHuge:c,color:Ra(r,n),colorModal:Ra(u,n),colorPopover:Ra(d,n)}}},dx=Us("avatar","\n width: var(--n-merged-size);\n height: var(--n-merged-size);\n color: #FFF;\n font-size: var(--n-font-size);\n display: inline-flex;\n position: relative;\n overflow: hidden;\n text-align: center;\n border: var(--n-border);\n border-radius: var(--n-border-radius);\n --n-merged-color: var(--n-color);\n background-color: var(--n-merged-color);\n transition:\n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n",[Hs(Ls("&","--n-merged-color: var(--n-color-modal);")),Qs(Ls("&","--n-merged-color: var(--n-color-popover);")),Ls("img","\n width: 100%;\n height: 100%;\n "),zs("text","\n white-space: nowrap;\n display: inline-block;\n position: absolute;\n left: 50%;\n top: 50%;\n "),Us("icon","\n vertical-align: bottom;\n font-size: calc(var(--n-merged-size) - 6px);\n "),zs("text","line-height: 1.25")]),hx=Dn({name:"Avatar",props:Object.assign(Object.assign({},sf.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=bt(!1);let i=null;const o=bt(null),a=bt(null),s=rr("n-avatar-group",null),l=eo((()=>{const{size:t}=e;if(t)return t;const{size:n}=s||{};return n||"medium"})),c=sf("Avatar","-avatar",dx,ux,e,t),u=rr(_w,null),d=eo((()=>{if(s)return!0;const{round:t,circle:n}=e;return void 0!==t||void 0!==n?t||n:!!u&&u.roundRef.value})),h=eo((()=>!!s||(e.bordered||!1))),p=eo((()=>{const t=l.value,n=d.value,r=h.value,{color:i}=e,{self:{borderRadius:o,fontSize:a,color:s,border:u,colorModal:p,colorPopover:A},common:{cubicBezierEaseInOut:f}}=c.value;let m;return m="number"==typeof t?`${t}px`:c.value.self[Gs("height",t)],{"--n-font-size":a,"--n-border":r?u:"none","--n-border-radius":n?"50%":o,"--n-color":i||s,"--n-color-modal":i||p,"--n-color-popover":i||A,"--n-bezier":f,"--n-merged-size":`var(--n-avatar-size-override, ${m})`}})),A=n?Fv("avatar",eo((()=>{const t=l.value,n=d.value,r=h.value,{color:i}=e;let o="";return t&&(o+="number"==typeof t?`a${t}`:t[0]),n&&(o+="b"),r&&(o+="c"),i&&(o+=hs(i)),o})),p,e):void 0,f=bt(!e.lazy);vn((()=>{if(e.lazy&&e.intersectionObserverOptions){let t;const n=Dr((()=>{null==t||t(),t=void 0,e.lazy&&(t=cx(a.value,e.intersectionObserverOptions,f))}));wn((()=>{n(),null==t||t()}))}})),Ir((()=>{var t;return e.src||(null===(t=e.imgProps)||void 0===t?void 0:t.src)}),(()=>{r.value=!1}));const m=bt(!e.lazy);return{textRef:o,selfRef:a,mergedRoundRef:d,mergedClsPrefix:t,fitTextTransform:()=>{const{value:e}=o;if(e&&(null===i||i!==e.innerHTML)){i=e.innerHTML;const{value:t}=a;if(t){const{offsetWidth:n,offsetHeight:r}=t,{offsetWidth:i,offsetHeight:o}=e,a=.9,s=Math.min(n/i*a,r/o*a,1);e.style.transform=`translateX(-50%) translateY(-50%) scale(${s})`}}},cssVars:n?void 0:p,themeClass:null==A?void 0:A.themeClass,onRender:null==A?void 0:A.onRender,hasLoadError:r,shouldStartLoading:f,loaded:m,mergedOnError:t=>{if(!f.value)return;r.value=!0;const{onError:n,imgProps:{onError:i}={}}=e;null==n||n(t),null==i||i(t)},mergedOnLoad:t=>{const{onLoad:n,imgProps:{onLoad:r}={}}=e;null==n||n(t),null==r||r(t),m.value=!0}}},render(){var e,t;const{$slots:n,src:r,mergedClsPrefix:i,lazy:o,onRender:a,loaded:s,hasLoadError:l,imgProps:c={}}=this;let u;null==a||a();const d=!s&&!l&&(this.renderPlaceholder?this.renderPlaceholder():null===(t=(e=this.$slots).placeholder)||void 0===t?void 0:t.call(e));return u=this.hasLoadError?this.renderFallback?this.renderFallback():rs(n.fallback,(()=>[to("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})])):os(n.default,(e=>{if(e)return to(au,{onResize:this.fitTextTransform},{default:()=>to("span",{ref:"textRef",class:`${i}-avatar__text`},e)});if(r||c.src){const e=this.src||c.src;return to("img",Object.assign(Object.assign({},c),{loading:ox&&!this.intersectionObserverOptions&&o?"lazy":"eager",src:o&&this.intersectionObserverOptions?this.shouldStartLoading?e:void 0:e,"data-image-src":e,onLoad:this.mergedOnLoad,onError:this.mergedOnError,style:[c.style||"",{objectFit:this.objectFit},d?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}})),to("span",{ref:"selfRef",class:[`${i}-avatar`,this.themeClass],style:this.cssVars},u,o&&d)}}),px={fontWeightActive:"400"},Ax={name:"Breadcrumb",common:Lb,self:e=>{const{fontSize:t,textColor3:n,textColor2:r,borderRadius:i,buttonColor2Hover:o,buttonColor2Pressed:a}=e;return Object.assign(Object.assign({},px),{fontSize:t,itemLineHeight:"1.25",itemTextColor:n,itemTextColorHover:r,itemTextColorPressed:r,itemTextColorActive:r,itemBorderRadius:i,itemColorHover:o,itemColorPressed:a,separatorColor:n})}},fx=Us("breadcrumb","\n white-space: nowrap;\n cursor: default;\n line-height: var(--n-item-line-height);\n",[Ls("ul","\n list-style: none;\n padding: 0;\n margin: 0;\n "),Ls("a","\n color: inherit;\n text-decoration: inherit;\n "),Us("breadcrumb-item","\n font-size: var(--n-font-size);\n transition: color .3s var(--n-bezier);\n display: inline-flex;\n align-items: center;\n ",[Us("icon","\n font-size: 18px;\n vertical-align: -.2em;\n transition: color .3s var(--n-bezier);\n color: var(--n-item-text-color);\n "),Ls("&:not(:last-child)",[Ns("clickable",[zs("link","\n cursor: pointer;\n ",[Ls("&:hover","\n background-color: var(--n-item-color-hover);\n "),Ls("&:active","\n background-color: var(--n-item-color-pressed); \n ")])])]),zs("link","\n padding: 4px;\n border-radius: var(--n-item-border-radius);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n color: var(--n-item-text-color);\n position: relative;\n ",[Ls("&:hover","\n color: var(--n-item-text-color-hover);\n ",[Us("icon","\n color: var(--n-item-text-color-hover);\n ")]),Ls("&:active","\n color: var(--n-item-text-color-pressed);\n ",[Us("icon","\n color: var(--n-item-text-color-pressed);\n ")])]),zs("separator","\n margin: 0 8px;\n color: var(--n-separator-color);\n transition: color .3s var(--n-bezier);\n user-select: none;\n -webkit-user-select: none;\n "),Ls("&:last-child",[zs("link","\n font-weight: var(--n-font-weight-active);\n cursor: unset;\n color: var(--n-item-text-color-active);\n ",[Us("icon","\n color: var(--n-item-text-color-active);\n ")]),zs("separator","\n display: none;\n ")])])]),mx="n-breadcrumb",gx=Dn({name:"Breadcrumb",props:Object.assign(Object.assign({},sf.props),{separator:{type:String,default:"/"}}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Breadcrumb","-breadcrumb",fx,Ax,e,t);nr(mx,{separatorRef:Tt(e,"separator"),mergedClsPrefixRef:t});const i=eo((()=>{const{common:{cubicBezierEaseInOut:e},self:{separatorColor:t,itemTextColor:n,itemTextColorHover:i,itemTextColorPressed:o,itemTextColorActive:a,fontSize:s,fontWeightActive:l,itemBorderRadius:c,itemColorHover:u,itemColorPressed:d,itemLineHeight:h}}=r.value;return{"--n-font-size":s,"--n-bezier":e,"--n-item-text-color":n,"--n-item-text-color-hover":i,"--n-item-text-color-pressed":o,"--n-item-text-color-active":a,"--n-separator-color":t,"--n-item-color-hover":u,"--n-item-color-pressed":d,"--n-item-border-radius":c,"--n-font-weight-active":l,"--n-item-line-height":h}})),o=n?Fv("breadcrumb",void 0,i,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:i,themeClass:null==o?void 0:o.themeClass,onRender:null==o?void 0:o.onRender}},render(){var e;return null===(e=this.onRender)||void 0===e||e.call(this),to("nav",{class:[`${this.mergedClsPrefix}-breadcrumb`,this.themeClass],style:this.cssVars,"aria-label":"Breadcrumb"},to("ul",null,this.$slots))}}),vx=Dn({name:"BreadcrumbItem",props:{separator:String,href:String,clickable:{type:Boolean,default:!0},onClick:Function},setup(e,{slots:t}){const n=rr(mx,null);if(!n)return()=>null;const{separatorRef:r,mergedClsPrefixRef:i}=n,o=((e=(Ks?window:null))=>{const t=()=>{const{hash:t,host:n,hostname:r,href:i,origin:o,pathname:a,port:s,protocol:l,search:c}=(null==e?void 0:e.location)||{};return{hash:t,host:n,hostname:r,href:i,origin:o,pathname:a,port:s,protocol:l,search:c}},n=()=>{r.value=t()},r=bt(t());return vn((()=>{e&&(e.addEventListener("popstate",n),e.addEventListener("hashchange",n))})),xn((()=>{e&&(e.removeEventListener("popstate",n),e.removeEventListener("hashchange",n))})),r})(),a=eo((()=>e.href?"a":"span")),s=eo((()=>o.value.href===e.href?"location":null));return()=>{const{value:n}=i;return to("li",{class:[`${n}-breadcrumb-item`,e.clickable&&`${n}-breadcrumb-item--clickable`]},to(a.value,{class:`${n}-breadcrumb-item__link`,"aria-current":s.value,href:e.href,onClick:e.onClick},t),to("span",{class:`${n}-breadcrumb-item__separator`,"aria-hidden":"true"},rs(t.separator,(()=>{var t;return[null!==(t=e.separator)&&void 0!==t?t:r.value]}))))}}});function yx(e){return Ra(e,[255,255,255,.16])}function bx(e){return Ra(e,[0,0,0,.12])}const wx="n-button-group",xx={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"},Cx={name:"Button",common:Lb,self:e=>{const{heightTiny:t,heightSmall:n,heightMedium:r,heightLarge:i,borderRadius:o,fontSizeTiny:a,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:c,opacityDisabled:u,textColor2:d,textColor3:h,primaryColorHover:p,primaryColorPressed:A,borderColor:f,primaryColor:m,baseColor:g,infoColor:v,infoColorHover:y,infoColorPressed:b,successColor:w,successColorHover:x,successColorPressed:C,warningColor:S,warningColorHover:B,warningColorPressed:_,errorColor:E,errorColorHover:M,errorColorPressed:P,fontWeight:T,buttonColor2:D,buttonColor2Hover:F,buttonColor2Pressed:I,fontWeightStrong:k}=e;return Object.assign(Object.assign({},xx),{heightTiny:t,heightSmall:n,heightMedium:r,heightLarge:i,borderRadiusTiny:o,borderRadiusSmall:o,borderRadiusMedium:o,borderRadiusLarge:o,fontSizeTiny:a,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:c,opacityDisabled:u,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:D,colorSecondaryHover:F,colorSecondaryPressed:I,colorTertiary:D,colorTertiaryHover:F,colorTertiaryPressed:I,colorQuaternary:"#0000",colorQuaternaryHover:F,colorQuaternaryPressed:I,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:d,textColorTertiary:h,textColorHover:p,textColorPressed:A,textColorFocus:p,textColorDisabled:d,textColorText:d,textColorTextHover:p,textColorTextPressed:A,textColorTextFocus:p,textColorTextDisabled:d,textColorGhost:d,textColorGhostHover:p,textColorGhostPressed:A,textColorGhostFocus:p,textColorGhostDisabled:d,border:`1px solid ${f}`,borderHover:`1px solid ${p}`,borderPressed:`1px solid ${A}`,borderFocus:`1px solid ${p}`,borderDisabled:`1px solid ${f}`,rippleColor:m,colorPrimary:m,colorHoverPrimary:p,colorPressedPrimary:A,colorFocusPrimary:p,colorDisabledPrimary:m,textColorPrimary:g,textColorHoverPrimary:g,textColorPressedPrimary:g,textColorFocusPrimary:g,textColorDisabledPrimary:g,textColorTextPrimary:m,textColorTextHoverPrimary:p,textColorTextPressedPrimary:A,textColorTextFocusPrimary:p,textColorTextDisabledPrimary:d,textColorGhostPrimary:m,textColorGhostHoverPrimary:p,textColorGhostPressedPrimary:A,textColorGhostFocusPrimary:p,textColorGhostDisabledPrimary:m,borderPrimary:`1px solid ${m}`,borderHoverPrimary:`1px solid ${p}`,borderPressedPrimary:`1px solid ${A}`,borderFocusPrimary:`1px solid ${p}`,borderDisabledPrimary:`1px solid ${m}`,rippleColorPrimary:m,colorInfo:v,colorHoverInfo:y,colorPressedInfo:b,colorFocusInfo:y,colorDisabledInfo:v,textColorInfo:g,textColorHoverInfo:g,textColorPressedInfo:g,textColorFocusInfo:g,textColorDisabledInfo:g,textColorTextInfo:v,textColorTextHoverInfo:y,textColorTextPressedInfo:b,textColorTextFocusInfo:y,textColorTextDisabledInfo:d,textColorGhostInfo:v,textColorGhostHoverInfo:y,textColorGhostPressedInfo:b,textColorGhostFocusInfo:y,textColorGhostDisabledInfo:v,borderInfo:`1px solid ${v}`,borderHoverInfo:`1px solid ${y}`,borderPressedInfo:`1px solid ${b}`,borderFocusInfo:`1px solid ${y}`,borderDisabledInfo:`1px solid ${v}`,rippleColorInfo:v,colorSuccess:w,colorHoverSuccess:x,colorPressedSuccess:C,colorFocusSuccess:x,colorDisabledSuccess:w,textColorSuccess:g,textColorHoverSuccess:g,textColorPressedSuccess:g,textColorFocusSuccess:g,textColorDisabledSuccess:g,textColorTextSuccess:w,textColorTextHoverSuccess:x,textColorTextPressedSuccess:C,textColorTextFocusSuccess:x,textColorTextDisabledSuccess:d,textColorGhostSuccess:w,textColorGhostHoverSuccess:x,textColorGhostPressedSuccess:C,textColorGhostFocusSuccess:x,textColorGhostDisabledSuccess:w,borderSuccess:`1px solid ${w}`,borderHoverSuccess:`1px solid ${x}`,borderPressedSuccess:`1px solid ${C}`,borderFocusSuccess:`1px solid ${x}`,borderDisabledSuccess:`1px solid ${w}`,rippleColorSuccess:w,colorWarning:S,colorHoverWarning:B,colorPressedWarning:_,colorFocusWarning:B,colorDisabledWarning:S,textColorWarning:g,textColorHoverWarning:g,textColorPressedWarning:g,textColorFocusWarning:g,textColorDisabledWarning:g,textColorTextWarning:S,textColorTextHoverWarning:B,textColorTextPressedWarning:_,textColorTextFocusWarning:B,textColorTextDisabledWarning:d,textColorGhostWarning:S,textColorGhostHoverWarning:B,textColorGhostPressedWarning:_,textColorGhostFocusWarning:B,textColorGhostDisabledWarning:S,borderWarning:`1px solid ${S}`,borderHoverWarning:`1px solid ${B}`,borderPressedWarning:`1px solid ${_}`,borderFocusWarning:`1px solid ${B}`,borderDisabledWarning:`1px solid ${S}`,rippleColorWarning:S,colorError:E,colorHoverError:M,colorPressedError:P,colorFocusError:M,colorDisabledError:E,textColorError:g,textColorHoverError:g,textColorPressedError:g,textColorFocusError:g,textColorDisabledError:g,textColorTextError:E,textColorTextHoverError:M,textColorTextPressedError:P,textColorTextFocusError:M,textColorTextDisabledError:d,textColorGhostError:E,textColorGhostHoverError:M,textColorGhostPressedError:P,textColorGhostFocusError:M,textColorGhostDisabledError:E,borderError:`1px solid ${E}`,borderHoverError:`1px solid ${M}`,borderPressedError:`1px solid ${P}`,borderFocusError:`1px solid ${M}`,borderDisabledError:`1px solid ${E}`,rippleColorError:E,waveOpacity:"0.6",fontWeight:T,fontWeightStrong:k})}},Sx=Ls([Us("button","\n margin: 0;\n font-weight: var(--n-font-weight);\n line-height: 1;\n font-family: inherit;\n padding: var(--n-padding);\n height: var(--n-height);\n font-size: var(--n-font-size);\n border-radius: var(--n-border-radius);\n color: var(--n-text-color);\n background-color: var(--n-color);\n width: var(--n-width);\n white-space: nowrap;\n outline: none;\n position: relative;\n z-index: auto;\n border: none;\n display: inline-flex;\n flex-wrap: nowrap;\n flex-shrink: 0;\n align-items: center;\n justify-content: center;\n user-select: none;\n -webkit-user-select: none;\n text-align: center;\n cursor: pointer;\n text-decoration: none;\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n opacity .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[Ns("color",[zs("border",{borderColor:"var(--n-border-color)"}),Ns("disabled",[zs("border",{borderColor:"var(--n-border-color-disabled)"})]),js("disabled",[Ls("&:focus",[zs("state-border",{borderColor:"var(--n-border-color-focus)"})]),Ls("&:hover",[zs("state-border",{borderColor:"var(--n-border-color-hover)"})]),Ls("&:active",[zs("state-border",{borderColor:"var(--n-border-color-pressed)"})]),Ns("pressed",[zs("state-border",{borderColor:"var(--n-border-color-pressed)"})])])]),Ns("disabled",{backgroundColor:"var(--n-color-disabled)",color:"var(--n-text-color-disabled)"},[zs("border",{border:"var(--n-border-disabled)"})]),js("disabled",[Ls("&:focus",{backgroundColor:"var(--n-color-focus)",color:"var(--n-text-color-focus)"},[zs("state-border",{border:"var(--n-border-focus)"})]),Ls("&:hover",{backgroundColor:"var(--n-color-hover)",color:"var(--n-text-color-hover)"},[zs("state-border",{border:"var(--n-border-hover)"})]),Ls("&:active",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[zs("state-border",{border:"var(--n-border-pressed)"})]),Ns("pressed",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[zs("state-border",{border:"var(--n-border-pressed)"})])]),Ns("loading","cursor: wait;"),Us("base-wave","\n pointer-events: none;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n animation-iteration-count: 1;\n animation-duration: var(--n-ripple-duration);\n animation-timing-function: var(--n-bezier-ease-out), var(--n-bezier-ease-out);\n ",[Ns("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),Ks&&"MozBoxSizing"in document.createElement("div").style?Ls("&::moz-focus-inner",{border:0}):null,zs("border, state-border","\n position: absolute;\n left: 0;\n top: 0;\n right: 0;\n bottom: 0;\n border-radius: inherit;\n transition: border-color .3s var(--n-bezier);\n pointer-events: none;\n "),zs("border",{border:"var(--n-border)"}),zs("state-border",{border:"var(--n-border)",borderColor:"#0000",zIndex:1}),zs("icon","\n margin: var(--n-icon-margin);\n margin-left: 0;\n height: var(--n-icon-size);\n width: var(--n-icon-size);\n max-width: var(--n-icon-size);\n font-size: var(--n-icon-size);\n position: relative;\n flex-shrink: 0;\n ",[Us("icon-slot","\n height: var(--n-icon-size);\n width: var(--n-icon-size);\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n display: flex;\n align-items: center;\n justify-content: center;\n ",[vy({top:"50%",originalTransform:"translateY(-50%)"})]),function({duration:e=".2s",delay:t=".1s"}={}){return[Ls("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),Ls("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from","\n opacity: 0!important;\n margin-left: 0!important;\n margin-right: 0!important;\n "),Ls("&.fade-in-width-expand-transition-leave-active",`\n overflow: hidden;\n transition:\n opacity ${e} ${Ow},\n max-width ${e} ${Ow} ${t},\n margin-left ${e} ${Ow} ${t},\n margin-right ${e} ${Ow} ${t};\n `),Ls("&.fade-in-width-expand-transition-enter-active",`\n overflow: hidden;\n transition:\n opacity ${e} ${Ow} ${t},\n max-width ${e} ${Ow},\n margin-left ${e} ${Ow},\n margin-right ${e} ${Ow};\n `)]}()]),zs("content","\n display: flex;\n align-items: center;\n flex-wrap: nowrap;\n min-width: 0;\n ",[Ls("~",[zs("icon",{margin:"var(--n-icon-margin)",marginRight:0})])]),Ns("block","\n display: flex;\n width: 100%;\n "),Ns("dashed",[zs("border, state-border",{borderStyle:"dashed !important"})]),Ns("disabled",{cursor:"not-allowed",opacity:"var(--n-opacity-disabled)"})]),Ls("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--n-ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)"}}),Ls("@keyframes button-wave-opacity",{from:{opacity:"var(--n-wave-opacity)"},to:{opacity:0}})]),Bx=Dn({name:"Button",props:Object.assign(Object.assign({},sf.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,renderIcon:Function,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},bordered:{type:Boolean,default:!0},onClick:[Function,Array],nativeFocusBehavior:{type:Boolean,default:!Ww}}),setup(e){const t=bt(null),n=bt(null),r=bt(!1),i=Zs((()=>!e.quaternary&&!e.tertiary&&!e.secondary&&!e.text&&(!e.color||e.ghost||e.dashed)&&e.bordered)),o=rr(wx,{}),{mergedSizeRef:a}=Lu({},{defaultSize:"medium",mergedSize:t=>{const{size:n}=e;if(n)return n;const{size:r}=o;if(r)return r;const{mergedSize:i}=t||{};return i?i.value:"medium"}}),s=eo((()=>e.focusable&&!e.disabled)),{inlineThemeDisabled:l,mergedClsPrefixRef:c,mergedRtlRef:u}=cf(e),d=sf("Button","-button",Sx,Cx,e,c),h=Iv("Button",u,c),p=eo((()=>{const t=d.value,{common:{cubicBezierEaseInOut:n,cubicBezierEaseOut:r},self:i}=t,{rippleDuration:o,opacityDisabled:s,fontWeight:l,fontWeightStrong:c}=i,u=a.value,{dashed:h,type:p,ghost:A,text:f,color:m,round:g,circle:v,textColor:y,secondary:b,tertiary:w,quaternary:x,strong:C}=e,S={"font-weight":C?c:l};let B={"--n-color":"initial","--n-color-hover":"initial","--n-color-pressed":"initial","--n-color-focus":"initial","--n-color-disabled":"initial","--n-ripple-color":"initial","--n-text-color":"initial","--n-text-color-hover":"initial","--n-text-color-pressed":"initial","--n-text-color-focus":"initial","--n-text-color-disabled":"initial"};const _="tertiary"===p,E="default"===p,M=_?"default":p;if(f){const e=y||m;B={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":"#0000","--n-text-color":e||i[Gs("textColorText",M)],"--n-text-color-hover":e?yx(e):i[Gs("textColorTextHover",M)],"--n-text-color-pressed":e?bx(e):i[Gs("textColorTextPressed",M)],"--n-text-color-focus":e?yx(e):i[Gs("textColorTextHover",M)],"--n-text-color-disabled":e||i[Gs("textColorTextDisabled",M)]}}else if(A||h){const e=y||m;B={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":m||i[Gs("rippleColor",M)],"--n-text-color":e||i[Gs("textColorGhost",M)],"--n-text-color-hover":e?yx(e):i[Gs("textColorGhostHover",M)],"--n-text-color-pressed":e?bx(e):i[Gs("textColorGhostPressed",M)],"--n-text-color-focus":e?yx(e):i[Gs("textColorGhostHover",M)],"--n-text-color-disabled":e||i[Gs("textColorGhostDisabled",M)]}}else if(b){const e=E?i.textColor:_?i.textColorTertiary:i[Gs("color",M)],t=m||e,n="default"!==p&&"tertiary"!==p;B={"--n-color":n?Ua(t,{alpha:Number(i.colorOpacitySecondary)}):i.colorSecondary,"--n-color-hover":n?Ua(t,{alpha:Number(i.colorOpacitySecondaryHover)}):i.colorSecondaryHover,"--n-color-pressed":n?Ua(t,{alpha:Number(i.colorOpacitySecondaryPressed)}):i.colorSecondaryPressed,"--n-color-focus":n?Ua(t,{alpha:Number(i.colorOpacitySecondaryHover)}):i.colorSecondaryHover,"--n-color-disabled":i.colorSecondary,"--n-ripple-color":"#0000","--n-text-color":t,"--n-text-color-hover":t,"--n-text-color-pressed":t,"--n-text-color-focus":t,"--n-text-color-disabled":t}}else if(w||x){const e=E?i.textColor:_?i.textColorTertiary:i[Gs("color",M)],t=m||e;w?(B["--n-color"]=i.colorTertiary,B["--n-color-hover"]=i.colorTertiaryHover,B["--n-color-pressed"]=i.colorTertiaryPressed,B["--n-color-focus"]=i.colorSecondaryHover,B["--n-color-disabled"]=i.colorTertiary):(B["--n-color"]=i.colorQuaternary,B["--n-color-hover"]=i.colorQuaternaryHover,B["--n-color-pressed"]=i.colorQuaternaryPressed,B["--n-color-focus"]=i.colorQuaternaryHover,B["--n-color-disabled"]=i.colorQuaternary),B["--n-ripple-color"]="#0000",B["--n-text-color"]=t,B["--n-text-color-hover"]=t,B["--n-text-color-pressed"]=t,B["--n-text-color-focus"]=t,B["--n-text-color-disabled"]=t}else B={"--n-color":m||i[Gs("color",M)],"--n-color-hover":m?yx(m):i[Gs("colorHover",M)],"--n-color-pressed":m?bx(m):i[Gs("colorPressed",M)],"--n-color-focus":m?yx(m):i[Gs("colorFocus",M)],"--n-color-disabled":m||i[Gs("colorDisabled",M)],"--n-ripple-color":m||i[Gs("rippleColor",M)],"--n-text-color":y||(m?i.textColorPrimary:_?i.textColorTertiary:i[Gs("textColor",M)]),"--n-text-color-hover":y||(m?i.textColorHoverPrimary:i[Gs("textColorHover",M)]),"--n-text-color-pressed":y||(m?i.textColorPressedPrimary:i[Gs("textColorPressed",M)]),"--n-text-color-focus":y||(m?i.textColorFocusPrimary:i[Gs("textColorFocus",M)]),"--n-text-color-disabled":y||(m?i.textColorDisabledPrimary:i[Gs("textColorDisabled",M)])};let P={"--n-border":"initial","--n-border-hover":"initial","--n-border-pressed":"initial","--n-border-focus":"initial","--n-border-disabled":"initial"};P=f?{"--n-border":"none","--n-border-hover":"none","--n-border-pressed":"none","--n-border-focus":"none","--n-border-disabled":"none"}:{"--n-border":i[Gs("border",M)],"--n-border-hover":i[Gs("borderHover",M)],"--n-border-pressed":i[Gs("borderPressed",M)],"--n-border-focus":i[Gs("borderFocus",M)],"--n-border-disabled":i[Gs("borderDisabled",M)]};const{[Gs("height",u)]:T,[Gs("fontSize",u)]:D,[Gs("padding",u)]:F,[Gs("paddingRound",u)]:I,[Gs("iconSize",u)]:k,[Gs("borderRadius",u)]:O,[Gs("iconMargin",u)]:L,waveOpacity:R}=i,U={"--n-width":v&&!f?T:"initial","--n-height":f?"initial":T,"--n-font-size":D,"--n-padding":v||f?"initial":g?I:F,"--n-icon-size":k,"--n-icon-margin":L,"--n-border-radius":f?"initial":v||g?T:O};return Object.assign(Object.assign(Object.assign(Object.assign({"--n-bezier":n,"--n-bezier-ease-out":r,"--n-ripple-duration":o,"--n-opacity-disabled":s,"--n-wave-opacity":R},S),B),P),U)})),A=l?Fv("button",eo((()=>{let t="";const{dashed:n,type:r,ghost:i,text:o,color:s,round:l,circle:c,textColor:u,secondary:d,tertiary:h,quaternary:p,strong:A}=e;n&&(t+="a"),i&&(t+="b"),o&&(t+="c"),l&&(t+="d"),c&&(t+="e"),d&&(t+="f"),h&&(t+="g"),p&&(t+="h"),A&&(t+="i"),s&&(t+="j"+hs(s)),u&&(t+="k"+hs(u));const{value:f}=a;return t+="l"+f[0],t+="m"+r[0],t})),p,e):void 0;return{selfElRef:t,waveElRef:n,mergedClsPrefix:c,mergedFocusable:s,mergedSize:a,showBorder:i,enterPressed:r,rtlEnabled:h,handleMousedown:n=>{var r;s.value||n.preventDefault(),e.nativeFocusBehavior||(n.preventDefault(),e.disabled||s.value&&(null===(r=t.value)||void 0===r||r.focus({preventScroll:!0})))},handleKeydown:t=>{if("Enter"===t.key){if(!e.keyboard||e.loading)return void t.preventDefault();r.value=!0}},handleBlur:()=>{r.value=!1},handleKeyup:t=>{if("Enter"===t.key){if(!e.keyboard)return;r.value=!1}},handleClick:t=>{var r;if(!e.disabled&&!e.loading){const{onClick:i}=e;i&&Ka(i,t),e.text||null===(r=n.value)||void 0===r||r.play()}},customColorCssVars:eo((()=>{const{color:t}=e;if(!t)return null;const n=yx(t);return{"--n-border-color":t,"--n-border-color-hover":n,"--n-border-color-pressed":bx(t),"--n-border-color-focus":n,"--n-border-color-disabled":t}})),cssVars:l?void 0:p,themeClass:null==A?void 0:A.themeClass,onRender:null==A?void 0:A.onRender}},render(){const{mergedClsPrefix:e,tag:t,onRender:n}=this;null==n||n();const r=os(this.$slots.default,(t=>t&&to("span",{class:`${e}-button__content`},t)));return to(t,{ref:"selfElRef",class:[this.themeClass,`${e}-button`,`${e}-button--${this.type}-type`,`${e}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${e}-button--rtl`,this.disabled&&`${e}-button--disabled`,this.block&&`${e}-button--block`,this.enterPressed&&`${e}-button--pressed`,!this.text&&this.dashed&&`${e}-button--dashed`,this.color&&`${e}-button--color`,this.secondary&&`${e}-button--secondary`,this.loading&&`${e}-button--loading`,this.ghost&&`${e}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},"right"===this.iconPlacement&&r,to(dy,{width:!0},{default:()=>os(this.$slots.icon,(t=>(this.loading||this.renderIcon||t)&&to("span",{class:`${e}-button__icon`,style:{margin:as(this.$slots.default)?"0":""}},to(uy,null,{default:()=>this.loading?to(xy,{clsPrefix:e,key:"loading",class:`${e}-icon-slot`,strokeWidth:20}):to("div",{key:"icon",class:`${e}-icon-slot`,role:"none"},this.renderIcon?this.renderIcon():t)}))))}),"left"===this.iconPlacement&&r,this.text?null:to(iw,{ref:"waveElRef",clsPrefix:e}),this.showBorder?to("div",{"aria-hidden":!0,class:`${e}-button__border`,style:this.customColorCssVars}):null,this.showBorder?to("div",{"aria-hidden":!0,class:`${e}-button__state-border`,style:this.customColorCssVars}):null)}}),_x=Bx,Ex="0!important",Mx="-1px!important";function Px(e){return Ns(e+"-type",[Ls("& +",[Us("button",{},[Ns(e+"-type",[zs("border",{borderLeftWidth:Ex}),zs("state-border",{left:Mx})])])])])}function Tx(e){return Ns(e+"-type",[Ls("& +",[Us("button",[Ns(e+"-type",[zs("border",{borderTopWidth:Ex}),zs("state-border",{top:Mx})])])])])}const Dx=Us("button-group","\n flex-wrap: nowrap;\n display: inline-flex;\n position: relative;\n",[js("vertical",{flexDirection:"row"},[js("rtl",[Us("button",[Ls("&:first-child:not(:last-child)",`\n margin-right: ${Ex};\n border-top-right-radius: ${Ex};\n border-bottom-right-radius: ${Ex};\n `),Ls("&:last-child:not(:first-child)",`\n margin-left: ${Ex};\n border-top-left-radius: ${Ex};\n border-bottom-left-radius: ${Ex};\n `),Ls("&:not(:first-child):not(:last-child)",`\n margin-left: ${Ex};\n margin-right: ${Ex};\n border-radius: ${Ex};\n `),Px("default"),Ns("ghost",[Px("primary"),Px("info"),Px("success"),Px("warning"),Px("error")])])])]),Ns("vertical",{flexDirection:"column"},[Us("button",[Ls("&:first-child:not(:last-child)",`\n margin-bottom: ${Ex};\n margin-left: ${Ex};\n margin-right: ${Ex};\n border-bottom-left-radius: ${Ex};\n border-bottom-right-radius: ${Ex};\n `),Ls("&:last-child:not(:first-child)",`\n margin-top: ${Ex};\n margin-left: ${Ex};\n margin-right: ${Ex};\n border-top-left-radius: ${Ex};\n border-top-right-radius: ${Ex};\n `),Ls("&:not(:first-child):not(:last-child)",`\n margin: ${Ex};\n border-radius: ${Ex};\n `),Tx("default"),Ns("ghost",[Tx("primary"),Tx("info"),Tx("success"),Tx("warning"),Tx("error")])])])]),Fx=Dn({name:"ButtonGroup",props:{size:{type:String,default:void 0},vertical:Boolean},setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=cf(e);Dv("-button-group",Dx,t),nr(wx,e);return{rtlEnabled:Iv("ButtonGroup",n,t),mergedClsPrefix:t}},render(){const{mergedClsPrefix:e}=this;return to("div",{class:[`${e}-button-group`,this.rtlEnabled&&`${e}-button-group--rtl`,this.vertical&&`${e}-button-group--vertical`],role:"group"},this.$slots)}}),Ix=1901,kx=40,Ox={date:function(e,t){pf(2,arguments);var n=Ff(e),r=Ff(t);return n.getTime()===r.getTime()},month:bv,year:Cv,quarter:wv};function Lx(e){return(t,n)=>function(e,t,n){pf(2,arguments);var r=Tf(e,n),i=Tf(t,n);return r.getTime()===i.getTime()}(t,n,{weekStartsOn:(e+1)%7})}function Rx(e,t,n,r=0){return("week"===n?Lx(r):Ox[n])(e,t)}function Ux(e,t,n,r,i,o){return"date"===i?function(e,t,n,r){let i=!1,o=!1,a=!1;Array.isArray(n)&&(n[0]<e&&e<n[1]&&(i=!0),Rx(n[0],e,"date")&&(o=!0),Rx(n[1],e,"date")&&(a=!0));const s=null!==n&&(Array.isArray(n)?Rx(n[0],e,"date")||Rx(n[1],e,"date"):Rx(n,e,"date"));return{type:"date",dateObject:{date:Mm(e),month:Im(e),year:Lm(e)},inCurrentMonth:bv(e,t),isCurrentDate:Rx(r,e,"date"),inSpan:i,inSelectedWeek:!1,startOfSpan:o,endOfSpan:a,selected:s,ts:Om(e)}}(e,t,n,r):function(e,t,n,r,i){let o=!1,a=!1,s=!1;Array.isArray(n)&&(n[0]<e&&e<n[1]&&(o=!0),Rx(n[0],e,"week",i)&&(a=!0),Rx(n[1],e,"week",i)&&(s=!0));const l=null!==n&&(Array.isArray(n)?Rx(n[0],e,"week",i)||Rx(n[1],e,"week",i):Rx(n,e,"week",i));return{type:"date",dateObject:{date:Mm(e),month:Im(e),year:Lm(e)},inCurrentMonth:bv(e,t),isCurrentDate:Rx(r,e,"date"),inSpan:o,startOfSpan:a,endOfSpan:s,selected:!1,inSelectedWeek:l,ts:Om(e)}}(e,t,n,r,o)}function zx(e,t,n){return _m(new Date(2e3,e,1).getTime(),t,{locale:n})}function Nx(e,t,n){return _m(new Date(e,1,1).getTime(),t,{locale:n})}function jx(e,t,n){return _m(new Date(2e3,3*e-2,1).getTime(),t,{locale:n})}function Hx(e,t,n,{monthFormat:r}){return{type:"month",monthFormat:r,dateObject:{month:Im(e),year:Lm(e)},isCurrent:bv(n,e),selected:null!==t&&Rx(t,e,"month"),ts:Om(e)}}function Qx(e,t,n,{yearFormat:r}){return{type:"year",yearFormat:r,dateObject:{year:Lm(e)},isCurrent:Cv(n,e),selected:null!==t&&Rx(t,e,"year"),ts:Om(e)}}function Vx(e,t,n,{quarterFormat:r}){return{type:"quarter",quarterFormat:r,dateObject:{quarter:Lf(e),year:Lm(e)},isCurrent:wv(n,e),selected:null!==t&&Rx(t,e,"quarter"),ts:Om(e)}}function Wx(e,t,n,r,i=!1,o=!1){const a=o?"week":"date",s=Im(e);let l=Om(Uf(e)),c=Om(Mf(l,-1));const u=[];let d=!i;for(;Pm(c)!==r||d;)u.unshift(Ux(c,e,t,n,a,r)),c=Om(Mf(c,-1)),d=!1;for(;Im(l)===s;)u.push(Ux(l,e,t,n,a,r)),l=Om(Mf(l,1));const h=i?u.length<=28?28:u.length<=35?35:42:42;for(;u.length<h;)u.push(Ux(l,e,t,n,a,r)),l=Om(Mf(l,1));return u}function Gx(e,t,n,r){const i=[],o=zf(e);for(let a=0;a<12;a++)i.push(Hx(Om(Pf(o,a)),t,n,r));return i}function qx(e,t,n,r){const i=[],o=zf(e);for(let a=0;a<4;a++)i.push(Vx(Om(If(o,a)),t,n,r));return i}function Kx(e,t,n){const r=[],i=new Date(Ix,0,1);for(let o=0;o<200;o++)r.push(Qx(Om(kf(i,o)),e,t,n));return r}function Yx(e,t,n,r){const i=yv(e,t,n,r);return Of(i)?_m(i,t,r)===e?i:new Date(NaN):i}function Xx(e){if(void 0===e)return;if("number"==typeof e)return e;const[t,n,r]=e.split(":");return{hours:Number(t),minutes:Number(n),seconds:Number(r)}}function $x(e,t){return Array.isArray(e)?e["start"===t?0:1]:null}const Jx={paddingSmall:"12px 16px 12px",paddingMedium:"19px 24px 20px",paddingLarge:"23px 32px 24px",paddingHuge:"27px 40px 28px",titleFontSizeSmall:"16px",titleFontSizeMedium:"18px",titleFontSizeLarge:"18px",titleFontSizeHuge:"18px",closeIconSize:"18px",closeSize:"22px"},Zx={name:"Card",common:Lb,self:e=>{const{primaryColor:t,borderRadius:n,lineHeight:r,fontSize:i,cardColor:o,textColor2:a,textColor1:s,dividerColor:l,fontWeightStrong:c,closeIconColor:u,closeIconColorHover:d,closeIconColorPressed:h,closeColorHover:p,closeColorPressed:A,modalColor:f,boxShadow1:m,popoverColor:g,actionColor:v}=e;return Object.assign(Object.assign({},Jx),{lineHeight:r,color:o,colorModal:f,colorPopover:g,colorTarget:t,colorEmbedded:v,colorEmbeddedModal:v,colorEmbeddedPopover:v,textColor:a,titleTextColor:s,borderColor:l,actionColor:v,titleFontWeight:c,closeColorHover:p,closeColorPressed:A,closeBorderRadius:n,closeIconColor:u,closeIconColorHover:d,closeIconColorPressed:h,fontSizeSmall:i,fontSizeMedium:i,fontSizeLarge:i,fontSizeHuge:i,boxShadow:m,borderRadius:n})}},eC=Ls([Us("card","\n font-size: var(--n-font-size);\n line-height: var(--n-line-height);\n display: flex;\n flex-direction: column;\n width: 100%;\n box-sizing: border-box;\n position: relative;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n color: var(--n-text-color);\n word-break: break-word;\n transition: \n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[Vs({background:"var(--n-color-modal)"}),Ns("hoverable",[Ls("&:hover","box-shadow: var(--n-box-shadow);")]),Ns("content-segmented",[Ls(">",[zs("content",{paddingTop:"var(--n-padding-bottom)"})])]),Ns("content-soft-segmented",[Ls(">",[zs("content","\n margin: 0 var(--n-padding-left);\n padding: var(--n-padding-bottom) 0;\n ")])]),Ns("footer-segmented",[Ls(">",[zs("footer",{paddingTop:"var(--n-padding-bottom)"})])]),Ns("footer-soft-segmented",[Ls(">",[zs("footer","\n padding: var(--n-padding-bottom) 0;\n margin: 0 var(--n-padding-left);\n ")])]),Ls(">",[Us("card-header","\n box-sizing: border-box;\n display: flex;\n align-items: center;\n font-size: var(--n-title-font-size);\n padding:\n var(--n-padding-top)\n var(--n-padding-left)\n var(--n-padding-bottom)\n var(--n-padding-left);\n ",[zs("main","\n font-weight: var(--n-title-font-weight);\n transition: color .3s var(--n-bezier);\n flex: 1;\n min-width: 0;\n color: var(--n-title-text-color);\n "),zs("extra","\n display: flex;\n align-items: center;\n font-size: var(--n-font-size);\n font-weight: 400;\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n "),zs("close","\n margin: 0 0 0 8px;\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n ")]),zs("action","\n box-sizing: border-box;\n transition:\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n background-clip: padding-box;\n background-color: var(--n-action-color);\n "),zs("content","flex: 1; min-width: 0;"),zs("content, footer","\n box-sizing: border-box;\n padding: 0 var(--n-padding-left) var(--n-padding-bottom) var(--n-padding-left);\n font-size: var(--n-font-size);\n ",[Ls("&:first-child",{paddingTop:"var(--n-padding-bottom)"})]),zs("action","\n background-color: var(--n-action-color);\n padding: var(--n-padding-bottom) var(--n-padding-left);\n border-bottom-left-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n ")]),Us("card-cover","\n overflow: hidden;\n width: 100%;\n border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;\n ",[Ls("img","\n display: block;\n width: 100%;\n ")]),Ns("bordered","\n border: 1px solid var(--n-border-color);\n ",[Ls("&:target","border-color: var(--n-color-target);")]),Ns("action-segmented",[Ls(">",[zs("action",[Ls("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),Ns("content-segmented, content-soft-segmented",[Ls(">",[zs("content",{transition:"border-color 0.3s var(--n-bezier)"},[Ls("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),Ns("footer-segmented, footer-soft-segmented",[Ls(">",[zs("footer",{transition:"border-color 0.3s var(--n-bezier)"},[Ls("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),Ns("embedded","\n background-color: var(--n-color-embedded);\n ")]),Hs(Us("card","\n background: var(--n-color-modal);\n ",[Ns("embedded","\n background-color: var(--n-color-embedded-modal);\n ")])),Qs(Us("card","\n background: var(--n-color-popover);\n ",[Ns("embedded","\n background-color: var(--n-color-embedded-popover);\n ")]))]),tC={title:[String,Function],contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],headerExtraClass:String,headerExtraStyle:[Object,String],footerClass:String,footerStyle:[Object,String],embedded:Boolean,segmented:{type:[Boolean,Object],default:!1},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},closable:Boolean,hoverable:Boolean,role:String,onClose:[Function,Array],tag:{type:String,default:"div"},cover:Function,content:[String,Function],footer:Function,action:Function,headerExtra:Function},nC=Ya(tC),rC=Dn({name:"Card",props:Object.assign(Object.assign({},sf.props),tC),setup(e){const{inlineThemeDisabled:t,mergedClsPrefixRef:n,mergedRtlRef:r}=cf(e),i=sf("Card","-card",eC,Zx,e,n),o=Iv("Card",r,n),a=eo((()=>{const{size:t}=e,{self:{color:n,colorModal:r,colorTarget:o,textColor:a,titleTextColor:s,titleFontWeight:l,borderColor:c,actionColor:u,borderRadius:d,lineHeight:h,closeIconColor:p,closeIconColorHover:A,closeIconColorPressed:f,closeColorHover:m,closeColorPressed:g,closeBorderRadius:v,closeIconSize:y,closeSize:b,boxShadow:w,colorPopover:x,colorEmbedded:C,colorEmbeddedModal:S,colorEmbeddedPopover:B,[Gs("padding",t)]:_,[Gs("fontSize",t)]:E,[Gs("titleFontSize",t)]:M},common:{cubicBezierEaseInOut:P}}=i.value,{top:T,left:D,bottom:F}=ya(_);return{"--n-bezier":P,"--n-border-radius":d,"--n-color":n,"--n-color-modal":r,"--n-color-popover":x,"--n-color-embedded":C,"--n-color-embedded-modal":S,"--n-color-embedded-popover":B,"--n-color-target":o,"--n-text-color":a,"--n-line-height":h,"--n-action-color":u,"--n-title-text-color":s,"--n-title-font-weight":l,"--n-close-icon-color":p,"--n-close-icon-color-hover":A,"--n-close-icon-color-pressed":f,"--n-close-color-hover":m,"--n-close-color-pressed":g,"--n-border-color":c,"--n-box-shadow":w,"--n-padding-top":T,"--n-padding-bottom":F,"--n-padding-left":D,"--n-font-size":E,"--n-title-font-size":M,"--n-close-size":b,"--n-close-icon-size":y,"--n-close-border-radius":v}})),s=t?Fv("card",eo((()=>e.size[0])),a,e):void 0;return{rtlEnabled:o,mergedClsPrefix:n,mergedTheme:i,handleCloseClick:()=>{const{onClose:t}=e;t&&Ka(t)},cssVars:t?void 0:a,themeClass:null==s?void 0:s.themeClass,onRender:null==s?void 0:s.onRender}},render(){const{segmented:e,bordered:t,hoverable:n,mergedClsPrefix:r,rtlEnabled:i,onRender:o,embedded:a,tag:s,$slots:l}=this;return null==o||o(),to(s,{class:[`${r}-card`,this.themeClass,a&&`${r}-card--embedded`,{[`${r}-card--rtl`]:i,[`${r}-card--content${"boolean"!=typeof e&&"soft"===e.content?"-soft":""}-segmented`]:!0===e||!1!==e&&e.content,[`${r}-card--footer${"boolean"!=typeof e&&"soft"===e.footer?"-soft":""}-segmented`]:!0===e||!1!==e&&e.footer,[`${r}-card--action-segmented`]:!0===e||!1!==e&&e.action,[`${r}-card--bordered`]:t,[`${r}-card--hoverable`]:n}],style:this.cssVars,role:this.role},os(l.cover,(e=>{const t=this.cover?ns([this.cover()]):e;return t&&to("div",{class:`${r}-card-cover`,role:"none"},t)})),os(l.header,(e=>{const{title:t}=this,n=t?ns("function"==typeof t?[t()]:[t]):e;return n||this.closable?to("div",{class:[`${r}-card-header`,this.headerClass],style:this.headerStyle,role:"heading"},to("div",{class:`${r}-card-header__main`,role:"heading"},n),os(l["header-extra"],(e=>{const t=this.headerExtra?ns([this.headerExtra()]):e;return t&&to("div",{class:[`${r}-card-header__extra`,this.headerExtraClass],style:this.headerExtraStyle},t)})),this.closable&&to(fy,{clsPrefix:r,class:`${r}-card-header__close`,onClick:this.handleCloseClick,absolute:!0})):null})),os(l.default,(e=>{const{content:t}=this,n=t?ns("function"==typeof t?[t()]:[t]):e;return n&&to("div",{class:[`${r}-card__content`,this.contentClass],style:this.contentStyle,role:"none"},n)})),os(l.footer,(e=>{const t=this.footer?ns([this.footer()]):e;return t&&to("div",{class:[`${r}-card__footer`,this.footerClass],style:this.footerStyle,role:"none"},t)})),os(l.action,(e=>{const t=this.action?ns([this.action()]):e;return t&&to("div",{class:`${r}-card__action`,role:"none"},t)})))}}),iC={sizeSmall:"14px",sizeMedium:"16px",sizeLarge:"18px",labelPadding:"0 8px",labelFontWeight:"400"},oC={name:"Checkbox",common:Lb,self:e=>{const{baseColor:t,inputColorDisabled:n,cardColor:r,modalColor:i,popoverColor:o,textColorDisabled:a,borderColor:s,primaryColor:l,textColor2:c,fontSizeSmall:u,fontSizeMedium:d,fontSizeLarge:h,borderRadiusSmall:p,lineHeight:A}=e;return Object.assign(Object.assign({},iC),{labelLineHeight:A,fontSizeSmall:u,fontSizeMedium:d,fontSizeLarge:h,borderRadius:p,color:t,colorChecked:l,colorDisabled:n,colorDisabledChecked:n,colorTableHeader:r,colorTableHeaderModal:i,colorTableHeaderPopover:o,checkMarkColor:t,checkMarkColorDisabled:a,checkMarkColorDisabledChecked:a,border:`1px solid ${s}`,borderDisabled:`1px solid ${s}`,borderDisabledChecked:`1px solid ${s}`,borderChecked:`1px solid ${l}`,borderFocus:`1px solid ${l}`,boxShadowFocus:`0 0 0 2px ${Ua(l,{alpha:.3})}`,textColor:c,textColorDisabled:a})}},aC=to("svg",{viewBox:"0 0 64 64",class:"check-icon"},to("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),sC=to("svg",{viewBox:"0 0 100 100",class:"line-icon"},to("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"})),lC="n-checkbox-group",cC=Dn({name:"CheckboxGroup",props:{min:Number,max:Number,size:String,value:Array,defaultValue:{type:Array,default:null},disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]},setup(e){const{mergedClsPrefixRef:t}=cf(e),n=Lu(e),{mergedSizeRef:r,mergedDisabledRef:i}=n,o=bt(e.defaultValue),a=xl(eo((()=>e.value)),o),s=eo((()=>{var e;return(null===(e=a.value)||void 0===e?void 0:e.length)||0})),l=eo((()=>Array.isArray(a.value)?new Set(a.value):new Set));return nr(lC,{checkedCountRef:s,maxRef:Tt(e,"max"),minRef:Tt(e,"min"),valueSetRef:l,disabledRef:i,mergedSizeRef:r,toggleCheckbox:function(t,r){const{nTriggerFormInput:i,nTriggerFormChange:s}=n,{onChange:l,"onUpdate:value":c,onUpdateValue:u}=e;if(Array.isArray(a.value)){const e=Array.from(a.value),n=e.findIndex((e=>e===r));t?~n||(e.push(r),u&&Ka(u,e,{actionType:"check",value:r}),c&&Ka(c,e,{actionType:"check",value:r}),i(),s(),o.value=e,l&&Ka(l,e)):~n&&(e.splice(n,1),u&&Ka(u,e,{actionType:"uncheck",value:r}),c&&Ka(c,e,{actionType:"uncheck",value:r}),l&&Ka(l,e),o.value=e,i(),s())}else t?(u&&Ka(u,[r],{actionType:"check",value:r}),c&&Ka(c,[r],{actionType:"check",value:r}),l&&Ka(l,[r]),o.value=[r],i(),s()):(u&&Ka(u,[],{actionType:"uncheck",value:r}),c&&Ka(c,[],{actionType:"uncheck",value:r}),l&&Ka(l,[]),o.value=[],i(),s())}}),{mergedClsPrefix:t}},render(){return to("div",{class:`${this.mergedClsPrefix}-checkbox-group`,role:"group"},this.$slots)}}),uC=Ls([Us("checkbox","\n font-size: var(--n-font-size);\n outline: none;\n cursor: pointer;\n display: inline-flex;\n flex-wrap: nowrap;\n align-items: flex-start;\n word-break: break-word;\n line-height: var(--n-size);\n --n-merged-color-table: var(--n-color-table);\n ",[Ns("show-label","line-height: var(--n-label-line-height);"),Ls("&:hover",[Us("checkbox-box",[zs("border","border: var(--n-border-checked);")])]),Ls("&:focus:not(:active)",[Us("checkbox-box",[zs("border","\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),Ns("inside-table",[Us("checkbox-box","\n background-color: var(--n-merged-color-table);\n ")]),Ns("checked",[Us("checkbox-box","\n background-color: var(--n-color-checked);\n ",[Us("checkbox-icon",[Ls(".check-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),Ns("indeterminate",[Us("checkbox-box",[Us("checkbox-icon",[Ls(".check-icon","\n opacity: 0;\n transform: scale(.5);\n "),Ls(".line-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),Ns("checked, indeterminate",[Ls("&:focus:not(:active)",[Us("checkbox-box",[zs("border","\n border: var(--n-border-checked);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),Us("checkbox-box","\n background-color: var(--n-color-checked);\n border-left: 0;\n border-top: 0;\n ",[zs("border",{border:"var(--n-border-checked)"})])]),Ns("disabled",{cursor:"not-allowed"},[Ns("checked",[Us("checkbox-box","\n background-color: var(--n-color-disabled-checked);\n ",[zs("border",{border:"var(--n-border-disabled-checked)"}),Us("checkbox-icon",[Ls(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled-checked)"})])])]),Us("checkbox-box","\n background-color: var(--n-color-disabled);\n ",[zs("border","\n border: var(--n-border-disabled);\n "),Us("checkbox-icon",[Ls(".check-icon, .line-icon","\n fill: var(--n-check-mark-color-disabled);\n ")])]),zs("label","\n color: var(--n-text-color-disabled);\n ")]),Us("checkbox-box-wrapper","\n position: relative;\n width: var(--n-size);\n flex-shrink: 0;\n flex-grow: 0;\n user-select: none;\n -webkit-user-select: none;\n "),Us("checkbox-box","\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n height: var(--n-size);\n width: var(--n-size);\n display: inline-block;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color 0.3s var(--n-bezier);\n ",[zs("border","\n transition:\n border-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border: var(--n-border);\n "),Us("checkbox-icon","\n display: flex;\n align-items: center;\n justify-content: center;\n position: absolute;\n left: 1px;\n right: 1px;\n top: 1px;\n bottom: 1px;\n ",[Ls(".check-icon, .line-icon","\n width: 100%;\n fill: var(--n-check-mark-color);\n opacity: 0;\n transform: scale(0.5);\n transform-origin: center;\n transition:\n fill 0.3s var(--n-bezier),\n transform 0.3s var(--n-bezier),\n opacity 0.3s var(--n-bezier),\n border-color 0.3s var(--n-bezier);\n "),vy({left:"1px",top:"1px"})])]),zs("label","\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n user-select: none;\n -webkit-user-select: none;\n padding: var(--n-label-padding);\n font-weight: var(--n-label-font-weight);\n ",[Ls("&:empty",{display:"none"})])]),Hs(Us("checkbox","\n --n-merged-color-table: var(--n-color-table-modal);\n ")),Qs(Us("checkbox","\n --n-merged-color-table: var(--n-color-table-popover);\n "))]),dC=Dn({name:"Checkbox",props:Object.assign(Object.assign({},sf.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]}),setup(e){const t=bt(null),{mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedRtlRef:i}=cf(e),o=Lu(e,{mergedSize(t){const{size:n}=e;if(void 0!==n)return n;if(l){const{value:e}=l.mergedSizeRef;if(void 0!==e)return e}if(t){const{mergedSize:e}=t;if(void 0!==e)return e.value}return"medium"},mergedDisabled(t){const{disabled:n}=e;if(void 0!==n)return n;if(l){if(l.disabledRef.value)return!0;const{maxRef:{value:e},checkedCountRef:t}=l;if(void 0!==e&&t.value>=e&&!d.value)return!0;const{minRef:{value:n}}=l;if(void 0!==n&&t.value<=n&&d.value)return!0}return!!t&&t.disabled.value}}),{mergedDisabledRef:a,mergedSizeRef:s}=o,l=rr(lC,null),c=bt(e.defaultChecked),u=xl(Tt(e,"checked"),c),d=Zs((()=>{if(l){const t=l.valueSetRef.value;return!(!t||void 0===e.value)&&t.has(e.value)}return u.value===e.checkedValue})),h=sf("Checkbox","-checkbox",uC,oC,e,n);function p(t){if(l&&void 0!==e.value)l.toggleCheckbox(!d.value,e.value);else{const{onChange:n,"onUpdate:checked":r,onUpdateChecked:i}=e,{nTriggerFormInput:a,nTriggerFormChange:s}=o,l=d.value?e.uncheckedValue:e.checkedValue;r&&Ka(r,l,t),i&&Ka(i,l,t),n&&Ka(n,l,t),a(),s(),c.value=l}}const A={focus:()=>{var e;null===(e=t.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=t.value)||void 0===e||e.blur()}},f=Iv("Checkbox",i,n),m=eo((()=>{const{value:e}=s,{common:{cubicBezierEaseInOut:t},self:{borderRadius:n,color:r,colorChecked:i,colorDisabled:o,colorTableHeader:a,colorTableHeaderModal:l,colorTableHeaderPopover:c,checkMarkColor:u,checkMarkColorDisabled:d,border:p,borderFocus:A,borderDisabled:f,borderChecked:m,boxShadowFocus:g,textColor:v,textColorDisabled:y,checkMarkColorDisabledChecked:b,colorDisabledChecked:w,borderDisabledChecked:x,labelPadding:C,labelLineHeight:S,labelFontWeight:B,[Gs("fontSize",e)]:_,[Gs("size",e)]:E}}=h.value;return{"--n-label-line-height":S,"--n-label-font-weight":B,"--n-size":E,"--n-bezier":t,"--n-border-radius":n,"--n-border":p,"--n-border-checked":m,"--n-border-focus":A,"--n-border-disabled":f,"--n-border-disabled-checked":x,"--n-box-shadow-focus":g,"--n-color":r,"--n-color-checked":i,"--n-color-table":a,"--n-color-table-modal":l,"--n-color-table-popover":c,"--n-color-disabled":o,"--n-color-disabled-checked":w,"--n-text-color":v,"--n-text-color-disabled":y,"--n-check-mark-color":u,"--n-check-mark-color-disabled":d,"--n-check-mark-color-disabled-checked":b,"--n-font-size":_,"--n-label-padding":C}})),g=r?Fv("checkbox",eo((()=>s.value[0])),m,e):void 0;return Object.assign(o,A,{rtlEnabled:f,selfRef:t,mergedClsPrefix:n,mergedDisabled:a,renderedChecked:d,mergedTheme:h,labelId:Ha(),handleClick:function(e){a.value||p(e)},handleKeyUp:function(e){if(!a.value)switch(e.key){case" ":case"Enter":p(e)}},handleKeyDown:function(e){if(" "===e.key)e.preventDefault()},cssVars:r?void 0:m,themeClass:null==g?void 0:g.themeClass,onRender:null==g?void 0:g.onRender})},render(){var e;const{$slots:t,renderedChecked:n,mergedDisabled:r,indeterminate:i,privateInsideTable:o,cssVars:a,labelId:s,label:l,mergedClsPrefix:c,focusable:u,handleKeyUp:d,handleKeyDown:h,handleClick:p}=this;null===(e=this.onRender)||void 0===e||e.call(this);const A=os(t.default,(e=>l||e?to("span",{class:`${c}-checkbox__label`,id:s},l||e):null));return to("div",{ref:"selfRef",class:[`${c}-checkbox`,this.themeClass,this.rtlEnabled&&`${c}-checkbox--rtl`,n&&`${c}-checkbox--checked`,r&&`${c}-checkbox--disabled`,i&&`${c}-checkbox--indeterminate`,o&&`${c}-checkbox--inside-table`,A&&`${c}-checkbox--show-label`],tabindex:r||!u?void 0:0,role:"checkbox","aria-checked":i?"mixed":n,"aria-labelledby":s,style:a,onKeyup:d,onKeydown:h,onClick:p,onMousedown:()=>{ul("selectstart",window,(e=>{e.preventDefault()}),{once:!0})}},to("div",{class:`${c}-checkbox-box-wrapper`}," ",to("div",{class:`${c}-checkbox-box`},to(uy,null,{default:()=>this.indeterminate?to("div",{key:"indeterminate",class:`${c}-checkbox-icon`},sC):to("div",{key:"check",class:`${c}-checkbox-icon`},aC)}),to("div",{class:`${c}-checkbox-box__border`}))),A)}}),hC={name:"Collapse",common:Lb,self:e=>{const{fontWeight:t,textColor1:n,textColor2:r,textColorDisabled:i,dividerColor:o,fontSize:a}=e;return{titleFontSize:a,titleFontWeight:t,dividerColor:o,titleTextColor:n,titleTextColorDisabled:i,fontSize:a,textColor:r,arrowColor:r,arrowColorDisabled:i,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}}},pC=Us("collapse","width: 100%;",[Us("collapse-item","\n font-size: var(--n-font-size);\n color: var(--n-text-color);\n transition:\n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n margin: var(--n-item-margin);\n ",[Ns("disabled",[zs("header","cursor: not-allowed;",[zs("header-main","\n color: var(--n-title-text-color-disabled);\n "),Us("collapse-item-arrow","\n color: var(--n-arrow-color-disabled);\n ")])]),Us("collapse-item","margin-left: 32px;"),Ls("&:first-child","margin-top: 0;"),Ls("&:first-child >",[zs("header","padding-top: 0;")]),Ns("left-arrow-placement",[zs("header",[Us("collapse-item-arrow","margin-right: 4px;")])]),Ns("right-arrow-placement",[zs("header",[Us("collapse-item-arrow","margin-left: 4px;")])]),zs("content-wrapper",[zs("content-inner","padding-top: 16px;"),zw({duration:"0.15s"})]),Ns("active",[zs("header",[Ns("active",[Us("collapse-item-arrow","transform: rotate(90deg);")])])]),Ls("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),js("disabled",[Ns("trigger-area-main",[zs("header",[zs("header-main","cursor: pointer;"),Us("collapse-item-arrow","cursor: default;")])]),Ns("trigger-area-arrow",[zs("header",[Us("collapse-item-arrow","cursor: pointer;")])]),Ns("trigger-area-extra",[zs("header",[zs("header-extra","cursor: pointer;")])])]),zs("header","\n font-size: var(--n-title-font-size);\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n transition: color .3s var(--n-bezier);\n position: relative;\n padding: var(--n-title-padding);\n color: var(--n-title-text-color);\n ",[zs("header-main","\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n font-weight: var(--n-title-font-weight);\n transition: color .3s var(--n-bezier);\n flex: 1;\n color: var(--n-title-text-color);\n "),zs("header-extra","\n display: flex;\n align-items: center;\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n "),Us("collapse-item-arrow","\n display: flex;\n transition:\n transform .15s var(--n-bezier),\n color .3s var(--n-bezier);\n font-size: 18px;\n color: var(--n-arrow-color);\n ")])])]),AC=Object.assign(Object.assign({},sf.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},triggerAreas:{type:Array,default:()=>["main","extra","arrow"]},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),fC="n-collapse",mC=Dn({name:"Collapse",props:AC,setup(e,{slots:t}){const{mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedRtlRef:i}=cf(e),o=bt(e.defaultExpandedNames),a=xl(eo((()=>e.expandedNames)),o),s=sf("Collapse","-collapse",pC,hC,e,n);function l(t){const{"onUpdate:expandedNames":n,onUpdateExpandedNames:r,onExpandedNamesChange:i}=e;r&&Ka(r,t),n&&Ka(n,t),i&&Ka(i,t),o.value=t}function c(t){const{onItemHeaderClick:n}=e;n&&Ka(n,t)}nr(fC,{props:e,mergedClsPrefixRef:n,expandedNamesRef:a,slots:t,toggleItem:function(t,n,r){const{accordion:i}=e,{value:o}=a;if(i)t?(l([n]),c({name:n,expanded:!0,event:r})):(l([]),c({name:n,expanded:!1,event:r}));else if(Array.isArray(o)){const e=o.slice(),t=e.findIndex((e=>n===e));~t?(e.splice(t,1),l(e),c({name:n,expanded:!1,event:r})):(e.push(n),l(e),c({name:n,expanded:!0,event:r}))}else l([n]),c({name:n,expanded:!0,event:r})}});const u=Iv("Collapse",i,n),d=eo((()=>{const{common:{cubicBezierEaseInOut:e},self:{titleFontWeight:t,dividerColor:n,titlePadding:r,titleTextColor:i,titleTextColorDisabled:o,textColor:a,arrowColor:l,fontSize:c,titleFontSize:u,arrowColorDisabled:d,itemMargin:h}}=s.value;return{"--n-font-size":c,"--n-bezier":e,"--n-text-color":a,"--n-divider-color":n,"--n-title-padding":r,"--n-title-font-size":u,"--n-title-text-color":i,"--n-title-text-color-disabled":o,"--n-title-font-weight":t,"--n-arrow-color":l,"--n-arrow-color-disabled":d,"--n-item-margin":h}})),h=r?Fv("collapse",void 0,d,e):void 0;return{rtlEnabled:u,mergedTheme:s,mergedClsPrefix:n,cssVars:r?void 0:d,themeClass:null==h?void 0:h.themeClass,onRender:null==h?void 0:h.onRender}},render(){var e;return null===(e=this.onRender)||void 0===e||e.call(this),to("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),gC=Dn({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup:e=>({onceTrue:Js(Tt(e,"show"))}),render(){return to(dy,null,{default:()=>{const{show:e,displayDirective:t,onceTrue:n,clsPrefix:r}=this,i="show"===t&&n,o=to("div",{class:`${r}-collapse-item__content-wrapper`},to("div",{class:`${r}-collapse-item__content-inner`},this.$slots));return i?En(o,[[Mo,e]]):e?o:null}})}}),vC=Dn({name:"CollapseItem",props:{title:String,name:[String,Number],disabled:Boolean,displayDirective:String},setup(e){const{mergedRtlRef:t}=cf(e),n=Ha(),r=Zs((()=>{var t;return null!==(t=e.name)&&void 0!==t?t:n})),i=rr(fC);i||$a("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:o,props:a,mergedClsPrefixRef:s,slots:l}=i,c=eo((()=>{const{value:e}=o;if(Array.isArray(e)){const{value:t}=r;return!~e.findIndex((e=>e===t))}if(e){const{value:t}=r;return t!==e}return!0}));return{rtlEnabled:Iv("Collapse",t,s),collapseSlots:l,randomName:n,mergedClsPrefix:s,collapsed:c,triggerAreas:Tt(a,"triggerAreas"),mergedDisplayDirective:eo((()=>{const{displayDirective:t}=e;return t||a.displayDirective})),arrowPlacement:eo((()=>a.arrowPlacement)),handleClick(t){let n="main";fa(t,"arrow")&&(n="arrow"),fa(t,"extra")&&(n="extra"),a.triggerAreas.includes(n)&&i&&!e.disabled&&i.toggleItem(c.value,r.value,t)}}},render(){const{collapseSlots:e,$slots:t,arrowPlacement:n,collapsed:r,mergedDisplayDirective:i,mergedClsPrefix:o,disabled:a,triggerAreas:s}=this,l=is(t.header,{collapsed:r},(()=>[this.title])),c=t["header-extra"]||e["header-extra"],u=t.arrow||e.arrow;return to("div",{class:[`${o}-collapse-item`,`${o}-collapse-item--${n}-arrow-placement`,a&&`${o}-collapse-item--disabled`,!r&&`${o}-collapse-item--active`,s.map((e=>`${o}-collapse-item--trigger-area-${e}`))]},to("div",{class:[`${o}-collapse-item__header`,!r&&`${o}-collapse-item__header--active`]},to("div",{class:`${o}-collapse-item__header-main`,onClick:this.handleClick},"right"===n&&l,to("div",{class:`${o}-collapse-item-arrow`,key:this.rtlEnabled?0:1,"data-arrow":!0},is(u,{collapsed:r},(()=>{var t;return[to(py,{clsPrefix:o},{default:null!==(t=e.expandIcon)&&void 0!==t?t:()=>this.rtlEnabled?to(jv,null):to(Hv,null)})]}))),"left"===n&&l),(h={collapsed:r},(e=>to("div",{class:`${o}-collapse-item__header-extra`,onClick:this.handleClick,"data-extra":!0},e))((d=c)&&ns(d(h))||null))),to(gC,{clsPrefix:o,displayDirective:i,show:!r},t));var d,h}});const yC={name:"Popselect",common:Lb,peers:{Popover:aw,InternalSelectMenu:Yb},self:function(e){const{boxShadow2:t}=e;return{menuBoxShadow:t}}},bC="n-popselect",wC=Us("popselect-menu","\n box-shadow: var(--n-menu-box-shadow);\n"),xC={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},CC=Ya(xC),SC=Dn({name:"PopselectPanel",props:xC,setup(e){const t=rr(bC),{mergedClsPrefixRef:n,inlineThemeDisabled:r}=cf(e),i=sf("Popselect","-pop-select",wC,yC,t.props,n),o=eo((()=>Wy(e.options,Qw("value","children"))));function a(t,n){const{onUpdateValue:r,"onUpdate:value":i,onChange:o}=e;r&&Ka(r,t,n),i&&Ka(i,t,n),o&&Ka(o,t,n)}Ir(Tt(e,"options"),(()=>{Vt((()=>{t.syncPosition()}))}));const s=eo((()=>{const{self:{menuBoxShadow:e}}=i.value;return{"--n-menu-box-shadow":e}})),l=r?Fv("select",void 0,s,t.props):void 0;return{mergedTheme:t.mergedThemeRef,mergedClsPrefix:n,treeMate:o,handleToggle:function(n){!function(n){const{value:{getNode:r}}=o;if(e.multiple)if(Array.isArray(e.value)){const t=[],i=[];let o=!0;e.value.forEach((e=>{if(e===n)return void(o=!1);const a=r(e);a&&(t.push(a.key),i.push(a.rawNode))})),o&&(t.push(n),i.push(r(n).rawNode)),a(t,i)}else{const e=r(n);e&&a([n],[e.rawNode])}else if(e.value===n&&e.cancelable)a(null,null);else{const e=r(n);e&&a(n,e.rawNode);const{"onUpdate:show":i,onUpdateShow:o}=t.props;i&&Ka(i,!1),o&&Ka(o,!1),t.setShow(!1)}Vt((()=>{t.syncPosition()}))}(n.key)},handleMenuMousedown:function(e){fa(e,"action")||fa(e,"empty")||fa(e,"header")||e.preventDefault()},cssVars:r?void 0:s,themeClass:null==l?void 0:l.themeClass,onRender:null==l?void 0:l.onRender}},render(){var e;return null===(e=this.onRender)||void 0===e||e.call(this),to(nw,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{header:()=>{var e,t;return(null===(t=(e=this.$slots).header)||void 0===t?void 0:t.call(e))||[]},action:()=>{var e,t;return(null===(t=(e=this.$slots).action)||void 0===t?void 0:t.call(e))||[]},empty:()=>{var e,t;return(null===(t=(e=this.$slots).empty)||void 0===t?void 0:t.call(e))||[]}})}}),BC=Dn({name:"Popselect",props:Object.assign(Object.assign(Object.assign(Object.assign({},sf.props),Ga(yw,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},yw.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),xC),inheritAttrs:!1,__popover__:!0,setup(e){const{mergedClsPrefixRef:t}=cf(e),n=sf("Popselect","-popselect",void 0,yC,e,t),r=bt(null);function i(){var e;null===(e=r.value)||void 0===e||e.syncPosition()}function o(e){var t;null===(t=r.value)||void 0===t||t.setShow(e)}nr(bC,{props:e,mergedThemeRef:n,syncPosition:i,setShow:o});const a={syncPosition:i,setShow:o};return Object.assign(Object.assign({},a),{popoverInstRef:r,mergedTheme:n})},render(){const{mergedTheme:e}=this,t={theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(e,t,n,r,i)=>{const{$attrs:o}=this;return to(SC,Object.assign({},o,{class:[o.class,e],style:[o.style,...n]},Wa(this.$props,CC),{ref:ts(t),onMouseenter:ss([r,o.onMouseenter]),onMouseleave:ss([i,o.onMouseleave])}),{header:()=>{var e,t;return null===(t=(e=this.$slots).header)||void 0===t?void 0:t.call(e)},action:()=>{var e,t;return null===(t=(e=this.$slots).action)||void 0===t?void 0:t.call(e)},empty:()=>{var e,t;return null===(t=(e=this.$slots).empty)||void 0===t?void 0:t.call(e)}})}};return to(bw,Object.assign({},Ga(this.$props,CC),t,{internalDeactivateImmediately:!0}),{trigger:()=>{var e,t;return null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)}})}});const _C={name:"Select",common:Lb,peers:{InternalSelection:Fw,InternalSelectMenu:Yb},self:function(e){const{boxShadow2:t}=e;return{menuBoxShadow:t}}},EC=Ls([Us("select","\n z-index: auto;\n outline: none;\n width: 100%;\n position: relative;\n "),Us("select-menu","\n margin: 4px 0;\n box-shadow: var(--n-menu-box-shadow);\n ",[ew({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),MC=Dn({name:"Select",props:Object.assign(Object.assign({},sf.props),{to:kl.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),setup(e){const{mergedClsPrefixRef:t,mergedBorderedRef:n,namespaceRef:r,inlineThemeDisabled:i}=cf(e),o=sf("Select","-select",EC,_C,e,t),a=bt(e.defaultValue),s=xl(Tt(e,"value"),a),l=bt(!1),c=bt(""),u=eo((()=>{const{valueField:t,childrenField:n}=e,r=Qw(t,n);return Wy(E.value,r)})),d=eo((()=>function(e,t,n){const r=new Map;return e.forEach((e=>{Nw(e)?e[n].forEach((e=>{r.set(e[t],e)})):r.set(e[t],e)})),r}(B.value,e.valueField,e.childrenField))),h=bt(!1),p=xl(Tt(e,"show"),h),A=bt(null),f=bt(null),m=bt(null),{localeRef:g}=Tv("Select"),v=eo((()=>{var t;return null!==(t=e.placeholder)&&void 0!==t?t:g.value.placeholder})),y=Sl(e,["items","options"]),b=[],w=bt([]),x=bt([]),C=bt(new Map),S=eo((()=>{const{fallbackOption:t}=e;if(void 0===t){const{labelField:t,valueField:n}=e;return e=>({[t]:String(e),[n]:e})}return!1!==t&&(e=>Object.assign(t(e),{value:e}))})),B=eo((()=>x.value.concat(w.value).concat(y.value))),_=eo((()=>{const{filter:t}=e;if(t)return t;const{labelField:n,valueField:r}=e;return(e,t)=>{if(!t)return!1;const i=t[n];if("string"==typeof i)return Hw(e,i);const o=t[r];return"string"==typeof o?Hw(e,o):"number"==typeof o&&Hw(e,String(o))}})),E=eo((()=>{if(e.remote)return y.value;{const{value:t}=B,{value:n}=c;return n.length&&e.filterable?function(e,t,n,r){return t?function e(i){if(!Array.isArray(i))return[];const o=[];for(const a of i)if(Nw(a)){const t=e(a[r]);t.length&&o.push(Object.assign({},a,{[r]:t}))}else{if(jw(a))continue;t(n,a)&&o.push(a)}return o}(e):e}(t,_.value,n,e.childrenField):t}}));function M(t){const n=e.remote,{value:r}=C,{value:i}=d,{value:o}=S,a=[];return t.forEach((e=>{if(i.has(e))a.push(i.get(e));else if(n&&r.has(e))a.push(r.get(e));else if(o){const t=o(e);t&&a.push(t)}})),a}const P=eo((()=>{if(e.multiple){const{value:e}=s;return Array.isArray(e)?M(e):[]}return null})),T=eo((()=>{const{value:t}=s;return e.multiple||Array.isArray(t)||null===t?null:M([t])[0]||null})),D=Lu(e),{mergedSizeRef:F,mergedDisabledRef:I,mergedStatusRef:k}=D;function O(t,n){const{onChange:r,"onUpdate:value":i,onUpdateValue:o}=e,{nTriggerFormChange:s,nTriggerFormInput:l}=D;r&&Ka(r,t,n),o&&Ka(o,t,n),i&&Ka(i,t,n),a.value=t,s(),l()}function L(t){const{onBlur:n}=e,{nTriggerFormBlur:r}=D;n&&Ka(n,t),r()}function R(){var t;const{remote:n,multiple:r}=e;if(n){const{value:n}=C;if(r){const{valueField:r}=e;null===(t=P.value)||void 0===t||t.forEach((e=>{n.set(e[r],e)}))}else{const t=T.value;t&&n.set(t[e.valueField],t)}}}function U(t){const{onUpdateShow:n,"onUpdate:show":r}=e;n&&Ka(n,t),r&&Ka(r,t),h.value=t}function z(){I.value||(U(!0),h.value=!0,e.filterable&&K())}function N(){U(!1)}function j(){c.value="",x.value=b}const H=bt(!1);function Q(e){V(e.rawNode)}function V(t){if(I.value)return;const{tag:n,remote:r,clearFilterAfterSelect:i,valueField:o}=e;if(n&&!r){const{value:e}=x,t=e[0]||null;if(t){const e=w.value;e.length?e.push(t):w.value=[t],x.value=b}}if(r&&C.value.set(t[o],t),e.multiple){const a=function(t){if(!Array.isArray(t))return[];if(S.value)return Array.from(t);{const{remote:n}=e,{value:r}=d;if(n){const{value:e}=C;return t.filter((t=>r.has(t)||e.has(t)))}return t.filter((e=>r.has(e)))}}(s.value),l=a.findIndex((e=>e===t[o]));if(~l){if(a.splice(l,1),n&&!r){const e=W(t[o]);~e&&(w.value.splice(e,1),i&&(c.value=""))}}else a.push(t[o]),i&&(c.value="");O(a,M(a))}else{if(n&&!r){const e=W(t[o]);w.value=~e?[w.value[e]]:b}q(),N(),O(t[o],t)}}function W(t){return w.value.findIndex((n=>n[e.valueField]===t))}function G(t){var n,r,i,o,a;if(e.keyboard)switch(t.key){case" ":if(e.filterable)break;t.preventDefault();case"Enter":if(!(null===(n=A.value)||void 0===n?void 0:n.isComposing))if(p.value){const t=null===(r=m.value)||void 0===r?void 0:r.getPendingTmNode();t?Q(t):e.filterable||(N(),q())}else if(z(),e.tag&&H.value){const t=x.value[0];if(t){const n=t[e.valueField],{value:r}=s;e.multiple&&Array.isArray(r)&&r.some((e=>e===n))||V(t)}}t.preventDefault();break;case"ArrowUp":if(t.preventDefault(),e.loading)return;p.value&&(null===(i=m.value)||void 0===i||i.prev());break;case"ArrowDown":if(t.preventDefault(),e.loading)return;p.value?null===(o=m.value)||void 0===o||o.next():z();break;case"Escape":p.value&&(Xs(t),N()),null===(a=A.value)||void 0===a||a.focus()}else t.preventDefault()}function q(){var e;null===(e=A.value)||void 0===e||e.focus()}function K(){var e;null===(e=A.value)||void 0===e||e.focusInput()}R(),Ir(Tt(e,"options"),R);const Y={focus:()=>{var e;null===(e=A.value)||void 0===e||e.focus()},focusInput:()=>{var e;null===(e=A.value)||void 0===e||e.focusInput()},blur:()=>{var e;null===(e=A.value)||void 0===e||e.blur()},blurInput:()=>{var e;null===(e=A.value)||void 0===e||e.blurInput()}},X=eo((()=>{const{self:{menuBoxShadow:e}}=o.value;return{"--n-menu-box-shadow":e}})),$=i?Fv("select",void 0,X,e):void 0;return Object.assign(Object.assign({},Y),{mergedStatus:k,mergedClsPrefix:t,mergedBordered:n,namespace:r,treeMate:u,isMounted:Cl(),triggerRef:A,menuRef:m,pattern:c,uncontrolledShow:h,mergedShow:p,adjustedTo:kl(e),uncontrolledValue:a,mergedValue:s,followerRef:f,localizedPlaceholder:v,selectedOption:T,selectedOptions:P,mergedSize:F,mergedDisabled:I,focused:l,activeWithoutMenuOpen:H,inlineThemeDisabled:i,onTriggerInputFocus:function(){e.filterable&&(H.value=!0)},onTriggerInputBlur:function(){e.filterable&&(H.value=!1,p.value||j())},handleTriggerOrMenuResize:function(){var e;p.value&&(null===(e=f.value)||void 0===e||e.syncPosition())},handleMenuFocus:function(e){l.value=!0},handleMenuBlur:function(e){var t;(null===(t=A.value)||void 0===t?void 0:t.$el.contains(e.relatedTarget))||(l.value=!1,L(e),N())},handleMenuTabOut:function(){var e;null===(e=A.value)||void 0===e||e.focus(),N()},handleTriggerClick:function(){I.value||(p.value?e.filterable?K():N():z())},handleToggle:Q,handleDeleteOption:V,handlePatternInput:function(t){p.value||z();const{value:n}=t.target;c.value=n;const{tag:r,remote:i}=e;if(function(t){const{onSearch:n}=e;n&&Ka(n,t)}(n),r&&!i){if(!n)return void(x.value=b);const{onCreate:t}=e,r=t?t(n):{[e.labelField]:n,[e.valueField]:n},{valueField:i,labelField:o}=e;y.value.some((e=>e[i]===r[i]||e[o]===r[o]))||w.value.some((e=>e[i]===r[i]||e[o]===r[o]))?x.value=b:x.value=[r]}},handleClear:function(t){t.stopPropagation();const{multiple:n}=e;!n&&e.filterable&&N(),function(){const{onClear:t}=e;t&&Ka(t)}(),n?O([],[]):O(null,null)},handleTriggerBlur:function(e){var t,n;(null===(n=null===(t=m.value)||void 0===t?void 0:t.selfRef)||void 0===n?void 0:n.contains(e.relatedTarget))||(l.value=!1,L(e),N())},handleTriggerFocus:function(t){!function(t){const{onFocus:n,showOnFocus:r}=e,{nTriggerFormFocus:i}=D;n&&Ka(n,t),i(),r&&z()}(t),l.value=!0},handleKeydown:G,handleMenuAfterLeave:j,handleMenuClickOutside:function(e){var t;p.value&&((null===(t=A.value)||void 0===t?void 0:t.$el.contains(ma(e)))||N())},handleMenuScroll:function(t){!function(t){const{onScroll:n}=e;n&&Ka(n,t)}(t)},handleMenuKeydown:G,handleMenuMousedown:function(e){fa(e,"action")||fa(e,"empty")||e.preventDefault()},mergedTheme:o,cssVars:i?void 0:X,themeClass:null==$?void 0:$.themeClass,onRender:null==$?void 0:$.onRender})},render(){return to("div",{class:`${this.mergedClsPrefix}-select`},to(Vl,null,{default:()=>[to(Wl,null,{default:()=>to(kw,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,t;return[null===(t=(e=this.$slots).arrow)||void 0===t?void 0:t.call(e)]}})}),to(gc,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===kl.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>to(co,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,t,n;return this.mergedShow||"show"===this.displayDirective?(null===(e=this.onRender)||void 0===e||e.call(this),En(to(nw,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,null===(t=this.menuProps)||void 0===t?void 0:t.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[null===(n=this.menuProps)||void 0===n?void 0:n.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var e,t;return[null===(t=(e=this.$slots).empty)||void 0===t?void 0:t.call(e)]},header:()=>{var e,t;return[null===(t=(e=this.$slots).header)||void 0===t?void 0:t.call(e)]},action:()=>{var e,t;return[null===(t=(e=this.$slots).action)||void 0===t?void 0:t.call(e)]}}),"show"===this.displayDirective?[[Mo,this.mergedShow],[Yl,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[Yl,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}}),PC={itemPaddingSmall:"0 4px",itemMarginSmall:"0 0 0 8px",itemMarginSmallRtl:"0 8px 0 0",itemPaddingMedium:"0 4px",itemMarginMedium:"0 0 0 8px",itemMarginMediumRtl:"0 8px 0 0",itemPaddingLarge:"0 4px",itemMarginLarge:"0 0 0 8px",itemMarginLargeRtl:"0 8px 0 0",buttonIconSizeSmall:"14px",buttonIconSizeMedium:"16px",buttonIconSizeLarge:"18px",inputWidthSmall:"60px",selectWidthSmall:"unset",inputMarginSmall:"0 0 0 8px",inputMarginSmallRtl:"0 8px 0 0",selectMarginSmall:"0 0 0 8px",prefixMarginSmall:"0 8px 0 0",suffixMarginSmall:"0 0 0 8px",inputWidthMedium:"60px",selectWidthMedium:"unset",inputMarginMedium:"0 0 0 8px",inputMarginMediumRtl:"0 8px 0 0",selectMarginMedium:"0 0 0 8px",prefixMarginMedium:"0 8px 0 0",suffixMarginMedium:"0 0 0 8px",inputWidthLarge:"60px",selectWidthLarge:"unset",inputMarginLarge:"0 0 0 8px",inputMarginLargeRtl:"0 8px 0 0",selectMarginLarge:"0 0 0 8px",prefixMarginLarge:"0 8px 0 0",suffixMarginLarge:"0 0 0 8px"},TC={name:"Pagination",common:Lb,peers:{Select:_C,Input:qw,Popselect:yC},self:e=>{const{textColor2:t,primaryColor:n,primaryColorHover:r,primaryColorPressed:i,inputColorDisabled:o,textColorDisabled:a,borderColor:s,borderRadius:l,fontSizeTiny:c,fontSizeSmall:u,fontSizeMedium:d,heightTiny:h,heightSmall:p,heightMedium:A}=e;return Object.assign(Object.assign({},PC),{buttonColor:"#0000",buttonColorHover:"#0000",buttonColorPressed:"#0000",buttonBorder:`1px solid ${s}`,buttonBorderHover:`1px solid ${s}`,buttonBorderPressed:`1px solid ${s}`,buttonIconColor:t,buttonIconColorHover:t,buttonIconColorPressed:t,itemTextColor:t,itemTextColorHover:r,itemTextColorPressed:i,itemTextColorActive:n,itemTextColorDisabled:a,itemColor:"#0000",itemColorHover:"#0000",itemColorPressed:"#0000",itemColorActive:"#0000",itemColorActiveHover:"#0000",itemColorDisabled:o,itemBorder:"1px solid #0000",itemBorderHover:"1px solid #0000",itemBorderPressed:"1px solid #0000",itemBorderActive:`1px solid ${n}`,itemBorderDisabled:`1px solid ${s}`,itemBorderRadius:l,itemSizeSmall:h,itemSizeMedium:p,itemSizeLarge:A,itemFontSizeSmall:c,itemFontSizeMedium:u,itemFontSizeLarge:d,jumperFontSizeSmall:c,jumperFontSizeMedium:u,jumperFontSizeLarge:d,jumperTextColor:t,jumperTextColorDisabled:a})}},DC=e=>{var t;if(!e)return 10;const{defaultPageSize:n}=e;if(void 0!==n)return n;const r=null===(t=e.pageSizes)||void 0===t?void 0:t[0];return"number"==typeof r?r:(null==r?void 0:r.value)||10};function FC(e,t){const n=[];for(let r=e;r<=t;++r)n.push({label:`${r}`,value:r});return n}const IC="\n background: var(--n-item-color-hover);\n color: var(--n-item-text-color-hover);\n border: var(--n-item-border-hover);\n",kC=[Ns("button","\n background: var(--n-button-color-hover);\n border: var(--n-button-border-hover);\n color: var(--n-button-icon-color-hover);\n ")],OC=Us("pagination","\n display: flex;\n vertical-align: middle;\n font-size: var(--n-item-font-size);\n flex-wrap: nowrap;\n",[Us("pagination-prefix","\n display: flex;\n align-items: center;\n margin: var(--n-prefix-margin);\n "),Us("pagination-suffix","\n display: flex;\n align-items: center;\n margin: var(--n-suffix-margin);\n "),Ls("> *:not(:first-child)","\n margin: var(--n-item-margin);\n "),Us("select","\n width: var(--n-select-width);\n "),Ls("&.transition-disabled",[Us("pagination-item","transition: none!important;")]),Us("pagination-quick-jumper","\n white-space: nowrap;\n display: flex;\n color: var(--n-jumper-text-color);\n transition: color .3s var(--n-bezier);\n align-items: center;\n font-size: var(--n-jumper-font-size);\n ",[Us("input","\n margin: var(--n-input-margin);\n width: var(--n-input-width);\n ")]),Us("pagination-item","\n position: relative;\n cursor: pointer;\n user-select: none;\n -webkit-user-select: none;\n display: flex;\n align-items: center;\n justify-content: center;\n box-sizing: border-box;\n min-width: var(--n-item-size);\n height: var(--n-item-size);\n padding: var(--n-item-padding);\n background-color: var(--n-item-color);\n color: var(--n-item-text-color);\n border-radius: var(--n-item-border-radius);\n border: var(--n-item-border);\n fill: var(--n-button-icon-color);\n transition:\n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n fill .3s var(--n-bezier);\n ",[Ns("button","\n background: var(--n-button-color);\n color: var(--n-button-icon-color);\n border: var(--n-button-border);\n padding: 0;\n ",[Us("base-icon","\n font-size: var(--n-button-icon-size);\n ")]),js("disabled",[Ns("hover",IC,kC),Ls("&:hover",IC,kC),Ls("&:active","\n background: var(--n-item-color-pressed);\n color: var(--n-item-text-color-pressed);\n border: var(--n-item-border-pressed);\n ",[Ns("button","\n background: var(--n-button-color-pressed);\n border: var(--n-button-border-pressed);\n color: var(--n-button-icon-color-pressed);\n ")]),Ns("active","\n background: var(--n-item-color-active);\n color: var(--n-item-text-color-active);\n border: var(--n-item-border-active);\n ",[Ls("&:hover","\n background: var(--n-item-color-active-hover);\n ")])]),Ns("disabled","\n cursor: not-allowed;\n color: var(--n-item-text-color-disabled);\n ",[Ns("active, button","\n background-color: var(--n-item-color-disabled);\n border: var(--n-item-border-disabled);\n ")])]),Ns("disabled","\n cursor: not-allowed;\n ",[Us("pagination-quick-jumper","\n color: var(--n-jumper-text-color-disabled);\n ")]),Ns("simple","\n display: flex;\n align-items: center;\n flex-wrap: nowrap;\n ",[Us("pagination-quick-jumper",[Us("input","\n margin: 0;\n ")])])]),LC=Dn({name:"Pagination",props:Object.assign(Object.assign({},sf.props),{simple:Boolean,page:Number,defaultPage:{type:Number,default:1},itemCount:Number,pageCount:Number,defaultPageCount:{type:Number,default:1},showSizePicker:Boolean,pageSize:Number,defaultPageSize:Number,pageSizes:{type:Array,default:()=>[10]},showQuickJumper:Boolean,size:{type:String,default:"medium"},disabled:Boolean,pageSlot:{type:Number,default:9},selectProps:Object,prev:Function,next:Function,goto:Function,prefix:Function,suffix:Function,label:Function,displayOrder:{type:Array,default:["pages","size-picker","quick-jumper"]},to:kl.propTo,showQuickJumpDropdown:{type:Boolean,default:!0},"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],onPageSizeChange:[Function,Array],onChange:[Function,Array]}),setup(e){const{mergedComponentPropsRef:t,mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedRtlRef:i}=cf(e),o=sf("Pagination","-pagination",OC,TC,e,n),{localeRef:a}=Tv("Pagination"),s=bt(null),l=bt(e.defaultPage),c=bt(DC(e)),u=xl(Tt(e,"page"),l),d=xl(Tt(e,"pageSize"),c),h=eo((()=>{const{itemCount:t}=e;if(void 0!==t)return Math.max(1,Math.ceil(t/d.value));const{pageCount:n}=e;return void 0!==n?Math.max(n,1):1})),p=bt("");Dr((()=>{e.simple,p.value=String(u.value)}));const A=bt(!1),f=bt(!1),m=bt(!1),g=bt(!1),v=eo((()=>function(e,t,n,r){let i=!1,o=!1,a=1,s=t;if(1===t)return{hasFastBackward:!1,hasFastForward:!1,fastForwardTo:s,fastBackwardTo:a,items:[{type:"page",label:1,active:1===e,mayBeFastBackward:!1,mayBeFastForward:!1}]};if(2===t)return{hasFastBackward:!1,hasFastForward:!1,fastForwardTo:s,fastBackwardTo:a,items:[{type:"page",label:1,active:1===e,mayBeFastBackward:!1,mayBeFastForward:!1},{type:"page",label:2,active:2===e,mayBeFastBackward:!0,mayBeFastForward:!1}]};const l=t;let c=e,u=e;const d=(n-5)/2;u+=Math.ceil(d),u=Math.min(Math.max(u,1+n-3),l-2),c-=Math.floor(d),c=Math.max(Math.min(c,l-n+3),3);let h=!1,p=!1;c>3&&(h=!0),u<l-2&&(p=!0);const A=[];A.push({type:"page",label:1,active:1===e,mayBeFastBackward:!1,mayBeFastForward:!1}),h?(i=!0,a=c-1,A.push({type:"fast-backward",active:!1,label:void 0,options:r?FC(2,c-1):null})):l>=2&&A.push({type:"page",label:2,mayBeFastBackward:!0,mayBeFastForward:!1,active:2===e});for(let f=c;f<=u;++f)A.push({type:"page",label:f,mayBeFastBackward:!1,mayBeFastForward:!1,active:e===f});return p?(o=!0,s=u+1,A.push({type:"fast-forward",active:!1,label:void 0,options:r?FC(u+1,l-1):null})):u===l-2&&A[A.length-1].label!==l-1&&A.push({type:"page",mayBeFastForward:!0,mayBeFastBackward:!1,label:l-1,active:e===l-1}),A[A.length-1].label!==l&&A.push({type:"page",mayBeFastForward:!1,mayBeFastBackward:!1,label:l,active:e===l}),{hasFastBackward:i,hasFastForward:o,fastBackwardTo:a,fastForwardTo:s,items:A}}(u.value,h.value,e.pageSlot,e.showQuickJumpDropdown)));Dr((()=>{v.value.hasFastBackward?v.value.hasFastForward||(A.value=!1,m.value=!1):(f.value=!1,g.value=!1)}));const y=eo((()=>{const t=a.value.selectionSuffix;return e.pageSizes.map((e=>"number"==typeof e?{label:`${e} / ${t}`,value:e}:e))})),b=eo((()=>{var n,r;return(null===(r=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.Pagination)||void 0===r?void 0:r.inputSize)||Ja(e.size)})),w=eo((()=>{var n,r;return(null===(r=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.Pagination)||void 0===r?void 0:r.selectSize)||Ja(e.size)})),x=eo((()=>(u.value-1)*d.value)),C=eo((()=>{const t=u.value*d.value-1,{itemCount:n}=e;return void 0!==n&&t>n-1?n-1:t})),S=eo((()=>{const{itemCount:t}=e;return void 0!==t?t:(e.pageCount||1)*d.value})),B=Iv("Pagination",i,n),_=()=>{Vt((()=>{var e;const{value:t}=s;t&&(t.classList.add("transition-disabled"),null===(e=s.value)||void 0===e||e.offsetWidth,t.classList.remove("transition-disabled"))}))};function E(t){if(t===u.value)return;const{"onUpdate:page":n,onUpdatePage:r,onChange:i,simple:o}=e;n&&Ka(n,t),r&&Ka(r,t),i&&Ka(i,t),l.value=t,o&&(p.value=String(t))}Dr((()=>{u.value,d.value,_()}));const M=eo((()=>{const{size:t}=e,{self:{buttonBorder:n,buttonBorderHover:r,buttonBorderPressed:i,buttonIconColor:a,buttonIconColorHover:s,buttonIconColorPressed:l,itemTextColor:c,itemTextColorHover:u,itemTextColorPressed:d,itemTextColorActive:h,itemTextColorDisabled:p,itemColor:A,itemColorHover:f,itemColorPressed:m,itemColorActive:g,itemColorActiveHover:v,itemColorDisabled:y,itemBorder:b,itemBorderHover:w,itemBorderPressed:x,itemBorderActive:C,itemBorderDisabled:S,itemBorderRadius:B,jumperTextColor:_,jumperTextColorDisabled:E,buttonColor:M,buttonColorHover:P,buttonColorPressed:T,[Gs("itemPadding",t)]:D,[Gs("itemMargin",t)]:F,[Gs("inputWidth",t)]:I,[Gs("selectWidth",t)]:k,[Gs("inputMargin",t)]:O,[Gs("selectMargin",t)]:L,[Gs("jumperFontSize",t)]:R,[Gs("prefixMargin",t)]:U,[Gs("suffixMargin",t)]:z,[Gs("itemSize",t)]:N,[Gs("buttonIconSize",t)]:j,[Gs("itemFontSize",t)]:H,[`${Gs("itemMargin",t)}Rtl`]:Q,[`${Gs("inputMargin",t)}Rtl`]:V},common:{cubicBezierEaseInOut:W}}=o.value;return{"--n-prefix-margin":U,"--n-suffix-margin":z,"--n-item-font-size":H,"--n-select-width":k,"--n-select-margin":L,"--n-input-width":I,"--n-input-margin":O,"--n-input-margin-rtl":V,"--n-item-size":N,"--n-item-text-color":c,"--n-item-text-color-disabled":p,"--n-item-text-color-hover":u,"--n-item-text-color-active":h,"--n-item-text-color-pressed":d,"--n-item-color":A,"--n-item-color-hover":f,"--n-item-color-disabled":y,"--n-item-color-active":g,"--n-item-color-active-hover":v,"--n-item-color-pressed":m,"--n-item-border":b,"--n-item-border-hover":w,"--n-item-border-disabled":S,"--n-item-border-active":C,"--n-item-border-pressed":x,"--n-item-padding":D,"--n-item-border-radius":B,"--n-bezier":W,"--n-jumper-font-size":R,"--n-jumper-text-color":_,"--n-jumper-text-color-disabled":E,"--n-item-margin":F,"--n-item-margin-rtl":Q,"--n-button-icon-size":j,"--n-button-icon-color":a,"--n-button-icon-color-hover":s,"--n-button-icon-color-pressed":l,"--n-button-color-hover":P,"--n-button-color":M,"--n-button-color-pressed":T,"--n-button-border":n,"--n-button-border-hover":r,"--n-button-border-pressed":i}})),P=r?Fv("pagination",eo((()=>{let t="";const{size:n}=e;return t+=n[0],t})),M,e):void 0;return{rtlEnabled:B,mergedClsPrefix:n,locale:a,selfRef:s,mergedPage:u,pageItems:eo((()=>v.value.items)),mergedItemCount:S,jumperValue:p,pageSizeOptions:y,mergedPageSize:d,inputSize:b,selectSize:w,mergedTheme:o,mergedPageCount:h,startIndex:x,endIndex:C,showFastForwardMenu:m,showFastBackwardMenu:g,fastForwardActive:A,fastBackwardActive:f,handleMenuSelect:e=>{E(e)},handleFastForwardMouseenter:()=>{e.disabled||(A.value=!0,_())},handleFastForwardMouseleave:()=>{e.disabled||(A.value=!1,_())},handleFastBackwardMouseenter:()=>{f.value=!0,_()},handleFastBackwardMouseleave:()=>{f.value=!1,_()},handleJumperInput:function(e){p.value=e.replace(/\D+/g,"")},handleBackwardClick:function(){if(e.disabled)return;E(Math.max(u.value-1,1))},handleForwardClick:function(){if(e.disabled)return;E(Math.min(u.value+1,h.value))},handlePageItemClick:function(t){if(!e.disabled)switch(t.type){case"page":E(t.label);break;case"fast-backward":!function(){if(e.disabled)return;E(Math.max(v.value.fastBackwardTo,1))}();break;case"fast-forward":!function(){if(e.disabled)return;E(Math.min(v.value.fastForwardTo,h.value))}()}},handleSizePickerChange:function(t){!function(t){if(t===d.value)return;const{"onUpdate:pageSize":n,onUpdatePageSize:r,onPageSizeChange:i}=e;n&&Ka(n,t),r&&Ka(r,t),i&&Ka(i,t),c.value=t,h.value<u.value&&E(h.value)}(t)},handleQuickJumperChange:function(){!function(){const t=parseInt(p.value);Number.isNaN(t)||(E(Math.max(1,Math.min(t,h.value))),e.simple||(p.value=""))}()},cssVars:r?void 0:M,themeClass:null==P?void 0:P.themeClass,onRender:null==P?void 0:P.onRender}},render(){const{$slots:e,mergedClsPrefix:t,disabled:n,cssVars:r,mergedPage:i,mergedPageCount:o,pageItems:a,showSizePicker:s,showQuickJumper:l,mergedTheme:c,locale:u,inputSize:d,selectSize:h,mergedPageSize:p,pageSizeOptions:A,jumperValue:f,simple:m,prev:g,next:v,prefix:y,suffix:b,label:w,goto:x,handleJumperInput:C,handleSizePickerChange:S,handleBackwardClick:B,handlePageItemClick:_,handleForwardClick:E,handleQuickJumperChange:M,onRender:P}=this;null==P||P();const T=e.prefix||y,D=e.suffix||b,F=g||e.prev,I=v||e.next,k=w||e.label;return to("div",{ref:"selfRef",class:[`${t}-pagination`,this.themeClass,this.rtlEnabled&&`${t}-pagination--rtl`,n&&`${t}-pagination--disabled`,m&&`${t}-pagination--simple`],style:r},T?to("div",{class:`${t}-pagination-prefix`},T({page:i,pageSize:p,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.mergedItemCount})):null,this.displayOrder.map((e=>{switch(e){case"pages":return to(di,null,to("div",{class:[`${t}-pagination-item`,!F&&`${t}-pagination-item--button`,(i<=1||i>o||n)&&`${t}-pagination-item--disabled`],onClick:B},F?F({page:i,pageSize:p,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.mergedItemCount}):to(py,{clsPrefix:t},{default:()=>this.rtlEnabled?to($v,null):to(Uv,null)})),m?to(di,null,to("div",{class:`${t}-pagination-quick-jumper`},to(ex,{value:f,onUpdateValue:C,size:d,placeholder:"",disabled:n,theme:c.peers.Input,themeOverrides:c.peerOverrides.Input,onChange:M}))," / ",o):a.map(((e,r)=>{let i,o,a;const{type:s}=e;switch(s){case"page":const n=e.label;i=k?k({type:"page",node:n,active:e.active}):n;break;case"fast-forward":const r=this.fastForwardActive?to(py,{clsPrefix:t},{default:()=>this.rtlEnabled?to(Kv,null):to(Yv,null)}):to(py,{clsPrefix:t},{default:()=>to(Zv,null)});i=k?k({type:"fast-forward",node:r,active:this.fastForwardActive||this.showFastForwardMenu}):r,o=this.handleFastForwardMouseenter,a=this.handleFastForwardMouseleave;break;case"fast-backward":const s=this.fastBackwardActive?to(py,{clsPrefix:t},{default:()=>this.rtlEnabled?to(Yv,null):to(Kv,null)}):to(py,{clsPrefix:t},{default:()=>to(Zv,null)});i=k?k({type:"fast-backward",node:s,active:this.fastBackwardActive||this.showFastBackwardMenu}):s,o=this.handleFastBackwardMouseenter,a=this.handleFastBackwardMouseleave}const l=to("div",{key:r,class:[`${t}-pagination-item`,e.active&&`${t}-pagination-item--active`,"page"!==s&&("fast-backward"===s&&this.showFastBackwardMenu||"fast-forward"===s&&this.showFastForwardMenu)&&`${t}-pagination-item--hover`,n&&`${t}-pagination-item--disabled`,"page"===s&&`${t}-pagination-item--clickable`],onClick:()=>{_(e)},onMouseenter:o,onMouseleave:a},i);if("page"!==s||e.mayBeFastBackward||e.mayBeFastForward){const t="page"===e.type?e.mayBeFastBackward?"fast-backward":"fast-forward":e.type;return"page"===e.type||e.options?to(BC,{to:this.to,key:t,disabled:n,trigger:"hover",virtualScroll:!0,style:{width:"60px"},theme:c.peers.Popselect,themeOverrides:c.peerOverrides.Popselect,builtinThemeOverrides:{peers:{InternalSelectMenu:{height:"calc(var(--n-option-height) * 4.6)"}}},nodeProps:()=>({style:{justifyContent:"center"}}),show:"page"!==s&&("fast-backward"===s?this.showFastBackwardMenu:this.showFastForwardMenu),onUpdateShow:e=>{"page"!==s&&(e?"fast-backward"===s?this.showFastBackwardMenu=e:this.showFastForwardMenu=e:(this.showFastBackwardMenu=!1,this.showFastForwardMenu=!1))},options:"page"!==e.type&&e.options?e.options:[],onUpdateValue:this.handleMenuSelect,scrollable:!0,showCheckmark:!1},{default:()=>l}):l}return l})),to("div",{class:[`${t}-pagination-item`,!I&&`${t}-pagination-item--button`,{[`${t}-pagination-item--disabled`]:i<1||i>=o||n}],onClick:E},I?I({page:i,pageSize:p,pageCount:o,itemCount:this.mergedItemCount,startIndex:this.startIndex,endIndex:this.endIndex}):to(py,{clsPrefix:t},{default:()=>this.rtlEnabled?to(Uv,null):to($v,null)})));case"size-picker":return!m&&s?to(MC,Object.assign({consistentMenuWidth:!1,placeholder:"",showCheckmark:!1,to:this.to},this.selectProps,{size:h,options:A,value:p,disabled:n,theme:c.peers.Select,themeOverrides:c.peerOverrides.Select,onUpdateValue:S})):null;case"quick-jumper":return!m&&l?to("div",{class:`${t}-pagination-quick-jumper`},x?x():rs(this.$slots.goto,(()=>[u.goto])),to(ex,{value:f,onUpdateValue:C,size:d,placeholder:"",disabled:n,theme:c.peers.Input,themeOverrides:c.peerOverrides.Input,onChange:M})):null;default:return null}})),D?to("div",{class:`${t}-pagination-suffix`},D({page:i,pageSize:p,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.mergedItemCount})):null)}}),RC={padding:"8px 14px"},UC={name:"Tooltip",common:Lb,peers:{Popover:aw},self:e=>{const{borderRadius:t,boxShadow2:n,baseColor:r}=e;return Object.assign(Object.assign({},RC),{borderRadius:t,boxShadow:n,color:Ra(r,"rgba(0, 0, 0, .85)"),textColor:r})}},zC={name:"Ellipsis",common:Lb,peers:{Tooltip:UC}},NC={radioSizeSmall:"14px",radioSizeMedium:"16px",radioSizeLarge:"18px",labelPadding:"0 8px",labelFontWeight:"400"},jC={name:"Radio",common:Lb,self:e=>{const{borderColor:t,primaryColor:n,baseColor:r,textColorDisabled:i,inputColorDisabled:o,textColor2:a,opacityDisabled:s,borderRadius:l,fontSizeSmall:c,fontSizeMedium:u,fontSizeLarge:d,heightSmall:h,heightMedium:p,heightLarge:A,lineHeight:f}=e;return Object.assign(Object.assign({},NC),{labelLineHeight:f,buttonHeightSmall:h,buttonHeightMedium:p,buttonHeightLarge:A,fontSizeSmall:c,fontSizeMedium:u,fontSizeLarge:d,boxShadow:`inset 0 0 0 1px ${t}`,boxShadowActive:`inset 0 0 0 1px ${n}`,boxShadowFocus:`inset 0 0 0 1px ${n}, 0 0 0 2px ${Ua(n,{alpha:.2})}`,boxShadowHover:`inset 0 0 0 1px ${n}`,boxShadowDisabled:`inset 0 0 0 1px ${t}`,color:r,colorDisabled:o,colorActive:"#0000",textColor:a,textColorDisabled:i,dotColorActive:n,dotColorDisabled:t,buttonBorderColor:t,buttonBorderColorActive:n,buttonBorderColorHover:t,buttonColor:r,buttonColorActive:r,buttonTextColor:a,buttonTextColorActive:n,buttonTextColorHover:n,opacityDisabled:s,buttonBoxShadowFocus:`inset 0 0 0 1px ${n}, 0 0 0 2px ${Ua(n,{alpha:.3})}`,buttonBoxShadowHover:"inset 0 0 0 1px #0000",buttonBoxShadow:"inset 0 0 0 1px #0000",buttonBorderRadius:l})}},HC={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"},QC={name:"Dropdown",common:Lb,peers:{Popover:aw},self:e=>{const{primaryColor:t,textColor2:n,dividerColor:r,hoverColor:i,popoverColor:o,invertedColor:a,borderRadius:s,fontSizeSmall:l,fontSizeMedium:c,fontSizeLarge:u,fontSizeHuge:d,heightSmall:h,heightMedium:p,heightLarge:A,heightHuge:f,textColor3:m,opacityDisabled:g}=e;return Object.assign(Object.assign({},HC),{optionHeightSmall:h,optionHeightMedium:p,optionHeightLarge:A,optionHeightHuge:f,borderRadius:s,fontSizeSmall:l,fontSizeMedium:c,fontSizeLarge:u,fontSizeHuge:d,optionTextColor:n,optionTextColorHover:n,optionTextColorActive:t,optionTextColorChildActive:t,color:o,dividerColor:r,suffixColor:n,prefixColor:n,optionColorHover:i,optionColorActive:Ua(t,{alpha:.1}),groupHeaderTextColor:m,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:a,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:t,optionColorActiveInverted:t,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:g})}},VC={thPaddingSmall:"8px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"8px",tdPaddingMedium:"12px",tdPaddingLarge:"12px",sorterSize:"15px",resizableContainerSize:"8px",resizableSize:"2px",filterSize:"15px",paginationMargin:"12px 0 0 0",emptyPadding:"48px 0",actionPadding:"8px 12px",actionButtonMargin:"0 8px 0 0"},WC={name:"DataTable",common:Lb,peers:{Button:Cx,Checkbox:oC,Radio:jC,Pagination:TC,Scrollbar:Hb,Empty:Ub,Popover:aw,Ellipsis:zC,Dropdown:QC},self:e=>{const{cardColor:t,modalColor:n,popoverColor:r,textColor2:i,textColor1:o,tableHeaderColor:a,tableColorHover:s,iconColor:l,primaryColor:c,fontWeightStrong:u,borderRadius:d,lineHeight:h,fontSizeSmall:p,fontSizeMedium:A,fontSizeLarge:f,dividerColor:m,heightSmall:g,opacityDisabled:v,tableColorStriped:y}=e;return Object.assign(Object.assign({},VC),{actionDividerColor:m,lineHeight:h,borderRadius:d,fontSizeSmall:p,fontSizeMedium:A,fontSizeLarge:f,borderColor:Ra(t,m),tdColorHover:Ra(t,s),tdColorStriped:Ra(t,y),thColor:Ra(t,a),thColorHover:Ra(Ra(t,a),s),tdColor:t,tdTextColor:i,thTextColor:o,thFontWeight:u,thButtonColorHover:s,thIconColor:l,thIconColorActive:c,borderColorModal:Ra(n,m),tdColorHoverModal:Ra(n,s),tdColorStripedModal:Ra(n,y),thColorModal:Ra(n,a),thColorHoverModal:Ra(Ra(n,a),s),tdColorModal:n,borderColorPopover:Ra(r,m),tdColorHoverPopover:Ra(r,s),tdColorStripedPopover:Ra(r,y),thColorPopover:Ra(r,a),thColorHoverPopover:Ra(Ra(r,a),s),tdColorPopover:r,boxShadowBefore:"inset -12px 0 8px -12px rgba(0, 0, 0, .18)",boxShadowAfter:"inset 12px 0 8px -12px rgba(0, 0, 0, .18)",loadingColor:c,loadingSize:g,opacityLoading:v})}},GC=Dn({name:"Tooltip",props:Object.assign(Object.assign({},yw),sf.props),__popover__:!0,setup(e){const{mergedClsPrefixRef:t}=cf(e),n=sf("Tooltip","-tooltip",void 0,UC,e,t),r=bt(null),i={syncPosition(){r.value.syncPosition()},setShow(e){r.value.setShow(e)}};return Object.assign(Object.assign({},i),{popoverRef:r,mergedTheme:n,popoverThemeOverrides:eo((()=>n.value.self))})},render(){const{mergedTheme:e,internalExtraClass:t}=this;return to(bw,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:t.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),qC=Us("ellipsis",{overflow:"hidden"},[js("line-clamp","\n white-space: nowrap;\n display: inline-block;\n vertical-align: bottom;\n max-width: 100%;\n "),Ns("line-clamp","\n display: -webkit-inline-box;\n -webkit-box-orient: vertical;\n "),Ns("cursor-pointer","\n cursor: pointer;\n ")]);function KC(e){return`${e}-ellipsis--line-clamp`}function YC(e,t){return`${e}-ellipsis--cursor-${t}`}const XC=Object.assign(Object.assign({},sf.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),$C=Dn({name:"Ellipsis",inheritAttrs:!1,props:XC,setup(e,{slots:t,attrs:n}){const r=uf(),i=sf("Ellipsis","-ellipsis",qC,zC,e,r),o=bt(null),a=bt(null),s=bt(null),l=bt(!1),c=eo((()=>{const{lineClamp:t}=e,{value:n}=l;return void 0!==t?{textOverflow:"","-webkit-line-clamp":n?"":t}:{textOverflow:n?"":"ellipsis","-webkit-line-clamp":""}}));function u(){let t=!1;const{value:n}=l;if(n)return!0;const{value:i}=o;if(i){const{lineClamp:n}=e;if(function(t){if(!t)return;const n=c.value,i=KC(r.value);void 0!==e.lineClamp?h(t,i,"add"):h(t,i,"remove");for(const e in n)t.style[e]!==n[e]&&(t.style[e]=n[e])}(i),void 0!==n)t=i.scrollHeight<=i.offsetHeight;else{const{value:e}=a;e&&(t=e.getBoundingClientRect().width<=i.getBoundingClientRect().width)}!function(t,n){const i=YC(r.value,"pointer");"click"!==e.expandTrigger||n?h(t,i,"remove"):h(t,i,"add")}(i,t)}return t}const d=eo((()=>"click"===e.expandTrigger?()=>{var e;const{value:t}=l;t&&(null===(e=s.value)||void 0===e||e.setShow(!1)),l.value=!t}:void 0));Nr((()=>{var t;e.tooltip&&(null===(t=s.value)||void 0===t||t.setShow(!1))}));function h(e,t,n){"add"===n?e.classList.contains(t)||e.classList.add(t):e.classList.contains(t)&&e.classList.remove(t)}return{mergedTheme:i,triggerRef:o,triggerInnerRef:a,tooltipRef:s,handleClick:d,renderTrigger:()=>to("span",Object.assign({},Li(n,{class:[`${r.value}-ellipsis`,void 0!==e.lineClamp?KC(r.value):void 0,"click"===e.expandTrigger?YC(r.value,"pointer"):void 0],style:c.value}),{ref:"triggerRef",onClick:d.value,onMouseenter:"click"===e.expandTrigger?u:void 0}),e.lineClamp?t:to("span",{ref:"triggerInnerRef"},t)),getTooltipDisabled:u}},render(){var e;const{tooltip:t,renderTrigger:n,$slots:r}=this;if(t){const{mergedTheme:i}=this;return to(GC,Object.assign({ref:"tooltipRef",placement:"top"},t,{getDisabled:this.getTooltipDisabled,theme:i.peers.Tooltip,themeOverrides:i.peerOverrides.Tooltip}),{trigger:n,default:null!==(e=r.tooltip)&&void 0!==e?e:r.default})}return n()}}),JC=Dn({name:"PerformantEllipsis",props:XC,inheritAttrs:!1,setup(e,{attrs:t,slots:n}){const r=bt(!1),i=uf();Dv("-ellipsis",qC,i);return{mouseEntered:r,renderTrigger:()=>{const{lineClamp:o}=e,a=i.value;return to("span",Object.assign({},Li(t,{class:[`${a}-ellipsis`,void 0!==o?KC(a):void 0,"click"===e.expandTrigger?YC(a,"pointer"):void 0],style:void 0===o?{textOverflow:"ellipsis"}:{"-webkit-line-clamp":o}}),{onMouseenter:()=>{r.value=!0}}),o?n:to("span",null,n))}}},render(){return this.mouseEntered?to($C,Li({},this.$attrs,this.$props),this.$slots):this.renderTrigger()}}),ZC=Dn({name:"DataTableRenderSorter",props:{render:{type:Function,required:!0},order:{type:[String,Boolean],default:!1}},render(){const{render:e,order:t}=this;return e({order:t})}}),eS=Object.assign(Object.assign({},sf.props),{onUnstableColumnResize:Function,pagination:{type:[Object,Boolean],default:!1},paginateSinglePage:{type:Boolean,default:!0},minHeight:[Number,String],maxHeight:[Number,String],columns:{type:Array,default:()=>[]},rowClassName:[String,Function],rowProps:Function,rowKey:Function,summary:[Function],data:{type:Array,default:()=>[]},loading:Boolean,bordered:{type:Boolean,default:void 0},bottomBordered:{type:Boolean,default:void 0},striped:Boolean,scrollX:[Number,String],defaultCheckedRowKeys:{type:Array,default:()=>[]},checkedRowKeys:Array,singleLine:{type:Boolean,default:!0},singleColumn:Boolean,size:{type:String,default:"medium"},remote:Boolean,defaultExpandedRowKeys:{type:Array,default:[]},defaultExpandAll:Boolean,expandedRowKeys:Array,stickyExpandedRows:Boolean,virtualScroll:Boolean,tableLayout:{type:String,default:"auto"},allowCheckingNotLoaded:Boolean,cascade:{type:Boolean,default:!0},childrenKey:{type:String,default:"children"},indent:{type:Number,default:16},flexHeight:Boolean,summaryPlacement:{type:String,default:"bottom"},paginationBehaviorOnFilter:{type:String,default:"current"},scrollbarProps:Object,renderCell:Function,renderExpandIcon:Function,spinProps:{type:Object,default:{}},onLoad:Function,"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],"onUpdate:sorter":[Function,Array],onUpdateSorter:[Function,Array],"onUpdate:filters":[Function,Array],onUpdateFilters:[Function,Array],"onUpdate:checkedRowKeys":[Function,Array],onUpdateCheckedRowKeys:[Function,Array],"onUpdate:expandedRowKeys":[Function,Array],onUpdateExpandedRowKeys:[Function,Array],onScroll:Function,onPageChange:[Function,Array],onPageSizeChange:[Function,Array],onSorterChange:[Function,Array],onFiltersChange:[Function,Array],onCheckedRowKeysChange:[Function,Array]}),tS="n-data-table",nS=Dn({name:"SortIcon",props:{column:{type:Object,required:!0}},setup(e){const{mergedComponentPropsRef:t}=cf(),{mergedSortStateRef:n,mergedClsPrefixRef:r}=rr(tS),i=eo((()=>n.value.find((t=>t.columnKey===e.column.key)))),o=eo((()=>void 0!==i.value)),a=eo((()=>{const{value:e}=i;return!(!e||!o.value)&&e.order})),s=eo((()=>{var n,r;return(null===(r=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.DataTable)||void 0===r?void 0:r.renderSorter)||e.column.renderSorter}));return{mergedClsPrefix:r,active:o,mergedSortOrder:a,mergedRenderSorter:s}},render(){const{mergedRenderSorter:e,mergedSortOrder:t,mergedClsPrefix:n}=this,{renderSorterIcon:r}=this.column;return e?to(ZC,{render:e,order:t}):to("span",{class:[`${n}-data-table-sorter`,"ascend"===t&&`${n}-data-table-sorter--asc`,"descend"===t&&`${n}-data-table-sorter--desc`]},r?r({order:t}):to(py,{clsPrefix:n},{default:()=>to(Ov,null)}))}}),rS=Dn({name:"DataTableRenderFilter",props:{render:{type:Function,required:!0},active:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},render(){const{render:e,active:t,show:n}=this;return e({active:t,show:n})}}),iS={name:String,value:{type:[String,Number,Boolean],default:"on"},checked:{type:Boolean,default:void 0},defaultChecked:Boolean,disabled:{type:Boolean,default:void 0},label:String,size:String,onUpdateChecked:[Function,Array],"onUpdate:checked":[Function,Array],checkedValue:{type:Boolean,default:void 0}},oS="n-radio-group";function aS(e){const t=Lu(e,{mergedSize(t){const{size:n}=e;if(void 0!==n)return n;if(a){const{mergedSizeRef:{value:e}}=a;if(void 0!==e)return e}return t?t.mergedSize.value:"medium"},mergedDisabled:t=>!!e.disabled||(!!(null==a?void 0:a.disabledRef.value)||!!(null==t?void 0:t.disabled.value))}),{mergedSizeRef:n,mergedDisabledRef:r}=t,i=bt(null),o=bt(null),a=rr(oS,null),s=bt(e.defaultChecked),l=xl(Tt(e,"checked"),s),c=Zs((()=>a?a.valueRef.value===e.value:l.value)),u=Zs((()=>{const{name:t}=e;return void 0!==t?t:a?a.nameRef.value:void 0})),d=bt(!1);function h(){r.value||c.value||function(){if(a){const{doUpdateValue:t}=a,{value:n}=e;Ka(t,n)}else{const{onUpdateChecked:n,"onUpdate:checked":r}=e,{nTriggerFormInput:i,nTriggerFormChange:o}=t;n&&Ka(n,!0),r&&Ka(r,!0),i(),o(),s.value=!0}}()}return{mergedClsPrefix:a?a.mergedClsPrefixRef:cf(e).mergedClsPrefixRef,inputRef:i,labelRef:o,mergedName:u,mergedDisabled:r,renderSafeChecked:c,focus:d,mergedSize:n,handleRadioInputChange:function(){h(),i.value&&(i.value.checked=c.value)},handleRadioInputBlur:function(){d.value=!1},handleRadioInputFocus:function(){d.value=!0}}}const sS=Us("radio","\n line-height: var(--n-label-line-height);\n outline: none;\n position: relative;\n user-select: none;\n -webkit-user-select: none;\n display: inline-flex;\n align-items: flex-start;\n flex-wrap: nowrap;\n font-size: var(--n-font-size);\n word-break: break-word;\n",[Ns("checked",[zs("dot","\n background-color: var(--n-color-active);\n ")]),zs("dot-wrapper","\n position: relative;\n flex-shrink: 0;\n flex-grow: 0;\n width: var(--n-radio-size);\n "),Us("radio-input","\n position: absolute;\n border: 0;\n border-radius: inherit;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n opacity: 0;\n z-index: 1;\n cursor: pointer;\n "),zs("dot","\n position: absolute;\n top: 50%;\n left: 0;\n transform: translateY(-50%);\n height: var(--n-radio-size);\n width: var(--n-radio-size);\n background: var(--n-color);\n box-shadow: var(--n-box-shadow);\n border-radius: 50%;\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n ",[Ls("&::before",'\n content: "";\n opacity: 0;\n position: absolute;\n left: 4px;\n top: 4px;\n height: calc(100% - 8px);\n width: calc(100% - 8px);\n border-radius: 50%;\n transform: scale(.8);\n background: var(--n-dot-color-active);\n transition: \n opacity .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n transform .3s var(--n-bezier);\n '),Ns("checked",{boxShadow:"var(--n-box-shadow-active)"},[Ls("&::before","\n opacity: 1;\n transform: scale(1);\n ")])]),zs("label","\n color: var(--n-text-color);\n padding: var(--n-label-padding);\n font-weight: var(--n-label-font-weight);\n display: inline-block;\n transition: color .3s var(--n-bezier);\n "),js("disabled","\n cursor: pointer;\n ",[Ls("&:hover",[zs("dot",{boxShadow:"var(--n-box-shadow-hover)"})]),Ns("focus",[Ls("&:not(:active)",[zs("dot",{boxShadow:"var(--n-box-shadow-focus)"})])])]),Ns("disabled","\n cursor: not-allowed;\n ",[zs("dot",{boxShadow:"var(--n-box-shadow-disabled)",backgroundColor:"var(--n-color-disabled)"},[Ls("&::before",{backgroundColor:"var(--n-dot-color-disabled)"}),Ns("checked","\n opacity: 1;\n ")]),zs("label",{color:"var(--n-text-color-disabled)"}),Us("radio-input","\n cursor: not-allowed;\n ")])]),lS=Dn({name:"Radio",props:Object.assign(Object.assign({},sf.props),iS),setup(e){const t=aS(e),n=sf("Radio","-radio",sS,jC,e,t.mergedClsPrefix),r=eo((()=>{const{mergedSize:{value:e}}=t,{common:{cubicBezierEaseInOut:r},self:{boxShadow:i,boxShadowActive:o,boxShadowDisabled:a,boxShadowFocus:s,boxShadowHover:l,color:c,colorDisabled:u,colorActive:d,textColor:h,textColorDisabled:p,dotColorActive:A,dotColorDisabled:f,labelPadding:m,labelLineHeight:g,labelFontWeight:v,[Gs("fontSize",e)]:y,[Gs("radioSize",e)]:b}}=n.value;return{"--n-bezier":r,"--n-label-line-height":g,"--n-label-font-weight":v,"--n-box-shadow":i,"--n-box-shadow-active":o,"--n-box-shadow-disabled":a,"--n-box-shadow-focus":s,"--n-box-shadow-hover":l,"--n-color":c,"--n-color-active":d,"--n-color-disabled":u,"--n-dot-color-active":A,"--n-dot-color-disabled":f,"--n-font-size":y,"--n-radio-size":b,"--n-text-color":h,"--n-text-color-disabled":p,"--n-label-padding":m}})),{inlineThemeDisabled:i,mergedClsPrefixRef:o,mergedRtlRef:a}=cf(e),s=Iv("Radio",a,o),l=i?Fv("radio",eo((()=>t.mergedSize.value[0])),r,e):void 0;return Object.assign(t,{rtlEnabled:s,cssVars:i?void 0:r,themeClass:null==l?void 0:l.themeClass,onRender:null==l?void 0:l.onRender})},render(){const{$slots:e,mergedClsPrefix:t,onRender:n,label:r}=this;return null==n||n(),to("label",{class:[`${t}-radio`,this.themeClass,this.rtlEnabled&&`${t}-radio--rtl`,this.mergedDisabled&&`${t}-radio--disabled`,this.renderSafeChecked&&`${t}-radio--checked`,this.focus&&`${t}-radio--focus`],style:this.cssVars},to("input",{ref:"inputRef",type:"radio",class:`${t}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),to("div",{class:`${t}-radio__dot-wrapper`}," ",to("div",{class:[`${t}-radio__dot`,this.renderSafeChecked&&`${t}-radio__dot--checked`]})),os(e.default,(e=>e||r?to("div",{ref:"labelRef",class:`${t}-radio__label`},e||r):null)))}}),cS=Us("radio-group","\n display: inline-block;\n font-size: var(--n-font-size);\n",[zs("splitor","\n display: inline-block;\n vertical-align: bottom;\n width: 1px;\n transition:\n background-color .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n background: var(--n-button-border-color);\n ",[Ns("checked",{backgroundColor:"var(--n-button-border-color-active)"}),Ns("disabled",{opacity:"var(--n-opacity-disabled)"})]),Ns("button-group","\n white-space: nowrap;\n height: var(--n-height);\n line-height: var(--n-height);\n ",[Us("radio-button",{height:"var(--n-height)",lineHeight:"var(--n-height)"}),zs("splitor",{height:"var(--n-height)"})]),Us("radio-button","\n vertical-align: bottom;\n outline: none;\n position: relative;\n user-select: none;\n -webkit-user-select: none;\n display: inline-block;\n box-sizing: border-box;\n padding-left: 14px;\n padding-right: 14px;\n white-space: nowrap;\n transition:\n background-color .3s var(--n-bezier),\n opacity .3s var(--n-bezier),\n border-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n background: var(--n-button-color);\n color: var(--n-button-text-color);\n border-top: 1px solid var(--n-button-border-color);\n border-bottom: 1px solid var(--n-button-border-color);\n ",[Us("radio-input","\n pointer-events: none;\n position: absolute;\n border: 0;\n border-radius: inherit;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n opacity: 0;\n z-index: 1;\n "),zs("state-border","\n z-index: 1;\n pointer-events: none;\n position: absolute;\n box-shadow: var(--n-button-box-shadow);\n transition: box-shadow .3s var(--n-bezier);\n left: -1px;\n bottom: -1px;\n right: -1px;\n top: -1px;\n "),Ls("&:first-child","\n border-top-left-radius: var(--n-button-border-radius);\n border-bottom-left-radius: var(--n-button-border-radius);\n border-left: 1px solid var(--n-button-border-color);\n ",[zs("state-border","\n border-top-left-radius: var(--n-button-border-radius);\n border-bottom-left-radius: var(--n-button-border-radius);\n ")]),Ls("&:last-child","\n border-top-right-radius: var(--n-button-border-radius);\n border-bottom-right-radius: var(--n-button-border-radius);\n border-right: 1px solid var(--n-button-border-color);\n ",[zs("state-border","\n border-top-right-radius: var(--n-button-border-radius);\n border-bottom-right-radius: var(--n-button-border-radius);\n ")]),js("disabled","\n cursor: pointer;\n ",[Ls("&:hover",[zs("state-border","\n transition: box-shadow .3s var(--n-bezier);\n box-shadow: var(--n-button-box-shadow-hover);\n "),js("checked",{color:"var(--n-button-text-color-hover)"})]),Ns("focus",[Ls("&:not(:active)",[zs("state-border",{boxShadow:"var(--n-button-box-shadow-focus)"})])])]),Ns("checked","\n background: var(--n-button-color-active);\n color: var(--n-button-text-color-active);\n border-color: var(--n-button-border-color-active);\n "),Ns("disabled","\n cursor: not-allowed;\n opacity: var(--n-opacity-disabled);\n ")])]);const uS=Dn({name:"RadioGroup",props:Object.assign(Object.assign({},sf.props),{name:String,value:[String,Number,Boolean],defaultValue:{type:[String,Number,Boolean],default:null},size:String,disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),setup(e){const t=bt(null),{mergedSizeRef:n,mergedDisabledRef:r,nTriggerFormChange:i,nTriggerFormInput:o,nTriggerFormBlur:a,nTriggerFormFocus:s}=Lu(e),{mergedClsPrefixRef:l,inlineThemeDisabled:c,mergedRtlRef:u}=cf(e),d=sf("Radio","-radio-group",cS,jC,e,l),h=bt(e.defaultValue),p=xl(Tt(e,"value"),h);nr(oS,{mergedClsPrefixRef:l,nameRef:Tt(e,"name"),valueRef:p,disabledRef:r,mergedSizeRef:n,doUpdateValue:function(t){const{onUpdateValue:n,"onUpdate:value":r}=e;n&&Ka(n,t),r&&Ka(r,t),h.value=t,i(),o()}});const A=Iv("Radio",u,l),f=eo((()=>{const{value:e}=n,{common:{cubicBezierEaseInOut:t},self:{buttonBorderColor:r,buttonBorderColorActive:i,buttonBorderRadius:o,buttonBoxShadow:a,buttonBoxShadowFocus:s,buttonBoxShadowHover:l,buttonColor:c,buttonColorActive:u,buttonTextColor:h,buttonTextColorActive:p,buttonTextColorHover:A,opacityDisabled:f,[Gs("buttonHeight",e)]:m,[Gs("fontSize",e)]:g}}=d.value;return{"--n-font-size":g,"--n-bezier":t,"--n-button-border-color":r,"--n-button-border-color-active":i,"--n-button-border-radius":o,"--n-button-box-shadow":a,"--n-button-box-shadow-focus":s,"--n-button-box-shadow-hover":l,"--n-button-color":c,"--n-button-color-active":u,"--n-button-text-color":h,"--n-button-text-color-hover":A,"--n-button-text-color-active":p,"--n-height":m,"--n-opacity-disabled":f}})),m=c?Fv("radio-group",eo((()=>n.value[0])),f,e):void 0;return{selfElRef:t,rtlEnabled:A,mergedClsPrefix:l,mergedValue:p,handleFocusout:function(e){const{value:n}=t;n&&(n.contains(e.relatedTarget)||a())},handleFocusin:function(e){const{value:n}=t;n&&(n.contains(e.relatedTarget)||s())},cssVars:c?void 0:f,themeClass:null==m?void 0:m.themeClass,onRender:null==m?void 0:m.onRender}},render(){var e;const{mergedValue:t,mergedClsPrefix:n,handleFocusin:r,handleFocusout:i}=this,{children:o,isButtonGroup:a}=function(e,t,n){var r;const i=[];let o=!1;for(let a=0;a<e.length;++a){const s=e[a],l=null===(r=s.type)||void 0===r?void 0:r.name;"RadioButton"===l&&(o=!0);const c=s.props;if("RadioButton"===l)if(0===a)i.push(s);else{const e=i[i.length-1].props,r=t===e.value,o=e.disabled,a=t===c.value,l=c.disabled,u=(r?2:0)+(o?0:1),d=(a?2:0)+(l?0:1),h={[`${n}-radio-group__splitor--disabled`]:o,[`${n}-radio-group__splitor--checked`]:r},p=u<d?{[`${n}-radio-group__splitor--disabled`]:l,[`${n}-radio-group__splitor--checked`]:a}:h;i.push(to("div",{class:[`${n}-radio-group__splitor`,p]}),s)}else i.push(s)}return{children:i,isButtonGroup:o}}(qa(Va(this)),t,n);return null===(e=this.onRender)||void 0===e||e.call(this),to("div",{onFocusin:r,onFocusout:i,ref:"selfElRef",class:[`${n}-radio-group`,this.rtlEnabled&&`${n}-radio-group--rtl`,this.themeClass,a&&`${n}-radio-group--button-group`],style:this.cssVars},o)}}),dS=40,hS=40;function pS(e){return"selection"===e.type?void 0===e.width?dS:ga(e.width):"expand"===e.type?void 0===e.width?hS:ga(e.width):"children"in e?void 0:"string"==typeof e.width?ga(e.width):e.width}function AS(e){return"selection"===e.type?"__n_selection__":"expand"===e.type?"__n_expand__":e.key}function fS(e){return e&&"object"==typeof e?Object.assign({},e):e}function mS(e,t){if(void 0!==t)return{width:t,minWidth:t,maxWidth:t};const n=function(e){var t,n;return"selection"===e.type?ds(null!==(t=e.width)&&void 0!==t?t:dS):"expand"===e.type?ds(null!==(n=e.width)&&void 0!==n?n:hS):"children"in e?void 0:ds(e.width)}(e),{minWidth:r,maxWidth:i}=e;return{width:n,minWidth:ds(r)||n,maxWidth:ds(i)}}function gS(e){return void 0!==e.filterOptionValues||void 0===e.filterOptionValue&&void 0!==e.defaultFilterOptionValues}function vS(e){return!("children"in e)&&!!e.sorter}function yS(e){return(!("children"in e)||!e.children.length)&&!!e.resizable}function bS(e){return!("children"in e)&&!(!e.filter||!e.filterOptions&&!e.renderFilterMenu)}function wS(e){return e?"descend"===e&&"ascend":"descend"}function xS(e,t){return void 0!==t.find((t=>t.columnKey===e.key&&t.order))}const CS=Dn({name:"DataTableFilterMenu",props:{column:{type:Object,required:!0},radioGroupName:{type:String,required:!0},multiple:{type:Boolean,required:!0},value:{type:[Array,String,Number],default:null},options:{type:Array,required:!0},onConfirm:{type:Function,required:!0},onClear:{type:Function,required:!0},onChange:{type:Function,required:!0}},setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=cf(e),r=Iv("DataTable",n,t),{mergedClsPrefixRef:i,mergedThemeRef:o,localeRef:a}=rr(tS),s=bt(e.value);function l(t){e.onChange(t)}return{mergedClsPrefix:i,rtlEnabled:r,mergedTheme:o,locale:a,checkboxGroupValue:eo((()=>{const{value:e}=s;return Array.isArray(e)?e:null})),radioGroupValue:eo((()=>{const{value:t}=s;return gS(e.column)?Array.isArray(t)&&t.length&&t[0]||null:Array.isArray(t)?null:t})),handleChange:function(t){e.multiple&&Array.isArray(t)?s.value=t:gS(e.column)&&!Array.isArray(t)?s.value=[t]:s.value=t},handleConfirmClick:function(){l(s.value),e.onConfirm()},handleClearClick:function(){e.multiple||gS(e.column)?l([]):l(null),e.onClear()}}},render(){const{mergedTheme:e,locale:t,mergedClsPrefix:n}=this;return to("div",{class:[`${n}-data-table-filter-menu`,this.rtlEnabled&&`${n}-data-table-filter-menu--rtl`]},to(Gb,null,{default:()=>{const{checkboxGroupValue:t,handleChange:r}=this;return this.multiple?to(cC,{value:t,class:`${n}-data-table-filter-menu__group`,onUpdateValue:r},{default:()=>this.options.map((t=>to(dC,{key:t.value,theme:e.peers.Checkbox,themeOverrides:e.peerOverrides.Checkbox,value:t.value},{default:()=>t.label})))}):to(uS,{name:this.radioGroupName,class:`${n}-data-table-filter-menu__group`,value:this.radioGroupValue,onUpdateValue:this.handleChange},{default:()=>this.options.map((t=>to(lS,{key:t.value,value:t.value,theme:e.peers.Radio,themeOverrides:e.peerOverrides.Radio},{default:()=>t.label})))})}}),to("div",{class:`${n}-data-table-filter-menu__action`},to(Bx,{size:"tiny",theme:e.peers.Button,themeOverrides:e.peerOverrides.Button,onClick:this.handleClearClick},{default:()=>t.clear}),to(Bx,{theme:e.peers.Button,themeOverrides:e.peerOverrides.Button,type:"primary",size:"tiny",onClick:this.handleConfirmClick},{default:()=>t.confirm})))}});const SS=Dn({name:"DataTableFilterButton",props:{column:{type:Object,required:!0},options:{type:Array,default:()=>[]}},setup(e){const{mergedComponentPropsRef:t}=cf(),{mergedThemeRef:n,mergedClsPrefixRef:r,mergedFilterStateRef:i,filterMenuCssVarsRef:o,paginationBehaviorOnFilterRef:a,doUpdatePage:s,doUpdateFilters:l}=rr(tS),c=bt(!1),u=i,d=eo((()=>!1!==e.column.filterMultiple)),h=eo((()=>{const t=u.value[e.column.key];if(void 0===t){const{value:e}=d;return e?[]:null}return t})),p=eo((()=>{const{value:e}=h;return Array.isArray(e)?e.length>0:null!==e})),A=eo((()=>{var n,r;return(null===(r=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.DataTable)||void 0===r?void 0:r.renderFilter)||e.column.renderFilter}));return{mergedTheme:n,mergedClsPrefix:r,active:p,showPopover:c,mergedRenderFilter:A,filterMultiple:d,mergedFilterValue:h,filterMenuCssVars:o,handleFilterChange:function(t){const n=function(e,t,n){const r=Object.assign({},e);return r[t]=n,r}(u.value,e.column.key,t);l(n,e.column),"first"===a.value&&s(1)},handleFilterMenuConfirm:function(){c.value=!1},handleFilterMenuCancel:function(){c.value=!1}}},render(){const{mergedTheme:e,mergedClsPrefix:t,handleFilterMenuCancel:n}=this;return to(bw,{show:this.showPopover,onUpdateShow:e=>this.showPopover=e,trigger:"click",theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,placement:"bottom",style:{padding:0}},{trigger:()=>{const{mergedRenderFilter:e}=this;if(e)return to(rS,{"data-data-table-filter":!0,render:e,active:this.active,show:this.showPopover});const{renderFilterIcon:n}=this.column;return to("div",{"data-data-table-filter":!0,class:[`${t}-data-table-filter`,{[`${t}-data-table-filter--active`]:this.active,[`${t}-data-table-filter--show`]:this.showPopover}]},n?n({active:this.active,show:this.showPopover}):to(py,{clsPrefix:t},{default:()=>to(Xv,null)}))},default:()=>{const{renderFilterMenu:e}=this.column;return e?e({hide:n}):to(CS,{style:this.filterMenuCssVars,radioGroupName:String(this.column.key),multiple:this.filterMultiple,value:this.mergedFilterValue,options:this.options,column:this.column,onChange:this.handleFilterChange,onClear:this.handleFilterMenuCancel,onConfirm:this.handleFilterMenuConfirm})}})}}),BS=Dn({name:"ColumnResizeButton",props:{onResizeStart:Function,onResize:Function,onResizeEnd:Function},setup(e){const{mergedClsPrefixRef:t}=rr(tS),n=bt(!1);let r=0;function i(e){return e.clientX}function o(t){var n;null===(n=e.onResize)||void 0===n||n.call(e,i(t)-r)}function a(){var t;n.value=!1,null===(t=e.onResizeEnd)||void 0===t||t.call(e),dl("mousemove",window,o),dl("mouseup",window,a)}return wn((()=>{dl("mousemove",window,o),dl("mouseup",window,a)})),{mergedClsPrefix:t,active:n,handleMousedown:function(t){var s;t.preventDefault();const l=n.value;r=i(t),n.value=!0,l||(ul("mousemove",window,o),ul("mouseup",window,a),null===(s=e.onResizeStart)||void 0===s||s.call(e))}}},render(){const{mergedClsPrefix:e}=this;return to("span",{"data-data-table-resizable":!0,class:[`${e}-data-table-resize-button`,this.active&&`${e}-data-table-resize-button--active`],onMousedown:this.handleMousedown})}}),_S=Dn({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return to("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),ES={name:"Icon",common:Lb,self:e=>{const{textColorBase:t,opacity1:n,opacity2:r,opacity3:i,opacity4:o,opacity5:a}=e;return{color:t,opacity1Depth:n,opacity2Depth:r,opacity3Depth:i,opacity4Depth:o,opacity5Depth:a}}},MS=Us("icon","\n height: 1em;\n width: 1em;\n line-height: 1em;\n text-align: center;\n display: inline-block;\n position: relative;\n fill: currentColor;\n transform: translateZ(0);\n",[Ns("color-transition",{transition:"color .3s var(--n-bezier)"}),Ns("depth",{color:"var(--n-color)"},[Ls("svg",{opacity:"var(--n-opacity)",transition:"opacity .3s var(--n-bezier)"})]),Ls("svg",{height:"1em",width:"1em"})]),PS=Dn({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:Object.assign(Object.assign({},sf.props),{depth:[String,Number],size:[Number,String],color:String,component:Object}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Icon","-icon",MS,ES,e,t),i=eo((()=>{const{depth:t}=e,{common:{cubicBezierEaseInOut:n},self:i}=r.value;if(void 0!==t){const{color:e,[`opacity${t}Depth`]:r}=i;return{"--n-bezier":n,"--n-color":e,"--n-opacity":r}}return{"--n-bezier":n,"--n-color":"","--n-opacity":""}})),o=n?Fv("icon",eo((()=>`${e.depth||"d"}`)),i,e):void 0;return{mergedClsPrefix:t,mergedStyle:eo((()=>{const{size:t,color:n}=e;return{fontSize:ds(t),color:n}})),cssVars:n?void 0:i,themeClass:null==o?void 0:o.themeClass,onRender:null==o?void 0:o.onRender}},render(){var e;const{$parent:t,depth:n,mergedClsPrefix:r,component:i,onRender:o,themeClass:a}=this;return null===(e=null==t?void 0:t.$options)||void 0===e||e._n_icon__,null==o||o(),to("i",Li(this.$attrs,{role:"img",class:[`${r}-icon`,a,{[`${r}-icon--depth`]:n,[`${r}-icon--color-transition`]:void 0!==n}],style:[this.cssVars,this.mergedStyle]}),i?to(i):this.$slots)}}),TS="n-dropdown-menu",DS="n-dropdown",FS="n-dropdown-option";function IS(e,t){return"submenu"===e.type||void 0===e.type&&void 0!==e[t]}function kS(e){return"divider"===e.type}const OS=Dn({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(e){const t=rr(DS),{hoverKeyRef:n,keyboardKeyRef:r,lastToggledSubmenuKeyRef:i,pendingKeyPathRef:o,activeKeyPathRef:a,animatedRef:s,mergedShowRef:l,renderLabelRef:c,renderIconRef:u,labelFieldRef:d,childrenFieldRef:h,renderOptionRef:p,nodePropsRef:A,menuPropsRef:f}=t,m=rr(FS,null),g=rr(TS),v=rr(Fl),y=eo((()=>e.tmNode.rawNode)),b=eo((()=>{const{value:t}=h;return IS(e.tmNode.rawNode,t)})),w=eo((()=>{const{disabled:t}=e.tmNode;return t})),x=function(e,t,n){const r=bt(e.value);let i=null;return Ir(e,(e=>{null!==i&&window.clearTimeout(i),!0===e?n&&!n.value?r.value=!0:i=window.setTimeout((()=>{r.value=!0}),t):r.value=!1})),r}(eo((()=>{if(!b.value)return!1;const{key:t,disabled:a}=e.tmNode;if(a)return!1;const{value:s}=n,{value:l}=r,{value:c}=i,{value:u}=o;return null!==s?u.includes(t):null!==l?u.includes(t)&&u[u.length-1]!==t:null!==c&&u.includes(t)})),300,eo((()=>null===r.value&&!s.value))),C=eo((()=>!!(null==m?void 0:m.enteringSubmenuRef.value))),S=bt(!1);function B(){const{parentKey:t,tmNode:o}=e;o.disabled||l.value&&(i.value=t,r.value=null,n.value=o.key)}return nr(FS,{enteringSubmenuRef:S}),{labelField:d,renderLabel:c,renderIcon:u,siblingHasIcon:g.showIconRef,siblingHasSubmenu:g.hasSubmenuRef,menuProps:f,popoverBody:v,animated:s,mergedShowSubmenu:eo((()=>x.value&&!C.value)),rawNode:y,hasSubmenu:b,pending:Zs((()=>{const{value:t}=o,{key:n}=e.tmNode;return t.includes(n)})),childActive:Zs((()=>{const{value:t}=a,{key:n}=e.tmNode,r=t.findIndex((e=>n===e));return-1!==r&&r<t.length-1})),active:Zs((()=>{const{value:t}=a,{key:n}=e.tmNode,r=t.findIndex((e=>n===e));return-1!==r&&r===t.length-1})),mergedDisabled:w,renderOption:p,nodeProps:A,handleClick:function(){const{value:n}=b,{tmNode:r}=e;l.value&&(n||r.disabled||(t.doSelect(r.key,r.rawNode),t.doUpdateShow(!1)))},handleMouseMove:function(){const{tmNode:t}=e;t.disabled||l.value&&n.value!==t.key&&B()},handleMouseEnter:B,handleMouseLeave:function(t){if(e.tmNode.disabled)return;if(!l.value)return;const{relatedTarget:r}=t;!r||fa({target:r},"dropdownOption")||fa({target:r},"scrollbarRail")||(n.value=null)},handleSubmenuBeforeEnter:function(){S.value=!0},handleSubmenuAfterEnter:function(){S.value=!1}}},render(){var e,t;const{animated:n,rawNode:r,mergedShowSubmenu:i,clsPrefix:o,siblingHasIcon:a,siblingHasSubmenu:s,renderLabel:l,renderIcon:c,renderOption:u,nodeProps:d,props:h,scrollable:p}=this;let A=null;if(i){const t=null===(e=this.menuProps)||void 0===e?void 0:e.call(this,r,r.children);A=to(zS,Object.assign({},t,{clsPrefix:o,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const f={class:[`${o}-dropdown-option-body`,this.pending&&`${o}-dropdown-option-body--pending`,this.active&&`${o}-dropdown-option-body--active`,this.childActive&&`${o}-dropdown-option-body--child-active`,this.mergedDisabled&&`${o}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},m=null==d?void 0:d(r),g=to("div",Object.assign({class:[`${o}-dropdown-option`,null==m?void 0:m.class],"data-dropdown-option":!0},m),to("div",Li(f,h),[to("div",{class:[`${o}-dropdown-option-body__prefix`,a&&`${o}-dropdown-option-body__prefix--show-icon`]},[c?c(r):Xa(r.icon)]),to("div",{"data-dropdown-option":!0,class:`${o}-dropdown-option-body__label`},l?l(r):Xa(null!==(t=r[this.labelField])&&void 0!==t?t:r.title)),to("div",{"data-dropdown-option":!0,class:[`${o}-dropdown-option-body__suffix`,s&&`${o}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?to(PS,null,{default:()=>to(Hv,null)}):null)]),this.hasSubmenu?to(Vl,null,{default:()=>[to(Wl,null,{default:()=>to("div",{class:`${o}-dropdown-offset-container`},to(gc,{show:this.mergedShowSubmenu,placement:this.placement,to:p&&this.popoverBody||void 0,teleportDisabled:!p},{default:()=>to("div",{class:`${o}-dropdown-menu-wrapper`},n?to(co,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>A}):A)}))})]}):null);return u?u({node:g,option:r}):g}}),LS=Dn({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:t}=rr(TS),{renderLabelRef:n,labelFieldRef:r,nodePropsRef:i,renderOptionRef:o}=rr(DS);return{labelField:r,showIcon:e,hasSubmenu:t,renderLabel:n,nodeProps:i,renderOption:o}},render(){var e;const{clsPrefix:t,hasSubmenu:n,showIcon:r,nodeProps:i,renderLabel:o,renderOption:a}=this,{rawNode:s}=this.tmNode,l=to("div",Object.assign({class:`${t}-dropdown-option`},null==i?void 0:i(s)),to("div",{class:`${t}-dropdown-option-body ${t}-dropdown-option-body--group`},to("div",{"data-dropdown-option":!0,class:[`${t}-dropdown-option-body__prefix`,r&&`${t}-dropdown-option-body__prefix--show-icon`]},Xa(s.icon)),to("div",{class:`${t}-dropdown-option-body__label`,"data-dropdown-option":!0},o?o(s):Xa(null!==(e=s.title)&&void 0!==e?e:s[this.labelField])),to("div",{class:[`${t}-dropdown-option-body__suffix`,n&&`${t}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return a?a({node:l,option:s}):l}}),RS=Dn({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:t,clsPrefix:n}=this,{children:r}=e;return to(di,null,to(LS,{clsPrefix:n,tmNode:e,key:e.key}),null==r?void 0:r.map((e=>{const{rawNode:r}=e;return!1===r.show?null:kS(r)?to(_S,{clsPrefix:n,key:e.key}):e.isGroup?null:to(OS,{clsPrefix:n,tmNode:e,parentKey:t,key:e.key})})))}}),US=Dn({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:t}}=this.tmNode;return to("div",t,[null==e?void 0:e()])}}),zS=Dn({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:t,childrenFieldRef:n}=rr(DS);nr(TS,{showIconRef:eo((()=>{const n=t.value;return e.tmNodes.some((e=>{var t;if(e.isGroup)return null===(t=e.children)||void 0===t?void 0:t.some((({rawNode:e})=>n?n(e):e.icon));const{rawNode:r}=e;return n?n(r):r.icon}))})),hasSubmenuRef:eo((()=>{const{value:t}=n;return e.tmNodes.some((e=>{var n;if(e.isGroup)return null===(n=e.children)||void 0===n?void 0:n.some((({rawNode:e})=>IS(e,t)));const{rawNode:r}=e;return IS(r,t)}))}))});const r=bt(null);return nr(Pl,null),nr(Dl,null),nr(Fl,r),{bodyRef:r}},render(){const{parentKey:e,clsPrefix:t,scrollable:n}=this,r=this.tmNodes.map((r=>{const{rawNode:i}=r;return!1===i.show?null:function(e){return"render"===e.type}(i)?to(US,{tmNode:r,key:r.key}):kS(i)?to(_S,{clsPrefix:t,key:r.key}):function(e){return"group"===e.type}(i)?to(RS,{clsPrefix:t,tmNode:r,parentKey:e,key:r.key}):to(OS,{clsPrefix:t,tmNode:r,parentKey:e,key:r.key,props:i.props,scrollable:n})}));return to("div",{class:[`${t}-dropdown-menu`,n&&`${t}-dropdown-menu--scrollable`],ref:"bodyRef"},n?to(qb,{contentClass:`${t}-dropdown-menu__content`},{default:()=>r}):r,this.showArrow?fw({clsPrefix:t,arrowStyle:this.arrowStyle,arrowClass:void 0,arrowWrapperClass:void 0,arrowWrapperStyle:void 0}):null)}}),NS=Us("dropdown-menu","\n transform-origin: var(--v-transform-origin);\n background-color: var(--n-color);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n position: relative;\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n",[ew(),Us("dropdown-option","\n position: relative;\n ",[Ls("a","\n text-decoration: none;\n color: inherit;\n outline: none;\n ",[Ls("&::before",'\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),Us("dropdown-option-body","\n display: flex;\n cursor: pointer;\n position: relative;\n height: var(--n-option-height);\n line-height: var(--n-option-height);\n font-size: var(--n-font-size);\n color: var(--n-option-text-color);\n transition: color .3s var(--n-bezier);\n ",[Ls("&::before",'\n content: "";\n position: absolute;\n top: 0;\n bottom: 0;\n left: 4px;\n right: 4px;\n transition: background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n '),js("disabled",[Ns("pending","\n color: var(--n-option-text-color-hover);\n ",[zs("prefix, suffix","\n color: var(--n-option-text-color-hover);\n "),Ls("&::before","background-color: var(--n-option-color-hover);")]),Ns("active","\n color: var(--n-option-text-color-active);\n ",[zs("prefix, suffix","\n color: var(--n-option-text-color-active);\n "),Ls("&::before","background-color: var(--n-option-color-active);")]),Ns("child-active","\n color: var(--n-option-text-color-child-active);\n ",[zs("prefix, suffix","\n color: var(--n-option-text-color-child-active);\n ")])]),Ns("disabled","\n cursor: not-allowed;\n opacity: var(--n-option-opacity-disabled);\n "),Ns("group","\n font-size: calc(var(--n-font-size) - 1px);\n color: var(--n-group-header-text-color);\n ",[zs("prefix","\n width: calc(var(--n-option-prefix-width) / 2);\n ",[Ns("show-icon","\n width: calc(var(--n-option-icon-prefix-width) / 2);\n ")])]),zs("prefix","\n width: var(--n-option-prefix-width);\n display: flex;\n justify-content: center;\n align-items: center;\n color: var(--n-prefix-color);\n transition: color .3s var(--n-bezier);\n z-index: 1;\n ",[Ns("show-icon","\n width: var(--n-option-icon-prefix-width);\n "),Us("icon","\n font-size: var(--n-option-icon-size);\n ")]),zs("label","\n white-space: nowrap;\n flex: 1;\n z-index: 1;\n "),zs("suffix","\n box-sizing: border-box;\n flex-grow: 0;\n flex-shrink: 0;\n display: flex;\n justify-content: flex-end;\n align-items: center;\n min-width: var(--n-option-suffix-width);\n padding: 0 8px;\n transition: color .3s var(--n-bezier);\n color: var(--n-suffix-color);\n z-index: 1;\n ",[Ns("has-submenu","\n width: var(--n-option-icon-suffix-width);\n "),Us("icon","\n font-size: var(--n-option-icon-size);\n ")]),Us("dropdown-menu","pointer-events: all;")]),Us("dropdown-offset-container","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: -4px;\n bottom: -4px;\n ")]),Us("dropdown-divider","\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-divider-color);\n height: 1px;\n margin: 4px 0;\n "),Us("dropdown-menu-wrapper","\n transform-origin: var(--v-transform-origin);\n width: fit-content;\n "),Ls(">",[Us("scrollbar","\n height: inherit;\n max-height: inherit;\n ")]),js("scrollable","\n padding: var(--n-padding);\n "),Ns("scrollable",[zs("content","\n padding: var(--n-padding);\n ")])]),jS={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},HS=Object.keys(yw),QS=Dn({name:"Dropdown",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},yw),jS),sf.props),setup(e){const t=bt(!1),n=xl(Tt(e,"show"),t),r=eo((()=>{const{keyField:t,childrenField:n}=e;return Wy(e.options,{getKey:e=>e[t],getDisabled:e=>!0===e.disabled,getIgnored:e=>"divider"===e.type||"render"===e.type,getChildren:e=>e[n]})})),i=eo((()=>r.value.treeNodes)),o=bt(null),a=bt(null),s=bt(null),l=eo((()=>{var e,t,n;return null!==(n=null!==(t=null!==(e=o.value)&&void 0!==e?e:a.value)&&void 0!==t?t:s.value)&&void 0!==n?n:null})),c=eo((()=>r.value.getPath(l.value).keyPath)),u=eo((()=>r.value.getPath(e.value).keyPath));_l({keydown:{ArrowUp:{prevent:!0,handler:function(){v("up")}},ArrowRight:{prevent:!0,handler:function(){v("right")}},ArrowDown:{prevent:!0,handler:function(){v("down")}},ArrowLeft:{prevent:!0,handler:function(){v("left")}},Enter:{prevent:!0,handler:function(){const e=g();(null==e?void 0:e.isLeaf)&&n.value&&(A(e.key,e.rawNode),f(!1))}},Escape:function(){f(!1)}}},Zs((()=>e.keyboard&&n.value)));const{mergedClsPrefixRef:d,inlineThemeDisabled:h}=cf(e),p=sf("Dropdown","-dropdown",NS,QC,e,d);function A(t,n){const{onSelect:r}=e;r&&Ka(r,t,n)}function f(n){const{"onUpdate:show":r,onUpdateShow:i}=e;r&&Ka(r,n),i&&Ka(i,n),t.value=n}function m(){o.value=null,a.value=null,s.value=null}function g(){var e;const{value:t}=r,{value:n}=l;return t&&null!==n&&null!==(e=t.getNode(n))&&void 0!==e?e:null}function v(e){const{value:t}=l,{value:{getFirstAvailableNode:n}}=r;let i=null;if(null===t){const e=n();null!==e&&(i=e.key)}else{const t=g();if(t){let n;switch(e){case"down":n=t.getNext();break;case"up":n=t.getPrev();break;case"right":n=t.getChild();break;case"left":n=t.getParent()}n&&(i=n.key)}}null!==i&&(o.value=null,a.value=i)}nr(DS,{labelFieldRef:Tt(e,"labelField"),childrenFieldRef:Tt(e,"childrenField"),renderLabelRef:Tt(e,"renderLabel"),renderIconRef:Tt(e,"renderIcon"),hoverKeyRef:o,keyboardKeyRef:a,lastToggledSubmenuKeyRef:s,pendingKeyPathRef:c,activeKeyPathRef:u,animatedRef:Tt(e,"animated"),mergedShowRef:n,nodePropsRef:Tt(e,"nodeProps"),renderOptionRef:Tt(e,"renderOption"),menuPropsRef:Tt(e,"menuProps"),doSelect:A,doUpdateShow:f}),Ir(n,(t=>{e.animated||t||m()}));const y=eo((()=>{const{size:t,inverted:n}=e,{common:{cubicBezierEaseInOut:r},self:i}=p.value,{padding:o,dividerColor:a,borderRadius:s,optionOpacityDisabled:l,[Gs("optionIconSuffixWidth",t)]:c,[Gs("optionSuffixWidth",t)]:u,[Gs("optionIconPrefixWidth",t)]:d,[Gs("optionPrefixWidth",t)]:h,[Gs("fontSize",t)]:A,[Gs("optionHeight",t)]:f,[Gs("optionIconSize",t)]:m}=i,g={"--n-bezier":r,"--n-font-size":A,"--n-padding":o,"--n-border-radius":s,"--n-option-height":f,"--n-option-prefix-width":h,"--n-option-icon-prefix-width":d,"--n-option-suffix-width":u,"--n-option-icon-suffix-width":c,"--n-option-icon-size":m,"--n-divider-color":a,"--n-option-opacity-disabled":l};return n?(g["--n-color"]=i.colorInverted,g["--n-option-color-hover"]=i.optionColorHoverInverted,g["--n-option-color-active"]=i.optionColorActiveInverted,g["--n-option-text-color"]=i.optionTextColorInverted,g["--n-option-text-color-hover"]=i.optionTextColorHoverInverted,g["--n-option-text-color-active"]=i.optionTextColorActiveInverted,g["--n-option-text-color-child-active"]=i.optionTextColorChildActiveInverted,g["--n-prefix-color"]=i.prefixColorInverted,g["--n-suffix-color"]=i.suffixColorInverted,g["--n-group-header-text-color"]=i.groupHeaderTextColorInverted):(g["--n-color"]=i.color,g["--n-option-color-hover"]=i.optionColorHover,g["--n-option-color-active"]=i.optionColorActive,g["--n-option-text-color"]=i.optionTextColor,g["--n-option-text-color-hover"]=i.optionTextColorHover,g["--n-option-text-color-active"]=i.optionTextColorActive,g["--n-option-text-color-child-active"]=i.optionTextColorChildActive,g["--n-prefix-color"]=i.prefixColor,g["--n-suffix-color"]=i.suffixColor,g["--n-group-header-text-color"]=i.groupHeaderTextColor),g})),b=h?Fv("dropdown",eo((()=>`${e.size[0]}${e.inverted?"i":""}`)),y,e):void 0;return{mergedClsPrefix:d,mergedTheme:p,tmNodes:i,mergedShow:n,handleAfterLeave:()=>{e.animated&&m()},doUpdateShow:f,cssVars:h?void 0:y,themeClass:null==b?void 0:b.themeClass,onRender:null==b?void 0:b.onRender}},render(){const{mergedTheme:e}=this,t={show:this.mergedShow,theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:(e,t,n,r,i)=>{var o;const{mergedClsPrefix:a,menuProps:s}=this;null===(o=this.onRender)||void 0===o||o.call(this);const l=(null==s?void 0:s(void 0,this.tmNodes.map((e=>e.rawNode))))||{},c={ref:ts(t),class:[e,`${a}-dropdown`,this.themeClass],clsPrefix:a,tmNodes:this.tmNodes,style:[...n,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:r,onMouseleave:i};return to(zS,Li(this.$attrs,c,l))},onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return to(bw,Object.assign({},Wa(this.$props,HS),t),{trigger:()=>{var e,t;return null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)}})}}),VS="_n_all__",WS="_n_none__";const GS=Dn({name:"DataTableSelectionMenu",props:{clsPrefix:{type:String,required:!0}},setup(e){const{props:t,localeRef:n,checkOptionsRef:r,rawPaginatedDataRef:i,doCheckAll:o,doUncheckAll:a}=rr(tS),s=eo((()=>function(e,t,n,r){return e?i=>{for(const o of e)switch(i){case VS:return void n(!0);case WS:return void r(!0);default:if("object"==typeof o&&o.key===i)return void o.onSelect(t.value)}}:()=>{}}(r.value,i,o,a))),l=eo((()=>function(e,t){return e?e.map((e=>{switch(e){case"all":return{label:t.checkTableAll,key:VS};case"none":return{label:t.uncheckTableAll,key:WS};default:return e}})):[]}(r.value,n.value)));return()=>{var n,r,i,o;const{clsPrefix:a}=e;return to(QS,{theme:null===(r=null===(n=t.theme)||void 0===n?void 0:n.peers)||void 0===r?void 0:r.Dropdown,themeOverrides:null===(o=null===(i=t.themeOverrides)||void 0===i?void 0:i.peers)||void 0===o?void 0:o.Dropdown,options:l.value,onSelect:s.value},{default:()=>to(py,{clsPrefix:a,class:`${a}-data-table-check-extra`},{default:()=>to(oy,null)})})}}});function qS(e){return"function"==typeof e.title?e.title(e):e.title}const KS=Dn({name:"DataTableHeader",props:{discrete:{type:Boolean,default:!0}},setup(){const{mergedClsPrefixRef:e,scrollXRef:t,fixedColumnLeftMapRef:n,fixedColumnRightMapRef:r,mergedCurrentPageRef:i,allRowsCheckedRef:o,someRowsCheckedRef:a,rowsRef:s,colsRef:l,mergedThemeRef:c,checkOptionsRef:u,mergedSortStateRef:d,componentId:h,mergedTableLayoutRef:p,headerCheckboxDisabledRef:A,onUnstableColumnResize:f,doUpdateResizableWidth:m,handleTableHeaderScroll:g,deriveNextSorter:v,doUncheckAll:y,doCheckAll:b}=rr(tS),w=bt({});function x(e){const t=w.value[e];return null==t?void 0:t.getBoundingClientRect().width}const C=new Map;return{cellElsRef:w,componentId:h,mergedSortState:d,mergedClsPrefix:e,scrollX:t,fixedColumnLeftMap:n,fixedColumnRightMap:r,currentPage:i,allRowsChecked:o,someRowsChecked:a,rows:s,cols:l,mergedTheme:c,checkOptions:u,mergedTableLayout:p,headerCheckboxDisabled:A,handleCheckboxUpdateChecked:function(){o.value?y():b()},handleColHeaderClick:function(e,t){if(fa(e,"dataTableFilter")||fa(e,"dataTableResizable"))return;if(!vS(t))return;const n=d.value.find((e=>e.columnKey===t.key))||null,r=function(e,t){return void 0===e.sorter?null:null===t||t.columnKey!==e.key?{columnKey:e.key,sorter:e.sorter,order:wS(!1)}:Object.assign(Object.assign({},t),{order:wS(t.order)})}(t,n);v(r)},handleTableHeaderScroll:g,handleColumnResizeStart:function(e){C.set(e.key,x(e.key))},handleColumnResize:function(e,t){const n=C.get(e.key);if(void 0===n)return;const r=n+t,i=(o=r,a=e.minWidth,void 0!==(s=e.maxWidth)&&(o=Math.min(o,"number"==typeof s?s:parseFloat(s))),void 0!==a&&(o=Math.max(o,"number"==typeof a?a:parseFloat(a))),o);var o,a,s;f(r,i,e,x),m(e,i)}}},render(){const{cellElsRef:e,mergedClsPrefix:t,fixedColumnLeftMap:n,fixedColumnRightMap:r,currentPage:i,allRowsChecked:o,someRowsChecked:a,rows:s,cols:l,mergedTheme:c,checkOptions:u,componentId:d,discrete:h,mergedTableLayout:p,headerCheckboxDisabled:A,mergedSortState:f,handleColHeaderClick:m,handleCheckboxUpdateChecked:g,handleColumnResizeStart:v,handleColumnResize:y}=this,b=to("thead",{class:`${t}-data-table-thead`,"data-n-id":d},s.map((s=>to("tr",{class:`${t}-data-table-tr`},s.map((({column:s,colSpan:l,rowSpan:d,isLast:h})=>{var p,b;const w=AS(s),{ellipsis:x}=s,C=w in n,S=w in r;return to("th",{ref:t=>e[w]=t,key:w,style:{textAlign:s.titleAlign||s.align,left:va(null===(p=n[w])||void 0===p?void 0:p.start),right:va(null===(b=r[w])||void 0===b?void 0:b.start)},colspan:l,rowspan:d,"data-col-key":w,class:[`${t}-data-table-th`,(C||S)&&`${t}-data-table-th--fixed-${C?"left":"right"}`,{[`${t}-data-table-th--hover`]:xS(s,f),[`${t}-data-table-th--filterable`]:bS(s),[`${t}-data-table-th--sortable`]:vS(s),[`${t}-data-table-th--selection`]:"selection"===s.type,[`${t}-data-table-th--last`]:h},s.className],onClick:"selection"===s.type||"expand"===s.type||"children"in s?void 0:e=>{m(e,s)}},"selection"===s.type?!1!==s.multiple?to(di,null,to(dC,{key:i,privateInsideTable:!0,checked:o,indeterminate:a,disabled:A,onUpdateChecked:g}),u?to(GS,{clsPrefix:t}):null):null:to(di,null,to("div",{class:`${t}-data-table-th__title-wrapper`},to("div",{class:`${t}-data-table-th__title`},!0===x||x&&!x.tooltip?to("div",{class:`${t}-data-table-th__ellipsis`},qS(s)):x&&"object"==typeof x?to($C,Object.assign({},x,{theme:c.peers.Ellipsis,themeOverrides:c.peerOverrides.Ellipsis}),{default:()=>qS(s)}):qS(s)),vS(s)?to(nS,{column:s}):null),bS(s)?to(SS,{column:s,options:s.filterOptions}):null,yS(s)?to(BS,{onResizeStart:()=>{v(s)},onResize:e=>{y(s,e)}}):null))}))))));if(!h)return b;const{handleTableHeaderScroll:w,scrollX:x}=this;return to("div",{class:`${t}-data-table-base-table-header`,onScroll:w},to("table",{ref:"body",class:`${t}-data-table-table`,style:{minWidth:ds(x),tableLayout:p}},to("colgroup",null,l.map((e=>to("col",{key:e.key,style:e.style})))),b))}}),YS=Dn({name:"DataTableCell",props:{clsPrefix:{type:String,required:!0},row:{type:Object,required:!0},index:{type:Number,required:!0},column:{type:Object,required:!0},isSummary:Boolean,mergedTheme:{type:Object,required:!0},renderCell:Function},render(){var e;const{isSummary:t,column:n,row:r,renderCell:i}=this;let o;const{render:a,key:s,ellipsis:l}=n;if(o=a&&!t?a(r,this.index):t?null===(e=r[s])||void 0===e?void 0:e.value:i?i(Jh(r,s),r,n):Jh(r,s),l){if("object"==typeof l){const{mergedTheme:e}=this;return"performant-ellipsis"===n.ellipsisComponent?to(JC,Object.assign({},l,{theme:e.peers.Ellipsis,themeOverrides:e.peerOverrides.Ellipsis}),{default:()=>o}):to($C,Object.assign({},l,{theme:e.peers.Ellipsis,themeOverrides:e.peerOverrides.Ellipsis}),{default:()=>o})}return to("span",{class:`${this.clsPrefix}-data-table-td__ellipsis`},o)}return o}}),XS=Dn({name:"DataTableExpandTrigger",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,loading:Boolean,onClick:{type:Function,required:!0},renderExpandIcon:{type:Function}},render(){const{clsPrefix:e}=this;return to("div",{class:[`${e}-data-table-expand-trigger`,this.expanded&&`${e}-data-table-expand-trigger--expanded`],onClick:this.onClick,onMousedown:e=>{e.preventDefault()}},to(uy,null,{default:()=>this.loading?to(xy,{key:"loading",clsPrefix:this.clsPrefix,radius:85,strokeWidth:15,scale:.88}):this.renderExpandIcon?this.renderExpandIcon({expanded:this.expanded}):to(py,{clsPrefix:e,key:"base-icon"},{default:()=>to(Hv,null)})}))}}),$S=Dn({name:"DataTableBodyCheckbox",props:{rowKey:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!0},onUpdateChecked:{type:Function,required:!0}},setup(e){const{mergedCheckedRowKeySetRef:t,mergedInderminateRowKeySetRef:n}=rr(tS);return()=>{const{rowKey:r}=e;return to(dC,{privateInsideTable:!0,disabled:e.disabled,indeterminate:n.value.has(r),checked:t.value.has(r),onUpdateChecked:e.onUpdateChecked})}}}),JS=Dn({name:"DataTableBodyRadio",props:{rowKey:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!0},onUpdateChecked:{type:Function,required:!0}},setup(e){const{mergedCheckedRowKeySetRef:t,componentId:n}=rr(tS);return()=>{const{rowKey:r}=e;return to(lS,{name:n,disabled:e.disabled,checked:t.value.has(r),onUpdateChecked:e.onUpdateChecked})}}});function ZS(e,t){const n=[];function r(e,i){e.forEach((e=>{e.children&&t.has(e.key)?(n.push({tmNode:e,striped:!1,key:e.key,index:i}),r(e.children,i)):n.push({key:e.key,tmNode:e,striped:!1,index:i})}))}return e.forEach((e=>{n.push(e);const{children:i}=e.tmNode;i&&t.has(e.key)&&r(i,e.index)})),n}const eB=Dn({props:{clsPrefix:{type:String,required:!0},id:{type:String,required:!0},cols:{type:Array,required:!0},onMouseenter:Function,onMouseleave:Function},render(){const{clsPrefix:e,id:t,cols:n,onMouseenter:r,onMouseleave:i}=this;return to("table",{style:{tableLayout:"fixed"},class:`${e}-data-table-table`,onMouseenter:r,onMouseleave:i},to("colgroup",null,n.map((e=>to("col",{key:e.key,style:e.style})))),to("tbody",{"data-n-id":t,class:`${e}-data-table-tbody`},this.$slots))}}),tB=Dn({name:"DataTableBody",props:{onResize:Function,showHeader:Boolean,flexHeight:Boolean,bodyStyle:Object},setup(e){const{slots:t,bodyWidthRef:n,mergedExpandedRowKeysRef:r,mergedClsPrefixRef:i,mergedThemeRef:o,scrollXRef:a,colsRef:s,paginatedDataRef:l,rawPaginatedDataRef:c,fixedColumnLeftMapRef:u,fixedColumnRightMapRef:d,mergedCurrentPageRef:h,rowClassNameRef:p,leftActiveFixedColKeyRef:A,leftActiveFixedChildrenColKeysRef:f,rightActiveFixedColKeyRef:m,rightActiveFixedChildrenColKeysRef:g,renderExpandRef:v,hoverKeyRef:y,summaryRef:b,mergedSortStateRef:w,virtualScrollRef:x,componentId:C,mergedTableLayoutRef:S,childTriggerColIndexRef:B,indentRef:_,rowPropsRef:E,maxHeightRef:M,stripedRef:P,loadingRef:T,onLoadRef:D,loadingKeySetRef:F,expandableRef:I,stickyExpandedRowsRef:k,renderExpandIconRef:O,summaryPlacementRef:L,treeMateRef:R,scrollbarPropsRef:U,setHeaderScrollLeft:z,doUpdateExpandedRowKeys:N,handleTableBodyScroll:j,doCheck:H,doUncheck:Q,renderCell:V}=rr(tS),W=bt(null),G=bt(null),q=bt(null),K=Zs((()=>0===l.value.length)),Y=Zs((()=>e.showHeader||!K.value)),X=Zs((()=>e.showHeader||K.value));let $="";const J=eo((()=>new Set(r.value)));function Z(e){var t;return null===(t=R.value.getNode(e))||void 0===t?void 0:t.rawNode}function ee(){const{value:e}=G;return(null==e?void 0:e.listElRef)||null}const te={getScrollContainer:function(){if(!Y.value){const{value:e}=q;return e||null}if(x.value)return ee();const{value:e}=W;return e?e.containerRef:null},scrollTo(e,t){var n,r;x.value?null===(n=G.value)||void 0===n||n.scrollTo(e,t):null===(r=W.value)||void 0===r||r.scrollTo(e,t)}},ne=Ls([({props:e})=>{const t=t=>null===t?null:Ls(`[data-n-id="${e.componentId}"] [data-col-key="${t}"]::after`,{boxShadow:"var(--n-box-shadow-after)"}),n=t=>null===t?null:Ls(`[data-n-id="${e.componentId}"] [data-col-key="${t}"]::before`,{boxShadow:"var(--n-box-shadow-before)"});return Ls([t(e.leftActiveFixedColKey),n(e.rightActiveFixedColKey),e.leftActiveFixedChildrenColKeys.map((e=>t(e))),e.rightActiveFixedChildrenColKeys.map((e=>n(e)))])}]);let re=!1;return Dr((()=>{const{value:e}=A,{value:t}=f,{value:n}=m,{value:r}=g;if(!re&&null===e&&null===n)return;const i={leftActiveFixedColKey:e,leftActiveFixedChildrenColKeys:t,rightActiveFixedColKey:n,rightActiveFixedChildrenColKeys:r,componentId:C};ne.mount({id:`n-${C}`,force:!0,props:i,anchorMetaName:af}),re=!0})),xn((()=>{ne.unmount({id:`n-${C}`})})),Object.assign({bodyWidth:n,summaryPlacement:L,dataTableSlots:t,componentId:C,scrollbarInstRef:W,virtualListRef:G,emptyElRef:q,summary:b,mergedClsPrefix:i,mergedTheme:o,scrollX:a,cols:s,loading:T,bodyShowHeaderOnly:X,shouldDisplaySomeTablePart:Y,empty:K,paginatedDataAndInfo:eo((()=>{const{value:e}=P;let t=!1;return{data:l.value.map(e?(e,n)=>(e.isLeaf||(t=!0),{tmNode:e,key:e.key,striped:n%2==1,index:n}):(e,n)=>(e.isLeaf||(t=!0),{tmNode:e,key:e.key,striped:!1,index:n})),hasChildren:t}})),rawPaginatedData:c,fixedColumnLeftMap:u,fixedColumnRightMap:d,currentPage:h,rowClassName:p,renderExpand:v,mergedExpandedRowKeySet:J,hoverKey:y,mergedSortState:w,virtualScroll:x,mergedTableLayout:S,childTriggerColIndex:B,indent:_,rowProps:E,maxHeight:M,loadingKeySet:F,expandable:I,stickyExpandedRows:k,renderExpandIcon:O,scrollbarProps:U,setHeaderScrollLeft:z,handleVirtualListScroll:function(e){var t;j(e),null===(t=W.value)||void 0===t||t.sync()},handleVirtualListResize:function(t){var n;const{onResize:r}=e;r&&r(t),null===(n=W.value)||void 0===n||n.sync()},handleMouseleaveTable:function(){y.value=null},virtualListContainer:ee,virtualListContent:function(){const{value:e}=G;return(null==e?void 0:e.itemsElRef)||null},handleTableBodyScroll:j,handleCheckboxUpdateChecked:function(e,t,n){const r=Z(e.key);if(r){if(n){const n=l.value.findIndex((e=>e.key===$));if(-1!==n){const i=l.value.findIndex((t=>t.key===e.key)),o=Math.min(n,i),a=Math.max(n,i),s=[];return l.value.slice(o,a+1).forEach((e=>{e.disabled||s.push(e.key)})),t?H(s,!1,r):Q(s,r),void($=e.key)}}t?H(e.key,!1,r):Q(e.key,r),$=e.key}else e.key},handleRadioUpdateChecked:function(e){const t=Z(e.key);t?H(e.key,!0,t):e.key},handleUpdateExpanded:function(e,t){var n;if(F.value.has(e))return;const{value:i}=r,o=i.indexOf(e),a=Array.from(i);~o?(a.splice(o,1),N(a)):!t||t.isLeaf||t.shallowLoaded?(a.push(e),N(a)):(F.value.add(e),null===(n=D.value)||void 0===n||n.call(D,t.rawNode).then((()=>{const{value:t}=r,n=Array.from(t);~n.indexOf(e)||n.push(e),N(n)})).finally((()=>{F.value.delete(e)})))},renderCell:V},te)},render(){const{mergedTheme:e,scrollX:t,mergedClsPrefix:n,virtualScroll:r,maxHeight:i,mergedTableLayout:o,flexHeight:a,loadingKeySet:s,onResize:l,setHeaderScrollLeft:c}=this,u=void 0!==t||void 0!==i||a,d=!u&&"auto"===o,h=void 0!==t||d,p={minWidth:ds(t)||"100%"};t&&(p.width="100%");const A=to(Gb,Object.assign({},this.scrollbarProps,{ref:"scrollbarInstRef",scrollable:u||d,class:`${n}-data-table-base-table-body`,style:this.empty?void 0:this.bodyStyle,theme:e.peers.Scrollbar,themeOverrides:e.peerOverrides.Scrollbar,contentStyle:p,container:r?this.virtualListContainer:void 0,content:r?this.virtualListContent:void 0,horizontalRailStyle:{zIndex:3},verticalRailStyle:{zIndex:3},xScrollable:h,onScroll:r?void 0:this.handleTableBodyScroll,internalOnUpdateScrollLeft:c,onResize:l}),{default:()=>{const e={},t={},{cols:i,paginatedDataAndInfo:o,mergedTheme:a,fixedColumnLeftMap:l,fixedColumnRightMap:c,currentPage:u,rowClassName:d,mergedSortState:h,mergedExpandedRowKeySet:A,stickyExpandedRows:f,componentId:m,childTriggerColIndex:g,expandable:v,rowProps:y,handleMouseleaveTable:b,renderExpand:w,summary:x,handleCheckboxUpdateChecked:C,handleRadioUpdateChecked:S,handleUpdateExpanded:B}=this,{length:_}=i;let E;const{data:M,hasChildren:P}=o,T=P?ZS(M,A):M;if(x){const e=x(this.rawPaginatedData);if(Array.isArray(e)){const t=e.map(((e,t)=>({isSummaryRow:!0,key:`__n_summary__${t}`,tmNode:{rawNode:e,disabled:!0},index:-1})));E="top"===this.summaryPlacement?[...t,...T]:[...T,...t]}else{const t={isSummaryRow:!0,key:"__n_summary__",tmNode:{rawNode:e,disabled:!0},index:-1};E="top"===this.summaryPlacement?[t,...T]:[...T,t]}}else E=T;const D=P?{width:va(this.indent)}:void 0,F=[];E.forEach((e=>{w&&A.has(e.key)&&(!v||v(e.tmNode.rawNode))?F.push(e,{isExpandedRow:!0,key:`${e.key}-expand`,tmNode:e.tmNode,index:e.index}):F.push(e)}));const{length:I}=F,k={};M.forEach((({tmNode:e},t)=>{k[t]=e.key}));const O=f?this.bodyWidth:null,L=null===O?void 0:`${O}px`,R=(r,o,p)=>{const{index:m}=r;if("isExpandedRow"in r){const{tmNode:{key:e,rawNode:t}}=r;return to("tr",{class:`${n}-data-table-tr ${n}-data-table-tr--expanded`,key:`${e}__expand`},to("td",{class:[`${n}-data-table-td`,`${n}-data-table-td--last-col`,o+1===I&&`${n}-data-table-td--last-row`],colspan:_},f?to("div",{class:`${n}-data-table-expand`,style:{width:L}},w(t,m)):w(t,m)))}const v="isSummaryRow"in r,b=!v&&r.striped,{tmNode:x,key:E}=r,{rawNode:M}=x,T=A.has(E),F=y?y(M,m):void 0,O="string"==typeof d?d:function(e,t,n){return"function"==typeof n?n(e,t):n||""}(M,m,d),R=to("tr",Object.assign({onMouseenter:()=>{this.hoverKey=E},key:E,class:[`${n}-data-table-tr`,v&&`${n}-data-table-tr--summary`,b&&`${n}-data-table-tr--striped`,T&&`${n}-data-table-tr--expanded`,O]},F),i.map(((i,d)=>{var A,f,y,b,w;if(o in e){const t=e[o],n=t.indexOf(d);if(~n)return t.splice(n,1),null}const{column:x}=i,F=AS(i),{rowSpan:O,colSpan:L}=x,R=v?(null===(A=r.tmNode.rawNode[F])||void 0===A?void 0:A.colSpan)||1:L?L(M,m):1,U=v?(null===(f=r.tmNode.rawNode[F])||void 0===f?void 0:f.rowSpan)||1:O?O(M,m):1,z=d+R===_,N=o+U===I,j=U>1;if(j&&(t[o]={[d]:[]}),R>1||j)for(let n=o;n<o+U;++n){j&&t[o][d].push(k[n]);for(let t=d;t<d+R;++t)n===o&&t===d||(n in e?e[n].push(t):e[n]=[t])}const H=j?this.hoverKey:null,{cellProps:Q}=x,V=null==Q?void 0:Q(M,m),W={"--indent-offset":""};return to("td",Object.assign({},V,{key:F,style:[{textAlign:x.align||void 0,left:va(null===(y=l[F])||void 0===y?void 0:y.start),right:va(null===(b=c[F])||void 0===b?void 0:b.start)},W,(null==V?void 0:V.style)||""],colspan:R,rowspan:p?void 0:U,"data-col-key":F,class:[`${n}-data-table-td`,x.className,null==V?void 0:V.class,v&&`${n}-data-table-td--summary`,(null!==H&&t[o][d].includes(H)||xS(x,h))&&`${n}-data-table-td--hover`,x.fixed&&`${n}-data-table-td--fixed-${x.fixed}`,x.align&&`${n}-data-table-td--${x.align}-align`,"selection"===x.type&&`${n}-data-table-td--selection`,"expand"===x.type&&`${n}-data-table-td--expand`,z&&`${n}-data-table-td--last-col`,N&&`${n}-data-table-td--last-row`]}),P&&d===g?[Qa(W["--indent-offset"]=v?0:r.tmNode.level,to("div",{class:`${n}-data-table-indent`,style:D})),v||r.tmNode.isLeaf?to("div",{class:`${n}-data-table-expand-placeholder`}):to(XS,{class:`${n}-data-table-expand-trigger`,clsPrefix:n,expanded:T,renderExpandIcon:this.renderExpandIcon,loading:s.has(r.key),onClick:()=>{B(E,r.tmNode)}})]:null,"selection"===x.type?v?null:!1===x.multiple?to(JS,{key:u,rowKey:E,disabled:r.tmNode.disabled,onUpdateChecked:()=>{S(r.tmNode)}}):to($S,{key:u,rowKey:E,disabled:r.tmNode.disabled,onUpdateChecked:(e,t)=>{C(r.tmNode,e,t.shiftKey)}}):"expand"===x.type?v?null:!x.expandable||(null===(w=x.expandable)||void 0===w?void 0:w.call(x,M))?to(XS,{clsPrefix:n,expanded:T,renderExpandIcon:this.renderExpandIcon,onClick:()=>{B(E,null)}}):null:to(YS,{clsPrefix:n,index:m,row:M,column:x,isSummary:v,mergedTheme:a,renderCell:this.renderCell}))})));return R};return r?to(du,{ref:"virtualListRef",items:F,itemSize:28,visibleItemsTag:eB,visibleItemsProps:{clsPrefix:n,id:m,cols:i,onMouseleave:b},showScrollbar:!1,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemsStyle:p,itemResizable:!0},{default:({item:e,index:t})=>R(e,t,!0)}):to("table",{class:`${n}-data-table-table`,onMouseleave:b,style:{tableLayout:this.mergedTableLayout}},to("colgroup",null,i.map((e=>to("col",{key:e.key,style:e.style})))),this.showHeader?to(KS,{discrete:!1}):null,this.empty?null:to("tbody",{"data-n-id":m,class:`${n}-data-table-tbody`},F.map(((e,t)=>R(e,t,!1)))))}});if(this.empty){const e=()=>to("div",{class:[`${n}-data-table-empty`,this.loading&&`${n}-data-table-empty--hide`],style:this.bodyStyle,ref:"emptyElRef"},rs(this.dataTableSlots.empty,(()=>[to(Nb,{theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])));return this.shouldDisplaySomeTablePart?to(di,null,A,e()):to(au,{onResize:this.onResize},{default:e})}return A}}),nB=Dn({name:"MainTable",setup(){const{mergedClsPrefixRef:e,rightFixedColumnsRef:t,leftFixedColumnsRef:n,bodyWidthRef:r,maxHeightRef:i,minHeightRef:o,flexHeightRef:a,syncScrollState:s}=rr(tS),l=bt(null),c=bt(null),u=bt(null),d=bt(!(n.value.length||t.value.length)),h=eo((()=>({maxHeight:ds(i.value),minHeight:ds(o.value)})));const p={getBodyElement:function(){const{value:e}=c;return e?e.getScrollContainer():null},getHeaderElement:function(){const{value:e}=l;return e?e.$el:null},scrollTo(e,t){var n;null===(n=c.value)||void 0===n||n.scrollTo(e,t)}};return Dr((()=>{const{value:t}=u;if(!t)return;const n=`${e.value}-data-table-base-table--transition-disabled`;d.value?setTimeout((()=>{t.classList.remove(n)}),0):t.classList.add(n)})),Object.assign({maxHeight:i,mergedClsPrefix:e,selfElRef:u,headerInstRef:l,bodyInstRef:c,bodyStyle:h,flexHeight:a,handleBodyResize:function(e){r.value=e.contentRect.width,s(),d.value||(d.value=!0)}},p)},render(){const{mergedClsPrefix:e,maxHeight:t,flexHeight:n}=this,r=void 0===t&&!n;return to("div",{class:`${e}-data-table-base-table`,ref:"selfElRef"},r?null:to(KS,{ref:"headerInstRef"}),to(tB,{ref:"bodyInstRef",bodyStyle:this.bodyStyle,showHeader:r,flexHeight:n,onResize:this.handleBodyResize}))}});function rB(e){return"object"==typeof e&&"number"==typeof e.multiple&&e.multiple}function iB(e,{dataRelatedColsRef:t,filteredDataRef:n}){const r=[];t.value.forEach((e=>{var t;void 0!==e.sorter&&c(r,{columnKey:e.key,sorter:e.sorter,order:null!==(t=e.defaultSortOrder)&&void 0!==t&&t})}));const i=bt(r),o=eo((()=>{const e=t.value.filter((e=>"selection"!==e.type&&void 0!==e.sorter&&("ascend"===e.sortOrder||"descend"===e.sortOrder||!1===e.sortOrder))),n=e.filter((e=>!1!==e.sortOrder));if(n.length)return n.map((e=>({columnKey:e.key,order:e.sortOrder,sorter:e.sorter})));if(e.length)return[];const{value:r}=i;return Array.isArray(r)?r:r?[r]:[]}));function a(e){const t=function(e){let t=o.value.slice();return e&&!1!==rB(e.sorter)?(t=t.filter((e=>!1!==rB(e.sorter))),c(t,e),t):e||null}(e);s(t)}function s(t){const{"onUpdate:sorter":n,onUpdateSorter:r,onSorterChange:o}=e;n&&Ka(n,t),r&&Ka(r,t),o&&Ka(o,t),i.value=t}function l(){s(null)}function c(e,t){const n=e.findIndex((e=>(null==t?void 0:t.columnKey)&&e.columnKey===t.columnKey));void 0!==n&&n>=0?e[n]=t:e.push(t)}return{clearSorter:l,sort:function(e,n="ascend"){if(e){const r=t.value.find((t=>"selection"!==t.type&&"expand"!==t.type&&t.key===e));if(!(null==r?void 0:r.sorter))return;const i=r.sorter;a({columnKey:e,sorter:i,order:n})}else l()},sortedDataRef:eo((()=>{const e=o.value.slice().sort(((e,t)=>{const n=rB(e.sorter)||0;return(rB(t.sorter)||0)-n}));if(e.length){return n.value.slice().sort(((t,n)=>{let r=0;return e.some((e=>{const{columnKey:i,sorter:o,order:a}=e,s=function(e,t){return t&&(void 0===e||"default"===e||"object"==typeof e&&"default"===e.compare)?function(e){return(t,n)=>{const r=t[e],i=n[e];return null==r?null==i?0:-1:null==i?1:"number"==typeof r&&"number"==typeof i?r-i:"string"==typeof r&&"string"==typeof i?r.localeCompare(i):0}}(t):"function"==typeof e?e:!(!e||"object"!=typeof e||!e.compare||"default"===e.compare)&&e.compare}(o,i);return!(!s||!a||(r=s(t.rawNode,n.rawNode),0===r))&&(r*=function(e){return"ascend"===e?1:"descend"===e?-1:0}(a),!0)})),r}))}return n.value})),mergedSortStateRef:o,deriveNextSorter:a}}function oB(e,{mainTableInstRef:t,mergedCurrentPageRef:n,bodyWidthRef:r}){let i=0;const o=bt(),a=bt(null),s=bt([]),l=bt(null),c=bt([]),u=eo((()=>ds(e.scrollX))),d=eo((()=>e.columns.filter((e=>"left"===e.fixed)))),h=eo((()=>e.columns.filter((e=>"right"===e.fixed)))),p=eo((()=>{const e={};let t=0;return function n(r){r.forEach((r=>{const i={start:t,end:0};e[AS(r)]=i,"children"in r?(n(r.children),i.end=t):(t+=pS(r)||0,i.end=t)}))}(d.value),e})),A=eo((()=>{const e={};let t=0;return function n(r){for(let i=r.length-1;i>=0;--i){const o=r[i],a={start:t,end:0};e[AS(o)]=a,"children"in o?(n(o.children),a.end=t):(t+=pS(o)||0,a.end=t)}}(h.value),e}));function f(){return{header:t.value?t.value.getHeaderElement():null,body:t.value?t.value.getBodyElement():null}}function m(){const{header:t,body:n}=f();if(!n)return;const{value:u}=r;if(null!==u){if(e.maxHeight||e.flexHeight){if(!t)return;const e=i-t.scrollLeft;o.value=0!==e?"head":"body","head"===o.value?(i=t.scrollLeft,n.scrollLeft=i):(i=n.scrollLeft,t.scrollLeft=i)}else i=n.scrollLeft;!function(){var e,t;const{value:n}=d;let r=0;const{value:o}=p;let s=null;for(let a=0;a<n.length;++a){const l=AS(n[a]);if(!(i>((null===(e=o[l])||void 0===e?void 0:e.start)||0)-r))break;s=l,r=(null===(t=o[l])||void 0===t?void 0:t.end)||0}a.value=s}(),function(){s.value=[];let t=e.columns.find((e=>AS(e)===a.value));for(;t&&"children"in t;){const e=t.children.length;if(0===e)break;const n=t.children[e-1];s.value.push(AS(n)),t=n}}(),function(){var t,n;const{value:o}=h,a=Number(e.scrollX),{value:s}=r;if(null===s)return;let c=0,u=null;const{value:d}=A;for(let e=o.length-1;e>=0;--e){const r=AS(o[e]);if(!(Math.round(i+((null===(t=d[r])||void 0===t?void 0:t.start)||0)+s-c)<a))break;u=r,c=(null===(n=d[r])||void 0===n?void 0:n.end)||0}l.value=u}(),function(){c.value=[];let t=e.columns.find((e=>AS(e)===l.value));for(;t&&"children"in t&&t.children.length;){const e=t.children[0];c.value.push(AS(e)),t=e}}()}}return Ir(n,(()=>{!function(){const{body:e}=f();e&&(e.scrollTop=0)}()})),{styleScrollXRef:u,fixedColumnLeftMapRef:p,fixedColumnRightMapRef:A,leftFixedColumnsRef:d,rightFixedColumnsRef:h,leftActiveFixedColKeyRef:a,leftActiveFixedChildrenColKeysRef:s,rightActiveFixedColKeyRef:l,rightActiveFixedChildrenColKeysRef:c,syncScrollState:m,handleTableBodyScroll:function(t){var n;null===(n=e.onScroll)||void 0===n||n.call(e,t),"head"!==o.value?Aa(m):o.value=void 0},handleTableHeaderScroll:function(){"body"!==o.value?Aa(m):o.value=void 0},setHeaderScrollLeft:function(e){const{header:t}=f();t&&(t.scrollLeft=e,m())}}}function aB(e,t){const n=eo((()=>function(e,t){const n=[],r=[],i=[],o=new WeakMap;let a=-1,s=0,l=!1;!function e(o,c){c>a&&(n[c]=[],a=c);for(const n of o)if("children"in n)e(n.children,c+1);else{const e="key"in n?n.key:void 0;r.push({key:AS(n),style:mS(n,void 0!==e?ds(t(e)):void 0),column:n}),s+=1,l||(l=!!n.ellipsis),i.push(n)}}(e,0);let c=0;return function e(t,r){let i=0;t.forEach(((t,l)=>{var u;if("children"in t){const i=c,a={column:t,colSpan:0,rowSpan:1,isLast:!1};e(t.children,r+1),t.children.forEach((e=>{var t,n;a.colSpan+=null!==(n=null===(t=o.get(e))||void 0===t?void 0:t.colSpan)&&void 0!==n?n:0})),i+a.colSpan===s&&(a.isLast=!0),o.set(t,a),n[r].push(a)}else{if(c<i)return void(c+=1);let e=1;"titleColSpan"in t&&(e=null!==(u=t.titleColSpan)&&void 0!==u?u:1),e>1&&(i=c+e);const l={column:t,colSpan:e,rowSpan:a-r+1,isLast:c+e===s};o.set(t,l),n[r].push(l),c+=1}}))}(e,0),{hasEllipsis:l,rows:n,cols:r,dataRelatedCols:i}}(e.columns,t)));return{rowsRef:eo((()=>n.value.rows)),colsRef:eo((()=>n.value.cols)),hasEllipsisRef:eo((()=>n.value.hasEllipsis)),dataRelatedColsRef:eo((()=>n.value.dataRelatedCols))}}const sB=[Ns("fixed-left","\n left: 0;\n position: sticky;\n z-index: 2;\n ",[Ls("&::after",'\n pointer-events: none;\n content: "";\n width: 36px;\n display: inline-block;\n position: absolute;\n top: 0;\n bottom: -1px;\n transition: box-shadow .2s var(--n-bezier);\n right: -36px;\n ')]),Ns("fixed-right","\n right: 0;\n position: sticky;\n z-index: 1;\n ",[Ls("&::before",'\n pointer-events: none;\n content: "";\n width: 36px;\n display: inline-block;\n position: absolute;\n top: 0;\n bottom: -1px;\n transition: box-shadow .2s var(--n-bezier);\n left: -36px;\n ')])],lB=Ls([Us("data-table","\n width: 100%;\n font-size: var(--n-font-size);\n display: flex;\n flex-direction: column;\n position: relative;\n --n-merged-th-color: var(--n-th-color);\n --n-merged-td-color: var(--n-td-color);\n --n-merged-border-color: var(--n-border-color);\n --n-merged-th-color-hover: var(--n-th-color-hover);\n --n-merged-td-color-hover: var(--n-td-color-hover);\n --n-merged-td-color-striped: var(--n-td-color-striped);\n ",[Us("data-table-wrapper","\n flex-grow: 1;\n display: flex;\n flex-direction: column;\n "),Ns("flex-height",[Ls(">",[Us("data-table-wrapper",[Ls(">",[Us("data-table-base-table","\n display: flex;\n flex-direction: column;\n flex-grow: 1;\n ",[Ls(">",[Us("data-table-base-table-body","flex-basis: 0;",[Ls("&:last-child","flex-grow: 1;")])])])])])])]),Ls(">",[Us("data-table-loading-wrapper","\n color: var(--n-loading-color);\n font-size: var(--n-loading-size);\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n transition: color .3s var(--n-bezier);\n display: flex;\n align-items: center;\n justify-content: center;\n ",[ew({originalTransform:"translateX(-50%) translateY(-50%)"})])]),Us("data-table-expand-placeholder","\n margin-right: 8px;\n display: inline-block;\n width: 16px;\n height: 1px;\n "),Us("data-table-indent","\n display: inline-block;\n height: 1px;\n "),Us("data-table-expand-trigger","\n display: inline-flex;\n margin-right: 8px;\n cursor: pointer;\n font-size: 16px;\n vertical-align: -0.2em;\n position: relative;\n width: 16px;\n height: 16px;\n color: var(--n-td-text-color);\n transition: color .3s var(--n-bezier);\n ",[Ns("expanded",[Us("icon","transform: rotate(90deg);",[vy({originalTransform:"rotate(90deg)"})]),Us("base-icon","transform: rotate(90deg);",[vy({originalTransform:"rotate(90deg)"})])]),Us("base-loading","\n color: var(--n-loading-color);\n transition: color .3s var(--n-bezier);\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[vy()]),Us("icon","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[vy()]),Us("base-icon","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[vy()])]),Us("data-table-thead","\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-merged-th-color);\n "),Us("data-table-tr","\n box-sizing: border-box;\n background-clip: padding-box;\n transition: background-color .3s var(--n-bezier);\n ",[Us("data-table-expand","\n position: sticky;\n left: 0;\n overflow: hidden;\n margin: calc(var(--n-th-padding) * -1);\n padding: var(--n-th-padding);\n box-sizing: border-box;\n "),Ns("striped","background-color: var(--n-merged-td-color-striped);",[Us("data-table-td","background-color: var(--n-merged-td-color-striped);")]),js("summary",[Ls("&:hover","background-color: var(--n-merged-td-color-hover);",[Ls(">",[Us("data-table-td","background-color: var(--n-merged-td-color-hover);")])])])]),Us("data-table-th","\n padding: var(--n-th-padding);\n position: relative;\n text-align: start;\n box-sizing: border-box;\n background-color: var(--n-merged-th-color);\n border-color: var(--n-merged-border-color);\n border-bottom: 1px solid var(--n-merged-border-color);\n color: var(--n-th-text-color);\n transition:\n border-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n font-weight: var(--n-th-font-weight);\n ",[Ns("filterable","\n padding-right: 36px;\n ",[Ns("sortable","\n padding-right: calc(var(--n-th-padding) + 36px);\n ")]),sB,Ns("selection","\n padding: 0;\n text-align: center;\n line-height: 0;\n z-index: 3;\n "),zs("title-wrapper","\n display: flex;\n align-items: center;\n flex-wrap: nowrap;\n max-width: 100%;\n ",[zs("title","\n flex: 1;\n min-width: 0;\n ")]),zs("ellipsis","\n display: inline-block;\n vertical-align: bottom;\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap;\n max-width: 100%;\n "),Ns("hover","\n background-color: var(--n-merged-th-color-hover);\n "),Ns("sortable","\n cursor: pointer;\n ",[zs("ellipsis","\n max-width: calc(100% - 18px);\n "),Ls("&:hover","\n background-color: var(--n-merged-th-color-hover);\n ")]),Us("data-table-sorter","\n height: var(--n-sorter-size);\n width: var(--n-sorter-size);\n margin-left: 4px;\n position: relative;\n display: inline-flex;\n align-items: center;\n justify-content: center;\n vertical-align: -0.2em;\n color: var(--n-th-icon-color);\n transition: color .3s var(--n-bezier);\n ",[Us("base-icon","transition: transform .3s var(--n-bezier)"),Ns("desc",[Us("base-icon","\n transform: rotate(0deg);\n ")]),Ns("asc",[Us("base-icon","\n transform: rotate(-180deg);\n ")]),Ns("asc, desc","\n color: var(--n-th-icon-color-active);\n ")]),Us("data-table-resize-button","\n width: var(--n-resizable-container-size);\n position: absolute;\n top: 0;\n right: calc(var(--n-resizable-container-size) / 2);\n bottom: 0;\n cursor: col-resize;\n user-select: none;\n ",[Ls("&::after","\n width: var(--n-resizable-size);\n height: 50%;\n position: absolute;\n top: 50%;\n left: calc(var(--n-resizable-container-size) / 2);\n bottom: 0;\n background-color: var(--n-merged-border-color);\n transform: translateY(-50%);\n transition: background-color .3s var(--n-bezier);\n z-index: 1;\n content: '';\n "),Ns("active",[Ls("&::after"," \n background-color: var(--n-th-icon-color-active);\n ")]),Ls("&:hover::after","\n background-color: var(--n-th-icon-color-active);\n ")]),Us("data-table-filter","\n position: absolute;\n z-index: auto;\n right: 0;\n width: 36px;\n top: 0;\n bottom: 0;\n cursor: pointer;\n display: flex;\n justify-content: center;\n align-items: center;\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n font-size: var(--n-filter-size);\n color: var(--n-th-icon-color);\n ",[Ls("&:hover","\n background-color: var(--n-th-button-color-hover);\n "),Ns("show","\n background-color: var(--n-th-button-color-hover);\n "),Ns("active","\n background-color: var(--n-th-button-color-hover);\n color: var(--n-th-icon-color-active);\n ")])]),Us("data-table-td","\n padding: var(--n-td-padding);\n text-align: start;\n box-sizing: border-box;\n border: none;\n background-color: var(--n-merged-td-color);\n color: var(--n-td-text-color);\n border-bottom: 1px solid var(--n-merged-border-color);\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n ",[Ns("expand",[Us("data-table-expand-trigger","\n margin-right: 0;\n ")]),Ns("last-row","\n border-bottom: 0 solid var(--n-merged-border-color);\n ",[Ls("&::after","\n bottom: 0 !important;\n "),Ls("&::before","\n bottom: 0 !important;\n ")]),Ns("summary","\n background-color: var(--n-merged-th-color);\n "),Ns("hover","\n background-color: var(--n-merged-td-color-hover);\n "),zs("ellipsis","\n display: inline-block;\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap;\n max-width: 100%;\n vertical-align: bottom;\n max-width: calc(100% - var(--indent-offset, -1.5) * 16px - 24px);\n "),Ns("selection, expand","\n text-align: center;\n padding: 0;\n line-height: 0;\n "),sB]),Us("data-table-empty","\n box-sizing: border-box;\n padding: var(--n-empty-padding);\n flex-grow: 1;\n flex-shrink: 0;\n opacity: 1;\n display: flex;\n align-items: center;\n justify-content: center;\n transition: opacity .3s var(--n-bezier);\n ",[Ns("hide","\n opacity: 0;\n ")]),zs("pagination","\n margin: var(--n-pagination-margin);\n display: flex;\n justify-content: flex-end;\n "),Us("data-table-wrapper","\n position: relative;\n opacity: 1;\n transition: opacity .3s var(--n-bezier), border-color .3s var(--n-bezier);\n border-top-left-radius: var(--n-border-radius);\n border-top-right-radius: var(--n-border-radius);\n line-height: var(--n-line-height);\n "),Ns("loading",[Us("data-table-wrapper","\n opacity: var(--n-opacity-loading);\n pointer-events: none;\n ")]),Ns("single-column",[Us("data-table-td","\n border-bottom: 0 solid var(--n-merged-border-color);\n ",[Ls("&::after, &::before","\n bottom: 0 !important;\n ")])]),js("single-line",[Us("data-table-th","\n border-right: 1px solid var(--n-merged-border-color);\n ",[Ns("last","\n border-right: 0 solid var(--n-merged-border-color);\n ")]),Us("data-table-td","\n border-right: 1px solid var(--n-merged-border-color);\n ",[Ns("last-col","\n border-right: 0 solid var(--n-merged-border-color);\n ")])]),Ns("bordered",[Us("data-table-wrapper","\n border: 1px solid var(--n-merged-border-color);\n border-bottom-left-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n overflow: hidden;\n ")]),Us("data-table-base-table",[Ns("transition-disabled",[Us("data-table-th",[Ls("&::after, &::before","transition: none;")]),Us("data-table-td",[Ls("&::after, &::before","transition: none;")])])]),Ns("bottom-bordered",[Us("data-table-td",[Ns("last-row","\n border-bottom: 1px solid var(--n-merged-border-color);\n ")])]),Us("data-table-table","\n font-variant-numeric: tabular-nums;\n width: 100%;\n word-break: break-word;\n transition: background-color .3s var(--n-bezier);\n border-collapse: separate;\n border-spacing: 0;\n background-color: var(--n-merged-td-color);\n "),Us("data-table-base-table-header","\n border-top-left-radius: calc(var(--n-border-radius) - 1px);\n border-top-right-radius: calc(var(--n-border-radius) - 1px);\n z-index: 3;\n overflow: scroll;\n flex-shrink: 0;\n transition: border-color .3s var(--n-bezier);\n scrollbar-width: none;\n ",[Ls("&::-webkit-scrollbar","\n width: 0;\n height: 0;\n ")]),Us("data-table-check-extra","\n transition: color .3s var(--n-bezier);\n color: var(--n-th-icon-color);\n position: absolute;\n font-size: 14px;\n right: -4px;\n top: 50%;\n transform: translateY(-50%);\n z-index: 1;\n ")]),Us("data-table-filter-menu",[Us("scrollbar","\n max-height: 240px;\n "),zs("group","\n display: flex;\n flex-direction: column;\n padding: 12px 12px 0 12px;\n ",[Us("checkbox","\n margin-bottom: 12px;\n margin-right: 0;\n "),Us("radio","\n margin-bottom: 12px;\n margin-right: 0;\n ")]),zs("action","\n padding: var(--n-action-padding);\n display: flex;\n flex-wrap: nowrap;\n justify-content: space-evenly;\n border-top: 1px solid var(--n-action-divider-color);\n ",[Us("button",[Ls("&:not(:last-child)","\n margin: var(--n-action-button-margin);\n "),Ls("&:last-child","\n margin-right: 0;\n ")])]),Us("divider","\n margin: 0 !important;\n ")]),Hs(Us("data-table","\n --n-merged-th-color: var(--n-th-color-modal);\n --n-merged-td-color: var(--n-td-color-modal);\n --n-merged-border-color: var(--n-border-color-modal);\n --n-merged-th-color-hover: var(--n-th-color-hover-modal);\n --n-merged-td-color-hover: var(--n-td-color-hover-modal);\n --n-merged-td-color-striped: var(--n-td-color-striped-modal);\n ")),Qs(Us("data-table","\n --n-merged-th-color: var(--n-th-color-popover);\n --n-merged-td-color: var(--n-td-color-popover);\n --n-merged-border-color: var(--n-border-color-popover);\n --n-merged-th-color-hover: var(--n-th-color-hover-popover);\n --n-merged-td-color-hover: var(--n-td-color-hover-popover);\n --n-merged-td-color-striped: var(--n-td-color-striped-popover);\n "))]);const cB=Dn({name:"DataTable",alias:["AdvancedTable"],props:eS,setup(e,{slots:t}){const{mergedBorderedRef:n,mergedClsPrefixRef:r,inlineThemeDisabled:i,mergedRtlRef:o}=cf(e),a=Iv("DataTable",o,r),s=eo((()=>{const{bottomBordered:t}=e;return!n.value&&(void 0===t||t)})),l=sf("DataTable","-data-table",lB,WC,e,r),c=bt(null),u=bt(null),{getResizableWidth:d,clearResizableWidth:h,doUpdateResizableWidth:p}=function(){const e=bt({});return{getResizableWidth:function(t){return e.value[t]},doUpdateResizableWidth:function(t,n){yS(t)&&"key"in t&&(e.value[t.key]=n)},clearResizableWidth:function(){e.value={}}}}(),{rowsRef:A,colsRef:f,dataRelatedColsRef:m,hasEllipsisRef:g}=aB(e,d),{treeMateRef:v,mergedCurrentPageRef:y,paginatedDataRef:b,rawPaginatedDataRef:w,selectionColumnRef:x,hoverKeyRef:C,mergedPaginationRef:S,mergedFilterStateRef:B,mergedSortStateRef:_,childTriggerColIndexRef:E,doUpdatePage:M,doUpdateFilters:P,onUnstableColumnResize:T,deriveNextSorter:D,filter:F,filters:I,clearFilter:k,clearFilters:O,clearSorter:L,page:R,sort:U}=function(e,{dataRelatedColsRef:t}){const n=eo((()=>{const t=e=>{for(let n=0;n<e.length;++n){const r=e[n];if("children"in r)return t(r.children);if("selection"===r.type)return r}return null};return t(e.columns)})),r=eo((()=>{const{childrenKey:t}=e;return Wy(e.data,{ignoreEmptyChildren:!0,getKey:e.rowKey,getChildren:e=>e[t],getDisabled:e=>{var t,r;return!!(null===(r=null===(t=n.value)||void 0===t?void 0:t.disabled)||void 0===r?void 0:r.call(t,e))}})})),i=Zs((()=>{const{columns:t}=e,{length:n}=t;let r=null;for(let e=0;e<n;++e){const n=t[e];if(n.type||null!==r||(r=e),"tree"in n&&n.tree)return e}return r||0})),o=bt({}),{pagination:a}=e,s=bt(a&&a.defaultPage||1),l=bt(DC(a)),c=eo((()=>{const e=t.value.filter((e=>void 0!==e.filterOptionValues||void 0!==e.filterOptionValue)),n={};return e.forEach((e=>{var t;"selection"!==e.type&&"expand"!==e.type&&(void 0===e.filterOptionValues?n[e.key]=null!==(t=e.filterOptionValue)&&void 0!==t?t:null:n[e.key]=e.filterOptionValues)})),Object.assign(fS(o.value),n)})),u=eo((()=>{const t=c.value,{columns:n}=e;function i(e){return(t,n)=>!!~String(n[e]).indexOf(String(t))}const{value:{treeNodes:o}}=r,a=[];return n.forEach((e=>{"selection"===e.type||"expand"===e.type||"children"in e||a.push([e.key,e])})),o?o.filter((e=>{const{rawNode:n}=e;for(const[r,o]of a){let e=t[r];if(null==e)continue;if(Array.isArray(e)||(e=[e]),!e.length)continue;const a="default"===o.filter?i(r):o.filter;if(o&&"function"==typeof a){if("and"!==o.filterMode){if(e.some((e=>a(e,n))))continue;return!1}if(e.some((e=>!a(e,n))))return!1}}return!0})):[]})),{sortedDataRef:d,deriveNextSorter:h,mergedSortStateRef:p,sort:A,clearSorter:f}=iB(e,{dataRelatedColsRef:t,filteredDataRef:u});t.value.forEach((e=>{var t;if(e.filter){const n=e.defaultFilterOptionValues;e.filterMultiple?o.value[e.key]=n||[]:o.value[e.key]=void 0!==n?null===n?[]:n:null!==(t=e.defaultFilterOptionValue)&&void 0!==t?t:null}}));const m=eo((()=>{const{pagination:t}=e;if(!1!==t)return t.page})),g=eo((()=>{const{pagination:t}=e;if(!1!==t)return t.pageSize})),v=xl(m,s),y=xl(g,l),b=Zs((()=>{const t=v.value;return e.remote?t:Math.max(1,Math.min(Math.ceil(u.value.length/y.value),t))})),w=eo((()=>{const{pagination:t}=e;if(t){const{pageCount:e}=t;if(void 0!==e)return e}})),x=eo((()=>{if(e.remote)return r.value.treeNodes;if(!e.pagination)return d.value;const t=y.value,n=(b.value-1)*t;return d.value.slice(n,n+t)})),C=eo((()=>x.value.map((e=>e.rawNode))));function S(t){const{pagination:n}=e;if(n){const{onChange:e,"onUpdate:page":r,onUpdatePage:i}=n;e&&Ka(e,t),i&&Ka(i,t),r&&Ka(r,t),M(t)}}function B(t){const{pagination:n}=e;if(n){const{onPageSizeChange:e,"onUpdate:pageSize":r,onUpdatePageSize:i}=n;e&&Ka(e,t),i&&Ka(i,t),r&&Ka(r,t),P(t)}}const _=eo((()=>{if(!e.remote)return u.value.length;{const{pagination:t}=e;if(t){const{itemCount:e}=t;if(void 0!==e)return e}}})),E=eo((()=>Object.assign(Object.assign({},e.pagination),{onChange:void 0,onUpdatePage:void 0,onUpdatePageSize:void 0,onPageSizeChange:void 0,"onUpdate:page":S,"onUpdate:pageSize":B,page:b.value,pageSize:y.value,pageCount:void 0===_.value?w.value:void 0,itemCount:_.value})));function M(t){const{"onUpdate:page":n,onPageChange:r,onUpdatePage:i}=e;i&&Ka(i,t),n&&Ka(n,t),r&&Ka(r,t),s.value=t}function P(t){const{"onUpdate:pageSize":n,onPageSizeChange:r,onUpdatePageSize:i}=e;r&&Ka(r,t),i&&Ka(i,t),n&&Ka(n,t),l.value=t}function T(){D({})}function D(e){F(e)}function F(e){e?e&&(o.value=fS(e)):o.value={}}return{treeMateRef:r,mergedCurrentPageRef:b,mergedPaginationRef:E,paginatedDataRef:x,rawPaginatedDataRef:C,mergedFilterStateRef:c,mergedSortStateRef:p,hoverKeyRef:bt(null),selectionColumnRef:n,childTriggerColIndexRef:i,doUpdateFilters:function(t,n){const{onUpdateFilters:r,"onUpdate:filters":i,onFiltersChange:a}=e;r&&Ka(r,t,n),i&&Ka(i,t,n),a&&Ka(a,t,n),o.value=t},deriveNextSorter:h,doUpdatePageSize:P,doUpdatePage:M,onUnstableColumnResize:function(t,n,r,i){var o;null===(o=e.onUnstableColumnResize)||void 0===o||o.call(e,t,n,r,i)},filter:F,filters:D,clearFilter:function(){T()},clearFilters:T,clearSorter:f,page:function(e){M(e)},sort:A}}(e,{dataRelatedColsRef:m}),{doCheckAll:z,doUncheckAll:N,doCheck:j,doUncheck:H,headerCheckboxDisabledRef:Q,someRowsCheckedRef:V,allRowsCheckedRef:W,mergedCheckedRowKeySetRef:G,mergedInderminateRowKeySetRef:q}=function(e,t){const{paginatedDataRef:n,treeMateRef:r,selectionColumnRef:i}=t,o=bt(e.defaultCheckedRowKeys),a=eo((()=>{var t;const{checkedRowKeys:n}=e,a=void 0===n?o.value:n;return!1===(null===(t=i.value)||void 0===t?void 0:t.multiple)?{checkedKeys:a.slice(0,1),indeterminateKeys:[]}:r.value.getCheckedKeys(a,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})})),s=eo((()=>a.value.checkedKeys)),l=eo((()=>a.value.indeterminateKeys)),c=eo((()=>new Set(s.value))),u=eo((()=>new Set(l.value))),d=eo((()=>{const{value:e}=c;return n.value.reduce(((t,n)=>{const{key:r,disabled:i}=n;return t+(!i&&e.has(r)?1:0)}),0)})),h=eo((()=>n.value.filter((e=>e.disabled)).length)),p=eo((()=>{const{length:e}=n.value,{value:t}=u;return d.value>0&&d.value<e-h.value||n.value.some((e=>t.has(e.key)))})),A=eo((()=>{const{length:e}=n.value;return 0!==d.value&&d.value===e-h.value})),f=eo((()=>0===n.value.length));function m(t,n,i){const{"onUpdate:checkedRowKeys":a,onUpdateCheckedRowKeys:s,onCheckedRowKeysChange:l}=e,c=[],{value:{getNode:u}}=r;t.forEach((e=>{var t;const n=null===(t=u(e))||void 0===t?void 0:t.rawNode;c.push(n)})),a&&Ka(a,t,c,{row:n,action:i}),s&&Ka(s,t,c,{row:n,action:i}),l&&Ka(l,t,c,{row:n,action:i}),o.value=t}return{mergedCheckedRowKeySetRef:c,mergedCheckedRowKeysRef:s,mergedInderminateRowKeySetRef:u,someRowsCheckedRef:p,allRowsCheckedRef:A,headerCheckboxDisabledRef:f,doUpdateCheckedRowKeys:m,doCheckAll:function(t=!1){const{value:o}=i;if(!o||e.loading)return;const a=[];(t?r.value.treeNodes:n.value).forEach((e=>{e.disabled||a.push(e.key)})),m(r.value.check(a,s.value,{cascade:!0,allowNotLoaded:e.allowCheckingNotLoaded}).checkedKeys,void 0,"checkAll")},doUncheckAll:function(t=!1){const{value:o}=i;if(!o||e.loading)return;const a=[];(t?r.value.treeNodes:n.value).forEach((e=>{e.disabled||a.push(e.key)})),m(r.value.uncheck(a,s.value,{cascade:!0,allowNotLoaded:e.allowCheckingNotLoaded}).checkedKeys,void 0,"uncheckAll")},doCheck:function(t,n=!1,i){e.loading||m(n?Array.isArray(t)?t.slice(0,1):[t]:r.value.check(t,s.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded}).checkedKeys,i,"check")},doUncheck:function(t,n){e.loading||m(r.value.uncheck(t,s.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded}).checkedKeys,n,"uncheck")}}}(e,{selectionColumnRef:x,treeMateRef:v,paginatedDataRef:b}),{stickyExpandedRowsRef:K,mergedExpandedRowKeysRef:Y,renderExpandRef:X,expandableRef:$,doUpdateExpandedRowKeys:J}=function(e,t){const n=Zs((()=>{for(const t of e.columns)if("expand"===t.type)return t.renderExpand})),r=Zs((()=>{let t;for(const n of e.columns)if("expand"===n.type){t=n.expandable;break}return t})),i=bt(e.defaultExpandAll?(null==n?void 0:n.value)?(()=>{const e=[];return t.value.treeNodes.forEach((t=>{var n;(null===(n=r.value)||void 0===n?void 0:n.call(r,t.rawNode))&&e.push(t.key)})),e})():t.value.getNonLeafKeys():e.defaultExpandedRowKeys),o=Tt(e,"expandedRowKeys");return{stickyExpandedRowsRef:Tt(e,"stickyExpandedRows"),mergedExpandedRowKeysRef:xl(o,i),renderExpandRef:n,expandableRef:r,doUpdateExpandedRowKeys:function(t){const{onUpdateExpandedRowKeys:n,"onUpdate:expandedRowKeys":r}=e;n&&Ka(n,t),r&&Ka(r,t),i.value=t}}}(e,v),{handleTableBodyScroll:Z,handleTableHeaderScroll:ee,syncScrollState:te,setHeaderScrollLeft:ne,leftActiveFixedColKeyRef:re,leftActiveFixedChildrenColKeysRef:ie,rightActiveFixedColKeyRef:oe,rightActiveFixedChildrenColKeysRef:ae,leftFixedColumnsRef:se,rightFixedColumnsRef:le,fixedColumnLeftMapRef:ce,fixedColumnRightMapRef:ue}=oB(e,{bodyWidthRef:c,mainTableInstRef:u,mergedCurrentPageRef:y}),{localeRef:de}=Tv("DataTable"),he=eo((()=>e.virtualScroll||e.flexHeight||void 0!==e.maxHeight||g.value?"fixed":e.tableLayout));nr(tS,{props:e,treeMateRef:v,renderExpandIconRef:Tt(e,"renderExpandIcon"),loadingKeySetRef:bt(new Set),slots:t,indentRef:Tt(e,"indent"),childTriggerColIndexRef:E,bodyWidthRef:c,componentId:Ha(),hoverKeyRef:C,mergedClsPrefixRef:r,mergedThemeRef:l,scrollXRef:eo((()=>e.scrollX)),rowsRef:A,colsRef:f,paginatedDataRef:b,leftActiveFixedColKeyRef:re,leftActiveFixedChildrenColKeysRef:ie,rightActiveFixedColKeyRef:oe,rightActiveFixedChildrenColKeysRef:ae,leftFixedColumnsRef:se,rightFixedColumnsRef:le,fixedColumnLeftMapRef:ce,fixedColumnRightMapRef:ue,mergedCurrentPageRef:y,someRowsCheckedRef:V,allRowsCheckedRef:W,mergedSortStateRef:_,mergedFilterStateRef:B,loadingRef:Tt(e,"loading"),rowClassNameRef:Tt(e,"rowClassName"),mergedCheckedRowKeySetRef:G,mergedExpandedRowKeysRef:Y,mergedInderminateRowKeySetRef:q,localeRef:de,expandableRef:$,stickyExpandedRowsRef:K,rowKeyRef:Tt(e,"rowKey"),renderExpandRef:X,summaryRef:Tt(e,"summary"),virtualScrollRef:Tt(e,"virtualScroll"),rowPropsRef:Tt(e,"rowProps"),stripedRef:Tt(e,"striped"),checkOptionsRef:eo((()=>{const{value:e}=x;return null==e?void 0:e.options})),rawPaginatedDataRef:w,filterMenuCssVarsRef:eo((()=>{const{self:{actionDividerColor:e,actionPadding:t,actionButtonMargin:n}}=l.value;return{"--n-action-padding":t,"--n-action-button-margin":n,"--n-action-divider-color":e}})),onLoadRef:Tt(e,"onLoad"),mergedTableLayoutRef:he,maxHeightRef:Tt(e,"maxHeight"),minHeightRef:Tt(e,"minHeight"),flexHeightRef:Tt(e,"flexHeight"),headerCheckboxDisabledRef:Q,paginationBehaviorOnFilterRef:Tt(e,"paginationBehaviorOnFilter"),summaryPlacementRef:Tt(e,"summaryPlacement"),scrollbarPropsRef:Tt(e,"scrollbarProps"),syncScrollState:te,doUpdatePage:M,doUpdateFilters:P,getResizableWidth:d,onUnstableColumnResize:T,clearResizableWidth:h,doUpdateResizableWidth:p,deriveNextSorter:D,doCheck:j,doUncheck:H,doCheckAll:z,doUncheckAll:N,doUpdateExpandedRowKeys:J,handleTableHeaderScroll:ee,handleTableBodyScroll:Z,setHeaderScrollLeft:ne,renderCell:Tt(e,"renderCell")});const pe={filter:F,filters:I,clearFilters:O,clearSorter:L,page:R,sort:U,clearFilter:k,downloadCsv:t=>{const{fileName:n="data.csv",keepOriginalData:r=!1}=t||{},i=r?e.data:w.value,o=function(e,t){const n=e.filter((e=>"expand"!==e.type&&"selection"!==e.type));return[n.map((e=>e.title)).join(","),...t.map((e=>n.map((t=>{return"string"==typeof(n=e[t.key])?n.replace(/,/g,"\\,"):null==n?"":`${n}`.replace(/,/g,"\\,");var n})).join(",")))].join("\n")}(e.columns,i),a=new Blob([o],{type:"text/csv;charset=utf-8"}),s=URL.createObjectURL(a);((e,t)=>{if(!e)return;const n=document.createElement("a");n.href=e,void 0!==t&&(n.download=t),document.body.appendChild(n),n.click(),document.body.removeChild(n)})(s,n.endsWith(".csv")?n:`${n}.csv`),URL.revokeObjectURL(s)},scrollTo:(e,t)=>{var n;null===(n=u.value)||void 0===n||n.scrollTo(e,t)}},Ae=eo((()=>{const{size:t}=e,{common:{cubicBezierEaseInOut:n},self:{borderColor:r,tdColorHover:i,thColor:o,thColorHover:a,tdColor:s,tdTextColor:c,thTextColor:u,thFontWeight:d,thButtonColorHover:h,thIconColor:p,thIconColorActive:A,filterSize:f,borderRadius:m,lineHeight:g,tdColorModal:v,thColorModal:y,borderColorModal:b,thColorHoverModal:w,tdColorHoverModal:x,borderColorPopover:C,thColorPopover:S,tdColorPopover:B,tdColorHoverPopover:_,thColorHoverPopover:E,paginationMargin:M,emptyPadding:P,boxShadowAfter:T,boxShadowBefore:D,sorterSize:F,resizableContainerSize:I,resizableSize:k,loadingColor:O,loadingSize:L,opacityLoading:R,tdColorStriped:U,tdColorStripedModal:z,tdColorStripedPopover:N,[Gs("fontSize",t)]:j,[Gs("thPadding",t)]:H,[Gs("tdPadding",t)]:Q}}=l.value;return{"--n-font-size":j,"--n-th-padding":H,"--n-td-padding":Q,"--n-bezier":n,"--n-border-radius":m,"--n-line-height":g,"--n-border-color":r,"--n-border-color-modal":b,"--n-border-color-popover":C,"--n-th-color":o,"--n-th-color-hover":a,"--n-th-color-modal":y,"--n-th-color-hover-modal":w,"--n-th-color-popover":S,"--n-th-color-hover-popover":E,"--n-td-color":s,"--n-td-color-hover":i,"--n-td-color-modal":v,"--n-td-color-hover-modal":x,"--n-td-color-popover":B,"--n-td-color-hover-popover":_,"--n-th-text-color":u,"--n-td-text-color":c,"--n-th-font-weight":d,"--n-th-button-color-hover":h,"--n-th-icon-color":p,"--n-th-icon-color-active":A,"--n-filter-size":f,"--n-pagination-margin":M,"--n-empty-padding":P,"--n-box-shadow-before":D,"--n-box-shadow-after":T,"--n-sorter-size":F,"--n-resizable-container-size":I,"--n-resizable-size":k,"--n-loading-size":L,"--n-loading-color":O,"--n-opacity-loading":R,"--n-td-color-striped":U,"--n-td-color-striped-modal":z,"--n-td-color-striped-popover":N}})),fe=i?Fv("data-table",eo((()=>e.size[0])),Ae,e):void 0,me=eo((()=>{if(!e.pagination)return!1;if(e.paginateSinglePage)return!0;const t=S.value,{pageCount:n}=t;return void 0!==n?n>1:t.itemCount&&t.pageSize&&t.itemCount>t.pageSize}));return Object.assign({mainTableInstRef:u,mergedClsPrefix:r,rtlEnabled:a,mergedTheme:l,paginatedData:b,mergedBordered:n,mergedBottomBordered:s,mergedPagination:S,mergedShowPagination:me,cssVars:i?void 0:Ae,themeClass:null==fe?void 0:fe.themeClass,onRender:null==fe?void 0:fe.onRender},pe)},render(){const{mergedClsPrefix:e,themeClass:t,onRender:n,$slots:r,spinProps:i}=this;return null==n||n(),to("div",{class:[`${e}-data-table`,this.rtlEnabled&&`${e}-data-table--rtl`,t,{[`${e}-data-table--bordered`]:this.mergedBordered,[`${e}-data-table--bottom-bordered`]:this.mergedBottomBordered,[`${e}-data-table--single-line`]:this.singleLine,[`${e}-data-table--single-column`]:this.singleColumn,[`${e}-data-table--loading`]:this.loading,[`${e}-data-table--flex-height`]:this.flexHeight}],style:this.cssVars},to("div",{class:`${e}-data-table-wrapper`},to(nB,{ref:"mainTableInstRef"})),this.mergedShowPagination?to("div",{class:`${e}-data-table__pagination`},to(LC,Object.assign({theme:this.mergedTheme.peers.Pagination,themeOverrides:this.mergedTheme.peerOverrides.Pagination,disabled:this.loading},this.mergedPagination))):null,to(co,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?to("div",{class:`${e}-data-table-loading-wrapper`},rs(r.loading,(()=>[to(xy,Object.assign({clsPrefix:e,strokeWidth:20},i))]))):null}))}}),uB={itemFontSize:"12px",itemHeight:"36px",itemWidth:"52px",panelActionPadding:"8px 0"},dB={name:"TimePicker",common:Lb,peers:{Scrollbar:Hb,Button:Cx,Input:qw},self:e=>{const{popoverColor:t,textColor2:n,primaryColor:r,hoverColor:i,dividerColor:o,opacityDisabled:a,boxShadow2:s,borderRadius:l,iconColor:c,iconColorDisabled:u}=e;return Object.assign(Object.assign({},uB),{panelColor:t,panelBoxShadow:s,panelDividerColor:o,itemTextColor:n,itemTextColorActive:r,itemColorHover:i,itemOpacityDisabled:a,itemBorderRadius:l,borderRadius:l,iconColor:c,iconColorDisabled:u})}},hB={itemSize:"24px",itemCellWidth:"38px",itemCellHeight:"32px",scrollItemWidth:"80px",scrollItemHeight:"40px",panelExtraFooterPadding:"8px 12px",panelActionPadding:"8px 12px",calendarTitlePadding:"0",calendarTitleHeight:"28px",arrowSize:"14px",panelHeaderPadding:"8px 12px",calendarDaysHeight:"32px",calendarTitleGridTempateColumns:"28px 28px 1fr 28px 28px",calendarLeftPaddingDate:"6px 12px 4px 12px",calendarLeftPaddingDatetime:"4px 12px",calendarLeftPaddingDaterange:"6px 12px 4px 12px",calendarLeftPaddingDatetimerange:"4px 12px",calendarLeftPaddingMonth:"0",calendarLeftPaddingYear:"0",calendarLeftPaddingQuarter:"0",calendarLeftPaddingMonthrange:"0",calendarLeftPaddingQuarterrange:"0",calendarLeftPaddingYearrange:"0",calendarLeftPaddingWeek:"6px 12px 4px 12px",calendarRightPaddingDate:"6px 12px 4px 12px",calendarRightPaddingDatetime:"4px 12px",calendarRightPaddingDaterange:"6px 12px 4px 12px",calendarRightPaddingDatetimerange:"4px 12px",calendarRightPaddingMonth:"0",calendarRightPaddingYear:"0",calendarRightPaddingQuarter:"0",calendarRightPaddingMonthrange:"0",calendarRightPaddingQuarterrange:"0",calendarRightPaddingYearrange:"0",calendarRightPaddingWeek:"0"},pB={name:"DatePicker",common:Lb,peers:{Input:qw,Button:Cx,TimePicker:dB,Scrollbar:Hb},self:e=>{const{hoverColor:t,fontSize:n,textColor2:r,textColorDisabled:i,popoverColor:o,primaryColor:a,borderRadiusSmall:s,iconColor:l,iconColorDisabled:c,textColor1:u,dividerColor:d,boxShadow2:h,borderRadius:p,fontWeightStrong:A}=e;return Object.assign(Object.assign({},hB),{itemFontSize:n,calendarDaysFontSize:n,calendarTitleFontSize:n,itemTextColor:r,itemTextColorDisabled:i,itemTextColorActive:o,itemTextColorCurrent:a,itemColorIncluded:Ua(a,{alpha:.1}),itemColorHover:t,itemColorDisabled:t,itemColorActive:a,itemBorderRadius:s,panelColor:o,panelTextColor:r,arrowColor:l,calendarTitleTextColor:u,calendarTitleColorHover:t,calendarDaysTextColor:r,panelHeaderDividerColor:d,calendarDaysDividerColor:d,calendarDividerColor:d,panelActionDividerColor:d,panelBoxShadow:h,panelBorderRadius:p,calendarTitleFontWeight:A,scrollItemBorderRadius:p,iconColor:l,iconColorDisabled:c})}};const AB="n-date-picker";var fB="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function mB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gB(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var vB,yB={exports:{}},bB={exports:{}};(vB=bB).exports=function(e){return e&&e.__esModule?e:{default:e}},vB.exports.__esModule=!0,vB.exports.default=vB.exports;var wB=bB.exports,xB={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},e.exports=t.default}(xB,xB.exports);var CB=xB.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)({},e)};var r=n(CB);e.exports=t.default}(yB,yB.exports);const SB=mB(yB.exports);var BB={exports:{}},_B={exports:{}},EB={exports:{}},MB={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(MB);var PB=MB.exports,TB={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},e.exports=t.default}(TB,TB.exports);var DB=TB.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(1,arguments),e instanceof Date||"object"===(0,r.default)(e)&&"[object Date]"===Object.prototype.toString.call(e)};var r=n(PB),i=n(DB);e.exports=t.default}(EB,EB.exports);var FB=EB.exports,IB={exports:{}};!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,r.default)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):new Date(NaN)};var r=n(PB),i=n(DB);e.exports=t.default}(IB,IB.exports);var kB=IB.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,o.default)(1,arguments),!(0,r.default)(e)&&"number"!=typeof e)return!1;var t=(0,i.default)(e);return!isNaN(Number(t))};var r=n(FB),i=n(kB),o=n(DB);e.exports=t.default}(_B,_B.exports);var OB=_B.exports,LB={exports:{}},RB={exports:{}},UB={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);if(isNaN(t))return t;return t<0?Math.ceil(t):Math.floor(t)},e.exports=t.default}(UB,UB.exports);var zB=UB.exports;const NB=mB(zB);!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(2,arguments);var n=(0,i.default)(e).getTime(),a=(0,r.default)(t);return new Date(n+a)};var r=n(zB),i=n(kB),o=n(DB);e.exports=t.default}(RB,RB.exports);var jB=RB.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(2,arguments);var n=(0,o.default)(t);return(0,r.default)(e,-n)};var r=n(jB),i=n(DB),o=n(zB);e.exports=t.default}(LB,LB.exports);var HB=LB.exports,QB={exports:{}},VB={exports:{}};!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),s=n-a;return Math.floor(s/o)+1};var r=n(kB),i=n(DB),o=864e5;e.exports=t.default}(VB,VB.exports);var WB=VB.exports,GB={exports:{}},qB={exports:{}};!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay(),o=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-o),t.setUTCHours(0,0,0,0),t};var r=n(kB),i=n(DB);e.exports=t.default}(qB,qB.exports);var KB=qB.exports,YB={exports:{}},XB={exports:{}};!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var s=(0,o.default)(a),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var c=(0,o.default)(l);return t.getTime()>=s.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1};var r=n(kB),i=n(DB),o=n(KB);e.exports=t.default}(XB,XB.exports);var $B=XB.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(1,arguments);var t=(0,r.default)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,i.default)(n)};var r=n($B),i=n(KB),o=n(DB);e.exports=t.default}(YB,YB.exports);var JB=YB.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),n=(0,i.default)(t).getTime()-(0,o.default)(t).getTime();return Math.round(n/s)+1};var r=n(kB),i=n(KB),o=n(JB),a=n(DB),s=6048e5;e.exports=t.default}(GB,GB.exports);var ZB=GB.exports,e_={exports:{}},t_={exports:{}},n_={};Object.defineProperty(n_,"__esModule",{value:!0}),n_.getDefaultOptions=function(){return r_},n_.setDefaultOptions=function(e){r_=e};var r_={};!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,s,l,c,u,d,h,p;(0,i.default)(1,arguments);var A=(0,a.getDefaultOptions)(),f=(0,o.default)(null!==(n=null!==(s=null!==(l=null!==(c=null==t?void 0:t.weekStartsOn)&&void 0!==c?c:null==t||null===(u=t.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==l?l:A.weekStartsOn)&&void 0!==s?s:null===(h=A.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,r.default)(e),g=m.getUTCDay(),v=(g<f?7:0)+g-f;return m.setUTCDate(m.getUTCDate()-v),m.setUTCHours(0,0,0,0),m};var r=n(kB),i=n(DB),o=n(zB),a=n_;e.exports=t.default}(t_,t_.exports);var i_=t_.exports,o_={exports:{}},a_={exports:{}};!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,l,c,u,d,h,p,A;(0,i.default)(1,arguments);var f=(0,r.default)(e),m=f.getUTCFullYear(),g=(0,s.getDefaultOptions)(),v=(0,a.default)(null!==(n=null!==(l=null!==(c=null!==(u=null==t?void 0:t.firstWeekContainsDate)&&void 0!==u?u:null==t||null===(d=t.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==c?c:g.firstWeekContainsDate)&&void 0!==l?l:null===(p=g.locale)||void 0===p||null===(A=p.options)||void 0===A?void 0:A.firstWeekContainsDate)&&void 0!==n?n:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(m+1,0,v),y.setUTCHours(0,0,0,0);var b=(0,o.default)(y,t),w=new Date(0);w.setUTCFullYear(m,0,v),w.setUTCHours(0,0,0,0);var x=(0,o.default)(w,t);return f.getTime()>=b.getTime()?m+1:f.getTime()>=x.getTime()?m:m-1};var r=n(kB),i=n(DB),o=n(i_),a=n(zB),s=n_;e.exports=t.default}(a_,a_.exports);var s_=a_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,l,c,u,d,h,p,A;(0,i.default)(1,arguments);var f=(0,s.getDefaultOptions)(),m=(0,a.default)(null!==(n=null!==(l=null!==(c=null!==(u=null==t?void 0:t.firstWeekContainsDate)&&void 0!==u?u:null==t||null===(d=t.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==c?c:f.firstWeekContainsDate)&&void 0!==l?l:null===(p=f.locale)||void 0===p||null===(A=p.options)||void 0===A?void 0:A.firstWeekContainsDate)&&void 0!==n?n:1),g=(0,r.default)(e,t),v=new Date(0);return v.setUTCFullYear(g,0,m),v.setUTCHours(0,0,0,0),(0,o.default)(v,t)};var r=n(s_),i=n(DB),o=n(i_),a=n(zB),s=n_;e.exports=t.default}(o_,o_.exports);var l_=o_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(1,arguments);var n=(0,r.default)(e),l=(0,i.default)(n,t).getTime()-(0,o.default)(n,t).getTime();return Math.round(l/s)+1};var r=n(kB),i=n(i_),o=n(l_),a=n(DB),s=6048e5;e.exports=t.default}(e_,e_.exports);var c_=e_.exports,u_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e<0?"-":"",r=Math.abs(e).toString();for(;r.length<t;)r="0"+r;return n+r},e.exports=t.default}(u_,u_.exports);var d_=u_.exports,h_={exports:{}};!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(d_),i={y:function(e,t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return(0,r.default)("yy"===t?i%100:i,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):(0,r.default)(n+1,2)},d:function(e,t){return(0,r.default)(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return(0,r.default)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return(0,r.default)(e.getUTCHours(),t.length)},m:function(e,t){return(0,r.default)(e.getUTCMinutes(),t.length)},s:function(e,t){return(0,r.default)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,i=e.getUTCMilliseconds(),o=Math.floor(i*Math.pow(10,n-3));return(0,r.default)(o,t.length)}};t.default=i,e.exports=t.default}(h_,h_.exports);var p_=h_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(WB),i=n(ZB),o=n($B),a=n(c_),s=n(s_),l=n(d_),c=n(p_),u="midnight",d="noon",h="morning",p="afternoon",A="evening",f="night";function m(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t;return n+String(i)+a+(0,l.default)(o,2)}function g(e,t){return e%60==0?(e>0?"-":"+")+(0,l.default)(Math.abs(e)/60,2):v(e,t)}function v(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+(0,l.default)(Math.floor(i/60),2)+n+(0,l.default)(i%60,2)}var y={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return c.default.y(e,t)},Y:function(e,t,n,r){var i=(0,s.default)(e,r),o=i>0?i:1-i;if("YY"===t){var a=o%100;return(0,l.default)(a,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):(0,l.default)(o,t.length)},R:function(e,t){var n=(0,o.default)(e);return(0,l.default)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return(0,l.default)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,l.default)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,l.default)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return c.default.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return(0,l.default)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=(0,a.default)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):(0,l.default)(i,t.length)},I:function(e,t,n){var r=(0,i.default)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):(0,l.default)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):c.default.d(e,t)},D:function(e,t,n){var i=(0,r.default)(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):(0,l.default)(i,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return(0,l.default)(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return(0,l.default)(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return(0,l.default)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?d:0===i?u:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?A:i>=12?p:i>=4?h:f,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return c.default.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):c.default.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,l.default)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,l.default)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):c.default.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):c.default.s(e,t)},S:function(e,t){return c.default.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return g(i);case"XXXX":case"XX":return v(i);default:return v(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return g(i);case"xxxx":case"xx":return v(i);default:return v(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+m(i,":");default:return"GMT"+v(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+m(i,":");default:return"GMT"+v(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e,o=Math.floor(i.getTime()/1e3);return(0,l.default)(o,t.length)},T:function(e,t,n,r){var i=(r._originalDate||e).getTime();return(0,l.default)(i,t.length)}};t.default=y,e.exports=t.default}(QB,QB.exports);var A_=QB.exports,f_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},r=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},i={p:r,P:function(e,t){var i,o=e.match(/(P+)(p+)?/)||[],a=o[1],s=o[2];if(!s)return n(e,t);switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",n(a,t)).replace("{{time}}",r(s,t))}};t.default=i,e.exports=t.default}(f_,f_.exports);var m_=f_.exports,g_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},e.exports=t.default}(g_,g_.exports);var v_=g_.exports;const y_=mB(v_);var b_={};Object.defineProperty(b_,"__esModule",{value:!0}),b_.isProtectedDayOfYearToken=function(e){return-1!==w_.indexOf(e)},b_.isProtectedWeekYearToken=function(e){return-1!==x_.indexOf(e)},b_.throwProtectedError=function(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))};var w_=["D","DD"],x_=["YY","YYYY"];var C_={exports:{}},S_={exports:{}},B_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r=function(e,t,r){var i,o=n[e];return i="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};t.default=r,e.exports=t.default}(B_,B_.exports);var __=B_.exports,E_={exports:{}},M_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}},e.exports=t.default}(M_,M_.exports);var P_=M_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(P_),i={date:(0,r.default)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,r.default)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,r.default)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};t.default=i,e.exports=t.default}(E_,E_.exports);var T_=E_.exports,D_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},r=function(e,t,r,i){return n[e]};t.default=r,e.exports=t.default}(D_,D_.exports);var F_=D_.exports,I_={exports:{}},k_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!=n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}},e.exports=t.default}(k_,k_.exports);var O_=k_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(O_),i={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,r.default)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,r.default)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,r.default)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,r.default)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,r.default)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};t.default=i,e.exports=t.default}(I_,I_.exports);var L_=I_.exports,R_={exports:{}},U_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(s)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(s)}));return a=e.valueCallback?e.valueCallback(c):c,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(s.length)}}},e.exports=t.default}(U_,U_.exports);var z_=U_.exports,N_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var i=r[0],o=t.match(e.parsePattern);if(!o)return null;var a=e.valueCallback?e.valueCallback(o[0]):o[0];return{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(i.length)}}},e.exports=t.default}(N_,N_.exports);var j_=N_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(z_),i={ordinalNumber:(0,n(j_).default)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,r.default)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,r.default)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,r.default)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,r.default)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,r.default)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};t.default=i,e.exports=t.default}(R_,R_.exports);var H_=R_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(__),i=n(T_),o=n(F_),a=n(L_),s=n(H_),l={code:"en-US",formatDistance:r.default,formatLong:i.default,formatRelative:o.default,localize:a.default,match:s.default,options:{weekStartsOn:0,firstWeekContainsDate:1}};t.default=l,e.exports=t.default}(S_,S_.exports);var Q_=S_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(Q_).default;t.default=r,e.exports=t.default}(C_,C_.exports);var V_=C_.exports;!function(e,t){var n=wB.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var y,b,w,x,C,S,B,_,E,M,P,T,D,F,I,k,O,L;(0,d.default)(2,arguments);var R=String(t),U=(0,h.getDefaultOptions)(),z=null!==(y=null!==(b=null==n?void 0:n.locale)&&void 0!==b?b:U.locale)&&void 0!==y?y:p.default,N=(0,u.default)(null!==(w=null!==(x=null!==(C=null!==(S=null==n?void 0:n.firstWeekContainsDate)&&void 0!==S?S:null==n||null===(B=n.locale)||void 0===B||null===(_=B.options)||void 0===_?void 0:_.firstWeekContainsDate)&&void 0!==C?C:U.firstWeekContainsDate)&&void 0!==x?x:null===(E=U.locale)||void 0===E||null===(M=E.options)||void 0===M?void 0:M.firstWeekContainsDate)&&void 0!==w?w:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=(0,u.default)(null!==(P=null!==(T=null!==(D=null!==(F=null==n?void 0:n.weekStartsOn)&&void 0!==F?F:null==n||null===(I=n.locale)||void 0===I||null===(k=I.options)||void 0===k?void 0:k.weekStartsOn)&&void 0!==D?D:U.weekStartsOn)&&void 0!==T?T:null===(O=U.locale)||void 0===O||null===(L=O.options)||void 0===L?void 0:L.weekStartsOn)&&void 0!==P?P:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!z.localize)throw new RangeError("locale must contain localize property");if(!z.formatLong)throw new RangeError("locale must contain formatLong property");var H=(0,o.default)(e);if(!(0,r.default)(H))throw new RangeError("Invalid time value");var Q=(0,l.default)(H),V=(0,i.default)(H,Q),W={firstWeekContainsDate:N,weekStartsOn:j,locale:z,_originalDate:H};return R.match(f).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,s.default[t])(e,z.formatLong):e})).join("").match(A).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(m);if(!t)return e;return t[1].replace(g,"'")}(r);var o=a.default[i];if(o)return null!=n&&n.useAdditionalWeekYearTokens||!(0,c.isProtectedWeekYearToken)(r)||(0,c.throwProtectedError)(r,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!(0,c.isProtectedDayOfYearToken)(r)||(0,c.throwProtectedError)(r,t,String(e)),o(V,r,z.localize,W);if(i.match(v))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")};var r=n(OB),i=n(HB),o=n(kB),a=n(A_),s=n(m_),l=n(v_),c=b_,u=n(zB),d=n(DB),h=n_,p=n(V_),A=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,f=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m=/^'([^]*?)'?$/,g=/''/g,v=/[a-zA-Z]/;e.exports=t.default}(BB,BB.exports);const W_=mB(BB.exports);function G_(e,t,n){var r=function(e,t,n){if(n&&!n.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale);return r.formatToParts?function(e,t){for(var n=e.formatToParts(t),r=n.length-1;r>=0;--r)if("timeZoneName"===n[r].type)return n[r].value}(r,t):function(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(n);return r?r[0].substr(1):""}(r,t)}function q_(e,t){var n=function(e){if(!Y_[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n="06/25/2014, 00:00:00"===t||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===t;Y_[e]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Y_[e]}(t);return n.formatToParts?function(e,t){try{for(var n=e.formatToParts(t),r=[],i=0;i<n.length;i++){var o=K_[n[i].type];o>=0&&(r[o]=parseInt(n[i].value,10))}return r}catch(a){if(a instanceof RangeError)return[NaN];throw a}}(n,e):function(e,t){var n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}(n,e)}var K_={year:0,month:1,day:2,hour:3,minute:4,second:5};var Y_={};function X_(e,t,n,r,i,o,a){var s=new Date(0);return s.setUTCFullYear(e,t,n),s.setUTCHours(r,i,o,a),s}var $_=36e5,J_=6e4,Z_={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function eE(e,t,n){var r,i,o;if(!e)return 0;if(r=Z_.timezoneZ.exec(e))return 0;if(r=Z_.timezoneHH.exec(e))return nE(o=parseInt(r[1],10))?-o*$_:NaN;if(r=Z_.timezoneHHMM.exec(e)){o=parseInt(r[2],10);var a=parseInt(r[3],10);return nE(o,a)?(i=Math.abs(o)*$_+a*J_,"+"===r[1]?-i:i):NaN}if(function(e){if(rE[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),rE[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());var s=n?t:function(e){return X_(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),l=tE(s,e),c=n?l:function(e,t,n){var r=e.getTime(),i=r-t,o=tE(new Date(i),n);if(t===o)return t;i-=o-t;var a=tE(new Date(i),n);if(o===a)return o;return Math.max(o,a)}(t,l,e);return-c}return NaN}function tE(e,t){var n=q_(e,t),r=X_(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=e.getTime(),o=i%1e3;return r-(i-=o>=0?o:1e3+o)}function nE(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var rE={};var iE={X:function(e,t,n,r){var i=oE(r.timeZone,e);if(0===i)return"Z";switch(t){case"X":return lE(i);case"XXXX":case"XX":return sE(i);default:return sE(i,":")}},x:function(e,t,n,r){var i=oE(r.timeZone,e);switch(t){case"x":return lE(i);case"xxxx":case"xx":return sE(i);default:return sE(i,":")}},O:function(e,t,n,r){var i=oE(r.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+function(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t;return n+String(i)+a+aE(o,2)}(i,":");default:return"GMT"+sE(i,":")}},z:function(e,t,n,r){switch(t){case"z":case"zz":case"zzz":return G_("short",e,r);default:return G_("long",e,r)}}};function oE(e,t){var n=e?eE(e,t,!0)/6e4:t.getTimezoneOffset();if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+e);return n}function aE(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}function sE(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+aE(Math.floor(i/60),2)+n+aE(Math.floor(i%60),2)}function lE(e,t){return e%60==0?(e>0?"-":"+")+aE(Math.abs(e)/60,2):sE(e,t)}var cE=36e5,uE=6e4,dE=2,hE={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function pE(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},r=null==n.additionalDigits?dE:NB(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i=function(e){var t,n={},r=hE.dateTimePattern.exec(e);r?(n.date=r[1],t=r[3]):(r=hE.datePattern.exec(e))?(n.date=r[1],t=r[2]):(n.date=null,t=e);if(t){var i=hE.timeZone.exec(t);i?(n.time=t.replace(i[1],""),n.timeZone=i[1].trim()):n.time=t}return n}(e),o=function(e,t){var n,r=hE.YYY[t],i=hE.YYYYY[t];if(n=hE.YYYY.exec(e)||i.exec(e)){var o=n[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(n=hE.YY.exec(e)||r.exec(e)){var a=n[1];return{year:100*parseInt(a,10),restDateString:e.slice(a.length)}}return{year:null}}(i.date,r),a=o.year,s=function(e,t){if(null===t)return null;var n,r,i,o;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=hE.MM.exec(e))return r=new Date(0),vE(t,i=parseInt(n[1],10)-1)?(r.setUTCFullYear(t,i),r):new Date(NaN);if(n=hE.DDD.exec(e)){r=new Date(0);var a=parseInt(n[1],10);return function(e,t){if(t<1)return!1;var n=gE(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,a)?(r.setUTCFullYear(t,0,a),r):new Date(NaN)}if(n=hE.MMDD.exec(e)){r=new Date(0),i=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return vE(t,i,s)?(r.setUTCFullYear(t,i,s),r):new Date(NaN)}if(n=hE.Www.exec(e))return yE(t,o=parseInt(n[1],10)-1)?AE(t,o):new Date(NaN);if(n=hE.WwwD.exec(e)){o=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return yE(t,o,l)?AE(t,o,l):new Date(NaN)}return null}(o.restDateString,a);if(isNaN(s))return new Date(NaN);if(s){var l,c=s.getTime(),u=0;if(i.time&&(u=function(e){var t,n,r;if(t=hE.HH.exec(e))return bE(n=parseFloat(t[1].replace(",",".")))?n%24*cE:NaN;if(t=hE.HHMM.exec(e))return bE(n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")))?n%24*cE+r*uE:NaN;if(t=hE.HHMMSS.exec(e)){n=parseInt(t[1],10),r=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return bE(n,r,i)?n%24*cE+r*uE+1e3*i:NaN}return null}(i.time),isNaN(u)))return new Date(NaN);if(i.timeZone||n.timeZone){if(l=eE(i.timeZone||n.timeZone,new Date(c+u)),isNaN(l))return new Date(NaN)}else l=y_(new Date(c+u)),l=y_(new Date(c+u+l));return new Date(c+u+l)}return new Date(NaN)}function AE(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var fE=[31,28,31,30,31,30,31,31,30,31,30,31],mE=[31,29,31,30,31,30,31,31,30,31,30,31];function gE(e){return e%400==0||e%4==0&&e%100!=0}function vE(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var r=gE(e);if(r&&n>mE[t])return!1;if(!r&&n>fE[t])return!1}return!0}function yE(e,t,n){return!(t<0||t>52)&&(null==n||!(n<0||n>6))}function bE(e,t,n){return(null==e||!(e<0||e>=25))&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}var wE=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function xE(e,t,n,r){var i=SB(r);return i.timeZone=t,i.originalDate=e,function(e,t,n){var r=String(t),i=n||{},o=r.match(wE);if(o){var a=pE(i.originalDate||e,i);r=o.reduce((function(e,t){if("'"===t[0])return e;var n=e.indexOf(t),r="'"===e[n-1],o=e.replace(t,"'"+iE[t[0]](a,t,null,i)+"'");return r?o.substring(0,n-1)+o.substring(n+1):o}),r)}return W_(e,r,i)}(function(e,t,n){var r=pE(e,n),i=eE(t,r,!0),o=new Date(r.getTime()-i),a=new Date(0);return a.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),a.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),a}(e,t),n,i)}const CE={amHours:["00","01","02","03","04","05","06","07","08","09","10","11"],pmHours:["12","01","02","03","04","05","06","07","08","09","10","11"],hours:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],minutes:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],seconds:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],period:["AM","PM"]};function SE(e){return`00${e}`.slice(-2)}function BE(e,t,n){return Array.isArray(t)?("am"===n?t.filter((e=>e<12)):"pm"===n?t.filter((e=>e>=12)).map((e=>12===e?12:e-12)):t).map((e=>SE(e))):"number"==typeof t?"am"===n?e.filter((e=>{const n=Number(e);return n<12&&n%t==0})):"pm"===n?e.filter((e=>{const n=Number(e);return n>=12&&n%t==0})).map((e=>{const t=Number(e);return SE(12===t?12:t-12)})):e.filter((e=>Number(e)%t==0)):"am"===n?e.filter((e=>Number(e)<12)):"pm"===n?e.map((e=>Number(e))).filter((e=>Number(e)>=12)).map((e=>SE(12===e?12:e-12))):e}function _E(e,t,n){return!n||("number"==typeof n?e%n==0:n.includes(e))}const EE="n-time-picker",ME=Dn({name:"TimePickerPanelCol",props:{clsPrefix:{type:String,required:!0},data:{type:Array,required:!0},activeValue:{type:Number,default:null},onItemClick:Function},render(){const{activeValue:e,onItemClick:t,clsPrefix:n}=this;return this.data.map((r=>{const{label:i,disabled:o,value:a}=r,s=e===a;return to("div",{key:i,"data-active":s?"":null,class:[`${n}-time-picker-col__item`,s&&`${n}-time-picker-col__item--active`,o&&`${n}-time-picker-col__item--disabled`],onClick:t&&!o?()=>{t(a)}:void 0},i)}))}}),PE=Dn({name:"TimePickerPanel",props:{actions:{type:Array,default:()=>["now","confirm"]},showHour:{type:Boolean,default:!0},showMinute:{type:Boolean,default:!0},showSecond:{type:Boolean,default:!0},showPeriod:{type:Boolean,default:!0},isHourInvalid:Boolean,isMinuteInvalid:Boolean,isSecondInvalid:Boolean,isAmPmInvalid:Boolean,isValueInvalid:Boolean,hourValue:{type:Number,default:null},minuteValue:{type:Number,default:null},secondValue:{type:Number,default:null},amPmValue:{type:String,default:null},isHourDisabled:Function,isMinuteDisabled:Function,isSecondDisabled:Function,onHourClick:{type:Function,required:!0},onMinuteClick:{type:Function,required:!0},onSecondClick:{type:Function,required:!0},onAmPmClick:{type:Function,required:!0},onNowClick:Function,clearText:String,nowText:String,confirmText:String,transitionDisabled:Boolean,onClearClick:Function,onConfirmClick:Function,onFocusin:Function,onFocusout:Function,onFocusDetectorFocus:Function,onKeydown:Function,hours:[Number,Array],minutes:[Number,Array],seconds:[Number,Array],use12Hours:Boolean},setup(e){const{mergedThemeRef:t,mergedClsPrefixRef:n}=rr(EE);return{mergedTheme:t,mergedClsPrefix:n,hours:eo((()=>{const{isHourDisabled:t,hours:n,use12Hours:r,amPmValue:i}=e;if(r){const e=null!=i?i:Tm(Date.now())<12?"am":"pm";return BE(CE.hours,n,e).map((n=>{const r=Number(n),i="pm"===e&&12!==r?r+12:r;return{label:n,value:i,disabled:!!t&&t(i)}}))}return BE(CE.hours,n).map((e=>({label:e,value:Number(e),disabled:!!t&&t(Number(e))})))})),minutes:eo((()=>{const{isMinuteDisabled:t,minutes:n}=e;return BE(CE.minutes,n).map((n=>({label:n,value:Number(n),disabled:!!t&&t(Number(n),e.hourValue)})))})),seconds:eo((()=>{const{isSecondDisabled:t,seconds:n}=e;return BE(CE.seconds,n).map((n=>({label:n,value:Number(n),disabled:!!t&&t(Number(n),e.minuteValue,e.hourValue)})))})),amPm:eo((()=>{const{isHourDisabled:t}=e;let n=!0,r=!0;for(let e=0;e<12;++e)if(!(null==t?void 0:t(e))){n=!1;break}for(let e=12;e<24;++e)if(!(null==t?void 0:t(e))){r=!1;break}return[{label:"AM",value:"am",disabled:n},{label:"PM",value:"pm",disabled:r}]})),hourScrollRef:bt(null),minuteScrollRef:bt(null),secondScrollRef:bt(null),amPmScrollRef:bt(null)}},render(){var e,t,n,r;const{mergedClsPrefix:i,mergedTheme:o}=this;return to("div",{tabindex:0,class:`${i}-time-picker-panel`,onFocusin:this.onFocusin,onFocusout:this.onFocusout,onKeydown:this.onKeydown},to("div",{class:`${i}-time-picker-cols`},this.showHour?to("div",{class:[`${i}-time-picker-col`,this.isHourInvalid&&`${i}-time-picker-col--invalid`,this.transitionDisabled&&`${i}-time-picker-col--transition-disabled`]},to(Gb,{ref:"hourScrollRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar},{default:()=>[to(ME,{clsPrefix:i,data:this.hours,activeValue:this.hourValue,onItemClick:this.onHourClick}),to("div",{class:`${i}-time-picker-col__padding`})]})):null,this.showMinute?to("div",{class:[`${i}-time-picker-col`,this.transitionDisabled&&`${i}-time-picker-col--transition-disabled`,this.isMinuteInvalid&&`${i}-time-picker-col--invalid`]},to(Gb,{ref:"minuteScrollRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar},{default:()=>[to(ME,{clsPrefix:i,data:this.minutes,activeValue:this.minuteValue,onItemClick:this.onMinuteClick}),to("div",{class:`${i}-time-picker-col__padding`})]})):null,this.showSecond?to("div",{class:[`${i}-time-picker-col`,this.isSecondInvalid&&`${i}-time-picker-col--invalid`,this.transitionDisabled&&`${i}-time-picker-col--transition-disabled`]},to(Gb,{ref:"secondScrollRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar},{default:()=>[to(ME,{clsPrefix:i,data:this.seconds,activeValue:this.secondValue,onItemClick:this.onSecondClick}),to("div",{class:`${i}-time-picker-col__padding`})]})):null,this.use12Hours?to("div",{class:[`${i}-time-picker-col`,this.isAmPmInvalid&&`${i}-time-picker-col--invalid`,this.transitionDisabled&&`${i}-time-picker-col--transition-disabled`]},to(Gb,{ref:"amPmScrollRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar},{default:()=>[to(ME,{clsPrefix:i,data:this.amPm,activeValue:this.amPmValue,onItemClick:this.onAmPmClick}),to("div",{class:`${i}-time-picker-col__padding`})]})):null),(null===(e=this.actions)||void 0===e?void 0:e.length)?to("div",{class:`${i}-time-picker-actions`},(null===(t=this.actions)||void 0===t?void 0:t.includes("clear"))?to(Bx,{theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,size:"tiny",onClick:this.onClearClick},{default:()=>this.clearText}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("now"))?to(Bx,{size:"tiny",theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,onClick:this.onNowClick},{default:()=>this.nowText}):null,(null===(r=this.actions)||void 0===r?void 0:r.includes("confirm"))?to(Bx,{size:"tiny",type:"primary",class:`${i}-time-picker-actions__confirm`,theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,disabled:this.isValueInvalid,onClick:this.onConfirmClick},{default:()=>this.confirmText}):null):null,to(my,{onFocus:this.onFocusDetectorFocus}))}}),TE=Ls([Us("time-picker","\n z-index: auto;\n position: relative;\n ",[Us("time-picker-icon","\n color: var(--n-icon-color-override);\n transition: color .3s var(--n-bezier);\n "),Ns("disabled",[Us("time-picker-icon","\n color: var(--n-icon-color-disabled-override);\n ")])]),Us("time-picker-panel","\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n outline: none;\n font-size: var(--n-item-font-size);\n border-radius: var(--n-border-radius);\n margin: 4px 0;\n min-width: 104px;\n overflow: hidden;\n background-color: var(--n-panel-color);\n box-shadow: var(--n-panel-box-shadow);\n ",[ew(),Us("time-picker-actions","\n padding: var(--n-panel-action-padding);\n align-items: center;\n display: flex;\n justify-content: space-evenly;\n "),Us("time-picker-cols","\n height: calc(var(--n-item-height) * 6);\n display: flex;\n position: relative;\n transition: border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-panel-divider-color);\n "),Us("time-picker-col","\n flex-grow: 1;\n min-width: var(--n-item-width);\n height: calc(var(--n-item-height) * 6);\n flex-direction: column;\n transition: box-shadow .3s var(--n-bezier);\n ",[Ns("transition-disabled",[zs("item","transition: none;",[Ls("&::before","transition: none;")])]),zs("padding","\n height: calc(var(--n-item-height) * 5);\n "),Ls("&:first-child","min-width: calc(var(--n-item-width) + 4px);",[zs("item",[Ls("&::before","left: 4px;")])]),zs("item","\n cursor: pointer;\n height: var(--n-item-height);\n display: flex;\n align-items: center;\n justify-content: center;\n transition: \n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n opacity .3s var(--n-bezier),\n text-decoration-color .3s var(--n-bezier);\n background: #0000;\n text-decoration-color: #0000;\n color: var(--n-item-text-color);\n z-index: 0;\n box-sizing: border-box;\n padding-top: 4px;\n position: relative;\n ",[Ls("&::before",'\n content: "";\n transition: background-color .3s var(--n-bezier);\n z-index: -1;\n position: absolute;\n left: 0;\n right: 4px;\n top: 4px;\n bottom: 0;\n border-radius: var(--n-item-border-radius);\n '),js("disabled",[Ls("&:hover::before","\n background-color: var(--n-item-color-hover);\n ")]),Ns("active","\n color: var(--n-item-text-color-active);\n ",[Ls("&::before","\n background-color: var(--n-item-color-hover);\n ")]),Ns("disabled","\n opacity: var(--n-item-opacity-disabled);\n cursor: not-allowed;\n ")]),Ns("invalid",[zs("item",[Ns("active","\n text-decoration: line-through;\n text-decoration-color: var(--n-item-text-color-active);\n ")])])])])]);function DE(e,t){return void 0===e||(Array.isArray(e)?e.every((e=>e>=0&&e<=t)):e>=0&&e<=t)}const FE=Dn({name:"TimePicker",props:Object.assign(Object.assign({},sf.props),{to:kl.propTo,bordered:{type:Boolean,default:void 0},actions:Array,defaultValue:{type:Number,default:null},defaultFormattedValue:String,placeholder:String,placement:{type:String,default:"bottom-start"},value:Number,format:{type:String,default:"HH:mm:ss"},valueFormat:String,formattedValue:String,isHourDisabled:Function,size:String,isMinuteDisabled:Function,isSecondDisabled:Function,inputReadonly:Boolean,clearable:Boolean,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onUpdateFormattedValue:[Function,Array],"onUpdate:formattedValue":[Function,Array],onBlur:[Function,Array],onConfirm:[Function,Array],onClear:Function,onFocus:[Function,Array],timeZone:String,showIcon:{type:Boolean,default:!0},disabled:{type:Boolean,default:void 0},show:{type:Boolean,default:void 0},hours:{type:[Number,Array],validator:e=>DE(e,23)},minutes:{type:[Number,Array],validator:e=>DE(e,59)},seconds:{type:[Number,Array],validator:e=>DE(e,59)},use12Hours:Boolean,stateful:{type:Boolean,default:!0},onChange:[Function,Array]}),setup(e){const{mergedBorderedRef:t,mergedClsPrefixRef:n,namespaceRef:r,inlineThemeDisabled:i}=cf(e),{localeRef:o,dateLocaleRef:a}=Tv("TimePicker"),s=Lu(e),{mergedSizeRef:l,mergedDisabledRef:c,mergedStatusRef:u}=s,d=sf("TimePicker","-time-picker",TE,dB,e,n),h=_l(),p=bt(null),A=bt(null),f=eo((()=>({locale:a.value.locale})));function m(t){return null===t?null:Yx(t,e.valueFormat||e.format,new Date,f.value).getTime()}const{defaultValue:g,defaultFormattedValue:v}=e,y=bt(void 0!==v?m(v):g),b=eo((()=>{const{formattedValue:t}=e;if(void 0!==t)return m(t);const{value:n}=e;return void 0!==n?n:y.value})),w=eo((()=>{const{timeZone:t}=e;return t?(e,n,r)=>xE(e,t,n,r):(e,t,n)=>_m(e,t,n)})),x=bt("");Ir((()=>e.timeZone),(()=>{const t=b.value;x.value=null===t?"":w.value(t,e.format,f.value)}),{immediate:!0});const C=bt(!1),S=xl(Tt(e,"show"),C),B=bt(b.value),_=bt(!1),E=eo((()=>o.value.clear)),M=eo((()=>o.value.now)),P=eo((()=>void 0!==e.placeholder?e.placeholder:o.value.placeholder)),T=eo((()=>o.value.negativeText)),D=eo((()=>o.value.positiveText)),F=eo((()=>/H|h|K|k/.test(e.format))),I=eo((()=>e.format.includes("m"))),k=eo((()=>e.format.includes("s"))),O=eo((()=>{const{isHourDisabled:t}=e;return null!==j.value&&(!_E(j.value,0,e.hours)||!!t&&t(j.value))})),L=eo((()=>{const{value:t}=H,{value:n}=j;if(null===t||null===n)return!1;if(!_E(t,0,e.minutes))return!0;const{isMinuteDisabled:r}=e;return!!r&&r(t,n)})),R=eo((()=>{const{value:t}=H,{value:n}=j,{value:r}=Q;if(null===r||null===t||null===n)return!1;if(!_E(r,0,e.seconds))return!0;const{isSecondDisabled:i}=e;return!!i&&i(r,t,n)})),U=eo((()=>O.value||L.value||R.value)),z=eo((()=>e.format.length+4)),N=eo((()=>{const{value:e}=b;return null===e?null:Tm(e)<12?"am":"pm"})),j=eo((()=>{const{value:e}=b;return null===e?null:Number(w.value(e,"HH",f.value))})),H=eo((()=>{const{value:e}=b;return null===e?null:Number(w.value(e,"mm",f.value))})),Q=eo((()=>{const{value:e}=b;return null===e?null:Number(w.value(e,"ss",f.value))}));function V(t){return null===t?null:w.value(t,e.valueFormat||e.format)}function W(t){const{onUpdateValue:n,"onUpdate:value":r,onChange:i}=e,{nTriggerFormChange:o,nTriggerFormInput:a}=s,l=V(t);n&&Ka(n,t,l),r&&Ka(r,t,l),i&&Ka(i,t,l),function(t,n){const{onUpdateFormattedValue:r,"onUpdate:formattedValue":i}=e;r&&Ka(r,t,n),i&&Ka(i,t,n)}(l,t),y.value=t,o(),a()}function G(t){const{onBlur:n}=e,{nTriggerFormBlur:r}=s;n&&Ka(n,t),r()}function q(t){void 0===t&&(t=b.value),x.value=null===t?"":w.value(t,e.format,f.value)}function K(){if(!A.value)return;const{hourScrollRef:e,minuteScrollRef:t,secondScrollRef:n,amPmScrollRef:r}=A.value;[e,t,n,r].forEach((e=>{var t;if(!e)return;const n=null===(t=e.contentRef)||void 0===t?void 0:t.querySelector("[data-active]");n&&e.scrollTo({top:n.offsetTop})}))}function Y(t){C.value=t;const{onUpdateShow:n,"onUpdate:show":r}=e;n&&Ka(n,t),r&&Ka(r,t)}function X(e){var t,n,r;return!(!(null===(n=null===(t=p.value)||void 0===t?void 0:t.wrapperElRef)||void 0===n?void 0:n.contains(e.relatedTarget))&&!(null===(r=A.value)||void 0===r?void 0:r.$el.contains(e.relatedTarget)))}function $(){B.value=b.value,Y(!0),Vt(K)}function J({returnFocus:e}){var t;S.value&&(Y(!1),e&&(null===(t=p.value)||void 0===t||t.focus()))}Ir(b,(e=>{q(e),_.value=!0,Vt((()=>{_.value=!1})),Vt(K)})),Ir(S,(()=>{U.value&&W(B.value)})),nr(EE,{mergedThemeRef:d,mergedClsPrefixRef:n});const Z={focus:()=>{var e;null===(e=p.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=p.value)||void 0===e||e.blur()}},ee=eo((()=>{const{common:{cubicBezierEaseInOut:e},self:{iconColor:t,iconColorDisabled:n}}=d.value;return{"--n-icon-color-override":t,"--n-icon-color-disabled-override":n,"--n-bezier":e}})),te=i?Fv("time-picker-trigger",void 0,ee,e):void 0,ne=eo((()=>{const{self:{panelColor:e,itemTextColor:t,itemTextColorActive:n,itemColorHover:r,panelDividerColor:i,panelBoxShadow:o,itemOpacityDisabled:a,borderRadius:s,itemFontSize:l,itemWidth:c,itemHeight:u,panelActionPadding:h,itemBorderRadius:p},common:{cubicBezierEaseInOut:A}}=d.value;return{"--n-bezier":A,"--n-border-radius":s,"--n-item-color-hover":r,"--n-item-font-size":l,"--n-item-height":u,"--n-item-opacity-disabled":a,"--n-item-text-color":t,"--n-item-text-color-active":n,"--n-item-width":c,"--n-panel-action-padding":h,"--n-panel-box-shadow":o,"--n-panel-color":e,"--n-panel-divider-color":i,"--n-item-border-radius":p}})),re=i?Fv("time-picker",void 0,ne,e):void 0;return{focus:Z.focus,blur:Z.blur,mergedStatus:u,mergedBordered:t,mergedClsPrefix:n,namespace:r,uncontrolledValue:y,mergedValue:b,isMounted:Cl(),inputInstRef:p,panelInstRef:A,adjustedTo:kl(e),mergedShow:S,localizedClear:E,localizedNow:M,localizedPlaceholder:P,localizedNegativeText:T,localizedPositiveText:D,hourInFormat:F,minuteInFormat:I,secondInFormat:k,mergedAttrSize:z,displayTimeString:x,mergedSize:l,mergedDisabled:c,isValueInvalid:U,isHourInvalid:O,isMinuteInvalid:L,isSecondInvalid:R,transitionDisabled:_,hourValue:j,minuteValue:H,secondValue:Q,amPmValue:N,handleInputKeydown:function(e){"Escape"===e.key&&S.value&&Xs(e)},handleTimeInputFocus:function(t){X(t)||function(t){const{onFocus:n}=e,{nTriggerFormFocus:r}=s;n&&Ka(n,t),r()}(t)},handleTimeInputBlur:function(e){var t;if(!X(e))if(S.value){const n=null===(t=A.value)||void 0===t?void 0:t.$el;(null==n?void 0:n.contains(e.relatedTarget))||(q(),G(e),J({returnFocus:!1}))}else q(),G(e)},handleNowClick:function(){const t=new Date,n={hours:Tm,minutes:Fm,seconds:km},[r,i,o]=["hours","minutes","seconds"].map((r=>!e[r]||_E(n[r](t),0,e[r])?n[r](t):function(e,t,n){const r=BE(CE[t],n).map(Number);let i,o;for(let a=0;a<r.length;++a){const t=r[a];if(t===e)return t;if(t>e){o=t;break}i=t}return void 0===i?(o||$a("time-picker","Please set 'hours' or 'minutes' or 'seconds' props"),o):void 0===o||o-e>e-i?i:o}(n[r](t),r,e[r]))),a=Mv(Ev(_v(b.value?b.value:Om(t),r),i),o);W(Om(a))},handleConfirmClick:function(){q(),function(){const{onConfirm:t}=e;t&&Ka(t,b.value,V(b.value))}(),J({returnFocus:!0})},handleTimeInputUpdateValue:function(t){if(""===t)return void W(null);const n=Yx(t,e.format,new Date,f.value);if(x.value=t,Of(n)){const{value:e}=b;if(null!==e){W(Om(Bv(e,{hours:Tm(n),minutes:Fm(n),seconds:km(n),milliseconds:Dm(n)})))}else W(Om(n))}},handleMenuFocusOut:function(e){X(e)||(q(),G(e),J({returnFocus:!1}))},handleCancelClick:function(){W(B.value),Y(!1)},handleClickOutside:function(e){var t,n;S.value&&!(null===(n=null===(t=p.value)||void 0===t?void 0:t.wrapperElRef)||void 0===n?void 0:n.contains(ma(e)))&&J({returnFocus:!1})},handleTimeInputActivate:function(){c.value||S.value||$()},handleTimeInputDeactivate:function(){c.value||(q(),J({returnFocus:!1}))},handleHourClick:function(e){"string"!=typeof e&&(null===b.value?W(Om(_v(function(e){pf(1,arguments);var t=ff(e);return t.setMinutes(0,0,0),t}(new Date),e))):W(Om(_v(b.value,e))))},handleMinuteClick:function(e){"string"!=typeof e&&(null===b.value?W(Om(Ev(function(e){pf(1,arguments);var t=ff(e);return t.setSeconds(0,0),t}(new Date),e))):W(Om(Ev(b.value,e))))},handleSecondClick:function(e){"string"!=typeof e&&(null===b.value?W(Om(Mv(xv(new Date),e))):W(Om(Mv(b.value,e))))},handleAmPmClick:function(e){const{value:t}=b;if(null===t){const t=new Date,n=Tm(t);"pm"===e&&n<12?W(Om(_v(t,n+12))):"am"===e&&n>=12&&W(Om(_v(t,n-12))),W(Om(t))}else{const n=Tm(t);"pm"===e&&n<12?W(Om(_v(t,n+12))):"am"===e&&n>=12&&W(Om(_v(t,n-12)))}},handleTimeInputClear:function(t){var n;t.stopPropagation(),W(null),q(null),null===(n=e.onClear)||void 0===n||n.call(e)},handleFocusDetectorFocus:function(){J({returnFocus:!0})},handleMenuKeydown:function(e){var t;switch(e.key){case"Escape":S.value&&(Xs(e),J({returnFocus:!0}));break;case"Tab":h.shift&&e.target===(null===(t=A.value)||void 0===t?void 0:t.$el)&&(e.preventDefault(),J({returnFocus:!0}))}},handleTriggerClick:function(e){c.value||fa(e,"clear")||S.value||$()},mergedTheme:d,triggerCssVars:i?void 0:ee,triggerThemeClass:null==te?void 0:te.themeClass,triggerOnRender:null==te?void 0:te.onRender,cssVars:i?void 0:ne,themeClass:null==re?void 0:re.themeClass,onRender:null==re?void 0:re.onRender,clearSelectedValue:function(){W(null),q(null),J({returnFocus:!0})}}},render(){const{mergedClsPrefix:e,$slots:t,triggerOnRender:n}=this;return null==n||n(),to("div",{class:[`${e}-time-picker`,this.triggerThemeClass],style:this.triggerCssVars},to(Vl,null,{default:()=>[to(Wl,null,{default:()=>to(ex,{ref:"inputInstRef",status:this.mergedStatus,value:this.displayTimeString,bordered:this.mergedBordered,passivelyActivated:!0,attrSize:this.mergedAttrSize,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,stateful:this.stateful,size:this.mergedSize,placeholder:this.localizedPlaceholder,clearable:this.clearable,disabled:this.mergedDisabled,textDecoration:this.isValueInvalid?"line-through":void 0,onFocus:this.handleTimeInputFocus,onBlur:this.handleTimeInputBlur,onActivate:this.handleTimeInputActivate,onDeactivate:this.handleTimeInputDeactivate,onUpdateValue:this.handleTimeInputUpdateValue,onClear:this.handleTimeInputClear,internalDeactivateOnEnter:!0,internalForceFocus:this.mergedShow,readonly:this.inputReadonly||this.mergedDisabled,onClick:this.handleTriggerClick,onKeydown:this.handleInputKeydown},this.showIcon?{[this.clearable?"clear-icon-placeholder":"suffix"]:()=>to(py,{clsPrefix:e,class:`${e}-time-picker-icon`},{default:()=>t.icon?t.icon():to(ry,null)})}:null)}),to(gc,{teleportDisabled:this.adjustedTo===kl.tdkey,show:this.mergedShow,to:this.adjustedTo,containerClass:this.namespace,placement:this.placement},{default:()=>to(co,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{var e;return this.mergedShow?(null===(e=this.onRender)||void 0===e||e.call(this),En(to(PE,{ref:"panelInstRef",actions:this.actions,class:this.themeClass,style:this.cssVars,seconds:this.seconds,minutes:this.minutes,hours:this.hours,transitionDisabled:this.transitionDisabled,hourValue:this.hourValue,showHour:this.hourInFormat,isHourInvalid:this.isHourInvalid,isHourDisabled:this.isHourDisabled,minuteValue:this.minuteValue,showMinute:this.minuteInFormat,isMinuteInvalid:this.isMinuteInvalid,isMinuteDisabled:this.isMinuteDisabled,secondValue:this.secondValue,amPmValue:this.amPmValue,showSecond:this.secondInFormat,isSecondInvalid:this.isSecondInvalid,isSecondDisabled:this.isSecondDisabled,isValueInvalid:this.isValueInvalid,clearText:this.localizedClear,nowText:this.localizedNow,confirmText:this.localizedPositiveText,use12Hours:this.use12Hours,onFocusout:this.handleMenuFocusOut,onKeydown:this.handleMenuKeydown,onHourClick:this.handleHourClick,onMinuteClick:this.handleMinuteClick,onSecondClick:this.handleSecondClick,onAmPmClick:this.handleAmPmClick,onNowClick:this.handleNowClick,onConfirmClick:this.handleConfirmClick,onClearClick:this.clearSelectedValue,onFocusDetectorFocus:this.handleFocusDetectorFocus}),[[Yl,this.handleClickOutside,void 0,{capture:!0}]])):null}})})]}))}}),IE={active:Boolean,dateFormat:String,timerPickerFormat:{type:String,value:"HH:mm:ss"},value:{type:[Array,Number],default:null},shortcuts:Object,defaultTime:[Number,String,Array],onClear:Function,onConfirm:Function,onClose:Function,onTabOut:Function,onUpdateValue:{type:Function,required:!0},themeClass:String,onRender:Function,panel:Boolean,onNextMonth:Function,onPrevMonth:Function,onNextYear:Function,onPrevYear:Function};function kE(e){const{dateLocaleRef:t,timePickerSizeRef:n,timePickerPropsRef:r,localeRef:i,mergedClsPrefixRef:o,mergedThemeRef:a}=rr(AB),s=eo((()=>({locale:t.value.locale}))),l=bt(null),c=_l();function u(t,n){const{onUpdateValue:r}=e;r(t,n)}function d(t=!1){const{onClose:n}=e;n&&n(t)}function h(){const{onTabOut:t}=e;t&&t()}let p=null,A=!1;function f(){A&&(u(p,!1),A=!1)}const m=bt(!1);return{mergedTheme:a,mergedClsPrefix:o,dateFnsOptions:s,timePickerSize:n,timePickerProps:r,selfRef:l,locale:i,doConfirm:function(){const{onConfirm:t,value:n}=e;t&&t(n)},doClose:d,doUpdateValue:u,doTabOut:h,handleClearClick:function(){u(null,!0),d(!0),function(){const{onClear:t}=e;t&&t()}()},handleFocusDetectorFocus:function(){h()},disableTransitionOneTick:function(){(e.active||e.panel)&&Vt((()=>{const{value:e}=l;if(!e)return;const t=e.querySelectorAll("[data-n-date]");t.forEach((e=>{e.classList.add("transition-disabled")})),e.offsetWidth,t.forEach((e=>{e.classList.remove("transition-disabled")}))}))},handlePanelKeyDown:function(e){"Tab"===e.key&&e.target===l.value&&c.shift&&(e.preventDefault(),h())},handlePanelFocus:function(e){const{value:t}=l;c.tab&&e.target===t&&(null==t?void 0:t.contains(e.relatedTarget))&&h()},cachePendingValue:function(){p=e.value,A=!0},clearPendingValue:function(){A=!1},restorePendingValue:f,getShortcutValue:function(e){return"function"==typeof e?e():e},handleShortcutMouseleave:f,showMonthYearPanel:m,handleOpenQuickSelectMonthPanel:function(){m.value=!m.value}}}const OE=Object.assign(Object.assign({},IE),{defaultCalendarStartTime:Number,actions:{type:Array,default:()=>["now","clear","confirm"]}});function LE(e,t){var n;const r=kE(e),{isValueInvalidRef:i,isDateDisabledRef:o,isDateInvalidRef:a,isTimeInvalidRef:s,isDateTimeInvalidRef:l,isHourDisabledRef:c,isMinuteDisabledRef:u,isSecondDisabledRef:d,localeRef:h,firstDayOfWeekRef:p,datePickerSlots:A,yearFormatRef:f,monthFormatRef:m,quarterFormatRef:g}=rr(AB),v={isValueInvalid:i,isDateDisabled:o,isDateInvalid:a,isTimeInvalid:s,isDateTimeInvalid:l,isHourDisabled:c,isMinuteDisabled:u,isSecondDisabled:d},y=eo((()=>e.dateFormat||h.value.dateFormat)),b=bt(null===e.value||Array.isArray(e.value)?"":_m(e.value,y.value)),w=bt(null===e.value||Array.isArray(e.value)?null!==(n=e.defaultCalendarStartTime)&&void 0!==n?n:Date.now():e.value),x=bt(null),C=bt(null),S=bt(null),B=bt(Date.now()),_=eo((()=>{var n;return Wx(w.value,e.value,B.value,null!==(n=p.value)&&void 0!==n?n:h.value.firstDayOfWeek,!1,"week"===t)})),E=eo((()=>{const{value:t}=e;return Gx(w.value,Array.isArray(t)?null:t,B.value,{monthFormat:m.value})})),M=eo((()=>{const{value:t}=e;return Kx(Array.isArray(t)?null:t,B.value,{yearFormat:f.value})})),P=eo((()=>{const{value:t}=e;return qx(w.value,Array.isArray(t)?null:t,B.value,{quarterFormat:g.value})})),T=eo((()=>_.value.slice(0,7).map((e=>{const{ts:t}=e;return _m(t,h.value.dayFormat,r.dateFnsOptions.value)})))),D=eo((()=>_m(w.value,h.value.monthFormat,r.dateFnsOptions.value))),F=eo((()=>_m(w.value,h.value.yearFormat,r.dateFnsOptions.value)));function I(e){var n;if("datetime"===t)return Om(xv(e));if("month"===t)return Om(Uf(e));if("year"===t)return Om(zf(e));if("quarter"===t)return Om(Rf(e));if("week"===t){return Om(Tf(e,{weekStartsOn:((null!==(n=p.value)&&void 0!==n?n:h.value.firstDayOfWeek)+1)%7}))}return Om(Ff(e))}function k(e,t){const{isDateDisabled:{value:n}}=v;return!!n&&n(e,t)}Ir(w,((e,n)=>{"date"!==t&&"datetime"!==t||bv(e,n)||r.disableTransitionOneTick()})),Ir(eo((()=>e.value)),(e=>{null===e||Array.isArray(e)?b.value="":(b.value=_m(e,y.value,r.dateFnsOptions.value),w.value=e)}));const O=bt(null);function L(){v.isDateInvalid.value||v.isTimeInvalid.value||(r.doConfirm(),e.active&&r.doClose())}function R(t){const{value:n}=e;if(S.value){const e=Im(void 0===t?null===n?Date.now():n:t);S.value.scrollTo({top:e*kx})}if(x.value){const e=Lm(void 0===t?null===n?Date.now():n:t)-Ix;x.value.scrollTo({top:e*kx})}}const U={monthScrollbarRef:S,yearScrollbarRef:C,yearVlRef:x};return Object.assign(Object.assign(Object.assign(Object.assign({dateArray:_,monthArray:E,yearArray:M,quarterArray:P,calendarYear:F,calendarMonth:D,weekdays:T,mergedIsDateDisabled:k,nextYear:function(){var t;w.value=Om(kf(w.value,1)),null===(t=e.onNextYear)||void 0===t||t.call(e)},prevYear:function(){var t;w.value=Om(kf(w.value,-1)),null===(t=e.onPrevYear)||void 0===t||t.call(e)},nextMonth:function(){var t;w.value=Om(Pf(w.value,1)),null===(t=e.onNextMonth)||void 0===t||t.call(e)},prevMonth:function(){var t;w.value=Om(Pf(w.value,-1)),null===(t=e.onPrevMonth)||void 0===t||t.call(e)},handleNowClick:function(){r.doUpdateValue(Om(I(Date.now())),!0);const n=Date.now();w.value=n,r.doClose(!0),!e.panel||"month"!==t&&"quarter"!==t&&"year"!==t||(r.disableTransitionOneTick(),R(n))},handleConfirmClick:L,handleSingleShortcutMouseenter:function(e){r.cachePendingValue();const t=r.getShortcutValue(e);"number"==typeof t&&r.doUpdateValue(t,!1)},handleSingleShortcutClick:function(t){const n=r.getShortcutValue(t);"number"==typeof n&&(r.doUpdateValue(n,e.panel),r.clearPendingValue(),L())}},v),r),U),{handleDateClick:function(n){if(k(n.ts,"date"===n.type?{type:"date",year:n.dateObject.year,month:n.dateObject.month,date:n.dateObject.date}:"month"===n.type?{type:"month",year:n.dateObject.year,month:n.dateObject.month}:"year"===n.type?{type:"year",year:n.dateObject.year}:{type:"quarter",year:n.dateObject.year,quarter:n.dateObject.quarter}))return;let i;if(i=null===e.value||Array.isArray(e.value)?Date.now():e.value,"datetime"===t&&null!==e.defaultTime&&!Array.isArray(e.defaultTime)){const t=Xx(e.defaultTime);t&&(i=Om(Bv(i,t)))}switch(i=Om("quarter"===n.type&&n.dateObject.quarter?function(e,t){pf(2,arguments);var n=ff(e),r=mf(t)-(Math.floor(n.getMonth()/3)+1);return Sv(n,n.getMonth()+3*r)}(Pv(i,n.dateObject.year),n.dateObject.quarter):Bv(i,n.dateObject)),r.doUpdateValue(I(i),e.panel||"date"===t||"week"===t||"year"===t),t){case"date":case"week":r.doClose();break;case"year":e.panel&&r.disableTransitionOneTick(),r.doClose();break;case"month":case"quarter":r.disableTransitionOneTick(),R(i)}},handleDateInputBlur:function(){const t=Yx(b.value,y.value,new Date,r.dateFnsOptions.value);if(Of(t)){if(null===e.value)r.doUpdateValue(Om(I(Date.now())),!1);else if(!Array.isArray(e.value)){const n=Bv(e.value,{year:Lm(t),month:Im(t),date:Mm(t)});r.doUpdateValue(Om(I(Om(n))),!1)}}else!function(t){if(null===e.value||Array.isArray(e.value))return void(b.value="");void 0===t&&(t=e.value);b.value=_m(t,y.value,r.dateFnsOptions.value)}()},handleDateInput:function(t){const n=Yx(t,y.value,new Date,r.dateFnsOptions.value);if(Of(n)){if(null===e.value)r.doUpdateValue(Om(I(Date.now())),e.panel);else if(!Array.isArray(e.value)){const t=Bv(e.value,{year:Lm(n),month:Im(n),date:Mm(n)});r.doUpdateValue(Om(I(Om(t))),e.panel)}}else b.value=t},handleDateMouseEnter:function(e){"date"===e.type&&"week"===t&&(O.value=I(Om(e.ts)))},isWeekHovered:function(e){return"date"===e.type&&"week"===t&&I(Om(e.ts))===O.value},handleTimePickerChange:function(t){null!==t&&r.doUpdateValue(t,e.panel)},clearSelectedDateTime:function(){r.doUpdateValue(null,!0),b.value="",r.doClose(!0),r.handleClearClick()},virtualListContainer:function(){const{value:e}=x;return(null==e?void 0:e.listElRef)||null},virtualListContent:function(){const{value:e}=x;return(null==e?void 0:e.itemsElRef)||null},handleVirtualListScroll:function(e){var t;null===(t=C.value)||void 0===t||t.sync()},timePickerSize:r.timePickerSize,dateInputValue:b,datePickerSlots:A,handleQuickMonthClick:function(t,n){let r;r=null===e.value||Array.isArray(e.value)?Date.now():e.value,r=Om("month"===t.type?Sv(r,t.dateObject.month):Pv(r,t.dateObject.year)),n(r),R(r)},justifyColumnsScrollState:R,calendarValue:w,onUpdateCalendarValue:function(e){w.value=e}})}const RE=Dn({name:"MonthPanel",props:Object.assign(Object.assign({},OE),{type:{type:String,required:!0},useAsQuickJump:Boolean}),setup(e){const t=LE(e,e.type),{dateLocaleRef:n}=Tv("DatePicker"),{useAsQuickJump:r}=e;return vn((()=>{t.justifyColumnsScrollState()})),Object.assign(Object.assign({},t),{renderItem:(i,o,a)=>{const{mergedIsDateDisabled:s,handleDateClick:l,handleQuickMonthClick:c}=t;return to("div",{"data-n-date":!0,key:o,class:[`${a}-date-panel-month-calendar__picker-col-item`,i.isCurrent&&`${a}-date-panel-month-calendar__picker-col-item--current`,i.selected&&`${a}-date-panel-month-calendar__picker-col-item--selected`,!r&&s(i.ts,"year"===i.type?{type:"year",year:i.dateObject.year}:"month"===i.type?{type:"month",year:i.dateObject.year,month:i.dateObject.month}:"quarter"===i.type?{type:"month",year:i.dateObject.year,month:i.dateObject.quarter}:null)&&`${a}-date-panel-month-calendar__picker-col-item--disabled`],onClick:()=>{r?c(i,(t=>{e.onUpdateValue(t,!1)})):l(i)}},(e=>{switch(e.type){case"year":return Nx(e.dateObject.year,e.yearFormat,n.value.locale);case"month":return zx(e.dateObject.month,e.monthFormat,n.value.locale);case"quarter":return jx(e.dateObject.quarter,e.quarterFormat,n.value.locale)}})(i))}})},render(){const{mergedClsPrefix:e,mergedTheme:t,shortcuts:n,actions:r,renderItem:i,type:o,onRender:a}=this;return null==a||a(),to("div",{ref:"selfRef",tabindex:0,class:[`${e}-date-panel`,`${e}-date-panel--month`,!this.panel&&`${e}-date-panel--shadow`,this.themeClass],onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},to("div",{class:`${e}-date-panel-month-calendar`},to(Gb,{ref:"yearScrollbarRef",class:`${e}-date-panel-month-calendar__picker-col`,theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,container:this.virtualListContainer,content:this.virtualListContent,horizontalRailStyle:{zIndex:1},verticalRailStyle:{zIndex:1}},{default:()=>to(du,{ref:"yearVlRef",items:this.yearArray,itemSize:kx,showScrollbar:!1,keyField:"ts",onScroll:this.handleVirtualListScroll,paddingBottom:4},{default:({item:t,index:n})=>i(t,n,e)})}),"month"===o||"quarter"===o?to("div",{class:`${e}-date-panel-month-calendar__picker-col`},to(Gb,{ref:"monthScrollbarRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar},{default:()=>[("month"===o?this.monthArray:this.quarterArray).map(((t,n)=>i(t,n,e))),to("div",{class:`${e}-date-panel-${o}-calendar__padding`})]})):null),this.datePickerSlots.footer?to("div",{class:`${e}-date-panel-footer`},{default:this.datePickerSlots.footer}):null,(null==r?void 0:r.length)||n?to("div",{class:`${e}-date-panel-actions`},to("div",{class:`${e}-date-panel-actions__prefix`},n&&Object.keys(n).map((e=>{const t=n[e];return Array.isArray(t)?null:to(_x,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(t)},onClick:()=>{this.handleSingleShortcutClick(t)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>e})}))),to("div",{class:`${e}-date-panel-actions__suffix`},(null==r?void 0:r.includes("clear"))?to(Bx,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(null==r?void 0:r.includes("now"))?to(Bx,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,(null==r?void 0:r.includes("confirm"))?to(Bx,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,to(my,{onFocus:this.handleFocusDetectorFocus}))}}),UE=Dn({props:{mergedClsPrefix:{type:String,required:!0},value:Number,monthBeforeYear:{type:Boolean,required:!0},calendarMonth:{type:String,required:!0},calendarYear:{type:String,required:!0},onUpdateValue:{type:Function,required:!0}},setup(){const e=bt(null),t=bt(null),n=bt(!1);return{show:n,triggerRef:e,monthPanelRef:t,handleHeaderClick:function(){n.value=!n.value},handleClickOutside:function(t){var r;n.value&&!(null===(r=e.value)||void 0===r?void 0:r.contains(ma(t)))&&(n.value=!1)}}},render(){const{handleClickOutside:e,mergedClsPrefix:t}=this;return to("div",{class:`${t}-date-panel-month__month-year`,ref:"triggerRef"},to(Vl,null,{default:()=>[to(Wl,null,{default:()=>to("div",{class:[`${t}-date-panel-month__text`,this.show&&`${t}-date-panel-month__text--active`],onClick:this.handleHeaderClick},this.monthBeforeYear?[this.calendarMonth," ",this.calendarYear]:[this.calendarYear," ",this.calendarMonth])}),to(gc,{show:this.show,teleportDisabled:!0},{default:()=>to(co,{name:"fade-in-scale-up-transition",appear:!0},{default:()=>this.show?En(to(RE,{ref:"monthPanelRef",onUpdateValue:this.onUpdateValue,actions:[],type:"month",key:"month",useAsQuickJump:!0,value:this.value}),[[Yl,e,void 0,{capture:!0}]]):null})})]}))}}),zE=Dn({name:"DateTimePanel",props:OE,setup:e=>LE(e,"datetime"),render(){var e,t,n,r;const{mergedClsPrefix:i,mergedTheme:o,shortcuts:a,timePickerProps:s,onRender:l,$slots:c}=this;return null==l||l(),to("div",{ref:"selfRef",tabindex:0,class:[`${i}-date-panel`,`${i}-date-panel--datetime`,!this.panel&&`${i}-date-panel--shadow`,this.themeClass],onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},to("div",{class:`${i}-date-panel-header`},to(ex,{value:this.dateInputValue,theme:o.peers.Input,themeOverrides:o.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${i}-date-panel-date-input`,textDecoration:this.isDateInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleDateInputBlur,onUpdateValue:this.handleDateInput}),to(FE,Object.assign({size:this.timePickerSize,placeholder:this.locale.selectTime,format:this.timerPickerFormat},Array.isArray(s)?void 0:s,{showIcon:!1,to:!1,theme:o.peers.TimePicker,themeOverrides:o.peerOverrides.TimePicker,value:Array.isArray(this.value)?null:this.value,isHourDisabled:this.isHourDisabled,isMinuteDisabled:this.isMinuteDisabled,isSecondDisabled:this.isSecondDisabled,onUpdateValue:this.handleTimePickerChange,stateful:!1}))),to("div",{class:`${i}-date-panel-calendar`},to("div",{class:`${i}-date-panel-month`},to("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.prevYear},rs(c["prev-year"],(()=>[to(Kv,null)]))),to("div",{class:`${i}-date-panel-month__prev`,onClick:this.prevMonth},rs(c["prev-month"],(()=>[to(Uv,null)]))),to(UE,{monthBeforeYear:this.locale.monthBeforeYear,value:this.calendarValue,onUpdateValue:this.onUpdateCalendarValue,mergedClsPrefix:i,calendarMonth:this.calendarMonth,calendarYear:this.calendarYear}),to("div",{class:`${i}-date-panel-month__next`,onClick:this.nextMonth},rs(c["next-month"],(()=>[to($v,null)]))),to("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.nextYear},rs(c["next-year"],(()=>[to(Yv,null)])))),to("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map((e=>to("div",{key:e,class:`${i}-date-panel-weekdays__day`},e)))),to("div",{class:`${i}-date-panel-dates`},this.dateArray.map(((e,t)=>to("div",{"data-n-date":!0,key:t,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--current`]:e.isCurrentDate,[`${i}-date-panel-date--selected`]:e.selected,[`${i}-date-panel-date--excluded`]:!e.inCurrentMonth,[`${i}-date-panel-date--disabled`]:this.mergedIsDateDisabled(e.ts,{type:"date",year:e.dateObject.year,month:e.dateObject.month,date:e.dateObject.date})}],onClick:()=>{this.handleDateClick(e)}},to("div",{class:`${i}-date-panel-date__trigger`}),e.dateObject.date,e.isCurrentDate?to("div",{class:`${i}-date-panel-date__sup`}):null))))),this.datePickerSlots.footer?to("div",{class:`${i}-date-panel-footer`},this.datePickerSlots.footer()):null,(null===(e=this.actions)||void 0===e?void 0:e.length)||a?to("div",{class:`${i}-date-panel-actions`},to("div",{class:`${i}-date-panel-actions__prefix`},a&&Object.keys(a).map((e=>{const t=a[e];return Array.isArray(t)?null:to(_x,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(t)},onClick:()=>{this.handleSingleShortcutClick(t)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>e})}))),to("div",{class:`${i}-date-panel-actions__suffix`},(null===(t=this.actions)||void 0===t?void 0:t.includes("clear"))?to(Bx,{theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,size:"tiny",onClick:this.clearSelectedDateTime},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("now"))?to(Bx,{theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,(null===(r=this.actions)||void 0===r?void 0:r.includes("confirm"))?to(Bx,{theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,to(my,{onFocus:this.handleFocusDetectorFocus}))}}),NE=Object.assign(Object.assign({},IE),{defaultCalendarStartTime:Number,defaultCalendarEndTime:Number,bindCalendarMonths:Boolean,actions:{type:Array,default:()=>["clear","confirm"]}});function jE(e,t){var n,r;const{isDateDisabledRef:i,isStartHourDisabledRef:o,isEndHourDisabledRef:a,isStartMinuteDisabledRef:s,isEndMinuteDisabledRef:l,isStartSecondDisabledRef:c,isEndSecondDisabledRef:u,isStartDateInvalidRef:d,isEndDateInvalidRef:h,isStartTimeInvalidRef:p,isEndTimeInvalidRef:A,isStartValueInvalidRef:f,isEndValueInvalidRef:m,isRangeInvalidRef:g,localeRef:v,rangesRef:y,closeOnSelectRef:b,updateValueOnCloseRef:w,firstDayOfWeekRef:x,datePickerSlots:C,monthFormatRef:S,yearFormatRef:B,quarterFormatRef:_}=rr(AB),E={isDateDisabled:i,isStartHourDisabled:o,isEndHourDisabled:a,isStartMinuteDisabled:s,isEndMinuteDisabled:l,isStartSecondDisabled:c,isEndSecondDisabled:u,isStartDateInvalid:d,isEndDateInvalid:h,isStartTimeInvalid:p,isEndTimeInvalid:A,isStartValueInvalid:f,isEndValueInvalid:m,isRangeInvalid:g},M=kE(e),P=bt(null),T=bt(null),D=bt(null),F=bt(null),I=bt(null),k=bt(null),O=bt(null),L=bt(null),{value:R}=e,U=null!==(n=e.defaultCalendarStartTime)&&void 0!==n?n:Array.isArray(R)&&"number"==typeof R[0]?R[0]:Date.now(),z=bt(U),N=bt(null!==(r=e.defaultCalendarEndTime)&&void 0!==r?r:Array.isArray(R)&&"number"==typeof R[1]?R[1]:Om(Pf(U,1)));de(!0);const j=bt(Date.now()),H=bt(!1),Q=bt(0),V=eo((()=>e.dateFormat||v.value.dateFormat)),W=bt(Array.isArray(R)?_m(R[0],V.value,M.dateFnsOptions.value):""),G=bt(Array.isArray(R)?_m(R[1],V.value,M.dateFnsOptions.value):""),q=eo((()=>H.value?"end":"start")),K=eo((()=>{var t;return Wx(z.value,e.value,j.value,null!==(t=x.value)&&void 0!==t?t:v.value.firstDayOfWeek)})),Y=eo((()=>{var t;return Wx(N.value,e.value,j.value,null!==(t=x.value)&&void 0!==t?t:v.value.firstDayOfWeek)})),X=eo((()=>K.value.slice(0,7).map((e=>{const{ts:t}=e;return _m(t,v.value.dayFormat,M.dateFnsOptions.value)})))),$=eo((()=>_m(z.value,v.value.monthFormat,M.dateFnsOptions.value))),J=eo((()=>_m(N.value,v.value.monthFormat,M.dateFnsOptions.value))),Z=eo((()=>_m(z.value,v.value.yearFormat,M.dateFnsOptions.value))),ee=eo((()=>_m(N.value,v.value.yearFormat,M.dateFnsOptions.value))),te=eo((()=>{const{value:t}=e;return Array.isArray(t)?t[0]:null})),ne=eo((()=>{const{value:t}=e;return Array.isArray(t)?t[1]:null})),re=eo((()=>{const{shortcuts:t}=e;return t||y.value})),ie=eo((()=>Kx($x(e.value,"start"),j.value,{yearFormat:B.value}))),oe=eo((()=>Kx($x(e.value,"end"),j.value,{yearFormat:B.value}))),ae=eo((()=>{const t=$x(e.value,"start");return qx(null!=t?t:Date.now(),t,j.value,{quarterFormat:_.value})})),se=eo((()=>{const t=$x(e.value,"end");return qx(null!=t?t:Date.now(),t,j.value,{quarterFormat:_.value})})),le=eo((()=>{const t=$x(e.value,"start");return Gx(null!=t?t:Date.now(),t,j.value,{monthFormat:S.value})})),ce=eo((()=>{const t=$x(e.value,"end");return Gx(null!=t?t:Date.now(),t,j.value,{monthFormat:S.value})}));function ue(e,n){"daterange"!==t&&"datetimerange"!==t||Lm(e)===Lm(n)&&Im(e)===Im(n)||M.disableTransitionOneTick()}function de(t){const n=Uf(z.value),r=Uf(N.value);(e.bindCalendarMonths||n>=r)&&(t?N.value=Om(Pf(n,1)):z.value=Om(Pf(r,-1)))}function he(t){const n=i.value;if(!n)return!1;if(!Array.isArray(e.value))return n(t,"start",null);if("start"===q.value)return n(t,"start",null);{const{value:e}=Q;return t<Q.value?n(t,"start",[e,e]):n(t,"end",[e,e])}}function pe(){g.value||(M.doConfirm(),Ae())}function Ae(){H.value=!1,e.active&&M.doClose()}function fe(t){"number"!=typeof t&&(t=Om(t)),null===e.value?M.doUpdateValue([t,t],e.panel):Array.isArray(e.value)&&M.doUpdateValue([t,Math.max(e.value[1],t)],e.panel)}function me(t){"number"!=typeof t&&(t=Om(t)),null===e.value?M.doUpdateValue([t,t],e.panel):Array.isArray(e.value)&&M.doUpdateValue([Math.min(e.value[0],t),t],e.panel)}function ge(n,r,i){if("number"!=typeof n&&(n=Om(n)),"shortcutPreview"!==i){let i,o;if("datetimerange"===t){const{defaultTime:t}=e;Array.isArray(t)?(i=Xx(t[0]),o=Xx(t[1])):(i=Xx(t),o=i)}i&&(n=Om(Bv(n,i))),o&&(r=Om(Bv(r,o)))}M.doUpdateValue([n,r],e.panel&&"done"===i)}function ve(e){return Om("datetimerange"===t?xv(e):"monthrange"===t?Uf(e):Ff(e))}function ye(t){const{value:n}=e;if(null===n||!Array.isArray(n))return W.value="",void(G.value="");void 0===t&&(t=n),W.value=_m(t[0],V.value,M.dateFnsOptions.value),G.value=_m(t[1],V.value,M.dateFnsOptions.value)}function be(t,n){const r=void 0===t?e.value:t;if(void 0===t||"start"===n){if(O.value){const e=Array.isArray(r)?Im(r[0]):Im(Date.now());O.value.scrollTo({debounce:!1,index:e,elSize:kx})}if(I.value){const e=(Array.isArray(r)?Lm(r[0]):Lm(Date.now()))-Ix;I.value.scrollTo({index:e,debounce:!1})}}if(void 0===t||"end"===n){if(L.value){const e=Array.isArray(r)?Im(r[1]):Im(Date.now());L.value.scrollTo({debounce:!1,index:e,elSize:kx})}if(k.value){const e=(Array.isArray(r)?Lm(r[1]):Lm(Date.now()))-Ix;k.value.scrollTo({index:e,debounce:!1})}}}Ir(eo((()=>e.value)),(e=>{if(null!==e&&Array.isArray(e)){const[t,n]=e;W.value=_m(t,V.value,M.dateFnsOptions.value),G.value=_m(n,V.value,M.dateFnsOptions.value),H.value||function(e){if(null===e)return;const[t,n]=e;z.value=t,Uf(n)<=Uf(t)?N.value=Om(Uf(Pf(t,1))):N.value=Om(Uf(n))}(e)}else W.value="",G.value=""})),Ir(z,ue),Ir(N,ue);const we={startYearVlRef:I,endYearVlRef:k,startMonthScrollbarRef:O,endMonthScrollbarRef:L,startYearScrollbarRef:D,endYearScrollbarRef:F};return Object.assign(Object.assign(Object.assign(Object.assign({startDatesElRef:P,endDatesElRef:T,handleDateClick:function(n){if(H.value){H.value=!1;const{value:n}=e;e.panel&&Array.isArray(n)?ge(n[0],n[1],"done"):b.value&&"daterange"===t&&(w.value?Ae():pe())}else H.value=!0,Q.value=n.ts,ge(n.ts,n.ts,"done")},handleColItemClick:function(n,r){const{value:i}=e,o=!Array.isArray(i),a="year"===n.type&&"yearrange"!==t?o?Bv(n.ts,{month:Im("quarterrange"===t?Rf(new Date):new Date)}).valueOf():Bv(n.ts,{month:Im("quarterrange"===t?Rf(i["start"===r?0:1]):i["start"===r?0:1])}).valueOf():n.ts;if(o){const t=ve(a),n=[t,t];return M.doUpdateValue(n,e.panel),be(n,"start"),be(n,"end"),void M.disableTransitionOneTick()}const s=[i[0],i[1]];let l=!1;switch("start"===r?(s[0]=ve(a),s[0]>s[1]&&(s[1]=s[0],l=!0)):(s[1]=ve(a),s[0]>s[1]&&(s[0]=s[1],l=!0)),M.doUpdateValue(s,e.panel),t){case"monthrange":case"quarterrange":M.disableTransitionOneTick(),l?(be(s,"start"),be(s,"end")):be(s,r);break;case"yearrange":M.disableTransitionOneTick(),be(s,"start"),be(s,"end")}},handleDateMouseEnter:function(e){if(H.value){if(he(e.ts))return;e.ts>=Q.value?ge(Q.value,e.ts,"wipPreview"):ge(e.ts,Q.value,"wipPreview")}},handleConfirmClick:pe,startCalendarPrevYear:function(){z.value=Om(Pf(z.value,-12)),de(!0)},startCalendarPrevMonth:function(){z.value=Om(Pf(z.value,-1)),de(!0)},startCalendarNextYear:function(){z.value=Om(Pf(z.value,12)),de(!0)},startCalendarNextMonth:function(){z.value=Om(Pf(z.value,1)),de(!0)},endCalendarPrevYear:function(){N.value=Om(Pf(N.value,-12)),de(!1)},endCalendarPrevMonth:function(){N.value=Om(Pf(N.value,-1)),de(!1)},endCalendarNextMonth:function(){N.value=Om(Pf(N.value,1)),de(!1)},endCalendarNextYear:function(){N.value=Om(Pf(N.value,12)),de(!1)},mergedIsDateDisabled:he,changeStartEndTime:ge,ranges:y,startCalendarMonth:$,startCalendarYear:Z,endCalendarMonth:J,endCalendarYear:ee,weekdays:X,startDateArray:K,endDateArray:Y,startYearArray:ie,startMonthArray:le,startQuarterArray:ae,endYearArray:oe,endMonthArray:ce,endQuarterArray:se,isSelecting:H,handleRangeShortcutMouseenter:function(e){M.cachePendingValue();const t=M.getShortcutValue(e);Array.isArray(t)&&ge(t[0],t[1],"shortcutPreview")},handleRangeShortcutClick:function(e){const t=M.getShortcutValue(e);Array.isArray(t)&&(ge(t[0],t[1],"done"),M.clearPendingValue(),pe())}},M),E),we),{startDateDisplayString:W,endDateInput:G,timePickerSize:M.timePickerSize,startTimeValue:te,endTimeValue:ne,datePickerSlots:C,shortcuts:re,startCalendarDateTime:z,endCalendarDateTime:N,justifyColumnsScrollState:be,handleFocusDetectorFocus:M.handleFocusDetectorFocus,handleStartTimePickerChange:function(e){null!==e&&fe(e)},handleEndTimePickerChange:function(e){null!==e&&me(e)},handleStartDateInput:function(t){const n=Yx(t,V.value,new Date,M.dateFnsOptions.value);if(Of(n))if(e.value){if(Array.isArray(e.value)){fe(ve(Om(Bv(e.value[0],{year:Lm(n),month:Im(n),date:Mm(n)}))))}}else{fe(ve(Om(Bv(new Date,{year:Lm(n),month:Im(n),date:Mm(n)}))))}else W.value=t},handleStartDateInputBlur:function(){const t=Yx(W.value,V.value,new Date,M.dateFnsOptions.value),{value:n}=e;if(Of(t)){if(null===n){fe(ve(Om(Bv(new Date,{year:Lm(t),month:Im(t),date:Mm(t)}))))}else if(Array.isArray(n)){fe(ve(Om(Bv(n[0],{year:Lm(t),month:Im(t),date:Mm(t)}))))}}else ye()},handleEndDateInput:function(t){const n=Yx(t,V.value,new Date,M.dateFnsOptions.value);if(Of(n)){if(null===e.value){me(ve(Om(Bv(new Date,{year:Lm(n),month:Im(n),date:Mm(n)}))))}else if(Array.isArray(e.value)){me(ve(Om(Bv(e.value[1],{year:Lm(n),month:Im(n),date:Mm(n)}))))}}else G.value=t},handleEndDateInputBlur:function(){const t=Yx(G.value,V.value,new Date,M.dateFnsOptions.value),{value:n}=e;if(Of(t)){if(null===n){me(ve(Om(Bv(new Date,{year:Lm(t),month:Im(t),date:Mm(t)}))))}else if(Array.isArray(n)){me(ve(Om(Bv(n[1],{year:Lm(t),month:Im(t),date:Mm(t)}))))}}else ye()},handleStartYearVlScroll:function(){var e;null===(e=D.value)||void 0===e||e.sync()},handleEndYearVlScroll:function(){var e;null===(e=F.value)||void 0===e||e.sync()},virtualListContainer:function(e){var t,n;return"start"===e?(null===(t=I.value)||void 0===t?void 0:t.listElRef)||null:(null===(n=k.value)||void 0===n?void 0:n.listElRef)||null},virtualListContent:function(e){var t,n;return"start"===e?(null===(t=I.value)||void 0===t?void 0:t.itemsElRef)||null:(null===(n=k.value)||void 0===n?void 0:n.itemsElRef)||null},onUpdateStartCalendarValue:function(e){z.value=e,de(!0)},onUpdateEndCalendarValue:function(e){N.value=e,de(!1)}})}const HE=Dn({name:"DateTimeRangePanel",props:NE,setup:e=>jE(e,"datetimerange"),render(){var e,t,n;const{mergedClsPrefix:r,mergedTheme:i,shortcuts:o,timePickerProps:a,onRender:s,$slots:l}=this;return null==s||s(),to("div",{ref:"selfRef",tabindex:0,class:[`${r}-date-panel`,`${r}-date-panel--datetimerange`,!this.panel&&`${r}-date-panel--shadow`,this.themeClass],onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},to("div",{class:`${r}-date-panel-header`},to(ex,{value:this.startDateDisplayString,theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,size:this.timePickerSize,stateful:!1,class:`${r}-date-panel-date-input`,textDecoration:this.isStartValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleStartDateInputBlur,onUpdateValue:this.handleStartDateInput}),to(FE,Object.assign({placeholder:this.locale.selectTime,format:this.timerPickerFormat,size:this.timePickerSize},Array.isArray(a)?a[0]:a,{value:this.startTimeValue,to:!1,showIcon:!1,disabled:this.isSelecting,theme:i.peers.TimePicker,themeOverrides:i.peerOverrides.TimePicker,stateful:!1,isHourDisabled:this.isStartHourDisabled,isMinuteDisabled:this.isStartMinuteDisabled,isSecondDisabled:this.isStartSecondDisabled,onUpdateValue:this.handleStartTimePickerChange})),to(ex,{value:this.endDateInput,theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${r}-date-panel-date-input`,textDecoration:this.isEndValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleEndDateInputBlur,onUpdateValue:this.handleEndDateInput}),to(FE,Object.assign({placeholder:this.locale.selectTime,format:this.timerPickerFormat,size:this.timePickerSize},Array.isArray(a)?a[1]:a,{disabled:this.isSelecting,showIcon:!1,theme:i.peers.TimePicker,themeOverrides:i.peerOverrides.TimePicker,to:!1,stateful:!1,value:this.endTimeValue,isHourDisabled:this.isEndHourDisabled,isMinuteDisabled:this.isEndMinuteDisabled,isSecondDisabled:this.isEndSecondDisabled,onUpdateValue:this.handleEndTimePickerChange}))),to("div",{ref:"startDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--start`},to("div",{class:`${r}-date-panel-month`},to("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},rs(l["prev-year"],(()=>[to(Kv,null)]))),to("div",{class:`${r}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},rs(l["prev-month"],(()=>[to(Uv,null)]))),to(UE,{monthBeforeYear:this.locale.monthBeforeYear,value:this.startCalendarDateTime,onUpdateValue:this.onUpdateStartCalendarValue,mergedClsPrefix:r,calendarMonth:this.startCalendarMonth,calendarYear:this.startCalendarYear}),to("div",{class:`${r}-date-panel-month__next`,onClick:this.startCalendarNextMonth},rs(l["next-month"],(()=>[to($v,null)]))),to("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},rs(l["next-year"],(()=>[to(Yv,null)])))),to("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((e=>to("div",{key:e,class:`${r}-date-panel-weekdays__day`},e)))),to("div",{class:`${r}-date-panel__divider`}),to("div",{class:`${r}-date-panel-dates`},this.startDateArray.map(((e,t)=>{const n=this.mergedIsDateDisabled(e.ts);return to("div",{"data-n-date":!0,key:t,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--excluded`]:!e.inCurrentMonth,[`${r}-date-panel-date--current`]:e.isCurrentDate,[`${r}-date-panel-date--selected`]:e.selected,[`${r}-date-panel-date--covered`]:e.inSpan,[`${r}-date-panel-date--start`]:e.startOfSpan,[`${r}-date-panel-date--end`]:e.endOfSpan,[`${r}-date-panel-date--disabled`]:n}],onClick:n?void 0:()=>{this.handleDateClick(e)},onMouseenter:n?void 0:()=>{this.handleDateMouseEnter(e)}},to("div",{class:`${r}-date-panel-date__trigger`}),e.dateObject.date,e.isCurrentDate?to("div",{class:`${r}-date-panel-date__sup`}):null)})))),to("div",{class:`${r}-date-panel__vertical-divider`}),to("div",{ref:"endDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--end`},to("div",{class:`${r}-date-panel-month`},to("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},rs(l["prev-year"],(()=>[to(Kv,null)]))),to("div",{class:`${r}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},rs(l["prev-month"],(()=>[to(Uv,null)]))),to(UE,{monthBeforeYear:this.locale.monthBeforeYear,value:this.endCalendarDateTime,onUpdateValue:this.onUpdateEndCalendarValue,mergedClsPrefix:r,calendarMonth:this.endCalendarMonth,calendarYear:this.endCalendarYear}),to("div",{class:`${r}-date-panel-month__next`,onClick:this.endCalendarNextMonth},rs(l["next-month"],(()=>[to($v,null)]))),to("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},rs(l["next-year"],(()=>[to(Yv,null)])))),to("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((e=>to("div",{key:e,class:`${r}-date-panel-weekdays__day`},e)))),to("div",{class:`${r}-date-panel__divider`}),to("div",{class:`${r}-date-panel-dates`},this.endDateArray.map(((e,t)=>{const n=this.mergedIsDateDisabled(e.ts);return to("div",{"data-n-date":!0,key:t,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--excluded`]:!e.inCurrentMonth,[`${r}-date-panel-date--current`]:e.isCurrentDate,[`${r}-date-panel-date--selected`]:e.selected,[`${r}-date-panel-date--covered`]:e.inSpan,[`${r}-date-panel-date--start`]:e.startOfSpan,[`${r}-date-panel-date--end`]:e.endOfSpan,[`${r}-date-panel-date--disabled`]:n}],onClick:n?void 0:()=>{this.handleDateClick(e)},onMouseenter:n?void 0:()=>{this.handleDateMouseEnter(e)}},to("div",{class:`${r}-date-panel-date__trigger`}),e.dateObject.date,e.isCurrentDate?to("div",{class:`${r}-date-panel-date__sup`}):null)})))),this.datePickerSlots.footer?to("div",{class:`${r}-date-panel-footer`},this.datePickerSlots.footer()):null,(null===(e=this.actions)||void 0===e?void 0:e.length)||o?to("div",{class:`${r}-date-panel-actions`},to("div",{class:`${r}-date-panel-actions__prefix`},o&&Object.keys(o).map((e=>{const t=o[e];return Array.isArray(t)||"function"==typeof t?to(_x,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(t)},onClick:()=>{this.handleRangeShortcutClick(t)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>e}):null}))),to("div",{class:`${r}-date-panel-actions__suffix`},(null===(t=this.actions)||void 0===t?void 0:t.includes("clear"))?to(Bx,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("confirm"))?to(Bx,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid||this.isSelecting,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,to(my,{onFocus:this.handleFocusDetectorFocus}))}}),QE=Dn({name:"DatePanel",props:Object.assign(Object.assign({},OE),{type:{type:String,required:!0}}),setup:e=>LE(e,e.type),render(){var e,t,n;const{mergedClsPrefix:r,mergedTheme:i,shortcuts:o,onRender:a,$slots:s,type:l}=this;return null==a||a(),to("div",{ref:"selfRef",tabindex:0,class:[`${r}-date-panel`,`${r}-date-panel--${l}`,!this.panel&&`${r}-date-panel--shadow`,this.themeClass],onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},to("div",{class:`${r}-date-panel-calendar`},to("div",{class:`${r}-date-panel-month`},to("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.prevYear},rs(s["prev-year"],(()=>[to(Kv,null)]))),to("div",{class:`${r}-date-panel-month__prev`,onClick:this.prevMonth},rs(s["prev-month"],(()=>[to(Uv,null)]))),to(UE,{monthBeforeYear:this.locale.monthBeforeYear,value:this.calendarValue,onUpdateValue:this.onUpdateCalendarValue,mergedClsPrefix:r,calendarMonth:this.calendarMonth,calendarYear:this.calendarYear}),to("div",{class:`${r}-date-panel-month__next`,onClick:this.nextMonth},rs(s["next-month"],(()=>[to($v,null)]))),to("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.nextYear},rs(s["next-year"],(()=>[to(Yv,null)])))),to("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((e=>to("div",{key:e,class:`${r}-date-panel-weekdays__day`},e)))),to("div",{class:`${r}-date-panel-dates`},this.dateArray.map(((e,t)=>to("div",{"data-n-date":!0,key:t,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--current`]:e.isCurrentDate,[`${r}-date-panel-date--selected`]:e.selected,[`${r}-date-panel-date--excluded`]:!e.inCurrentMonth,[`${r}-date-panel-date--disabled`]:this.mergedIsDateDisabled(e.ts,{type:"date",year:e.dateObject.year,month:e.dateObject.month,date:e.dateObject.date}),[`${r}-date-panel-date--week-hovered`]:this.isWeekHovered(e),[`${r}-date-panel-date--week-selected`]:e.inSelectedWeek}],onClick:()=>{this.handleDateClick(e)},onMouseenter:()=>{this.handleDateMouseEnter(e)}},to("div",{class:`${r}-date-panel-date__trigger`}),e.dateObject.date,e.isCurrentDate?to("div",{class:`${r}-date-panel-date__sup`}):null))))),this.datePickerSlots.footer?to("div",{class:`${r}-date-panel-footer`},this.datePickerSlots.footer()):null,(null===(e=this.actions)||void 0===e?void 0:e.length)||o?to("div",{class:`${r}-date-panel-actions`},to("div",{class:`${r}-date-panel-actions__prefix`},o&&Object.keys(o).map((e=>{const t=o[e];return Array.isArray(t)?null:to(_x,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(t)},onClick:()=>{this.handleSingleShortcutClick(t)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>e})}))),to("div",{class:`${r}-date-panel-actions__suffix`},(null===(t=this.actions)||void 0===t?void 0:t.includes("clear"))?to(Bx,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("now"))?to(Bx,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null)):null,to(my,{onFocus:this.handleFocusDetectorFocus}))}}),VE=Dn({name:"DateRangePanel",props:NE,setup:e=>jE(e,"daterange"),render(){var e,t,n;const{mergedClsPrefix:r,mergedTheme:i,shortcuts:o,onRender:a,$slots:s}=this;return null==a||a(),to("div",{ref:"selfRef",tabindex:0,class:[`${r}-date-panel`,`${r}-date-panel--daterange`,!this.panel&&`${r}-date-panel--shadow`,this.themeClass],onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},to("div",{ref:"startDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--start`},to("div",{class:`${r}-date-panel-month`},to("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},rs(s["prev-year"],(()=>[to(Kv,null)]))),to("div",{class:`${r}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},rs(s["prev-month"],(()=>[to(Uv,null)]))),to(UE,{monthBeforeYear:this.locale.monthBeforeYear,value:this.startCalendarDateTime,onUpdateValue:this.onUpdateStartCalendarValue,mergedClsPrefix:r,calendarMonth:this.startCalendarMonth,calendarYear:this.startCalendarYear}),to("div",{class:`${r}-date-panel-month__next`,onClick:this.startCalendarNextMonth},rs(s["next-month"],(()=>[to($v,null)]))),to("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},rs(s["next-year"],(()=>[to(Yv,null)])))),to("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((e=>to("div",{key:e,class:`${r}-date-panel-weekdays__day`},e)))),to("div",{class:`${r}-date-panel__divider`}),to("div",{class:`${r}-date-panel-dates`},this.startDateArray.map(((e,t)=>to("div",{"data-n-date":!0,key:t,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--excluded`]:!e.inCurrentMonth,[`${r}-date-panel-date--current`]:e.isCurrentDate,[`${r}-date-panel-date--selected`]:e.selected,[`${r}-date-panel-date--covered`]:e.inSpan,[`${r}-date-panel-date--start`]:e.startOfSpan,[`${r}-date-panel-date--end`]:e.endOfSpan,[`${r}-date-panel-date--disabled`]:this.mergedIsDateDisabled(e.ts)}],onClick:()=>{this.handleDateClick(e)},onMouseenter:()=>{this.handleDateMouseEnter(e)}},to("div",{class:`${r}-date-panel-date__trigger`}),e.dateObject.date,e.isCurrentDate?to("div",{class:`${r}-date-panel-date__sup`}):null))))),to("div",{class:`${r}-date-panel__vertical-divider`}),to("div",{ref:"endDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--end`},to("div",{class:`${r}-date-panel-month`},to("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},rs(s["prev-year"],(()=>[to(Kv,null)]))),to("div",{class:`${r}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},rs(s["prev-month"],(()=>[to(Uv,null)]))),to(UE,{monthBeforeYear:this.locale.monthBeforeYear,value:this.endCalendarDateTime,onUpdateValue:this.onUpdateEndCalendarValue,mergedClsPrefix:r,calendarMonth:this.endCalendarMonth,calendarYear:this.endCalendarYear}),to("div",{class:`${r}-date-panel-month__next`,onClick:this.endCalendarNextMonth},rs(s["next-month"],(()=>[to($v,null)]))),to("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},rs(s["next-year"],(()=>[to(Yv,null)])))),to("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((e=>to("div",{key:e,class:`${r}-date-panel-weekdays__day`},e)))),to("div",{class:`${r}-date-panel__divider`}),to("div",{class:`${r}-date-panel-dates`},this.endDateArray.map(((e,t)=>to("div",{"data-n-date":!0,key:t,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--excluded`]:!e.inCurrentMonth,[`${r}-date-panel-date--current`]:e.isCurrentDate,[`${r}-date-panel-date--selected`]:e.selected,[`${r}-date-panel-date--covered`]:e.inSpan,[`${r}-date-panel-date--start`]:e.startOfSpan,[`${r}-date-panel-date--end`]:e.endOfSpan,[`${r}-date-panel-date--disabled`]:this.mergedIsDateDisabled(e.ts)}],onClick:()=>{this.handleDateClick(e)},onMouseenter:()=>{this.handleDateMouseEnter(e)}},to("div",{class:`${r}-date-panel-date__trigger`}),e.dateObject.date,e.isCurrentDate?to("div",{class:`${r}-date-panel-date__sup`}):null))))),this.datePickerSlots.footer?to("div",{class:`${r}-date-panel-footer`},this.datePickerSlots.footer()):null,(null===(e=this.actions)||void 0===e?void 0:e.length)||o?to("div",{class:`${r}-date-panel-actions`},to("div",{class:`${r}-date-panel-actions__prefix`},o&&Object.keys(o).map((e=>{const t=o[e];return Array.isArray(t)||"function"==typeof t?to(_x,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(t)},onClick:()=>{this.handleRangeShortcutClick(t)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>e}):null}))),to("div",{class:`${r}-date-panel-actions__suffix`},(null===(t=this.actions)||void 0===t?void 0:t.includes("clear"))?to(Bx,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("confirm"))?to(Bx,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid||this.isSelecting,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,to(my,{onFocus:this.handleFocusDetectorFocus}))}}),WE=Dn({name:"MonthRangePanel",props:Object.assign(Object.assign({},NE),{type:{type:String,required:!0}}),setup(e){const t=jE(e,e.type),{dateLocaleRef:n}=Tv("DatePicker");return vn((()=>{t.justifyColumnsScrollState()})),Object.assign(Object.assign({},t),{renderItem:(e,r,i,o)=>{const{handleColItemClick:a}=t;return to("div",{"data-n-date":!0,key:r,class:[`${i}-date-panel-month-calendar__picker-col-item`,e.isCurrent&&`${i}-date-panel-month-calendar__picker-col-item--current`,e.selected&&`${i}-date-panel-month-calendar__picker-col-item--selected`,!1],onClick:()=>{a(e,o)}},"month"===e.type?zx(e.dateObject.month,e.monthFormat,n.value.locale):"quarter"===e.type?jx(e.dateObject.quarter,e.quarterFormat,n.value.locale):Nx(e.dateObject.year,e.yearFormat,n.value.locale))}})},render(){var e,t,n;const{mergedClsPrefix:r,mergedTheme:i,shortcuts:o,type:a,renderItem:s,onRender:l}=this;return null==l||l(),to("div",{ref:"selfRef",tabindex:0,class:[`${r}-date-panel`,`${r}-date-panel--daterange`,!this.panel&&`${r}-date-panel--shadow`,this.themeClass],onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},to("div",{ref:"startDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--start`},to("div",{class:`${r}-date-panel-month-calendar`},to(Gb,{ref:"startYearScrollbarRef",class:`${r}-date-panel-month-calendar__picker-col`,theme:i.peers.Scrollbar,themeOverrides:i.peerOverrides.Scrollbar,container:()=>this.virtualListContainer("start"),content:()=>this.virtualListContent("start"),horizontalRailStyle:{zIndex:1},verticalRailStyle:{zIndex:1}},{default:()=>to(du,{ref:"startYearVlRef",items:this.startYearArray,itemSize:kx,showScrollbar:!1,keyField:"ts",onScroll:this.handleStartYearVlScroll,paddingBottom:4},{default:({item:e,index:t})=>s(e,t,r,"start")})}),"monthrange"===a||"quarterrange"===a?to("div",{class:`${r}-date-panel-month-calendar__picker-col`},to(Gb,{ref:"startMonthScrollbarRef",theme:i.peers.Scrollbar,themeOverrides:i.peerOverrides.Scrollbar},{default:()=>[("monthrange"===a?this.startMonthArray:this.startQuarterArray).map(((e,t)=>s(e,t,r,"start"))),"monthrange"===a&&to("div",{class:`${r}-date-panel-month-calendar__padding`})]})):null)),to("div",{class:`${r}-date-panel__vertical-divider`}),to("div",{ref:"endDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--end`},to("div",{class:`${r}-date-panel-month-calendar`},to(Gb,{ref:"endYearScrollbarRef",class:`${r}-date-panel-month-calendar__picker-col`,theme:i.peers.Scrollbar,themeOverrides:i.peerOverrides.Scrollbar,container:()=>this.virtualListContainer("end"),content:()=>this.virtualListContent("end"),horizontalRailStyle:{zIndex:1},verticalRailStyle:{zIndex:1}},{default:()=>to(du,{ref:"endYearVlRef",items:this.endYearArray,itemSize:kx,showScrollbar:!1,keyField:"ts",onScroll:this.handleEndYearVlScroll,paddingBottom:4},{default:({item:e,index:t})=>s(e,t,r,"end")})}),"monthrange"===a||"quarterrange"===a?to("div",{class:`${r}-date-panel-month-calendar__picker-col`},to(Gb,{ref:"endMonthScrollbarRef",theme:i.peers.Scrollbar,themeOverrides:i.peerOverrides.Scrollbar},{default:()=>[("monthrange"===a?this.endMonthArray:this.endQuarterArray).map(((e,t)=>s(e,t,r,"end"))),"monthrange"===a&&to("div",{class:`${r}-date-panel-month-calendar__padding`})]})):null)),this.datePickerSlots.footer?to("div",{class:`${r}-date-panel-footer`},In(this.datePickerSlots,"footer")):null,(null===(e=this.actions)||void 0===e?void 0:e.length)||o?to("div",{class:`${r}-date-panel-actions`},to("div",{class:`${r}-date-panel-actions__prefix`},o&&Object.keys(o).map((e=>{const t=o[e];return Array.isArray(t)||"function"==typeof t?to(_x,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(t)},onClick:()=>{this.handleRangeShortcutClick(t)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>e}):null}))),to("div",{class:`${r}-date-panel-actions__suffix`},(null===(t=this.actions)||void 0===t?void 0:t.includes("clear"))?to(_x,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("confirm"))?to(_x,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,to(my,{onFocus:this.handleFocusDetectorFocus}))}}),GE=Ls([Us("date-picker","\n position: relative;\n z-index: auto;\n ",[Us("date-picker-icon","\n color: var(--n-icon-color-override);\n transition: color .3s var(--n-bezier);\n "),Us("icon","\n color: var(--n-icon-color-override);\n transition: color .3s var(--n-bezier);\n "),Ns("disabled",[Us("date-picker-icon","\n color: var(--n-icon-color-disabled-override);\n "),Us("icon","\n color: var(--n-icon-color-disabled-override);\n ")])]),Us("date-panel","\n width: fit-content;\n outline: none;\n margin: 4px 0;\n display: grid;\n grid-template-columns: 0fr;\n border-radius: var(--n-panel-border-radius);\n background-color: var(--n-panel-color);\n color: var(--n-panel-text-color);\n user-select: none;\n ",[ew(),Ns("shadow","\n box-shadow: var(--n-panel-box-shadow);\n "),Us("date-panel-calendar",{padding:"var(--n-calendar-left-padding)",display:"grid",gridTemplateColumns:"1fr",gridArea:"left-calendar"},[Ns("end",{padding:"var(--n-calendar-right-padding)",gridArea:"right-calendar"})]),Us("date-panel-month-calendar",{display:"flex",gridArea:"left-calendar"},[zs("picker-col","\n min-width: var(--n-scroll-item-width);\n height: calc(var(--n-scroll-item-height) * 6);\n user-select: none;\n -webkit-user-select: none;\n ",[Ls("&:first-child","\n min-width: calc(var(--n-scroll-item-width) + 4px);\n ",[zs("picker-col-item",[Ls("&::before","left: 4px;")])]),zs("padding","\n height: calc(var(--n-scroll-item-height) * 5)\n ")]),zs("picker-col-item","\n z-index: 0;\n cursor: pointer;\n height: var(--n-scroll-item-height);\n box-sizing: border-box;\n padding-top: 4px;\n display: flex;\n align-items: center;\n justify-content: center;\n position: relative;\n transition: \n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n background: #0000;\n color: var(--n-item-text-color);\n ",[Ls("&::before",'\n z-index: -1;\n content: "";\n position: absolute;\n left: 0;\n right: 4px;\n top: 4px;\n bottom: 0;\n border-radius: var(--n-scroll-item-border-radius);\n transition: \n background-color .3s var(--n-bezier);\n '),js("disabled",[Ls("&:hover::before","\n background-color: var(--n-item-color-hover);\n "),Ns("selected","\n color: var(--n-item-color-active);\n ",[Ls("&::before","background-color: var(--n-item-color-hover);")])]),Ns("disabled","\n color: var(--n-item-text-color-disabled);\n cursor: not-allowed;\n ",[Ns("selected",[Ls("&::before","\n background-color: var(--n-item-color-disabled);\n ")])])])]),Ns("date",{gridTemplateAreas:'\n "left-calendar"\n "footer"\n "action"\n '}),Ns("week",{gridTemplateAreas:'\n "left-calendar"\n "footer"\n "action"\n '}),Ns("daterange",{gridTemplateAreas:'\n "left-calendar divider right-calendar"\n "footer footer footer"\n "action action action"\n '}),Ns("datetime",{gridTemplateAreas:'\n "header"\n "left-calendar"\n "footer"\n "action"\n '}),Ns("datetimerange",{gridTemplateAreas:'\n "header header header"\n "left-calendar divider right-calendar"\n "footer footer footer"\n "action action action"\n '}),Ns("month",{gridTemplateAreas:'\n "left-calendar"\n "footer"\n "action"\n '}),Us("date-panel-footer",{gridArea:"footer"}),Us("date-panel-actions",{gridArea:"action"}),Us("date-panel-header",{gridArea:"header"}),Us("date-panel-header","\n box-sizing: border-box;\n width: 100%;\n align-items: center;\n padding: var(--n-panel-header-padding);\n display: flex;\n justify-content: space-between;\n border-bottom: 1px solid var(--n-panel-header-divider-color);\n ",[Ls(">",[Ls("*:not(:last-child)",{marginRight:"10px"}),Ls("*",{flex:1,width:0}),Us("time-picker",{zIndex:1})])]),Us("date-panel-month","\n box-sizing: border-box;\n display: grid;\n grid-template-columns: var(--n-calendar-title-grid-template-columns);\n align-items: center;\n justify-items: center;\n padding: var(--n-calendar-title-padding);\n height: var(--n-calendar-title-height);\n ",[zs("prev, next, fast-prev, fast-next","\n line-height: 0;\n cursor: pointer;\n width: var(--n-arrow-size);\n height: var(--n-arrow-size);\n color: var(--n-arrow-color);\n "),zs("month-year","\n user-select: none;\n -webkit-user-select: none;\n flex-grow: 1;\n position: relative;\n ",[zs("text","\n font-size: var(--n-calendar-title-font-size);\n line-height: var(--n-calendar-title-font-size);\n font-weight: var(--n-calendar-title-font-weight);\n padding: 6px 8px;\n text-align: center;\n color: var(--n-calendar-title-text-color);\n cursor: pointer;\n transition: background-color .3s var(--n-bezier);\n border-radius: var(--n-panel-border-radius);\n ",[Ns("active","\n background-color: var(--n-calendar-title-color-hover);\n "),Ls("&:hover","\n background-color: var(--n-calendar-title-color-hover);\n ")])])]),Us("date-panel-weekdays","\n display: grid;\n margin: auto;\n grid-template-columns: repeat(7, var(--n-item-cell-width));\n grid-template-rows: repeat(1, var(--n-item-cell-height));\n align-items: center;\n justify-items: center;\n margin-bottom: 4px;\n border-bottom: 1px solid var(--n-calendar-days-divider-color);\n ",[zs("day","\n user-select: none;\n -webkit-user-select: none;\n line-height: 15px;\n width: var(--n-item-size);\n text-align: center;\n font-size: var(--n-calendar-days-font-size);\n color: var(--n-item-text-color);\n ")]),Us("date-panel-dates","\n margin: auto;\n display: grid;\n grid-template-columns: repeat(7, var(--n-item-cell-width));\n grid-template-rows: repeat(6, var(--n-item-cell-height));\n align-items: center;\n justify-items: center;\n flex-wrap: wrap;\n ",[Us("date-panel-date","\n user-select: none;\n -webkit-user-select: none;\n position: relative;\n width: var(--n-item-size);\n height: var(--n-item-size);\n line-height: var(--n-item-size);\n text-align: center;\n font-size: var(--n-item-font-size);\n border-radius: var(--n-item-border-radius);\n z-index: 0;\n cursor: pointer;\n transition:\n background-color .2s var(--n-bezier),\n color .2s var(--n-bezier);\n ",[zs("trigger","\n position: absolute;\n left: calc(var(--n-item-size) / 2 - var(--n-item-cell-width) / 2);\n top: calc(var(--n-item-size) / 2 - var(--n-item-cell-height) / 2);\n width: var(--n-item-cell-width);\n height: var(--n-item-cell-height);\n "),Ns("current",[zs("sup",'\n position: absolute;\n top: 2px;\n right: 2px;\n content: "";\n height: 4px;\n width: 4px;\n border-radius: 2px;\n background-color: var(--n-item-color-active);\n transition:\n background-color .2s var(--n-bezier);\n ')]),Ls("&::after",'\n content: "";\n z-index: -1;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n transition: background-color .3s var(--n-bezier);\n '),Ns("covered, start, end",[js("excluded",[Ls("&::before",'\n content: "";\n z-index: -2;\n position: absolute;\n left: calc((var(--n-item-size) - var(--n-item-cell-width)) / 2);\n right: calc((var(--n-item-size) - var(--n-item-cell-width)) / 2);\n top: 0;\n bottom: 0;\n background-color: var(--n-item-color-included);\n '),Ls("&:nth-child(7n + 1)::before",{borderTopLeftRadius:"var(--n-item-border-radius)",borderBottomLeftRadius:"var(--n-item-border-radius)"}),Ls("&:nth-child(7n + 7)::before",{borderTopRightRadius:"var(--n-item-border-radius)",borderBottomRightRadius:"var(--n-item-border-radius)"})])]),Ns("selected",{color:"var(--n-item-text-color-active)"},[Ls("&::after",{backgroundColor:"var(--n-item-color-active)"}),Ns("start",[Ls("&::before",{left:"50%"})]),Ns("end",[Ls("&::before",{right:"50%"})]),zs("sup",{backgroundColor:"var(--n-panel-color)"})]),Ns("excluded",{color:"var(--n-item-text-color-disabled)"},[Ns("selected",[Ls("&::after",{backgroundColor:"var(--n-item-color-disabled)"})])]),Ns("disabled",{cursor:"not-allowed",color:"var(--n-item-text-color-disabled)"},[Ns("covered",[Ls("&::before",{backgroundColor:"var(--n-item-color-disabled)"})]),Ns("selected",[Ls("&::before",{backgroundColor:"var(--n-item-color-disabled)"}),Ls("&::after",{backgroundColor:"var(--n-item-color-disabled)"})])]),Ns("week-hovered",[Ls("&::before","\n background-color: var(--n-item-color-included);\n "),Ls("&:nth-child(7n + 1)::before","\n border-top-left-radius: var(--n-item-border-radius);\n border-bottom-left-radius: var(--n-item-border-radius);\n "),Ls("&:nth-child(7n + 7)::before","\n border-top-right-radius: var(--n-item-border-radius);\n border-bottom-right-radius: var(--n-item-border-radius);\n ")]),Ns("week-selected","\n color: var(--n-item-text-color-active)\n ",[Ls("&::before","\n background-color: var(--n-item-color-active);\n "),Ls("&:nth-child(7n + 1)::before","\n border-top-left-radius: var(--n-item-border-radius);\n border-bottom-left-radius: var(--n-item-border-radius);\n "),Ls("&:nth-child(7n + 7)::before","\n border-top-right-radius: var(--n-item-border-radius);\n border-bottom-right-radius: var(--n-item-border-radius);\n ")])])]),js("week",[Us("date-panel-dates",[Us("date-panel-date",[js("disabled",[js("selected",[Ls("&:hover","\n background-color: var(--n-item-color-hover);\n ")])])])])]),Ns("week",[Us("date-panel-dates",[Us("date-panel-date",[Ls("&::before",'\n content: "";\n z-index: -2;\n position: absolute;\n left: calc((var(--n-item-size) - var(--n-item-cell-width)) / 2);\n right: calc((var(--n-item-size) - var(--n-item-cell-width)) / 2);\n top: 0;\n bottom: 0;\n transition: background-color .3s var(--n-bezier);\n ')])])]),zs("vertical-divider","\n grid-area: divider;\n height: 100%;\n width: 1px;\n background-color: var(--n-calendar-divider-color);\n "),Us("date-panel-footer","\n border-top: 1px solid var(--n-panel-action-divider-color);\n padding: var(--n-panel-extra-footer-padding);\n "),Us("date-panel-actions","\n flex: 1;\n padding: var(--n-panel-action-padding);\n display: flex;\n align-items: center;\n justify-content: space-between;\n border-top: 1px solid var(--n-panel-action-divider-color);\n ",[zs("prefix, suffix","\n display: flex;\n margin-bottom: -8px;\n "),zs("suffix","\n align-self: flex-end;\n "),zs("prefix","\n flex-wrap: wrap;\n "),Us("button","\n margin-bottom: 8px;\n ",[Ls("&:not(:last-child)","\n margin-right: 8px;\n ")])])]),Ls("[data-n-date].transition-disabled",{transition:"none !important"},[Ls("&::before, &::after",{transition:"none !important"})])]),qE=Dn({name:"DatePicker",props:Object.assign(Object.assign({},sf.props),{to:kl.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,updateValueOnClose:Boolean,defaultValue:[Number,Array],defaultFormattedValue:[String,Array],defaultTime:[Number,String,Array],disabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom-start"},value:[Number,Array],formattedValue:[String,Array],size:String,type:{type:String,default:"date"},valueFormat:String,separator:String,placeholder:String,startPlaceholder:String,endPlaceholder:String,format:String,dateFormat:String,timerPickerFormat:String,actions:Array,shortcuts:Object,isDateDisabled:Function,isTimeDisabled:Function,show:{type:Boolean,default:void 0},panel:Boolean,ranges:Object,firstDayOfWeek:Number,inputReadonly:Boolean,closeOnSelect:Boolean,status:String,timePickerProps:[Object,Array],onClear:Function,onConfirm:Function,defaultCalendarStartTime:Number,defaultCalendarEndTime:Number,bindCalendarMonths:Boolean,monthFormat:{type:String,default:"M"},yearFormat:{type:String,default:"y"},quarterFormat:{type:String,default:"'Q'Q"},"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:formattedValue":[Function,Array],onUpdateFormattedValue:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onNextMonth:Function,onPrevMonth:Function,onNextYear:Function,onPrevYear:Function,onChange:[Function,Array]}),setup(e,{slots:t}){var n;const{localeRef:r,dateLocaleRef:i}=Tv("DatePicker"),o=Lu(e),{mergedSizeRef:a,mergedDisabledRef:s,mergedStatusRef:l}=o,{mergedComponentPropsRef:c,mergedClsPrefixRef:u,mergedBorderedRef:d,namespaceRef:h,inlineThemeDisabled:p}=cf(e),A=bt(null),f=bt(null),m=bt(null),g=bt(!1),v=xl(Tt(e,"show"),g),y=eo((()=>({locale:i.value.locale}))),b=eo((()=>{const{format:t}=e;if(t)return t;switch(e.type){case"date":case"daterange":return r.value.dateFormat;case"datetime":case"datetimerange":return r.value.dateTimeFormat;case"year":case"yearrange":return r.value.yearTypeFormat;case"month":case"monthrange":return r.value.monthTypeFormat;case"quarter":case"quarterrange":return r.value.quarterFormat;case"week":return r.value.weekFormat}})),w=eo((()=>{var t;return null!==(t=e.valueFormat)&&void 0!==t?t:b.value}));function x(e){if(null===e)return null;const{value:t}=w,{value:n}=y;return Array.isArray(e)?[Yx(e[0],t,new Date,n).getTime(),Yx(e[1],t,new Date,n).getTime()]:Yx(e,t,new Date,n).getTime()}const{defaultFormattedValue:C,defaultValue:S}=e,B=bt(null!==(n=void 0!==C?x(C):S)&&void 0!==n?n:null),_=xl(eo((()=>{const{formattedValue:t}=e;return void 0!==t?x(t):e.value})),B),E=bt(null);Dr((()=>{E.value=_.value}));const M=bt(""),P=bt(""),T=bt(""),D=sf("DatePicker","-date-picker",GE,pB,e,u),F=eo((()=>{var e,t;return(null===(t=null===(e=null==c?void 0:c.value)||void 0===e?void 0:e.DatePicker)||void 0===t?void 0:t.timePickerSize)||"small"})),I=eo((()=>["daterange","datetimerange","monthrange","quarterrange","yearrange"].includes(e.type))),k=eo((()=>{const{placeholder:t}=e;if(void 0!==t)return t;{const{type:t}=e;switch(t){case"date":return r.value.datePlaceholder;case"datetime":return r.value.datetimePlaceholder;case"month":return r.value.monthPlaceholder;case"year":return r.value.yearPlaceholder;case"quarter":return r.value.quarterPlaceholder;case"week":return r.value.weekPlaceholder;default:return""}}})),O=eo((()=>void 0===e.startPlaceholder?"daterange"===e.type?r.value.startDatePlaceholder:"datetimerange"===e.type?r.value.startDatetimePlaceholder:"monthrange"===e.type?r.value.startMonthPlaceholder:"":e.startPlaceholder)),L=eo((()=>void 0===e.endPlaceholder?"daterange"===e.type?r.value.endDatePlaceholder:"datetimerange"===e.type?r.value.endDatetimePlaceholder:"monthrange"===e.type?r.value.endMonthPlaceholder:"":e.endPlaceholder)),R=eo((()=>{const{actions:t,type:n,clearable:r}=e;if(null===t)return[];if(void 0!==t)return t;const i=r?["clear"]:[];switch(n){case"date":case"week":case"year":return i.push("now"),i;case"datetime":case"month":case"quarter":return i.push("now","confirm"),i;case"daterange":case"datetimerange":case"monthrange":case"yearrange":case"quarterrange":return i.push("confirm"),i}}));function U(t,n){const{"onUpdate:value":r,onUpdateValue:i,onChange:a}=e,{nTriggerFormChange:s,nTriggerFormInput:l}=o,c=function(e){if(null===e)return null;if(Array.isArray(e)){const{value:t}=w,{value:n}=y;return[_m(e[0],t,n),_m(e[1],t,y.value)]}return _m(e,w.value,y.value)}(t);n.doConfirm&&function(t,n){const{onConfirm:r}=e;r&&r(t,n)}(t,c),i&&Ka(i,t,c),r&&Ka(r,t,c),a&&Ka(a,t,c),B.value=t,function(t,n){const{"onUpdate:formattedValue":r,onUpdateFormattedValue:i}=e;r&&Ka(r,t,n),i&&Ka(i,t,n)}(c,t),s(),l()}function z(){const{onClear:t}=e;null==t||t()}function N(t){const{"onUpdate:show":n,onUpdateShow:r}=e;n&&Ka(n,t),r&&Ka(r,t),g.value=t}function j(){const e=E.value;U(Array.isArray(e)?[e[0],e[1]]:e,{doConfirm:!0})}function H(){const{value:e}=E;I.value?(Array.isArray(e)||null===e)&&function(e){if(null===e)P.value="",T.value="";else{const t=y.value;P.value=_m(e[0],b.value,t),T.value=_m(e[1],b.value,t)}}(e):Array.isArray(e)||function(e){M.value=null===e?"":_m(e,b.value,y.value)}(e)}function Q(){s.value||v.value||N(!0)}function V({returnFocus:t,disableUpdateOnClose:n}){var r;v.value&&(N(!1),"date"!==e.type&&e.updateValueOnClose&&!n&&j(),t&&(null===(r=m.value)||void 0===r||r.focus()))}Ir(E,(()=>{H()})),H(),Ir(v,(e=>{e||(E.value=_.value)}));const W=function(e,t){const n=eo((()=>{const{isTimeDisabled:n}=e,{value:r}=t;if(null!==r&&!Array.isArray(r))return null==n?void 0:n(r)})),r=eo((()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.isHourDisabled})),i=eo((()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.isMinuteDisabled})),o=eo((()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.isSecondDisabled})),a=eo((()=>{const{type:n,isDateDisabled:r}=e,{value:i}=t;return!(null===i||Array.isArray(i)||!["date","datetime"].includes(n)||!r)&&r(i,{type:"input"})})),s=eo((()=>{const{type:n}=e,{value:a}=t;if(null===a||"datetime"===n||Array.isArray(a))return!1;const s=new Date(a),l=s.getHours(),c=s.getMinutes(),u=s.getMinutes();return!!r.value&&r.value(l)||!!i.value&&i.value(c,l)||!!o.value&&o.value(u,c,l)})),l=eo((()=>a.value||s.value));return{isValueInvalidRef:eo((()=>{const{type:t}=e;return"date"===t?a.value:"datetime"===t&&l.value})),isDateInvalidRef:a,isTimeInvalidRef:s,isDateTimeInvalidRef:l,isHourDisabledRef:r,isMinuteDisabledRef:i,isSecondDisabledRef:o}}(e,E),G=function(e,t){const n=eo((()=>{const{isTimeDisabled:n}=e,{value:r}=t;return Array.isArray(r)&&n?[null==n?void 0:n(r[0],"start",r),null==n?void 0:n(r[1],"end",r)]:[void 0,void 0]})),r={isStartHourDisabledRef:eo((()=>{var e;return null===(e=n.value[0])||void 0===e?void 0:e.isHourDisabled})),isEndHourDisabledRef:eo((()=>{var e;return null===(e=n.value[1])||void 0===e?void 0:e.isHourDisabled})),isStartMinuteDisabledRef:eo((()=>{var e;return null===(e=n.value[0])||void 0===e?void 0:e.isMinuteDisabled})),isEndMinuteDisabledRef:eo((()=>{var e;return null===(e=n.value[1])||void 0===e?void 0:e.isMinuteDisabled})),isStartSecondDisabledRef:eo((()=>{var e;return null===(e=n.value[0])||void 0===e?void 0:e.isSecondDisabled})),isEndSecondDisabledRef:eo((()=>{var e;return null===(e=n.value[1])||void 0===e?void 0:e.isSecondDisabled}))},i=eo((()=>{const{type:n,isDateDisabled:r}=e,{value:i}=t;return!!(null!==i&&Array.isArray(i)&&["daterange","datetimerange"].includes(n)&&r)&&r(i[0],"start",i)})),o=eo((()=>{const{type:n,isDateDisabled:r}=e,{value:i}=t;return!!(null!==i&&Array.isArray(i)&&["daterange","datetimerange"].includes(n)&&r)&&r(i[1],"end",i)})),a=eo((()=>{const{type:n}=e,{value:i}=t;if(null===i||!Array.isArray(i)||"datetimerange"!==n)return!1;const o=Tm(i[0]),a=Fm(i[0]),s=km(i[0]),{isStartHourDisabledRef:l,isStartMinuteDisabledRef:c,isStartSecondDisabledRef:u}=r;return!!l.value&&l.value(o)||!!c.value&&c.value(a,o)||!!u.value&&u.value(s,a,o)})),s=eo((()=>{const{type:n}=e,{value:i}=t;if(null===i||!Array.isArray(i)||"datetimerange"!==n)return!1;const o=Tm(i[1]),a=Fm(i[1]),s=km(i[1]),{isEndHourDisabledRef:l,isEndMinuteDisabledRef:c,isEndSecondDisabledRef:u}=r;return!!l.value&&l.value(o)||!!c.value&&c.value(a,o)||!!u.value&&u.value(s,a,o)})),l=eo((()=>i.value||a.value)),c=eo((()=>o.value||s.value)),u=eo((()=>l.value||c.value));return Object.assign(Object.assign({},r),{isStartDateInvalidRef:i,isEndDateInvalidRef:o,isStartTimeInvalidRef:a,isEndTimeInvalidRef:s,isStartValueInvalidRef:l,isEndValueInvalidRef:c,isRangeInvalidRef:u})}(e,E);nr(AB,Object.assign(Object.assign(Object.assign({mergedClsPrefixRef:u,mergedThemeRef:D,timePickerSizeRef:F,localeRef:r,dateLocaleRef:i,firstDayOfWeekRef:Tt(e,"firstDayOfWeek"),isDateDisabledRef:Tt(e,"isDateDisabled"),rangesRef:Tt(e,"ranges"),timePickerPropsRef:Tt(e,"timePickerProps"),closeOnSelectRef:Tt(e,"closeOnSelect"),updateValueOnCloseRef:Tt(e,"updateValueOnClose"),monthFormatRef:Tt(e,"monthFormat"),yearFormatRef:Tt(e,"yearFormat"),quarterFormatRef:Tt(e,"quarterFormat")},W),G),{datePickerSlots:t}));const q={focus:()=>{var e;null===(e=m.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=m.value)||void 0===e||e.blur()}},K=eo((()=>{const{common:{cubicBezierEaseInOut:e},self:{iconColor:t,iconColorDisabled:n}}=D.value;return{"--n-bezier":e,"--n-icon-color-override":t,"--n-icon-color-disabled-override":n}})),Y=p?Fv("date-picker-trigger",void 0,K,e):void 0,X=eo((()=>{const{type:t}=e,{common:{cubicBezierEaseInOut:n},self:{calendarTitleFontSize:r,calendarDaysFontSize:i,itemFontSize:o,itemTextColor:a,itemColorDisabled:s,itemColorIncluded:l,itemColorHover:c,itemColorActive:u,itemBorderRadius:d,itemTextColorDisabled:h,itemTextColorActive:p,panelColor:A,panelTextColor:f,arrowColor:m,calendarTitleTextColor:g,panelActionDividerColor:v,panelHeaderDividerColor:y,calendarDaysDividerColor:b,panelBoxShadow:w,panelBorderRadius:x,calendarTitleFontWeight:C,panelExtraFooterPadding:S,panelActionPadding:B,itemSize:_,itemCellWidth:E,itemCellHeight:M,scrollItemWidth:P,scrollItemHeight:T,calendarTitlePadding:F,calendarTitleHeight:I,calendarDaysHeight:k,calendarDaysTextColor:O,arrowSize:L,panelHeaderPadding:R,calendarDividerColor:U,calendarTitleGridTempateColumns:z,iconColor:N,iconColorDisabled:j,scrollItemBorderRadius:H,calendarTitleColorHover:Q,[Gs("calendarLeftPadding",t)]:V,[Gs("calendarRightPadding",t)]:W}}=D.value;return{"--n-bezier":n,"--n-panel-border-radius":x,"--n-panel-color":A,"--n-panel-box-shadow":w,"--n-panel-text-color":f,"--n-panel-header-padding":R,"--n-panel-header-divider-color":y,"--n-calendar-left-padding":V,"--n-calendar-right-padding":W,"--n-calendar-title-color-hover":Q,"--n-calendar-title-height":I,"--n-calendar-title-padding":F,"--n-calendar-title-font-size":r,"--n-calendar-title-font-weight":C,"--n-calendar-title-text-color":g,"--n-calendar-title-grid-template-columns":z,"--n-calendar-days-height":k,"--n-calendar-days-divider-color":b,"--n-calendar-days-font-size":i,"--n-calendar-days-text-color":O,"--n-calendar-divider-color":U,"--n-panel-action-padding":B,"--n-panel-extra-footer-padding":S,"--n-panel-action-divider-color":v,"--n-item-font-size":o,"--n-item-border-radius":d,"--n-item-size":_,"--n-item-cell-width":E,"--n-item-cell-height":M,"--n-item-text-color":a,"--n-item-color-included":l,"--n-item-color-disabled":s,"--n-item-color-hover":c,"--n-item-color-active":u,"--n-item-text-color-disabled":h,"--n-item-text-color-active":p,"--n-scroll-item-width":P,"--n-scroll-item-height":T,"--n-scroll-item-border-radius":H,"--n-arrow-size":L,"--n-arrow-color":m,"--n-icon-color":N,"--n-icon-color-disabled":j}})),$=p?Fv("date-picker",eo((()=>e.type)),X,e):void 0;return Object.assign(Object.assign({},q),{mergedStatus:l,mergedClsPrefix:u,mergedBordered:d,namespace:h,uncontrolledValue:B,pendingValue:E,panelInstRef:A,triggerElRef:f,inputInstRef:m,isMounted:Cl(),displayTime:M,displayStartTime:P,displayEndTime:T,mergedShow:v,adjustedTo:kl(e),isRange:I,localizedStartPlaceholder:O,localizedEndPlaceholder:L,mergedSize:a,mergedDisabled:s,localizedPlacehoder:k,isValueInvalid:W.isValueInvalidRef,isStartValueInvalid:G.isStartValueInvalidRef,isEndValueInvalid:G.isEndValueInvalidRef,handleInputKeydown:function(e){"Escape"===e.key&&v.value&&Xs(e)},handleClickOutside:function(e){var t;v.value&&!(null===(t=f.value)||void 0===t?void 0:t.contains(ma(e)))&&V({returnFocus:!1})},handleKeydown:function(e){"Escape"===e.key&&v.value&&(Xs(e),V({returnFocus:!0}))},handleClear:function(){var e;N(!1),null===(e=m.value)||void 0===e||e.deactivate(),z()},handlePanelClear:function(){var e;null===(e=m.value)||void 0===e||e.deactivate(),z()},handleTriggerClick:function(e){s.value||fa(e,"clear")||v.value||Q()},handleInputActivate:function(){v.value||Q()},handleInputDeactivate:function(){s.value||(H(),V({returnFocus:!1}))},handleInputFocus:function(t){s.value||function(t){const{onFocus:n}=e,{nTriggerFormFocus:r}=o;n&&Ka(n,t),r()}(t)},handleInputBlur:function(t){var n;(null===(n=A.value)||void 0===n?void 0:n.$el.contains(t.relatedTarget))||(!function(t){const{onBlur:n}=e,{nTriggerFormBlur:r}=o;n&&Ka(n,t),r()}(t),H(),V({returnFocus:!1}))},handlePanelTabOut:function(){V({returnFocus:!0})},handlePanelClose:function(e){V({returnFocus:!0,disableUpdateOnClose:e})},handleRangeUpdateValue:function(e,{source:t}){if(""===e[0]&&""===e[1])return U(null,{doConfirm:!1}),E.value=null,P.value="",void(T.value="");const[n,r]=e,i=Yx(n,b.value,new Date,y.value),o=Yx(r,b.value,new Date,y.value);if(Of(i)&&Of(o)){let e=Om(i),n=Om(o);o<i&&(0===t?n=e:e=n),U([e,n],{doConfirm:!1}),H()}else[P.value,T.value]=e},handleSingleUpdateValue:function(e){if(""===e)return U(null,{doConfirm:!1}),E.value=null,void(M.value="");const t=Yx(e,b.value,new Date,y.value);Of(t)?(U(Om(t),{doConfirm:!1}),H()):M.value=e},handlePanelUpdateValue:function(e,t){t?U(e,{doConfirm:!1}):function(e){E.value=e}(e)},handlePanelConfirm:j,mergedTheme:D,actions:R,triggerCssVars:p?void 0:K,triggerThemeClass:null==Y?void 0:Y.themeClass,triggerOnRender:null==Y?void 0:Y.onRender,cssVars:p?void 0:X,themeClass:null==$?void 0:$.themeClass,onRender:null==$?void 0:$.onRender,onNextMonth:e.onNextMonth,onPrevMonth:e.onPrevMonth,onNextYear:e.onNextYear,onPrevYear:e.onPrevYear})},render(){const{clearable:e,triggerOnRender:t,mergedClsPrefix:n,$slots:r}=this,i={onUpdateValue:this.handlePanelUpdateValue,onTabOut:this.handlePanelTabOut,onClose:this.handlePanelClose,onClear:this.handlePanelClear,onKeydown:this.handleKeydown,onConfirm:this.handlePanelConfirm,ref:"panelInstRef",value:this.pendingValue,active:this.mergedShow,actions:this.actions,shortcuts:this.shortcuts,style:this.cssVars,defaultTime:this.defaultTime,themeClass:this.themeClass,panel:this.panel,onRender:this.onRender,onNextMonth:this.onNextMonth,onPrevMonth:this.onPrevMonth,onNextYear:this.onNextYear,onPrevYear:this.onPrevYear,timerPickerFormat:this.timerPickerFormat},o=()=>{const{type:e}=this;return"datetime"===e?to(zE,Object.assign({},i,{defaultCalendarStartTime:this.defaultCalendarStartTime}),r):"daterange"===e?to(VE,Object.assign({},i,{defaultCalendarStartTime:this.defaultCalendarStartTime,defaultCalendarEndTime:this.defaultCalendarEndTime,bindCalendarMonths:this.bindCalendarMonths}),r):"datetimerange"===e?to(HE,Object.assign({},i,{defaultCalendarStartTime:this.defaultCalendarStartTime,defaultCalendarEndTime:this.defaultCalendarEndTime,bindCalendarMonths:this.bindCalendarMonths}),r):"month"===e||"year"===e||"quarter"===e?to(RE,Object.assign({},i,{type:e,key:e})):"monthrange"===e||"yearrange"===e||"quarterrange"===e?to(WE,Object.assign({},i,{type:e})):to(QE,Object.assign({},i,{type:e,defaultCalendarStartTime:this.defaultCalendarStartTime}),r)};if(this.panel)return o();null==t||t();const a={bordered:this.mergedBordered,size:this.mergedSize,passivelyActivated:!0,disabled:this.mergedDisabled,readonly:this.inputReadonly||this.mergedDisabled,clearable:e,onClear:this.handleClear,onClick:this.handleTriggerClick,onKeydown:this.handleInputKeydown,onActivate:this.handleInputActivate,onDeactivate:this.handleInputDeactivate,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur};return to("div",{ref:"triggerElRef",class:[`${n}-date-picker`,this.mergedDisabled&&`${n}-date-picker--disabled`,this.isRange&&`${n}-date-picker--range`,this.triggerThemeClass],style:this.triggerCssVars,onKeydown:this.handleKeydown},to(Vl,null,{default:()=>[to(Wl,null,{default:()=>this.isRange?to(ex,Object.assign({ref:"inputInstRef",status:this.mergedStatus,value:[this.displayStartTime,this.displayEndTime],placeholder:[this.localizedStartPlaceholder,this.localizedEndPlaceholder],textDecoration:[this.isStartValueInvalid?"line-through":"",this.isEndValueInvalid?"line-through":""],pair:!0,onUpdateValue:this.handleRangeUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},a),{separator:()=>void 0===this.separator?rs(r.separator,(()=>[to(py,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>to(ly,null)})])):this.separator,[e?"clear-icon-placeholder":"suffix"]:()=>rs(r["date-icon"],(()=>[to(py,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>to(zv,null)})]))}):to(ex,Object.assign({ref:"inputInstRef",status:this.mergedStatus,value:this.displayTime,placeholder:this.localizedPlacehoder,textDecoration:this.isValueInvalid&&!this.isRange?"line-through":"",onUpdateValue:this.handleSingleUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},a),{[e?"clear-icon-placeholder":"suffix"]:()=>to(py,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>rs(r["date-icon"],(()=>[to(zv,null)]))})})}),to(gc,{show:this.mergedShow,containerClass:this.namespace,to:this.adjustedTo,teleportDisabled:this.adjustedTo===kl.tdkey,placement:this.placement},{default:()=>to(co,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?En(o(),[[Yl,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),KE={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"22px",closeIconSize:"18px",closeMargin:"20px 26px 0 0",closeMarginIconTop:"10px 16px 0 0"},YE={name:"Dialog",common:Lb,peers:{Button:Cx},self:e=>{const{textColor1:t,textColor2:n,modalColor:r,closeIconColor:i,closeIconColorHover:o,closeIconColorPressed:a,closeColorHover:s,closeColorPressed:l,infoColor:c,successColor:u,warningColor:d,errorColor:h,primaryColor:p,dividerColor:A,borderRadius:f,fontWeightStrong:m,lineHeight:g,fontSize:v}=e;return Object.assign(Object.assign({},KE),{fontSize:v,lineHeight:g,border:`1px solid ${A}`,titleTextColor:t,textColor:n,color:r,closeColorHover:s,closeColorPressed:l,closeIconColor:i,closeIconColorHover:o,closeIconColorPressed:a,closeBorderRadius:f,iconColor:p,iconColorInfo:c,iconColorSuccess:u,iconColorWarning:d,iconColorError:h,borderRadius:f,titleFontWeight:m})}},XE={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,positiveButtonProps:Object,negativeButtonProps:Object,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,titleClass:[String,Array],titleStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],actionClass:[String,Array],actionStyle:[String,Object],onPositiveClick:Function,onNegativeClick:Function,onClose:Function},$E=Ya(XE),JE=Ls([Us("dialog","\n --n-icon-margin: var(--n-icon-margin-top) var(--n-icon-margin-right) var(--n-icon-margin-bottom) var(--n-icon-margin-left);\n word-break: break-word;\n line-height: var(--n-line-height);\n position: relative;\n background: var(--n-color);\n color: var(--n-text-color);\n box-sizing: border-box;\n margin: auto;\n border-radius: var(--n-border-radius);\n padding: var(--n-padding);\n transition: \n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n ",[zs("icon",{color:"var(--n-icon-color)"}),Ns("bordered",{border:"var(--n-border)"}),Ns("icon-top",[zs("close",{margin:"var(--n-close-margin)"}),zs("icon",{margin:"var(--n-icon-margin)"}),zs("content",{textAlign:"center"}),zs("title",{justifyContent:"center"}),zs("action",{justifyContent:"center"})]),Ns("icon-left",[zs("icon",{margin:"var(--n-icon-margin)"}),Ns("closable",[zs("title","\n padding-right: calc(var(--n-close-size) + 6px);\n ")])]),zs("close","\n position: absolute;\n right: 0;\n top: 0;\n margin: var(--n-close-margin);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n z-index: 1;\n "),zs("content","\n font-size: var(--n-font-size);\n margin: var(--n-content-margin);\n position: relative;\n word-break: break-word;\n ",[Ns("last","margin-bottom: 0;")]),zs("action","\n display: flex;\n justify-content: flex-end;\n ",[Ls("> *:not(:last-child)","\n margin-right: var(--n-action-space);\n ")]),zs("icon","\n font-size: var(--n-icon-size);\n transition: color .3s var(--n-bezier);\n "),zs("title","\n transition: color .3s var(--n-bezier);\n display: flex;\n align-items: center;\n font-size: var(--n-title-font-size);\n font-weight: var(--n-title-font-weight);\n color: var(--n-title-text-color);\n "),Us("dialog-icon-container","\n display: flex;\n justify-content: center;\n ")]),Hs(Us("dialog","\n width: 446px;\n max-width: calc(100vw - 32px);\n ")),Us("dialog",[Vs("\n width: 446px;\n max-width: calc(100vw - 32px);\n ")])]),ZE={default:()=>to(Jv,null),info:()=>to(Jv,null),success:()=>to(ny,null),warning:()=>to(iy,null),error:()=>to(qv,null)},eM=Dn({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},sf.props),XE),setup(e){const{mergedComponentPropsRef:t,mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedRtlRef:i}=cf(e),o=Iv("Dialog",i,n),a=eo((()=>{var n,r;const{iconPlacement:i}=e;return i||(null===(r=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.Dialog)||void 0===r?void 0:r.iconPlacement)||"left"}));const s=sf("Dialog","-dialog",JE,YE,e,n),l=eo((()=>{const{type:t}=e,n=a.value,{common:{cubicBezierEaseInOut:r},self:{fontSize:i,lineHeight:o,border:l,titleTextColor:c,textColor:u,color:d,closeBorderRadius:h,closeColorHover:p,closeColorPressed:A,closeIconColor:f,closeIconColorHover:m,closeIconColorPressed:g,closeIconSize:v,borderRadius:y,titleFontWeight:b,titleFontSize:w,padding:x,iconSize:C,actionSpace:S,contentMargin:B,closeSize:_,["top"===n?"iconMarginIconTop":"iconMargin"]:E,["top"===n?"closeMarginIconTop":"closeMargin"]:M,[Gs("iconColor",t)]:P}}=s.value,T=ya(E);return{"--n-font-size":i,"--n-icon-color":P,"--n-bezier":r,"--n-close-margin":M,"--n-icon-margin-top":T.top,"--n-icon-margin-right":T.right,"--n-icon-margin-bottom":T.bottom,"--n-icon-margin-left":T.left,"--n-icon-size":C,"--n-close-size":_,"--n-close-icon-size":v,"--n-close-border-radius":h,"--n-close-color-hover":p,"--n-close-color-pressed":A,"--n-close-icon-color":f,"--n-close-icon-color-hover":m,"--n-close-icon-color-pressed":g,"--n-color":d,"--n-text-color":u,"--n-border-radius":y,"--n-padding":x,"--n-line-height":o,"--n-border":l,"--n-content-margin":B,"--n-title-font-size":w,"--n-title-font-weight":b,"--n-title-text-color":c,"--n-action-space":S}})),c=r?Fv("dialog",eo((()=>`${e.type[0]}${a.value[0]}`)),l,e):void 0;return{mergedClsPrefix:n,rtlEnabled:o,mergedIconPlacement:a,mergedTheme:s,handlePositiveClick:function(t){const{onPositiveClick:n}=e;n&&n(t)},handleNegativeClick:function(t){const{onNegativeClick:n}=e;n&&n(t)},handleCloseClick:function(){const{onClose:t}=e;t&&t()},cssVars:r?void 0:l,themeClass:null==c?void 0:c.themeClass,onRender:null==c?void 0:c.onRender}},render(){var e;const{bordered:t,mergedIconPlacement:n,cssVars:r,closable:i,showIcon:o,title:a,content:s,action:l,negativeText:c,positiveText:u,positiveButtonProps:d,negativeButtonProps:h,handlePositiveClick:p,handleNegativeClick:A,mergedTheme:f,loading:m,type:g,mergedClsPrefix:v}=this;null===(e=this.onRender)||void 0===e||e.call(this);const y=o?to(py,{clsPrefix:v,class:`${v}-dialog__icon`},{default:()=>os(this.$slots.icon,(e=>e||(this.icon?Xa(this.icon):ZE[this.type]())))}):null,b=os(this.$slots.action,(e=>e||u||c||l?to("div",{class:[`${v}-dialog__action`,this.actionClass],style:this.actionStyle},e||(l?[Xa(l)]:[this.negativeText&&to(Bx,Object.assign({theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,ghost:!0,size:"small",onClick:A},h),{default:()=>Xa(this.negativeText)}),this.positiveText&&to(Bx,Object.assign({theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,size:"small",type:"default"===g?"primary":g,disabled:m,loading:m,onClick:p},d),{default:()=>Xa(this.positiveText)})])):null));return to("div",{class:[`${v}-dialog`,this.themeClass,this.closable&&`${v}-dialog--closable`,`${v}-dialog--icon-${n}`,t&&`${v}-dialog--bordered`,this.rtlEnabled&&`${v}-dialog--rtl`],style:r,role:"dialog"},i?os(this.$slots.close,(e=>{const t=[`${v}-dialog__close`,this.rtlEnabled&&`${v}-dialog--rtl`];return e?to("div",{class:t},e):to(fy,{clsPrefix:v,class:t,onClick:this.handleCloseClick})})):null,o&&"top"===n?to("div",{class:`${v}-dialog-icon-container`},y):null,to("div",{class:[`${v}-dialog__title`,this.titleClass],style:this.titleStyle},o&&"left"===n?y:null,rs(this.$slots.header,(()=>[Xa(a)]))),to("div",{class:[`${v}-dialog__content`,b?"":`${v}-dialog__content--last`,this.contentClass],style:this.contentStyle},rs(this.$slots.default,(()=>[Xa(s)]))),b)}}),tM={name:"Modal",common:Lb,peers:{Scrollbar:Hb,Dialog:YE,Card:Zx},self:e=>{const{modalColor:t,textColor2:n,boxShadow3:r}=e;return{color:t,textColor:n,boxShadow:r}}},nM=Object.assign(Object.assign({},tC),XE),rM=Ya(nM),iM=Dn({name:"ModalBody",inheritAttrs:!1,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0},trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},blockScroll:Boolean},nM),{renderMask:Function,onClickoutside:Function,onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0},onAfterEnter:Function,onEsc:Function}),setup(e){const t=bt(null),n=bt(null),r=bt(e.show),i=bt(null),o=bt(null);Ir(Tt(e,"show"),(e=>{e&&(r.value=!0)})),function(e){if("undefined"==typeof document)return;const t=document.documentElement;let n,r=!1;const i=()=>{t.style.marginRight=Bu,t.style.overflow=_u,t.style.overflowX=Eu,t.style.overflowY=Mu,Pu.value="0px"};vn((()=>{n=Ir(e,(e=>{if(e){if(!Su){const e=window.innerWidth-t.offsetWidth;e>0&&(Bu=t.style.marginRight,t.style.marginRight=`${e}px`,Pu.value=`${e}px`),_u=t.style.overflow,Eu=t.style.overflowX,Mu=t.style.overflowY,t.style.overflow="hidden",t.style.overflowX="hidden",t.style.overflowY="hidden"}r=!0,Su++}else Su--,Su||i(),r=!1}),{immediate:!0})})),wn((()=>{null==n||n(),r&&(Su--,Su||i(),r=!1)}))}(eo((()=>e.blockScroll&&r.value)));const a=rr(Tl);function s(){if("center"===a.transformOriginRef.value)return"";const{value:e}=i,{value:t}=o;if(null===e||null===t)return"";if(n.value){return`${e}px ${t+n.value.containerScrollTop}px`}return""}const l=bt(null);return Ir(l,(e=>{e&&Vt((()=>{const n=e.el;n&&t.value!==n&&(t.value=n)}))})),nr(Pl,t),nr(Dl,null),nr(Fl,null),{mergedTheme:a.mergedThemeRef,appear:a.appearRef,isMounted:a.isMountedRef,mergedClsPrefix:a.mergedClsPrefixRef,bodyRef:t,scrollbarRef:n,displayed:r,childNodeRef:l,handlePositiveClick:function(){e.onPositiveClick()},handleNegativeClick:function(){e.onNegativeClick()},handleCloseClick:function(){const{onClose:t}=e;t&&t()},handleAfterLeave:function(){r.value=!1,i.value=null,o.value=null,e.onAfterLeave()},handleBeforeLeave:function(t){t.style.transformOrigin=s(),e.onBeforeLeave()},handleEnter:function(e){Vt((()=>{!function(e){if("center"===a.transformOriginRef.value)return;const t=a.getMousePosition();if(!t)return;if(!n.value)return;const r=n.value.containerScrollTop,{offsetLeft:l,offsetTop:c}=e;if(t){const e=t.y,n=t.x;i.value=-(l-n),o.value=-(c-e-r)}e.style.transformOrigin=s()}(e)}))}}},render(){const{$slots:e,$attrs:t,handleEnter:n,handleAfterLeave:r,handleBeforeLeave:i,preset:o,mergedClsPrefix:a}=this;let s=null;if(!o){if(s=es(e),!s)return;s=Pi(s),s.props=Li({class:`${a}-modal`},t,s.props||{})}return"show"===this.displayDirective||this.displayed||this.show?En(to("div",{role:"none",class:`${a}-modal-body-wrapper`},to(Gb,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${a}-modal-scroll-content`},{default:()=>{var t;return[null===(t=this.renderMask)||void 0===t?void 0:t.call(this),to(xu,{disabled:!this.trapFocus,active:this.show,onEsc:this.onEsc,autoFocus:this.autoFocus},{default:()=>{var t;return to(co,{name:"fade-in-scale-up-transition",appear:null!==(t=this.appear)&&void 0!==t?t:this.isMounted,onEnter:n,onAfterEnter:this.onAfterEnter,onAfterLeave:r,onBeforeLeave:i},{default:()=>{const t=[[Mo,this.show]],{onClickoutside:n}=this;return n&&t.push([Yl,this.onClickoutside,void 0,{capture:!0}]),En("confirm"===this.preset||"dialog"===this.preset?to(eM,Object.assign({},this.$attrs,{class:[`${a}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},Wa(this.$props,$E),{"aria-modal":"true"}),e):"card"===this.preset?to(rC,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${a}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},Wa(this.$props,nC),{"aria-modal":"true",role:"dialog"}),e):this.childNodeRef=s,t)}})}})]}})),[[Mo,"if"===this.displayDirective||this.displayed||this.show]]):null}}),oM=Ls([Us("modal-container","\n position: fixed;\n left: 0;\n top: 0;\n height: 0;\n width: 0;\n display: flex;\n "),Us("modal-mask","\n position: fixed;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n background-color: rgba(0, 0, 0, .4);\n ",[Vb({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--n-bezier-ease-out)",leaveCubicBezier:"var(--n-bezier-ease-out)"})]),Us("modal-body-wrapper","\n position: fixed;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n overflow: visible;\n ",[Us("modal-scroll-content","\n min-height: 100%;\n display: flex;\n position: relative;\n ")]),Us("modal","\n position: relative;\n align-self: center;\n color: var(--n-text-color);\n margin: auto;\n box-shadow: var(--n-box-shadow);\n ",[ew({duration:".25s",enterScale:".5"})])]),aM=Object.assign(Object.assign(Object.assign(Object.assign({},sf.props),{show:Boolean,unstableShowMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"},transformOrigin:{type:String,default:"mouse"},zIndex:Number,autoFocus:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0}}),nM),{onEsc:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,internalDialog:Boolean,internalModal:Boolean,internalAppear:{type:Boolean,default:void 0},overlayStyle:[String,Object],onBeforeHide:Function,onAfterHide:Function,onHide:Function}),sM=Dn({name:"Modal",inheritAttrs:!1,props:aM,setup(e){const t=bt(null),{mergedClsPrefixRef:n,namespaceRef:r,inlineThemeDisabled:i}=cf(e),o=sf("Modal","-modal",oM,tM,e,n),a=wl(64),s=ml(),l=Cl(),c=e.internalDialog?rr("n-dialog-provider",null):null,u=e.internalModal?rr("n-modal-provider",null):null,d=(Ks&&(gn((()=>{Iu||(window.addEventListener("compositionstart",Du),window.addEventListener("compositionend",Fu)),Iu++})),wn((()=>{Iu<=1?(window.removeEventListener("compositionstart",Du),window.removeEventListener("compositionend",Fu),Iu=0):Iu--}))),Tu);function h(t){const{onUpdateShow:n,"onUpdate:show":r,onHide:i}=e;n&&Ka(n,t),r&&Ka(r,t),i&&!t&&i(t)}nr(Tl,{getMousePosition:()=>{const e=c||u;if(e){const{clickedRef:t,clickedPositionRef:n}=e;if(t.value&&n.value)return n.value}return a.value?s.value:null},mergedClsPrefixRef:n,mergedThemeRef:o,isMountedRef:l,appearRef:Tt(e,"internalAppear"),transformOriginRef:Tt(e,"transformOrigin")});const p=eo((()=>{const{common:{cubicBezierEaseOut:e},self:{boxShadow:t,color:n,textColor:r}}=o.value;return{"--n-bezier-ease-out":e,"--n-box-shadow":t,"--n-color":n,"--n-text-color":r}})),A=i?Fv("theme-class",void 0,p,e):void 0;return{mergedClsPrefix:n,namespace:r,isMounted:l,containerRef:t,presetProps:eo((()=>Wa(e,rM))),handleEsc:function(t){var n,r;null===(n=e.onEsc)||void 0===n||n.call(e),e.show&&e.closeOnEsc&&(r=t,!Ys.has(r))&&!d.value&&h(!1)},handleAfterLeave:function(){const{onAfterLeave:t,onAfterHide:n}=e;t&&Ka(t),n&&n()},handleClickoutside:function(n){var r;const{onMaskClick:i}=e;i&&i(n),e.maskClosable&&(null===(r=t.value)||void 0===r?void 0:r.contains(ma(n)))&&h(!1)},handleBeforeLeave:function(){const{onBeforeLeave:t,onBeforeHide:n}=e;t&&Ka(t),n&&n()},doUpdateShow:h,handleNegativeClick:function(){const{onNegativeClick:t}=e;t?Promise.resolve(t()).then((e=>{!1!==e&&h(!1)})):h(!1)},handlePositiveClick:function(){const{onPositiveClick:t}=e;t?Promise.resolve(t()).then((e=>{!1!==e&&h(!1)})):h(!1)},handleCloseClick:function(){const{onClose:t}=e;t?Promise.resolve(t()).then((e=>{!1!==e&&h(!1)})):h(!1)},cssVars:i?void 0:p,themeClass:null==A?void 0:A.themeClass,onRender:null==A?void 0:A.onRender}},render(){const{mergedClsPrefix:e}=this;return to(sc,{to:this.to,show:this.show},{default:()=>{var t;null===(t=this.onRender)||void 0===t||t.call(this);const{unstableShowMask:n}=this;return En(to("div",{role:"none",ref:"containerRef",class:[`${e}-modal-container`,this.themeClass,this.namespace],style:this.cssVars},to(iM,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset,autoFocus:this.autoFocus,trapFocus:this.trapFocus,blockScroll:this.blockScroll},this.presetProps,{onEsc:this.handleEsc,onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave,onClickoutside:n?void 0:this.handleClickoutside,renderMask:n?()=>{var t;return to(co,{name:"fade-in-transition",key:"mask",appear:null!==(t=this.internalAppear)&&void 0!==t?t:this.isMounted},{default:()=>this.show?to("div",{"aria-hidden":!0,ref:"containerRef",class:`${e}-modal-mask`,onClick:this.handleClickoutside}):null})}:void 0}),this.$slots)),[[Jl,{zIndex:this.zIndex,enabled:this.show}]])}})}}),lM={name:"Divider",common:Lb,self:e=>{const{textColor1:t,dividerColor:n,fontWeightStrong:r}=e;return{textColor:t,color:n,fontWeight:r}}},cM=Us("divider","\n position: relative;\n display: flex;\n width: 100%;\n box-sizing: border-box;\n font-size: 16px;\n color: var(--n-text-color);\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n",[js("vertical","\n margin-top: 24px;\n margin-bottom: 24px;\n ",[js("no-title","\n display: flex;\n align-items: center;\n ")]),zs("title","\n display: flex;\n align-items: center;\n margin-left: 12px;\n margin-right: 12px;\n white-space: nowrap;\n font-weight: var(--n-font-weight);\n "),Ns("title-position-left",[zs("line",[Ns("left",{width:"28px"})])]),Ns("title-position-right",[zs("line",[Ns("right",{width:"28px"})])]),Ns("dashed",[zs("line","\n background-color: #0000;\n height: 0px;\n width: 100%;\n border-style: dashed;\n border-width: 1px 0 0;\n ")]),Ns("vertical","\n display: inline-block;\n height: 1em;\n margin: 0 8px;\n vertical-align: middle;\n width: 1px;\n "),zs("line","\n border: none;\n transition: background-color .3s var(--n-bezier), border-color .3s var(--n-bezier);\n height: 1px;\n width: 100%;\n margin: 0;\n "),js("dashed",[zs("line",{backgroundColor:"var(--n-color)"})]),Ns("dashed",[zs("line",{borderColor:"var(--n-color)"})]),Ns("vertical",{backgroundColor:"var(--n-color)"})]),uM=Dn({name:"Divider",props:Object.assign(Object.assign({},sf.props),{titlePlacement:{type:String,default:"center"},dashed:Boolean,vertical:Boolean}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Divider","-divider",cM,lM,e,t),i=eo((()=>{const{common:{cubicBezierEaseInOut:e},self:{color:t,textColor:n,fontWeight:i}}=r.value;return{"--n-bezier":e,"--n-color":t,"--n-text-color":n,"--n-font-weight":i}})),o=n?Fv("divider",void 0,i,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:i,themeClass:null==o?void 0:o.themeClass,onRender:null==o?void 0:o.onRender}},render(){var e;const{$slots:t,titlePlacement:n,vertical:r,dashed:i,cssVars:o,mergedClsPrefix:a}=this;return null===(e=this.onRender)||void 0===e||e.call(this),to("div",{role:"separator",class:[`${a}-divider`,this.themeClass,{[`${a}-divider--vertical`]:r,[`${a}-divider--no-title`]:!t.default,[`${a}-divider--dashed`]:i,[`${a}-divider--title-position-${n}`]:t.default&&n}],style:o},r?null:to("div",{class:`${a}-divider__line ${a}-divider__line--left`}),!r&&t.default?to(di,null,to("div",{class:`${a}-divider__title`},this.$slots),to("div",{class:`${a}-divider__line ${a}-divider__line--right`})):null)}}),dM={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"},hM={name:"DynamicInput",common:Lb,peers:{Input:qw,Button:Cx},self:()=>dM},pM="n-dynamic-input",AM=Dn({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:t}=rr(pM);return{mergedTheme:e,placeholder:t}},render(){const{mergedTheme:e,placeholder:t,value:n,clsPrefix:r,onUpdateValue:i,disabled:o}=this;return to("div",{class:`${r}-dynamic-input-preset-input`},to(ex,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:n,placeholder:t,onUpdateValue:i,disabled:o}))}}),fM=Dn({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:t,keyPlaceholderRef:n,valuePlaceholderRef:r}=rr(pM);return{mergedTheme:t,keyPlaceholder:n,valuePlaceholder:r,handleKeyInput(t){e.onUpdateValue({key:t,value:e.value.value})},handleValueInput(t){e.onUpdateValue({key:e.value.key,value:t})}}},render(){const{mergedTheme:e,keyPlaceholder:t,valuePlaceholder:n,value:r,clsPrefix:i,disabled:o}=this;return to("div",{class:`${i}-dynamic-input-preset-pair`},to(ex,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:r.key,class:`${i}-dynamic-input-pair-input`,placeholder:t,onUpdateValue:this.handleKeyInput,disabled:o}),to(ex,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:r.value,class:`${i}-dynamic-input-pair-input`,placeholder:n,onUpdateValue:this.handleValueInput,disabled:o}))}}),mM=Us("dynamic-input",{width:"100%"},[Us("dynamic-input-item","\n margin-bottom: 10px;\n display: flex;\n flex-wrap: nowrap;\n ",[Us("dynamic-input-preset-input",{flex:1,alignItems:"center"}),Us("dynamic-input-preset-pair","\n flex: 1;\n display: flex;\n align-items: center;\n ",[Us("dynamic-input-pair-input",[Ls("&:first-child",{"margin-right":"12px"})])]),zs("action","\n align-self: flex-start;\n display: flex;\n justify-content: flex-end;\n flex-shrink: 0;\n flex-grow: 0;\n margin: var(--action-margin);\n ",[Ns("icon",{cursor:"pointer"})]),Ls("&:last-child",{marginBottom:0})]),Us("form-item","\n padding-top: 0 !important;\n margin-right: 0 !important;\n ",[Us("form-item-blank",{paddingTop:"0 !important"})])]),gM=new WeakMap,vM=Dn({name:"DynamicInput",props:Object.assign(Object.assign({},sf.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),setup(e,{slots:t}){const{mergedComponentPropsRef:n,mergedClsPrefixRef:r,mergedRtlRef:i,inlineThemeDisabled:o}=cf(),a=rr(Ou,null),s=bt(e.defaultValue),l=xl(Tt(e,"value"),s),c=sf("DynamicInput","-dynamic-input",mM,hM,e,r),u=eo((()=>{const{value:t}=l;if(Array.isArray(t)){const{max:n}=e;return void 0!==n&&t.length>=n}return!1})),d=eo((()=>{const{value:t}=l;return!Array.isArray(t)||t.length<=e.min})),h=eo((()=>{var e,t;return null===(t=null===(e=null==n?void 0:n.value)||void 0===e?void 0:e.DynamicInput)||void 0===t?void 0:t.buttonSize}));function p(t){const{onInput:n,"onUpdate:value":r,onUpdateValue:i}=e;n&&Ka(n,t),r&&Ka(r,t),i&&Ka(i,t),s.value=t}function A(n){const{value:r}=l,{onCreate:i}=e,o=Array.from(null!=r?r:[]);if(i)o.splice(n+1,0,i(n+1)),p(o);else if(t.default)o.splice(n+1,0,null),p(o);else switch(e.preset){case"input":o.splice(n+1,0,""),p(o);break;case"pair":o.splice(n+1,0,{key:"",value:""}),p(o)}}function f(e,t,n){if(t<0||n<0||t>=e.length||n>=e.length)return;if(t===n)return;const r=e[t];e[t]=e[n],e[n]=r}nr(pM,{mergedThemeRef:c,keyPlaceholderRef:Tt(e,"keyPlaceholder"),valuePlaceholderRef:Tt(e,"valuePlaceholder"),placeholderRef:Tt(e,"placeholder")});const m=Iv("DynamicInput",i,r),g=eo((()=>{const{self:{actionMargin:e,actionMarginRtl:t}}=c.value;return{"--action-margin":e,"--action-margin-rtl":t}})),v=o?Fv("dynamic-input",void 0,g,e):void 0;return{locale:Tv("DynamicInput").localeRef,rtlEnabled:m,buttonSize:h,mergedClsPrefix:r,NFormItem:a,uncontrolledValue:s,mergedValue:l,insertionDisabled:u,removeDisabled:d,handleCreateClick:function(){A(-1)},ensureKey:function(e,t){if(null==e)return t;if("object"!=typeof e)return t;const n=dt(e)?ht(e):e;let r=gM.get(n);return void 0===r&&gM.set(n,r=Ha()),r},handleValueChange:function(e,t){const{value:n}=l,r=Array.from(null!=n?n:[]),i=r[e];if(r[e]=t,i&&t&&"object"==typeof i&&"object"==typeof t){const e=dt(i)?ht(i):i,n=dt(t)?ht(t):t,r=gM.get(e);void 0!==r&&gM.set(n,r)}p(r)},remove:function(t){const{value:n}=l;if(!Array.isArray(n))return;const{min:r}=e;if(n.length<=r)return;const{onRemove:i}=e;i&&i(t);const o=Array.from(n);o.splice(t,1),p(o)},move:function(e,t){const{value:n}=l;if(!Array.isArray(n))return;const r=Array.from(n);"up"===e&&f(r,t,t-1),"down"===e&&f(r,t,t+1),p(r)},createItem:A,mergedTheme:c,cssVars:o?void 0:g,themeClass:null==v?void 0:v.themeClass,onRender:null==v?void 0:v.onRender}},render(){const{$slots:e,itemClass:t,buttonSize:n,mergedClsPrefix:r,mergedValue:i,locale:o,mergedTheme:a,keyField:s,itemStyle:l,preset:c,showSortButton:u,NFormItem:d,ensureKey:h,handleValueChange:p,remove:A,createItem:f,move:m,onRender:g,disabled:v}=this;return null==g||g(),to("div",{class:[`${r}-dynamic-input`,this.rtlEnabled&&`${r}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},Array.isArray(i)&&0!==i.length?i.map(((o,g)=>to("div",{key:s?o[s]:h(o,g),"data-key":s?o[s]:h(o,g),class:[`${r}-dynamic-input-item`,t],style:l},is(e.default,{value:i[g],index:g},(()=>["input"===c?to(AM,{disabled:v,clsPrefix:r,value:i[g],parentPath:d?d.path.value:void 0,path:(null==d?void 0:d.path.value)?`${d.path.value}[${g}]`:void 0,onUpdateValue:e=>{p(g,e)}}):"pair"===c?to(fM,{disabled:v,clsPrefix:r,value:i[g],parentPath:d?d.path.value:void 0,path:(null==d?void 0:d.path.value)?`${d.path.value}[${g}]`:void 0,onUpdateValue:e=>{p(g,e)}}):null])),is(e.action,{value:i[g],index:g,create:f,remove:A,move:m},(()=>[to("div",{class:`${r}-dynamic-input-item__action`},to(Fx,{size:n},{default:()=>[to(Bx,{disabled:this.removeDisabled||v,theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,circle:!0,onClick:()=>{A(g)}},{icon:()=>to(py,{clsPrefix:r},{default:()=>to(ey,null)})}),to(Bx,{disabled:this.insertionDisabled||v,circle:!0,theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,onClick:()=>{f(g)}},{icon:()=>to(py,{clsPrefix:r},{default:()=>to(kv,null)})}),u?to(Bx,{disabled:0===g||v,circle:!0,theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,onClick:()=>{m("up",g)}},{icon:()=>to(py,{clsPrefix:r},{default:()=>to(Lv,null)})}):null,u?to(Bx,{disabled:g===i.length-1||v,circle:!0,theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,onClick:()=>{m("down",g)}},{icon:()=>to(py,{clsPrefix:r},{default:()=>to(Ov,null)})}):null]}))]))))):to(Bx,Object.assign({block:!0,ghost:!0,dashed:!0,size:n},this.createButtonProps,{disabled:this.insertionDisabled||v,theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>rs(e["create-button-default"],(()=>[o.create])),icon:()=>rs(e["create-button-icon"],(()=>[to(py,{clsPrefix:r},{default:()=>to(kv,null)})]))}))}}),yM={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},bM={name:"Space",self:()=>yM};let wM;const xM=()=>{if(!Ks)return!0;if(void 0===wM){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e);const t=1===e.scrollHeight;return document.body.removeChild(e),wM=t}return wM},CM=Dn({name:"Space",props:Object.assign(Object.assign({},sf.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemClass:String,itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=cf(e),r=sf("Space","-space",void 0,bM,e,t),i=Iv("Space",n,t);return{useGap:xM(),rtlEnabled:i,mergedClsPrefix:t,margin:eo((()=>{const{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};const{self:{[Gs("gap",t)]:n}}=r.value,{row:i,col:o}=ba(n);return{horizontal:ga(o),vertical:ga(i)}}))}},render(){const{vertical:e,reverse:t,align:n,inline:r,justify:i,itemClass:o,itemStyle:a,margin:s,wrap:l,mergedClsPrefix:c,rtlEnabled:u,useGap:d,wrapItem:h,internalUseGap:p}=this,A=qa(Va(this),!1);if(!A.length)return null;const f=`${s.horizontal}px`,m=s.horizontal/2+"px",g=`${s.vertical}px`,v=s.vertical/2+"px",y=A.length-1,b=i.startsWith("space-");return to("div",{role:"none",class:[`${c}-space`,u&&`${c}-space--rtl`],style:{display:r?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:["start","end"].includes(i)?"flex-"+i:i,flexWrap:!l||e?"nowrap":"wrap",marginTop:d||e?"":`-${v}`,marginBottom:d||e?"":`-${v}`,alignItems:n,gap:d?`${s.vertical}px ${s.horizontal}px`:""}},h||!d&&!p?A.map(((t,n)=>t.type===pi?t:to("div",{role:"none",class:o,style:[a,{maxWidth:"100%"},d?"":e?{marginBottom:n!==y?g:""}:u?{marginLeft:b?"space-between"===i&&n===y?"":m:n!==y?f:"",marginRight:b?"space-between"===i&&0===n?"":m:"",paddingTop:v,paddingBottom:v}:{marginRight:b?"space-between"===i&&n===y?"":m:n!==y?f:"",marginLeft:b?"space-between"===i&&0===n?"":m:"",paddingTop:v,paddingBottom:v}]},t))):A)}}),SM={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},BM={name:"Flex",self:()=>SM},_M=Dn({name:"Flex",props:Object.assign(Object.assign({},sf.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=cf(e),r=sf("Flex","-flex",void 0,BM,e,t);return{rtlEnabled:Iv("Flex",n,t),mergedClsPrefix:t,margin:eo((()=>{const{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};const{self:{[Gs("gap",t)]:n}}=r.value,{row:i,col:o}=ba(n);return{horizontal:ga(o),vertical:ga(i)}}))}},render(){const{vertical:e,reverse:t,align:n,inline:r,justify:i,margin:o,wrap:a,mergedClsPrefix:s,rtlEnabled:l}=this,c=qa(Va(this),!1);return c.length?to("div",{role:"none",class:[`${s}-flex`,l&&`${s}-flex--rtl`],style:{display:r?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:i,flexWrap:!a||e?"nowrap":"wrap",alignItems:n,gap:`${o.vertical}px ${o.horizontal}px`}},c):null}}),EM={feedbackPadding:"4px 0 0 2px",feedbackHeightSmall:"24px",feedbackHeightMedium:"24px",feedbackHeightLarge:"26px",feedbackFontSizeSmall:"13px",feedbackFontSizeMedium:"14px",feedbackFontSizeLarge:"14px",labelFontSizeLeftSmall:"14px",labelFontSizeLeftMedium:"14px",labelFontSizeLeftLarge:"15px",labelFontSizeTopSmall:"13px",labelFontSizeTopMedium:"14px",labelFontSizeTopLarge:"14px",labelHeightSmall:"24px",labelHeightMedium:"26px",labelHeightLarge:"28px",labelPaddingVertical:"0 0 6px 2px",labelPaddingHorizontal:"0 12px 0 0",labelTextAlignVertical:"left",labelTextAlignHorizontal:"right",labelFontWeight:"400"},MM={name:"Form",common:Lb,self:e=>{const{heightSmall:t,heightMedium:n,heightLarge:r,textColor1:i,errorColor:o,warningColor:a,lineHeight:s,textColor3:l}=e;return Object.assign(Object.assign({},EM),{blankHeightSmall:t,blankHeightMedium:n,blankHeightLarge:r,lineHeight:s,labelTextColor:i,asteriskColor:o,feedbackTextColorError:o,feedbackTextColorWarning:a,feedbackTextColor:l})}},PM=Us("form",[Ns("inline","\n width: 100%;\n display: inline-flex;\n align-items: flex-start;\n align-content: space-around;\n ",[Us("form-item",{width:"auto",marginRight:"18px"},[Ls("&:last-child",{marginRight:0})])])]),TM="n-form",DM="n-form-item-insts";var FM=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(g9){o(g9)}}function s(e){try{l(r.throw(e))}catch(g9){o(g9)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const IM=Object.assign(Object.assign({},sf.props),{inline:Boolean,labelWidth:[Number,String],labelAlign:String,labelPlacement:{type:String,default:"top"},model:{type:Object,default:()=>{}},rules:Object,disabled:Boolean,size:String,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:!0},onSubmit:{type:Function,default:e=>{e.preventDefault()}},showLabel:{type:Boolean,default:void 0},validateMessages:Object}),kM=Dn({name:"Form",props:IM,setup(e){const{mergedClsPrefixRef:t}=cf(e);sf("Form","-form",PM,MM,e,t);const n={},r=bt(void 0);nr(TM,{props:e,maxChildLabelWidthRef:r,deriveMaxChildLabelWidth:e=>{const t=r.value;(void 0===t||e>=t)&&(r.value=e)}}),nr(DM,{formItems:n});const i={validate:function(e){return FM(this,arguments,void 0,(function*(e,t=()=>!0){return yield new Promise(((r,i)=>{const o=[];for(const e of Ya(n)){const r=n[e];for(const e of r)e.path&&o.push(e.internalValidate(null,t))}Promise.all(o).then((t=>{const n=t.some((e=>!e.valid)),o=[],a=[];t.forEach((e=>{var t,n;(null===(t=e.errors)||void 0===t?void 0:t.length)&&o.push(e.errors),(null===(n=e.warnings)||void 0===n?void 0:n.length)&&a.push(e.warnings)})),e&&e(o.length?o:void 0,{warnings:a.length?a:void 0}),n?i(o.length?o:void 0):r({warnings:a.length?a:void 0})}))}))}))},restoreValidation:function(){for(const e of Ya(n)){const t=n[e];for(const e of t)e.restoreValidation()}}};return Object.assign(i,{mergedClsPrefix:t})},render(){const{mergedClsPrefix:e}=this;return to("form",{class:[`${e}-form`,this.inline&&`${e}-form--inline`],onSubmit:this.onSubmit},this.$slots)}});function OM(){return OM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OM.apply(this,arguments)}function LM(e){return(LM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RM(e,t){return(RM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UM(e,t,n){return(UM=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(g9){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&RM(i,n.prototype),i}).apply(null,arguments)}function zM(e){var t="function"==typeof Map?new Map:void 0;return zM=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return UM(e,arguments,LM(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),RM(r,e)},zM(e)}var NM=/%[sdj%]/g,jM=function(){};function HM(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function QM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o=n.length;return"function"==typeof e?e.apply(null,n):"string"==typeof e?e.replace(NM,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}break;default:return e}})):e}function VM(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function WM(e,t,n){var r=0,i=e.length;!function o(a){if(a&&a.length)n(a);else{var s=r;r+=1,s<i?t(e[s],o):n([])}}([])}var GM=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,RM(t,n),r}(zM(Error));function qM(e,t,n,r,i){if(t.first){var o=new Promise((function(t,o){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}(e);WM(a,n,(function(e){return r(e),e.length?o(new GM(e,HM(e))):t(i)}))}));return o.catch((function(e){return e})),o}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,c=0,u=[],d=new Promise((function(t,o){var d=function(e){if(u.push.apply(u,e),++c===l)return r(u),u.length?o(new GM(u,HM(u))):t(i)};s.length||(r(u),t(i)),s.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?WM(r,n,d):function(e,t,n){var r=[],i=0,o=e.length;function a(e){r.push.apply(r,e||[]),++i===o&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,d)}))}));return d.catch((function(e){return e})),d}function KM(e,t){return function(n){var r,i;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(null==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(i=n)&&void 0!==i.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"==typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function YM(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"==typeof r&&"object"==typeof e[n]?e[n]=OM({},e[n],r):e[n]=r}return e}var XM,$M=function(e,t,n,r,i,o){!e.required||n.hasOwnProperty(e.field)&&!VM(t,o||e.type)||r.push(QM(i.messages.required,e.fullField))},JM=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,ZM=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,eP={integer:function(e){return eP.number(e)&&parseInt(e,10)===e},float:function(e){return eP.number(e)&&!eP.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(g9){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"==typeof e&&!eP.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&e.length<=320&&!!e.match(JM)},url:function(e){return"string"==typeof e&&e.length<=2048&&!!e.match(function(){if(XM)return XM;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=("\n(?:\n(?:"+r+":){7}(?:"+r+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+r+":){6}(?:"+n+"|:"+r+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+r+":){5}(?::"+n+"|(?::"+r+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+r+"){0,5}:"+n+"|(?::"+r+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),a=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),l=function(e){return e&&e.exact?o:new RegExp("(?:"+t(e)+n+t(e)+")|(?:"+t(e)+i+t(e)+")","g")};l.v4=function(e){return e&&e.exact?a:new RegExp(""+t(e)+n+t(e),"g")},l.v6=function(e){return e&&e.exact?s:new RegExp(""+t(e)+i+t(e),"g")};var c=l.v4().source,u=l.v6().source;return XM=new RegExp("(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|"+c+"|"+u+'|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)',"i")}())},hex:function(e){return"string"==typeof e&&!!e.match(ZM)}},tP="enum",nP={required:$M,whitespace:function(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(QM(i.messages.whitespace,e.fullField))},type:function(e,t,n,r,i){if(e.required&&void 0===t)$M(e,t,n,r,i);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?eP[o](t)||r.push(QM(i.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&r.push(QM(i.messages.types[o],e.fullField,e.type))}},range:function(e,t,n,r,i){var o="number"==typeof e.len,a="number"==typeof e.min,s="number"==typeof e.max,l=t,c=null,u="number"==typeof t,d="string"==typeof t,h=Array.isArray(t);if(u?c="number":d?c="string":h&&(c="array"),!c)return!1;h&&(l=t.length),d&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?l!==e.len&&r.push(QM(i.messages[c].len,e.fullField,e.len)):a&&!s&&l<e.min?r.push(QM(i.messages[c].min,e.fullField,e.min)):s&&!a&&l>e.max?r.push(QM(i.messages[c].max,e.fullField,e.max)):a&&s&&(l<e.min||l>e.max)&&r.push(QM(i.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,i){e[tP]=Array.isArray(e[tP])?e[tP]:[],-1===e[tP].indexOf(t)&&r.push(QM(i.messages[tP],e.fullField,e[tP].join(", ")))},pattern:function(e,t,n,r,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(QM(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(QM(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},rP=function(e,t,n,r,i){var o=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t,o)&&!e.required)return n();nP.required(e,t,r,a,i,o),VM(t,o)||nP.type(e,t,r,a,i)}n(a)},iP={string:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t,"string")&&!e.required)return n();nP.required(e,t,r,o,i,"string"),VM(t,"string")||(nP.type(e,t,r,o,i),nP.range(e,t,r,o,i),nP.pattern(e,t,r,o,i),!0===e.whitespace&&nP.whitespace(e,t,r,o,i))}n(o)},method:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t)&&!e.required)return n();nP.required(e,t,r,o,i),void 0!==t&&nP.type(e,t,r,o,i)}n(o)},number:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),VM(t)&&!e.required)return n();nP.required(e,t,r,o,i),void 0!==t&&(nP.type(e,t,r,o,i),nP.range(e,t,r,o,i))}n(o)},boolean:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t)&&!e.required)return n();nP.required(e,t,r,o,i),void 0!==t&&nP.type(e,t,r,o,i)}n(o)},regexp:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t)&&!e.required)return n();nP.required(e,t,r,o,i),VM(t)||nP.type(e,t,r,o,i)}n(o)},integer:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t)&&!e.required)return n();nP.required(e,t,r,o,i),void 0!==t&&(nP.type(e,t,r,o,i),nP.range(e,t,r,o,i))}n(o)},float:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t)&&!e.required)return n();nP.required(e,t,r,o,i),void 0!==t&&(nP.type(e,t,r,o,i),nP.range(e,t,r,o,i))}n(o)},array:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();nP.required(e,t,r,o,i,"array"),null!=t&&(nP.type(e,t,r,o,i),nP.range(e,t,r,o,i))}n(o)},object:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t)&&!e.required)return n();nP.required(e,t,r,o,i),void 0!==t&&nP.type(e,t,r,o,i)}n(o)},enum:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t)&&!e.required)return n();nP.required(e,t,r,o,i),void 0!==t&&nP.enum(e,t,r,o,i)}n(o)},pattern:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t,"string")&&!e.required)return n();nP.required(e,t,r,o,i),VM(t,"string")||nP.pattern(e,t,r,o,i)}n(o)},date:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t,"date")&&!e.required)return n();var a;if(nP.required(e,t,r,o,i),!VM(t,"date"))a=t instanceof Date?t:new Date(t),nP.type(e,a,r,o,i),a&&nP.range(e,a.getTime(),r,o,i)}n(o)},url:rP,hex:rP,email:rP,required:function(e,t,n,r,i){var o=[],a=Array.isArray(t)?"array":typeof t;nP.required(e,t,r,o,i,a),n(o)},any:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(VM(t)&&!e.required)return n();nP.required(e,t,r,o,i)}n(o)}};function oP(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var aP=oP(),sP=function(){function e(e){this.rules=null,this._messages=aP,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))},t.messages=function(e){return e&&(this._messages=YM(oP(),e)),this._messages},t.validate=function(t,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var o=t,a=n,s=r;if("function"==typeof a&&(s=a,a={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,o),Promise.resolve(o);if(a.messages){var l=this.messages();l===aP&&(l=oP()),YM(l,a.messages),a.messages=l}else a.messages=this.messages();var c={};(a.keys||Object.keys(this.rules)).forEach((function(e){var n=i.rules[e],r=o[e];n.forEach((function(n){var a=n;"function"==typeof a.transform&&(o===t&&(o=OM({},o)),r=o[e]=a.transform(r)),(a="function"==typeof a?{validator:a}:OM({},a)).validator=i.getValidationMethod(a),a.validator&&(a.field=e,a.fullField=a.fullField||e,a.type=i.getType(a),c[e]=c[e]||[],c[e].push({rule:a,value:r,source:o,field:e}))}))}));var u={};return qM(c,a,(function(t,n){var r,i=t.rule,s=!("object"!==i.type&&"array"!==i.type||"object"!=typeof i.fields&&"object"!=typeof i.defaultField);function l(e,t){return OM({},t,{fullField:i.fullField+"."+e,fullFields:i.fullFields?[].concat(i.fullFields,[e]):[e]})}function c(r){void 0===r&&(r=[]);var c=Array.isArray(r)?r:[r];!a.suppressWarning&&c.length&&e.warning("async-validator:",c),c.length&&void 0!==i.message&&(c=[].concat(i.message));var d=c.map(KM(i,o));if(a.first&&d.length)return u[i.field]=1,n(d);if(s){if(i.required&&!t.value)return void 0!==i.message?d=[].concat(i.message).map(KM(i,o)):a.error&&(d=[a.error(i,QM(a.messages.required,i.field))]),n(d);var h={};i.defaultField&&Object.keys(t.value).map((function(e){h[e]=i.defaultField})),h=OM({},h,t.rule.fields);var p={};Object.keys(h).forEach((function(e){var t=h[e],n=Array.isArray(t)?t:[t];p[e]=n.map(l.bind(null,e))}));var A=new e(p);A.messages(a.messages),t.rule.options&&(t.rule.options.messages=a.messages,t.rule.options.error=a.error),A.validate(t.value,t.rule.options||a,(function(e){var t=[];d&&d.length&&t.push.apply(t,d),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(d)}if(s=s&&(i.required||!i.required&&t.value),i.field=t.field,i.asyncValidator)r=i.asyncValidator(i,t.value,c,t.source,a);else if(i.validator){try{r=i.validator(i,t.value,c,t.source,a)}catch(d){console.error,a.suppressValidatorError||setTimeout((function(){throw d}),0),c(d.message)}!0===r?c():!1===r?c("function"==typeof i.message?i.message(i.fullField||i.field):i.message||(i.fullField||i.field)+" fails"):r instanceof Array?c(r):r instanceof Error&&c(r.message)}r&&r.then&&r.then((function(){return c()}),(function(e){return c(e)}))}),(function(e){!function(e){for(var t,n,r=[],i={},a=0;a<e.length;a++)t=e[a],n=void 0,Array.isArray(t)?r=(n=r).concat.apply(n,t):r.push(t);r.length?(i=HM(r),s(r,i)):s(null,o)}(e)}),o)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!iP.hasOwnProperty(e.type))throw new Error(QM("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?iP.required:iP[this.getType(e)]||void 0},e}();sP.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");iP[e]=t},sP.warning=jM,sP.messages=aP,sP.validators=iP;const{cubicBezierEaseInOut:lP}=ZA;const cP=Us("form-item","\n display: grid;\n line-height: var(--n-line-height);\n",[Us("form-item-label","\n grid-area: label;\n align-items: center;\n line-height: 1.25;\n text-align: var(--n-label-text-align);\n font-size: var(--n-label-font-size);\n min-height: var(--n-label-height);\n padding: var(--n-label-padding);\n color: var(--n-label-text-color);\n transition: color .3s var(--n-bezier);\n box-sizing: border-box;\n font-weight: var(--n-label-font-weight);\n ",[zs("asterisk","\n white-space: nowrap;\n user-select: none;\n -webkit-user-select: none;\n color: var(--n-asterisk-color);\n transition: color .3s var(--n-bezier);\n "),zs("asterisk-placeholder","\n grid-area: mark;\n user-select: none;\n -webkit-user-select: none;\n visibility: hidden; \n ")]),Us("form-item-blank","\n grid-area: blank;\n min-height: var(--n-blank-height);\n "),Ns("auto-label-width",[Us("form-item-label","white-space: nowrap;")]),Ns("left-labelled",'\n grid-template-areas:\n "label blank"\n "label feedback";\n grid-template-columns: auto minmax(0, 1fr);\n grid-template-rows: auto 1fr;\n align-items: flex-start;\n ',[Us("form-item-label","\n display: grid;\n grid-template-columns: 1fr auto;\n min-height: var(--n-blank-height);\n height: auto;\n box-sizing: border-box;\n flex-shrink: 0;\n flex-grow: 0;\n ",[Ns("reverse-columns-space","\n grid-template-columns: auto 1fr;\n "),Ns("left-mark",'\n grid-template-areas:\n "mark text"\n ". text";\n '),Ns("right-mark",'\n grid-template-areas: \n "text mark"\n "text .";\n '),Ns("right-hanging-mark",'\n grid-template-areas: \n "text mark"\n "text .";\n '),zs("text","\n grid-area: text; \n "),zs("asterisk","\n grid-area: mark; \n align-self: end;\n ")])]),Ns("top-labelled",'\n grid-template-areas:\n "label"\n "blank"\n "feedback";\n grid-template-rows: minmax(var(--n-label-height), auto) 1fr;\n grid-template-columns: minmax(0, 100%);\n ',[Ns("no-label",'\n grid-template-areas:\n "blank"\n "feedback";\n grid-template-rows: 1fr;\n '),Us("form-item-label","\n display: flex;\n align-items: flex-start;\n justify-content: var(--n-label-text-align);\n ")]),Us("form-item-blank","\n box-sizing: border-box;\n display: flex;\n align-items: center;\n position: relative;\n "),Us("form-item-feedback-wrapper","\n grid-area: feedback;\n box-sizing: border-box;\n min-height: var(--n-feedback-height);\n font-size: var(--n-feedback-font-size);\n line-height: 1.25;\n transform-origin: top left;\n ",[Ls("&:not(:empty)","\n padding: var(--n-feedback-padding);\n "),Us("form-item-feedback",{transition:"color .3s var(--n-bezier)",color:"var(--n-feedback-text-color)"},[Ns("warning",{color:"var(--n-feedback-text-color-warning)"}),Ns("error",{color:"var(--n-feedback-text-color-error)"}),function({name:e="fade-down",fromOffset:t="-4px",enterDuration:n=".3s",leaveDuration:r=".3s",enterCubicBezier:i=lP,leaveCubicBezier:o=lP}={}){return[Ls(`&.${e}-transition-enter-from, &.${e}-transition-leave-to`,{opacity:0,transform:`translateY(${t})`}),Ls(`&.${e}-transition-enter-to, &.${e}-transition-leave-from`,{opacity:1,transform:"translateY(0)"}),Ls(`&.${e}-transition-leave-active`,{transition:`opacity ${r} ${o}, transform ${r} ${o}`}),Ls(`&.${e}-transition-enter-active`,{transition:`opacity ${n} ${i}, transform ${n} ${i}`})]}({fromOffset:"-3px",enterDuration:".3s",leaveDuration:".2s"})])])]);var uP=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(g9){o(g9)}}function s(e){try{l(r.throw(e))}catch(g9){o(g9)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const dP=Object.assign(Object.assign({},sf.props),{label:String,labelWidth:[Number,String],labelStyle:[String,Object],labelAlign:String,labelPlacement:String,path:String,first:Boolean,rulePath:String,required:Boolean,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:void 0},rule:[Object,Array],size:String,ignorePathChange:Boolean,validationStatus:String,feedback:String,feedbackClass:String,feedbackStyle:[String,Object],showLabel:{type:Boolean,default:void 0},labelProps:Object}),hP=Ya(dP);function pP(e,t){return(...n)=>{try{const r=e(...n);return!(!t&&("boolean"==typeof r||r instanceof Error||Array.isArray(r))||(null==r?void 0:r.then))||r}catch(r){return}}}const AP=Dn({name:"FormItem",props:dP,setup(e){$s(DM,"formItems",Tt(e,"path"));const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=rr(TM,null),i=function(e){const t=rr(TM,null);return{mergedSize:eo((()=>void 0!==e.size?e.size:void 0!==(null==t?void 0:t.props.size)?t.props.size:"medium"))}}(e),o=function(e){const t=rr(TM,null),n=eo((()=>{const{labelPlacement:n}=e;return void 0!==n?n:(null==t?void 0:t.props.labelPlacement)?t.props.labelPlacement:"top"})),r=eo((()=>"left"===n.value&&("auto"===e.labelWidth||"auto"===(null==t?void 0:t.props.labelWidth)))),i=eo((()=>{if("top"===n.value)return;const{labelWidth:i}=e;if(void 0!==i&&"auto"!==i)return ds(i);if(r.value){const e=null==t?void 0:t.maxChildLabelWidthRef.value;return void 0!==e?ds(e):void 0}return void 0!==(null==t?void 0:t.props.labelWidth)?ds(t.props.labelWidth):void 0})),o=eo((()=>{const{labelAlign:n}=e;return n||((null==t?void 0:t.props.labelAlign)?t.props.labelAlign:void 0)})),a=eo((()=>{var t;return[null===(t=e.labelProps)||void 0===t?void 0:t.style,e.labelStyle,{width:i.value}]})),s=eo((()=>{const{showRequireMark:n}=e;return void 0!==n?n:null==t?void 0:t.props.showRequireMark})),l=eo((()=>{const{requireMarkPlacement:n}=e;return void 0!==n?n:(null==t?void 0:t.props.requireMarkPlacement)||"right"})),c=bt(!1),u=bt(!1),d=eo((()=>{const{validationStatus:t}=e;return void 0!==t?t:c.value?"error":u.value?"warning":void 0})),h=eo((()=>{const{showFeedback:n}=e;return void 0!==n?n:void 0===(null==t?void 0:t.props.showFeedback)||t.props.showFeedback})),p=eo((()=>{const{showLabel:n}=e;return void 0!==n?n:void 0===(null==t?void 0:t.props.showLabel)||t.props.showLabel}));return{validationErrored:c,validationWarned:u,mergedLabelStyle:a,mergedLabelPlacement:n,mergedLabelAlign:o,mergedShowRequireMark:s,mergedRequireMarkPlacement:l,mergedValidationStatus:d,mergedShowFeedback:h,mergedShowLabel:p,isAutoLabelWidth:r}}(e),{validationErrored:a,validationWarned:s}=o,{mergedRequired:l,mergedRules:c}=function(e){const t=rr(TM,null),n=eo((()=>{const{rulePath:t}=e;if(void 0!==t)return t;const{path:n}=e;return void 0!==n?n:void 0})),r=eo((()=>{const r=[],{rule:i}=e;if(void 0!==i&&(Array.isArray(i)?r.push(...i):r.push(i)),t){const{rules:e}=t.props,{value:i}=n;if(void 0!==e&&void 0!==i){const t=Jh(e,i);void 0!==t&&(Array.isArray(t)?r.push(...t):r.push(t))}}return r})),i=eo((()=>r.value.some((e=>e.required)))),o=eo((()=>i.value||e.required));return{mergedRules:r,mergedRequired:o}}(e),{mergedSize:u}=i,{mergedLabelPlacement:d,mergedLabelAlign:h,mergedRequireMarkPlacement:p}=o,A=bt([]),f=bt(Ha()),m=r?Tt(r.props,"disabled"):bt(!1),g=sf("Form","-form-item",cP,MM,e,t);function v(){A.value=[],a.value=!1,s.value=!1,e.feedback&&(f.value=Ha())}Ir(Tt(e,"path"),(()=>{e.ignorePathChange||v()}));const y=(...t)=>uP(this,[...t],void 0,(function*(t=null,n=()=>!0,i={suppressWarning:!0}){const{path:o}=e;i?i.first||(i.first=e.first):i={};const{value:l}=c,u=r?Jh(r.props.model,o||""):void 0,d={},h={},p=(t?l.filter((e=>Array.isArray(e.trigger)?e.trigger.includes(t):e.trigger===t)):l).filter(n).map(((e,t)=>{const n=Object.assign({},e);if(n.validator&&(n.validator=pP(n.validator,!1)),n.asyncValidator&&(n.asyncValidator=pP(n.asyncValidator,!0)),n.renderMessage){const e=`__renderMessage__${t}`;h[e]=n.message,n.message=e,d[e]=n.renderMessage}return n})),f=p.filter((e=>"warning"!==e.level)),m=p.filter((e=>"warning"===e.level)),g=null!=o?o:"__n_no_path__",y=new sP({[g]:f}),b=new sP({[g]:m}),{validateMessages:w}=(null==r?void 0:r.props)||{};w&&(y.messages(w),b.messages(w));const x=e=>{A.value=e.map((e=>{const t=(null==e?void 0:e.message)||"";return{key:t,render:()=>t.startsWith("__renderMessage__")?d[t]():t}})),e.forEach((e=>{var t;(null===(t=e.message)||void 0===t?void 0:t.startsWith("__renderMessage__"))&&(e.message=h[e.message])}))},C={valid:!0,errors:void 0,warnings:void 0};if(f.length){const e=yield new Promise((e=>{y.validate({[g]:u},i,e)}));(null==e?void 0:e.length)&&(a.value=!0,C.valid=!1,C.errors=e,x(e))}if(m.length&&!C.errors){const e=yield new Promise((e=>{b.validate({[g]:u},i,e)}));(null==e?void 0:e.length)&&(x(e),s.value=!0,C.warnings=e)}return f.length+m.length>0&&!C.errors&&!C.warnings&&v(),C}));nr(Ou,{path:Tt(e,"path"),disabled:m,mergedSize:i.mergedSize,mergedValidationStatus:o.mergedValidationStatus,restoreValidation:v,handleContentBlur:function(){y("blur")},handleContentChange:function(){y("change")},handleContentFocus:function(){y("focus")},handleContentInput:function(){y("input")}});const b={validate:function(e,t){return uP(this,void 0,void 0,(function*(){let n,r,i,o;return"string"==typeof e?(n=e,r=t):null!==e&&"object"==typeof e&&(n=e.trigger,r=e.callback,i=e.shouldRuleBeApplied,o=e.options),yield new Promise(((e,t)=>{y(n,i,o).then((({valid:n,errors:i,warnings:o})=>{n?(r&&r(void 0,{warnings:o}),e({warnings:o})):(r&&r(i,{warnings:o}),t(i))}))}))}))},restoreValidation:v,internalValidate:y},w=bt(null);vn((()=>{if(!o.isAutoLabelWidth.value)return;const e=w.value;if(null!==e){const t=e.style.whiteSpace;e.style.whiteSpace="nowrap",e.style.width="",null==r||r.deriveMaxChildLabelWidth(Number(getComputedStyle(e).width.slice(0,-2))),e.style.whiteSpace=t}}));const x=eo((()=>{var e;const{value:t}=u,{value:n}=d,r="top"===n?"vertical":"horizontal",{common:{cubicBezierEaseInOut:i},self:{labelTextColor:o,asteriskColor:a,lineHeight:s,feedbackTextColor:l,feedbackTextColorWarning:c,feedbackTextColorError:p,feedbackPadding:A,labelFontWeight:f,[Gs("labelHeight",t)]:m,[Gs("blankHeight",t)]:v,[Gs("feedbackFontSize",t)]:y,[Gs("feedbackHeight",t)]:b,[Gs("labelPadding",r)]:w,[Gs("labelTextAlign",r)]:x,[Gs(Gs("labelFontSize",n),t)]:C}}=g.value;let S=null!==(e=h.value)&&void 0!==e?e:x;"top"===n&&(S="right"===S?"flex-end":"flex-start");return{"--n-bezier":i,"--n-line-height":s,"--n-blank-height":v,"--n-label-font-size":C,"--n-label-text-align":S,"--n-label-height":m,"--n-label-padding":w,"--n-label-font-weight":f,"--n-asterisk-color":a,"--n-label-text-color":o,"--n-feedback-padding":A,"--n-feedback-font-size":y,"--n-feedback-height":b,"--n-feedback-text-color":l,"--n-feedback-text-color-warning":c,"--n-feedback-text-color-error":p}})),C=n?Fv("form-item",eo((()=>{var e;return`${u.value[0]}${d.value[0]}${(null===(e=h.value)||void 0===e?void 0:e[0])||""}`})),x,e):void 0,S=eo((()=>"left"===d.value&&"left"===p.value&&"left"===h.value));return Object.assign(Object.assign(Object.assign(Object.assign({labelElementRef:w,mergedClsPrefix:t,mergedRequired:l,feedbackId:f,renderExplains:A,reverseColSpace:S},o),i),b),{cssVars:n?void 0:x,themeClass:null==C?void 0:C.themeClass,onRender:null==C?void 0:C.onRender})},render(){const{$slots:e,mergedClsPrefix:t,mergedShowLabel:n,mergedShowRequireMark:r,mergedRequireMarkPlacement:i,onRender:o}=this,a=void 0!==r?r:this.mergedRequired;null==o||o();return to("div",{class:[`${t}-form-item`,this.themeClass,`${t}-form-item--${this.mergedSize}-size`,`${t}-form-item--${this.mergedLabelPlacement}-labelled`,this.isAutoLabelWidth&&`${t}-form-item--auto-label-width`,!n&&`${t}-form-item--no-label`],style:this.cssVars},n&&(()=>{const e=this.$slots.label?this.$slots.label():this.label;if(!e)return null;const n=to("span",{class:`${t}-form-item-label__text`},e),r=a?to("span",{class:`${t}-form-item-label__asterisk`},"left"!==i?" *":"* "):"right-hanging"===i&&to("span",{class:`${t}-form-item-label__asterisk-placeholder`}," *"),{labelProps:o}=this;return to("label",Object.assign({},o,{class:[null==o?void 0:o.class,`${t}-form-item-label`,`${t}-form-item-label--${i}-mark`,this.reverseColSpace&&`${t}-form-item-label--reverse-columns-space`],style:this.mergedLabelStyle,ref:"labelElementRef"}),"left"===i?[r,n]:[n,r])})(),to("div",{class:[`${t}-form-item-blank`,this.mergedValidationStatus&&`${t}-form-item-blank--${this.mergedValidationStatus}`]},e),this.mergedShowFeedback?to("div",{key:this.feedbackId,style:this.feedbackStyle,class:[`${t}-form-item-feedback-wrapper`,this.feedbackClass]},to(co,{name:"fade-down-transition",mode:"out-in"},{default:()=>{const{mergedValidationStatus:n}=this;return os(e.feedback,(e=>{var r;const{feedback:i}=this,o=e||i?to("div",{key:"__feedback__",class:`${t}-form-item-feedback__line`},e||i):this.renderExplains.length?null===(r=this.renderExplains)||void 0===r?void 0:r.map((({key:e,render:n})=>to("div",{key:e,class:`${t}-form-item-feedback__line`},n()))):null;return o?to("div","warning"===n?{key:"controlled-warning",class:`${t}-form-item-feedback ${t}-form-item-feedback--warning`}:"error"===n?{key:"controlled-error",class:`${t}-form-item-feedback ${t}-form-item-feedback--error`}:"success"===n?{key:"controlled-success",class:`${t}-form-item-feedback ${t}-form-item-feedback--success`}:{key:"controlled-default",class:`${t}-form-item-feedback`},o):null}))}})):null)}}),fP=Qa(24,null).map(((e,t)=>{const n=t+1,r=`calc(100% / 24 * ${n})`;return[Ns(`${n}-span`,{width:r}),Ns(`${n}-offset`,{marginLeft:r}),Ns(`${n}-push`,{left:r}),Ns(`${n}-pull`,{right:r})]})),mP=Ls([Us("row",{width:"100%",display:"flex",flexWrap:"wrap"}),Us("col",{verticalAlign:"top",boxSizing:"border-box",display:"inline-block",position:"relative",zIndex:"auto"},[zs("box",{position:"relative",zIndex:"auto",width:"100%",height:"100%"}),fP])]),gP="n-row",vP={gutter:{type:[Array,Number,String],default:0},alignItems:String,justifyContent:String},yP=Ya(vP),bP=Dn({name:"Row",props:vP,setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=cf(e);Dv("-legacy-grid",mP,t);const r=Iv("Row",n,t),i=Zs((()=>{const{gutter:t}=e;return Array.isArray(t)&&t[1]||0})),o=Zs((()=>{const{gutter:t}=e;return Array.isArray(t)?t[0]:Number(t)}));return nr(gP,{mergedClsPrefixRef:t,gutterRef:Tt(e,"gutter"),verticalGutterRef:i,horizontalGutterRef:o}),{mergedClsPrefix:t,rtlEnabled:r,styleMargin:Zs((()=>`-${ds(i.value,{c:.5})} -${ds(o.value,{c:.5})}`)),styleWidth:Zs((()=>`calc(100% + ${ds(o.value)})`))}},render(){return to("div",{class:[`${this.mergedClsPrefix}-row`,this.rtlEnabled&&`${this.mergedClsPrefix}-row--rtl`],style:{margin:this.styleMargin,width:this.styleWidth,alignItems:this.alignItems,justifyContent:this.justifyContent}},this.$slots)}}),wP={span:{type:[String,Number],default:1},push:{type:[String,Number],default:0},pull:{type:[String,Number],default:0},offset:{type:[String,Number],default:0}},xP=Ya(wP),CP=Dn({name:"Col",props:wP,setup(e){const t=rr(gP,null);return t||$a("col","`n-col` must be placed inside `n-row`."),{mergedClsPrefix:t.mergedClsPrefixRef,gutter:t.gutterRef,stylePadding:eo((()=>`${ds(t.verticalGutterRef.value,{c:.5})} ${ds(t.horizontalGutterRef.value,{c:.5})}`)),mergedPush:eo((()=>Number(e.push)-Number(e.pull)))}},render(){const{$slots:e,span:t,mergedPush:n,offset:r,stylePadding:i,gutter:o,mergedClsPrefix:a}=this;return to("div",{class:[`${a}-col`,{[`${a}-col--${t}-span`]:!0,[`${a}-col--${n}-push`]:n>0,[`${a}-col--${-n}-pull`]:n<0,[`${a}-col--${r}-offset`]:r}],style:{padding:i}},o?to("div",null,e):e)}}),SP=Object.assign(Object.assign({},wP),dP),BP=Ya(SP),_P=Dn({name:"FormItemCol",props:SP,setup(){const e=bt(null);return{formItemInstRef:e,validate:(...t)=>{const{value:n}=e;if(n)return n.validate(...t)},restoreValidation:()=>{const{value:t}=e;t&&t.restoreValidation()}}},render(){return to(CP,Wa(this.$props,xP),{default:()=>{const e=Wa(this.$props,hP);return to(AP,Object.assign({ref:"formItemInstRef"},e),this.$slots)}})}}),EP=Dn({name:"FormItemRow",props:Object.assign(Object.assign({},vP),SP),setup(){const e=bt(null);return{formItemColInstRef:e,validate:(...t)=>{const{value:n}=e;if(n)return n.validate(...t)},restoreValidation:()=>{const{value:t}=e;t&&t.restoreValidation()}}},render(){return to(bP,Wa(this.$props,yP),{default:()=>{const e=Wa(this.$props,BP);return to(_P,Object.assign(Object.assign({ref:"formItemColInstRef"},e),{span:24}),this.$slots)}})}}),MP={margin:"0 0 8px 0",padding:"10px 20px",maxWidth:"720px",minWidth:"420px",iconMargin:"0 10px 0 0",closeMargin:"0 0 0 10px",closeSize:"20px",closeIconSize:"16px",iconSize:"20px",fontSize:"14px"},PP={name:"Message",common:Lb,self:e=>{const{textColor2:t,closeIconColor:n,closeIconColorHover:r,closeIconColorPressed:i,infoColor:o,successColor:a,errorColor:s,warningColor:l,popoverColor:c,boxShadow2:u,primaryColor:d,lineHeight:h,borderRadius:p,closeColorHover:A,closeColorPressed:f}=e;return Object.assign(Object.assign({},MP),{closeBorderRadius:p,textColor:t,textColorInfo:t,textColorSuccess:t,textColorError:t,textColorWarning:t,textColorLoading:t,color:c,colorInfo:c,colorSuccess:c,colorError:c,colorWarning:c,colorLoading:c,boxShadow:u,boxShadowInfo:u,boxShadowSuccess:u,boxShadowError:u,boxShadowWarning:u,boxShadowLoading:u,iconColor:t,iconColorInfo:o,iconColorSuccess:a,iconColorWarning:l,iconColorError:s,iconColorLoading:d,closeColorHover:A,closeColorPressed:f,closeIconColor:n,closeIconColorHover:r,closeIconColorPressed:i,closeColorHoverInfo:A,closeColorPressedInfo:f,closeIconColorInfo:n,closeIconColorHoverInfo:r,closeIconColorPressedInfo:i,closeColorHoverSuccess:A,closeColorPressedSuccess:f,closeIconColorSuccess:n,closeIconColorHoverSuccess:r,closeIconColorPressedSuccess:i,closeColorHoverError:A,closeColorPressedError:f,closeIconColorError:n,closeIconColorHoverError:r,closeIconColorPressedError:i,closeColorHoverWarning:A,closeColorPressedWarning:f,closeIconColorWarning:n,closeIconColorHoverWarning:r,closeIconColorPressedWarning:i,closeColorHoverLoading:A,closeColorPressedLoading:f,closeIconColorLoading:n,closeIconColorHoverLoading:r,closeIconColorPressedLoading:i,loadingColor:d,lineHeight:h,borderRadius:p})}},TP={name:"GradientText",common:Lb,self:e=>{const{primaryColor:t,successColor:n,warningColor:r,errorColor:i,infoColor:o,fontWeightStrong:a}=e;return{fontWeight:a,rotate:"252deg",colorStartPrimary:Ua(t,{alpha:.6}),colorEndPrimary:t,colorStartInfo:Ua(o,{alpha:.6}),colorEndInfo:o,colorStartWarning:Ua(r,{alpha:.6}),colorEndWarning:r,colorStartError:Ua(i,{alpha:.6}),colorEndError:i,colorStartSuccess:Ua(n,{alpha:.6}),colorEndSuccess:n}}},DP={name:"Layout",common:Lb,peers:{Scrollbar:Hb},self:e=>{const{baseColor:t,textColor2:n,bodyColor:r,cardColor:i,dividerColor:o,actionColor:a,scrollbarColor:s,scrollbarColorHover:l,invertedColor:c}=e;return{textColor:n,textColorInverted:"#FFF",color:r,colorEmbedded:a,headerColor:i,headerColorInverted:c,footerColor:a,footerColorInverted:c,headerBorderColor:o,headerBorderColorInverted:c,footerBorderColor:o,footerBorderColorInverted:c,siderBorderColor:o,siderBorderColorInverted:c,siderColor:i,siderColorInverted:c,siderToggleButtonBorder:`1px solid ${o}`,siderToggleButtonColor:t,siderToggleButtonIconColor:n,siderToggleButtonIconColorInverted:n,siderToggleBarColor:Ra(r,s),siderToggleBarColorHover:Ra(r,l),__invertScrollbar:"true"}}};const FP={name:"Menu",common:Lb,peers:{Tooltip:UC,Dropdown:QC},self:e=>{const{borderRadius:t,textColor3:n,primaryColor:r,textColor2:i,textColor1:o,fontSize:a,dividerColor:s,hoverColor:l,primaryColorHover:c}=e;return Object.assign({borderRadius:t,color:"#0000",groupTextColor:n,itemColorHover:l,itemColorActive:Ua(r,{alpha:.1}),itemColorActiveHover:Ua(r,{alpha:.1}),itemColorActiveCollapsed:Ua(r,{alpha:.1}),itemTextColor:i,itemTextColorHover:i,itemTextColorActive:r,itemTextColorActiveHover:r,itemTextColorChildActive:r,itemTextColorChildActiveHover:r,itemTextColorHorizontal:i,itemTextColorHoverHorizontal:c,itemTextColorActiveHorizontal:r,itemTextColorActiveHoverHorizontal:r,itemTextColorChildActiveHorizontal:r,itemTextColorChildActiveHoverHorizontal:r,itemIconColor:o,itemIconColorHover:o,itemIconColorActive:r,itemIconColorActiveHover:r,itemIconColorChildActive:r,itemIconColorChildActiveHover:r,itemIconColorCollapsed:o,itemIconColorHorizontal:o,itemIconColorHoverHorizontal:c,itemIconColorActiveHorizontal:r,itemIconColorActiveHoverHorizontal:r,itemIconColorChildActiveHorizontal:r,itemIconColorChildActiveHoverHorizontal:r,itemHeight:"42px",arrowColor:i,arrowColorHover:i,arrowColorActive:r,arrowColorActiveHover:r,arrowColorChildActive:r,arrowColorChildActiveHover:r,colorInverted:"#0000",borderColorHorizontal:"#0000",fontSize:a,dividerColor:s},{itemColorHoverInverted:"#0000",itemColorActiveInverted:d=r,itemColorActiveHoverInverted:d,itemColorActiveCollapsedInverted:d,itemTextColorInverted:u="#BBB",itemTextColorHoverInverted:h="#FFF",itemTextColorChildActiveInverted:h,itemTextColorChildActiveHoverInverted:h,itemTextColorActiveInverted:h,itemTextColorActiveHoverInverted:h,itemTextColorHorizontalInverted:u,itemTextColorHoverHorizontalInverted:h,itemTextColorChildActiveHorizontalInverted:h,itemTextColorChildActiveHoverHorizontalInverted:h,itemTextColorActiveHorizontalInverted:h,itemTextColorActiveHoverHorizontalInverted:h,itemIconColorInverted:u,itemIconColorHoverInverted:h,itemIconColorActiveInverted:h,itemIconColorActiveHoverInverted:h,itemIconColorChildActiveInverted:h,itemIconColorChildActiveHoverInverted:h,itemIconColorCollapsedInverted:u,itemIconColorHorizontalInverted:u,itemIconColorHoverHorizontalInverted:h,itemIconColorActiveHorizontalInverted:h,itemIconColorActiveHoverHorizontalInverted:h,itemIconColorChildActiveHorizontalInverted:h,itemIconColorChildActiveHoverHorizontalInverted:h,arrowColorInverted:u,arrowColorHoverInverted:h,arrowColorActiveInverted:h,arrowColorActiveHoverInverted:h,arrowColorChildActiveInverted:h,arrowColorChildActiveHoverInverted:h,groupTextColorInverted:"#AAA"});var u,d,h}},IP={titleFontSize:"18px",backSize:"22px"};const kP={name:"PageHeader",common:Lb,self:function(e){const{textColor1:t,textColor2:n,textColor3:r,fontSize:i,fontWeightStrong:o,primaryColorHover:a,primaryColorPressed:s}=e;return Object.assign(Object.assign({},IP),{titleFontWeight:o,fontSize:i,titleTextColor:t,backColor:n,backColorHover:a,backColorPressed:s,subtitleTextColor:r})}},OP={name:"Statistic",common:Lb,self:e=>{const{textColor2:t,textColor3:n,fontSize:r,fontWeight:i}=e;return{labelFontSize:r,labelFontWeight:i,valueFontWeight:i,valueFontSize:"24px",labelTextColor:n,valuePrefixTextColor:t,valueSuffixTextColor:t,valueTextColor:t}}},LP={stepHeaderFontSizeSmall:"14px",stepHeaderFontSizeMedium:"16px",indicatorIndexFontSizeSmall:"14px",indicatorIndexFontSizeMedium:"16px",indicatorSizeSmall:"22px",indicatorSizeMedium:"28px",indicatorIconSizeSmall:"14px",indicatorIconSizeMedium:"18px"},RP={name:"Steps",common:Lb,self:e=>{const{fontWeightStrong:t,baseColor:n,textColorDisabled:r,primaryColor:i,errorColor:o,textColor1:a,textColor2:s}=e;return Object.assign(Object.assign({},LP),{stepHeaderFontWeight:t,indicatorTextColorProcess:n,indicatorTextColorWait:r,indicatorTextColorFinish:i,indicatorTextColorError:o,indicatorBorderColorProcess:i,indicatorBorderColorWait:r,indicatorBorderColorFinish:i,indicatorBorderColorError:o,indicatorColorProcess:i,indicatorColorWait:"#0000",indicatorColorFinish:"#0000",indicatorColorError:"#0000",splitorColorProcess:r,splitorColorWait:r,splitorColorFinish:i,splitorColorError:r,headerTextColorProcess:a,headerTextColorWait:r,headerTextColorFinish:r,headerTextColorError:o,descriptionTextColorProcess:s,descriptionTextColorWait:r,descriptionTextColorFinish:r,descriptionTextColorError:o})}},UP={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"},zP={name:"Switch",common:Lb,self:e=>{const{primaryColor:t,opacityDisabled:n,borderRadius:r,textColor3:i}=e;return Object.assign(Object.assign({},UP),{iconColor:i,textColor:"white",loadingColor:t,opacityDisabled:n,railColor:"rgba(0, 0, 0, .14)",railColorActive:t,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:r,railBorderRadiusMedium:r,railBorderRadiusLarge:r,buttonBorderRadiusSmall:r,buttonBorderRadiusMedium:r,buttonBorderRadiusLarge:r,boxShadowFocus:`0 0 0 2px ${Ua(t,{alpha:.2})}`})}},NP={tabFontSizeSmall:"14px",tabFontSizeMedium:"14px",tabFontSizeLarge:"16px",tabGapSmallLine:"36px",tabGapMediumLine:"36px",tabGapLargeLine:"36px",tabGapSmallLineVertical:"8px",tabGapMediumLineVertical:"8px",tabGapLargeLineVertical:"8px",tabPaddingSmallLine:"6px 0",tabPaddingMediumLine:"10px 0",tabPaddingLargeLine:"14px 0",tabPaddingVerticalSmallLine:"6px 12px",tabPaddingVerticalMediumLine:"8px 16px",tabPaddingVerticalLargeLine:"10px 20px",tabGapSmallBar:"36px",tabGapMediumBar:"36px",tabGapLargeBar:"36px",tabGapSmallBarVertical:"8px",tabGapMediumBarVertical:"8px",tabGapLargeBarVertical:"8px",tabPaddingSmallBar:"4px 0",tabPaddingMediumBar:"6px 0",tabPaddingLargeBar:"10px 0",tabPaddingVerticalSmallBar:"6px 12px",tabPaddingVerticalMediumBar:"8px 16px",tabPaddingVerticalLargeBar:"10px 20px",tabGapSmallCard:"4px",tabGapMediumCard:"4px",tabGapLargeCard:"4px",tabGapSmallCardVertical:"4px",tabGapMediumCardVertical:"4px",tabGapLargeCardVertical:"4px",tabPaddingSmallCard:"8px 16px",tabPaddingMediumCard:"10px 20px",tabPaddingLargeCard:"12px 24px",tabPaddingSmallSegment:"4px 0",tabPaddingMediumSegment:"6px 0",tabPaddingLargeSegment:"8px 0",tabPaddingVerticalLargeSegment:"0 8px",tabPaddingVerticalSmallCard:"8px 12px",tabPaddingVerticalMediumCard:"10px 16px",tabPaddingVerticalLargeCard:"12px 20px",tabPaddingVerticalSmallSegment:"0 4px",tabPaddingVerticalMediumSegment:"0 6px",tabGapSmallSegment:"0",tabGapMediumSegment:"0",tabGapLargeSegment:"0",tabGapSmallSegmentVertical:"0",tabGapMediumSegmentVertical:"0",tabGapLargeSegmentVertical:"0",panePaddingSmall:"8px 0 0 0",panePaddingMedium:"12px 0 0 0",panePaddingLarge:"16px 0 0 0",closeSize:"18px",closeIconSize:"14px"},jP={name:"Tabs",common:Lb,self:e=>{const{textColor2:t,primaryColor:n,textColorDisabled:r,closeIconColor:i,closeIconColorHover:o,closeIconColorPressed:a,closeColorHover:s,closeColorPressed:l,tabColor:c,baseColor:u,dividerColor:d,fontWeight:h,textColor1:p,borderRadius:A,fontSize:f,fontWeightStrong:m}=e;return Object.assign(Object.assign({},NP),{colorSegment:c,tabFontSizeCard:f,tabTextColorLine:p,tabTextColorActiveLine:n,tabTextColorHoverLine:n,tabTextColorDisabledLine:r,tabTextColorSegment:p,tabTextColorActiveSegment:t,tabTextColorHoverSegment:t,tabTextColorDisabledSegment:r,tabTextColorBar:p,tabTextColorActiveBar:n,tabTextColorHoverBar:n,tabTextColorDisabledBar:r,tabTextColorCard:p,tabTextColorHoverCard:p,tabTextColorActiveCard:n,tabTextColorDisabledCard:r,barColor:n,closeIconColor:i,closeIconColorHover:o,closeIconColorPressed:a,closeColorHover:s,closeColorPressed:l,closeBorderRadius:A,tabColor:c,tabColorSegment:u,tabBorderColor:d,tabFontWeightActive:h,tabFontWeight:h,tabBorderRadius:A,paneTextColor:t,fontWeightStrong:m})}},HP={titleMarginMedium:"0 0 6px 0",titleMarginLarge:"-2px 0 6px 0",titleFontSizeMedium:"14px",titleFontSizeLarge:"16px",iconSizeMedium:"14px",iconSizeLarge:"14px"},QP={name:"Timeline",common:Lb,self:e=>{const{textColor3:t,infoColor:n,errorColor:r,successColor:i,warningColor:o,textColor1:a,textColor2:s,railColor:l,fontWeightStrong:c,fontSize:u}=e;return Object.assign(Object.assign({},HP),{contentFontSize:u,titleFontWeight:c,circleBorder:`2px solid ${t}`,circleBorderInfo:`2px solid ${n}`,circleBorderError:`2px solid ${r}`,circleBorderSuccess:`2px solid ${i}`,circleBorderWarning:`2px solid ${o}`,iconColor:t,iconColorInfo:n,iconColorError:r,iconColorSuccess:i,iconColorWarning:o,titleTextColor:a,contentTextColor:s,metaTextColor:t,lineColor:l})}},VP={extraFontSizeSmall:"12px",extraFontSizeMedium:"12px",extraFontSizeLarge:"14px",titleFontSizeSmall:"14px",titleFontSizeMedium:"16px",titleFontSizeLarge:"16px",closeSize:"20px",closeIconSize:"16px",headerHeightSmall:"44px",headerHeightMedium:"44px",headerHeightLarge:"50px"},WP={name:"Transfer",common:Lb,peers:{Checkbox:oC,Scrollbar:Hb,Input:qw,Empty:Ub,Button:Cx},self:e=>{const{fontWeight:t,fontSizeLarge:n,fontSizeMedium:r,fontSizeSmall:i,heightLarge:o,heightMedium:a,borderRadius:s,cardColor:l,tableHeaderColor:c,textColor1:u,textColorDisabled:d,textColor2:h,textColor3:p,borderColor:A,hoverColor:f,closeColorHover:m,closeColorPressed:g,closeIconColor:v,closeIconColorHover:y,closeIconColorPressed:b}=e;return Object.assign(Object.assign({},VP),{itemHeightSmall:a,itemHeightMedium:a,itemHeightLarge:o,fontSizeSmall:i,fontSizeMedium:r,fontSizeLarge:n,borderRadius:s,dividerColor:A,borderColor:A,listColor:l,headerColor:Ra(l,c),titleTextColor:u,titleTextColorDisabled:d,extraTextColor:p,extraTextColorDisabled:d,itemTextColor:h,itemTextColorDisabled:d,itemColorPending:f,titleFontWeight:t,closeColorHover:m,closeColorPressed:g,closeIconColor:v,closeIconColorHover:y,closeIconColorPressed:b})}},GP={headerFontSize1:"30px",headerFontSize2:"22px",headerFontSize3:"18px",headerFontSize4:"16px",headerFontSize5:"16px",headerFontSize6:"16px",headerMargin1:"28px 0 20px 0",headerMargin2:"28px 0 20px 0",headerMargin3:"28px 0 20px 0",headerMargin4:"28px 0 18px 0",headerMargin5:"28px 0 18px 0",headerMargin6:"28px 0 18px 0",headerPrefixWidth1:"16px",headerPrefixWidth2:"16px",headerPrefixWidth3:"12px",headerPrefixWidth4:"12px",headerPrefixWidth5:"12px",headerPrefixWidth6:"12px",headerBarWidth1:"4px",headerBarWidth2:"4px",headerBarWidth3:"3px",headerBarWidth4:"3px",headerBarWidth5:"3px",headerBarWidth6:"3px",pMargin:"16px 0 16px 0",liMargin:".25em 0 0 0",olPadding:"0 0 0 2em",ulPadding:"0 0 0 2em"},qP={name:"Typography",common:Lb,self:e=>{const{primaryColor:t,textColor2:n,borderColor:r,lineHeight:i,fontSize:o,borderRadiusSmall:a,dividerColor:s,fontWeightStrong:l,textColor1:c,textColor3:u,infoColor:d,warningColor:h,errorColor:p,successColor:A,codeColor:f}=e;return Object.assign(Object.assign({},GP),{aTextColor:t,blockquoteTextColor:n,blockquotePrefixColor:r,blockquoteLineHeight:i,blockquoteFontSize:o,codeBorderRadius:a,liTextColor:n,liLineHeight:i,liFontSize:o,hrColor:s,headerFontWeight:l,headerTextColor:c,pTextColor:n,pTextColor1Depth:c,pTextColor2Depth:n,pTextColor3Depth:u,pLineHeight:i,pFontSize:o,headerBarColor:t,headerBarColorPrimary:t,headerBarColorInfo:d,headerBarColorError:p,headerBarColorWarning:h,headerBarColorSuccess:A,textColor:n,textColor1Depth:c,textColor2Depth:n,textColor3Depth:u,textColorPrimary:t,textColorInfo:d,textColorSuccess:A,textColorWarning:h,textColorError:p,codeTextColor:n,codeColor:f,codeBorder:"1px solid #0000"})}},KP=Us("gradient-text","\n display: inline-block;\n font-weight: var(--n-font-weight);\n -webkit-background-clip: text;\n background-clip: text;\n color: #0000;\n white-space: nowrap;\n background-image: linear-gradient(var(--n-rotate), var(--n-color-start) 0%, var(--n-color-end) 100%);\n transition:\n --n-color-start .3s var(--n-bezier),\n --n-color-end .3s var(--n-bezier);\n"),YP=Dn({name:"GradientText",props:Object.assign(Object.assign({},sf.props),{size:[String,Number],fontSize:[String,Number],type:{type:String,default:"primary"},color:[Object,String],gradient:[Object,String]}),setup(e){Ll();const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=eo((()=>{const{type:t}=e;return"danger"===t?"error":t})),i=eo((()=>{let t=e.size||e.fontSize;return t&&(t=ds(t)),t||void 0})),o=eo((()=>{const t=e.color||e.gradient;if("string"==typeof t)return t;if(t){return`linear-gradient(${t.deg||0}deg, ${t.from} 0%, ${t.to} 100%)`}})),a=sf("GradientText","-gradient-text",KP,TP,e,t),s=eo((()=>{const{value:e}=r,{common:{cubicBezierEaseInOut:t},self:{rotate:n,[Gs("colorStart",e)]:i,[Gs("colorEnd",e)]:o,fontWeight:s}}=a.value;return{"--n-bezier":t,"--n-rotate":n,"--n-color-start":i,"--n-color-end":o,"--n-font-weight":s}})),l=n?Fv("gradient-text",eo((()=>r.value[0])),s,e):void 0;return{mergedClsPrefix:t,compatibleType:r,styleFontSize:i,styleBgImage:o,cssVars:n?void 0:s,themeClass:null==l?void 0:l.themeClass,onRender:null==l?void 0:l.onRender}},render(){const{mergedClsPrefix:e,onRender:t}=this;return null==t||t(),to("span",{class:[`${e}-gradient-text`,`${e}-gradient-text--${this.compatibleType}-type`,this.themeClass],style:[{fontSize:this.styleFontSize,backgroundImage:this.styleBgImage},this.cssVars]},this.$slots)}}),XP="n-layout-sider",$P={type:String,default:"static"},JP=Us("layout","\n color: var(--n-text-color);\n background-color: var(--n-color);\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n flex: auto;\n overflow: hidden;\n transition:\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n",[Us("layout-scroll-container","\n overflow-x: hidden;\n box-sizing: border-box;\n height: 100%;\n "),Ns("absolute-positioned","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ")]),ZP={embedded:Boolean,position:$P,nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,onScroll:Function,contentClass:String,contentStyle:{type:[String,Object],default:""},hasSider:Boolean,siderPlacement:{type:String,default:"left"}},eT="n-layout";const tT=(nT=!1,Dn({name:"Layout",props:Object.assign(Object.assign({},sf.props),ZP),setup(e){const t=bt(null),n=bt(null),{mergedClsPrefixRef:r,inlineThemeDisabled:i}=cf(e),o=sf("Layout","-layout",JP,DP,e,r);nr(eT,e);let a=0,s=0;ku((()=>{if(e.nativeScrollbar){const e=t.value;e&&(e.scrollTop=s,e.scrollLeft=a)}}));const l={scrollTo:function(r,i){if(e.nativeScrollbar){const{value:e}=t;e&&(void 0===i?e.scrollTo(r):e.scrollTo(r,i))}else{const{value:e}=n;e&&e.scrollTo(r,i)}}},c=eo((()=>{const{common:{cubicBezierEaseInOut:t},self:n}=o.value;return{"--n-bezier":t,"--n-color":e.embedded?n.colorEmbedded:n.color,"--n-text-color":n.textColor}})),u=i?Fv("layout",eo((()=>e.embedded?"e":"")),c,e):void 0;return Object.assign({mergedClsPrefix:r,scrollableElRef:t,scrollbarInstRef:n,hasSiderStyle:{display:"flex",flexWrap:"nowrap",width:"100%",flexDirection:"row"},mergedTheme:o,handleNativeElScroll:t=>{var n;const r=t.target;a=r.scrollLeft,s=r.scrollTop,null===(n=e.onScroll)||void 0===n||n.call(e,t)},cssVars:i?void 0:c,themeClass:null==u?void 0:u.themeClass,onRender:null==u?void 0:u.onRender},l)},render(){var e;const{mergedClsPrefix:t,hasSider:n}=this;null===(e=this.onRender)||void 0===e||e.call(this);const r=n?this.hasSiderStyle:void 0;return to("div",{class:[this.themeClass,nT,`${t}-layout`,`${t}-layout--${this.position}-positioned`],style:this.cssVars},this.nativeScrollbar?to("div",{ref:"scrollableElRef",class:[`${t}-layout-scroll-container`,this.contentClass],style:[this.contentStyle,r],onScroll:this.handleNativeElScroll},this.$slots):to(Gb,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:this.contentClass,contentStyle:[this.contentStyle,r]}),this.$slots))}}));var nT;const rT=Us("layout-header","\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n box-sizing: border-box;\n width: 100%;\n background-color: var(--n-color);\n color: var(--n-text-color);\n",[Ns("absolute-positioned","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n "),Ns("bordered","\n border-bottom: solid 1px var(--n-border-color);\n ")]),iT={position:$P,inverted:Boolean,bordered:{type:Boolean,default:!1}},oT=Dn({name:"LayoutHeader",props:Object.assign(Object.assign({},sf.props),iT),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Layout","-layout-header",rT,DP,e,t),i=eo((()=>{const{common:{cubicBezierEaseInOut:t},self:n}=r.value,i={"--n-bezier":t};return e.inverted?(i["--n-color"]=n.headerColorInverted,i["--n-text-color"]=n.textColorInverted,i["--n-border-color"]=n.headerBorderColorInverted):(i["--n-color"]=n.headerColor,i["--n-text-color"]=n.textColor,i["--n-border-color"]=n.headerBorderColor),i})),o=n?Fv("layout-header",eo((()=>e.inverted?"a":"b")),i,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:i,themeClass:null==o?void 0:o.themeClass,onRender:null==o?void 0:o.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return null===(e=this.onRender)||void 0===e||e.call(this),to("div",{class:[`${t}-layout-header`,this.themeClass,this.position&&`${t}-layout-header--${this.position}-positioned`,this.bordered&&`${t}-layout-header--bordered`],style:this.cssVars},this.$slots)}}),aT=Us("layout-footer","\n transition:\n box-shadow .3s var(--n-bezier),\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n color: var(--n-text-color);\n background-color: var(--n-color);\n box-sizing: border-box;\n",[Ns("absolute-positioned","\n position: absolute;\n left: 0;\n right: 0;\n bottom: 0;\n "),Ns("bordered","\n border-top: solid 1px var(--n-border-color);\n ")]),sT=Dn({name:"LayoutFooter",props:Object.assign(Object.assign({},sf.props),{inverted:Boolean,position:$P,bordered:Boolean}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Layout","-layout-footer",aT,DP,e,t),i=eo((()=>{const{common:{cubicBezierEaseInOut:t},self:n}=r.value,i={"--n-bezier":t};return e.inverted?(i["--n-color"]=n.footerColorInverted,i["--n-text-color"]=n.textColorInverted,i["--n-border-color"]=n.footerBorderColorInverted):(i["--n-color"]=n.footerColor,i["--n-text-color"]=n.textColor,i["--n-border-color"]=n.footerBorderColor),i})),o=n?Fv("layout-footer",eo((()=>e.inverted?"a":"b")),i,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:i,themeClass:null==o?void 0:o.themeClass,onRender:null==o?void 0:o.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return null===(e=this.onRender)||void 0===e||e.call(this),to("div",{class:[`${t}-layout-footer`,this.themeClass,this.position&&`${t}-layout-footer--${this.position}-positioned`,this.bordered&&`${t}-layout-footer--bordered`],style:this.cssVars},this.$slots)}}),lT=Us("layout-sider","\n flex-shrink: 0;\n box-sizing: border-box;\n position: relative;\n z-index: 1;\n color: var(--n-text-color);\n transition:\n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier),\n min-width .3s var(--n-bezier),\n max-width .3s var(--n-bezier),\n transform .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n background-color: var(--n-color);\n display: flex;\n justify-content: flex-end;\n",[Ns("bordered",[zs("border",'\n content: "";\n position: absolute;\n top: 0;\n bottom: 0;\n width: 1px;\n background-color: var(--n-border-color);\n transition: background-color .3s var(--n-bezier);\n ')]),zs("left-placement",[Ns("bordered",[zs("border","\n right: 0;\n ")])]),Ns("right-placement","\n justify-content: flex-start;\n ",[Ns("bordered",[zs("border","\n left: 0;\n ")]),Ns("collapsed",[Us("layout-toggle-button",[Us("base-icon","\n transform: rotate(180deg);\n ")]),Us("layout-toggle-bar",[Ls("&:hover",[zs("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),zs("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])])]),Us("layout-toggle-button","\n left: 0;\n transform: translateX(-50%) translateY(-50%);\n ",[Us("base-icon","\n transform: rotate(0);\n ")]),Us("layout-toggle-bar","\n left: -28px;\n transform: rotate(180deg);\n ",[Ls("&:hover",[zs("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),zs("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})])])]),Ns("collapsed",[Us("layout-toggle-bar",[Ls("&:hover",[zs("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),zs("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])]),Us("layout-toggle-button",[Us("base-icon","\n transform: rotate(0);\n ")])]),Us("layout-toggle-button","\n transition:\n color .3s var(--n-bezier),\n right .3s var(--n-bezier),\n left .3s var(--n-bezier),\n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n cursor: pointer;\n width: 24px;\n height: 24px;\n position: absolute;\n top: 50%;\n right: 0;\n border-radius: 50%;\n display: flex;\n align-items: center;\n justify-content: center;\n font-size: 18px;\n color: var(--n-toggle-button-icon-color);\n border: var(--n-toggle-button-border);\n background-color: var(--n-toggle-button-color);\n box-shadow: 0 2px 4px 0px rgba(0, 0, 0, .06);\n transform: translateX(50%) translateY(-50%);\n z-index: 1;\n ",[Us("base-icon","\n transition: transform .3s var(--n-bezier);\n transform: rotate(180deg);\n ")]),Us("layout-toggle-bar","\n cursor: pointer;\n height: 72px;\n width: 32px;\n position: absolute;\n top: calc(50% - 36px);\n right: -28px;\n ",[zs("top, bottom","\n position: absolute;\n width: 4px;\n border-radius: 2px;\n height: 38px;\n left: 14px;\n transition: \n background-color .3s var(--n-bezier),\n transform .3s var(--n-bezier);\n "),zs("bottom","\n position: absolute;\n top: 34px;\n "),Ls("&:hover",[zs("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),zs("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})]),zs("top, bottom",{backgroundColor:"var(--n-toggle-bar-color)"}),Ls("&:hover",[zs("top, bottom",{backgroundColor:"var(--n-toggle-bar-color-hover)"})])]),zs("border","\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n width: 1px;\n transition: background-color .3s var(--n-bezier);\n "),Us("layout-sider-scroll-container","\n flex-grow: 1;\n flex-shrink: 0;\n box-sizing: border-box;\n height: 100%;\n opacity: 0;\n transition: opacity .3s var(--n-bezier);\n max-width: 100%;\n "),Ns("show-content",[Us("layout-sider-scroll-container",{opacity:1})]),Ns("absolute-positioned","\n position: absolute;\n left: 0;\n top: 0;\n bottom: 0;\n ")]),cT=Dn({name:"LayoutToggleButton",props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:e}=this;return to("div",{class:`${e}-layout-toggle-button`,onClick:this.onClick},to(py,{clsPrefix:e},{default:()=>to(Hv,null)}))}}),uT=Dn({props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:e}=this;return to("div",{onClick:this.onClick,class:`${e}-layout-toggle-bar`},to("div",{class:`${e}-layout-toggle-bar__top`}),to("div",{class:`${e}-layout-toggle-bar__bottom`}))}}),dT={position:$P,bordered:Boolean,collapsedWidth:{type:Number,default:48},width:{type:[Number,String],default:272},contentClass:String,contentStyle:{type:[String,Object],default:""},collapseMode:{type:String,default:"transform"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:Boolean,showCollapsedContent:{type:Boolean,default:!0},showTrigger:{type:[Boolean,String],default:!1},nativeScrollbar:{type:Boolean,default:!0},inverted:Boolean,scrollbarProps:Object,triggerClass:String,triggerStyle:[String,Object],collapsedTriggerClass:String,collapsedTriggerStyle:[String,Object],"onUpdate:collapsed":[Function,Array],onUpdateCollapsed:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,onExpand:[Function,Array],onCollapse:[Function,Array],onScroll:Function},hT=Dn({name:"LayoutSider",props:Object.assign(Object.assign({},sf.props),dT),setup(e){const t=rr(eT),n=bt(null),r=bt(null),i=eo((()=>ds(l.value?e.collapsedWidth:e.width))),o=eo((()=>"transform"!==e.collapseMode?{}:{minWidth:ds(e.width)})),a=eo((()=>t?t.siderPlacement:"left")),s=bt(e.defaultCollapsed),l=xl(Tt(e,"collapsed"),s);let c=0,u=0;ku((()=>{if(e.nativeScrollbar){const e=n.value;e&&(e.scrollTop=u,e.scrollLeft=c)}})),nr(XP,{collapsedRef:l,collapseModeRef:Tt(e,"collapseMode")});const{mergedClsPrefixRef:d,inlineThemeDisabled:h}=cf(e),p=sf("Layout","-layout-sider",lT,DP,e,d);const A={scrollTo:function(t,i){if(e.nativeScrollbar){const{value:e}=n;e&&(void 0===i?e.scrollTo(t):e.scrollTo(t,i))}else{const{value:e}=r;e&&e.scrollTo(t,i)}}},f=eo((()=>{const{common:{cubicBezierEaseInOut:t},self:n}=p.value,{siderToggleButtonColor:r,siderToggleButtonBorder:i,siderToggleBarColor:o,siderToggleBarColorHover:a}=n,s={"--n-bezier":t,"--n-toggle-button-color":r,"--n-toggle-button-border":i,"--n-toggle-bar-color":o,"--n-toggle-bar-color-hover":a};return e.inverted?(s["--n-color"]=n.siderColorInverted,s["--n-text-color"]=n.textColorInverted,s["--n-border-color"]=n.siderBorderColorInverted,s["--n-toggle-button-icon-color"]=n.siderToggleButtonIconColorInverted,s.__invertScrollbar=n.__invertScrollbar):(s["--n-color"]=n.siderColor,s["--n-text-color"]=n.textColor,s["--n-border-color"]=n.siderBorderColor,s["--n-toggle-button-icon-color"]=n.siderToggleButtonIconColor),s})),m=h?Fv("layout-sider",eo((()=>e.inverted?"a":"b")),f,e):void 0;return Object.assign({scrollableElRef:n,scrollbarInstRef:r,mergedClsPrefix:d,mergedTheme:p,styleMaxWidth:i,mergedCollapsed:l,scrollContainerStyle:o,siderPlacement:a,handleNativeElScroll:t=>{var n;const r=t.target;c=r.scrollLeft,u=r.scrollTop,null===(n=e.onScroll)||void 0===n||n.call(e,t)},handleTransitionend:function(t){var n,r;"max-width"===t.propertyName&&(l.value?null===(n=e.onAfterLeave)||void 0===n||n.call(e):null===(r=e.onAfterEnter)||void 0===r||r.call(e))},handleTriggerClick:function(){const{"onUpdate:collapsed":t,onUpdateCollapsed:n,onExpand:r,onCollapse:i}=e,{value:o}=l;n&&Ka(n,!o),t&&Ka(t,!o),s.value=!o,o?r&&Ka(r):i&&Ka(i)},inlineThemeDisabled:h,cssVars:f,themeClass:null==m?void 0:m.themeClass,onRender:null==m?void 0:m.onRender},A)},render(){var e;const{mergedClsPrefix:t,mergedCollapsed:n,showTrigger:r}=this;return null===(e=this.onRender)||void 0===e||e.call(this),to("aside",{class:[`${t}-layout-sider`,this.themeClass,`${t}-layout-sider--${this.position}-positioned`,`${t}-layout-sider--${this.siderPlacement}-placement`,this.bordered&&`${t}-layout-sider--bordered`,n&&`${t}-layout-sider--collapsed`,(!n||this.showCollapsedContent)&&`${t}-layout-sider--show-content`],onTransitionend:this.handleTransitionend,style:[this.inlineThemeDisabled?void 0:this.cssVars,{maxWidth:this.styleMaxWidth,width:ds(this.width)}]},this.nativeScrollbar?to("div",{class:[`${t}-layout-sider-scroll-container`,this.contentClass],onScroll:this.handleNativeElScroll,style:[this.scrollContainerStyle,{overflow:"auto"},this.contentStyle],ref:"scrollableElRef"},this.$slots):to(Gb,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",style:this.scrollContainerStyle,contentStyle:this.contentStyle,contentClass:this.contentClass,theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,builtinThemeOverrides:this.inverted&&"true"===this.cssVars.__invertScrollbar?{colorHover:"rgba(255, 255, 255, .4)",color:"rgba(255, 255, 255, .3)"}:void 0}),this.$slots),r?to("bar"===r?uT:cT,{clsPrefix:t,class:n?this.collapsedTriggerClass:this.triggerClass,style:n?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):null,this.bordered?to("div",{class:`${t}-layout-sider__border`}):null)}}),pT="n-menu",AT="n-submenu",fT="n-menu-item-group";function mT(e){const t=rr(pT),{props:n,mergedCollapsedRef:r}=t,i=rr(AT,null),o=rr(fT,null),a=eo((()=>"horizontal"===n.mode)),s=eo((()=>a.value?n.dropdownPlacement:"tmNodes"in e?"right-start":"right")),l=eo((()=>{var e;return Math.max(null!==(e=n.collapsedIconSize)&&void 0!==e?e:n.iconSize,n.iconSize)})),c=eo((()=>{var t;return!a.value&&e.root&&r.value&&null!==(t=n.collapsedIconSize)&&void 0!==t?t:n.iconSize})),u=eo((()=>{if(a.value)return;const{collapsedWidth:t,indent:s,rootIndent:c}=n,{root:u,isGroup:d}=e,h=void 0===c?s:c;return u?r.value?t/2-l.value/2:h:o&&"number"==typeof o.paddingLeftRef.value?s/2+o.paddingLeftRef.value:i&&"number"==typeof i.paddingLeftRef.value?(d?s/2:s)+i.paddingLeftRef.value:0})),d=eo((()=>{const{collapsedWidth:t,indent:i,rootIndent:o}=n,{value:s}=l,{root:c}=e;if(a.value)return 8;if(!c)return 8;if(!r.value)return 8;return(void 0===o?i:o)+s+8-(t+s)/2}));return{dropdownPlacement:s,activeIconSize:c,maxIconSize:l,paddingLeft:u,iconMarginRight:d,NMenu:t,NSubmenu:i}}const gT={internalKey:{type:[String,Number],required:!0},root:Boolean,isGroup:Boolean,level:{type:Number,required:!0},title:[String,Function],extra:[String,Function]},vT=Object.assign(Object.assign({},gT),{tmNode:{type:Object,required:!0},tmNodes:{type:Array,required:!0}}),yT=Dn({name:"MenuOptionGroup",props:vT,setup(e){nr(AT,null);const t=mT(e);nr(fT,{paddingLeftRef:t.paddingLeft});const{mergedClsPrefixRef:n,props:r}=rr(pT);return function(){const{value:i}=n,o=t.paddingLeft.value,{nodeProps:a}=r,s=null==a?void 0:a(e.tmNode.rawNode);return to("div",{class:`${i}-menu-item-group`,role:"group"},to("div",Object.assign({},s,{class:[`${i}-menu-item-group-title`,null==s?void 0:s.class],style:[(null==s?void 0:s.style)||"",void 0!==o?`padding-left: ${o}px;`:""]}),Xa(e.title),e.extra?to(di,null," ",Xa(e.extra)):null),to("div",null,e.tmNodes.map((e=>TT(e,r)))))}}}),bT=Dn({name:"MenuOptionContent",props:{collapsed:Boolean,disabled:Boolean,title:[String,Function],icon:Function,extra:[String,Function],showArrow:Boolean,childActive:Boolean,hover:Boolean,paddingLeft:Number,selected:Boolean,maxIconSize:{type:Number,required:!0},activeIconSize:{type:Number,required:!0},iconMarginRight:{type:Number,required:!0},clsPrefix:{type:String,required:!0},onClick:Function,tmNode:{type:Object,required:!0},isEllipsisPlaceholder:Boolean},setup(e){const{props:t}=rr(pT);return{menuProps:t,style:eo((()=>{const{paddingLeft:t}=e;return{paddingLeft:t&&`${t}px`}})),iconStyle:eo((()=>{const{maxIconSize:t,activeIconSize:n,iconMarginRight:r}=e;return{width:`${t}px`,height:`${t}px`,fontSize:`${n}px`,marginRight:`${r}px`}}))}},render(){const{clsPrefix:e,tmNode:t,menuProps:{renderIcon:n,renderLabel:r,renderExtra:i,expandIcon:o}}=this,a=n?n(t.rawNode):Xa(this.icon);return to("div",{onClick:e=>{var t;null===(t=this.onClick)||void 0===t||t.call(this,e)},role:"none",class:[`${e}-menu-item-content`,{[`${e}-menu-item-content--selected`]:this.selected,[`${e}-menu-item-content--collapsed`]:this.collapsed,[`${e}-menu-item-content--child-active`]:this.childActive,[`${e}-menu-item-content--disabled`]:this.disabled,[`${e}-menu-item-content--hover`]:this.hover}],style:this.style},a&&to("div",{class:`${e}-menu-item-content__icon`,style:this.iconStyle,role:"none"},[a]),to("div",{class:`${e}-menu-item-content-header`,role:"none"},this.isEllipsisPlaceholder?this.title:r?r(t.rawNode):Xa(this.title),this.extra||i?to("span",{class:`${e}-menu-item-content-header__extra`}," ",i?i(t.rawNode):Xa(this.extra)):null),this.showArrow?to(py,{ariaHidden:!0,class:`${e}-menu-item-content__arrow`,clsPrefix:e},{default:()=>o?o(t.rawNode):to(sy,null)}):null)}}),wT=Object.assign(Object.assign({},gT),{rawNodes:{type:Array,default:()=>[]},tmNodes:{type:Array,default:()=>[]},tmNode:{type:Object,required:!0},disabled:Boolean,icon:Function,onClick:Function,domId:String,virtualChildActive:{type:Boolean,default:void 0},isEllipsisPlaceholder:Boolean}),xT=Dn({name:"Submenu",props:wT,setup(e){const t=mT(e),{NMenu:n,NSubmenu:r}=t,{props:i,mergedCollapsedRef:o,mergedThemeRef:a}=n,s=eo((()=>{const{disabled:t}=e;return!!(null==r?void 0:r.mergedDisabledRef.value)||(!!i.disabled||t)})),l=bt(!1);return nr(AT,{paddingLeftRef:t.paddingLeft,mergedDisabledRef:s}),nr(fT,null),{menuProps:i,mergedTheme:a,doSelect:n.doSelect,inverted:n.invertedRef,isHorizontal:n.isHorizontalRef,mergedClsPrefix:n.mergedClsPrefixRef,maxIconSize:t.maxIconSize,activeIconSize:t.activeIconSize,iconMarginRight:t.iconMarginRight,dropdownPlacement:t.dropdownPlacement,dropdownShow:l,paddingLeft:t.paddingLeft,mergedDisabled:s,mergedValue:n.mergedValueRef,childActive:Zs((()=>{var t;return null!==(t=e.virtualChildActive)&&void 0!==t?t:n.activePathRef.value.includes(e.internalKey)})),collapsed:eo((()=>"horizontal"!==i.mode&&(!!o.value||!n.mergedExpandedKeysRef.value.includes(e.internalKey)))),dropdownEnabled:eo((()=>!s.value&&("horizontal"===i.mode||o.value))),handlePopoverShowChange:function(e){l.value=e},handleClick:function(){s.value||(o.value||n.toggleExpand(e.internalKey),function(){const{onClick:t}=e;t&&t()}())}}},render(){var e;const{mergedClsPrefix:t,menuProps:{renderIcon:n,renderLabel:r}}=this,i=()=>{const{isHorizontal:e,paddingLeft:t,collapsed:n,mergedDisabled:r,maxIconSize:i,activeIconSize:o,title:a,childActive:s,icon:l,handleClick:c,menuProps:{nodeProps:u},dropdownShow:d,iconMarginRight:h,tmNode:p,mergedClsPrefix:A,isEllipsisPlaceholder:f,extra:m}=this,g=null==u?void 0:u(p.rawNode);return to("div",Object.assign({},g,{class:[`${A}-menu-item`,null==g?void 0:g.class],role:"menuitem"}),to(bT,{tmNode:p,paddingLeft:t,collapsed:n,disabled:r,iconMarginRight:h,maxIconSize:i,activeIconSize:o,title:a,extra:m,showArrow:!e,childActive:s,clsPrefix:A,icon:l,hover:d,onClick:c,isEllipsisPlaceholder:f}))},o=()=>to(dy,null,{default:()=>{const{tmNodes:e,collapsed:n}=this;return n?null:to("div",{class:`${t}-submenu-children`,role:"menu"},e.map((e=>TT(e,this.menuProps))))}});return this.root?to(QS,Object.assign({size:"large",trigger:"hover"},null===(e=this.menuProps)||void 0===e?void 0:e.dropdownProps,{themeOverrides:this.mergedTheme.peerOverrides.Dropdown,theme:this.mergedTheme.peers.Dropdown,builtinThemeOverrides:{fontSizeLarge:"14px",optionIconSizeLarge:"18px"},value:this.mergedValue,disabled:!this.dropdownEnabled,placement:this.dropdownPlacement,keyField:this.menuProps.keyField,labelField:this.menuProps.labelField,childrenField:this.menuProps.childrenField,onUpdateShow:this.handlePopoverShowChange,options:this.rawNodes,onSelect:this.doSelect,inverted:this.inverted,renderIcon:n,renderLabel:r}),{default:()=>to("div",{class:`${t}-submenu`,role:"menu","aria-expanded":!this.collapsed,id:this.domId},i(),this.isHorizontal?null:o())}):to("div",{class:`${t}-submenu`,role:"menu","aria-expanded":!this.collapsed,id:this.domId},i(),o())}}),CT=Object.assign(Object.assign({},gT),{tmNode:{type:Object,required:!0},disabled:Boolean,icon:Function,onClick:Function}),ST=Dn({name:"MenuOption",props:CT,setup(e){const t=mT(e),{NSubmenu:n,NMenu:r}=t,{props:i,mergedClsPrefixRef:o,mergedCollapsedRef:a}=r,s=n?n.mergedDisabledRef:{value:!1},l=eo((()=>s.value||e.disabled));return{mergedClsPrefix:o,dropdownPlacement:t.dropdownPlacement,paddingLeft:t.paddingLeft,iconMarginRight:t.iconMarginRight,maxIconSize:t.maxIconSize,activeIconSize:t.activeIconSize,mergedTheme:r.mergedThemeRef,menuProps:i,dropdownEnabled:Zs((()=>e.root&&a.value&&"horizontal"!==i.mode&&!l.value)),selected:Zs((()=>r.mergedValueRef.value===e.internalKey)),mergedDisabled:l,handleClick:function(t){l.value||(r.doSelect(e.internalKey,e.tmNode.rawNode),function(t){const{onClick:n}=e;n&&n(t)}(t))}}},render(){const{mergedClsPrefix:e,mergedTheme:t,tmNode:n,menuProps:{renderLabel:r,nodeProps:i}}=this,o=null==i?void 0:i(n.rawNode);return to("div",Object.assign({},o,{role:"menuitem",class:[`${e}-menu-item`,null==o?void 0:o.class]}),to(GC,{theme:t.peers.Tooltip,themeOverrides:t.peerOverrides.Tooltip,trigger:"hover",placement:this.dropdownPlacement,disabled:!this.dropdownEnabled||void 0===this.title,internalExtraClass:["menu-tooltip"]},{default:()=>r?r(n.rawNode):Xa(this.title),trigger:()=>to(bT,{tmNode:n,clsPrefix:e,paddingLeft:this.paddingLeft,iconMarginRight:this.iconMarginRight,maxIconSize:this.maxIconSize,activeIconSize:this.activeIconSize,selected:this.selected,title:this.title,extra:this.extra,disabled:this.mergedDisabled,icon:this.icon,onClick:this.handleClick})}))}}),BT=Dn({name:"MenuDivider",setup(){const e=rr(pT),{mergedClsPrefixRef:t,isHorizontalRef:n}=e;return()=>n.value?null:to("div",{class:`${t.value}-menu-divider`})}}),_T=Ya(vT),ET=Ya(CT),MT=Ya(wT);function PT(e){return"divider"===e.type||"render"===e.type}function TT(e,t){const{rawNode:n}=e,{show:r}=n;if(!1===r)return null;if(PT(n))return function(e){return"divider"===e.type}(n)?to(BT,Object.assign({key:e.key},n.props)):null;const{labelField:i}=t,{key:o,level:a,isGroup:s}=e,l=Object.assign(Object.assign({},n),{title:n.title||n[i],extra:n.titleExtra||n.extra,key:o,internalKey:o,level:a,root:0===a,isGroup:s});return e.children?e.isGroup?to(yT,Wa(l,_T,{tmNode:e,tmNodes:e.children,key:o})):to(xT,Wa(l,MT,{key:o,rawNodes:n[t.childrenField],tmNodes:e.children,tmNode:e})):to(ST,Wa(l,ET,{key:o,tmNode:e}))}const DT=[Ls("&::before","background-color: var(--n-item-color-hover);"),zs("arrow","\n color: var(--n-arrow-color-hover);\n "),zs("icon","\n color: var(--n-item-icon-color-hover);\n "),Us("menu-item-content-header","\n color: var(--n-item-text-color-hover);\n ",[Ls("a","\n color: var(--n-item-text-color-hover);\n "),zs("extra","\n color: var(--n-item-text-color-hover);\n ")])],FT=[zs("icon","\n color: var(--n-item-icon-color-hover-horizontal);\n "),Us("menu-item-content-header","\n color: var(--n-item-text-color-hover-horizontal);\n ",[Ls("a","\n color: var(--n-item-text-color-hover-horizontal);\n "),zs("extra","\n color: var(--n-item-text-color-hover-horizontal);\n ")])],IT=Ls([Us("menu","\n background-color: var(--n-color);\n color: var(--n-item-text-color);\n overflow: hidden;\n transition: background-color .3s var(--n-bezier);\n box-sizing: border-box;\n font-size: var(--n-font-size);\n padding-bottom: 6px;\n ",[Ns("horizontal","\n max-width: 100%;\n width: 100%;\n display: flex;\n overflow: hidden;\n padding-bottom: 0;\n ",[Us("submenu","margin: 0;"),Us("menu-item","margin: 0;"),Us("menu-item-content","\n padding: 0 20px;\n border-bottom: 2px solid #0000;\n ",[Ls("&::before","display: none;"),Ns("selected","border-bottom: 2px solid var(--n-border-color-horizontal)")]),Us("menu-item-content",[Ns("selected",[zs("icon","color: var(--n-item-icon-color-active-horizontal);"),Us("menu-item-content-header","\n color: var(--n-item-text-color-active-horizontal);\n ",[Ls("a","color: var(--n-item-text-color-active-horizontal);"),zs("extra","color: var(--n-item-text-color-active-horizontal);")])]),Ns("child-active","\n border-bottom: 2px solid var(--n-border-color-horizontal);\n ",[Us("menu-item-content-header","\n color: var(--n-item-text-color-child-active-horizontal);\n ",[Ls("a","\n color: var(--n-item-text-color-child-active-horizontal);\n "),zs("extra","\n color: var(--n-item-text-color-child-active-horizontal);\n ")]),zs("icon","\n color: var(--n-item-icon-color-child-active-horizontal);\n ")]),js("disabled",[js("selected, child-active",[Ls("&:focus-within",FT)]),Ns("selected",[kT(null,[zs("icon","color: var(--n-item-icon-color-active-hover-horizontal);"),Us("menu-item-content-header","\n color: var(--n-item-text-color-active-hover-horizontal);\n ",[Ls("a","color: var(--n-item-text-color-active-hover-horizontal);"),zs("extra","color: var(--n-item-text-color-active-hover-horizontal);")])])]),Ns("child-active",[kT(null,[zs("icon","color: var(--n-item-icon-color-child-active-hover-horizontal);"),Us("menu-item-content-header","\n color: var(--n-item-text-color-child-active-hover-horizontal);\n ",[Ls("a","color: var(--n-item-text-color-child-active-hover-horizontal);"),zs("extra","color: var(--n-item-text-color-child-active-hover-horizontal);")])])]),kT("border-bottom: 2px solid var(--n-border-color-horizontal);",FT)]),Us("menu-item-content-header",[Ls("a","color: var(--n-item-text-color-horizontal);")])])]),js("responsive",[Us("menu-item-content-header","\n overflow: hidden;\n text-overflow: ellipsis;\n ")]),Ns("collapsed",[Us("menu-item-content",[Ns("selected",[Ls("&::before","\n background-color: var(--n-item-color-active-collapsed) !important;\n ")]),Us("menu-item-content-header","opacity: 0;"),zs("arrow","opacity: 0;"),zs("icon","color: var(--n-item-icon-color-collapsed);")])]),Us("menu-item","\n height: var(--n-item-height);\n margin-top: 6px;\n position: relative;\n "),Us("menu-item-content",'\n box-sizing: border-box;\n line-height: 1.75;\n height: 100%;\n display: grid;\n grid-template-areas: "icon content arrow";\n grid-template-columns: auto 1fr auto;\n align-items: center;\n cursor: pointer;\n position: relative;\n padding-right: 18px;\n transition:\n background-color .3s var(--n-bezier),\n padding-left .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ',[Ls("> *","z-index: 1;"),Ls("&::before",'\n z-index: auto;\n content: "";\n background-color: #0000;\n position: absolute;\n left: 8px;\n right: 8px;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border-radius: var(--n-border-radius);\n transition: background-color .3s var(--n-bezier);\n '),Ns("disabled","\n opacity: .45;\n cursor: not-allowed;\n "),Ns("collapsed",[zs("arrow","transform: rotate(0);")]),Ns("selected",[Ls("&::before","background-color: var(--n-item-color-active);"),zs("arrow","color: var(--n-arrow-color-active);"),zs("icon","color: var(--n-item-icon-color-active);"),Us("menu-item-content-header","\n color: var(--n-item-text-color-active);\n ",[Ls("a","color: var(--n-item-text-color-active);"),zs("extra","color: var(--n-item-text-color-active);")])]),Ns("child-active",[Us("menu-item-content-header","\n color: var(--n-item-text-color-child-active);\n ",[Ls("a","\n color: var(--n-item-text-color-child-active);\n "),zs("extra","\n color: var(--n-item-text-color-child-active);\n ")]),zs("arrow","\n color: var(--n-arrow-color-child-active);\n "),zs("icon","\n color: var(--n-item-icon-color-child-active);\n ")]),js("disabled",[js("selected, child-active",[Ls("&:focus-within",DT)]),Ns("selected",[kT(null,[zs("arrow","color: var(--n-arrow-color-active-hover);"),zs("icon","color: var(--n-item-icon-color-active-hover);"),Us("menu-item-content-header","\n color: var(--n-item-text-color-active-hover);\n ",[Ls("a","color: var(--n-item-text-color-active-hover);"),zs("extra","color: var(--n-item-text-color-active-hover);")])])]),Ns("child-active",[kT(null,[zs("arrow","color: var(--n-arrow-color-child-active-hover);"),zs("icon","color: var(--n-item-icon-color-child-active-hover);"),Us("menu-item-content-header","\n color: var(--n-item-text-color-child-active-hover);\n ",[Ls("a","color: var(--n-item-text-color-child-active-hover);"),zs("extra","color: var(--n-item-text-color-child-active-hover);")])])]),Ns("selected",[kT(null,[Ls("&::before","background-color: var(--n-item-color-active-hover);")])]),kT(null,DT)]),zs("icon","\n grid-area: icon;\n color: var(--n-item-icon-color);\n transition:\n color .3s var(--n-bezier),\n font-size .3s var(--n-bezier),\n margin-right .3s var(--n-bezier);\n box-sizing: content-box;\n display: inline-flex;\n align-items: center;\n justify-content: center;\n "),zs("arrow","\n grid-area: arrow;\n font-size: 16px;\n color: var(--n-arrow-color);\n transform: rotate(180deg);\n opacity: 1;\n transition:\n color .3s var(--n-bezier),\n transform 0.2s var(--n-bezier),\n opacity 0.2s var(--n-bezier);\n "),Us("menu-item-content-header","\n grid-area: content;\n transition:\n color .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n opacity: 1;\n white-space: nowrap;\n color: var(--n-item-text-color);\n ",[Ls("a","\n outline: none;\n text-decoration: none;\n transition: color .3s var(--n-bezier);\n color: var(--n-item-text-color);\n ",[Ls("&::before",'\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),zs("extra","\n font-size: .93em;\n color: var(--n-group-text-color);\n transition: color .3s var(--n-bezier);\n ")])]),Us("submenu","\n cursor: pointer;\n position: relative;\n margin-top: 6px;\n ",[Us("menu-item-content","\n height: var(--n-item-height);\n "),Us("submenu-children","\n overflow: hidden;\n padding: 0;\n ",[zw({duration:".2s"})])]),Us("menu-item-group",[Us("menu-item-group-title","\n margin-top: 6px;\n color: var(--n-group-text-color);\n cursor: default;\n font-size: .93em;\n height: 36px;\n display: flex;\n align-items: center;\n transition:\n padding-left .3s var(--n-bezier),\n color .3s var(--n-bezier);\n ")])]),Us("menu-tooltip",[Ls("a","\n color: inherit;\n text-decoration: none;\n ")]),Us("menu-divider","\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-divider-color);\n height: 1px;\n margin: 6px 18px;\n ")]);function kT(e,t){return[Ns("hover",e,t),Ls("&:hover",e,t)]}const OT=Dn({name:"Menu",props:Object.assign(Object.assign({},sf.props),{options:{type:Array,default:()=>[]},collapsed:{type:Boolean,default:void 0},collapsedWidth:{type:Number,default:48},iconSize:{type:Number,default:20},collapsedIconSize:{type:Number,default:24},rootIndent:Number,indent:{type:Number,default:32},labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandAll:Boolean,defaultExpandedKeys:Array,expandedKeys:Array,value:[String,Number],defaultValue:{type:[String,Number],default:null},mode:{type:String,default:"vertical"},watchProps:{type:Array,default:void 0},disabled:Boolean,show:{type:Boolean,default:!0},inverted:Boolean,"onUpdate:expandedKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],expandIcon:Function,renderIcon:Function,renderLabel:Function,renderExtra:Function,dropdownProps:Object,accordion:Boolean,nodeProps:Function,dropdownPlacement:{type:String,default:"bottom"},responsive:Boolean,items:Array,onOpenNamesChange:[Function,Array],onSelect:[Function,Array],onExpandedNamesChange:[Function,Array],expandedNames:Array,defaultExpandedNames:Array}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Menu","-menu",IT,FP,e,t),i=rr(XP,null),o=eo((()=>{var t;const{collapsed:n}=e;if(void 0!==n)return n;if(i){const{collapseModeRef:e,collapsedRef:n}=i;if("width"===e.value)return null!==(t=n.value)&&void 0!==t&&t}return!1})),a=eo((()=>{const{keyField:t,childrenField:n,disabledField:r}=e;return Wy(e.items||e.options,{getIgnored:e=>PT(e),getChildren:e=>e[n],getDisabled:e=>e[r],getKey(e){var n;return null!==(n=e[t])&&void 0!==n?n:e.name}})})),s=eo((()=>new Set(a.value.treeNodes.map((e=>e.key))))),{watchProps:l}=e,c=bt(null);(null==l?void 0:l.includes("defaultValue"))?Dr((()=>{c.value=e.defaultValue})):c.value=e.defaultValue;const u=xl(Tt(e,"value"),c),d=bt([]),h=()=>{d.value=e.defaultExpandAll?a.value.getNonLeafKeys():e.defaultExpandedNames||e.defaultExpandedKeys||a.value.getPath(u.value,{includeSelf:!1}).keyPath};(null==l?void 0:l.includes("defaultExpandedKeys"))?Dr(h):h();const p=Sl(e,["expandedNames","expandedKeys"]),A=xl(p,d),f=eo((()=>a.value.treeNodes)),m=eo((()=>a.value.getPath(u.value).keyPath));function g(t){const{"onUpdate:expandedKeys":n,onUpdateExpandedKeys:r,onExpandedNamesChange:i,onOpenNamesChange:o}=e;n&&Ka(n,t),r&&Ka(r,t),i&&Ka(i,t),o&&Ka(o,t),d.value=t}nr(pT,{props:e,mergedCollapsedRef:o,mergedThemeRef:r,mergedValueRef:u,mergedExpandedKeysRef:A,activePathRef:m,mergedClsPrefixRef:t,isHorizontalRef:eo((()=>"horizontal"===e.mode)),invertedRef:Tt(e,"inverted"),doSelect:function(t,n){const{"onUpdate:value":r,onUpdateValue:i,onSelect:o}=e;i&&Ka(i,t,n);r&&Ka(r,t,n);o&&Ka(o,t,n);c.value=t},toggleExpand:function(t){const n=Array.from(A.value),r=n.findIndex((e=>e===t));if(~r)n.splice(r,1);else{if(e.accordion&&s.value.has(t)){const e=n.findIndex((e=>s.value.has(e)));e>-1&&n.splice(e,1)}n.push(t)}g(n)}});const v=eo((()=>{const{inverted:t}=e,{common:{cubicBezierEaseInOut:n},self:i}=r.value,{borderRadius:o,borderColorHorizontal:a,fontSize:s,itemHeight:l,dividerColor:c}=i,u={"--n-divider-color":c,"--n-bezier":n,"--n-font-size":s,"--n-border-color-horizontal":a,"--n-border-radius":o,"--n-item-height":l};return t?(u["--n-group-text-color"]=i.groupTextColorInverted,u["--n-color"]=i.colorInverted,u["--n-item-text-color"]=i.itemTextColorInverted,u["--n-item-text-color-hover"]=i.itemTextColorHoverInverted,u["--n-item-text-color-active"]=i.itemTextColorActiveInverted,u["--n-item-text-color-child-active"]=i.itemTextColorChildActiveInverted,u["--n-item-text-color-child-active-hover"]=i.itemTextColorChildActiveInverted,u["--n-item-text-color-active-hover"]=i.itemTextColorActiveHoverInverted,u["--n-item-icon-color"]=i.itemIconColorInverted,u["--n-item-icon-color-hover"]=i.itemIconColorHoverInverted,u["--n-item-icon-color-active"]=i.itemIconColorActiveInverted,u["--n-item-icon-color-active-hover"]=i.itemIconColorActiveHoverInverted,u["--n-item-icon-color-child-active"]=i.itemIconColorChildActiveInverted,u["--n-item-icon-color-child-active-hover"]=i.itemIconColorChildActiveHoverInverted,u["--n-item-icon-color-collapsed"]=i.itemIconColorCollapsedInverted,u["--n-item-text-color-horizontal"]=i.itemTextColorHorizontalInverted,u["--n-item-text-color-hover-horizontal"]=i.itemTextColorHoverHorizontalInverted,u["--n-item-text-color-active-horizontal"]=i.itemTextColorActiveHorizontalInverted,u["--n-item-text-color-child-active-horizontal"]=i.itemTextColorChildActiveHorizontalInverted,u["--n-item-text-color-child-active-hover-horizontal"]=i.itemTextColorChildActiveHoverHorizontalInverted,u["--n-item-text-color-active-hover-horizontal"]=i.itemTextColorActiveHoverHorizontalInverted,u["--n-item-icon-color-horizontal"]=i.itemIconColorHorizontalInverted,u["--n-item-icon-color-hover-horizontal"]=i.itemIconColorHoverHorizontalInverted,u["--n-item-icon-color-active-horizontal"]=i.itemIconColorActiveHorizontalInverted,u["--n-item-icon-color-active-hover-horizontal"]=i.itemIconColorActiveHoverHorizontalInverted,u["--n-item-icon-color-child-active-horizontal"]=i.itemIconColorChildActiveHorizontalInverted,u["--n-item-icon-color-child-active-hover-horizontal"]=i.itemIconColorChildActiveHoverHorizontalInverted,u["--n-arrow-color"]=i.arrowColorInverted,u["--n-arrow-color-hover"]=i.arrowColorHoverInverted,u["--n-arrow-color-active"]=i.arrowColorActiveInverted,u["--n-arrow-color-active-hover"]=i.arrowColorActiveHoverInverted,u["--n-arrow-color-child-active"]=i.arrowColorChildActiveInverted,u["--n-arrow-color-child-active-hover"]=i.arrowColorChildActiveHoverInverted,u["--n-item-color-hover"]=i.itemColorHoverInverted,u["--n-item-color-active"]=i.itemColorActiveInverted,u["--n-item-color-active-hover"]=i.itemColorActiveHoverInverted,u["--n-item-color-active-collapsed"]=i.itemColorActiveCollapsedInverted):(u["--n-group-text-color"]=i.groupTextColor,u["--n-color"]=i.color,u["--n-item-text-color"]=i.itemTextColor,u["--n-item-text-color-hover"]=i.itemTextColorHover,u["--n-item-text-color-active"]=i.itemTextColorActive,u["--n-item-text-color-child-active"]=i.itemTextColorChildActive,u["--n-item-text-color-child-active-hover"]=i.itemTextColorChildActiveHover,u["--n-item-text-color-active-hover"]=i.itemTextColorActiveHover,u["--n-item-icon-color"]=i.itemIconColor,u["--n-item-icon-color-hover"]=i.itemIconColorHover,u["--n-item-icon-color-active"]=i.itemIconColorActive,u["--n-item-icon-color-active-hover"]=i.itemIconColorActiveHover,u["--n-item-icon-color-child-active"]=i.itemIconColorChildActive,u["--n-item-icon-color-child-active-hover"]=i.itemIconColorChildActiveHover,u["--n-item-icon-color-collapsed"]=i.itemIconColorCollapsed,u["--n-item-text-color-horizontal"]=i.itemTextColorHorizontal,u["--n-item-text-color-hover-horizontal"]=i.itemTextColorHoverHorizontal,u["--n-item-text-color-active-horizontal"]=i.itemTextColorActiveHorizontal,u["--n-item-text-color-child-active-horizontal"]=i.itemTextColorChildActiveHorizontal,u["--n-item-text-color-child-active-hover-horizontal"]=i.itemTextColorChildActiveHoverHorizontal,u["--n-item-text-color-active-hover-horizontal"]=i.itemTextColorActiveHoverHorizontal,u["--n-item-icon-color-horizontal"]=i.itemIconColorHorizontal,u["--n-item-icon-color-hover-horizontal"]=i.itemIconColorHoverHorizontal,u["--n-item-icon-color-active-horizontal"]=i.itemIconColorActiveHorizontal,u["--n-item-icon-color-active-hover-horizontal"]=i.itemIconColorActiveHoverHorizontal,u["--n-item-icon-color-child-active-horizontal"]=i.itemIconColorChildActiveHorizontal,u["--n-item-icon-color-child-active-hover-horizontal"]=i.itemIconColorChildActiveHoverHorizontal,u["--n-arrow-color"]=i.arrowColor,u["--n-arrow-color-hover"]=i.arrowColorHover,u["--n-arrow-color-active"]=i.arrowColorActive,u["--n-arrow-color-active-hover"]=i.arrowColorActiveHover,u["--n-arrow-color-child-active"]=i.arrowColorChildActive,u["--n-arrow-color-child-active-hover"]=i.arrowColorChildActiveHover,u["--n-item-color-hover"]=i.itemColorHover,u["--n-item-color-active"]=i.itemColorActive,u["--n-item-color-active-hover"]=i.itemColorActiveHover,u["--n-item-color-active-collapsed"]=i.itemColorActiveCollapsed),u})),y=n?Fv("menu",eo((()=>e.inverted?"a":"b")),v,e):void 0,b=Ha(),w=bt(null),x=bt(null);let C=!0;const S=()=>{var e;C?C=!1:null===(e=w.value)||void 0===e||e.sync({showAllItemsBeforeCalculate:!0})};const B=bt(-1);const _=eo((()=>{const t=B.value;return{children:-1===t?[]:e.options.slice(t)}})),E=eo((()=>{const{childrenField:t,disabledField:n,keyField:r}=e;return Wy([_.value],{getIgnored:e=>PT(e),getChildren:e=>e[t],getDisabled:e=>e[n],getKey(e){var t;return null!==(t=e[r])&&void 0!==t?t:e.name}})})),M=eo((()=>Wy([{}]).treeNodes[0]));return{mergedClsPrefix:t,controlledExpandedKeys:p,uncontrolledExpanededKeys:d,mergedExpandedKeys:A,uncontrolledValue:c,mergedValue:u,activePath:m,tmNodes:f,mergedTheme:r,mergedCollapsed:o,cssVars:n?void 0:v,themeClass:null==y?void 0:y.themeClass,overflowRef:w,counterRef:x,updateCounter:()=>{},onResize:S,onUpdateOverflow:function(e){e||(B.value=-1)},onUpdateCount:function(t){B.value=e.options.length-t},renderCounter:function(){var e;if(-1===B.value)return to(xT,{root:!0,level:0,key:"__ellpisisGroupPlaceholder__",internalKey:"__ellpisisGroupPlaceholder__",title:"···",tmNode:M.value,domId:b,isEllipsisPlaceholder:!0});const t=E.value.treeNodes[0],n=m.value,r=!!(null===(e=t.children)||void 0===e?void 0:e.some((e=>n.includes(e.key))));return to(xT,{level:0,root:!0,key:"__ellpisisGroup__",internalKey:"__ellpisisGroup__",title:"···",virtualChildActive:r,tmNode:t,domId:b,rawNodes:t.rawNode.children||[],tmNodes:t.children||[],isEllipsisPlaceholder:!0})},getCounter:function(){return document.getElementById(b)},onRender:null==y?void 0:y.onRender,showOption:t=>{const n=a.value.getPath(null!=t?t:u.value,{includeSelf:!1}).keyPath;if(!n.length)return;const r=Array.from(A.value),i=new Set([...r,...n]);e.accordion&&s.value.forEach((e=>{i.has(e)&&!n.includes(e)&&i.delete(e)})),g(Array.from(i))},deriveResponsiveState:S}},render(){const{mergedClsPrefix:e,mode:t,themeClass:n,onRender:r}=this;null==r||r();const i=()=>this.tmNodes.map((e=>TT(e,this.$props))),o="horizontal"===t&&this.responsive,a=()=>to("div",{role:"horizontal"===t?"menubar":"menu",class:[`${e}-menu`,n,`${e}-menu--${t}`,o&&`${e}-menu--responsive`,this.mergedCollapsed&&`${e}-menu--collapsed`],style:this.cssVars},o?to(mu,{ref:"overflowRef",onUpdateOverflow:this.onUpdateOverflow,getCounter:this.getCounter,onUpdateCount:this.onUpdateCount,updateCounter:this.updateCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:i,counter:this.renderCounter}):i());return o?to(au,{onResize:this.onResize},{default:a}):a()}}),LT={icon:Function,type:{type:String,default:"info"},content:[String,Number,Function],showIcon:{type:Boolean,default:!0},closable:Boolean,keepAliveOnHover:Boolean,onClose:Function,onMouseenter:Function,onMouseleave:Function},RT="n-message-api",UT="n-message-provider",zT=Ls([Us("message-wrapper","\n margin: var(--n-margin);\n z-index: 0;\n transform-origin: top center;\n display: flex;\n ",[zw({overflow:"visible",originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.85)"}})]),Us("message","\n box-sizing: border-box;\n display: flex;\n align-items: center;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n opacity .3s var(--n-bezier),\n transform .3s var(--n-bezier),\n margin-bottom .3s var(--n-bezier);\n padding: var(--n-padding);\n border-radius: var(--n-border-radius);\n flex-wrap: nowrap;\n overflow: hidden;\n max-width: var(--n-max-width);\n color: var(--n-text-color);\n background-color: var(--n-color);\n box-shadow: var(--n-box-shadow);\n ",[zs("content","\n display: inline-block;\n line-height: var(--n-line-height);\n font-size: var(--n-font-size);\n "),zs("icon","\n position: relative;\n margin: var(--n-icon-margin);\n height: var(--n-icon-size);\n width: var(--n-icon-size);\n font-size: var(--n-icon-size);\n flex-shrink: 0;\n ",[["default","info","success","warning","error","loading"].map((e=>Ns(`${e}-type`,[Ls("> *",`\n color: var(--n-icon-color-${e});\n transition: color .3s var(--n-bezier);\n `)]))),Ls("> *","\n position: absolute;\n left: 0;\n top: 0;\n right: 0;\n bottom: 0;\n ",[vy()])]),zs("close","\n margin: var(--n-close-margin);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n flex-shrink: 0;\n ",[Ls("&:hover","\n color: var(--n-close-icon-color-hover);\n "),Ls("&:active","\n color: var(--n-close-icon-color-pressed);\n ")])]),Us("message-container","\n z-index: 6000;\n position: fixed;\n height: 0;\n overflow: visible;\n display: flex;\n flex-direction: column;\n align-items: center;\n ",[Ns("top","\n top: 12px;\n left: 0;\n right: 0;\n "),Ns("top-left","\n top: 12px;\n left: 12px;\n right: 0;\n align-items: flex-start;\n "),Ns("top-right","\n top: 12px;\n left: 0;\n right: 12px;\n align-items: flex-end;\n "),Ns("bottom","\n bottom: 4px;\n left: 0;\n right: 0;\n justify-content: flex-end;\n "),Ns("bottom-left","\n bottom: 4px;\n left: 12px;\n right: 0;\n justify-content: flex-end;\n align-items: flex-start;\n "),Ns("bottom-right","\n bottom: 4px;\n left: 0;\n right: 12px;\n justify-content: flex-end;\n align-items: flex-end;\n ")])]),NT={info:()=>to(Jv,null),success:()=>to(ny,null),warning:()=>to(iy,null),error:()=>to(qv,null),default:()=>null},jT=Dn({name:"Message",props:Object.assign(Object.assign({},LT),{render:Function}),setup(e){const{inlineThemeDisabled:t,mergedRtlRef:n}=cf(e),{props:r,mergedClsPrefixRef:i}=rr(UT),o=Iv("Message",n,i),a=sf("Message","-message",zT,PP,r,i),s=eo((()=>{const{type:t}=e,{common:{cubicBezierEaseInOut:n},self:{padding:r,margin:i,maxWidth:o,iconMargin:s,closeMargin:l,closeSize:c,iconSize:u,fontSize:d,lineHeight:h,borderRadius:p,iconColorInfo:A,iconColorSuccess:f,iconColorWarning:m,iconColorError:g,iconColorLoading:v,closeIconSize:y,closeBorderRadius:b,[Gs("textColor",t)]:w,[Gs("boxShadow",t)]:x,[Gs("color",t)]:C,[Gs("closeColorHover",t)]:S,[Gs("closeColorPressed",t)]:B,[Gs("closeIconColor",t)]:_,[Gs("closeIconColorPressed",t)]:E,[Gs("closeIconColorHover",t)]:M}}=a.value;return{"--n-bezier":n,"--n-margin":i,"--n-padding":r,"--n-max-width":o,"--n-font-size":d,"--n-icon-margin":s,"--n-icon-size":u,"--n-close-icon-size":y,"--n-close-border-radius":b,"--n-close-size":c,"--n-close-margin":l,"--n-text-color":w,"--n-color":C,"--n-box-shadow":x,"--n-icon-color-info":A,"--n-icon-color-success":f,"--n-icon-color-warning":m,"--n-icon-color-error":g,"--n-icon-color-loading":v,"--n-close-color-hover":S,"--n-close-color-pressed":B,"--n-close-icon-color":_,"--n-close-icon-color-pressed":E,"--n-close-icon-color-hover":M,"--n-line-height":h,"--n-border-radius":p}})),l=t?Fv("message",eo((()=>e.type[0])),s,{}):void 0;return{mergedClsPrefix:i,rtlEnabled:o,messageProviderProps:r,handleClose(){var t;null===(t=e.onClose)||void 0===t||t.call(e)},cssVars:t?void 0:s,themeClass:null==l?void 0:l.themeClass,onRender:null==l?void 0:l.onRender,placement:r.placement}},render(){const{render:e,type:t,closable:n,content:r,mergedClsPrefix:i,cssVars:o,themeClass:a,onRender:s,icon:l,handleClose:c,showIcon:u}=this;let d;return null==s||s(),to("div",{class:[`${i}-message-wrapper`,a],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:[{alignItems:this.placement.startsWith("top")?"flex-start":"flex-end"},o]},e?e(this.$props):to("div",{class:[`${i}-message ${i}-message--${t}-type`,this.rtlEnabled&&`${i}-message--rtl`]},(d=function(e,t,n){if("function"==typeof e)return e();{const e="loading"===t?to(xy,{clsPrefix:n,strokeWidth:24,scale:.85}):NT[t]();return e?to(py,{clsPrefix:n,key:t},{default:()=>e}):null}}(l,t,i))&&u?to("div",{class:`${i}-message__icon ${i}-message__icon--${t}-type`},to(uy,null,{default:()=>d})):null,to("div",{class:`${i}-message__content`},Xa(r)),n?to(fy,{clsPrefix:i,class:`${i}-message__close`,onClick:c,absolute:!0}):null))}});const HT=Dn({name:"MessageEnvironment",props:Object.assign(Object.assign({},LT),{duration:{type:Number,default:3e3},onAfterLeave:Function,onLeave:Function,internalKey:{type:String,required:!0},onInternalAfterLeave:Function,onHide:Function,onAfterHide:Function}),setup(e){let t=null;const n=bt(!0);function r(){const{duration:n}=e;n&&(t=window.setTimeout(i,n))}function i(){const{onHide:r}=e;n.value=!1,t&&(window.clearTimeout(t),t=null),r&&r()}return vn((()=>{r()})),{show:n,hide:i,handleClose:function(){const{onClose:t}=e;t&&t(),i()},handleAfterLeave:function(){const{onAfterLeave:t,onInternalAfterLeave:n,onAfterHide:r,internalKey:i}=e;t&&t(),n&&n(i),r&&r()},handleMouseleave:function(e){e.currentTarget===e.target&&r()},handleMouseenter:function(e){e.currentTarget===e.target&&null!==t&&(window.clearTimeout(t),t=null)},deactivate:function(){i()}}},render(){return to(dy,{appear:!0,onAfterLeave:this.handleAfterLeave,onLeave:this.onLeave},{default:()=>[this.show?to(jT,{content:this.content,type:this.type,icon:this.icon,showIcon:this.showIcon,closable:this.closable,onClose:this.handleClose,onMouseenter:this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.keepAliveOnHover?this.handleMouseleave:void 0}):null]})}}),QT=Dn({name:"MessageProvider",props:Object.assign(Object.assign({},sf.props),{to:[String,Object],duration:{type:Number,default:3e3},keepAliveOnHover:Boolean,max:Number,placement:{type:String,default:"top"},closable:Boolean,containerClass:String,containerStyle:[String,Object]}),setup(e){const{mergedClsPrefixRef:t}=cf(e),n=bt([]),r=bt({}),i={create:(e,t)=>o(e,Object.assign({type:"default"},t)),info:(e,t)=>o(e,Object.assign(Object.assign({},t),{type:"info"})),success:(e,t)=>o(e,Object.assign(Object.assign({},t),{type:"success"})),warning:(e,t)=>o(e,Object.assign(Object.assign({},t),{type:"warning"})),error:(e,t)=>o(e,Object.assign(Object.assign({},t),{type:"error"})),loading:(e,t)=>o(e,Object.assign(Object.assign({},t),{type:"loading"})),destroyAll:function(){Object.values(r.value).forEach((e=>{e.hide()}))}};function o(t,i){const o=Ha(),a=it(Object.assign(Object.assign({},i),{content:t,key:o,destroy:()=>{var e;null===(e=r.value[o])||void 0===e||e.hide()}})),{max:s}=e;return s&&n.value.length>=s&&n.value.shift(),n.value.push(a),a}return nr(UT,{props:e,mergedClsPrefixRef:t}),nr(RT,i),Object.assign({mergedClsPrefix:t,messageRefs:r,messageList:n,handleAfterLeave:function(e){n.value.splice(n.value.findIndex((t=>t.key===e)),1),delete r.value[e]}},i)},render(){var e,t,n;return to(di,null,null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e),this.messageList.length?to(ci,{to:null!==(n=this.to)&&void 0!==n?n:"body"},to("div",{class:[`${this.mergedClsPrefix}-message-container`,`${this.mergedClsPrefix}-message-container--${this.placement}`,this.containerClass],key:"message-container",style:this.containerStyle},this.messageList.map((e=>to(HT,Object.assign({ref:t=>{t&&(this.messageRefs[e.key]=t)},internalKey:e.key,onInternalAfterLeave:this.handleAfterLeave},Ga(e,["destroy"],void 0),{duration:void 0===e.duration?this.duration:e.duration,keepAliveOnHover:void 0===e.keepAliveOnHover?this.keepAliveOnHover:e.keepAliveOnHover,closable:void 0===e.closable?this.closable:e.closable})))))):null)}});function VT(){const e=rr(RT,null);return null===e&&$a("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),e}const WT=Dn({name:"ModalEnvironment",props:Object.assign(Object.assign({},aM),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const t=bt(!0);function n(){t.value=!1}return{show:t,hide:n,handleUpdateShow:function(e){t.value=e},handleAfterLeave:function(){const{onInternalAfterLeave:t,internalKey:n,onAfterLeave:r}=e;t&&t(n),r&&r()},handleCloseClick:function(){const{onClose:t}=e;t?Promise.resolve(t()).then((e=>{!1!==e&&n()})):n()},handleNegativeClick:function(){const{onNegativeClick:t}=e;t?Promise.resolve(t()).then((e=>{!1!==e&&n()})):n()},handlePositiveClick:function(){const{onPositiveClick:t}=e;t?Promise.resolve(t()).then((e=>{!1!==e&&n()})):n()},handleMaskClick:function(t){const{onMaskClick:r,maskClosable:i}=e;r&&(r(t),i&&n())},handleEsc:function(){const{onEsc:t}=e;t&&t()}}},render(){const{handleUpdateShow:e,handleAfterLeave:t,handleMaskClick:n,handleEsc:r,show:i}=this;return to(sM,Object.assign({},this.$props,{show:i,onUpdateShow:e,onMaskClick:n,onEsc:r,onAfterLeave:t,internalAppear:!0,internalModal:!0}))}}),GT="n-modal-provider",qT=Dn({name:"ModalProvider",props:{to:[String,Object]},setup(){const e=wl(64),t=ml(),n=bt([]),r={};const i={create:function(e={}){const t=Ha(),i=it(Object.assign(Object.assign({},e),{key:t,destroy:()=>{var e;null===(e=r[`n-modal-${t}`])||void 0===e||e.hide()}}));return n.value.push(i),i},destroyAll:function(){Object.values(r).forEach((e=>{null==e||e.hide()}))}};return nr("n-modal-api",i),nr(GT,{clickedRef:wl(64),clickedPositionRef:ml()}),nr("n-modal-reactive-list",n),nr(GT,{clickedRef:e,clickedPositionRef:t}),Object.assign(Object.assign({},i),{modalList:n,modalInstRefs:r,handleAfterLeave:function(e){const{value:t}=n;t.splice(t.findIndex((t=>t.key===e)),1)}})},render(){var e,t;return to(di,null,[this.modalList.map((e=>{var t;return to(WT,Ga(e,["destroy"],{to:null!==(t=e.to)&&void 0!==t?t:this.to,ref:t=>{null===t?delete this.modalInstRefs[`n-modal-${e.key}`]:this.modalInstRefs[`n-modal-${e.key}`]=t},internalKey:e.key,onInternalAfterLeave:this.handleAfterLeave}))})),null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)])}}),KT=Ls([Us("page-header-header","\n margin-bottom: 20px;\n "),Us("page-header","\n display: flex;\n align-items: center;\n justify-content: space-between;\n line-height: 1.5;\n font-size: var(--n-font-size);\n ",[zs("main","\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n "),zs("back","\n display: flex;\n margin-right: 16px;\n font-size: var(--n-back-size);\n cursor: pointer;\n color: var(--n-back-color);\n transition: color .3s var(--n-bezier);\n ",[Ls("&:hover","color: var(--n-back-color-hover);"),Ls("&:active","color: var(--n-back-color-pressed);")]),zs("avatar","\n display: flex;\n margin-right: 12px\n "),zs("title","\n margin-right: 16px;\n transition: color .3s var(--n-bezier);\n font-size: var(--n-title-font-size);\n font-weight: var(--n-title-font-weight);\n color: var(--n-title-text-color);\n "),zs("subtitle","\n font-size: 14px;\n transition: color .3s var(--n-bezier);\n color: var(--n-subtitle-text-color);\n ")]),Us("page-header-content","\n font-size: var(--n-font-size);\n ",[Ls("&:not(:first-child)","margin-top: 20px;")]),Us("page-header-footer","\n font-size: var(--n-font-size);\n ",[Ls("&:not(:first-child)","margin-top: 20px;")])]),YT=Dn({name:"PageHeader",props:Object.assign(Object.assign({},sf.props),{title:String,subtitle:String,extra:String,onBack:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n,inlineThemeDisabled:r}=cf(e),i=sf("PageHeader","-page-header",KT,kP,e,t),o=Iv("PageHeader",n,t),a=eo((()=>{const{self:{titleTextColor:e,subtitleTextColor:t,backColor:n,fontSize:r,titleFontSize:o,backSize:a,titleFontWeight:s,backColorHover:l,backColorPressed:c},common:{cubicBezierEaseInOut:u}}=i.value;return{"--n-title-text-color":e,"--n-title-font-size":o,"--n-title-font-weight":s,"--n-font-size":r,"--n-back-size":a,"--n-subtitle-text-color":t,"--n-back-color":n,"--n-back-color-hover":l,"--n-back-color-pressed":c,"--n-bezier":u}})),s=r?Fv("page-header",void 0,a,e):void 0;return{rtlEnabled:o,mergedClsPrefix:t,cssVars:r?void 0:a,themeClass:null==s?void 0:s.themeClass,onRender:null==s?void 0:s.onRender}},render(){var e;const{onBack:t,title:n,subtitle:r,extra:i,mergedClsPrefix:o,cssVars:a,$slots:s}=this;null===(e=this.onRender)||void 0===e||e.call(this);const{title:l,subtitle:c,extra:u,default:d,header:h,avatar:p,footer:A,back:f}=s,m=t,g=n||l,v=r||c,y=i||u;return to("div",{style:a,class:[`${o}-page-header-wrapper`,this.themeClass,this.rtlEnabled&&`${o}-page-header-wrapper--rtl`]},h?to("div",{class:`${o}-page-header-header`,key:"breadcrumb"},h()):null,(m||p||g||v||y)&&to("div",{class:`${o}-page-header`,key:"header"},to("div",{class:`${o}-page-header__main`,key:"back"},m?to("div",{class:`${o}-page-header__back`,onClick:t},f?f():to(py,{clsPrefix:o},{default:()=>to(cy,null)})):null,p?to("div",{class:`${o}-page-header__avatar`},p()):null,g?to("div",{class:`${o}-page-header__title`,key:"title"},n||l()):null,v?to("div",{class:`${o}-page-header__subtitle`,key:"subtitle"},r||c()):null),y?to("div",{class:`${o}-page-header__extra`},i||u()):null),d?to("div",{class:`${o}-page-header-content`,key:"content"},d()):null,A?to("div",{class:`${o}-page-header-footer`,key:"footer"},A()):null)}}),XT=Dn({name:"Scrollbar",props:Object.assign(Object.assign({},sf.props),{trigger:String,xScrollable:Boolean,onScroll:Function,contentClass:String,contentStyle:[Object,String],size:Number}),setup(){const e=bt(null),t={scrollTo:(...t)=>{var n;null===(n=e.value)||void 0===n||n.scrollTo(t[0],t[1])},scrollBy:(...t)=>{var n;null===(n=e.value)||void 0===n||n.scrollBy(t[0],t[1])}};return Object.assign(Object.assign({},t),{scrollbarInstRef:e})},render(){return to(Gb,Object.assign({ref:"scrollbarInstRef"},this.$props),this.$slots)}}),$T=Us("statistic",[zs("label","\n font-weight: var(--n-label-font-weight);\n transition: .3s color var(--n-bezier);\n font-size: var(--n-label-font-size);\n color: var(--n-label-text-color);\n "),Us("statistic-value","\n margin-top: 4px;\n font-weight: var(--n-value-font-weight);\n ",[zs("prefix","\n margin: 0 4px 0 0;\n font-size: var(--n-value-font-size);\n transition: .3s color var(--n-bezier);\n color: var(--n-value-prefix-text-color);\n ",[Us("icon",{verticalAlign:"-0.125em"})]),zs("content","\n font-size: var(--n-value-font-size);\n transition: .3s color var(--n-bezier);\n color: var(--n-value-text-color);\n "),zs("suffix","\n margin: 0 0 0 4px;\n font-size: var(--n-value-font-size);\n transition: .3s color var(--n-bezier);\n color: var(--n-value-suffix-text-color);\n ",[Us("icon",{verticalAlign:"-0.125em"})])])]),JT=Dn({name:"Statistic",props:Object.assign(Object.assign({},sf.props),{tabularNums:Boolean,label:String,value:[String,Number]}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:r}=cf(e),i=sf("Statistic","-statistic",$T,OP,e,t),o=Iv("Statistic",r,t),a=eo((()=>{const{self:{labelFontWeight:e,valueFontSize:t,valueFontWeight:n,valuePrefixTextColor:r,labelTextColor:o,valueSuffixTextColor:a,valueTextColor:s,labelFontSize:l},common:{cubicBezierEaseInOut:c}}=i.value;return{"--n-bezier":c,"--n-label-font-size":l,"--n-label-font-weight":e,"--n-label-text-color":o,"--n-value-font-weight":n,"--n-value-font-size":t,"--n-value-prefix-text-color":r,"--n-value-suffix-text-color":a,"--n-value-text-color":s}})),s=n?Fv("statistic",void 0,a,e):void 0;return{rtlEnabled:o,mergedClsPrefix:t,cssVars:n?void 0:a,themeClass:null==s?void 0:s.themeClass,onRender:null==s?void 0:s.onRender}},render(){var e;const{mergedClsPrefix:t,$slots:{default:n,label:r,prefix:i,suffix:o}}=this;return null===(e=this.onRender)||void 0===e||e.call(this),to("div",{class:[`${t}-statistic`,this.themeClass,this.rtlEnabled&&`${t}-statistic--rtl`],style:this.cssVars},os(r,(e=>to("div",{class:`${t}-statistic__label`},this.label||e))),to("div",{class:`${t}-statistic-value`,style:{fontVariantNumeric:this.tabularNums?"tabular-nums":""}},os(i,(e=>e&&to("span",{class:`${t}-statistic-value__prefix`},e))),void 0!==this.value?to("span",{class:`${t}-statistic-value__content`},this.value):os(n,(e=>e&&to("span",{class:`${t}-statistic-value__content`},e))),os(o,(e=>e&&to("span",{class:`${t}-statistic-value__suffix`},e)))))}}),ZT=Us("steps","\n width: 100%;\n display: flex;\n",[Us("step","\n position: relative;\n display: flex;\n flex: 1;\n ",[Ns("disabled","cursor: not-allowed"),Ns("clickable","\n cursor: pointer;\n "),Ls("&:last-child",[Us("step-splitor","display: none;")])]),Us("step-splitor","\n background-color: var(--n-splitor-color);\n margin-top: calc(var(--n-step-header-font-size) / 2);\n height: 1px;\n flex: 1;\n align-self: flex-start;\n margin-left: 12px;\n margin-right: 12px;\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),Us("step-content","flex: 1;",[Us("step-content-header","\n color: var(--n-header-text-color);\n margin-top: calc(var(--n-indicator-size) / 2 - var(--n-step-header-font-size) / 2);\n line-height: var(--n-step-header-font-size);\n font-size: var(--n-step-header-font-size);\n position: relative;\n display: flex;\n font-weight: var(--n-step-header-font-weight);\n margin-left: 9px;\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ",[zs("title","\n white-space: nowrap;\n flex: 0;\n ")]),zs("description","\n color: var(--n-description-text-color);\n margin-top: 12px;\n margin-left: 9px;\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ")]),Us("step-indicator","\n background-color: var(--n-indicator-color);\n box-shadow: 0 0 0 1px var(--n-indicator-border-color);\n height: var(--n-indicator-size);\n width: var(--n-indicator-size);\n border-radius: 50%;\n display: flex;\n align-items: center;\n justify-content: center;\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n ",[Us("step-indicator-slot","\n position: relative;\n width: var(--n-indicator-icon-size);\n height: var(--n-indicator-icon-size);\n font-size: var(--n-indicator-icon-size);\n line-height: var(--n-indicator-icon-size);\n ",[zs("index","\n display: inline-block;\n text-align: center;\n position: absolute;\n left: 0;\n top: 0;\n white-space: nowrap;\n font-size: var(--n-indicator-index-font-size);\n width: var(--n-indicator-icon-size);\n height: var(--n-indicator-icon-size);\n line-height: var(--n-indicator-icon-size);\n color: var(--n-indicator-text-color);\n transition: color .3s var(--n-bezier);\n ",[vy()]),Us("icon","\n color: var(--n-indicator-text-color);\n transition: color .3s var(--n-bezier);\n ",[vy()]),Us("base-icon","\n color: var(--n-indicator-text-color);\n transition: color .3s var(--n-bezier);\n ",[vy()])])]),Ns("vertical","flex-direction: column;",[js("show-description",[Ls(">",[Us("step","padding-bottom: 8px;")])]),Ls(">",[Us("step","margin-bottom: 16px;",[Ls("&:last-child","margin-bottom: 0;"),Ls(">",[Us("step-indicator",[Ls(">",[Us("step-splitor","\n position: absolute;\n bottom: -8px;\n width: 1px;\n margin: 0 !important;\n left: calc(var(--n-indicator-size) / 2);\n height: calc(100% - var(--n-indicator-size));\n ")])]),Us("step-content",[zs("description","margin-top: 8px;")])])])])])]);function eD(e){return e.map(((e,t)=>function(e,t){return"object"!=typeof e||null===e||Array.isArray(e)?null:(e.props||(e.props={}),e.props.internalIndex=t+1,e)}(e,t)))}const tD=Object.assign(Object.assign({},sf.props),{current:Number,status:{type:String,default:"process"},size:{type:String,default:"medium"},vertical:Boolean,"onUpdate:current":[Function,Array],onUpdateCurrent:[Function,Array]}),nD="n-steps",rD=Dn({name:"Steps",props:tD,setup(e,{slots:t}){const{mergedClsPrefixRef:n,mergedRtlRef:r}=cf(e),i=Iv("Steps",r,n),o=sf("Steps","-steps",ZT,RP,e,n);return nr(nD,{props:e,mergedThemeRef:o,mergedClsPrefixRef:n,stepsSlots:t}),{mergedClsPrefix:n,rtlEnabled:i}},render(){const{mergedClsPrefix:e}=this;return to("div",{class:[`${e}-steps`,this.rtlEnabled&&`${e}-steps--rtl`,this.vertical&&`${e}-steps--vertical`]},eD(qa(Va(this))))}}),iD=Dn({name:"Step",props:{status:String,title:String,description:String,disabled:Boolean,internalIndex:{type:Number,default:0}},setup(e){const t=rr(nD,null);t||$a("step","`n-step` must be placed inside `n-steps`.");const{inlineThemeDisabled:n}=cf(),{props:r,mergedThemeRef:i,mergedClsPrefixRef:o,stepsSlots:a}=t,s=eo((()=>r.vertical)),l=eo((()=>{const{status:t}=e;if(t)return t;{const{internalIndex:t}=e,{current:n}=r;if(void 0===n)return"process";if(t<n)return"finish";if(t===n)return r.status||"process";if(t>n)return"wait"}return"process"})),c=eo((()=>{const{value:e}=l,{size:t}=r,{common:{cubicBezierEaseInOut:n},self:{stepHeaderFontWeight:o,[Gs("stepHeaderFontSize",t)]:a,[Gs("indicatorIndexFontSize",t)]:s,[Gs("indicatorSize",t)]:c,[Gs("indicatorIconSize",t)]:u,[Gs("indicatorTextColor",e)]:d,[Gs("indicatorBorderColor",e)]:h,[Gs("headerTextColor",e)]:p,[Gs("splitorColor",e)]:A,[Gs("indicatorColor",e)]:f,[Gs("descriptionTextColor",e)]:m}}=i.value;return{"--n-bezier":n,"--n-description-text-color":m,"--n-header-text-color":p,"--n-indicator-border-color":h,"--n-indicator-color":f,"--n-indicator-icon-size":u,"--n-indicator-index-font-size":s,"--n-indicator-size":c,"--n-indicator-text-color":d,"--n-splitor-color":A,"--n-step-header-font-size":a,"--n-step-header-font-weight":o}})),u=n?Fv("step",eo((()=>{const{value:e}=l,{size:t}=r;return`${e[0]}${t[0]}`})),c,r):void 0,d=eo((()=>{if(e.disabled)return;const{onUpdateCurrent:t,"onUpdate:current":n}=r;return t||n?()=>{t&&Ka(t,e.internalIndex),n&&Ka(n,e.internalIndex)}:void 0}));return{stepsSlots:a,mergedClsPrefix:o,vertical:s,mergedStatus:l,handleStepClick:d,cssVars:n?void 0:c,themeClass:null==u?void 0:u.themeClass,onRender:null==u?void 0:u.onRender}},render(){const{mergedClsPrefix:e,onRender:t,handleStepClick:n,disabled:r}=this,i=os(this.$slots.default,(t=>{const n=t||this.description;return n?to("div",{class:`${e}-step-content__description`},n):null}));return null==t||t(),to("div",{class:[`${e}-step`,r&&`${e}-step--disabled`,!r&&n&&`${e}-step--clickable`,this.themeClass,i&&`${e}-step--show-description`,`${e}-step--${this.mergedStatus}-status`],style:this.cssVars,onClick:n},to("div",{class:`${e}-step-indicator`},to("div",{class:`${e}-step-indicator-slot`},to(uy,null,{default:()=>os(this.$slots.icon,(t=>{const{mergedStatus:n,stepsSlots:r}=this;return"finish"!==n&&"error"!==n?t||to("div",{key:this.internalIndex,class:`${e}-step-indicator-slot__index`},this.internalIndex):"finish"===n?to(py,{clsPrefix:e,key:"finish"},{default:()=>rs(r["finish-icon"],(()=>[to(Nv,null)]))}):"error"===n?to(py,{clsPrefix:e,key:"error"},{default:()=>rs(r["error-icon"],(()=>[to(Qv,null)]))}):null}))})),this.vertical?to("div",{class:`${e}-step-splitor`}):null),to("div",{class:`${e}-step-content`},to("div",{class:`${e}-step-content-header`},to("div",{class:`${e}-step-content-header__title`},rs(this.$slots.title,(()=>[this.title]))),this.vertical?null:to("div",{class:`${e}-step-splitor`})),i))}}),oD=Us("switch","\n height: var(--n-height);\n min-width: var(--n-width);\n vertical-align: middle;\n user-select: none;\n -webkit-user-select: none;\n display: inline-flex;\n outline: none;\n justify-content: center;\n align-items: center;\n",[zs("children-placeholder","\n height: var(--n-rail-height);\n display: flex;\n flex-direction: column;\n overflow: hidden;\n pointer-events: none;\n visibility: hidden;\n "),zs("rail-placeholder","\n display: flex;\n flex-wrap: none;\n "),zs("button-placeholder","\n width: calc(1.75 * var(--n-rail-height));\n height: var(--n-rail-height);\n "),Us("base-loading","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n font-size: calc(var(--n-button-width) - 4px);\n color: var(--n-loading-color);\n transition: color .3s var(--n-bezier);\n ",[vy({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),zs("checked, unchecked","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n box-sizing: border-box;\n position: absolute;\n white-space: nowrap;\n top: 0;\n bottom: 0;\n display: flex;\n align-items: center;\n line-height: 1;\n "),zs("checked","\n right: 0;\n padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));\n "),zs("unchecked","\n left: 0;\n justify-content: flex-end;\n padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));\n "),Ls("&:focus",[zs("rail","\n box-shadow: var(--n-box-shadow-focus);\n ")]),Ns("round",[zs("rail","border-radius: calc(var(--n-rail-height) / 2);",[zs("button","border-radius: calc(var(--n-button-height) / 2);")])]),js("disabled",[js("icon",[Ns("rubber-band",[Ns("pressed",[zs("rail",[zs("button","max-width: var(--n-button-width-pressed);")])]),zs("rail",[Ls("&:active",[zs("button","max-width: var(--n-button-width-pressed);")])]),Ns("active",[Ns("pressed",[zs("rail",[zs("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),zs("rail",[Ls("&:active",[zs("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),Ns("active",[zs("rail",[zs("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),zs("rail","\n overflow: hidden;\n height: var(--n-rail-height);\n min-width: var(--n-rail-width);\n border-radius: var(--n-rail-border-radius);\n cursor: pointer;\n position: relative;\n transition:\n opacity .3s var(--n-bezier),\n background .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-rail-color);\n ",[zs("button-icon","\n color: var(--n-icon-color);\n transition: color .3s var(--n-bezier);\n font-size: calc(var(--n-button-height) - 4px);\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n display: flex;\n justify-content: center;\n align-items: center;\n line-height: 1;\n ",[vy()]),zs("button",'\n align-items: center; \n top: var(--n-offset);\n left: var(--n-offset);\n height: var(--n-button-height);\n width: var(--n-button-width-pressed);\n max-width: var(--n-button-width);\n border-radius: var(--n-button-border-radius);\n background-color: var(--n-button-color);\n box-shadow: var(--n-button-box-shadow);\n box-sizing: border-box;\n cursor: inherit;\n content: "";\n position: absolute;\n transition:\n background-color .3s var(--n-bezier),\n left .3s var(--n-bezier),\n opacity .3s var(--n-bezier),\n max-width .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n ')]),Ns("active",[zs("rail","background-color: var(--n-rail-color-active);")]),Ns("loading",[zs("rail","\n cursor: wait;\n ")]),Ns("disabled",[zs("rail","\n cursor: not-allowed;\n opacity: .5;\n ")])]);let aD;const sD=Dn({name:"Switch",props:Object.assign(Object.assign({},sf.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]}),setup(e){void 0===aD&&(aD="undefined"==typeof CSS||void 0!==CSS.supports&&CSS.supports("width","max(1px)"));const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Switch","-switch",oD,zP,e,t),i=Lu(e),{mergedSizeRef:o,mergedDisabledRef:a}=i,s=bt(e.defaultValue),l=xl(Tt(e,"value"),s),c=eo((()=>l.value===e.checkedValue)),u=bt(!1),d=bt(!1),h=eo((()=>{const{railStyle:t}=e;if(t)return t({focused:d.value,checked:c.value})}));function p(t){const{"onUpdate:value":n,onChange:r,onUpdateValue:o}=e,{nTriggerFormInput:a,nTriggerFormChange:l}=i;n&&Ka(n,t),o&&Ka(o,t),r&&Ka(r,t),s.value=t,a(),l()}const A=eo((()=>{const{value:e}=o,{self:{opacityDisabled:t,railColor:n,railColorActive:i,buttonBoxShadow:a,buttonColor:s,boxShadowFocus:l,loadingColor:c,textColor:u,iconColor:d,[Gs("buttonHeight",e)]:h,[Gs("buttonWidth",e)]:p,[Gs("buttonWidthPressed",e)]:A,[Gs("railHeight",e)]:f,[Gs("railWidth",e)]:m,[Gs("railBorderRadius",e)]:g,[Gs("buttonBorderRadius",e)]:v},common:{cubicBezierEaseInOut:y}}=r.value;let b,w,x;return aD?(b=`calc((${f} - ${h}) / 2)`,w=`max(${f}, ${h})`,x=`max(${m}, calc(${m} + ${h} - ${f}))`):(b=va((ga(f)-ga(h))/2),w=va(Math.max(ga(f),ga(h))),x=ga(f)>ga(h)?m:va(ga(m)+ga(h)-ga(f))),{"--n-bezier":y,"--n-button-border-radius":v,"--n-button-box-shadow":a,"--n-button-color":s,"--n-button-width":p,"--n-button-width-pressed":A,"--n-button-height":h,"--n-height":w,"--n-offset":b,"--n-opacity-disabled":t,"--n-rail-border-radius":g,"--n-rail-color":n,"--n-rail-color-active":i,"--n-rail-height":f,"--n-rail-width":m,"--n-width":x,"--n-box-shadow-focus":l,"--n-loading-color":c,"--n-text-color":u,"--n-icon-color":d}})),f=n?Fv("switch",eo((()=>o.value[0])),A,e):void 0;return{handleClick:function(){e.loading||a.value||(l.value!==e.checkedValue?p(e.checkedValue):p(e.uncheckedValue))},handleBlur:function(){d.value=!1,function(){const{nTriggerFormBlur:e}=i;e()}(),u.value=!1},handleFocus:function(){d.value=!0,function(){const{nTriggerFormFocus:e}=i;e()}()},handleKeyup:function(t){e.loading||a.value||" "===t.key&&(l.value!==e.checkedValue?p(e.checkedValue):p(e.uncheckedValue),u.value=!1)},handleKeydown:function(t){e.loading||a.value||" "===t.key&&(t.preventDefault(),u.value=!0)},mergedRailStyle:h,pressed:u,mergedClsPrefix:t,mergedValue:l,checked:c,mergedDisabled:a,cssVars:n?void 0:A,themeClass:null==f?void 0:f.themeClass,onRender:null==f?void 0:f.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:t,checked:n,mergedRailStyle:r,onRender:i,$slots:o}=this;null==i||i();const{checked:a,unchecked:s,icon:l,"checked-icon":c,"unchecked-icon":u}=o,d=!(as(l)&&as(c)&&as(u));return to("div",{role:"switch","aria-checked":n,class:[`${e}-switch`,this.themeClass,d&&`${e}-switch--icon`,n&&`${e}-switch--active`,t&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},to("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:r},os(a,(t=>os(s,(n=>t||n?to("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},to("div",{class:`${e}-switch__rail-placeholder`},to("div",{class:`${e}-switch__button-placeholder`}),t),to("div",{class:`${e}-switch__rail-placeholder`},to("div",{class:`${e}-switch__button-placeholder`}),n)):null)))),to("div",{class:`${e}-switch__button`},os(l,(t=>os(c,(n=>os(u,(r=>to(uy,null,{default:()=>this.loading?to(xy,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(n||t)?to("div",{class:`${e}-switch__button-icon`,key:n?"checked-icon":"icon"},n||t):this.checked||!r&&!t?null:to("div",{class:`${e}-switch__button-icon`,key:r?"unchecked-icon":"icon"},r||t)}))))))),os(a,(t=>t&&to("div",{key:"checked",class:`${e}-switch__checked`},t))),os(s,(t=>t&&to("div",{key:"unchecked",class:`${e}-switch__unchecked`},t))))))}}),lD="n-tabs",cD={tab:[String,Number,Object,Function],name:{type:[String,Number],required:!0},disabled:Boolean,displayDirective:{type:String,default:"if"},closable:{type:Boolean,default:void 0},tabProps:Object,label:[String,Number,Object,Function]},uD=Dn({__TAB_PANE__:!0,name:"TabPane",alias:["TabPanel"],props:cD,setup(e){const t=rr(lD,null);return t||$a("tab-pane","`n-tab-pane` must be placed inside `n-tabs`."),{style:t.paneStyleRef,class:t.paneClassRef,mergedClsPrefix:t.mergedClsPrefixRef}},render(){return to("div",{class:[`${this.mergedClsPrefix}-tab-pane`,this.class],style:this.style},this.$slots)}}),dD=Dn({__TAB__:!0,inheritAttrs:!1,name:"Tab",props:Object.assign({internalLeftPadded:Boolean,internalAddable:Boolean,internalCreatedByPane:Boolean},Ga(cD,["displayDirective"])),setup(e){const{mergedClsPrefixRef:t,valueRef:n,typeRef:r,closableRef:i,tabStyleRef:o,addTabStyleRef:a,tabClassRef:s,addTabClassRef:l,tabChangeIdRef:c,onBeforeLeaveRef:u,triggerRef:d,handleAdd:h,activateTab:p,handleClose:A}=rr(lD);return{trigger:d,mergedClosable:eo((()=>{if(e.internalAddable)return!1;const{closable:t}=e;return void 0===t?i.value:t})),style:o,addStyle:a,tabClass:s,addTabClass:l,clsPrefix:t,value:n,type:r,handleClose(t){t.stopPropagation(),e.disabled||A(e.name)},activateTab(){if(e.disabled)return;if(e.internalAddable)return void h();const{name:t}=e,r=++c.id;if(t!==n.value){const{value:i}=u;i?Promise.resolve(i(e.name,n.value)).then((e=>{e&&c.id===r&&p(t)})):p(t)}}}},render(){const{internalAddable:e,clsPrefix:t,name:n,disabled:r,label:i,tab:o,value:a,mergedClosable:s,trigger:l,$slots:{default:c}}=this,u=null!=i?i:o;return to("div",{class:`${t}-tabs-tab-wrapper`},this.internalLeftPadded?to("div",{class:`${t}-tabs-tab-pad`}):null,to("div",Object.assign({key:n,"data-name":n,"data-disabled":!!r||void 0},Li({class:[`${t}-tabs-tab`,a===n&&`${t}-tabs-tab--active`,r&&`${t}-tabs-tab--disabled`,s&&`${t}-tabs-tab--closable`,e&&`${t}-tabs-tab--addable`,e?this.addTabClass:this.tabClass],onClick:"click"===l?this.activateTab:void 0,onMouseenter:"hover"===l?this.activateTab:void 0,style:e?this.addStyle:this.style},this.internalCreatedByPane?this.tabProps||{}:this.$attrs)),to("span",{class:`${t}-tabs-tab__label`},e?to(di,null,to("div",{class:`${t}-tabs-tab__height-placeholder`}," "),to(py,{clsPrefix:t},{default:()=>to(kv,null)})):c?c():"object"==typeof u?u:Xa(null!=u?u:n)),s&&"card"===this.type?to(fy,{clsPrefix:t,class:`${t}-tabs-tab__close`,onClick:this.handleClose,disabled:r}):null))}}),hD=Us("tabs","\n box-sizing: border-box;\n width: 100%;\n display: flex;\n flex-direction: column;\n transition:\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n",[Ns("segment-type",[Us("tabs-rail",[Ls("&.transition-disabled",[Us("tabs-capsule","\n transition: none;\n ")])])]),Ns("top",[Us("tab-pane","\n padding: var(--n-pane-padding-top) var(--n-pane-padding-right) var(--n-pane-padding-bottom) var(--n-pane-padding-left);\n ")]),Ns("left",[Us("tab-pane","\n padding: var(--n-pane-padding-right) var(--n-pane-padding-bottom) var(--n-pane-padding-left) var(--n-pane-padding-top);\n ")]),Ns("left, right","\n flex-direction: row;\n ",[Us("tabs-bar","\n width: 2px;\n right: 0;\n transition:\n top .2s var(--n-bezier),\n max-height .2s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),Us("tabs-tab","\n padding: var(--n-tab-padding-vertical); \n ")]),Ns("right","\n flex-direction: row-reverse;\n ",[Us("tab-pane","\n padding: var(--n-pane-padding-left) var(--n-pane-padding-top) var(--n-pane-padding-right) var(--n-pane-padding-bottom);\n "),Us("tabs-bar","\n left: 0;\n ")]),Ns("bottom","\n flex-direction: column-reverse;\n justify-content: flex-end;\n ",[Us("tab-pane","\n padding: var(--n-pane-padding-bottom) var(--n-pane-padding-right) var(--n-pane-padding-top) var(--n-pane-padding-left);\n "),Us("tabs-bar","\n top: 0;\n ")]),Us("tabs-rail","\n position: relative;\n padding: 3px;\n border-radius: var(--n-tab-border-radius);\n width: 100%;\n background-color: var(--n-color-segment);\n transition: background-color .3s var(--n-bezier);\n display: flex;\n align-items: center;\n ",[Us("tabs-capsule","\n border-radius: var(--n-tab-border-radius);\n position: absolute;\n pointer-events: none;\n background-color: var(--n-tab-color-segment);\n box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .08);\n transition: transform 0.3s var(--n-bezier);\n "),Us("tabs-tab-wrapper","\n flex-basis: 0;\n flex-grow: 1;\n display: flex;\n align-items: center;\n justify-content: center;\n ",[Us("tabs-tab","\n overflow: hidden;\n border-radius: var(--n-tab-border-radius);\n width: 100%;\n display: flex;\n align-items: center;\n justify-content: center;\n ",[Ns("active","\n font-weight: var(--n-font-weight-strong);\n color: var(--n-tab-text-color-active);\n "),Ls("&:hover","\n color: var(--n-tab-text-color-hover);\n ")])])]),Ns("flex",[Us("tabs-nav","\n width: 100%;\n position: relative;\n ",[Us("tabs-wrapper","\n width: 100%;\n ",[Us("tabs-tab","\n margin-right: 0;\n ")])])]),Us("tabs-nav","\n box-sizing: border-box;\n line-height: 1.5;\n display: flex;\n transition: border-color .3s var(--n-bezier);\n ",[zs("prefix, suffix","\n display: flex;\n align-items: center;\n "),zs("prefix","padding-right: 16px;"),zs("suffix","padding-left: 16px;")]),Ns("top, bottom",[Us("tabs-nav-scroll-wrapper",[Ls("&::before","\n top: 0;\n bottom: 0;\n left: 0;\n width: 20px;\n "),Ls("&::after","\n top: 0;\n bottom: 0;\n right: 0;\n width: 20px;\n "),Ns("shadow-start",[Ls("&::before","\n box-shadow: inset 10px 0 8px -8px rgba(0, 0, 0, .12);\n ")]),Ns("shadow-end",[Ls("&::after","\n box-shadow: inset -10px 0 8px -8px rgba(0, 0, 0, .12);\n ")])])]),Ns("left, right",[Us("tabs-nav-scroll-content","\n flex-direction: column;\n "),Us("tabs-nav-scroll-wrapper",[Ls("&::before","\n top: 0;\n left: 0;\n right: 0;\n height: 20px;\n "),Ls("&::after","\n bottom: 0;\n left: 0;\n right: 0;\n height: 20px;\n "),Ns("shadow-start",[Ls("&::before","\n box-shadow: inset 0 10px 8px -8px rgba(0, 0, 0, .12);\n ")]),Ns("shadow-end",[Ls("&::after","\n box-shadow: inset 0 -10px 8px -8px rgba(0, 0, 0, .12);\n ")])])]),Us("tabs-nav-scroll-wrapper","\n flex: 1;\n position: relative;\n overflow: hidden;\n ",[Us("tabs-nav-y-scroll","\n height: 100%;\n width: 100%;\n overflow-y: auto; \n scrollbar-width: none;\n ",[Ls("&::-webkit-scrollbar","\n width: 0;\n height: 0;\n ")]),Ls("&::before, &::after",'\n transition: box-shadow .3s var(--n-bezier);\n pointer-events: none;\n content: "";\n position: absolute;\n z-index: 1;\n ')]),Us("tabs-nav-scroll-content","\n display: flex;\n position: relative;\n min-width: 100%;\n min-height: 100%;\n width: fit-content;\n box-sizing: border-box;\n "),Us("tabs-wrapper","\n display: inline-flex;\n flex-wrap: nowrap;\n position: relative;\n "),Us("tabs-tab-wrapper","\n display: flex;\n flex-wrap: nowrap;\n flex-shrink: 0;\n flex-grow: 0;\n "),Us("tabs-tab","\n cursor: pointer;\n white-space: nowrap;\n flex-wrap: nowrap;\n display: inline-flex;\n align-items: center;\n color: var(--n-tab-text-color);\n font-size: var(--n-tab-font-size);\n background-clip: padding-box;\n padding: var(--n-tab-padding);\n transition:\n box-shadow .3s var(--n-bezier),\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[Ns("disabled",{cursor:"not-allowed"}),zs("close","\n margin-left: 6px;\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n "),zs("label","\n display: flex;\n align-items: center;\n z-index: 1;\n ")]),Us("tabs-bar","\n position: absolute;\n bottom: 0;\n height: 2px;\n border-radius: 1px;\n background-color: var(--n-bar-color);\n transition:\n left .2s var(--n-bezier),\n max-width .2s var(--n-bezier),\n opacity .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ",[Ls("&.transition-disabled","\n transition: none;\n "),Ns("disabled","\n background-color: var(--n-tab-text-color-disabled)\n ")]),Us("tabs-pane-wrapper","\n position: relative;\n overflow: hidden;\n transition: max-height .2s var(--n-bezier);\n "),Us("tab-pane","\n color: var(--n-pane-text-color);\n width: 100%;\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n opacity .2s var(--n-bezier);\n left: 0;\n right: 0;\n top: 0;\n ",[Ls("&.next-transition-leave-active, &.prev-transition-leave-active, &.next-transition-enter-active, &.prev-transition-enter-active","\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n transform .2s var(--n-bezier),\n opacity .2s var(--n-bezier);\n "),Ls("&.next-transition-leave-active, &.prev-transition-leave-active","\n position: absolute;\n "),Ls("&.next-transition-enter-from, &.prev-transition-leave-to","\n transform: translateX(32px);\n opacity: 0;\n "),Ls("&.next-transition-leave-to, &.prev-transition-enter-from","\n transform: translateX(-32px);\n opacity: 0;\n "),Ls("&.next-transition-leave-from, &.next-transition-enter-to, &.prev-transition-leave-from, &.prev-transition-enter-to","\n transform: translateX(0);\n opacity: 1;\n ")]),Us("tabs-tab-pad","\n box-sizing: border-box;\n width: var(--n-tab-gap);\n flex-grow: 0;\n flex-shrink: 0;\n "),Ns("line-type, bar-type",[Us("tabs-tab","\n font-weight: var(--n-tab-font-weight);\n box-sizing: border-box;\n vertical-align: bottom;\n ",[Ls("&:hover",{color:"var(--n-tab-text-color-hover)"}),Ns("active","\n color: var(--n-tab-text-color-active);\n font-weight: var(--n-tab-font-weight-active);\n "),Ns("disabled",{color:"var(--n-tab-text-color-disabled)"})])]),Us("tabs-nav",[Ns("line-type",[Ns("top",[zs("prefix, suffix","\n border-bottom: 1px solid var(--n-tab-border-color);\n "),Us("tabs-nav-scroll-content","\n border-bottom: 1px solid var(--n-tab-border-color);\n "),Us("tabs-bar","\n bottom: -1px;\n ")]),Ns("left",[zs("prefix, suffix","\n border-right: 1px solid var(--n-tab-border-color);\n "),Us("tabs-nav-scroll-content","\n border-right: 1px solid var(--n-tab-border-color);\n "),Us("tabs-bar","\n right: -1px;\n ")]),Ns("right",[zs("prefix, suffix","\n border-left: 1px solid var(--n-tab-border-color);\n "),Us("tabs-nav-scroll-content","\n border-left: 1px solid var(--n-tab-border-color);\n "),Us("tabs-bar","\n left: -1px;\n ")]),Ns("bottom",[zs("prefix, suffix","\n border-top: 1px solid var(--n-tab-border-color);\n "),Us("tabs-nav-scroll-content","\n border-top: 1px solid var(--n-tab-border-color);\n "),Us("tabs-bar","\n top: -1px;\n ")]),zs("prefix, suffix","\n transition: border-color .3s var(--n-bezier);\n "),Us("tabs-nav-scroll-content","\n transition: border-color .3s var(--n-bezier);\n "),Us("tabs-bar","\n border-radius: 0;\n ")]),Ns("card-type",[zs("prefix, suffix","\n transition: border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-tab-border-color);\n "),Us("tabs-pad","\n flex-grow: 1;\n transition: border-color .3s var(--n-bezier);\n "),Us("tabs-tab-pad","\n transition: border-color .3s var(--n-bezier);\n "),Us("tabs-tab","\n font-weight: var(--n-tab-font-weight);\n border: 1px solid var(--n-tab-border-color);\n background-color: var(--n-tab-color);\n box-sizing: border-box;\n position: relative;\n vertical-align: bottom;\n display: flex;\n justify-content: space-between;\n font-size: var(--n-tab-font-size);\n color: var(--n-tab-text-color);\n ",[Ns("addable","\n padding-left: 8px;\n padding-right: 8px;\n font-size: 16px;\n ",[zs("height-placeholder","\n width: 0;\n font-size: var(--n-tab-font-size);\n "),js("disabled",[Ls("&:hover","\n color: var(--n-tab-text-color-hover);\n ")])]),Ns("closable","padding-right: 8px;"),Ns("active","\n background-color: #0000;\n font-weight: var(--n-tab-font-weight-active);\n color: var(--n-tab-text-color-active);\n "),Ns("disabled","color: var(--n-tab-text-color-disabled);")]),Us("tabs-scroll-padding","border-bottom: 1px solid var(--n-tab-border-color);")]),Ns("left, right",[Us("tabs-wrapper","\n flex-direction: column;\n ",[Us("tabs-tab-wrapper","\n flex-direction: column;\n ",[Us("tabs-tab-pad","\n height: var(--n-tab-gap-vertical);\n width: 100%;\n ")])])]),Ns("top",[Ns("card-type",[Us("tabs-tab","\n border-top-left-radius: var(--n-tab-border-radius);\n border-top-right-radius: var(--n-tab-border-radius);\n ",[Ns("active","\n border-bottom: 1px solid #0000;\n ")]),Us("tabs-tab-pad","\n border-bottom: 1px solid var(--n-tab-border-color);\n "),Us("tabs-pad","\n border-bottom: 1px solid var(--n-tab-border-color);\n ")])]),Ns("left",[Ns("card-type",[Us("tabs-tab","\n border-top-left-radius: var(--n-tab-border-radius);\n border-bottom-left-radius: var(--n-tab-border-radius);\n ",[Ns("active","\n border-right: 1px solid #0000;\n ")]),Us("tabs-tab-pad","\n border-right: 1px solid var(--n-tab-border-color);\n "),Us("tabs-pad","\n border-right: 1px solid var(--n-tab-border-color);\n ")])]),Ns("right",[Ns("card-type",[Us("tabs-tab","\n border-top-right-radius: var(--n-tab-border-radius);\n border-bottom-right-radius: var(--n-tab-border-radius);\n ",[Ns("active","\n border-left: 1px solid #0000;\n ")]),Us("tabs-tab-pad","\n border-left: 1px solid var(--n-tab-border-color);\n "),Us("tabs-pad","\n border-left: 1px solid var(--n-tab-border-color);\n ")])]),Ns("bottom",[Ns("card-type",[Us("tabs-tab","\n border-bottom-left-radius: var(--n-tab-border-radius);\n border-bottom-right-radius: var(--n-tab-border-radius);\n ",[Ns("active","\n border-top: 1px solid #0000;\n ")]),Us("tabs-tab-pad","\n border-top: 1px solid var(--n-tab-border-color);\n "),Us("tabs-pad","\n border-top: 1px solid var(--n-tab-border-color);\n ")])])])]),pD=Dn({name:"Tabs",props:Object.assign(Object.assign({},sf.props),{value:[String,Number],defaultValue:[String,Number],trigger:{type:String,default:"click"},type:{type:String,default:"bar"},closable:Boolean,justifyContent:String,size:{type:String,default:"medium"},placement:{type:String,default:"top"},tabStyle:[String,Object],tabClass:String,addTabStyle:[String,Object],addTabClass:String,barWidth:Number,paneClass:String,paneStyle:[String,Object],paneWrapperClass:String,paneWrapperStyle:[String,Object],addable:[Boolean,Object],tabsPadding:{type:Number,default:0},animated:Boolean,onBeforeLeave:Function,onAdd:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClose:[Function,Array],labelSize:String,activeName:[String,Number],onActiveNameChange:[Function,Array]}),setup(e,{slots:t}){var n,r,i,o;const{mergedClsPrefixRef:a,inlineThemeDisabled:s}=cf(e),l=sf("Tabs","-tabs",hD,jP,e,a),c=bt(null),u=bt(null),d=bt(null),h=bt(null),p=bt(null),A=bt(null),f=bt(!0),m=bt(!0),g=Sl(e,["labelSize","size"]),v=Sl(e,["activeName","value"]),y=bt(null!==(r=null!==(n=v.value)&&void 0!==n?n:e.defaultValue)&&void 0!==r?r:t.default?null===(o=null===(i=qa(t.default())[0])||void 0===i?void 0:i.props)||void 0===o?void 0:o.name:null),b=xl(v,y),w={id:0},x=eo((()=>{if(e.justifyContent&&"card"!==e.type)return{display:"flex",justifyContent:e.justifyContent}}));function C(){var e;const{value:t}=b;if(null===t)return null;return null===(e=c.value)||void 0===e?void 0:e.querySelector(`[data-name="${t}"]`)}function S(e){const{value:t}=u;if(t)for(const n of e)t.style[n]=""}function B(){if("card"===e.type)return;const t=C();t?function(t){if("card"===e.type)return;const{value:n}=u;if(!n)return;const r="0"===n.style.opacity;if(t){const i=`${a.value}-tabs-bar--disabled`,{barWidth:o,placement:s}=e;if("true"===t.dataset.disabled?n.classList.add(i):n.classList.remove(i),["top","bottom"].includes(s)){if(S(["top","maxHeight","height"]),"number"==typeof o&&t.offsetWidth>=o){const e=Math.floor((t.offsetWidth-o)/2)+t.offsetLeft;n.style.left=`${e}px`,n.style.maxWidth=`${o}px`}else n.style.left=`${t.offsetLeft}px`,n.style.maxWidth=`${t.offsetWidth}px`;n.style.width="8192px",r&&(n.style.transition="none"),n.offsetWidth,r&&(n.style.transition="",n.style.opacity="1")}else{if(S(["left","maxWidth","width"]),"number"==typeof o&&t.offsetHeight>=o){const e=Math.floor((t.offsetHeight-o)/2)+t.offsetTop;n.style.top=`${e}px`,n.style.maxHeight=`${o}px`}else n.style.top=`${t.offsetTop}px`,n.style.maxHeight=`${t.offsetHeight}px`;n.style.height="8192px",r&&(n.style.transition="none"),n.offsetHeight,r&&(n.style.transition="",n.style.opacity="1")}}}(t):function(){if("card"===e.type)return;const{value:t}=u;t&&(t.style.opacity="0")}()}function _(e){var t;const n=null===(t=p.value)||void 0===t?void 0:t.$el;if(!n)return;const r=C();if(!r)return;const{scrollLeft:i,offsetWidth:o}=n,{offsetLeft:a,offsetWidth:s}=r;i>a?n.scrollTo({top:0,left:a,behavior:"smooth"}):a+s>i+o&&n.scrollTo({top:0,left:a+s-o,behavior:"smooth"})}Ir(b,(()=>{w.id=0,B(),_()}));const E=bt(null);let M=0,P=null;const T={value:[]},D=bt("next");function F(){const{value:e}=u;if(!e)return;const t="transition-disabled";e.classList.add(t),B(),e.classList.remove(t)}const I=bt(null);function k({transitionDisabled:e}){const t=c.value;if(!t)return;e&&t.classList.add("transition-disabled");const n=C();n&&I.value&&(I.value.style.width=`${n.offsetWidth}px`,I.value.style.height=`${n.offsetHeight}px`,I.value.style.transform=`translateX(${n.offsetLeft-ga(getComputedStyle(t).paddingLeft)}px)`,e&&I.value.offsetWidth),e&&t.classList.remove("transition-disabled")}Ir([b],(()=>{"segment"===e.type&&Vt((()=>{k({transitionDisabled:!1})}))})),vn((()=>{"segment"===e.type&&k({transitionDisabled:!0})}));let O=0;const L=JA((function(t){var n;if(0===t.contentRect.width&&0===t.contentRect.height)return;if(O===t.contentRect.width)return;O=t.contentRect.width;const{type:r}=e;if("line"!==r&&"bar"!==r||F(),"segment"!==r){const{placement:t}=e;z(("top"===t||"bottom"===t?null===(n=p.value)||void 0===n?void 0:n.$el:A.value)||null)}}),64);Ir([()=>e.justifyContent,()=>e.size],(()=>{Vt((()=>{const{type:t}=e;"line"!==t&&"bar"!==t||F()}))}));const R=bt(!1);const U=JA((function(e){var t;const{target:n,contentRect:{width:r}}=e,i=n.parentElement.offsetWidth;if(R.value){const{value:e}=h;if(!e)return;i-r>e.$el.offsetWidth&&(R.value=!1)}else i<r&&(R.value=!0);z((null===(t=p.value)||void 0===t?void 0:t.$el)||null)}),64);function z(t){if(!t)return;const{placement:n}=e;if("top"===n||"bottom"===n){const{scrollLeft:e,scrollWidth:n,offsetWidth:r}=t;f.value=e<=0,m.value=e+r>=n}else{const{scrollTop:e,scrollHeight:n,offsetHeight:r}=t;f.value=e<=0,m.value=e+r>=n}}const N=JA((e=>{z(e.target)}),64);nr(lD,{triggerRef:Tt(e,"trigger"),tabStyleRef:Tt(e,"tabStyle"),tabClassRef:Tt(e,"tabClass"),addTabStyleRef:Tt(e,"addTabStyle"),addTabClassRef:Tt(e,"addTabClass"),paneClassRef:Tt(e,"paneClass"),paneStyleRef:Tt(e,"paneStyle"),mergedClsPrefixRef:a,typeRef:Tt(e,"type"),closableRef:Tt(e,"closable"),valueRef:b,tabChangeIdRef:w,onBeforeLeaveRef:Tt(e,"onBeforeLeave"),activateTab:function(t){const n=b.value;let r="next";for(const e of T.value){if(e===n)break;if(e===t){r="prev";break}}D.value=r,function(t){const{onActiveNameChange:n,onUpdateValue:r,"onUpdate:value":i}=e;n&&Ka(n,t);r&&Ka(r,t);i&&Ka(i,t);y.value=t}(t)},handleClose:function(t){const{onClose:n}=e;n&&Ka(n,t)},handleAdd:function(){const{onAdd:t}=e;t&&t(),Vt((()=>{const e=C(),{value:t}=p;e&&t&&t.scrollTo({left:e.offsetLeft,top:0,behavior:"smooth"})}))}}),al((()=>{B(),_()})),Dr((()=>{const{value:e}=d;if(!e)return;const{value:t}=a,n=`${t}-tabs-nav-scroll-wrapper--shadow-start`,r=`${t}-tabs-nav-scroll-wrapper--shadow-end`;f.value?e.classList.remove(n):e.classList.add(n),m.value?e.classList.remove(r):e.classList.add(r)}));const j={syncBarPosition:()=>{B()}},H=eo((()=>{const{value:t}=g,{type:n}=e,r=`${t}${{card:"Card",bar:"Bar",line:"Line",segment:"Segment"}[n]}`,{self:{barColor:i,closeIconColor:o,closeIconColorHover:a,closeIconColorPressed:s,tabColor:c,tabBorderColor:u,paneTextColor:d,tabFontWeight:h,tabBorderRadius:p,tabFontWeightActive:A,colorSegment:f,fontWeightStrong:m,tabColorSegment:v,closeSize:y,closeIconSize:b,closeColorHover:w,closeColorPressed:x,closeBorderRadius:C,[Gs("panePadding",t)]:S,[Gs("tabPadding",r)]:B,[Gs("tabPaddingVertical",r)]:_,[Gs("tabGap",r)]:E,[Gs("tabGap",`${r}Vertical`)]:M,[Gs("tabTextColor",n)]:P,[Gs("tabTextColorActive",n)]:T,[Gs("tabTextColorHover",n)]:D,[Gs("tabTextColorDisabled",n)]:F,[Gs("tabFontSize",t)]:I},common:{cubicBezierEaseInOut:k}}=l.value;return{"--n-bezier":k,"--n-color-segment":f,"--n-bar-color":i,"--n-tab-font-size":I,"--n-tab-text-color":P,"--n-tab-text-color-active":T,"--n-tab-text-color-disabled":F,"--n-tab-text-color-hover":D,"--n-pane-text-color":d,"--n-tab-border-color":u,"--n-tab-border-radius":p,"--n-close-size":y,"--n-close-icon-size":b,"--n-close-color-hover":w,"--n-close-color-pressed":x,"--n-close-border-radius":C,"--n-close-icon-color":o,"--n-close-icon-color-hover":a,"--n-close-icon-color-pressed":s,"--n-tab-color":c,"--n-tab-font-weight":h,"--n-tab-font-weight-active":A,"--n-tab-padding":B,"--n-tab-padding-vertical":_,"--n-tab-gap":E,"--n-tab-gap-vertical":M,"--n-pane-padding-left":ya(S,"left"),"--n-pane-padding-right":ya(S,"right"),"--n-pane-padding-top":ya(S,"top"),"--n-pane-padding-bottom":ya(S,"bottom"),"--n-font-weight-strong":m,"--n-tab-color-segment":v}})),Q=s?Fv("tabs",eo((()=>`${g.value[0]}${e.type[0]}`)),H,e):void 0;return Object.assign({mergedClsPrefix:a,mergedValue:b,renderedNames:new Set,segmentCapsuleElRef:I,tabsPaneWrapperRef:E,tabsElRef:c,barElRef:u,addTabInstRef:h,xScrollInstRef:p,scrollWrapperElRef:d,addTabFixed:R,tabWrapperStyle:x,handleNavResize:L,mergedSize:g,handleScroll:N,handleTabsResize:U,cssVars:s?void 0:H,themeClass:null==Q?void 0:Q.themeClass,animationDirection:D,renderNameListRef:T,yScrollElRef:A,handleSegmentResize:()=>{k({transitionDisabled:!0})},onAnimationBeforeLeave:function(e){const t=E.value;if(t){M=e.getBoundingClientRect().height;const n=`${M}px`,r=()=>{t.style.height=n,t.style.maxHeight=n};P?(r(),P(),P=null):P=r}},onAnimationEnter:function(e){const t=E.value;if(t){const n=e.getBoundingClientRect().height,r=()=>{document.body.offsetHeight,t.style.maxHeight=`${n}px`,t.style.height=`${Math.max(M,n)}px`};P?(P(),P=null,r()):P=r}},onAnimationAfterEnter:function(){const t=E.value;if(t){t.style.maxHeight="",t.style.height="";const{paneWrapperStyle:n}=e;if("string"==typeof n)t.style.cssText=n;else if(n){const{maxHeight:e,height:r}=n;void 0!==e&&(t.style.maxHeight=e),void 0!==r&&(t.style.height=r)}}},onRender:null==Q?void 0:Q.onRender},j)},render(){const{mergedClsPrefix:e,type:t,placement:n,addTabFixed:r,addable:i,mergedSize:o,renderNameListRef:a,onRender:s,paneWrapperClass:l,paneWrapperStyle:c,$slots:{default:u,prefix:d,suffix:h}}=this;null==s||s();const p=u?qa(u()).filter((e=>!0===e.type.__TAB_PANE__)):[],A=u?qa(u()).filter((e=>!0===e.type.__TAB__)):[],f=!A.length,m="card"===t,g="segment"===t,v=!m&&!g&&this.justifyContent;a.value=[];const y=()=>{const t=to("div",{style:this.tabWrapperStyle,class:[`${e}-tabs-wrapper`]},v?null:to("div",{class:`${e}-tabs-scroll-padding`,style:{width:`${this.tabsPadding}px`}}),f?p.map(((e,t)=>(a.value.push(e.props.name),gD(to(dD,Object.assign({},e.props,{internalCreatedByPane:!0,internalLeftPadded:0!==t&&(!v||"center"===v||"start"===v||"end"===v)}),e.children?{default:e.children.tab}:void 0))))):A.map(((e,t)=>(a.value.push(e.props.name),gD(0===t||v?e:mD(e))))),!r&&i&&m?fD(i,0!==(f?p.length:A.length)):null,v?null:to("div",{class:`${e}-tabs-scroll-padding`,style:{width:`${this.tabsPadding}px`}}));return to("div",{ref:"tabsElRef",class:`${e}-tabs-nav-scroll-content`},m&&i?to(au,{onResize:this.handleTabsResize},{default:()=>t}):t,m?to("div",{class:`${e}-tabs-pad`}):null,m?null:to("div",{ref:"barElRef",class:`${e}-tabs-bar`}))},b=g?"top":n;return to("div",{class:[`${e}-tabs`,this.themeClass,`${e}-tabs--${t}-type`,`${e}-tabs--${o}-size`,v&&`${e}-tabs--flex`,`${e}-tabs--${b}`],style:this.cssVars},to("div",{class:[`${e}-tabs-nav--${t}-type`,`${e}-tabs-nav--${b}`,`${e}-tabs-nav`]},os(d,(t=>t&&to("div",{class:`${e}-tabs-nav__prefix`},t))),g?to(au,{onResize:this.handleSegmentResize},{default:()=>to("div",{class:`${e}-tabs-rail`,ref:"tabsElRef"},to("div",{class:`${e}-tabs-capsule`,ref:"segmentCapsuleElRef"},to("div",{class:`${e}-tabs-wrapper`},to("div",{class:`${e}-tabs-tab`}))),f?p.map(((e,t)=>(a.value.push(e.props.name),to(dD,Object.assign({},e.props,{internalCreatedByPane:!0,internalLeftPadded:0!==t}),e.children?{default:e.children.tab}:void 0)))):A.map(((e,t)=>(a.value.push(e.props.name),0===t?e:mD(e)))))}):to(au,{onResize:this.handleNavResize},{default:()=>to("div",{class:`${e}-tabs-nav-scroll-wrapper`,ref:"scrollWrapperElRef"},["top","bottom"].includes(b)?to(pu,{ref:"xScrollInstRef",onScroll:this.handleScroll},{default:y}):to("div",{class:`${e}-tabs-nav-y-scroll`,onScroll:this.handleScroll,ref:"yScrollElRef"},y()))}),r&&i&&m?fD(i,!0):null,os(h,(t=>t&&to("div",{class:`${e}-tabs-nav__suffix`},t)))),f&&(!this.animated||"top"!==b&&"bottom"!==b?AD(p,this.mergedValue,this.renderedNames):to("div",{ref:"tabsPaneWrapperRef",style:c,class:[`${e}-tabs-pane-wrapper`,l]},AD(p,this.mergedValue,this.renderedNames,this.onAnimationBeforeLeave,this.onAnimationEnter,this.onAnimationAfterEnter,this.animationDirection))))}});function AD(e,t,n,r,i,o,a){const s=[];return e.forEach((e=>{const{name:r,displayDirective:i,"display-directive":o}=e.props,a=e=>i===e||o===e,l=t===r;if(void 0!==e.key&&(e.key=r),l||a("show")||a("show:lazy")&&n.has(r)){n.has(r)||n.add(r);const t=!a("if");s.push(t?En(e,[[Mo,l]]):e)}})),a?to($o,{name:`${a}-transition`,onBeforeLeave:r,onEnter:i,onAfterEnter:o},{default:()=>s}):s}function fD(e,t){return to(dD,{ref:"addTabInstRef",key:"__addable",name:"__addable",internalCreatedByPane:!0,internalAddable:!0,internalLeftPadded:t,disabled:"object"==typeof e&&e.disabled})}function mD(e){const t=Pi(e);return t.props?t.props.internalLeftPadded=!0:t.props={internalLeftPadded:!0},t}function gD(e){return Array.isArray(e.dynamicProps)?e.dynamicProps.includes("internalLeftPadded")||e.dynamicProps.push("internalLeftPadded"):e.dynamicProps=["internalLeftPadded"],e}const vD=Us("timeline","\n position: relative;\n width: 100%;\n display: flex;\n flex-direction: column;\n line-height: 1.25;\n",[Ns("horizontal","\n flex-direction: row;\n ",[Ls(">",[Us("timeline-item","\n flex-shrink: 0;\n padding-right: 40px;\n ",[Ns("dashed-line-type",[Ls(">",[Us("timeline-item-timeline",[zs("line","\n background-image: linear-gradient(90deg, var(--n-color-start), var(--n-color-start) 50%, transparent 50%, transparent 100%);\n background-size: 10px 1px;\n ")])])]),Ls(">",[Us("timeline-item-content","\n margin-top: calc(var(--n-icon-size) + 12px);\n ",[Ls(">",[zs("meta","\n margin-top: 6px;\n margin-bottom: unset;\n ")])]),Us("timeline-item-timeline","\n width: 100%;\n height: calc(var(--n-icon-size) + 12px);\n ",[zs("line","\n left: var(--n-icon-size);\n top: calc(var(--n-icon-size) / 2 - 1px);\n right: 0px;\n width: unset;\n height: 2px;\n ")])])])])]),Ns("right-placement",[Us("timeline-item",[Us("timeline-item-content","\n text-align: right;\n margin-right: calc(var(--n-icon-size) + 12px);\n "),Us("timeline-item-timeline","\n width: var(--n-icon-size);\n right: 0;\n ")])]),Ns("left-placement",[Us("timeline-item",[Us("timeline-item-content","\n margin-left: calc(var(--n-icon-size) + 12px);\n "),Us("timeline-item-timeline","\n left: 0;\n ")])]),Us("timeline-item","\n position: relative;\n ",[Ls("&:last-child",[Us("timeline-item-timeline",[zs("line","\n display: none;\n ")]),Us("timeline-item-content",[zs("meta","\n margin-bottom: 0;\n ")])]),Us("timeline-item-content",[zs("title","\n margin: var(--n-title-margin);\n font-size: var(--n-title-font-size);\n transition: color .3s var(--n-bezier);\n font-weight: var(--n-title-font-weight);\n color: var(--n-title-text-color);\n "),zs("content","\n transition: color .3s var(--n-bezier);\n font-size: var(--n-content-font-size);\n color: var(--n-content-text-color);\n "),zs("meta","\n transition: color .3s var(--n-bezier);\n font-size: 12px;\n margin-top: 6px;\n margin-bottom: 20px;\n color: var(--n-meta-text-color);\n ")]),Ns("dashed-line-type",[Us("timeline-item-timeline",[zs("line","\n --n-color-start: var(--n-line-color);\n transition: --n-color-start .3s var(--n-bezier);\n background-color: transparent;\n background-image: linear-gradient(180deg, var(--n-color-start), var(--n-color-start) 50%, transparent 50%, transparent 100%);\n background-size: 1px 10px;\n ")])]),Us("timeline-item-timeline","\n width: calc(var(--n-icon-size) + 12px);\n position: absolute;\n top: calc(var(--n-title-font-size) * 1.25 / 2 - var(--n-icon-size) / 2);\n height: 100%;\n ",[zs("circle","\n border: var(--n-circle-border);\n transition:\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n width: var(--n-icon-size);\n height: var(--n-icon-size);\n border-radius: var(--n-icon-size);\n box-sizing: border-box;\n "),zs("icon","\n color: var(--n-icon-color);\n font-size: var(--n-icon-size);\n height: var(--n-icon-size);\n width: var(--n-icon-size);\n display: flex;\n align-items: center;\n justify-content: center;\n "),zs("line","\n transition: background-color .3s var(--n-bezier);\n position: absolute;\n top: var(--n-icon-size);\n left: calc(var(--n-icon-size) / 2 - 1px);\n bottom: 0px;\n width: 2px;\n background-color: var(--n-line-color);\n ")])])]),yD=Object.assign(Object.assign({},sf.props),{horizontal:Boolean,itemPlacement:{type:String,default:"left"},size:{type:String,default:"medium"},iconSize:Number}),bD="n-timeline",wD=Dn({name:"Timeline",props:yD,setup(e,{slots:t}){const{mergedClsPrefixRef:n}=cf(e),r=sf("Timeline","-timeline",vD,QP,e,n);return nr(bD,{props:e,mergedThemeRef:r,mergedClsPrefixRef:n}),()=>{const{value:r}=n;return to("div",{class:[`${r}-timeline`,e.horizontal&&`${r}-timeline--horizontal`,`${r}-timeline--${e.size}-size`,!e.horizontal&&`${r}-timeline--${e.itemPlacement}-placement`]},t)}}}),xD=Dn({name:"TimelineItem",props:{time:[String,Number],title:String,content:String,color:String,lineType:{type:String,default:"default"},type:{type:String,default:"default"}},setup(e){const t=rr(bD);t||$a("timeline-item","`n-timeline-item` must be placed inside `n-timeline`."),Ll();const{inlineThemeDisabled:n}=cf(),r=eo((()=>{const{props:{size:n,iconSize:r},mergedThemeRef:i}=t,{type:o}=e,{self:{titleTextColor:a,contentTextColor:s,metaTextColor:l,lineColor:c,titleFontWeight:u,contentFontSize:d,[Gs("iconSize",n)]:h,[Gs("titleMargin",n)]:p,[Gs("titleFontSize",n)]:A,[Gs("circleBorder",o)]:f,[Gs("iconColor",o)]:m},common:{cubicBezierEaseInOut:g}}=i.value;return{"--n-bezier":g,"--n-circle-border":f,"--n-icon-color":m,"--n-content-font-size":d,"--n-content-text-color":s,"--n-line-color":c,"--n-meta-text-color":l,"--n-title-font-size":A,"--n-title-font-weight":u,"--n-title-margin":p,"--n-title-text-color":a,"--n-icon-size":ds(r)||h}})),i=n?Fv("timeline-item",eo((()=>{const{props:{size:n,iconSize:r}}=t,{type:i}=e;return`${n[0]}${r||"a"}${i[0]}`})),r,t.props):void 0;return{mergedClsPrefix:t.mergedClsPrefixRef,cssVars:n?void 0:r,themeClass:null==i?void 0:i.themeClass,onRender:null==i?void 0:i.onRender}},render(){const{mergedClsPrefix:e,color:t,onRender:n,$slots:r}=this;return null==n||n(),to("div",{class:[`${e}-timeline-item`,this.themeClass,`${e}-timeline-item--${this.type}-type`,`${e}-timeline-item--${this.lineType}-line-type`],style:this.cssVars},to("div",{class:`${e}-timeline-item-timeline`},to("div",{class:`${e}-timeline-item-timeline__line`}),os(r.icon,(n=>n?to("div",{class:`${e}-timeline-item-timeline__icon`,style:{color:t}},n):to("div",{class:`${e}-timeline-item-timeline__circle`,style:{borderColor:t}})))),to("div",{class:`${e}-timeline-item-content`},os(r.header,(t=>t||this.title?to("div",{class:`${e}-timeline-item-content__title`},t||this.title):null)),to("div",{class:`${e}-timeline-item-content__content`},rs(r.default,(()=>[this.content]))),to("div",{class:`${e}-timeline-item-content__meta`},rs(r.footer,(()=>[this.time])))))}}),CD="n-transfer",SD=Dn({name:"TransferHeader",props:{size:{type:String,required:!0},selectAllText:String,clearText:String,source:Boolean,onCheckedAll:Function,onClearAll:Function,title:String},setup(e){const{targetOptionsRef:t,canNotSelectAnythingRef:n,canBeClearedRef:r,allCheckedRef:i,mergedThemeRef:o,disabledRef:a,mergedClsPrefixRef:s,srcOptionsLengthRef:l}=rr(CD),{localeRef:c}=Tv("Transfer");return()=>{const{source:u,onClearAll:d,onCheckedAll:h,selectAllText:p,clearText:A}=e,{value:f}=o,{value:m}=s,{value:g}=c,v="large"===e.size?"small":"tiny",{title:y}=e;return to("div",{class:`${m}-transfer-list-header`},y&&to("div",{class:`${m}-transfer-list-header__title`},y),u&&to(Bx,{class:`${m}-transfer-list-header__button`,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,size:v,tertiary:!0,onClick:i.value?d:h,disabled:n.value||a.value},{default:()=>i.value?A||g.unselectAll:p||g.selectAll}),!u&&r.value&&to(Bx,{class:`${m}-transfer-list-header__button`,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,size:v,tertiary:!0,onClick:d,disabled:a.value},{default:()=>g.clearAll}),to("div",{class:`${m}-transfer-list-header__extra`},u?g.total(l.value):g.selected(t.value.length)))}}}),BD=Dn({name:"NTransferListItem",props:{source:Boolean,label:{type:String,required:!0},value:{type:[String,Number],required:!0},disabled:Boolean,option:{type:Object,required:!0}},setup(e){const{targetValueSetRef:t,mergedClsPrefixRef:n,mergedThemeRef:r,handleItemCheck:i,renderSourceLabelRef:o,renderTargetLabelRef:a,showSelectedRef:s}=rr(CD),l=Zs((()=>t.value.has(e.value)));return{mergedClsPrefix:n,mergedTheme:r,checked:l,showSelected:s,renderSourceLabel:o,renderTargetLabel:a,handleClick:function(){e.disabled||i(!l.value,e.value)}}},render(){const{disabled:e,mergedTheme:t,mergedClsPrefix:n,label:r,checked:i,source:o,renderSourceLabel:a,renderTargetLabel:s}=this;return to("div",{class:[`${n}-transfer-list-item`,e&&`${n}-transfer-list-item--disabled`,o?`${n}-transfer-list-item--source`:`${n}-transfer-list-item--target`],onClick:o?this.handleClick:void 0},to("div",{class:`${n}-transfer-list-item__background`}),o&&this.showSelected&&to("div",{class:`${n}-transfer-list-item__checkbox`},to(dC,{theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,disabled:e,checked:i})),to("div",{class:`${n}-transfer-list-item__label`,title:Za(r)},o?a?a({option:this.option}):r:s?s({option:this.option}):r),!o&&!e&&to(fy,{focusable:!1,class:`${n}-transfer-list-item__close`,clsPrefix:n,onClick:this.handleClick}))}}),_D=Dn({name:"TransferList",props:{virtualScroll:{type:Boolean,required:!0},itemSize:{type:Number,required:!0},options:{type:Array,required:!0},disabled:{type:Boolean,required:!0},source:Boolean},setup(){const{mergedThemeRef:e,mergedClsPrefixRef:t}=rr(CD),n=bt(null),r=bt(null);return{mergedTheme:e,mergedClsPrefix:t,scrollerInstRef:n,vlInstRef:r,syncVLScroller:function(){var e;null===(e=n.value)||void 0===e||e.sync()},scrollContainer:function(){const{value:e}=r;if(!e)return null;const{listElRef:t}=e;return t},scrollContent:function(){const{value:e}=r;if(!e)return null;const{itemsElRef:t}=e;return t}}},render(){const{mergedTheme:e,options:t}=this;if(0===t.length)return to(Nb,{theme:e.peers.Empty,themeOverrides:e.peerOverrides.Empty});const{mergedClsPrefix:n,virtualScroll:r,source:i,disabled:o,syncVLScroller:a}=this;return to(Gb,{ref:"scrollerInstRef",theme:e.peers.Scrollbar,themeOverrides:e.peerOverrides.Scrollbar,container:r?this.scrollContainer:void 0,content:r?this.scrollContent:void 0},{default:()=>r?to(du,{ref:"vlInstRef",style:{height:"100%"},class:`${n}-transfer-list-content`,items:this.options,itemSize:this.itemSize,showScrollbar:!1,onResize:a,onScroll:a,keyField:"value"},{default:({item:e})=>{const{source:t,disabled:n}=this;return to(BD,{source:t,key:e.value,value:e.value,disabled:e.disabled||n,label:e.label,option:e})}}):to("div",{class:`${n}-transfer-list-content`},t.map((e=>to(BD,{source:i,key:e.value,value:e.value,disabled:e.disabled||o,label:e.label,option:e}))))})}}),ED=Dn({name:"TransferFilter",props:{value:String,placeholder:String,disabled:Boolean,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,mergedClsPrefixRef:t}=rr(CD);return{mergedClsPrefix:t,mergedTheme:e}},render(){const{mergedTheme:e,mergedClsPrefix:t}=this;return to("div",{class:`${t}-transfer-filter`},to(ex,{value:this.value,onUpdateValue:this.onUpdateValue,disabled:this.disabled,placeholder:this.placeholder,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,clearable:!0,size:"small"},{"clear-icon-placeholder":()=>to(py,{clsPrefix:t},{default:()=>to(ty,null)})}))}});const MD=Us("transfer","\n width: 100%;\n font-size: var(--n-font-size);\n height: 300px;\n display: flex;\n flex-wrap: nowrap;\n word-break: break-word;\n",[Ns("disabled",[Us("transfer-list",[Us("transfer-list-header",[zs("title","\n color: var(--n-header-text-color-disabled);\n "),zs("extra","\n color: var(--n-header-extra-text-color-disabled);\n ")])])]),Us("transfer-list","\n flex: 1;\n min-width: 0;\n height: inherit;\n display: flex;\n flex-direction: column;\n background-clip: padding-box;\n position: relative;\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-list-color);\n ",[Ns("source","\n border-top-left-radius: var(--n-border-radius);\n border-bottom-left-radius: var(--n-border-radius);\n ",[zs("border","border-right: 1px solid var(--n-divider-color);")]),Ns("target","\n border-top-right-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n ",[zs("border","border-left: none;")]),zs("border","\n padding: 0 12px;\n border: 1px solid var(--n-border-color);\n transition: border-color .3s var(--n-bezier);\n pointer-events: none;\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n "),Us("transfer-list-header","\n min-height: var(--n-header-height);\n box-sizing: border-box;\n display: flex;\n padding: 12px 12px 10px 12px;\n align-items: center;\n background-clip: padding-box;\n border-radius: inherit;\n border-bottom-left-radius: 0;\n border-bottom-right-radius: 0;\n line-height: 1.5;\n transition:\n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ",[Ls("> *:not(:first-child)","\n margin-left: 8px;\n "),zs("title","\n flex: 1;\n min-width: 0;\n line-height: 1.5;\n font-size: var(--n-header-font-size);\n font-weight: var(--n-header-font-weight);\n transition: color .3s var(--n-bezier);\n color: var(--n-header-text-color);\n "),zs("button","\n position: relative;\n "),zs("extra","\n transition: color .3s var(--n-bezier);\n font-size: var(--n-extra-font-size);\n margin-right: 0;\n white-space: nowrap;\n color: var(--n-header-extra-text-color);\n ")]),Us("transfer-list-body","\n flex-basis: 0;\n flex-grow: 1;\n box-sizing: border-box;\n position: relative;\n display: flex;\n flex-direction: column;\n border-radius: inherit;\n border-top-left-radius: 0;\n border-top-right-radius: 0;\n ",[Us("transfer-filter","\n padding: 4px 12px 8px 12px;\n box-sizing: border-box;\n transition:\n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),Us("transfer-list-flex-container","\n flex: 1;\n position: relative;\n ",[Us("scrollbar","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n height: unset;\n "),Us("empty","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateY(-50%) translateX(-50%);\n "),Us("transfer-list-content","\n padding: 0;\n margin: 0;\n position: relative;\n ",[Us("transfer-list-item","\n padding: 0 12px;\n min-height: var(--n-item-height);\n display: flex;\n align-items: center;\n color: var(--n-item-text-color);\n position: relative;\n transition: color .3s var(--n-bezier);\n ",[zs("background","\n position: absolute;\n left: 4px;\n right: 4px;\n top: 0;\n bottom: 0;\n border-radius: var(--n-border-radius);\n transition: background-color .3s var(--n-bezier);\n "),zs("checkbox","\n position: relative;\n margin-right: 8px;\n "),zs("close","\n opacity: 0;\n pointer-events: none;\n position: relative;\n transition:\n opacity .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n "),zs("label","\n position: relative;\n min-width: 0;\n flex-grow: 1;\n "),Ns("source","cursor: pointer;"),Ns("disabled","\n cursor: not-allowed;\n color: var(--n-item-text-color-disabled);\n "),js("disabled",[Ls("&:hover",[zs("background","background-color: var(--n-item-color-pending);"),zs("close","\n opacity: 1;\n pointer-events: all;\n ")])])])])])])])]),PD=Dn({name:"Transfer",props:Object.assign(Object.assign({},sf.props),{value:Array,defaultValue:{type:Array,default:null},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:void 0},virtualScroll:Boolean,sourceTitle:String,selectAllText:String,clearText:String,targetTitle:String,filterable:{type:Boolean,default:void 0},sourceFilterable:Boolean,targetFilterable:Boolean,showSelected:{type:Boolean,default:!0},sourceFilterPlaceholder:String,targetFilterPlaceholder:String,filter:{type:Function,default:(e,t)=>!e||~(""+t.label).toLowerCase().indexOf((""+e).toLowerCase())},size:String,renderSourceLabel:Function,renderTargetLabel:Function,renderSourceList:Function,renderTargetList:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),setup(e){const{mergedClsPrefixRef:t}=cf(e),n=sf("Transfer","-transfer",MD,WP,e,t),r=Lu(e),{mergedSizeRef:i,mergedDisabledRef:o}=r,a=eo((()=>{const{value:e}=i,{self:{[Gs("itemHeight",e)]:t}}=n.value;return ga(t)})),{uncontrolledValueRef:s,mergedValueRef:l,targetValueSetRef:c,valueSetForCheckAllRef:u,valueSetForUncheckAllRef:d,valueSetForClearRef:h,filteredTgtOptionsRef:p,filteredSrcOptionsRef:A,targetOptionsRef:f,canNotSelectAnythingRef:m,canBeClearedRef:g,allCheckedRef:v,srcPatternRef:y,tgtPatternRef:b,mergedSrcFilterableRef:w,handleSrcFilterUpdateValue:x,handleTgtFilterUpdateValue:C}=function(e){const t=bt(e.defaultValue),n=xl(Tt(e,"value"),t),r=eo((()=>{const t=new Map;return(e.options||[]).forEach((e=>t.set(e.value,e))),t})),i=eo((()=>new Set(n.value||[]))),o=eo((()=>{const e=r.value,t=[];return(n.value||[]).forEach((n=>{const r=e.get(n);r&&t.push(r)})),t})),a=bt(""),s=bt(""),l=eo((()=>e.sourceFilterable||!!e.filterable)),c=eo((()=>{const{showSelected:t,options:n,filter:r}=e;return l.value?n.filter((e=>r(a.value,e,"source")&&(t||!i.value.has(e.value)))):t?n:n.filter((e=>!i.value.has(e.value)))})),u=eo((()=>{if(!e.targetFilterable)return o.value;const{filter:t}=e;return o.value.filter((e=>t(s.value,e,"target")))})),d=eo((()=>{const{value:e}=n;return null===e?new Set:new Set(e)})),h=eo((()=>{const e=new Set(d.value);return c.value.forEach((t=>{t.disabled||e.has(t.value)||e.add(t.value)})),e})),p=eo((()=>{const e=new Set(d.value);return c.value.forEach((t=>{!t.disabled&&e.has(t.value)&&e.delete(t.value)})),e})),A=eo((()=>{const e=new Set(d.value);return u.value.forEach((t=>{t.disabled||e.delete(t.value)})),e})),f=eo((()=>c.value.every((e=>e.disabled)))),m=eo((()=>{if(!c.value.length)return!1;const e=d.value;return c.value.every((t=>t.disabled||e.has(t.value)))})),g=eo((()=>u.value.some((e=>!e.disabled))));return{uncontrolledValueRef:t,mergedValueRef:n,targetValueSetRef:i,valueSetForCheckAllRef:h,valueSetForUncheckAllRef:p,valueSetForClearRef:A,filteredTgtOptionsRef:u,filteredSrcOptionsRef:c,targetOptionsRef:o,canNotSelectAnythingRef:f,canBeClearedRef:g,allCheckedRef:m,srcPatternRef:a,tgtPatternRef:s,mergedSrcFilterableRef:l,handleSrcFilterUpdateValue:function(e){a.value=null!=e?e:""},handleTgtFilterUpdateValue:function(e){s.value=null!=e?e:""}}}(e);function S(t){const{onUpdateValue:n,"onUpdate:value":i,onChange:o}=e,{nTriggerFormInput:a,nTriggerFormChange:l}=r;n&&Ka(n,t),i&&Ka(i,t),o&&Ka(o,t),s.value=t,a(),l()}function B(e,t){S(e?(l.value||[]).concat(t):(l.value||[]).filter((e=>e!==t)))}return nr(CD,{targetValueSetRef:c,mergedClsPrefixRef:t,disabledRef:o,mergedThemeRef:n,targetOptionsRef:f,canNotSelectAnythingRef:m,canBeClearedRef:g,allCheckedRef:v,srcOptionsLengthRef:eo((()=>e.options.length)),handleItemCheck:B,renderSourceLabelRef:Tt(e,"renderSourceLabel"),renderTargetLabelRef:Tt(e,"renderTargetLabel"),showSelectedRef:Tt(e,"showSelected")}),{mergedClsPrefix:t,mergedDisabled:o,itemSize:a,isMounted:Cl(),mergedTheme:n,filteredSrcOpts:A,filteredTgtOpts:p,srcPattern:y,tgtPattern:b,mergedSize:i,mergedSrcFilterable:w,handleSrcFilterUpdateValue:x,handleTgtFilterUpdateValue:C,handleSourceCheckAll:function(){S([...u.value])},handleSourceUncheckAll:function(){S([...d.value])},handleTargetClearAll:function(){S([...h.value])},handleItemCheck:B,handleChecked:function(e){S(e)},cssVars:eo((()=>{const{value:e}=i,{common:{cubicBezierEaseInOut:t},self:{borderRadius:r,borderColor:o,listColor:a,titleTextColor:s,titleTextColorDisabled:l,extraTextColor:c,itemTextColor:u,itemColorPending:d,itemTextColorDisabled:h,titleFontWeight:p,closeColorHover:A,closeColorPressed:f,closeIconColor:m,closeIconColorHover:g,closeIconColorPressed:v,closeIconSize:y,closeSize:b,dividerColor:w,extraTextColorDisabled:x,[Gs("extraFontSize",e)]:C,[Gs("fontSize",e)]:S,[Gs("titleFontSize",e)]:B,[Gs("itemHeight",e)]:_,[Gs("headerHeight",e)]:E}}=n.value;return{"--n-bezier":t,"--n-border-color":o,"--n-border-radius":r,"--n-extra-font-size":C,"--n-font-size":S,"--n-header-font-size":B,"--n-header-extra-text-color":c,"--n-header-extra-text-color-disabled":x,"--n-header-font-weight":p,"--n-header-text-color":s,"--n-header-text-color-disabled":l,"--n-item-color-pending":d,"--n-item-height":_,"--n-item-text-color":u,"--n-item-text-color-disabled":h,"--n-list-color":a,"--n-header-height":E,"--n-close-size":b,"--n-close-icon-size":y,"--n-close-color-hover":A,"--n-close-color-pressed":f,"--n-close-icon-color":m,"--n-close-icon-color-hover":g,"--n-close-icon-color-pressed":v,"--n-divider-color":w}}))}},render(){const{mergedClsPrefix:e,renderSourceList:t,renderTargetList:n,mergedTheme:r,mergedSrcFilterable:i,targetFilterable:o}=this;return to("div",{class:[`${e}-transfer`,this.mergedDisabled&&`${e}-transfer--disabled`],style:this.cssVars},to("div",{class:`${e}-transfer-list ${e}-transfer-list--source`},to(SD,{source:!0,selectAllText:this.selectAllText,clearText:this.clearText,title:this.sourceTitle,onCheckedAll:this.handleSourceCheckAll,onClearAll:this.handleSourceUncheckAll,size:this.mergedSize}),to("div",{class:`${e}-transfer-list-body`},i?to(ED,{onUpdateValue:this.handleSrcFilterUpdateValue,value:this.srcPattern,disabled:this.mergedDisabled,placeholder:this.sourceFilterPlaceholder}):null,to("div",{class:`${e}-transfer-list-flex-container`},t?to(Gb,{theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar},{default:()=>t({onCheck:this.handleChecked,checkedOptions:this.filteredTgtOpts,pattern:this.srcPattern})}):to(_D,{source:!0,options:this.filteredSrcOpts,disabled:this.mergedDisabled,virtualScroll:this.virtualScroll,itemSize:this.itemSize}))),to("div",{class:`${e}-transfer-list__border`})),to("div",{class:`${e}-transfer-list ${e}-transfer-list--target`},to(SD,{onClearAll:this.handleTargetClearAll,size:this.mergedSize,title:this.targetTitle}),to("div",{class:`${e}-transfer-list-body`},o?to(ED,{onUpdateValue:this.handleTgtFilterUpdateValue,value:this.tgtPattern,disabled:this.mergedDisabled,placeholder:this.sourceFilterPlaceholder}):null,to("div",{class:`${e}-transfer-list-flex-container`},n?to(Gb,{theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar},{default:()=>n({onCheck:this.handleChecked,checkedOptions:this.filteredTgtOpts,pattern:this.tgtPattern})}):to(_D,{options:this.filteredTgtOpts,disabled:this.mergedDisabled,virtualScroll:this.virtualScroll,itemSize:this.itemSize}))),to("div",{class:`${e}-transfer-list__border`})))}}),TD=Us("h","\n font-size: var(--n-font-size);\n font-weight: var(--n-font-weight);\n margin: var(--n-margin);\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n",[Ls("&:first-child",{marginTop:0}),Ns("prefix-bar",{position:"relative",paddingLeft:"var(--n-prefix-width)"},[Ns("align-text",{paddingLeft:0},[Ls("&::before",{left:"calc(-1 * var(--n-prefix-width))"})]),Ls("&::before",'\n content: "";\n width: var(--n-bar-width);\n border-radius: calc(var(--n-bar-width) / 2);\n transition: background-color .3s var(--n-bezier);\n left: 0;\n top: 0;\n bottom: 0;\n position: absolute;\n '),Ls("&::before",{backgroundColor:"var(--n-bar-color)"})])]),DD=Object.assign(Object.assign({},sf.props),{type:{type:String,default:"default"},prefix:String,alignText:Boolean}),FD=e=>Dn({name:`H${e}`,props:DD,setup(t){const{mergedClsPrefixRef:n,inlineThemeDisabled:r}=cf(t),i=sf("Typography","-h",TD,qP,t,n),o=eo((()=>{const{type:n}=t,{common:{cubicBezierEaseInOut:r},self:{headerFontWeight:o,headerTextColor:a,[Gs("headerPrefixWidth",e)]:s,[Gs("headerFontSize",e)]:l,[Gs("headerMargin",e)]:c,[Gs("headerBarWidth",e)]:u,[Gs("headerBarColor",n)]:d}}=i.value;return{"--n-bezier":r,"--n-font-size":l,"--n-margin":c,"--n-bar-color":d,"--n-bar-width":u,"--n-font-weight":o,"--n-text-color":a,"--n-prefix-width":s}})),a=r?Fv(`h${e}`,eo((()=>t.type[0])),o,t):void 0;return{mergedClsPrefix:n,cssVars:r?void 0:o,themeClass:null==a?void 0:a.themeClass,onRender:null==a?void 0:a.onRender}},render(){var t;const{prefix:n,alignText:r,mergedClsPrefix:i,cssVars:o,$slots:a}=this;return null===(t=this.onRender)||void 0===t||t.call(this),to(`h${e}`,{class:[`${i}-h`,`${i}-h${e}`,this.themeClass,{[`${i}-h--prefix-bar`]:n,[`${i}-h--align-text`]:r}],style:o},a)}}),ID=FD("3"),kD=FD("6"),OD=Us("text","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n",[Ns("strong","\n font-weight: var(--n-font-weight-strong);\n "),Ns("italic",{fontStyle:"italic"}),Ns("underline",{textDecoration:"underline"}),Ns("code","\n line-height: 1.4;\n display: inline-block;\n font-family: var(--n-font-famliy-mono);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n box-sizing: border-box;\n padding: .05em .35em 0 .35em;\n border-radius: var(--n-code-border-radius);\n font-size: .9em;\n color: var(--n-code-text-color);\n background-color: var(--n-code-color);\n border: var(--n-code-border);\n ")]),LD=Dn({name:"Text",props:Object.assign(Object.assign({},sf.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=cf(e),r=sf("Typography","-text",OD,qP,e,t),i=eo((()=>{const{depth:t,type:n}=e,i="default"===n?void 0===t?"textColor":`textColor${t}Depth`:Gs("textColor",n),{common:{fontWeightStrong:o,fontFamilyMono:a,cubicBezierEaseInOut:s},self:{codeTextColor:l,codeBorderRadius:c,codeColor:u,codeBorder:d,[i]:h}}=r.value;return{"--n-bezier":s,"--n-text-color":h,"--n-font-weight-strong":o,"--n-font-famliy-mono":a,"--n-code-border-radius":c,"--n-code-text-color":l,"--n-code-color":u,"--n-code-border":d}})),o=n?Fv("text",eo((()=>`${e.type[0]}${e.depth||""}`)),i,e):void 0;return{mergedClsPrefix:t,compitableTag:Sl(e,["as","tag"]),cssVars:n?void 0:i,themeClass:null==o?void 0:o.themeClass,onRender:null==o?void 0:o.onRender}},render(){var e,t,n;const{mergedClsPrefix:r}=this;null===(e=this.onRender)||void 0===e||e.call(this);const i=[`${r}-text`,this.themeClass,{[`${r}-text--code`]:this.code,[`${r}-text--delete`]:this.delete,[`${r}-text--strong`]:this.strong,[`${r}-text--italic`]:this.italic,[`${r}-text--underline`]:this.underline}],o=null===(n=(t=this.$slots).default)||void 0===n?void 0:n.call(t);return this.code?to("code",{class:i,style:this.cssVars},this.delete?to("del",null,o):o):this.delete?to("del",{class:i,style:this.cssVars},o):to(this.compitableTag||"span",{class:i,style:this.cssVars},o)}}),RD=Dn({__name:"App",setup:e=>(e,t)=>{const n=hn("RouterView");return gi(),xi(St(QT),null,{default:sn((()=>[Mi(St(qT),null,{default:sn((()=>[Mi(n)])),_:1})])),_:1})}});
/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */
let UD;const zD=e=>UD=e,ND=Symbol();function jD(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var HD,QD;(QD=HD||(HD={})).direct="direct",QD.patchObject="patch object",QD.patchFunction="patch function";const VD=()=>{};function WD(e,t,n,r=VD){e.push(t);const i=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};var o;return!n&&te()&&(o=i,$&&$.cleanups.push(o)),i}function GD(e,...t){e.slice().forEach((e=>{e(...t)}))}const qD=e=>e();function KD(e,t){e instanceof Map&&t instanceof Map&&t.forEach(((t,n)=>e.set(n,t))),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];jD(i)&&jD(r)&&e.hasOwnProperty(n)&&!yt(r)&&!lt(r)?e[n]=KD(i,r):e[n]=r}return e}const YD=Symbol();const{assign:XD}=Object;function $D(e,t,n={},r,i,o){let a;const s=XD({actions:{}},n),l={deep:!0};let c,u,d,h=[],p=[];const A=r.state.value[e];let f;function m(t){let n;c=u=!1,"function"==typeof t?(t(r.state.value[e]),n={type:HD.patchFunction,storeId:e,events:d}):(KD(r.state.value[e],t),n={type:HD.patchObject,payload:t,storeId:e,events:d});const i=f=Symbol();Vt().then((()=>{f===i&&(c=!0)})),u=!0,GD(h,n,r.state.value[e])}o||A||(r.state.value[e]={}),bt({});const g=o?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{XD(e,t)}))}:VD;function v(t,n){return function(){zD(r);const i=Array.from(arguments),o=[],a=[];let s;GD(p,{args:i,name:t,store:y,after:function(e){o.push(e)},onError:function(e){a.push(e)}});try{s=n.apply(this&&this.$id===e?this:y,i)}catch(l){throw GD(a,l),l}return s instanceof Promise?s.then((e=>(GD(o,e),e))).catch((e=>(GD(a,e),Promise.reject(e)))):(GD(o,s),s)}}const y=it({_p:r,$id:e,$onAction:WD.bind(null,p),$patch:m,$reset:g,$subscribe(t,n={}){const i=WD(h,t,n.detached,(()=>o())),o=a.run((()=>Ir((()=>r.state.value[e]),(r=>{("sync"===n.flush?u:c)&&t({storeId:e,type:HD.direct,events:d},r)}),XD({},l,n))));return i},$dispose:function(){a.stop(),h=[],p=[],r._s.delete(e)}});r._s.set(e,y);const b=(r._a&&r._a.runWithContext||qD)((()=>r._e.run((()=>(a=ee()).run(t)))));for(const C in b){const t=b[C];if(yt(t)&&(!yt(x=t)||!x.effect)||lt(t))o||(!A||jD(w=t)&&w.hasOwnProperty(YD)||(yt(t)?t.value=A[C]:KD(t,A[C])),r.state.value[e][C]=t);else if("function"==typeof t){const e=v(C,t);b[C]=e,s.actions[C]=t}}var w,x;return XD(y,b),XD(ht(y),b),Object.defineProperty(y,"$state",{get:()=>r.state.value[e],set:e=>{m((t=>{XD(t,e)}))}}),r._p.forEach((e=>{XD(y,a.run((()=>e({store:y,app:r._a,pinia:r,options:s}))))})),A&&o&&n.hydrate&&n.hydrate(y.$state,A),c=!0,u=!0,y}function JD(e,t,n){let r,i;const o="function"==typeof t;function a(e,n){(e=e||(!!(Ni||tn||tr)?rr(ND,null):null))&&zD(e),(e=UD)._s.has(r)||(o?$D(r,t,i,e):function(e,t,n){const{state:r,actions:i,getters:o}=t,a=n.state.value[e];let s;s=$D(e,(function(){a||(n.state.value[e]=r?r():{});const t=Et(n.state.value[e]);return XD(t,i,Object.keys(o||{}).reduce(((t,r)=>(t[r]=pt(eo((()=>{zD(n);const t=n._s.get(e);return o[r].call(t,t)}))),t)),{}))}),t,n,0,!0)}(r,i,e));return e._s.get(r)}return"string"==typeof e?(r=e,i=o?n:t):(i=e,r=e.id),a.$id=r,a}function ZD(e){{e=ht(e);const t={};for(const n in e){const r=e[n];(yt(r)||lt(r))&&(t[n]=Tt(e,n))}return t}}const eF=function(){const e=ee(!0),t=e.run((()=>bt({})));let n=[],r=[];const i=pt({install(e){zD(i),i._a=e,e.provide(ND,i),e.config.globalProperties.$pinia=i,r.forEach((e=>n.push(e))),r=[]},use(e){return this._a?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}(),tF={},nF=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.all(t.map((e=>{if((e=function(e){return"/DigitalTWINonFHIRFrontend/"+e}(e))in tF)return;tF[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise(((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}return r.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},rF="undefined"!=typeof document;const iF=Object.assign;function oF(e,t){const n={};for(const r in t){const i=t[r];n[r]=sF(i)?i.map(e):e(i)}return n}const aF=()=>{},sF=Array.isArray,lF=/#/g,cF=/&/g,uF=/\//g,dF=/=/g,hF=/\?/g,pF=/\+/g,AF=/%5B/g,fF=/%5D/g,mF=/%5E/g,gF=/%60/g,vF=/%7B/g,yF=/%7C/g,bF=/%7D/g,wF=/%20/g;function xF(e){return encodeURI(""+e).replace(yF,"|").replace(AF,"[").replace(fF,"]")}function CF(e){return xF(e).replace(pF,"%2B").replace(wF,"+").replace(lF,"%23").replace(cF,"%26").replace(gF,"`").replace(vF,"{").replace(bF,"}").replace(mF,"^")}function SF(e){return null==e?"":function(e){return xF(e).replace(lF,"%23").replace(hF,"%3F")}(e).replace(uF,"%2F")}function BF(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const _F=/\/$/,EF=e=>e.replace(_F,"");function MF(e,t,n="/"){let r,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(r=r||t.slice(0,s),a=t.slice(s,t.length)),r=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];".."!==i&&"."!==i||r.push("");let o,a,s=n.length-1;for(o=0;o<r.length;o++)if(a=r[o],"."!==a){if(".."!==a)break;s>1&&s--}return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}(null!=r?r:t,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:BF(a)}}function PF(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function TF(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function DF(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!FF(e[n],t[n]))return!1;return!0}function FF(e,t){return sF(e)?IF(e,t):sF(t)?IF(t,e):e===t}function IF(e,t){return sF(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}const kF={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var OF,LF,RF,UF;(LF=OF||(OF={})).pop="pop",LF.push="push",(UF=RF||(RF={})).back="back",UF.forward="forward",UF.unknown="";const zF=/^[^#]+#/;function NF(e,t){return e.replace(zF,"#")+t}const jF=()=>({left:window.scrollX,top:window.scrollY});function HF(e){let t;if("el"in e){const n=e.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function QF(e,t){return(history.state?history.state.position-t:-1)+e}const VF=new Map;let WF=()=>location.protocol+"//"+location.host;function GF(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let t=i.includes(e.slice(o))?e.slice(o).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),PF(n,"")}return PF(n,e)+r+i}function qF(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?jF():null}}function KF(e){const t=function(e){const{history:t,location:n}=window,r={value:GF(e,n)},i={value:t.state};function o(r,o,a){const s=e.indexOf("#"),l=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:WF()+e+r;try{t[a?"replaceState":"pushState"](o,"",l),i.value=o}catch(c){n[a?"replace":"assign"](l)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(e,n){const a=iF({},i.value,t.state,{forward:e,scroll:jF()});o(a.current,a,!0),o(e,iF({},qF(r.value,e,null),{position:a.position+1},n),!1),r.value=e},replace:function(e,n){o(e,iF({},t.state,qF(i.value.back,e,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=e}}}(e=function(e){if(!e)if(rF){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),EF(e)}(e)),n=function(e,t,n,r){let i=[],o=[],a=null;const s=({state:o})=>{const s=GF(e,location),l=n.value,c=t.value;let u=0;if(o){if(n.value=s,t.value=o,a&&a===l)return void(a=null);u=c?o.position-c.position:0}else r(s);i.forEach((e=>{e(n.value,l,{delta:u,type:OF.pop,direction:u?u>0?RF.forward:RF.back:RF.unknown})}))};function l(){const{history:e}=window;e.state&&e.replaceState(iF({},e.state,{scroll:jF()}),"")}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:function(){a=n.value},listen:function(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return o.push(t),t},destroy:function(){for(const e of o)e();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",l)}}}(e,t.state,t.location,t.replace);const r=iF({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:NF.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function YF(e){return"string"==typeof e||"symbol"==typeof e}const XF=Symbol("");var $F,JF;function ZF(e,t){return iF(new Error,{type:e,[XF]:!0},t)}function eI(e,t){return e instanceof Error&&XF in e&&(null==t||!!(e.type&t))}(JF=$F||($F={}))[JF.aborted=4]="aborted",JF[JF.cancelled=8]="cancelled",JF[JF.duplicated=16]="duplicated";const tI="[^/]+?",nI={sensitive:!1,strict:!1,start:!0,end:!0},rI=/[.+*?^${}()[\]/\\]/g;function iI(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function oI(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const e=iI(r[n],i[n]);if(e)return e;n++}if(1===Math.abs(i.length-r.length)){if(aI(r))return 1;if(aI(i))return-1}return i.length-r.length}function aI(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const sI={type:0,value:""},lI=/[a-zA-Z0-9_]/;function cI(e,t,n){const r=function(e,t){const n=iF({},nI,t),r=[];let i=n.start?"^":"";const o=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let t=0;t<l.length;t++){const r=l[t];let a=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(rI,"\\$&"),a+=40;else if(1===r.type){const{value:e,repeatable:n,optional:c,regexp:u}=r;o.push({name:e,repeatable:n,optional:c});const d=u||tI;if(d!==tI){a+=10;try{new RegExp(`(${d})`)}catch(s){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+s.message)}}let h=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(h=c&&l.length<2?`(?:/${h})`:"/"+h),c&&(h+="?"),i+=h,a+=20,c&&(a+=-8),n&&(a+=-20),".*"===d&&(a+=-50)}e.push(a)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");return{re:a,score:r,keys:o,parse:function(e){const t=e.match(a),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=o[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:o,repeatable:a,optional:s}=e,l=o in t?t[o]:"";if(sF(l)&&!a)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=sF(l)?l.join("/"):l;if(!c){if(!s)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[sI]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s,l=0,c="",u="";function d(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),c="")}function h(){c+=s}for(;l<e.length;)if(s=e[l++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(c&&d(),a()):":"===s?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:"("===s?n=2:lI.test(s)?h():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--);break;case 2:")"===s?"\\"==u[u.length-1]?u=u.slice(0,-1)+s:n=3:u+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--,u="";break;default:t("Unknown state")}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),d(),a(),i}(e.path),n),i=iF(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function uI(e,t){const n=[],r=new Map;function i(e,n,r){const s=!r,l=function(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:hI(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}(e);l.aliasOf=r&&r.record;const c=fI(t,e),u=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(iF({},l,{components:r?r.record.components:l.components,path:e,aliasOf:r?r.record:l}))}let d,h;for(const t of u){const{path:u}=t;if(n&&"/"!==u[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(u&&r+u)}if(d=cI(t,n,c),r?r.alias.push(d):(h=h||d,h!==d&&h.alias.push(d),s&&e.name&&!pI(d)&&o(e.name)),mI(d)&&a(d),l.children){const e=l.children;for(let t=0;t<e.length;t++)i(e[t],d,r&&r.children[t])}r=r||d}return h?()=>{o(h)}:aF}function o(e){if(YF(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(o),t.alias.forEach(o))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(o),e.alias.forEach(o))}}function a(e){const t=function(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;oI(e,t[i])<0?r=i:n=i+1}const i=function(e){let t=e;for(;t=t.parent;)if(mI(t)&&0===oI(e,t))return t;return}(e);i&&(r=t.lastIndexOf(i,r-1));return r}(e,n);n.splice(t,0,e),e.record.name&&!pI(e)&&r.set(e.record.name,e)}return t=fI({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>i(e))),{addRoute:i,resolve:function(e,t){let i,o,a,s={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw ZF(1,{location:e});a=i.record.name,s=iF(dI(t.params,i.keys.filter((e=>!e.optional)).concat(i.parent?i.parent.keys.filter((e=>e.optional)):[]).map((e=>e.name))),e.params&&dI(e.params,i.keys.map((e=>e.name)))),o=i.stringify(s)}else if(null!=e.path)o=e.path,i=n.find((e=>e.re.test(o))),i&&(s=i.parse(o),a=i.record.name);else{if(i=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!i)throw ZF(1,{location:e,currentLocation:t});a=i.record.name,s=iF({},t.params,e.params),o=i.stringify(s)}const l=[];let c=i;for(;c;)l.unshift(c.record),c=c.parent;return{name:a,path:o,params:s,matched:l,meta:AI(l)}},removeRoute:o,clearRoutes:function(){n.length=0,r.clear()},getRoutes:function(){return n},getRecordMatcher:function(e){return r.get(e)}}}function dI(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function hI(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="object"==typeof n?n[r]:n;return t}function pI(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function AI(e){return e.reduce(((e,t)=>iF(e,t.meta)),{})}function fI(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function mI({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function gI(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(pF," "),i=e.indexOf("="),o=BF(i<0?e:e.slice(0,i)),a=i<0?null:BF(e.slice(i+1));if(o in t){let e=t[o];sF(e)||(e=t[o]=[e]),e.push(a)}else t[o]=a}return t}function vI(e){let t="";for(let n in e){const r=e[n];if(n=CF(n).replace(dF,"%3D"),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}(sF(r)?r.map((e=>e&&CF(e))):[r&&CF(r)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function yI(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=sF(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}const bI=Symbol(""),wI=Symbol(""),xI=Symbol(""),CI=Symbol(""),SI=Symbol("");function BI(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e.slice(),reset:function(){e=[]}}}function _I(e,t,n,r,i,o=e=>e()){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,l)=>{const c=e=>{var o;!1===e?l(ZF(4,{from:n,to:t})):e instanceof Error?l(e):"string"==typeof(o=e)||o&&"object"==typeof o?l(ZF(2,{from:t,to:e})):(a&&r.enterCallbacks[i]===a&&"function"==typeof e&&a.push(e),s())},u=o((()=>e.call(r&&r.instances[i],t,n,c)));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch((e=>l(e)))}))}function EI(e,t,n,r,i=e=>e()){const o=[];for(const s of e)for(const e in s.components){let l=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if("object"==typeof(a=l)||"displayName"in a||"props"in a||"__vccOpts"in a){const a=(l.__vccOpts||l)[t];a&&o.push(_I(a,n,r,s,e,i))}else{let a=l();o.push((()=>a.then((o=>{if(!o)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${s.path}"`));const a=(l=o).__esModule||"Module"===l[Symbol.toStringTag]?o.default:o;var l;s.components[e]=a;const c=(a.__vccOpts||a)[t];return c&&_I(c,n,r,s,e,i)()}))))}}var a;return o}function MI(e){const t=rr(xI),n=rr(CI),r=eo((()=>{const n=St(e.to);return t.resolve(n)})),i=eo((()=>{const{matched:e}=r.value,{length:t}=e,i=e[t-1],o=n.matched;if(!i||!o.length)return-1;const a=o.findIndex(TF.bind(null,i));if(a>-1)return a;const s=TI(e[t-2]);return t>1&&TI(i)===s&&o[o.length-1].path!==s?o.findIndex(TF.bind(null,e[t-2])):a})),o=eo((()=>i.value>-1&&function(e,t){for(const n in t){const r=t[n],i=e[n];if("string"==typeof r){if(r!==i)return!1}else if(!sF(i)||i.length!==r.length||r.some(((e,t)=>e!==i[t])))return!1}return!0}(n.params,r.value.params))),a=eo((()=>i.value>-1&&i.value===n.matched.length-1&&DF(n.params,r.value.params)));return{route:r,href:eo((()=>r.value.href)),isActive:o,isExactActive:a,navigate:function(n={}){return function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(n)?t[St(e.replace)?"replace":"push"](St(e.to)).catch(aF):Promise.resolve()}}}const PI=Dn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:MI,setup(e,{slots:t}){const n=it(MI(e)),{options:r}=rr(xI),i=eo((()=>({[DI(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[DI(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=t.default&&t.default(n);return e.custom?r:to("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function TI(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const DI=(e,t,n)=>null!=e?e:null!=t?t:n;function FI(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const II=Dn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=rr(SI),i=eo((()=>e.route||r.value)),o=rr(wI,0),a=eo((()=>{let e=St(o);const{matched:t}=i.value;let n;for(;(n=t[e])&&!n.components;)e++;return e})),s=eo((()=>i.value.matched[a.value]));nr(wI,eo((()=>a.value+1))),nr(bI,s),nr(SI,i);const l=bt();return Ir((()=>[l.value,s.value,e.name]),(([e,t,n],[r,i,o])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&TF(t,i)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const r=i.value,o=e.name,a=s.value,c=a&&a.components[o];if(!c)return FI(n.default,{Component:c,route:r});const u=a.props[o],d=u?!0===u?r.params:"function"==typeof u?u(r):u:null,h=to(c,iF({},d,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(a.instances[o]=null)},ref:l}));return FI(n.default,{Component:h,route:r})||h}}});function kI(){return rr(xI)}function OI(e){return rr(CI)}function LI(e,t){return function(){return e.apply(t,arguments)}}const{toString:RI}=Object.prototype,{getPrototypeOf:UI}=Object,zI=(e=>t=>{const n=RI.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),NI=e=>(e=e.toLowerCase(),t=>zI(t)===e),jI=e=>t=>typeof t===e,{isArray:HI}=Array,QI=jI("undefined");const VI=NI("ArrayBuffer");const WI=jI("string"),GI=jI("function"),qI=jI("number"),KI=e=>null!==e&&"object"==typeof e,YI=e=>{if("object"!==zI(e))return!1;const t=UI(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},XI=NI("Date"),$I=NI("File"),JI=NI("Blob"),ZI=NI("FileList"),ek=NI("URLSearchParams"),[tk,nk,rk,ik]=["ReadableStream","Request","Response","Headers"].map(NI);function ok(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),HI(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(r=0;r<o;r++)a=i[r],t.call(null,e[a],a,e)}}function ak(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const sk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,lk=e=>!QI(e)&&e!==sk;const ck=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&UI(Uint8Array)),uk=NI("HTMLFormElement"),dk=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),hk=NI("RegExp"),pk=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ok(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},Ak="abcdefghijklmnopqrstuvwxyz",fk="0123456789",mk={DIGIT:fk,ALPHA:Ak,ALPHA_DIGIT:Ak+Ak.toUpperCase()+fk};const gk=NI("AsyncFunction"),vk={isArray:HI,isArrayBuffer:VI,isBuffer:function(e){return null!==e&&!QI(e)&&null!==e.constructor&&!QI(e.constructor)&&GI(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||GI(e.append)&&("formdata"===(t=zI(e))||"object"===t&&GI(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&VI(e.buffer),t},isString:WI,isNumber:qI,isBoolean:e=>!0===e||!1===e,isObject:KI,isPlainObject:YI,isReadableStream:tk,isRequest:nk,isResponse:rk,isHeaders:ik,isUndefined:QI,isDate:XI,isFile:$I,isBlob:JI,isRegExp:hk,isFunction:GI,isStream:e=>KI(e)&&GI(e.pipe),isURLSearchParams:ek,isTypedArray:ck,isFileList:ZI,forEach:ok,merge:function e(){const{caseless:t}=lk(this)&&this||{},n={},r=(r,i)=>{const o=t&&ak(n,i)||i;YI(n[o])&&YI(r)?n[o]=e(n[o],r):YI(r)?n[o]=e({},r):HI(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ok(arguments[i],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(ok(t,((t,r)=>{n&&GI(t)?e[r]=LI(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&UI(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:zI,kindOfTest:NI,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(HI(e))return e;let t=e.length;if(!qI(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:uk,hasOwnProperty:dk,hasOwnProp:dk,reduceDescriptors:pk,freezeMethods:e=>{pk(e,((t,n)=>{if(GI(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];GI(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return HI(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ak,global:sk,isContextDefined:lk,ALPHABET:mk,generateString:(e=16,t=mk.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&GI(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(KI(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=HI(e)?[]:{};return ok(e,((e,t)=>{const o=n(e,r+1);!QI(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:gk,isThenable:e=>e&&(KI(e)||GI(e))&&GI(e.then)&&GI(e.catch)};function yk(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}vk.inherits(yk,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:vk.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const bk=yk.prototype,wk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{wk[e]={value:e}})),Object.defineProperties(yk,wk),Object.defineProperty(bk,"isAxiosError",{value:!0}),yk.from=(e,t,n,r,i,o)=>{const a=Object.create(bk);return vk.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),yk.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};function xk(e){return vk.isPlainObject(e)||vk.isArray(e)}function Ck(e){return vk.endsWith(e,"[]")?e.slice(0,-2):e}function Sk(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ck(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Bk=vk.toFlatObject(vk,{},null,(function(e){return/^is[A-Z]/.test(e)}));function _k(e,t,n){if(!vk.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=vk.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!vk.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&vk.isSpecCompliantForm(t);if(!vk.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(vk.isDate(e))return e.toISOString();if(!s&&vk.isBlob(e))throw new yk("Blob is not supported. Use a Buffer instead.");return vk.isArrayBuffer(e)||vk.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let s=e;if(e&&!i&&"object"==typeof e)if(vk.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(vk.isArray(e)&&function(e){return vk.isArray(e)&&!e.some(xk)}(e)||(vk.isFileList(e)||vk.endsWith(n,"[]"))&&(s=vk.toArray(e)))return n=Ck(n),s.forEach((function(e,r){!vk.isUndefined(e)&&null!==e&&t.append(!0===a?Sk([n],r,o):null===a?n:n+"[]",l(e))})),!1;return!!xk(e)||(t.append(Sk(i,n,o),l(e)),!1)}const u=[],d=Object.assign(Bk,{defaultVisitor:c,convertValue:l,isVisitable:xk});if(!vk.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!vk.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),vk.forEach(n,(function(n,o){!0===(!(vk.isUndefined(n)||null===n)&&i.call(t,n,vk.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t}function Ek(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Mk(e,t){this._pairs=[],e&&_k(e,this,t)}const Pk=Mk.prototype;function Tk(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dk(e,t,n){if(!t)return e;const r=n&&n.encode||Tk,i=n&&n.serialize;let o;if(o=i?i(t,n):vk.isURLSearchParams(t)?t.toString():new Mk(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}Pk.append=function(e,t){this._pairs.push([e,t])},Pk.toString=function(e){const t=e?function(t){return e.call(this,t,Ek)}:Ek;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class Fk{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){vk.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const Ik={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kk={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Mk,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ok="undefined"!=typeof window&&"undefined"!=typeof document,Lk=(Rk="undefined"!=typeof navigator&&navigator.product,Ok&&["ReactNative","NativeScript","NS"].indexOf(Rk)<0);var Rk;const Uk="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,zk=Ok&&window.location.href||"http://localhost",Nk={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ok,hasStandardBrowserEnv:Lk,hasStandardBrowserWebWorkerEnv:Uk,origin:zk},Symbol.toStringTag,{value:"Module"})),...kk};function jk(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&vk.isArray(r)?r.length:o,s)return vk.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a;r[o]&&vk.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&vk.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!a}if(vk.isFormData(e)&&vk.isFunction(e.entries)){const n={};return vk.forEachEntry(e,((e,r)=>{t(function(e){return vk.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Hk={transitional:Ik,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=vk.isObject(e);i&&vk.isHTMLForm(e)&&(e=new FormData(e));if(vk.isFormData(e))return r?JSON.stringify(jk(e)):e;if(vk.isArrayBuffer(e)||vk.isBuffer(e)||vk.isStream(e)||vk.isFile(e)||vk.isBlob(e)||vk.isReadableStream(e))return e;if(vk.isArrayBufferView(e))return e.buffer;if(vk.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return _k(e,new Nk.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Nk.isNode&&vk.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=vk.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return _k(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(vk.isString(e))try{return(t||JSON.parse)(e),vk.trim(e)}catch(g9){if("SyntaxError"!==g9.name)throw g9}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Hk.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(vk.isResponse(e)||vk.isReadableStream(e))return e;if(e&&vk.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(g9){if(n){if("SyntaxError"===g9.name)throw yk.from(g9,yk.ERR_BAD_RESPONSE,this,null,this.response);throw g9}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nk.classes.FormData,Blob:Nk.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};vk.forEach(["delete","get","head","post","put","patch"],(e=>{Hk.headers[e]={}}));const Qk=vk.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vk=Symbol("internals");function Wk(e){return e&&String(e).trim().toLowerCase()}function Gk(e){return!1===e||null==e?e:vk.isArray(e)?e.map(Gk):String(e)}function qk(e,t,n,r,i){return vk.isFunction(r)?r.call(this,t,n):(i&&(t=n),vk.isString(t)?vk.isString(r)?-1!==t.indexOf(r):vk.isRegExp(r)?r.test(t):void 0:void 0)}class Kk{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Wk(t);if(!i)throw new Error("header name must be a non-empty string");const o=vk.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=Gk(e))}const o=(e,t)=>vk.forEach(e,((e,n)=>i(e,n,t)));if(vk.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(vk.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Qk[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(vk.isHeaders(e))for(const[a,s]of e.entries())i(s,a,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=Wk(e)){const n=vk.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(vk.isFunction(t))return t.call(this,e,n);if(vk.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Wk(e)){const n=vk.findKey(this,e);return!(!n||void 0===this[n]||t&&!qk(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Wk(e)){const i=vk.findKey(n,e);!i||t&&!qk(0,n[i],i,t)||(delete n[i],r=!0)}}return vk.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!qk(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return vk.forEach(this,((r,i)=>{const o=vk.findKey(n,i);if(o)return t[o]=Gk(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=Gk(r),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return vk.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&vk.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Vk]=this[Vk]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Wk(e);t[r]||(!function(e,t){const n=vk.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return vk.isArray(e)?e.forEach(r):r(e),this}}function Yk(e,t){const n=this||Hk,r=t||n,i=Kk.from(r.headers);let o=r.data;return vk.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function Xk(e){return!(!e||!e.__CANCEL__)}function $k(e,t,n){yk.call(this,null==e?"canceled":e,yk.ERR_CANCELED,t,n),this.name="CanceledError"}function Jk(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new yk("Request failed with status code "+n.status,[yk.ERR_BAD_REQUEST,yk.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}Kk.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),vk.reduceDescriptors(Kk.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),vk.freezeMethods(Kk),vk.inherits($k,yk,{__CANCEL__:!0});const Zk=(e,t,n=3)=>{let r=0;const i=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[a];i||(i=l),n[o]=s,r[o]=l;let u=a,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n=0;const r=1e3/t;let i=null;return function(){const t=!0===this,o=Date.now();if(t||o-n>r)return i&&(clearTimeout(i),i=null),n=o,e.apply(null,arguments);i||(i=setTimeout((()=>(i=null,n=Date.now(),e.apply(null,arguments))),r-(o-n)))}}((n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,s=o-r,l=i(s);r=o;const c={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:n,lengthComputable:null!=a};c[t?"download":"upload"]=!0,e(c)}),n)},eO=Nk.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=vk.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return function(){return!0}}(),tO=Nk.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];vk.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),vk.isString(r)&&a.push("path="+r),vk.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function nO(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const rO=e=>e instanceof Kk?{...e}:e;function iO(e,t){t=t||{};const n={};function r(e,t,n){return vk.isPlainObject(e)&&vk.isPlainObject(t)?vk.merge.call({caseless:n},e,t):vk.isPlainObject(t)?vk.merge({},t):vk.isArray(t)?t.slice():t}function i(e,t,n){return vk.isUndefined(t)?vk.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!vk.isUndefined(t))return r(void 0,t)}function a(e,t){return vk.isUndefined(t)?vk.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(rO(e),rO(t),!0)};return vk.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,a=o(e[r],t[r],r);vk.isUndefined(a)&&o!==s||(n[r]=a)})),n}const oO=e=>{const t=iO({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=Kk.from(s),t.url=Dk(nO(t.baseURL,t.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),vk.isFormData(r))if(Nk.hasStandardBrowserEnv||Nk.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(Nk.hasStandardBrowserEnv&&(i&&vk.isFunction(i)&&(i=i(t)),i||!1!==i&&eO(t.url))){const e=o&&a&&tO.read(a);e&&s.set(o,e)}return t},aO="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=oO(e);let i=r.data;const o=Kk.from(r.headers).normalize();let a,{responseType:s}=r;function l(){r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let c=new XMLHttpRequest;function u(){if(!c)return;const r=Kk.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());Jk((function(e){t(e),l()}),(function(e){n(e),l()}),{data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}c.open(r.method.toUpperCase(),r.url,!0),c.timeout=r.timeout,"onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(u)},c.onabort=function(){c&&(n(new yk("Request aborted",yk.ECONNABORTED,r,c)),c=null)},c.onerror=function(){n(new yk("Network Error",yk.ERR_NETWORK,r,c)),c=null},c.ontimeout=function(){let e=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const t=r.transitional||Ik;r.timeoutErrorMessage&&(e=r.timeoutErrorMessage),n(new yk(e,t.clarifyTimeoutError?yk.ETIMEDOUT:yk.ECONNABORTED,r,c)),c=null},void 0===i&&o.setContentType(null),"setRequestHeader"in c&&vk.forEach(o.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),vk.isUndefined(r.withCredentials)||(c.withCredentials=!!r.withCredentials),s&&"json"!==s&&(c.responseType=r.responseType),"function"==typeof r.onDownloadProgress&&c.addEventListener("progress",Zk(r.onDownloadProgress,!0)),"function"==typeof r.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Zk(r.onUploadProgress)),(r.cancelToken||r.signal)&&(a=t=>{c&&(n(!t||t.type?new $k(null,e,c):t),c.abort(),c=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const d=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);d&&-1===Nk.protocols.indexOf(d)?n(new yk("Unsupported protocol "+d+":",yk.ERR_BAD_REQUEST,e)):c.send(i||null)}))},sO=(e,t)=>{let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof yk?t:new $k(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{i(new yk(`timeout ${t} of ms exceeded`,yk.ETIMEDOUT))}),t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",i):e.unsubscribe(i))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",i)));const{signal:s}=r;return s.unsubscribe=a,[s,()=>{o&&clearTimeout(o),o=null}]},lO=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},cO=(e,t,n,r,i)=>{const o=async function*(e,t,n){for await(const r of e)yield*lO(ArrayBuffer.isView(r)?r:await n(String(r)),t)}(e,t,i);let a=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:i}=await o.next();if(t)return e.close(),void r();let s=i.byteLength;n&&n(a+=s),e.enqueue(new Uint8Array(i))},cancel:e=>(r(e),o.return())},{highWaterMark:2})},uO=(e,t)=>{const n=null!=e;return r=>setTimeout((()=>t({lengthComputable:n,total:e,loaded:r})))},dO="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,hO=dO&&"function"==typeof ReadableStream,pO=dO&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),AO=hO&&(()=>{let e=!1;const t=new Request(Nk.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),fO=hO&&!!(()=>{try{return vk.isReadableStream(new Response("").body)}catch(e){}})(),mO={stream:fO&&(e=>e.body)};var gO;dO&&(gO=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!mO[e]&&(mO[e]=vk.isFunction(gO[e])?t=>t[e]():(t,n)=>{throw new yk(`Response type '${e}' is not supported`,yk.ERR_NOT_SUPPORT,n)})})));const vO=async(e,t)=>{const n=vk.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:vk.isBlob(e)?e.size:vk.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:vk.isArrayBufferView(e)?e.byteLength:(vk.isURLSearchParams(e)&&(e+=""),vk.isString(e)?(await pO(e)).byteLength:void 0))(t):n},yO={http:null,xhr:aO,fetch:dO&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=oO(e);c=c?(c+"").toLowerCase():"text";let p,A,[f,m]=i||o||a?sO([i,o],a):[];const g=()=>{!p&&setTimeout((()=>{f&&f.unsubscribe()})),p=!0};let v;try{if(l&&AO&&"get"!==n&&"head"!==n&&0!==(v=await vO(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});vk.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body&&(r=cO(n.body,65536,uO(v,Zk(l)),null,pO))}vk.isString(d)||(d=d?"cors":"omit"),A=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",withCredentials:d});let i=await fetch(A);const o=fO&&("stream"===c||"response"===c);if(fO&&(s||o)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=vk.toFiniteNumber(i.headers.get("content-length"));i=new Response(cO(i.body,65536,s&&uO(t,Zk(s,!0)),o&&g,pO),e)}c=c||"text";let a=await mO[vk.findKey(mO,c)||"text"](i,e);return!o&&g(),m&&m(),await new Promise(((t,n)=>{Jk(t,n,{data:a,headers:Kk.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:A})}))}catch(y){if(g(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new yk("Network Error",yk.ERR_NETWORK,e,A),{cause:y.cause||y});throw yk.from(y,y&&y.code,e,A)}})};vk.forEach(yO,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(g9){}Object.defineProperty(e,"adapterName",{value:t})}}));const bO=e=>`- ${e}`,wO=e=>vk.isFunction(e)||null===e||!1===e,xO=e=>{e=vk.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!wO(n)&&(r=yO[(t=String(n)).toLowerCase()],void 0===r))throw new yk(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new yk("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(bO).join("\n"):" "+bO(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function CO(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $k(null,e)}function SO(e){CO(e),e.headers=Kk.from(e.headers),e.data=Yk.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return xO(e.adapter||Hk.adapter)(e).then((function(t){return CO(e),t.data=Yk.call(e,e.transformResponse,t),t.headers=Kk.from(t.headers),t}),(function(t){return Xk(t)||(CO(e),t&&t.response&&(t.response.data=Yk.call(e,e.transformResponse,t.response),t.response.headers=Kk.from(t.response.headers))),Promise.reject(t)}))}const BO="1.7.2",_O={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{_O[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const EO={};_O.transitional=function(e,t,n){return(r,i,o)=>{if(!1===e)throw new yk(function(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}(i," has been removed"+(t?" in "+t:"")),yk.ERR_DEPRECATED);return t&&!EO[i]&&(EO[i]=!0),!e||e(r,i,o)}};const MO={assertOptions:function(e,t,n){if("object"!=typeof e)throw new yk("options must be an object",yk.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new yk("option "+o+" must be "+n,yk.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new yk("Unknown option "+o,yk.ERR_BAD_OPTION)}},validators:_O},PO=MO.validators;class TO{constructor(e){this.defaults=e,this.interceptors={request:new Fk,response:new Fk}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(g9){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=iO(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&MO.assertOptions(n,{silentJSONParsing:PO.transitional(PO.boolean),forcedJSONParsing:PO.transitional(PO.boolean),clarifyTimeoutError:PO.transitional(PO.boolean)},!1),null!=r&&(vk.isFunction(r)?t.paramsSerializer={serialize:r}:MO.assertOptions(r,{encode:PO.function,serialize:PO.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&vk.merge(i.common,i[t.method]);i&&vk.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Kk.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[SO.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=SO.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Dk(nO((e=iO(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}vk.forEach(["delete","get","head","options"],(function(e){TO.prototype[e]=function(t,n){return this.request(iO(n||{},{method:e,url:t,data:(n||{}).data}))}})),vk.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(iO(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}TO.prototype[e]=t(),TO.prototype[e+"Form"]=t(!0)}));class DO{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new $k(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new DO((function(t){e=t})),cancel:e}}}const FO={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(FO).forEach((([e,t])=>{FO[t]=e}));const IO=function e(t){const n=new TO(t),r=LI(TO.prototype.request,n);return vk.extend(r,TO.prototype,n,{allOwnKeys:!0}),vk.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(iO(t,n))},r}(Hk);IO.Axios=TO,IO.CanceledError=$k,IO.CancelToken=DO,IO.isCancel=Xk,IO.VERSION=BO,IO.toFormData=_k,IO.AxiosError=yk,IO.Cancel=IO.CanceledError,IO.all=function(e){return Promise.all(e)},IO.spread=function(e){return function(t){return e.apply(null,t)}},IO.isAxiosError=function(e){return vk.isObject(e)&&!0===e.isAxiosError},IO.mergeConfig=iO,IO.AxiosHeaders=Kk,IO.formToJSON=e=>jk(vk.isHTMLForm(e)?new FormData(e):e),IO.getAdapter=xO,IO.HttpStatusCode=FO,IO.default=IO;IO.defaults.baseURL="https://cors-anywhere.herokuapp.com/http://130.216.217.173:5561/",IO.interceptors.request.use((e=>e)),IO.interceptors.response.use((e=>e),(e=>Promise.reject(e)));const kO={get:(e,t)=>new Promise(((n,r)=>{IO.get(e,{params:t}).then((e=>{n(e.data)})).catch((e=>{r(e)}))})),getBlob:(e,t)=>new Promise(((n,r)=>{IO.get(e,{params:t,responseType:"blob"}).then((e=>{n(e.data)})).catch((e=>{r(e)}))})),post:(e,t)=>new Promise(((n,r)=>{IO.post(e,t).then((e=>{n(e.data)})).catch((e=>{r(e)}))}))};const OO=JD("patientsInfo",(()=>{const e=bt();return{patients:e,getPatients:async()=>{e.value=await async function(){return kO.get("/patients")}()}}})),LO=JD("overallInfo",(()=>{const e=bt();return{overall:e,getOverall:async()=>{e.value=await async function(){return kO.get("/overall")}()}}})),RO=JD("patientDetails",(()=>{const e=bt();return{patientDetails:e,getpatientDetails:async t=>{e.value=await async function(e){return kO.get(`/patient/details/${e}`)}(t)}}})),UO=JD("workflowToolProcess",(()=>{const e=bt();return{workflowToolProcess:e,getWorkflowToolProcess:async t=>{e.value=await async function(e){return kO.get(`/workflow/process/${e}`)}(t)}}})),zO=()=>window.matchMedia("(min-width: 1920px)").matches?"3xl":window.matchMedia("(min-width: 1536px)").matches?"2xl":window.matchMedia("(min-width: 1280px)").matches?"xl":window.matchMedia("(min-width: 1024px)").matches?"lg":window.matchMedia("(min-width: 768px)").matches?"md":"sm",NO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jO=[Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1)],HO=Dn({name:"AddOutline",render:function(e,t){return gi(),wi("svg",NO,jO)}}),QO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},VO=[Ei("path",{d:"M256 160c16-63.16 76.43-95.41 208-96a15.94 15.94 0 0 1 16 16v288a16 16 0 0 1-16 16c-128 0-177.45 25.81-208 64c-30.37-38-80-64-208-64c-9.88 0-16-8.05-16-17.93V80a15.94 15.94 0 0 1 16-16c131.57.59 192 32.84 208 96z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 160v288"},null,-1)],WO=Dn({name:"BookOutline",render:function(e,t){return gi(),wi("svg",QO,VO)}}),GO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},qO=[Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M328 112L184 256l144 144"},null,-1)],KO=Dn({name:"ChevronBackOutline",render:function(e,t){return gi(),wi("svg",GO,qO)}}),YO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},XO=[Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M184 112l144 144l-144 144"},null,-1)],$O=Dn({name:"ChevronForwardOutline",render:function(e,t){return gi(),wi("svg",YO,XO)}}),JO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ZO=[Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1)],eL=Dn({name:"CloseOutline",render:function(e,t){return gi(),wi("svg",JO,ZO)}}),tL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},nL=[Ei("path",{d:"M456.7 242.27l-26.08-4.2a8 8 0 0 1-6.6-6.82c-.5-3.2-1-6.41-1.7-9.51a8.08 8.08 0 0 1 3.9-8.62l23.09-12.82a8.05 8.05 0 0 0 3.9-9.92l-4-11a7.94 7.94 0 0 0-9.4-5l-25.89 5a8 8 0 0 1-8.59-4.11q-2.25-4.2-4.8-8.41a8.16 8.16 0 0 1 .7-9.52l17.29-19.94a8 8 0 0 0 .3-10.62l-7.49-9a7.88 7.88 0 0 0-10.5-1.51l-22.69 13.63a8 8 0 0 1-9.39-.9c-2.4-2.11-4.9-4.21-7.4-6.22a8 8 0 0 1-2.5-9.11l9.4-24.75A8 8 0 0 0 365 78.77l-10.2-5.91a8 8 0 0 0-10.39 2.21l-16.64 20.84a7.15 7.15 0 0 1-8.5 2.5s-5.6-2.3-9.8-3.71A8 8 0 0 1 304 87l.4-26.45a8.07 8.07 0 0 0-6.6-8.42l-11.59-2a8.07 8.07 0 0 0-9.1 5.61l-8.6 25.05a8 8 0 0 1-7.79 5.41h-9.8a8.07 8.07 0 0 1-7.79-5.41l-8.6-25.05a8.07 8.07 0 0 0-9.1-5.61l-11.59 2a8.07 8.07 0 0 0-6.6 8.42l.4 26.45a8 8 0 0 1-5.49 7.71c-2.3.9-7.3 2.81-9.7 3.71c-2.8 1-6.1.2-8.8-2.91l-16.51-20.34A8 8 0 0 0 156.75 73l-10.2 5.91a7.94 7.94 0 0 0-3.3 10.09l9.4 24.75a8.06 8.06 0 0 1-2.5 9.11c-2.5 2-5 4.11-7.4 6.22a8 8 0 0 1-9.39.9L111 116.14a8 8 0 0 0-10.5 1.51l-7.49 9a8 8 0 0 0 .3 10.62l17.29 19.94a8 8 0 0 1 .7 9.52q-2.55 4-4.8 8.41a8.11 8.11 0 0 1-8.59 4.11l-25.89-5a8 8 0 0 0-9.4 5l-4 11a8.05 8.05 0 0 0 3.9 9.92L85.58 213a7.94 7.94 0 0 1 3.9 8.62c-.6 3.2-1.2 6.31-1.7 9.51a8.08 8.08 0 0 1-6.6 6.82l-26.08 4.2a8.09 8.09 0 0 0-7.1 7.92v11.72a7.86 7.86 0 0 0 7.1 7.92l26.08 4.2a8 8 0 0 1 6.6 6.82c.5 3.2 1 6.41 1.7 9.51a8.08 8.08 0 0 1-3.9 8.62L62.49 311.7a8.05 8.05 0 0 0-3.9 9.92l4 11a7.94 7.94 0 0 0 9.4 5l25.89-5a8 8 0 0 1 8.59 4.11q2.25 4.2 4.8 8.41a8.16 8.16 0 0 1-.7 9.52l-17.29 19.96a8 8 0 0 0-.3 10.62l7.49 9a7.88 7.88 0 0 0 10.5 1.51l22.69-13.63a8 8 0 0 1 9.39.9c2.4 2.11 4.9 4.21 7.4 6.22a8 8 0 0 1 2.5 9.11l-9.4 24.75a8 8 0 0 0 3.3 10.12l10.2 5.91a8 8 0 0 0 10.39-2.21l16.79-20.64c2.1-2.6 5.5-3.7 8.2-2.6c3.4 1.4 5.7 2.2 9.9 3.61a8 8 0 0 1 5.49 7.71l-.4 26.45a8.07 8.07 0 0 0 6.6 8.42l11.59 2a8.07 8.07 0 0 0 9.1-5.61l8.6-25a8 8 0 0 1 7.79-5.41h9.8a8.07 8.07 0 0 1 7.79 5.41l8.6 25a8.07 8.07 0 0 0 9.1 5.61l11.59-2a8.07 8.07 0 0 0 6.6-8.42l-.4-26.45a8 8 0 0 1 5.49-7.71c4.2-1.41 7-2.51 9.6-3.51s5.8-1 8.3 2.1l17 20.94A8 8 0 0 0 355 439l10.2-5.91a7.93 7.93 0 0 0 3.3-10.12l-9.4-24.75a8.08 8.08 0 0 1 2.5-9.12c2.5-2 5-4.1 7.4-6.21a8 8 0 0 1 9.39-.9L401 395.66a8 8 0 0 0 10.5-1.51l7.49-9a8 8 0 0 0-.3-10.62l-17.29-19.94a8 8 0 0 1-.7-9.52q2.55-4.05 4.8-8.41a8.11 8.11 0 0 1 8.59-4.11l25.89 5a8 8 0 0 0 9.4-5l4-11a8.05 8.05 0 0 0-3.9-9.92l-23.09-12.82a7.94 7.94 0 0 1-3.9-8.62c.6-3.2 1.2-6.31 1.7-9.51a8.08 8.08 0 0 1 6.6-6.82l26.08-4.2a8.09 8.09 0 0 0 7.1-7.92V250a8.25 8.25 0 0 0-7.27-7.73zM256 112a143.82 143.82 0 0 1 139.38 108.12A16 16 0 0 1 379.85 240H274.61a16 16 0 0 1-13.91-8.09l-52.1-91.71a16 16 0 0 1 9.85-23.39A146.94 146.94 0 0 1 256 112zM112 256a144 144 0 0 1 43.65-103.41a16 16 0 0 1 25.17 3.47L233.06 248a16 16 0 0 1 0 15.87l-52.67 91.7a16 16 0 0 1-25.18 3.36A143.94 143.94 0 0 1 112 256zm144 144a146.9 146.9 0 0 1-38.19-4.95a16 16 0 0 1-9.76-23.44l52.58-91.55a16 16 0 0 1 13.88-8H379.9a16 16 0 0 1 15.52 19.88A143.84 143.84 0 0 1 256 400z",fill:"currentColor"},null,-1)],rL=Dn({name:"CogOutline",render:function(e,t){return gi(),wi("svg",tL,nL)}}),iL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oL=[Ei("path",{d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{d:"M256 56v120a32 32 0 0 0 32 32h120",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)],aL=Dn({name:"DocumentOutline",render:function(e,t){return gi(),wi("svg",iL,oL)}}),sL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},lL=[Di('<path d="M464 256c0-114.87-93.13-208-208-208S48 141.13 48 256s93.13 208 208 208s208-93.13 208-208z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path d="M445.57 172.14c-16.06.1-14.48 29.73-34.49 15.75c-7.43-5.18-12-12.71-21.33-15c-8.15-2-16.5.08-24.55 1.47c-9.15 1.58-20 2.29-26.94 9.22c-6.71 6.67-10.26 15.62-17.4 22.33c-13.81 13-19.64 27.19-10.7 45.57c8.6 17.67 26.59 27.26 46 26c19.07-1.27 38.88-12.33 38.33 15.38c-.2 9.8 1.85 16.6 4.86 25.71c2.79 8.4 2.6 16.54 3.24 25.21c1.18 16.2 4.16 34.36 12.2 48.67l15-21.16c1.85-2.62 5.72-6.29 6.64-9.38c1.63-5.47-1.58-14.87-1.95-21s-.19-12.34-1.13-18.47c-1.32-8.59-6.4-16.64-7.1-25.13c-1.29-15.81 1.6-28.43-10.58-41.65c-11.76-12.75-29-15.81-45.47-13.22c-8.3 1.3-41.71 6.64-28.3-12.33c2.65-3.73 7.28-6.79 10.26-10.34c2.59-3.09 4.84-8.77 7.88-11.18s17-5.18 21-3.95s8.17 7 11.64 9.56a49.89 49.89 0 0 0 21.81 9.36c13.66 2 42.22-5.94 42-23.46c-.04-8.4-7.84-20.1-10.92-27.96z" fill="currentColor"></path><path d="M287.45 316.3c-5.33-22.44-35.82-29.94-52.26-42.11c-9.45-7-17.86-17.81-30.27-18.69c-5.72-.41-10.51.83-16.18-.64c-5.2-1.34-9.28-4.14-14.82-3.41c-10.35 1.36-16.88 12.42-28 10.92c-10.55-1.42-21.42-13.76-23.82-23.81c-3.08-12.92 7.14-17.11 18.09-18.26c4.57-.48 9.7-1 14.09.67c5.78 2.15 8.51 7.81 13.7 10.67c9.73 5.33 11.7-3.19 10.21-11.83c-2.23-12.94-4.83-18.22 6.71-27.12c8-6.14 14.84-10.58 13.56-21.61c-.76-6.48-4.31-9.41-1-15.86c2.51-4.91 9.4-9.34 13.89-12.27c11.59-7.56 49.65-7 34.1-28.16c-4.57-6.21-13-17.31-21-18.83c-10-1.89-14.44 9.27-21.41 14.19c-7.2 5.09-21.22 10.87-28.43 3c-9.7-10.59 6.43-14.07 10-21.46s-8.27-21.36-14.61-24.9l-29.81 33.43a41.52 41.52 0 0 0 8.34 31.86c5.93 7.63 15.37 10.08 15.8 20.5c.42 10-1.14 15.12-7.68 22.15c-2.83 3-4.83 7.26-7.71 10.07c-3.53 3.43-2.22 2.38-7.73 3.32c-10.36 1.75-19.18 4.45-29.19 7.21C95.34 199.94 93.8 172.69 86.2 162l-25 20.19c-.27 3.31 4.1 9.4 5.29 13c6.83 20.57 20.61 36.48 29.51 56.16c9.37 20.84 34.53 15.06 45.64 33.32c9.86 16.2-.67 36.71 6.71 53.67c5.36 12.31 18 15 26.72 24c8.91 9.09 8.72 21.53 10.08 33.36a305.22 305.22 0 0 0 7.45 41.28c1.21 4.69 2.32 10.89 5.53 14.76c2.2 2.66 9.75 4.95 6.7 5.83c4.26.7 11.85 4.68 15.4 1.76c4.68-3.84 3.43-15.66 4.24-21c2.43-15.9 10.39-31.45 21.13-43.35c10.61-11.74 25.15-19.69 34.11-33c8.73-12.98 11.36-30.49 7.74-45.68zm-33.39 26.32c-6 10.71-19.36 17.88-27.95 26.39c-2.33 2.31-7.29 10.31-10.21 8.58c-2.09-1.24-2.8-11.62-3.57-14a61.17 61.17 0 0 0-21.71-29.95c-3.13-2.37-10.89-5.45-12.68-8.7c-2-3.53-.2-11.86-.13-15.7c.11-5.6-2.44-14.91-1.06-20c1.6-5.87-1.48-2.33 3.77-3.49c2.77-.62 14.21 1.39 17.66 2.11c5.48 1.14 8.5 4.55 12.82 8c11.36 9.11 23.87 16.16 36.6 23.14c9.86 5.46 12.76 12.37 6.46 23.62z" fill="currentColor"></path><path d="M184.46 67.09c4.74 4.63 9.2 10.11 16.27 10.57c6.69.45 13-3.17 18.84 1.38c6.48 5 11.15 11.33 19.75 12.89c8.32 1.51 17.13-3.35 19.19-11.86c2-8.11-2.31-16.93-2.57-25.07c0-1.13.61-6.15-.17-7c-.58-.64-5.42.08-6.16.1q-8.13.24-16.22 1.12a207.1 207.1 0 0 0-57.18 14.65c2.43 1.68 5.48 2.35 8.25 3.22z" fill="currentColor"></path><path d="M356.4 123.27c8.49 0 17.11-3.8 14.37-13.62c-2.3-8.23-6.22-17.16-15.76-12.72c-6.07 2.82-14.67 10-15.38 17.12c-.81 8.08 11.11 9.22 16.77 9.22z" fill="currentColor"></path><path d="M349.62 166.24c8.67 5.19 21.53 2.75 28.07-4.66c5.11-5.8 8.12-15.87 17.31-15.86a15.4 15.4 0 0 1 10.82 4.41c3.8 3.93 3.05 7.62 3.86 12.54c1.81 11.05 13.66.63 16.75-3.65c2-2.79 4.71-6.93 3.8-10.56c-.84-3.39-4.8-7-6.56-10.11c-5.14-9-9.37-19.47-17.07-26.74c-7.41-7-16.52-6.19-23.55 1.08c-5.76 6-12.45 10.75-16.39 18.05c-2.78 5.13-5.91 7.58-11.54 8.91c-3.1.73-6.64 1-9.24 3.08c-7.24 5.7-3.12 19.39 3.74 23.51z" fill="currentColor"></path>',6)],cL=Dn({name:"EarthOutline",render:function(e,t){return gi(),wi("svg",sL,lL)}}),uL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},dL=[Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M413.66 246.1H386a2 2 0 0 1-2-2v-77.24A38.86 38.86 0 0 0 345.14 128H267.9a2 2 0 0 1-2-2V98.34c0-27.14-21.5-49.86-48.64-50.33a49.53 49.53 0 0 0-50.4 49.51V126a2 2 0 0 1-2 2H87.62A39.74 39.74 0 0 0 48 167.62V238a2 2 0 0 0 2 2h26.91c29.37 0 53.68 25.48 54.09 54.85c.42 29.87-23.51 57.15-53.29 57.15H50a2 2 0 0 0-2 2v70.38A39.74 39.74 0 0 0 87.62 464H158a2 2 0 0 0 2-2v-20.93c0-30.28 24.75-56.35 55-57.06c30.1-.7 57 20.31 57 50.28V462a2 2 0 0 0 2 2h71.14A38.86 38.86 0 0 0 384 425.14v-78a2 2 0 0 1 2-2h28.48c27.63 0 49.52-22.67 49.52-50.4s-23.2-48.64-50.34-48.64z"},null,-1)],hL=Dn({name:"ExtensionPuzzleOutline",render:function(e,t){return gi(),wi("svg",uL,dL)}}),pL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},AL=[Ei("path",{d:"M112 320c0-93 124-165 96-272c66 0 192 96 192 272a144 144 0 0 1-288 0z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{d:"M320 368c0 57.71-32 80-64 80s-64-22.29-64-80s40-86 32-128c42 0 96 70.29 96 128z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)],fL=Dn({name:"FlameOutline",render:function(e,t){return gi(),wi("svg",pL,AL)}}),mL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},gL=[Ei("path",{d:"M315.27 33L96 304h128l-31.51 173.23a2.36 2.36 0 0 0 2.33 2.77h0a2.36 2.36 0 0 0 1.89-.95L416 208H288l31.66-173.25a2.45 2.45 0 0 0-2.44-2.75h0a2.42 2.42 0 0 0-1.95 1z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)],vL=Dn({name:"FlashOutline",render:function(e,t){return gi(),wi("svg",mL,gL)}}),yL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},bL=[Ei("path",{d:"M64 192v-72a40 40 0 0 1 40-40h75.89a40 40 0 0 1 22.19 6.72l27.84 18.56a40 40 0 0 0 22.19 6.72H408a40 40 0 0 1 40 40v40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{d:"M479.9 226.55L463.68 392a40 40 0 0 1-39.93 40H88.25a40 40 0 0 1-39.93-40L32.1 226.55A32 32 0 0 1 64 192h384.1a32 32 0 0 1 31.8 34.55z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)],wL=Dn({name:"FolderOpenOutline",render:function(e,t){return gi(),wi("svg",yL,bL)}}),xL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},CL=[Ei("path",{d:"M440 432H72a40 40 0 0 1-40-40V120a40 40 0 0 1 40-40h75.89a40 40 0 0 1 22.19 6.72l27.84 18.56a40 40 0 0 0 22.19 6.72H440a40 40 0 0 1 40 40v240a40 40 0 0 1-40 40z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M32 192h448"},null,-1)],SL=Dn({name:"FolderOutline",render:function(e,t){return gi(),wi("svg",xL,CL)}}),BL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},_L=[Ei("path",{d:"M200 246.84c8.81 58.62-7.33 90.67-52.91 97.41c-50.65 7.49-71.52-26.44-80.33-85.06c-11.85-78.88 16-127.94 55.71-131.1c36.14-2.87 68.71 60.14 77.53 118.75z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Ei("path",{d:"M223.65 409.53c3.13 33.28-14.86 64.34-42 69.66c-27.4 5.36-58.71-16.37-65.09-49.19s17.75-34.56 47.32-40.21s55.99-20.4 59.77 19.74z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Ei("path",{d:"M312 150.83c-8.81 58.62 7.33 90.67 52.9 97.41c50.66 7.49 71.52-26.44 80.33-85.06c11.86-78.89-16-128.22-55.7-131.1c-36.4-2.64-68.71 60.13-77.53 118.75z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Ei("path",{d:"M288.35 313.53c-3.13 33.27 14.86 64.34 42 69.66c27.4 5.36 58.71-16.37 65.09-49.19s-17.75-34.56-47.32-40.22s-55.99-20.4-59.77 19.75z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)],EL=Dn({name:"FootstepsOutline",render:function(e,t){return gi(),wi("svg",BL,_L)}}),ML={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},PL=[Di('<path d="M467.51 248.83c-18.4-83.18-45.69-136.24-89.43-149.17A91.5 91.5 0 0 0 352 96c-26.89 0-48.11 16-96 16s-69.15-16-96-16a99.09 99.09 0 0 0-27.2 3.66C89 112.59 61.94 165.7 43.33 248.83c-19 84.91-15.56 152 21.58 164.88c26 9 49.25-9.61 71.27-37c25-31.2 55.79-40.8 119.82-40.8s93.62 9.6 118.66 40.8c22 27.41 46.11 45.79 71.42 37.16c41.02-14.01 40.44-79.13 21.43-165.04z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><circle cx="292" cy="224" r="20" fill="currentColor"></circle><path d="M336 288a20 20 0 1 1 20-19.95A20 20 0 0 1 336 288z" fill="currentColor"></path><circle cx="336" cy="180" r="20" fill="currentColor"></circle><circle cx="380" cy="224" r="20" fill="currentColor"></circle><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M160 176v96"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M208 224h-96"></path>',7)],TL=Dn({name:"GameControllerOutline",render:function(e,t){return gi(),wi("svg",ML,PL)}}),DL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},FL=[Ei("rect",{x:"48",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("rect",{x:"288",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("rect",{x:"48",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("rect",{x:"288",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)],IL=Dn({name:"GridOutline",render:function(e,t){return gi(),wi("svg",DL,FL)}}),kL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},OL=[Ei("rect",{x:"48",y:"96",width:"416",height:"304",rx:"32.14",ry:"32.14",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M16 416h480",fill:"currentColor"},null,-1)],LL=Dn({name:"LaptopOutline",render:function(e,t){return gi(),wi("svg",kL,OL)}}),RL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},UL=[Di('<rect x="32" y="96" width="64" height="368" rx="16" ry="16" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M112 224h128"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M112 400h128"></path><rect x="112" y="160" width="128" height="304" rx="16" ry="16" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><rect x="256" y="48" width="96" height="416" rx="16" ry="16" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><path d="M422.46 96.11l-40.4 4.25c-11.12 1.17-19.18 11.57-17.93 23.1l34.92 321.59c1.26 11.53 11.37 20 22.49 18.84l40.4-4.25c11.12-1.17 19.18-11.57 17.93-23.1L445 115c-1.31-11.58-11.42-20.06-22.54-18.89z" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></path>',6)],zL=Dn({name:"LibraryOutline",render:function(e,t){return gi(),wi("svg",RL,UL)}}),NL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jL=[Ei("path",{d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)],HL=Dn({name:"PersonOutline",render:function(e,t){return gi(),wi("svg",NL,jL)}}),QL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},VL=[Ei("circle",{cx:"256",cy:"96",r:"64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{d:"M272 164a9 9 0 0 0-9-9h-14a9 9 0 0 0-9 9v293.56a32.09 32.09 0 0 0 2.49 12.38l10.07 24a3.92 3.92 0 0 0 6.88 0l10.07-24a32.09 32.09 0 0 0 2.49-12.38z",fill:"currentColor"},null,-1),Ei("circle",{cx:"280",cy:"72",r:"24",fill:"currentColor"},null,-1)],WL=Dn({name:"PinOutline",render:function(e,t){return gi(),wi("svg",QL,VL)}}),GL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},qL=[Ei("path",{d:"M413.48 284.46c58.87 47.24 91.61 89 80.31 108.55c-17.85 30.85-138.78-5.48-270.1-81.15S.37 149.84 18.21 119c11.16-19.28 62.58-12.32 131.64 14.09",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Ei("circle",{cx:"256",cy:"256",r:"160",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)],KL=Dn({name:"PlanetOutline",render:function(e,t){return gi(),wi("svg",GL,qL)}}),YL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},XL=[Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1)],$L=Dn({name:"RemoveOutline",render:function(e,t){return gi(),wi("svg",YL,XL)}}),JL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ZL=[Ei("path",{d:"M461.81 53.81a4.4 4.4 0 0 0-3.3-3.39c-54.38-13.3-180 34.09-248.13 102.17a294.9 294.9 0 0 0-33.09 39.08c-21-1.9-42-.3-59.88 7.5c-50.49 22.2-65.18 80.18-69.28 105.07a9 9 0 0 0 9.8 10.4l81.07-8.9a180.29 180.29 0 0 0 1.1 18.3a18.15 18.15 0 0 0 5.3 11.09l31.39 31.39a18.15 18.15 0 0 0 11.1 5.3a179.91 179.91 0 0 0 18.19 1.1l-8.89 81a9 9 0 0 0 10.39 9.79c24.9-4 83-18.69 105.07-69.17c7.8-17.9 9.4-38.79 7.6-59.69a293.91 293.91 0 0 0 39.19-33.09c68.38-68 115.47-190.86 102.37-247.95zM298.66 213.67a42.7 42.7 0 1 1 60.38 0a42.65 42.65 0 0 1-60.38 0z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{d:"M109.64 352a45.06 45.06 0 0 0-26.35 12.84C65.67 382.52 64 448 64 448s65.52-1.67 83.15-19.31A44.73 44.73 0 0 0 160 402.32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)],eR=Dn({name:"RocketOutline",render:function(e,t){return gi(),wi("svg",JL,ZL)}}),tR={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},nR=[Ei("path",{d:"M398.57 80H113.43v16S87.51 272 256 272S398.57 96 398.57 96z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ei("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32",d:"M256 272v160"},null,-1),Ei("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M352 432H160"},null,-1),Ei("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32",d:"M112 160h288"},null,-1)],rR=Dn({name:"WineOutline",render:function(e,t){return gi(),wi("svg",tR,nR)}});function iR(){return{BookIcon:WO,PersonIcon:HL,WineIcon:rR,EarthIcon:cL,CogIcon:rL,RocketIcon:eR,LaptopIcon:LL,LibraryIcon:zL,GameControllerIcon:TL,ExtensionPuzzleIcon:hL,FolderIcon:SL,FolderOpenIcon:wL,DocumentIcon:aL,GridIcon:IL,AddIcon:HO,CloseIcon:eL,RemoveIcon:$L,ChevronBackIcon:KO,ChevronForwardIcon:$O,PlanetIcon:KL,PinIcon:WL,FlameIcon:fL,FlashIcon:vL,FootStepsIcon:EL}}const oR="/DigitalTWINonFHIRFrontend/assets/patient-B-3n7Mdt.svg",aR={class:"p-3"},sR={class:"flex justify-between"},lR=Ei("h1",{class:"md:text-2xl font-semibold"},"FHIR Data Overall",-1),cR={class:"flex items-center"},uR={class:"flex flex-col md:flex-row"},dR={key:0,class:"mt-2 md:p-3 border shadow-md rounded-md md:shadow-fancy-1"},hR={key:1},pR={class:"grid grid-cols-8 gap-4 border rounded-md p-2 shadow-lg"},AR=["onClick"],fR={class:"font-semibold mr-2"},mR={class:"m-1 mt-2 md:ml-20 p-1 md:p-5 rounded-md md:shadow-fancy-inner flex-1 flex flex-row flex-wrap justify-evenly"},gR=["src"],vR={class:"font-bold"},yR={class:"cursor-pointer text-center"},bR=Dn({__name:"AdminFHIRView",setup(e){const{overall:t}=ZD(LO()),{getOverall:n}=LO(),{FlameIcon:r,FootStepsIcon:i}=iR(),o=bt(""),a=bt("");gn((async()=>{await n()}));const s=()=>{o.value=zO()},l=e=>{a.value=e},c=eo((()=>{if(""===a.value||void 0===t.value)return[];const e=[];return t.value[a.value].forEach((t=>{let n="";if("patients"===a.value||"researchers"===a.value){const e=t.name[0].family?t.name[0].family:"";n=t.name[0].given.join(" ")+" "+e}else n=t.title;e.push({resourceType:t.resourceType,uuid:t.identifier[0].value,name:n,img:"patients"===a.value?oR:"researchers"===a.value?"/DigitalTWINonFHIRFrontend/assets/doctors-CfFrOt_L.svg":"datasets"===a.value?"/DigitalTWINonFHIRFrontend/assets/science-DxvQOx44.svg":"workflow_tools"===a.value?"/DigitalTWINonFHIRFrontend/assets/maker_launch-8ia_Gtjf.svg":"/DigitalTWINonFHIRFrontend/assets/animating-Cb1d5XBp.svg",value:t})})),e})),u=eo((()=>{const e=[];let n=1;return t.value&&Object.keys(t.value).forEach((r=>{if(1===n||4===n){const n="datasets"===r?"bg-purple-600":"bg-green-500";e.push({key:r,title:r,classname:"col-start-1 col-end-5 "+n,count:t.value[r].length})}else if(2===n||5===n){const n="workflow_tools"===r?"bg-blue-400":"bg-orange-500";e.push({key:r,title:"workflow_tools"===r?"Tools":r,classname:"col-start-5 col-end-9 "+n,count:t.value[r].length})}else e.push({key:r,title:r,classname:"col-start-1 col-end-9 bg-green-500",count:t.value[r].length});n++})),e}));return vn((()=>{s(),window.addEventListener("resize",s)})),xn((()=>{window.removeEventListener("resize",s)})),(e,n)=>{const s=hn("router-link");return gi(),wi("div",aR,[Ei("div",sR,[lR,Ei("div",cR,[Mi(St(PS),{class:"text-2xl text-blue-400"},{default:sn((()=>[Mi(St(i))])),_:1})])]),Mi(St(uM)),Ei("div",uR,[!["md","xl","2xl","3xl"].includes(o.value)?(gi(),wi("div",hR,[Ei("div",pR,[(gi(!0),wi(di,null,Pn(u.value,((e,t)=>(gi(),wi("div",{key:t,class:V([e.classname,"text-center rounded-md p-2 shadow-md m-1"]),onClick:t=>l(e.key)},[Ei("span",fR,K(e.title.charAt(0).toUpperCase()+e.title.slice(1))+":",1),Ei("span",null,K(e.count),1)],10,AR)))),128))])])):(gi(),wi("div",dR,[Mi(St(wD),{size:["md","xl","2xl","3xl"].includes(o.value)?"large":"medium"},{default:sn((()=>[(gi(!0),wi(di,null,Pn(St(t),((e,t)=>(gi(),xi(St(xD),{key:t,type:"success",title:t.charAt(0).toUpperCase()+t.slice(1),content:"Total: "+e.length,time:"View Details",class:V(["hover:cursor-pointer hover:bg-zinc-100 rounded-lg p-2 select-none",{"bg-zinc-200":t===a.value}]),onClick:e=>l(t)},{icon:sn((()=>[Mi(St(PS),null,{default:sn((()=>[Mi(St(r))])),_:1})])),_:2},1032,["title","content","class","onClick"])))),128))])),_:1},8,["size"])])),Ei("div",mR,[(gi(!0),wi(di,null,Pn(c.value,(e=>(gi(),xi(St(rC),{size:"small",key:e.uuid,title:e.resourceType,class:"max-w-[300px] shadow-fancy-2 my-1 md:mx-2"},{cover:sn((()=>[Ei("img",{src:e.img,class:"p-5 size-52"},null,8,gR)])),action:sn((()=>[Ei("div",yR,[Mi(St(Bx),{type:"info",size:"large",class:"rounded-md"},{default:sn((()=>[Mi(s,{to:{name:"fhir-details",query:{resourceType:e.resourceType,uuid:e.uuid}}},{default:sn((()=>[Ti("View Details")])),_:2},1032,["to"])])),_:2},1024)])])),default:sn((()=>[Ei("div",vR,K(e.name),1),Ei("div",null,"UUID: "+K(e.uuid),1)])),_:2},1032,["title"])))),128))])])])}}}),wR=e=>(on("data-v-1c3669eb"),e=e(),an(),e),xR=wR((()=>Ei("h1",{class:"select-none heading"}," DigitalTWINs on FHIR ",-1))),CR=["src"],SR=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},BR=SR(Dn({__name:"AppLayoutHeader",setup(e){const t=bt(window.innerWidth),n=()=>{t.value=window.innerWidth};return vn((()=>{window.addEventListener("resize",n)})),xn((()=>{window.removeEventListener("resize",n)})),(e,n)=>{const r=hn("RouterLink");return gi(),xi(St(_M),{justify:"space-between",align:"center",style:{height:"100%",padding:"2px 20px"}},{default:sn((()=>[Mi(r,{to:"/"},{default:sn((()=>[Mi(St(_M),{class:"cursor-pointer flex flex-row items-center"},{default:sn((()=>[Mi(St(hx),{size:"medium",src:"4.png"}),xR])),_:1})])),_:1}),En(Mi(St(_M),null,{default:sn((()=>[Ei("img",{class:"logo",src:St("/DigitalTWINonFHIRFrontend/assets/logo-CcfZXeu8.png"),alt:""},null,8,CR)])),_:1},512),[[Mo,t.value>699]])])),_:1})}}}),[["__scopeId","data-v-1c3669eb"]]),_R=Dn({__name:"AppLayoutFooter",setup(e){const{EarthIcon:t}=iR();return(e,n)=>(gi(),xi(St(_M),{justify:"center",align:"center",style:{height:"100%",padding:"5px 0px"}},{default:sn((()=>[Mi(St(PS),{size:"20"},{default:sn((()=>[Mi(St(t))])),_:1}),Mi(St(YP),{type:"error"},{default:sn((()=>[Ti(" Auckland Bioengineering Institute ")])),_:1})])),_:1}))}}),ER=Dn({__name:"AppLayoutSider",props:{width:{default:240},menuOptions:{default:()=>[]},collapsed:{type:Boolean,default:!1}},setup(e){let t=e;const n=it(t),{menuOptions:r,width:i}=Et(n);return(e,n)=>(gi(),xi(St(hT),{"collapse-mode":"width","collapsed-width":60,width:St(i),"native-scrollbar":!1,bordered:"","show-trigger":"bar",class:"bg-transparent shadow-sm","default-collapsed":St(t).collapsed},{default:sn((()=>[Mi(St(OT),{"collapsed-width":64,"collapsed-icon-size":22,options:St(r)},null,8,["options"])])),_:1},8,["width","default-collapsed"]))}});function MR(){return{renderIcon:e=>()=>to(PS,null,{default:()=>to(e)}),generateRouterLabel:(e,t,n,r)=>to(PI,{to:{name:e,params:n||{},query:r||{}}},{default:()=>t})}}const PR=Dn({__name:"AppLayoutFHIR",setup(e){const{renderIcon:t,generateRouterLabel:n}=MR(),{CogIcon:r,LaptopIcon:i,GameControllerIcon:o,RocketIcon:a,LibraryIcon:s,PlanetIcon:l}=iR(),c=[{label:()=>n("admin-home-fhir","Home"),key:"admin",icon:t(l)},{label:()=>n("index-annotator","Go Annotator"),key:"annotator",icon:t(i)},{label:()=>n("admin-fhir-measurements","Measurements"),key:"primary-measurements",disabled:!1,icon:t(s),children:[{label:()=>n("admin-fhir-patients","Patients"),key:"patients",icon:t(r)}]},{label:"Workflow",key:"Workflow",icon:t(a),children:[{label:"Workflow Tools",key:"tools",icon:t(r)},{label:"Workflow process",key:"process",icon:t(o)}]}];return(e,t)=>{const n=hn("router-view");return gi(),xi(St(tT),{style:{height:"100vh"}},{default:sn((()=>[Mi(St(oT),{bordered:"",style:{height:"8vh"}},{default:sn((()=>[Mi(BR)])),_:1}),Mi(St(tT),{position:"absolute",style:{top:"8vh",bottom:"5vh"},"has-sider":"",onDragover:t[0]||(t[0]=la((()=>{}),["prevent"])),onDrop:t[1]||(t[1]=e=>e.preventDefault())},{default:sn((()=>[Mi(ER,{"menu-options":c,collapsed:!0}),Mi(St(tT),{class:"p-2 md:py-10 md:px-5","native-scrollbar":!1},{default:sn((()=>[Mi(n)])),_:1})])),_:1}),Mi(St(sT),{position:"absolute",style:{height:"5vh"},bordered:""},{default:sn((()=>[Mi(_R)])),_:1})])),_:1})}}}),TR={class:"c_card_container shadow-lg"},DR=Di('<input type="radio" name="select" id="c_card_slide_1" checked hidden data-v-c6e25138><input type="radio" name="select" id="c_card_slide_2" hidden data-v-c6e25138><input type="radio" name="select" id="c_card_slide_3" hidden data-v-c6e25138><div class="c_card_slider" data-v-c6e25138><label for="c_card_slide_1" class="c_card_slide c_card_slide-1" data-v-c6e25138></label><label for="c_card_slide_2" class="c_card_slide c_card_slide-2" data-v-c6e25138></label><label for="c_card_slide_3" class="c_card_slide c_card_slide-3" data-v-c6e25138></label></div>',4),FR={class:"c_card_img"},IR=["src"],kR={class:"c_card_content"},OR={class:"c_card_title"},LR={class:"c_card_text"},RR=Dn({__name:"Card",props:{data:{}},setup(e){const t=e;return(e,n)=>(gi(),wi("div",TR,[DR,(gi(!0),wi(di,null,Pn(t.data,((t,n)=>(gi(),xi(St(_M),{align:"center",class:V(["c_card_detail","c_card_detail-"+(n+1)]),key:n},{default:sn((()=>[Ei("div",FR,[Ei("img",{src:t.icon,alt:"none"},null,8,IR)]),Ei("div",kR,[Ei("div",OR,K(t.title),1),Ei("div",LR,[Mi(St(XT),{class:"","content-class":"c_card_scrollbar"},{default:sn((()=>[In(e.$slots,"card-slot-"+n,{},void 0,!0)])),_:2},1024)])])])),_:2},1032,["class"])))),128))]))}}),UR=SR(RR,[["__scopeId","data-v-c6e25138"]]),zR="/DigitalTWINonFHIRFrontend/assets/2-B5wpaswG.png",NR="/DigitalTWINonFHIRFrontend/assets/3-3UDdDhFK.png",jR=e=>(on("data-v-85eaf4ec"),e=e(),an(),e),HR={class:"m-card"},QR=jR((()=>Ei("br",null,null,-1))),VR=Dn({__name:"MeasurementsView",setup(e){const{patients:t}=ZD(OO()),n=bt([{title:"Patients",icon:"/DigitalTWINonFHIRFrontend/assets/1-D_sLrbLA.png",text:"波雅·汉库克，日本漫画《航海王》及其衍生作品中的角色。人称：海贼女帝。 是位于无风带九蛇岛的海贼国家亚马逊·百合王国的现任皇帝，同时也是九蛇海贼团的现任船长。 其绝世的容颜被世人评价为“世界第一美女”."},{title:"Observations",icon:zR,text:"妮可·罗宾，日本漫画《航海王》及其衍生作品中的角色，草帽一伙的考古学家，出生在西海的考古学之岛“奥哈拉”，年仅8岁就被悬赏千万的奥哈拉幸存者。 “花花果实”能力者，能让身体的任何部位像开花一样绽放在视线范围内的任何有形体的事物上并作出攻击或其他用途。"},{title:"ImagingStudy",icon:NR,text:"娜美，日本漫画《航海王》及衍生作品中的女主角。 草帽一伙航海士，草帽大船团大干部之一，人称“小贼猫”，悬赏金3亿6600万贝里。 小时候为了救回家乡被迫加入了阿龙一伙。 从橘子镇开始和草帽一伙合作，在路飞打倒了阿龙后正式加入了草帽一伙。"}]);return vn((async()=>{})),(e,r)=>{const i=hn("router-view");return gi(),wi(di,null,[Ei("div",HR,[Mi(UR,{data:n.value},Tn({_:2},[Pn(St(t),((e,t)=>({name:`card-slot-${t}`,fn:sn((()=>[Ei("div",null,'"Resource Type: " '+K(e.resourceType),1),Ei("div",null,'"Id: " '+K(e.id),1),Ei("div",null,'"uuid: " '+K(e.identifier[0].value),1),Ei("div",null,'"GP: " '+K(e.generalPractitioner[0].display),1),Ei("div",null,'"Name: " '+K(e.name?e.name[0].text:"none"),1),QR]))})))]),1032,["data"])]),Mi(i)],64)}}}),WR=SR(VR,[["__scopeId","data-v-85eaf4ec"]]),GR=e=>(on("data-v-6607670c"),e=e(),an(),e),qR=GR((()=>Ei("br",null,null,-1))),KR=Dn({__name:"Patients",setup(e){const{patients:t}=ZD(OO()),{getPatients:n}=OO();return vn((async()=>{await n()})),(e,n)=>(gi(),wi(di,null,[(gi(!0),wi(di,null,Pn(St(t),((e,t)=>(gi(),wi("div",{key:t},[Ei("div",null,'"Resource Type: " '+K(e.resourceType),1),Ei("div",null,'"Id: " '+K(e.id),1),Ei("div",null,'"uuid: " '+K(e.identifier[0].value),1),Ei("div",null,'"GP: " '+K(e.generalPractitioner[0].display),1),Ei("div",null,'"Name: " '+K(e.name?e.name[0].text:"none"),1),qR])))),128)),Mi(St(_M),{class:"container"},{default:sn((()=>[Mi(St(Bx),null,{default:sn((()=>[Ti("Oops!")])),_:1}),Mi(St(Bx),null,{default:sn((()=>[Ti("Oops!")])),_:1}),Mi(St(Bx),null,{default:sn((()=>[Ti("Oops!")])),_:1}),Mi(St(_M),null,{default:sn((()=>[Ti("Long! Long! Cross the line!sadcsacsacsadcascacdsacsacsadcsadcdascda")])),_:1})])),_:1})],64))}}),YR=SR(KR,[["__scopeId","data-v-6607670c"]]),XR=JD("folderPicker",(()=>{const{root:e,folderPicker:t,folderDrop:n}=function(){const e=bt(),t=async e=>{if("file"===e.kind)return e;e.children=[];const n=e.entries();for await(const r of n)e.children.push(await t(r[1]));return e},n=async n=>{try{if(!window.showDirectoryPicker)return void alert("Your browser is not support showDirectoryPicker");const r=await window.showDirectoryPicker();e.value=await t(r),e.value.category=n}catch(r){}},r=async(n,r)=>{try{if("file"===n.kind){const i=await n.getAsFileSystemHandle();e.value=await t(i),e.value.category=r}}catch(i){}};return{root:e,folderPicker:n,folderDrop:r}}();return{root:e,folderPicker:t,folderDrop:n}}));const $R=Dn({__name:"AppLayoutAnnotator",setup(e){const{renderIcon:t,generateRouterLabel:n}=MR(),{FolderIcon:r,FolderOpenIcon:i,DocumentIcon:o,GridIcon:a}=iR(),s=OI(),{root:l}=ZD(XR()),c=bt([{label:()=>n("home-fhir","Home")}]);vn((()=>{var e;if(l&&(null==(e=l.value)?void 0:e.children)){s.query.category;p(l.value)}}));const u=e=>{var t,r;return"primary"!==e?e:"Measurements"===(null==(t=l.value)?void 0:t.category)?()=>n("measurements",e,void 0,{name:e}):"Workflow"===(null==(r=l.value)?void 0:r.category)?()=>n("workflow",e,void 0,{name:e}):void 0},d=(e,n=null)=>n?{label:u(e),key:e,icon:t(r),children:[...h(n)]}:{label:u(e),key:e,icon:t(r),children:[]},h=e=>{const n=e.filter((e=>"directory"===e.kind)),r=e.filter((e=>"file"===e.kind)),i=[];for(let t of n){const e=d(t.name,t.children);i.push(e)}return r.forEach((e=>{const n={label:r=e.name,key:r,icon:t(o)};var r;i.push(n)})),i},p=e=>{c.value=[{label:()=>n("home-annotator",e.name,void 0,{category:e.category}),key:e.name,icon:t(a)},...h(e.children)]};return Ir(l,(()=>{var e;l&&(null==(e=l.value)?void 0:e.children)&&p(l.value)})),(e,t)=>{const n=hn("router-view");return gi(),xi(St(tT),{class:"flex flex-col bg-fancy-gradient h-screen"},{default:sn((()=>[Mi(St(oT),{class:"bg-transparent h-[8vh] mt-auto shadow-sm"},{default:sn((()=>[Mi(BR)])),_:1}),Mi(St(tT),{class:"flex-1 h-[87vh] bg-transparent","has-sider":"",onDragover:t[0]||(t[0]=la((()=>{}),["prevent"])),onDrop:t[1]||(t[1]=e=>e.preventDefault())},{default:sn((()=>[!St(l)?Fi("",!0):(gi(),xi(ER,{key:0,"menu-options":c.value,width:320},null,8,["menu-options"])),Mi(St(tT),{"native-scrollbar":!1,class:"bg-transparent"},{default:sn((()=>[Mi(n)])),_:1})])),_:1}),Mi(St(sT),{class:"h-[5vh] mt-auto bg-transparent footer"},{default:sn((()=>[Mi(_R)])),_:1})])),_:1})}}}),JR=SR($R,[["__scopeId","data-v-c372059e"]]),ZR=e=>(on("data-v-3bf125bc"),e=e(),an(),e),eU={className:"file-upload_label"},tU=ZR((()=>Ei("p",{className:"text-14-regular"},[Ei("span",{className:"text-orange-500"}," Click to upload "),Ti(" or drag and drop ")],-1))),nU={class:"font-bold"},rU=Dn({__name:"DropZone",props:{category:{}},emits:["onChange"],setup(e,{emit:t}){const n=e,r=bt(!1),{root:i}=ZD(XR()),{folderPicker:o,folderDrop:a}=XR(),s=t,l=async(e,t)=>{"drop"===t?await c(e):"click"===t&&await u();try{s("onChange",i.value)}catch(n){}};vn((()=>{}));const c=async e=>{d();const t=e.dataTransfer.items[0];await a(t,n.category)},u=async()=>{await o(n.category)},d=()=>{r.value=!r.value};return(e,t)=>(gi(),wi("div",{onDragenter:la(d,["prevent"]),onDragleave:la(d,["prevent"]),onDragover:t[0]||(t[0]=la((()=>{}),["prevent"])),onDrop:t[1]||(t[1]=la((e=>l(e,"drop")),["prevent"])),onClick:t[2]||(t[2]=e=>l(e,"click")),class:V([{"active-dropzone":r.value},"w-3/5 h-2/5 md:h-80 file-upload ease-in-out duration-300"])},[Mi(St(hx),{round:"",class:"animate-bounce",size:40,src:St("data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='40'%20height='40'%20rx='20'%20fill='%23daf2e9'/%3e%3cpath%20d='M16.6665%2023.3333L19.9998%2020M19.9998%2020L23.3332%2023.3333M19.9998%2020V27.5M26.6665%2023.9524C27.6844%2023.1117%2028.3332%2021.8399%2028.3332%2020.4167C28.3332%2017.8854%2026.2811%2015.8333%2023.7498%2015.8333C23.5677%2015.8333%2023.3974%2015.7383%2023.3049%2015.5814C22.2182%2013.7374%2020.2119%2012.5%2017.9165%2012.5C14.4647%2012.5%2011.6665%2015.2982%2011.6665%2018.75C11.6665%2020.4718%2012.3627%2022.0309%2013.489%2023.1613'%20stroke='%2324AE7C'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e")},null,8,["src"]),Ei("div",eU,[tU,Ei("p",nU," SPARC "+K(!!n.category&&n.category)+" SDS dataset ",1)])],34))}}),iU=SR(rU,[["__scopeId","data-v-3bf125bc"]]),oU={class:"w-full h-[87vh] flex flex-col justify-center items-center"},aU=Dn({__name:"AnnotatorView",setup(e){const t=OI().query.category,n=Array.isArray(t)?t[0]:t,r=n&&["Measurements","Workflow","Workflow tool","Workflow tool process"].includes(n)?n:void 0,i=bt(),o=e=>{i.value=e};return(e,t)=>(gi(),wi("div",oU,[Mi(iU,{category:St(r),onOnChange:o},null,8,["category"])]))}}),sU={class:"bg-box"},lU={class:"carousel main"},cU={class:"item custom-drop-shadow"},uU=["src"],dU={class:"item custom-drop-shadow"},hU=["src"],pU={class:"item custom-drop-shadow"},AU=["src"],fU={class:"item custom-drop-shadow"},mU=["src"],gU={class:"box-info"},vU={class:"navigation"},yU=Dn({__name:"Carousel",setup(e){const{ChevronBackIcon:t,ChevronForwardIcon:n,AddIcon:r}=iR(),i=bt([{title:"Primary Measurements Annotator",description:"A SPARC SDS primary measurements dataset will be required. A SPARC SDS primary measurements dataset will be required. This dataset may contain MRI images and other EHR measurements for each patient. You can use the annotator to annotate the Observation and ImagingStudy for EHR data.",link:{name:"home-annotator",query:{category:"Measurements"}}},{title:"Workflow Annotator",description:"A SPARC SDS workflow dataset will be required. This dataset may contain a workflow .cwl file for cohort patients. You can use the annotator to add the Workflow's title, description, inputs, outputs, workflow tools and steps.",link:{name:"home-annotator",query:{category:"Workflow"}}},{title:"Workflow Tool Annotator",description:"A SPARC SDS workflow tool dataset will be required. This dataset may contain a workflow tool .cwl file for cohort patients. You can use the annotator to add the Workflow tool's title, description, models and softwares.",link:{name:"home-annotator",query:{category:"Workflow tool"}}},{title:"Workflow Tool Process Annotator",description:"A SPARC SDS workflow tool process dataset will be required. This dataset may contain a workflow tool process data executing by a workflow tool for patients. You can use the annotator to add the Workflow tool process's EHR inputs and outputs for patients.",link:{name:"home-annotator",query:{category:"Workflow tool process"}}}]),o=bt(0),a=bt(document.querySelectorAll(".bg")),s=()=>{o.value<3?o.value+=1:o.value=0},l=()=>{o.value>0?o.value-=1:o.value=3};return Dr((()=>{a.value.forEach(((e,t)=>{e.classList.toggle("active",t===o.value)}))})),(e,r)=>{const a=hn("router-link");return gi(),wi(di,null,[Ei("div",sU,[(gi(),wi(di,null,Pn([1,2,3,4],((e,t)=>Ei("div",{key:t,class:V([{active:t===o.value},"bg"])},null,2))),64))]),Ei("div",lU,[Ei("div",{class:"list-img",style:z({transform:`translateY(${-100*o.value}%)`})},[Ei("div",cU,[Ei("img",{src:St("/DigitalTWINonFHIRFrontend/assets/img5-CfE9Ca4b.png"),alt:""},null,8,uU)]),Ei("div",dU,[Ei("img",{src:St("/DigitalTWINonFHIRFrontend/assets/img6-DORjbCPq.png"),alt:""},null,8,hU)]),Ei("div",pU,[Ei("img",{src:St("/DigitalTWINonFHIRFrontend/assets/img7-DwEbhF3y.png"),alt:""},null,8,AU)]),Ei("div",fU,[Ei("img",{src:St("/DigitalTWINonFHIRFrontend/assets/img10-BmtVM-LO.svg"),alt:""},null,8,mU)])],4),Ei("div",gU,[Ei("div",{class:"list-info",style:z({transform:`translateY(${-25*o.value}%)`})},[(gi(!0),wi(di,null,Pn(i.value,((e,t)=>(gi(),wi("div",{key:t,class:"info"},[Ei("h2",null,K(e.title),1),Ei("p",null,K(e.description),1),Mi(a,{class:"btn",to:e.link},{default:sn((()=>[Ti("Let's go Annotating")])),_:2},1032,["to"])])))),128))],4)]),Ei("div",vU,[Ei("span",{class:"prev-btn",onClick:l},[Mi(St(PS),null,{default:sn((()=>[Mi(St(t))])),_:1})]),Ei("span",{class:"next-btn",onClick:s},[Mi(St(PS),null,{default:sn((()=>[Mi(St(n))])),_:1})])])])],64)}}}),bU=SR(yU,[["__scopeId","data-v-d1f89aca"]]),wU={class:"fixed top-0 left-0 right-0 h-[8vh] pt-3 px-3 shadow-sm z-50"},xU=Dn({__name:"index",setup(e){const{root:t}=ZD(XR());return vn((()=>{t&&(t.value=void 0)})),(e,t)=>(gi(),wi("div",null,[Ei("div",wU,[Mi(BR)]),Mi(bU)]))}}),CU={class:"flex flex-row justify-around"},SU={key:1},BU={className:"justify-items-end text-dark-600 xl:text-left"},_U=Dn({__name:"PageSummary",props:{breadcrumbs:Array,avatar:String,title:String,subtitle:String,footer:String},setup:e=>(VT(),(t,n)=>{const r=hn("RouterLink");return gi(),xi(St(YT),{subtitle:e.subtitle,class:"page-header-bg"},{avatar:sn((()=>[Mi(St(hx),{src:e.avatar},null,8,["src"])])),title:sn((()=>[Ei("span",null,K(e.title),1)])),header:sn((()=>[Mi(St(gx),null,{default:sn((()=>[(gi(!0),wi(di,null,Pn(e.breadcrumbs,((e,t)=>(gi(),xi(St(vx),{key:t},{default:sn((()=>["primary"!==e?(gi(),xi(r,{key:0,to:"/primary/test"},{default:sn((()=>[Ti(K(e),1)])),_:2},1024)):(gi(),wi("span",SU,K(e),1))])),_:2},1024)))),128))])),_:1})])),extra:sn((()=>[In(t.$slots,"extra",{},void 0,!0)])),footer:sn((()=>[Ei("p",BU,K(e.footer),1)])),default:sn((()=>[Ei("div",CU,[In(t.$slots,"default",{},void 0,!0)])])),_:3},8,["subtitle"])})}),EU=SR(_U,[["__scopeId","data-v-6f639b76"]]),MU=Dn({__name:"AnnotatorPageSummary",props:{avatar:{},subtitle:{},title:{},annotator:{}},setup(e,{emit:t}){var n;const{root:r}=ZD(XR()),i=bt(OI().query.name),o=e,a=t,s=[null==(n=r.value)?void 0:n.name,i.value],l=()=>{a("updateAnnotator",o.annotator)};return(e,t)=>(gi(),xi(EU,{breadcrumbs:s,avatar:e.avatar,title:e.title,subtitle:e.subtitle,footer:"© 2024 Clinic Description Annotator"},{extra:sn((()=>[Mi(St(CM),null,{default:sn((()=>[Mi(St(Bx),{strong:"",ghost:"",class:"w-[100px]",color:"Annotate"===e.annotator?"#ff69b4":"#22c55e",onClick:l},{default:sn((()=>[Ti(K(e.annotator),1)])),_:1},8,["color"])])),_:1})])),default:sn((()=>[In(e.$slots,"default")])),_:3},8,["avatar","title","subtitle"]))}}),PU=Dn({__name:"FormTab",setup:e=>(e,t)=>(gi(),xi(St(pD),{type:"segment",animated:""},{default:sn((()=>[Mi(St(uD),{name:"Observation",tab:"Observation"},{default:sn((()=>[In(e.$slots,"observation")])),_:3}),Mi(St(uD),{name:"ImagingStudy",tab:"ImagingStudy"},{default:sn((()=>[In(e.$slots,"imagingstudy")])),_:3})])),_:3}))});var TU={exports:{}};const DU=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}));TU.exports=function(e){return n=[function(t,n){t.exports=e},function(e,t,n){n.r(t),n.d(t,"isStringVr",(function(){return i})),n.d(t,"isPrivateTag",(function(){return o})),n.d(t,"parsePN",(function(){return a})),n.d(t,"parseTM",(function(){return s})),n.d(t,"parseDA",(function(){return c})),n.d(t,"explicitElementToString",(function(){return u})),n.d(t,"explicitDataSetToJS",(function(){return d})),n.d(t,"createJPEGBasicOffsetTable",(function(){return A})),n.d(t,"parseDicomDataSetExplicit",(function(){return F})),n.d(t,"parseDicomDataSetImplicit",(function(){return I})),n.d(t,"readFixedString",(function(){return v})),n.d(t,"alloc",(function(){return k})),n.d(t,"version",(function(){return O})),n.d(t,"bigEndianByteArrayParser",(function(){return L})),n.d(t,"ByteStream",(function(){return z})),n.d(t,"sharedCopy",(function(){return R})),n.d(t,"DataSet",(function(){return w})),n.d(t,"findAndSetUNElementLength",(function(){return g})),n.d(t,"findEndOfEncapsulatedElement",(function(){return m})),n.d(t,"findItemDelimitationItemAndSetElementLength",(function(){return x})),n.d(t,"littleEndianByteArrayParser",(function(){return N})),n.d(t,"parseDicom",(function(){return Q})),n.d(t,"readDicomElementExplicit",(function(){return D})),n.d(t,"readDicomElementImplicit",(function(){return S})),n.d(t,"readEncapsulatedImageFrame",(function(){return K})),n.d(t,"readEncapsulatedPixelData",(function(){return X})),n.d(t,"readEncapsulatedPixelDataFromFragments",(function(){return W})),n.d(t,"readPart10Header",(function(){return j})),n.d(t,"readSequenceItemsExplicit",(function(){return P})),n.d(t,"readSequenceItemsImplicit",(function(){return E})),n.d(t,"readSequenceItem",(function(){return B})),n.d(t,"readTag",(function(){return f}));var r={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0},i=function(e){return r[e]},o=function(e){if(e=parseInt(e[4],16),isNaN(e))throw"dicomParser.isPrivateTag: cannot parse last character of group";return e%2==1},a=function(e){if(void 0!==e)return{familyName:(e=e.split("^"))[0],givenName:e[1],middleName:e[2],prefix:e[3],suffix:e[4]}};function s(e,t){if(2<=e.length){var n=parseInt(e.substring(0,2),10),r=4<=e.length?parseInt(e.substring(2,4),10):void 0,i=6<=e.length?parseInt(e.substring(4,6),10):void 0,o=(o=8<=e.length?e.substring(7,13):void 0)?parseInt(o,10)*Math.pow(10,6-o.length):void 0;if(t&&(isNaN(n)||void 0!==r&&isNaN(r)||void 0!==i&&isNaN(i)||void 0!==o&&isNaN(o)||n<0||23<n||r&&(r<0||59<r)||i&&(i<0||59<i)||o&&(o<0||999999<o)))throw"invalid TM '".concat(e,"'");return{hours:n,minutes:r,seconds:i,fractionalSeconds:o}}if(t)throw"invalid TM '".concat(e,"'")}function l(e,t,n){return!isNaN(n)&&0<t&&t<=12&&0<e&&e<=function(e,t){switch(e){case 2:return t%4==0&&t%100||t%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}(t,n)}function c(e,t){if(e&&8===e.length){var n=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6,8),10);if(t&&!0!==l(i,r,n))throw"invalid DA '".concat(e,"'");return{year:n,month:r,day:i}}if(t)throw"invalid DA '".concat(e,"'")}function u(e,t){if(void 0===e||void 0===t)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===t.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var n,r=t.vr,o=t.tag;function a(t,n){for(var r="",i=0;i<t;i++)0!==i&&(r+="/"),r+=n.call(e,o,i).toString();return r}if(!0===i(r))n=e.string(o);else{if("AT"===r){var s=e.uint32(o);return void 0===s?void 0:"x".concat((s=s<0?4294967295+s+1:s).toString(16).toUpperCase())}"US"===r?n=a(t.length/2,e.uint16):"SS"===r?n=a(t.length/2,e.int16):"UL"===r?n=a(t.length/4,e.uint32):"SL"===r?n=a(t.length/4,e.int32):"FD"===r?n=a(t.length/8,e.double):"FL"===r&&(n=a(t.length/4,e.float))}return n}function d(e,t){if(void 0===e)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";t=t||{omitPrivateAttibutes:!0,maxElementLength:128};var n,r={};for(n in e.elements){var i=e.elements[n];if(!0!==t.omitPrivateAttibutes||!o(n))if(i.items){for(var a=[],s=0;s<i.items.length;s++)a.push(d(i.items[s].dataSet,t));r[n]=a}else{var l=void 0;i.length<t.maxElementLength&&(l=u(e,i)),r[n]=void 0!==l?l:{dataOffset:i.dataOffset,length:i.length}}}return r}function h(e,t){return 255===e.byteArray[t]&&217===e.byteArray[t+1]}function p(e,t,n){for(var r,i,o=n;o<t.fragments.length;o++)if(i=o,h(r=e,(i=t.fragments[i]).position+i.length-2)||h(r,i.position+i.length-3))return o}function A(e,t,n){if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==t.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==t.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&n.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||t.fragments;for(var r=[],i=0;;){r.push(t.fragments[i].offset);var o=p(e,t,i);if(void 0===o||o===t.fragments.length-1)return r;i=o+1}}function f(e){if(void 0===e)throw"dicomParser.readTag: missing required parameter 'byteStream'";var t=256*e.readUint16()*256;return e=e.readUint16(),"x".concat("00000000".concat((t+e).toString(16)).substr(-8))}function m(e,t,n){if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(t.encapsulatedPixelData=!0,t.basicOffsetTable=[],t.fragments=[],"xfffee000"!==f(e))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var r=e.readUint32()/4,i=0;i<r;i++){var o=e.readUint32();t.basicOffsetTable.push(o)}for(var a=e.position;e.position<e.byteArray.length;){var s=f(e),l=e.readUint32();if("xfffee0dd"===s)return e.seek(l),void(t.length=e.position-t.dataOffset);if("xfffee000"!==s)return n&&n.push("unexpected tag ".concat(s," while searching for end of pixel data element with undefined length")),l>e.byteArray.length-e.position&&(l=e.byteArray.length-e.position),t.fragments.push({offset:e.position-a-8,position:e.position,length:l}),e.seek(l),void(t.length=e.position-t.dataOffset);t.fragments.push({offset:e.position-a-8,position:e.position,length:l}),e.seek(l)}n&&n.push("pixel data element ".concat(t.tag," missing sequence delimiter tag xfffee0dd"))}function g(e,t){if(void 0===e)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57565===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position ".concat(e.position-4," while reading element of undefined length with tag ").concat(t.tag)),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}function v(e,t,n){if(n<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(t+n>e.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var r,i="",o=0;o<n;o++){if(0===(r=e[t+o]))return t+=n,i;i+=String.fromCharCode(r)}return i}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return void 0!==e.parser?e.parser:t}var w=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.byteArrayParser=t,this.byteArray=n,this.elements=r}var t,n;return t=e,(n=[{key:"uint16",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return b(e,this.byteArrayParser).readUint16(this.byteArray,e.dataOffset+2*t)}},{key:"int16",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return b(e,this.byteArrayParser).readInt16(this.byteArray,e.dataOffset+2*t)}},{key:"uint32",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return b(e,this.byteArrayParser).readUint32(this.byteArray,e.dataOffset+4*t)}},{key:"int32",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return b(e,this.byteArrayParser).readInt32(this.byteArray,e.dataOffset+4*t)}},{key:"float",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return b(e,this.byteArrayParser).readFloat(this.byteArray,e.dataOffset+4*t)}},{key:"double",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return b(e,this.byteArrayParser).readDouble(this.byteArray,e.dataOffset+8*t)}},{key:"numStringValues",value:function(e){if((e=this.elements[e])&&0<e.length)return null===(e=v(this.byteArray,e.dataOffset,e.length).match(/\\/g))?1:e.length+1}},{key:"string",value:function(e,t){return(e=this.elements[e])&&e.Value?e.Value:e&&0<e.length?(e=v(this.byteArray,e.dataOffset,e.length),0<=t?e.split("\\")[t].trim():e.trim()):void 0}},{key:"text",value:function(e,t){if((e=this.elements[e])&&0<e.length)return e=v(this.byteArray,e.dataOffset,e.length),0<=t?e.split("\\")[t].replace(/ +$/,""):e.replace(/ +$/,"")}},{key:"floatString",value:function(e,t){var n=this.elements[e];if(n&&0<n.length&&void 0!==(t=this.string(e,t=void 0!==t?t:0)))return parseFloat(t)}},{key:"intString",value:function(e,t){var n=this.elements[e];if(n&&0<n.length&&void 0!==(t=this.string(e,t=void 0!==t?t:0)))return parseInt(t)}},{key:"attributeTag",value:function(e){if((n=this.elements[e])&&4===n.length){var t=b(n,this.byteArrayParser).readUint16,n=(e=this.byteArray,n.dataOffset);return"x".concat("00000000".concat((256*t(e,n)*256+t(e,n+2)).toString(16)).substr(-8))}}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e,t){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57357===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position ".concat(e.position-4," while reading element of undefined length with tag ").concat(t.tag)),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}var C=function(e,t){return void 0!==e.vr?"SQ"===e.vr:t.position+4<=t.byteArray.length?(e=f(t),t.seek(-4),"xfffee000"===e||"xfffee0dd"===e):(t.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1)};function S(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var r;return 4294967295===(r={tag:r=f(e),vr:void 0!==n?n(r):void 0,length:e.readUint32(),dataOffset:e.position}).length&&(r.hadUndefinedLength=!0),r.tag===t||(!C(r,e)||o(r.tag)&&!r.hadUndefinedLength?r.hadUndefinedLength?x(e,r):e.seek(r.length):(E(e,r,n),o(r.tag)&&(r.items=void 0))),r}function B(e){if(void 0===e)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var t={tag:f(e),length:e.readUint32(),dataOffset:e.position};if("xfffee000"!==t.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset ".concat(e.position);return t}function _(e,t){var n=B(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(e,t){for(var n={};e.position<e.byteArray.length;){var r=S(e,void 0,t);if("xfffee00d"===(n[r.tag]=r).tag)return new w(e.byteArrayParser,e.byteArray,n)}return e.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new w(e.byteArrayParser,e.byteArray,n)}(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new w(e.byteArrayParser,e.byteArray,{}),I(n.dataSet,e,e.position+n.length,{vrCallback:t})),n}function E(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";t.items=[],(4294967295===t.length?function(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=f(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8);r=_(e,n),t.items.push(r)}e.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),t.length=e.byteArray.length-t.dataOffset}:function(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var i=_(e,n);t.items.push(i)}})(e,t,n)}function M(e,t){var n=B(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(e,t){for(var n={};e.position<e.byteArray.length;){var r=D(e,t);if("xfffee00d"===(n[r.tag]=r).tag)return new w(e.byteArrayParser,e.byteArray,n)}return t.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new w(e.byteArrayParser,e.byteArray,n)}(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new w(e.byteArrayParser,e.byteArray,{}),F(n.dataSet,e,e.position+n.length)),n}function P(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";t.items=[],(4294967295===t.length?function(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=f(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8);r=M(e,n),t.items.push(r)}n.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),t.length=e.position-t.dataOffset}:function(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var i=M(e,n);t.items.push(i)}})(e,t,n)}var T=function(e){return"OB"===e||"OD"===e||"OL"===e||"OW"===e||"SQ"===e||"OF"===e||"UC"===e||"UR"===e||"UT"===e||"UN"===e?4:2};function D(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var r={tag:f(e),vr:e.readFixedString(2)};return 2===T(r.vr)?r.length=e.readUint16():(e.seek(2),r.length=e.readUint32()),r.dataOffset=e.position,4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===n||("SQ"===r.vr?P(e,r,t):4294967295===r.length?"x7fe00010"===r.tag?m(e,r,t):("UN"===r.vr?E:x)(e,r):e.seek(r.length)),r}function F(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?t.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var i=e.elements;t.position<n;){var o=D(t,e.warnings,r.untilTag);if((i[o.tag]=o).tag===r.untilTag)return}if(t.position>n)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"}function I(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?e.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var i=e.elements;t.position<n;){var o=S(t,r.untilTag,r.vrCallback);if((i[o.tag]=o).tag===r.untilTag)return}}function k(e,t){if("undefined"!=typeof Buffer&&e instanceof Buffer)return Buffer.alloc(t);if(e instanceof Uint8Array)return new Uint8Array(t);throw"dicomParser.alloc: unknown type for byteArray"}var O="1.8.12",L={readUint16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(e[t]<<8)+e[t+1]},readInt16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";return 32768&(t=(e[t]<<8)+e[t+1])?t-65535-1:t},readUint32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*e[t]+e[t+1])+e[t+2])+e[t+3]},readInt32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(e[t]<<24)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3]},readFloat:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[3]=e[t],n[2]=e[t+1],n[1]=e[t+2],n[0]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[7]=e[t],n[6]=e[t+1],n[5]=e[t+2],n[4]=e[t+3],n[3]=e[t+4],n[2]=e[t+5],n[1]=e[t+6],n[0]=e[t+7],new Float64Array(n.buffer)[0]}};function R(e,t,n){if("undefined"!=typeof Buffer&&e instanceof Buffer)return e.slice(t,t+n);if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset+t,n);throw"dicomParser.from: unknown type for byteArray"}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(n instanceof Uint8Array==0&&("undefined"==typeof Buffer||n instanceof Buffer==0))throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(r<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(r>=n.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=t,this.byteArray=n,this.position=r||0,this.warnings=[]}var t,n;return t=e,(n=[{key:"seek",value:function(e){if(this.position+e<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=e}},{key:"readByteStream",value:function(t){if(this.position+t>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=R(this.byteArray,this.position,t);return this.position+=t,new e(this.byteArrayParser,n)}},{key:"getSize",value:function(){return this.byteArray.length}},{key:"readUint16",value:function(){var e=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,e}},{key:"readUint32",value:function(){var e=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,e}},{key:"readFixedString",value:function(e){var t=v(this.byteArray,this.position,e);return this.position+=e,t}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),N={readUint16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return e[t]+256*e[t+1]},readInt16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";return 32768&(t=e[t]+(e[t+1]<<8))?t-65535-1:t},readUint32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return e[t]+256*e[t+1]+256*e[t+2]*256+256*e[t+3]*256*256},readInt32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)},readFloat:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],new Float64Array(n.buffer)[0]}};function j(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var n=t.TransferSyntaxUID,r=new z(N,e);return function(){var e=function(){if(r.getSize()<=132&&n)return!1;if(r.seek(128),"DICM"===r.readFixedString(4))return!0;if(!(t||{}).TransferSyntaxUID)throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file.";return r.seek(0),!1}(),i=[],o={};if(!e)return r.position=0,{elements:{x00020010:{tag:"x00020010",vr:"UI",Value:n}},warnings:i};for(;r.position<r.byteArray.length;){var a=r.position,s=D(r,i);if("x0002ffff"<s.tag){r.position=a;break}s.parser=N,o[s.tag]=s}return(e=new w(r.byteArrayParser,r.byteArray,o)).warnings=r.warnings,e.position=r.position,e}()}var H="1.2.840.10008.1.2.2";function Q(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)throw new Error("dicomParser.parseDicom: missing required parameter 'byteArray'");var r,i=function(t){if(void 0===t.elements.x00020010)throw new Error("dicomParser.parseDicom: missing required meta header attribute 0002,0010");return(t=t.elements.x00020010)&&t.Value||v(e,t.dataOffset,t.length)};function o(r){var o="1.2.840.10008.1.2"!==(a=i(r)),a=function(r,i){var o="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);if("1.2.840.10008.1.2.1.99"!==r)return new z(r===H?L:N,e,i);if(t&&t.inflater)return r=t.inflater(e,i),new z(N,r,0);if(1==o){var a=n(0),s=R(e,i,e.length-i);return a=a.inflateRawSync(s),s=k(e,a.length+i),e.copy(s,0,0,i),a.copy(s,i),new z(N,s,0)}if("undefined"==typeof pako)throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax";return a=e.slice(i),s=pako.inflateRaw(a),(a=k(e,s.length+i)).set(e.slice(0,i),0),a.set(s,i),new z(N,a,0)}(a,r.position);(r=new w(a.byteArrayParser,a.byteArray,{})).warnings=a.warnings;try{(o?F:I)(r,a,a.byteArray.length,t)}catch(s){throw{exception:s,dataSet:r}}return r}return function(e,t){for(var n in e.elements)e.elements.hasOwnProperty(n)&&(t.elements[n]=e.elements[n]);return void 0!==e.warnings&&(t.warnings=e.warnings.concat(t.warnings)),t}(r=j(e,t),o(r))}var V=function(e,t,n){for(var r=0,i=t;i<t+n;i++)r+=e[i].length;return r};function W(e,t,n,r,i){if(i=i||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===(r=r||1))throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(n>=t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(r<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(n+r>t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var o=new z(e.byteArrayParser,e.byteArray,t.dataOffset);if("xfffee000"!==(t=B(o)).tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";o.seek(t.length);var a=o.position;if(1===r)return R(o.byteArray,a+i[n].offset+8,i[n].length);t=V(i,n,r);for(var s=k(o.byteArray,t),l=0,c=n;c<n+r;c++)for(var u=a+i[c].offset+8,d=0;d<i[c].length;d++)s[l++]=o.byteArray[u++];return s}var G=function(e,t){for(var n=0;n<e.length;n++)if(e[n].offset===t)return n},q=function(e,t,n,r){if(e===t.length-1)return n.length-r;for(var i=t[e+1],o=r+1;o<n.length;o++)if(n[o].offset===i)return o-r;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"};function K(e,t,n,r,i){if(r=r||t.basicOffsetTable,i=i||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===r)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===r.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(n<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(n>=r.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var o=r[n];if(void 0===(o=G(i,o)))throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";return W(e,t,o,q(n,r,i,o),i)}var Y=!1;function X(e,t,n){if(Y||(Y=!0,console&&console.log),void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==t.basicOffsetTable.length?K(e,t,n):W(e,t,0,t.fragments.length)}t.default={isStringVr:i,isPrivateTag:o,parsePN:a,parseTM:s,parseDA:c,explicitElementToString:u,explicitDataSetToJS:d,createJPEGBasicOffsetTable:A,parseDicomDataSetExplicit:F,parseDicomDataSetImplicit:I,readFixedString:v,alloc:k,version:O,bigEndianByteArrayParser:L,ByteStream:z,sharedCopy:R,DataSet:w,findAndSetUNElementLength:g,findEndOfEncapsulatedElement:m,findItemDelimitationItemAndSetElementLength:x,littleEndianByteArrayParser:N,parseDicom:Q,readDicomElementExplicit:D,readDicomElementImplicit:S,readEncapsulatedImageFrame:K,readEncapsulatedPixelData:X,readEncapsulatedPixelDataFromFragments:W,readPart10Header:j,readSequenceItemsExplicit:P,readSequenceItemsImplicit:E,readSequenceItem:B,readTag:f,LEI:"1.2.840.10008.1.2",LEE:"1.2.840.10008.1.2.1"}}],r={},t.m=n,t.c=r,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1);function t(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n,r}(gB(DU));const FU=mB(TU.exports);function IU(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function kU(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const OU=6048e5,LU=864e5;let RU={};function UU(){return RU}function zU(e,t){var n,r,i,o;const a=UU(),s=(null==t?void 0:t.weekStartsOn)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)??a.weekStartsOn??(null==(o=null==(i=a.locale)?void 0:i.options)?void 0:o.weekStartsOn)??0,l=IU(e),c=l.getDay(),u=(c<s?7:0)+c-s;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function NU(e){return zU(e,{weekStartsOn:1})}function jU(e){const t=IU(e),n=t.getFullYear(),r=kU(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=NU(r),o=kU(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=NU(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function HU(e){const t=IU(e);return t.setHours(0,0,0,0),t}function QU(e){const t=IU(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function VU(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const n=IU(e);return!isNaN(Number(n))}const WU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function GU(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const qU={date:GU({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:GU({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:GU({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},KU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function YU(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const XU={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:YU({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:YU({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:YU({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:YU({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:YU({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function $U(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const a=o[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,(e=>e.test(a))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const JU={ordinalNumber:function(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],o=t.match(e.parsePattern);if(!o)return null;let a=e.valueCallback?e.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;return{value:a,rest:t.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:$U({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:$U({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:$U({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:$U({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:$U({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},ZU={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=WU[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:qU,formatRelative:(e,t,n,r)=>KU[e],localize:XU,match:JU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ez(e){const t=IU(e),n=function(e,t){const n=HU(e),r=HU(t),i=+n-QU(n),o=+r-QU(r);return Math.round((i-o)/LU)}(t,function(e){const t=IU(e),n=kU(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(t));return n+1}function tz(e){const t=IU(e),n=+NU(t)-+function(e){const t=jU(e),n=kU(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),NU(n)}(t);return Math.round(n/OU)+1}function nz(e,t){var n,r,i,o;const a=IU(e),s=a.getFullYear(),l=UU(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(o=null==(i=l.locale)?void 0:i.options)?void 0:o.firstWeekContainsDate)??1,u=kU(e,0);u.setFullYear(s+1,0,c),u.setHours(0,0,0,0);const d=zU(u,t),h=kU(e,0);h.setFullYear(s,0,c),h.setHours(0,0,0,0);const p=zU(h,t);return a.getTime()>=d.getTime()?s+1:a.getTime()>=p.getTime()?s:s-1}function rz(e,t){const n=IU(e),r=+zU(n,t)-+function(e,t){var n,r,i,o;const a=UU(),s=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??a.firstWeekContainsDate??(null==(o=null==(i=a.locale)?void 0:i.options)?void 0:o.firstWeekContainsDate)??1,l=nz(e,t),c=kU(e,0);return c.setFullYear(l,0,s),c.setHours(0,0,0,0),zU(c,t)}(n,t);return Math.round(r/OU)+1}function iz(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const oz={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return iz("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):iz(n+1,2)},d:(e,t)=>iz(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>iz(e.getHours()%12||12,t.length),H:(e,t)=>iz(e.getHours(),t.length),m:(e,t)=>iz(e.getMinutes(),t.length),s:(e,t)=>iz(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return iz(Math.trunc(r*Math.pow(10,n-3)),t.length)}},az="midnight",sz="noon",lz="morning",cz="afternoon",uz="evening",dz="night",hz={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return oz.y(e,t)},Y:function(e,t,n,r){const i=nz(e,r),o=i>0?i:1-i;if("YY"===t){return iz(o%100,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):iz(o,t.length)},R:function(e,t){return iz(jU(e),t.length)},u:function(e,t){return iz(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return iz(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return iz(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return oz.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return iz(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=rz(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):iz(i,t.length)},I:function(e,t,n){const r=tz(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):iz(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):oz.d(e,t)},D:function(e,t,n){const r=ez(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):iz(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return iz(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return iz(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return iz(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?sz:0===r?az:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?uz:r>=12?cz:r>=4?lz:dz,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return oz.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):oz.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):iz(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):iz(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):oz.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):oz.s(e,t)},S:function(e,t){return oz.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Az(r);case"XXXX":case"XX":return fz(r);default:return fz(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Az(r);case"xxxx":case"xx":return fz(r);default:return fz(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+pz(r,":");default:return"GMT"+fz(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+pz(r,":");default:return"GMT"+fz(r,":")}},t:function(e,t,n){return iz(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return iz(e.getTime(),t.length)}};function pz(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),o=r%60;return 0===o?n+String(i):n+String(i)+t+iz(o,2)}function Az(e,t){if(e%60==0){return(e>0?"-":"+")+iz(Math.abs(e)/60,2)}return fz(e,t)}function fz(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+iz(Math.trunc(r/60),2)+t+iz(r%60,2)}const mz=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},gz=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},vz={p:gz,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return mz(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",mz(r,t)).replace("{{time}}",gz(i,t))}},yz=/^D+$/,bz=/^Y+$/,wz=["D","DD","YY","YYYY"];const xz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sz=/^'([^]*?)'?$/,Bz=/''/g,_z=/[a-zA-Z]/;function Ez(e,t,n){var r,i,o,a;const s=UU(),l=s.locale??ZU,c=s.firstWeekContainsDate??(null==(i=null==(r=s.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,u=s.weekStartsOn??(null==(a=null==(o=s.locale)?void 0:o.options)?void 0:a.weekStartsOn)??0,d=IU(e);if(!VU(d))throw new RangeError("Invalid time value");let h=t.match(Cz).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,vz[t])(e,l.formatLong)}return e})).join("").match(xz).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Mz(e)};if(hz[t])return{isToken:!0,value:e};if(t.match(_z))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));l.localize.preprocessor&&(h=l.localize.preprocessor(d,h));const p={firstWeekContainsDate:c,weekStartsOn:u,locale:l};return h.map((n=>{if(!n.isToken)return n.value;const r=n.value;(function(e){return bz.test(e)}(r)||function(e){return yz.test(e)}(r))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(wz.includes(e))throw new RangeError(r)}(r,t,String(e));return(0,hz[r[0]])(d,r,l.localize,p)})).join("")}function Mz(e){const t=e.match(Sz);return t?t[1].replace(Bz,"'"):e}
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Pz(e){return null==e}var Tz=function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},Dz={isNothing:Pz,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:Pz(e)?[]:[e]},repeat:Tz,isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,o;if(t)for(n=0,r=(o=Object.keys(t)).length;n<r;n+=1)e[i=o[n]]=t[i];return e}};function Fz(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function Iz(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Fz(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Iz.prototype=Object.create(Error.prototype),Iz.prototype.constructor=Iz,Iz.prototype.toString=function(e){return this.name+": "+Fz(this,e)};var kz=Iz;function Oz(e,t,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-t>s&&(t=r-s+(o=" ... ").length),n-r>s&&(n=r+s-(a=" ...").length),{str:o+e.slice(t,n).replace(/\t/g,"→")+a,pos:r-t+o.length}}function Lz(e,t){return Dz.repeat(" ",t-e.length)+e}var Rz=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],a=-1;n=r.exec(e.buffer);)o.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var s,l,c="",u=Math.min(e.line+t.linesAfter,o.length).toString().length,d=t.maxLength-(t.indent+u+3);for(s=1;s<=t.linesBefore&&!(a-s<0);s++)l=Oz(e.buffer,i[a-s],o[a-s],e.position-(i[a]-i[a-s]),d),c=Dz.repeat(" ",t.indent)+Lz((e.line-s+1).toString(),u)+" | "+l.str+"\n"+c;for(l=Oz(e.buffer,i[a],o[a],e.position,d),c+=Dz.repeat(" ",t.indent)+Lz((e.line+1).toString(),u)+" | "+l.str+"\n",c+=Dz.repeat("-",t.indent+u+3+l.pos)+"^\n",s=1;s<=t.linesAfter&&!(a+s>=o.length);s++)l=Oz(e.buffer,i[a+s],o[a+s],e.position-(i[a]-i[a+s]),d),c+=Dz.repeat(" ",t.indent)+Lz((e.line+s+1).toString(),u)+" | "+l.str+"\n";return c.replace(/\n$/,"")},Uz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],zz=["scalar","sequence","mapping"];var Nz=function(e,t){var n,r;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===Uz.indexOf(t))throw new kz('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(n=t.styleAliases||null,r={},null!==n&&Object.keys(n).forEach((function(e){n[e].forEach((function(t){r[String(t)]=e}))})),r),-1===zz.indexOf(this.kind))throw new kz('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function jz(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function Hz(e){return this.extend(e)}Hz.prototype.extend=function(e){var t=[],n=[];if(e instanceof Nz)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new kz("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof Nz))throw new kz("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new kz("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new kz("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof Nz))throw new kz("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(Hz.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=jz(r,"implicit"),r.compiledExplicit=jz(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var Qz=Hz,Vz=new Nz("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),Wz=new Nz("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),Gz=new Nz("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),qz=new Qz({explicit:[Vz,Wz,Gz]});var Kz=new Nz("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var Yz=new Nz("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Xz(e){return 48<=e&&e<=55}function $z(e){return 48<=e&&e<=57}var Jz=new Nz("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,i=0,o=!1;if(!r)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===r)return!0;if("b"===(t=e[++i])){for(i++;i<r;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!(48<=(n=e.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!Xz(e.charCodeAt(i)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;i<r;i++)if("_"!==(t=e[i])){if(!$z(e.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!Dz.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Zz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var eN=/^[-+]?[0-9]+e/;var tN=new Nz("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!Zz.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||Dz.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Dz.isNegativeZero(e))return"-0.0";return n=e.toString(10),eN.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),nN=qz.extend({implicit:[Kz,Yz,Jz,tN]}),rN=nN,iN=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),oN=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var aN=new Nz("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==iN.exec(e)||null!==oN.exec(e))},construct:function(e){var t,n,r,i,o,a,s,l,c=0,u=null;if(null===(t=iN.exec(e))&&(t=oN.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],a=+t[5],s=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),l=new Date(Date.UTC(n,r,i,o,a,s,c)),u&&l.setTime(l.getTime()-u),l},instanceOf:Date,represent:function(e){return e.toISOString()}});var sN=new Nz("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),lN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var cN=new Nz("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=lN;for(n=0;n<i;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=lN,a=0,s=[];for(t=0;t<i;t++)t%4==0&&t&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(t));return 0===(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),new Uint8Array(s)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",i=0,o=e.length,a=lN;for(t=0;t<o;t++)t%3==0&&t&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+e[t];return 0===(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),uN=Object.prototype.hasOwnProperty,dN=Object.prototype.toString;var hN=new Nz("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=[],s=e;for(t=0,n=s.length;t<n;t+=1){if(r=s[t],o=!1,"[object Object]"!==dN.call(r))return!1;for(i in r)if(uN.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),pN=Object.prototype.toString;var AN=new Nz("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],"[object Object]"!==pN.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}}),fN=Object.prototype.hasOwnProperty;var mN=new Nz("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(fN.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),gN=rN.extend({implicit:[aN,sN],explicit:[cN,hN,AN,mN]}),vN=Object.prototype.hasOwnProperty,yN=1,bN=2,wN=3,xN=4,CN=1,SN=2,BN=3,_N=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,EN=/[\x85\u2028\u2029]/,MN=/[,\[\]\{\}]/,PN=/^(?:!|!!|![a-z\-]+!)$/i,TN=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function DN(e){return Object.prototype.toString.call(e)}function FN(e){return 10===e||13===e}function IN(e){return 9===e||32===e}function kN(e){return 9===e||32===e||10===e||13===e}function ON(e){return 44===e||91===e||93===e||123===e||125===e}function LN(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function RN(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function UN(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var zN=new Array(256),NN=new Array(256),jN=0;jN<256;jN++)zN[jN]=RN(jN)?1:0,NN[jN]=RN(jN);function HN(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||gN,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function QN(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=Rz(n),new kz(t,n)}function VN(e,t){throw QN(e,t)}function WN(e,t){e.onWarning&&e.onWarning.call(null,QN(e,t))}var GN={YAML:function(e,t,n){var r,i,o;null!==e.version&&VN(e,"duplication of %YAML directive"),1!==n.length&&VN(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&VN(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&VN(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&WN(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&VN(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],PN.test(r)||VN(e,"ill-formed tag handle (first argument) of the TAG directive"),vN.call(e.tagMap,r)&&VN(e,'there is a previously declared suffix for "'+r+'" tag handle'),TN.test(i)||VN(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(o){VN(e,"tag prefix is malformed: "+i)}e.tagMap[r]=i}};function qN(e,t,n,r){var i,o,a,s;if(t<n){if(s=e.input.slice(t,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||VN(e,"expected valid JSON character");else _N.test(s)&&VN(e,"the stream contains non-printable characters");e.result+=s}}function KN(e,t,n,r){var i,o,a,s;for(Dz.isObject(n)||VN(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],vN.call(t,o)||(t[o]=n[o],r[o]=!0)}function YN(e,t,n,r,i,o,a,s,l){var c,u;if(Array.isArray(i))for(c=0,u=(i=Array.prototype.slice.call(i)).length;c<u;c+=1)Array.isArray(i[c])&&VN(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===DN(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===DN(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)KN(e,t,o[c],n);else KN(e,t,o,n);else e.json||vN.call(n,i)||!vN.call(t,i)||(e.line=a||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,VN(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function XN(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):VN(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function $N(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);0!==i;){for(;IN(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!FN(i))break;for(XN(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&WN(e,"deficient indentation"),r}function JN(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!kN(t)))}function ZN(e,t){1===t?e.result+=" ":t>1&&(e.result+=Dz.repeat("\n",t-1))}function ej(e,t){var n,r,i=e.tag,o=e.anchor,a=[],s=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,VN(e,"tab characters must not be used in indentation")),45===r)&&kN(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,$N(e,!0,-1)&&e.lineIndent<=t)a.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,rj(e,t,wN,!1,!0),a.push(e.result),$N(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)VN(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=i,e.anchor=o,e.kind="sequence",e.result=a,!0)}function tj(e){var t,n,r,i,o=!1,a=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&VN(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(o=!0,i=e.input.charCodeAt(++e.position)):33===i?(a=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,o){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):VN(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!kN(i);)33===i&&(a?VN(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),PN.test(n)||VN(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),MN.test(r)&&VN(e,"tag suffix cannot contain flow indicator characters")}r&&!TN.test(r)&&VN(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(s){VN(e,"tag name is malformed: "+r)}return o?e.tag=r:vN.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:VN(e,'undeclared tag handle "'+n+'"'),!0}function nj(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&VN(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!kN(n)&&!ON(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&VN(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function rj(e,t,n,r,i){var o,a,s,l,c,u,d,h,p,A=1,f=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=xN===n||wN===n,r&&$N(e,!0,-1)&&(f=!0,e.lineIndent>t?A=1:e.lineIndent===t?A=0:e.lineIndent<t&&(A=-1)),1===A)for(;tj(e)||nj(e);)$N(e,!0,-1)?(f=!0,s=o,e.lineIndent>t?A=1:e.lineIndent===t?A=0:e.lineIndent<t&&(A=-1)):s=!1;if(s&&(s=f||i),1!==A&&xN!==n||(h=yN===n||bN===n?t:t+1,p=e.position-e.lineStart,1===A?s&&(ej(e,p)||function(e,t,n){var r,i,o,a,s,l,c,u=e.tag,d=e.anchor,h={},p=Object.create(null),A=null,f=null,m=null,g=!1,v=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=h),c=e.input.charCodeAt(e.position);0!==c;){if(g||-1===e.firstTabInLine||(e.position=e.firstTabInLine,VN(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,63!==c&&58!==c||!kN(r)){if(a=e.line,s=e.lineStart,l=e.position,!rj(e,n,bN,!1,!0))break;if(e.line===o){for(c=e.input.charCodeAt(e.position);IN(c);)c=e.input.charCodeAt(++e.position);if(58===c)kN(c=e.input.charCodeAt(++e.position))||VN(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(YN(e,h,p,A,f,null,a,s,l),A=f=m=null),v=!0,g=!1,i=!1,A=e.tag,f=e.result;else{if(!v)return e.tag=u,e.anchor=d,!0;VN(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=u,e.anchor=d,!0;VN(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(g&&(YN(e,h,p,A,f,null,a,s,l),A=f=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):VN(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=r;if((e.line===o||e.lineIndent>t)&&(g&&(a=e.line,s=e.lineStart,l=e.position),rj(e,t,xN,!0,i)&&(g?f=e.result:m=e.result),g||(YN(e,h,p,A,f,m,a,s,l),A=f=m=null),$N(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&0!==c)VN(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return g&&YN(e,h,p,A,f,null,a,s,l),v&&(e.tag=u,e.anchor=d,e.kind="mapping",e.result=h),v}(e,p,h))||function(e,t){var n,r,i,o,a,s,l,c,u,d,h,p,A=!0,f=e.tag,m=e.anchor,g=Object.create(null);if(91===(p=e.input.charCodeAt(e.position)))a=93,c=!1,o=[];else{if(123!==p)return!1;a=125,c=!0,o={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),p=e.input.charCodeAt(++e.position);0!==p;){if($N(e,!0,t),(p=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=f,e.anchor=m,e.kind=c?"mapping":"sequence",e.result=o,!0;A?44===p&&VN(e,"expected the node content, but found ','"):VN(e,"missed comma between flow collection entries"),h=null,s=l=!1,63===p&&kN(e.input.charCodeAt(e.position+1))&&(s=l=!0,e.position++,$N(e,!0,t)),n=e.line,r=e.lineStart,i=e.position,rj(e,t,yN,!1,!0),d=e.tag,u=e.result,$N(e,!0,t),p=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==p||(s=!0,p=e.input.charCodeAt(++e.position),$N(e,!0,t),rj(e,t,yN,!1,!0),h=e.result),c?YN(e,o,g,d,u,h,n,r,i):s?o.push(YN(e,null,g,d,u,h,n,r,i)):o.push(u),$N(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(A=!0,p=e.input.charCodeAt(++e.position)):A=!1}VN(e,"unexpected end of the stream within a flow collection")}(e,h)?m=!0:(a&&function(e,t){var n,r,i,o,a,s=CN,l=!1,c=!1,u=t,d=0,h=!1;if(124===(o=e.input.charCodeAt(e.position)))r=!1;else{if(62!==o)return!1;r=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)CN===s?s=43===o?BN:SN:VN(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===i?VN(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?VN(e,"repeat of an indentation width identifier"):(u=t+i-1,c=!0)}if(IN(o)){do{o=e.input.charCodeAt(++e.position)}while(IN(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!FN(o)&&0!==o)}for(;0!==o;){for(XN(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!c||e.lineIndent<u)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>u&&(u=e.lineIndent),FN(o))d++;else{if(e.lineIndent<u){s===BN?e.result+=Dz.repeat("\n",l?1+d:d):s===CN&&l&&(e.result+="\n");break}for(r?IN(o)?(h=!0,e.result+=Dz.repeat("\n",l?1+d:d)):h?(h=!1,e.result+=Dz.repeat("\n",d+1)):0===d?l&&(e.result+=" "):e.result+=Dz.repeat("\n",d):e.result+=Dz.repeat("\n",l?1+d:d),l=!0,c=!0,d=0,n=e.position;!FN(o)&&0!==o;)o=e.input.charCodeAt(++e.position);qN(e,n,e.position,!1)}}return!0}(e,h)||function(e,t){var n,r,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(qN(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,i=e.position}else FN(n)?(qN(e,r,i,!0),ZN(e,$N(e,!1,t)),r=i=e.position):e.position===e.lineStart&&JN(e)?VN(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);VN(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var n,r,i,o,a,s,l;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return qN(e,n,e.position,!0),e.position++,!0;if(92===s){if(qN(e,n,e.position,!0),FN(s=e.input.charCodeAt(++e.position)))$N(e,!1,t);else if(s<256&&zN[s])e.result+=NN[s],e.position++;else if((a=120===(l=s)?2:117===l?4:85===l?8:0)>0){for(i=a,o=0;i>0;i--)(a=LN(s=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+a:VN(e,"expected hexadecimal character");e.result+=UN(o),e.position++}else VN(e,"unknown escape sequence");n=r=e.position}else FN(s)?(qN(e,n,r,!0),ZN(e,$N(e,!1,t)),n=r=e.position):e.position===e.lineStart&&JN(e)?VN(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}VN(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?m=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!kN(r)&&!ON(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&VN(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),vN.call(e.anchorMap,n)||VN(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],$N(e,!0,-1),!0}(e)?function(e,t,n){var r,i,o,a,s,l,c,u,d=e.kind,h=e.result;if(kN(u=e.input.charCodeAt(e.position))||ON(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(kN(r=e.input.charCodeAt(e.position+1))||n&&ON(r)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,a=!1;0!==u;){if(58===u){if(kN(r=e.input.charCodeAt(e.position+1))||n&&ON(r))break}else if(35===u){if(kN(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&JN(e)||n&&ON(u))break;if(FN(u)){if(s=e.line,l=e.lineStart,c=e.lineIndent,$N(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=o,e.line=s,e.lineStart=l,e.lineIndent=c;break}}a&&(qN(e,i,o,!1),ZN(e,e.line-s),i=o=e.position,a=!1),IN(u)||(o=e.position+1),u=e.input.charCodeAt(++e.position)}return qN(e,i,o,!1),!!e.result||(e.kind=d,e.result=h,!1)}(e,h,yN===n)&&(m=!0,null===e.tag&&(e.tag="?")):(m=!0,null===e.tag&&null===e.anchor||VN(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===A&&(m=s&&ej(e,p))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&VN(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,c=e.implicitTypes.length;l<c;l+=1)if((d=e.implicitTypes[l]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(vN.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,l=0,c=(u=e.typeMap.multi[e.kind||"fallback"]).length;l<c;l+=1)if(e.tag.slice(0,u[l].tag.length)===u[l].tag){d=u[l];break}d||VN(e,"unknown tag !<"+e.tag+">"),null!==e.result&&d.kind!==e.kind&&VN(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):VN(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function ij(e){var t,n,r,i,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&($N(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(a=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!kN(i);)i=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&VN(e,"directive name must not be less than one character in length");0!==i;){for(;IN(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!FN(i));break}if(FN(i))break;for(t=e.position;0!==i&&!kN(i);)i=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==i&&XN(e),vN.call(GN,n)?GN[n](e,n,r):WN(e,'unknown document directive "'+n+'"')}$N(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,$N(e,!0,-1)):a&&VN(e,"directives end mark is expected"),rj(e,e.lineIndent-1,xN,!1,!0),$N(e,!0,-1),e.checkLineBreaks&&EN.test(e.input.slice(o,e.position))&&WN(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&JN(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,$N(e,!0,-1)):e.position<e.length-1&&VN(e,"end of the stream or a document separator is expected")}function oj(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new HN(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,VN(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)ij(n);return n.documents}var aj={loadAll:function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=oj(e,n);if("function"!=typeof t)return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])},load:function(e,t){var n=oj(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new kz("expected a single document in the stream, but found more")}}},sj=Object.prototype.toString,lj=Object.prototype.hasOwnProperty,cj=65279,uj=9,dj=10,hj=13,pj=32,Aj=33,fj=34,mj=35,gj=37,vj=38,yj=39,bj=42,wj=44,xj=45,Cj=58,Sj=61,Bj=62,_j=63,Ej=64,Mj=91,Pj=93,Tj=96,Dj=123,Fj=124,Ij=125,kj={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Oj=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Lj=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Rj(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new kz("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+Dz.repeat("0",r-t.length)+t}var Uj=1,zj=2;function Nj(e){this.schema=e.schema||gN,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Dz.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,o,a,s,l;if(null===t)return{};for(n={},i=0,o=(r=Object.keys(t)).length;i<o;i+=1)a=r[i],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=e.compiledTypeMap.fallback[a])&&lj.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?zj:Uj,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function jj(e,t){for(var n,r=Dz.repeat(" ",t),i=0,o=-1,a="",s=e.length;i<s;)-1===(o=e.indexOf("\n",i))?(n=e.slice(i),i=s):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function Hj(e,t){return"\n"+Dz.repeat(" ",e.indent*t)}function Qj(e){return e===pj||e===uj}function Vj(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==cj||65536<=e&&e<=1114111}function Wj(e){return Vj(e)&&e!==cj&&e!==hj&&e!==dj}function Gj(e,t,n){var r=Wj(e),i=r&&!Qj(e);return(n?r:r&&e!==wj&&e!==Mj&&e!==Pj&&e!==Dj&&e!==Ij)&&e!==mj&&!(t===Cj&&!i)||Wj(t)&&!Qj(t)&&e===mj||t===Cj&&i}function qj(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function Kj(e){return/^\n* /.test(e)}var Yj=1,Xj=2,$j=3,Jj=4,Zj=5;function eH(e,t,n,r,i,o,a,s){var l,c,u=0,d=null,h=!1,p=!1,A=-1!==r,f=-1,m=Vj(c=qj(e,0))&&c!==cj&&!Qj(c)&&c!==xj&&c!==_j&&c!==Cj&&c!==wj&&c!==Mj&&c!==Pj&&c!==Dj&&c!==Ij&&c!==mj&&c!==vj&&c!==bj&&c!==Aj&&c!==Fj&&c!==Sj&&c!==Bj&&c!==yj&&c!==fj&&c!==gj&&c!==Ej&&c!==Tj&&function(e){return!Qj(e)&&e!==Cj}(qj(e,e.length-1));if(t||a)for(l=0;l<e.length;u>=65536?l+=2:l++){if(!Vj(u=qj(e,l)))return Zj;m=m&&Gj(u,d,s),d=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if((u=qj(e,l))===dj)h=!0,A&&(p=p||l-f-1>r&&" "!==e[f+1],f=l);else if(!Vj(u))return Zj;m=m&&Gj(u,d,s),d=u}p=p||A&&l-f-1>r&&" "!==e[f+1]}return h||p?n>9&&Kj(e)?Zj:a?o===zj?Zj:Xj:p?Jj:$j:!m||a||i(e)?o===zj?Zj:Xj:Yj}function tH(e,t,n,r,i){e.dump=function(){if(0===t.length)return e.quotingType===zj?'""':"''";if(!e.noCompatMode&&(-1!==Oj.indexOf(t)||Lj.test(t)))return e.quotingType===zj?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=r||e.flowLevel>-1&&n>=e.flowLevel;switch(eH(t,s,e.indent,a,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,i)){case Yj:return t;case Xj:return"'"+t.replace(/'/g,"''")+"'";case $j:return"|"+nH(t,e.indent)+rH(jj(t,o));case Jj:return">"+nH(t,e.indent)+rH(jj(function(e,t){var n,r,i=/(\n+)([^\n]*)/g,o=(s=e.indexOf("\n"),s=-1!==s?s:e.length,i.lastIndex=s,iH(e.slice(0,s),t)),a="\n"===e[0]||" "===e[0];var s;for(;r=i.exec(e);){var l=r[1],c=r[2];n=" "===c[0],o+=l+(a||n||""===c?"":"\n")+iH(c,t),a=n}return o}(t,a),o));case Zj:return'"'+function(e){for(var t,n="",r=0,i=0;i<e.length;r>=65536?i+=2:i++)r=qj(e,i),!(t=kj[r])&&Vj(r)?(n+=e[i],r>=65536&&(n+=e[i+1])):n+=t||Rj(r);return n}(t)+'"';default:throw new kz("impossible error: invalid scalar style")}}()}function nH(e,t){var n=Kj(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function rH(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function iH(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,a=0,s=0,l="";n=i.exec(e);)(s=n.index)-o>t&&(r=a>o?a:s,l+="\n"+e.slice(o,r),o=r+1),a=s;return l+="\n",e.length-o>t&&a>o?l+=e.slice(o,a)+"\n"+e.slice(a+1):l+=e.slice(o),l.slice(1)}function oH(e,t,n,r){var i,o,a,s="",l=e.tag;for(i=0,o=n.length;i<o;i+=1)a=n[i],e.replacer&&(a=e.replacer.call(n,String(i),a)),(sH(e,t+1,a,!0,!0,!1,!0)||void 0===a&&sH(e,t+1,null,!0,!0,!1,!0))&&(r&&""===s||(s+=Hj(e,t)),e.dump&&dj===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=l,e.dump=s||"[]"}function aH(e,t,n){var r,i,o,a,s,l;for(o=0,a=(i=n?e.explicitTypes:e.implicitTypes).length;o<a;o+=1)if(((s=i[o]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(n?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===sj.call(s.represent))r=s.represent(t,l);else{if(!lj.call(s.represent,l))throw new kz("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');r=s.represent[l](t,l)}e.dump=r}return!0}return!1}function sH(e,t,n,r,i,o,a){e.tag=null,e.dump=n,aH(e,n,!1)||aH(e,n,!0);var s,l=sj.call(e.dump),c=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var u,d,h="[object Object]"===l||"[object Array]"===l;if(h&&(d=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(i=!1),d&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&d&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===l)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var i,o,a,s,l,c,u="",d=e.tag,h=Object.keys(n);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new kz("sortKeys must be a boolean or a function");for(i=0,o=h.length;i<o;i+=1)c="",r&&""===u||(c+=Hj(e,t)),s=n[a=h[i]],e.replacer&&(s=e.replacer.call(n,a,s)),sH(e,t+1,a,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&dj===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,l&&(c+=Hj(e,t)),sH(e,t+1,s,!0,l)&&(e.dump&&dj===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=d,e.dump=u||"{}"}(e,t,e.dump,i),d&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,i,o,a,s,l="",c=e.tag,u=Object.keys(n);for(r=0,i=u.length;r<i;r+=1)s="",""!==l&&(s+=", "),e.condenseFlow&&(s+='"'),a=n[o=u[r]],e.replacer&&(a=e.replacer.call(n,o,a)),sH(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),sH(e,t,a,!1,!1)&&(l+=s+=e.dump));e.tag=c,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===l)r&&0!==e.dump.length?(e.noArrayIndent&&!a&&t>0?oH(e,t-1,e.dump,i):oH(e,t,e.dump,i),d&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,i,o,a="",s=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(sH(e,t,o,!1,!1)||void 0===o&&sH(e,t,null,!1,!1))&&(""!==a&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=s,e.dump="["+a+"]"}(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(e.skipInvalid)return!1;throw new kz("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&tH(e,e.dump,t,o,c)}null!==e.tag&&"?"!==e.tag&&(s=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),s="!"===e.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",e.dump=s+" "+e.dump)}return!0}function lH(e,t){var n,r,i=[],o=[];for(cH(e,i,o),n=0,r=o.length;n<r;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function cH(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)cH(e[i],t,n);else for(i=0,o=(r=Object.keys(e)).length;i<o;i+=1)cH(e[r[i]],t,n)}function uH(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var dH={Type:Nz,Schema:Qz,FAILSAFE_SCHEMA:qz,JSON_SCHEMA:nN,CORE_SCHEMA:rN,DEFAULT_SCHEMA:gN,load:aj.load,loadAll:aj.loadAll,dump:{dump:function(e,t){var n=new Nj(t=t||{});n.noRefs||lH(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),sH(n,0,r,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:kz,types:{binary:cN,float:tN,map:Gz,null:Kz,pairs:AN,set:mN,timestamp:aN,bool:Yz,int:Jz,merge:sN,omap:hN,seq:Wz,str:Vz},safeLoad:uH("safeLoad","load"),safeLoadAll:uH("safeLoadAll","loadAll"),safeDump:uH("safeDump","dump")};const hH=e=>new Promise((async(t,n)=>{try{const n=await e.getFile(),r=await n.arrayBuffer(),i=new Uint8Array(r);t(FU.parseDicom(i))}catch(r){throw n(`Error reading DICOM file: ${r}`),new Error(`Error reading DICOM file: ${r}`)}})),pH={BREAST:{system:"http://snomed.info/sct",code:"76752008",display:"Breast"}},AH={"1.2.840.10008.5.1.4.1.1.1":"Computed Radiography Image Storage","1.2.840.10008.5.1.4.1.1.2":"CT Image Storage","1.2.840.10008.5.1.4.1.1.3.1":"Ultrasound Multi-frame Image Storage","1.2.840.10008.5.1.4.1.1.4":"MR Image Storage"},fH=e=>{const t=new Date,n=Ez(t,"yyyy-MM-dd HH:mm:ss");Ez(t,"HH:mm:ss");const r=Ez(t,"yyyy-MM-dd");let i={};switch(e){case"valueQuantity":default:i={valueQuantity:{value:"",comparator:"",unit:"",system:"http://unitsofmeasure.org",code:""}};break;case"valueCodeableConcept":i={valueCodeableConcept:{coding:[{system:"",code:"",display:""}],text:""}};break;case"valueString":i={valueString:""};break;case"valueBoolean":i={valueBoolean:""};break;case"valueInteger":i={valueInteger:""};break;case"valueRange":i={valueRange:{low:"",high:""}};break;case"valueRatio":i={valueRatio:{numerator:{value:"",comparator:"",unit:"",system:"http://unitsofmeasure.org",code:""},denominator:{value:"",comparator:"",unit:"",system:"http://unitsofmeasure.org",code:""}}};break;case"valueSampledData":i={valueSampledData:{origin:"",period:"",factor:"",lowerLimit:"",upperLimit:"",dimensions:"",data:""}};break;case"valueTime":i={valueTime:r};break;case"valueDateTime":i={valueDateTime:n};break;case"valuePeriod":i={valuePeriod:{start:"",end:""}}}return i},mH=[{label:"valueQuantity",value:"valueQuantity"},{label:"valueCodeableConcept",value:"valueCodeableConcept"},{label:"valueString",value:"valueString"},{label:"valueBoolean",value:"valueBoolean"},{label:"valueInteger",value:"valueInteger"},{label:"valueRange",value:"valueRange"},{label:"valueRatio",value:"valueRatio"},{label:"valueSampledData",value:"valueSampledData"},{label:"valueTime",value:"valueTime"},{label:"valueDateTime",value:"valueDateTime"},{label:"valuePeriod",value:"valuePeriod"}],gH={value:{required:!0,validator:(e,t)=>!Number.isNaN(Number(t))||new Error("Value is required Number"),trigger:"blur"},unit:{required:!0,message:"Please input the unit for the value",trigger:["input","blur"]},system:{required:!0,validator:(e,t)=>!!t||new Error("Unit system is required"),trigger:"blur"},code:{required:!0,validator:(e,t)=>!!t||new Error("Unit code is required"),trigger:"blur"},comparator:{required:!1,validator:(e,t)=>!t||"<"===t||"<="===t||">="===t||">"===t||new Error("Comparator must be <, <=, >=, or >"),trigger:"blur"}},vH={observation:{value:{valueQuantity:gH,valueString:{required:!0,validator:(e,t)=>!!t||new Error("Value is required String"),trigger:"blur"},valueBoolean:{required:!0,validator:(e,t)=>"true"===t||"false"===t||new Error("Value is required Boolean"),trigger:"blur"},valueRange:{low:{required:!1,validator:(e,t)=>!Number.isNaN(Number(t))||new Error("Low is required Number"),trigger:"blur"},high:{required:!1,validator:(e,t)=>!Number.isNaN(Number(t))||new Error("High is required Number"),trigger:"blur"}},valueRatio:{numerator:gH,denominator:gH},valueSampledData:{origin:{required:!0,validator:(e,t)=>!!t||new Error("Origin is required"),trigger:"blur"},period:{required:!0,validator:(e,t)=>!Number.isNaN(Number(t))||new Error("Period is required Number"),trigger:"blur"},factor:{required:!1,validator:(e,t)=>!Number.isNaN(Number(t))||new Error("Factor is required Number"),trigger:"blur"},lowerLimit:{required:!1,validator:(e,t)=>!Number.isNaN(Number(t))||new Error("Lower Limit is required Number"),trigger:"blur"},upperLimit:{required:!1,validator:(e,t)=>!Number.isNaN(Number(t))||new Error("Upper Limit is required Number"),trigger:"blur"},dimensions:{required:!0,validator:(e,t)=>!Number.isNaN(Number(t))||new Error("Dimensions is required Number"),trigger:"blur"},data:{required:!1,validator:(e,t)=>"string"==typeof t||new Error("Data is required String"),trigger:"blur"}}},code:{required:!0,validator:(e,t)=>!!t||new Error("Observation Code is required"),trigger:"blur"},codeSystem:{required:!0,validator:(e,t)=>!!t||new Error("Observation codeSystem is required"),trigger:"blur"}}};for(var yH,bH=[],wH=0;wH<256;++wH)bH.push((wH+256).toString(16).slice(1));var xH=new Uint8Array(16);function CH(){if(!yH&&!(yH="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yH(xH)}const SH={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function BH(e,t,n){if(SH.randomUUID&&!t&&!e)return SH.randomUUID();var r=(e=e||{}).random||(e.rng||CH)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e,t=0){return(bH[e[t+0]]+bH[e[t+1]]+bH[e[t+2]]+bH[e[t+3]]+"-"+bH[e[t+4]]+bH[e[t+5]]+"-"+bH[e[t+6]]+bH[e[t+7]]+"-"+bH[e[t+8]]+bH[e[t+9]]+"-"+bH[e[t+10]]+bH[e[t+11]]+bH[e[t+12]]+bH[e[t+13]]+bH[e[t+14]]+bH[e[t+15]]).toLowerCase()}(r)}const _H={class:"flex flex-col md:flex-row px-11 pb-2 pt-1 shadow-md m-2 shadow-zinc-400 rounded-md bg-gradient-to-r from-zinc-300 via-gray-200 to-stone-400"},EH={key:0,class:"observation-form-item"},MH={key:1,class:"observation-form-item"},PH={style:{display:"flex","align-items":"center",width:"100%"}},TH={key:2,class:"observation-form-item"},DH={key:3,class:"observation-form-item"},FH={key:4,class:"observation-form-item"},IH={key:5,class:"observation-form-item"},kH={key:6,class:"observation-form-item w-full"},OH={key:7,class:"observation-form-item"},LH={key:8,class:"observation-form-item"},RH={key:9,class:"observation-form-item"},UH={key:10,class:"observation-form-item"},zH={class:"observation-form-item"},NH=Dn({__name:"FormObservation",props:{disabled:Boolean,selectedObservationValueType:String,filledData:Object,belongTo:{type:Array,default:()=>[]}},setup(e,{emit:t}){const n=e;Ir((()=>n.belongTo),(e=>{a.value||(d.value.belongTo=e)}));const r=t,{AddIcon:i,CloseIcon:o}=iR(),a=bt(!1),s=bt("#10b981"),l=bt(!1),c=bt(),u=VT(),d=bt({operation:"add",belongTo:n.belongTo,observationValueType:n.selectedObservationValueType?n.selectedObservationValueType:"valueQuantity",observation:{value:n.selectedObservationValueType?fH(n.selectedObservationValueType):{valueQuantity:{value:"",comparator:"",unit:"",system:"http://unitsofmeasure.org",code:""}},code:"",display:"",codeSystem:""}}),h=()=>{u.success("Successfully picked a period!")},p=e=>{d.value.observation.value.valuePeriod.start=Ez(e[0],"yyyy-MM-dd HH:mm:ss"),d.value.observation.value.valuePeriod.end=Ez(e[1],"yyyy-MM-dd HH:mm:ss")},A=()=>(d.value.observation.value.valueCodeableConcept.coding.push({code:"",system:"",display:""}),d.value.observation.value.valueCodeableConcept.coding[d.value.observation.value.valueCodeableConcept.coding.length-1]),f=e=>{d.value.observation.value=fH(e)};vn((()=>{n.filledData&&m()}));const m=()=>{a.value=n.disabled,s.value="#f43f5e",d.value.observation=n.filledData,"valueCodeableConcept"===d.value.observationValueType?l.value=!0:l.value=!1,"valuePeriod"===d.value.observationValueType&&(c.value=[new Date(d.value.observation.value.valuePeriod.start),new Date(d.value.observation.value.valuePeriod.end)])},g=["http://loinc.org","http://snomed.info/sct","http://dicom.nema.org/resources/ontology/DCM"].map((e=>({label:e,value:e}))),v=["http://unitsofmeasure.org"].map((e=>({label:e,value:e}))),y=bt("large"),b=bt(null),w=e=>{var t;if(e.preventDefault(),a.value)return d.value.operation="remove",void r("updateObservation",d.value);null==(t=b.value)||t.validate((e=>{e?u.error("Invalid"):(u.success("Valid"),d.value.operation="add","valueCodeableConcept"===d.value.observationValueType&&(d.value.observation.value.valueCodeableConcept.coding=d.value.observation.value.valueCodeableConcept.coding.filter((e=>""!==e.code&&""!==e.system))),r("updateObservation",d.value),d.value={operation:"add",belongTo:n.belongTo,observationValueType:"valueQuantity",observation:{value:{valueQuantity:{value:"",comparator:"",unit:"",system:"http://unitsofmeasure.org",code:""}},code:"",display:"",codeSystem:""}})}))};return(t,r)=>(gi(),wi("div",_H,[Mi(St(kM),{ref_key:"formRef",ref:b,inline:"","label-width":520,model:d.value,rules:St(vH),size:y.value,disabled:a.value,class:"flex flex-col flex-wrap mt-2 mr-auto ob-align-content-start"},{default:sn((()=>[Mi(St(AP),{label:"ValueType",class:"border shadow-fancy-2 border-zinc-300 rounded-lg px-3"},{default:sn((()=>[Mi(St(MC),{value:d.value.observationValueType,"onUpdate:value":[r[0]||(r[0]=e=>d.value.observationValueType=e),f],options:St(mH),class:"w-full md:w-96"},null,8,["value","options"])])),_:1}),"valueQuantity"===d.value.observationValueType?(gi(),wi("div",EH,[Mi(St(AP),{label:"Value",path:"observation.value.valueQuantity.value"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueQuantity.value,"onUpdate:value":r[1]||(r[1]=e=>d.value.observation.value.valueQuantity.value=e),placeholder:"Numerical value (with implicit precision)"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit",path:"observation.value.valueQuantity.unit"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueQuantity.unit,"onUpdate:value":r[2]||(r[2]=e=>d.value.observation.value.valueQuantity.unit=e),placeholder:"Unit representation"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit Code",path:"observation.value.valueQuantity.code"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueQuantity.code,"onUpdate:value":r[3]||(r[3]=e=>d.value.observation.value.valueQuantity.code=e),placeholder:"Coded form of the unit"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit System",path:"observation.value.valueQuantity.system"},{default:sn((()=>[Mi(St(ix),{value:d.value.observation.value.valueQuantity.system,"onUpdate:value":r[4]||(r[4]=e=>d.value.observation.value.valueQuantity.system=e),placeholder:"System that defines coded unit form",options:St(v),append:!1},null,8,["value","options"])])),_:1}),Mi(St(AP),{label:"Comparator (Optional)",path:"observation.value.valueQuantity.comparator"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueQuantity.comparator,"onUpdate:value":r[5]||(r[5]=e=>d.value.observation.value.valueQuantity.comparator=e),placeholder:"< | <= | >= | >"},null,8,["value"])])),_:1})])):Fi("",!0),"valueCodeableConcept"!==d.value.observationValueType||n.filledData?Fi("",!0):(gi(),wi("div",MH,[Mi(St(vM),{value:d.value.observation.value.valueCodeableConcept.coding,"onUpdate:value":r[6]||(r[6]=e=>d.value.observation.value.valueCodeableConcept.coding=e),"on-create":A},{"create-button-default":sn((()=>[Ti(" Add whatever you want ")])),default:sn((({value:e})=>[Ei("div",PH,[Mi(St(AP),{label:"Code"},{default:sn((()=>[Mi(St(ex),{value:e.code,"onUpdate:value":t=>e.code=t,type:"text",placeholder:"code"},null,8,["value","onUpdate:value"])])),_:2},1024),Mi(St(AP),{label:"System",class:"ml-2"},{default:sn((()=>[Mi(St(ex),{value:e.system,"onUpdate:value":t=>e.system=t,type:"text",placeholder:"system for code"},null,8,["value","onUpdate:value"])])),_:2},1024),Mi(St(AP),{label:"Display (Optional)",class:"ml-2"},{default:sn((()=>[Mi(St(ex),{value:e.display,"onUpdate:value":t=>e.display=t,type:"text",placeholder:"discription"},null,8,["value","onUpdate:value"])])),_:2},1024)])])),_:1},8,["value"]),Mi(St(AP),{label:"Text"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueCodeableConcept.text,"onUpdate:value":r[7]||(r[7]=e=>d.value.observation.value.valueCodeableConcept.text=e),type:"text"},null,8,["value"])])),_:1})])),"valueCodeableConcept"!==d.value.observationValueType||!n.filledData||!l.value?Fi("",!0):(gi(),wi("div",TH,[(gi(!0),wi(di,null,Pn(d.value.observation.value.valueCodeableConcept.coding,(e=>(gi(),wi("div",{style:{display:"flex","align-items":"center",width:"100%"},key:St(BH)()},[Mi(St(AP),{label:"Code"},{default:sn((()=>[Mi(St(ex),{value:e.code,"onUpdate:value":t=>e.code=t,type:"text"},null,8,["value","onUpdate:value"])])),_:2},1024),Mi(St(AP),{label:"System",class:"ml-2"},{default:sn((()=>[Mi(St(ex),{value:e.system,"onUpdate:value":t=>e.system=t,type:"text"},null,8,["value","onUpdate:value"])])),_:2},1024),Mi(St(AP),{label:"Display (Optional)",class:"ml-2"},{default:sn((()=>[Mi(St(ex),{value:e.display,"onUpdate:value":t=>e.display=t,type:"text"},null,8,["value","onUpdate:value"])])),_:2},1024)])))),128)),Mi(St(AP),{label:"Text"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueCodeableConcept.text,"onUpdate:value":r[8]||(r[8]=e=>d.value.observation.value.valueCodeableConcept.text=e),type:"text"},null,8,["value"])])),_:1})])),"valueString"===d.value.observationValueType?(gi(),wi("div",DH,[Mi(St(AP),{label:"Value",path:"observation.value.valueString"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueString,"onUpdate:value":r[9]||(r[9]=e=>d.value.observation.value.valueString=e),placeholder:"String value",type:"text"},null,8,["value"])])),_:1})])):Fi("",!0),"valueBoolean"===d.value.observationValueType?(gi(),wi("div",FH,[Mi(St(AP),{label:"Value",path:"observation.value.valueBoolean"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueBoolean,"onUpdate:value":r[10]||(r[10]=e=>d.value.observation.value.valueBoolean=e),placeholder:"Boolean value"},null,8,["value"])])),_:1})])):Fi("",!0),"valueRange"===d.value.observationValueType?(gi(),wi("div",IH,[Mi(St(AP),{label:"Low Value",path:"observation.value.valueRange.low"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRange.low,"onUpdate:value":r[11]||(r[11]=e=>d.value.observation.value.valueRange.low=e),placeholder:"Number value"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"High Value",path:"observation.value.valueRange.high"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRange.high,"onUpdate:value":r[12]||(r[12]=e=>d.value.observation.value.valueRange.high=e),placeholder:"Number value"},null,8,["value"])])),_:1})])):Fi("",!0),"valueRatio"===d.value.observationValueType?(gi(),wi("div",kH,[Mi(St(pD),{"default-value":"numerator",size:"large","justify-content":"space-evenly"},{default:sn((()=>[Mi(St(uD),{name:"numerator",tab:"Ratio numerator"},{default:sn((()=>[Mi(St(AP),{label:"Value",path:"observation.value.valueRatio.numerator.value"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRatio.numerator.value,"onUpdate:value":r[13]||(r[13]=e=>d.value.observation.value.valueRatio.numerator.value=e),placeholder:"Numerical value (with implicit precision)"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit",path:"observation.value.valueRatio.numerator.unit"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRatio.numerator.unit,"onUpdate:value":r[14]||(r[14]=e=>d.value.observation.value.valueRatio.numerator.unit=e),placeholder:"Unit representation"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit Code",path:"observation.value.valueRatio.numerator.code"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRatio.numerator.code,"onUpdate:value":r[15]||(r[15]=e=>d.value.observation.value.valueRatio.numerator.code=e),placeholder:"Coded form of the unit"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit System",path:"observation.value.valueRatio.numerator.system"},{default:sn((()=>[Mi(St(ix),{value:d.value.observation.value.valueRatio.numerator.system,"onUpdate:value":r[16]||(r[16]=e=>d.value.observation.value.valueRatio.numerator.system=e),placeholder:"System that defines coded unit form",options:St(v),append:!1},null,8,["value","options"])])),_:1}),Mi(St(AP),{label:"Comparator (Optional)",path:"observation.value.valueRatio.numerator.comparator"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRatio.numerator.comparator,"onUpdate:value":r[17]||(r[17]=e=>d.value.observation.value.valueRatio.numerator.comparator=e),placeholder:"< | <= | >= | >"},null,8,["value"])])),_:1})])),_:1}),Mi(St(uD),{name:"denominator",tab:"Ratio denominator"},{default:sn((()=>[Mi(St(AP),{label:"Value",path:"observation.value.valueRatio.denominator.value"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRatio.denominator.value,"onUpdate:value":r[18]||(r[18]=e=>d.value.observation.value.valueRatio.denominator.value=e),placeholder:"Numerical value (with implicit precision)"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit",path:"observation.value.valueRatio.denominator.unit"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRatio.denominator.unit,"onUpdate:value":r[19]||(r[19]=e=>d.value.observation.value.valueRatio.denominator.unit=e),placeholder:"Unit representation"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit Code",path:"observation.value.valueRatio.denominator.code"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRatio.denominator.code,"onUpdate:value":r[20]||(r[20]=e=>d.value.observation.value.valueRatio.denominator.code=e),placeholder:"Coded form of the unit"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Unit System",path:"observation.value.valueRatio.denominator.system"},{default:sn((()=>[Mi(St(ix),{value:d.value.observation.value.valueRatio.denominator.system,"onUpdate:value":r[21]||(r[21]=e=>d.value.observation.value.valueRatio.denominator.system=e),placeholder:"System that defines coded unit form",options:St(v),append:!1},null,8,["value","options"])])),_:1}),Mi(St(AP),{label:"Comparator (Optional)",path:"observation.value.valueQuantity.comparator"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueRatio.denominator.comparator,"onUpdate:value":r[22]||(r[22]=e=>d.value.observation.value.valueRatio.denominator.comparator=e),placeholder:"< | <= | >= | >"},null,8,["value"])])),_:1})])),_:1})])),_:1})])):Fi("",!0),"valueSampledData"===d.value.observationValueType?(gi(),wi("div",OH,[Mi(St(AP),{label:"Origin",path:"observation.value.valueSampledData.origin"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueSampledData.origin,"onUpdate:value":r[23]||(r[23]=e=>d.value.observation.value.valueSampledData.origin=e),placeholder:"Zero value and units"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Period",path:"observation.value.valueSampledData.period"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueSampledData.period,"onUpdate:value":r[24]||(r[24]=e=>d.value.observation.value.valueSampledData.period=e),placeholder:"Number of milliseconds between samples"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Factor (Optional)",path:"observation.value.valueSampledData.factor"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueSampledData.factor,"onUpdate:value":r[25]||(r[25]=e=>d.value.observation.value.valueSampledData.factor=e),placeholder:"Multiply data by this before adding to origin"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Lower Limit (Optional)",path:"observation.value.valueSampledData.lowerLimit"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueSampledData.lowerLimit,"onUpdate:value":r[26]||(r[26]=e=>d.value.observation.value.valueSampledData.lowerLimit=e),placeholder:"Lower limit of detection"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Upper Limit (Optional)",path:"observation.value.valueSampledData.upperLimit"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueSampledData.upperLimit,"onUpdate:value":r[27]||(r[27]=e=>d.value.observation.value.valueSampledData.upperLimit=e),placeholder:"Upper limit of detection"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Dimensions",path:"observation.value.valueSampledData.dimensions"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueSampledData.dimensions,"onUpdate:value":r[28]||(r[28]=e=>d.value.observation.value.valueSampledData.dimensions=e),placeholder:"Number of sample points at each time point"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Data (Optional)",path:"observation.value.valueSampledData.data"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.value.valueSampledData.data,"onUpdate:value":r[29]||(r[29]=e=>d.value.observation.value.valueSampledData.data=e),placeholder:"Decimal values with spaces, or `E` | `U` | `L`"},null,8,["value"])])),_:1})])):Fi("",!0),"valueTime"===d.value.observationValueType?(gi(),wi("div",LH,[Mi(St(AP),{label:"Date",path:"observation.value.valueTime"},{default:sn((()=>[Mi(St(qE),{"formatted-value":d.value.observation.value.valueTime,"onUpdate:formattedValue":r[30]||(r[30]=e=>d.value.observation.value.valueTime=e),"value-format":"yyyy-MM-dd",type:"date",clearable:""},null,8,["formatted-value"])])),_:1})])):Fi("",!0),"valueDateTime"===d.value.observationValueType?(gi(),wi("div",RH,[Mi(St(AP),{label:"DateTime",path:"observation.value.valueDateTime"},{default:sn((()=>[Mi(St(qE),{"formatted-value":d.value.observation.value.valueDateTime,"onUpdate:formattedValue":r[31]||(r[31]=e=>d.value.observation.value.valueDateTime=e),"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",clearable:""},null,8,["formatted-value"])])),_:1})])):Fi("",!0),"valuePeriod"===d.value.observationValueType?(gi(),wi("div",UH,[Mi(St(qE),{value:c.value,"onUpdate:value":r[32]||(r[32]=e=>c.value=e),disabled:e.disabled,type:"datetimerange",onBlur:h,onConfirm:p},null,8,["value","disabled"])])):Fi("",!0),Ei("div",zH,[Mi(St(AP),{label:"Observation Code",path:"observation.code"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.code,"onUpdate:value":r[33]||(r[33]=e=>d.value.observation.code=e),placeholder:"code for observation"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Display",path:"observation.display"},{default:sn((()=>[Mi(St(ex),{value:d.value.observation.display,"onUpdate:value":r[34]||(r[34]=e=>d.value.observation.display=e),placeholder:"display for observation code"},null,8,["value"])])),_:1}),Mi(St(AP),{label:"Observation Code System",path:"observation.codeSystem"},{default:sn((()=>[Mi(St(ix),{value:d.value.observation.codeSystem,"onUpdate:value":r[35]||(r[35]=e=>d.value.observation.codeSystem=e),placeholder:"Input code system",options:St(g),append:!1},null,8,["value","options"])])),_:1})])])),_:1},8,["model","rules","size","disabled"]),Mi(St(Bx),{onClick:w,class:V(["md:my-auto md:ml-10 my-3 rounded-md",a.value?"shadow-fancy-3":"shadow-fancy-4"]),strong:"",color:s.value},{icon:sn((()=>[Mi(St(PS),null,{default:sn((()=>[a.value?(gi(),xi(St(o),{key:1})):(gi(),xi(St(i),{key:0}))])),_:1})])),_:1},8,["class","color"])]))}}),jH=Dn({__name:"Observation",props:{formDescription:Object,patients:{type:Array,default:()=>[]}},setup(e,{emit:t}){const n=e,r=t,i=bt(!0),o=bt([]),a=eo((()=>[...new Set(o.value)]));Ir((()=>n.patients),(e=>{e.length>0&&l()})),vn((()=>{n.formDescription&&l()}));const s=e=>{"add"===e.operation?e.belongTo.forEach((t=>{const r=n.formDescription.patients.findIndex((e=>e.name===t));n.formDescription.patients[r].observations.push(e)})):"remove"===e.operation&&e.belongTo.forEach((t=>{const r=n.formDescription.patients.findIndex((e=>e.name===t));n.formDescription.patients[r].observations=n.formDescription.patients[r].observations.filter((t=>JSON.stringify(t.observation)!==JSON.stringify(e.observation)))})),l(),r("updateObservation",n.formDescription)},l=()=>{if(i.value=!1,o.value=[],1===n.patients.length)n.formDescription.patients.forEach((e=>{n.patients.includes(e.name)&&e.observations.forEach((e=>{o.value.push(JSON.stringify(Object.assign(e.observation,{observationValueType:e.observationValueType})))}))}));else if(n.patients.length>1){let e=[];n.formDescription.patients.forEach((t=>{n.patients.includes(t.name)&&e.push(t.observations)})),o.value=e.reduce(((e,t)=>e.filter((e=>t.map((e=>JSON.stringify(e.observation))).includes(JSON.stringify(e.observation)))))).map((e=>JSON.stringify(Object.assign(e.observation,{observationValueType:e.observationValueType}))))}else o.value=[];i.value=!0};return(t,n)=>(gi(),wi("div",null,[Mi(NH,{belongTo:e.patients,onUpdateObservation:s},null,8,["belongTo"]),i.value?(gi(!0),wi(di,{key:0},Pn(a.value,(t=>(gi(),xi(NH,{key:St(BH)(),belongTo:e.patients,selectedObservationValueType:JSON.parse(t).observationValueType,filledData:JSON.parse(t),disabled:"",onUpdateObservation:s},null,8,["belongTo","selectedObservationValueType","filledData"])))),128)):Fi("",!0)]))}}),HH={class:"my-2 py-1 bg-stone-50 rounded-md border-solid border-2 border-zinc-300 shadow-md"},QH={class:"flex flex-row justify-start px-2 pb-2"},VH=Dn({__name:"ImagingStudySeries",props:{patient:String,patientDirectoryHandle:Object,selectedSamples:{type:Array,default:()=>[]},selectedPatientsSamples:{type:Object,required:!0}},emits:["update:selectedPatientsSamples"],setup(e,{emit:t}){const n=e,r=bt([]),i=bt([]),o=t;vn((()=>{i.value=n.patientDirectoryHandle?n.patientDirectoryHandle.children.map((e=>({label:e.name,value:e.name}))):[],r.value=[...n.selectedSamples],0===r.value.length&&s()}));const a=e=>{n.selectedPatientsSamples[n.patient]=e.map((e=>e.toString())),o("update:selectedPatientsSamples",n.selectedPatientsSamples)},s=()=>{var e;null==(e=n.patientDirectoryHandle)||e.children.forEach((async e=>{if("directory"===e.kind)for(const t of e.children)if("file"===t.kind)return void l(t).then((t=>{t&&(r.value.push(e.name),a(r.value))}))}))};async function l(e){const t=await e.getFile(),n=new FileReader;return new Promise(((e,r)=>{n.onloadend=()=>{const t=new DataView(n.result),r=t.getUint8(128)==="D".charCodeAt(0)&&t.getUint8(129)==="I".charCodeAt(0)&&t.getUint8(130)==="C".charCodeAt(0)&&t.getUint8(131)==="M".charCodeAt(0);e(r)},n.onerror=r,n.readAsArrayBuffer(t.slice(0,132))}))}return(e,t)=>(gi(),wi("div",HH,[Mi(St(kD),{prefix:"bar","align-text":"",type:"success"},{default:sn((()=>[Mi(St(LD),{type:"info",class:"pl-3"},{default:sn((()=>[Ti(" Please select MRI samples for the patient: "),Mi(St(LD),{class:"pl-3",type:"error"},{default:sn((()=>[Ti(K(n.patient),1)])),_:1})])),_:1})])),_:1}),Ei("div",QH,[Mi(St(PD),{value:r.value,"onUpdate:value":[t[0]||(t[0]=e=>r.value=e),a],"virtual-scroll":"",options:i.value,"source-filterable":"","target-filterable":""},null,8,["value","options"])])]))}}),WH={class:"generate my-5"};const GH=SR({},[["render",function(e,t){return gi(),wi("button",WH,[In(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-89ca8621"]]),qH={class:"flex flex-col pb-5"},KH=Dn({__name:"ImagingStudy",props:{formDescription:Object,patientsDirectoryHandle:Object,patients:{type:Array,default:()=>[]}},setup(e,{emit:t}){const n=e,r=t,i=VT(),o=bt({});vn((()=>{n.patients.forEach((e=>{u(e)}))})),Ir((()=>n.patients),(e=>{e.forEach((e=>{u(e)}))}));const a=eo((()=>n.patients.length<=3?n.patients:n.patients.slice(0,3))),s=()=>{var e;for(let t in o.value){const a=null==(e=n.formDescription)?void 0:e.patients.findIndex((e=>e.name===t));if(void 0!==a){n.formDescription.patients[a].imagingStudy.series=[];for(let e of o.value[t])l(t,e).then((e=>{n.formDescription.patients[a].imagingStudy.series.push(e),r("updateImagingStudy",n.formDescription)})).catch((t=>{i.error(`The folder ${e} includes non-dcm files. Errors: `+t)}))}}r("updateImagingStudy",n.formDescription)},l=(e,t)=>new Promise(((r,i)=>{var o,a,s,l,u;const d=null==(l=null==(s=null==(a=null==(o=n.patientsDirectoryHandle)?void 0:o.children)?void 0:a.find((t=>t.name===e)))?void 0:s.children)?void 0:l.find((e=>e.name===t)),h=null==(u=null==d?void 0:d.children)?void 0:u.find((e=>e.name.endsWith(".dcm")));hH(h).then((e=>{var n;const o=e.string("x0020000e"),a=e.string("x00180015"),s={uid:o,name:t,endpointUrl:"",numberOfInstances:null==(n=null==d?void 0:d.children)?void 0:n.length,instances:[]};if(a){const e=pH[a];e&&(s.bodySite=e)}c(d).then((e=>{s.instances=e,r(s)})).catch((e=>{i(e)}))})).catch((e=>{i(e)}))})),c=e=>new Promise(((t,n)=>{const r=e.children.map((e=>hH(e)));Promise.all(r).then((e=>{const n=e.map((e=>({uid:e.string("x00080018"),sopClassUid:e.string("x00080016"),sopClassName:AH[e.string("x00080016")],number:e.string("x00200013")})));t(n)})).catch((e=>{n(e)}))})),u=e=>{var t,r,i;const a=null==(t=n.formDescription)?void 0:t.patients.findIndex((t=>t.name===e));void 0===a||(null==(r=n.formDescription)?void 0:r.patients[a].imagingStudy)||(n.formDescription.patients[a].imagingStudy={endpointUrl:"",path:null==(i=n.formDescription)?void 0:i.patients[a].path,series:[]}),o.value[e]||(o.value[e]=d(e))},d=e=>{if(n.formDescription){const t=n.formDescription.patients.findIndex((t=>t.name===e));if(n.formDescription.patients[t].imagingStudy.series.length>=1)return n.formDescription.patients[t].imagingStudy.series.map((e=>e.name))}return[]},h=e=>{var t;return(null==(t=n.patientsDirectoryHandle)?void 0:t.children)?Array.from(n.patientsDirectoryHandle.children).find((t=>t.name===e)):void 0};return(t,n)=>(gi(),wi("div",qH,[(gi(!0),wi(di,null,Pn(e.patients,(e=>(gi(),xi(VH,{key:e,patient:e,"patient-directory-handle":h(e),"selected-samples":o.value[e],"selected-patients-samples":o.value,"onUpdate:selectedPatientsSamples":n[0]||(n[0]=e=>o.value=e)},null,8,["patient","patient-directory-handle","selected-samples","selected-patients-samples"])))),128)),Mi(GH,{onClick:s},{default:sn((()=>[Mi(St(LD),{class:"p-1 text-lg subpixel-antialiased font-semibold text-zinc-900"},{default:sn((()=>[Ti(" Generate "),e.patients.length>1?(gi(),xi(St(LD),{key:0,class:"text-zinc-900"},{default:sn((()=>[Ti("ImagingStudies")])),_:1})):(gi(),xi(St(LD),{key:1,class:"text-zinc-900"},{default:sn((()=>[Ti("ImagingStudy")])),_:1})),Ti(" for selecting patients: "),(gi(!0),wi(di,null,Pn(a.value,((e,t)=>(gi(),xi(St(LD),{key:t,class:"mx-1 text-gray-500"},{default:sn((()=>[Ti(K(e),1)])),_:2},1024)))),128)),e.patients.length>3?(gi(),xi(St(LD),{key:2,class:"mx-1 text-gray-500"},{default:sn((()=>[Ti("...")])),_:1})):Fi("",!0)])),_:1})])),_:1})]))}}),YH={class:"p-3 m-3"},XH={class:"p-3 m-3"},$H={class:"p-3 m-3"},JH={class:"my-1 p-2 rounded-md shadow-fancy-inner"},ZH=Dn({__name:"PrimaryView",setup(e){var t,n;const{root:r}=ZD(XR()),i=OI(),o=kI(),a=bt(i.query.name),s=bt(),l=bt(0),c=bt(0),u=bt("Annotate"),d=bt([]),h=bt(!1),p=bt(!1),A=bt({dataset:{id:"",uuid:"",name:null==(t=r.value)?void 0:t.name,path:"/"},patients:[]}),f=bt({dataset:{id:"",uuid:"",name:null==(n=r.value)?void 0:n.name,path:"/"},patients:[]}),m=bt(!1),g=({focused:e,checked:t})=>{const n={};return t?(n.background="#a1a1aa",e&&(n.boxShadow="0 0 0 2px #a1a1aa40")):(n.background="#38bdf8",e&&(n.boxShadow="0 0 0 2px #38bdf840")),n},v=e=>{"Annotate"===u.value?u.value="Submit":u.value="Annotate"},y=e=>{p.value=!0,setTimeout((()=>{h.value=e,p.value=!1}),1e3)};Ir(h,(e=>{x("imagingstudy")})),vn((()=>{var e;s.value=null==(e=r.value)?void 0:e.children.filter((e=>e.name===a.value))[0],s.value&&s.value.children?s.value.children.forEach((e=>{var t,n;"directory"===e.kind&&(l.value+=e.children.length,f.value.patients.push({id:"",uuid:"",name:e.name,path:(null==(t=r.value)?void 0:t.name)+"/"+e.name,observations:[],imagingStudy:null}),A.value.patients.push({id:"",uuid:"",name:e.name,path:(null==(n=r.value)?void 0:n.name)+"/"+e.name,observations:[],imagingStudy:null}),e.children.forEach((e=>{"directory"===e.kind&&e.children.forEach((e=>{"file"===e.kind&&e.name.endsWith(".dcm")&&(c.value+=1)}))})))})):o.push("/")})),Ir(d,(e=>{e.length>0?e.length===A.value.patients.length&&(m.value=!0):m.value=!1}));const b=e=>{x("observation")},w=e=>{x("imagingstudy")},x=e=>{f.value.patients.forEach((t=>{var n;const r=A.value.patients.findIndex((e=>e.name===t.name));"observation"===e&&(t.observations=[],A.value.patients[r].observations.forEach((e=>{t.observations.push(e.observation)}))),"imagingstudy"===e&&(h.value?t.imagingStudy=A.value.patients[r].imagingStudy:t.imagingStudy={...A.value.patients[r].imagingStudy,series:null==(n=A.value.patients[r].imagingStudy)?void 0:n.series.map((e=>({...e,instances:[]})))})}))},C=e=>{d.value=e?A.value.patients.map((e=>e.name)):[]};return(e,t)=>(gi(),wi(di,null,[Mi(MU,{title:"Measurements Annotator",avatar:St(NR),annotator:u.value,subtitle:"Add clinic descriptions for patients",onUpdateAnnotator:v},{default:sn((()=>{var e;return[Mi(St(JT),{label:"Number of patients",value:null==(e=s.value)?void 0:e.children.length},null,8,["value"]),Mi(St(JT),{label:"Number of samples",value:l.value},null,8,["value"]),Mi(St(JT),{label:"Number of dicoms",value:c.value},null,8,["value"])]})),_:1},8,["avatar","annotator"]),En(Ei("div",null,[Ei("div",YH,[Mi(St(ID),null,{default:sn((()=>[Ti("Select Patients:")])),_:1}),Mi(St(sD),{value:m.value,"onUpdate:value":[t[0]||(t[0]=e=>m.value=e),C]},{checked:sn((()=>[Ti(" Selected All Patients ")])),unchecked:sn((()=>[Ti(" Deselected All Patients ")])),_:1},8,["value"]),Mi(St(cC),{value:d.value,"onUpdate:value":t[1]||(t[1]=e=>d.value=e),class:"flex flex-row flex-wrap justify-start w-full"},{default:sn((()=>{var e;return[(gi(!0),wi(di,null,Pn(null==(e=s.value)?void 0:e.children,((e,t)=>(gi(),xi(St(dC),{key:t,value:e.name,label:e.name,size:"large",class:"checkbox-item"},null,8,["value","label"])))),128))]})),_:1},8,["value"]),Mi(St(uM))])],512),[[Mo,"Annotate"!==u.value]]),En(Ei("div",null,[Ei("div",XH,[Mi(PU,null,{observation:sn((()=>[Mi(St(kD),null,{default:sn((()=>[Ti("Add Observations for selected patients:")])),_:1}),Mi(jH,{patients:d.value,formDescription:A.value,onUpdateObservation:b},null,8,["patients","formDescription"])])),imagingstudy:sn((()=>[Mi(St(kD),null,{default:sn((()=>[Ti("Generating ImagingStudy for selected patients:")])),_:1}),Mi(KH,{patients:d.value,formDescription:A.value,patientsDirectoryHandle:s.value,onUpdateImagingStudy:w},null,8,["patients","formDescription","patientsDirectoryHandle"])])),_:1}),Mi(St(uM))])],512),[[Mo,d.value.length>0&&"Annotate"!==u.value]]),Ei("div",null,[Ei("div",$H,[Mi(St(ID),null,{default:sn((()=>[Ti("Measurements:")])),_:1}),Mi(St(sD),{"rubber-band":!1,"rail-style":g,value:h.value,loading:p.value,"onUpdate:value":y},{checked:sn((()=>[Ti(" Back to Normal Measurements ")])),unchecked:sn((()=>[Ti(" Show Measurements Details ")])),_:1},8,["value","loading"]),Ei("pre",JH,K(JSON.stringify(f.value,null,2)),1)])])],64))}}),eQ=SR(ZH,[["__scopeId","data-v-1ac1c2d0"]]),tQ=Dn({__name:"testaaa",setup(e){const{root:t}=ZD(XR());return(e,n)=>(gi(),wi("div",null," test "+K(St(t)),1))}});var nQ=Object.create,rQ=Object.defineProperty,iQ=Object.getOwnPropertyDescriptor,oQ=Object.getOwnPropertyNames,aQ=Object.getPrototypeOf,sQ=Object.prototype.hasOwnProperty,lQ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),cQ=(e,t,n)=>(n=null!=e?nQ(aQ(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of oQ(t))!sQ.call(e,i)&&i!==n&&rQ(e,i,{get:()=>t[i],enumerable:!(r=iQ(t,i))||r.enumerable});return e})(!t&&e&&e.__esModule?n:rQ(n,"default",{value:e,enumerable:!0}),e)),uQ=(e,t,n)=>(((e,t,n)=>{t in e?rQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),dQ=lQ(((e,t)=>{var n,r;n=e,r=function(){return e.importState=function(t){var n=new e;return n.importState(t),n},e;function e(){return function(e){var t=0,n=0,r=0,i=1;0==e.length&&(e=[+new Date]);var o=function(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}();t=o(" "),n=o(" "),r=o(" ");for(var a=0;a<e.length;a++)(t-=o(e[a]))<0&&(t+=1),(n-=o(e[a]))<0&&(n+=1),(r-=o(e[a]))<0&&(r+=1);o=null;var s=function(){var e=2091639*t+2.3283064365386963e-10*i;return t=n,n=r,r=e-(i=0|e)};return s.next=s,s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.version="Alea 0.9",s.args=e,s.exportState=function(){return[t,n,r,i]},s.importState=function(e){t=+e[0]||0,n=+e[1]||0,r=+e[2]||0,i=+e[3]||0},s}(Array.prototype.slice.call(arguments))}},"object"==typeof e?t.exports=r():"function"==typeof define&&define.amd?define(r):n.Alea=r()})),hQ=lQ(((e,t)=>{var n,r;n=e,r=function(e){e.SVD=function(e,t,n,r,i){if(t=void 0===t||t,n=void 0===n||n,i=1e-64/(r=r||Math.pow(2,-52)),!e)throw new TypeError("Matrix a is not defined");var o,a,s,l,c,u,d,h,p,A,f,m,g=e[0].length,v=e.length;if(v<g)throw new TypeError("Invalid matrix: m < n");for(var y=[],b=[],w=[],x="f"===t?v:g,C=A=d=0;C<v;C++)b[C]=new Array(x).fill(0);for(C=0;C<g;C++)w[C]=new Array(g).fill(0);var S,B=new Array(g).fill(0);for(C=0;C<v;C++)for(o=0;o<g;o++)b[C][o]=e[C][o];for(C=0;C<g;C++){for(y[C]=d,p=0,s=C+1,o=C;o<v;o++)p+=Math.pow(b[o][C],2);if(p<i)d=0;else for(h=(u=b[C][C])*(d=u<0?Math.sqrt(p):-Math.sqrt(p))-p,b[C][C]=u-d,o=s;o<g;o++){for(p=0,a=C;a<v;a++)p+=b[a][C]*b[a][o];for(u=p/h,a=C;a<v;a++)b[a][o]=b[a][o]+u*b[a][C]}for(B[C]=d,p=0,o=s;o<g;o++)p+=Math.pow(b[C][o],2);if(p<i)d=0;else{for(h=(u=b[C][C+1])*(d=u<0?Math.sqrt(p):-Math.sqrt(p))-p,b[C][C+1]=u-d,o=s;o<g;o++)y[o]=b[C][o]/h;for(o=s;o<v;o++){for(p=0,a=s;a<g;a++)p+=b[o][a]*b[C][a];for(a=s;a<g;a++)b[o][a]=b[o][a]+p*y[a]}}A<(f=Math.abs(B[C])+Math.abs(y[C]))&&(A=f)}if(n)for(C=g-1;0<=C;C--){if(0!==d){for(h=b[C][C+1]*d,o=s;o<g;o++)w[o][C]=b[C][o]/h;for(o=s;o<g;o++){for(p=0,a=s;a<g;a++)p+=b[C][a]*w[a][o];for(a=s;a<g;a++)w[a][o]=w[a][o]+p*w[a][C]}}for(o=s;o<g;o++)w[C][o]=0,w[o][C]=0;w[C][C]=1,d=y[C],s=C}if(t){if("f"===t)for(C=g;C<v;C++){for(o=g;o<v;o++)b[C][o]=0;b[C][C]=1}for(C=g-1;0<=C;C--){for(s=C+1,d=B[C],o=s;o<x;o++)b[C][o]=0;if(0!==d){for(h=b[C][C]*d,o=s;o<x;o++){for(p=0,a=s;a<v;a++)p+=b[a][C]*b[a][o];for(u=p/h,a=C;a<v;a++)b[a][o]=b[a][o]+u*b[a][C]}for(o=C;o<v;o++)b[o][C]=b[o][C]/d}else for(o=C;o<v;o++)b[o][C]=0;b[C][C]=b[C][C]+1}}for(r*=A,a=g-1;0<=a;a--)for(var _=0;_<50;_++){for(S=!1,s=a;0<=s;s--){if(Math.abs(y[s])<=r){S=!0;break}if(Math.abs(B[s-1])<=r)break}if(!S)for(c=0,l=s-(p=1),C=s;C<a+1&&(u=p*y[C],y[C]=c*y[C],!(Math.abs(u)<=r));C++)if(d=B[C],B[C]=Math.sqrt(u*u+d*d),c=d/(h=B[C]),p=-u/h,t)for(o=0;o<v;o++)f=b[o][l],m=b[o][C],b[o][l]=f*c+m*p,b[o][C]=-f*p+m*c;if(m=B[a],s===a){if(m<0&&(B[a]=-m,n))for(o=0;o<g;o++)w[o][a]=-w[o][a];break}for(A=B[s],u=(((f=B[a-1])-m)*(f+m)+((d=y[a-1])-(h=y[a]))*(d+h))/(2*h*f),d=Math.sqrt(u*u+1),u=((A-m)*(A+m)+h*(f/(u<0?u-d:u+d)-h))/A,C=s+(p=c=1);C<a+1;C++){if(d=y[C],f=B[C],h=p*d,d*=c,m=Math.sqrt(u*u+h*h),u=A*(c=u/(y[C-1]=m))+d*(p=h/m),d=-A*p+d*c,h=f*p,f*=c,n)for(o=0;o<g;o++)A=w[o][C-1],m=w[o][C],w[o][C-1]=A*c+m*p,w[o][C]=-A*p+m*c;if(m=Math.sqrt(u*u+h*h),u=(c=u/(B[C-1]=m))*d+(p=h/m)*f,A=-p*d+c*f,t)for(o=0;o<v;o++)f=b[o][C-1],m=b[o][C],b[o][C-1]=f*c+m*p,b[o][C]=-f*p+m*c}y[s]=0,y[a]=u,B[a]=A}for(C=0;C<g;C++)B[C]<r&&(B[C]=0);return{u:b,q:B,v:w}},e.VERSION="1.1.1",Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof e&&typeof t<"u"?r(e):"function"==typeof define&&define.amd?define(["exports"],r):r((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})})),pQ=lQ(((e,t)=>{var n,r;n=e,r=function(){var e=function(e,n){if(void 0===e&&(e=[]),void 0===n&&(n=t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function t(e,t){return e<t?-1:e>t?1:0}return e.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},e.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},e.prototype.peek=function(){return this.data[0]},e.prototype._up=function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r},e.prototype._down=function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=t[o],s=o+1;if(s<this.length&&n(t[s],a)<0&&(o=s,a=t[s]),n(a,i)>=0)break;t[e]=a,e=o}t[e]=i},e},"object"==typeof e&&typeof t<"u"?t.exports=r():"function"==typeof define&&define.amd?define(r):(n=n||self).TinyQueue=r()})),AQ=lQ(((e,t)=>{var n=pQ();function r(e,t,r){t=t||1;for(var a,s,l,c,u=0;u<e[0].length;u++){var d=e[0][u];(!u||d[0]<a)&&(a=d[0]),(!u||d[1]<s)&&(s=d[1]),(!u||d[0]>l)&&(l=d[0]),(!u||d[1]>c)&&(c=d[1])}var h=l-a,p=c-s,A=Math.min(h,p),f=A/2;if(0===A){var m=[a,s];return m.distance=0,m}for(var g=new n(void 0,i),v=a;v<l;v+=A)for(var y=s;y<c;y+=A)g.push(new o(v+f,y+f,f,e));var b=function(e){for(var t=0,n=0,r=0,i=e[0],a=0,s=i.length,l=s-1;a<s;l=a++){var c=i[a],u=i[l],d=c[0]*u[1]-u[0]*c[1];n+=(c[0]+u[0])*d,r+=(c[1]+u[1])*d,t+=3*d}return 0===t?new o(i[0][0],i[0][1],0,e):new o(n/t,r/t,0,e)}(e),w=new o(a+h/2,s+p/2,0,e);w.d>b.d&&(b=w);for(g.length;g.length;){var x=g.pop();x.d>b.d&&(b=x),!(x.max-b.d<=t)&&(f=x.h/2,g.push(new o(x.x-f,x.y-f,f,e)),g.push(new o(x.x+f,x.y-f,f,e)),g.push(new o(x.x-f,x.y+f,f,e)),g.push(new o(x.x+f,x.y+f,f,e)),4)}var C=[b.x,b.y];return C.distance=b.d,C}function i(e,t){return t.max-e.max}function o(e,t,n,r){this.x=e,this.y=t,this.h=n,this.d=function(e,t,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var s=n[o],l=0,c=s.length,u=c-1;l<c;u=l++){var d=s[l],h=s[u];d[1]>t!=h[1]>t&&e<(h[0]-d[0])*(t-d[1])/(h[1]-d[1])+d[0]&&(r=!r),i=Math.min(i,a(e,t,d,h))}return 0===i?0:(r?1:-1)*Math.sqrt(i)}(e,t,r),this.max=this.d+this.h*Math.SQRT2}function a(e,t,n,r){var i=n[0],o=n[1],a=r[0]-i,s=r[1]-o;if(0!==a||0!==s){var l=((e-i)*a+(t-o)*s)/(a*a+s*s);l>1?(i=r[0],o=r[1]):l>0&&(i+=a*l,o+=s*l)}return(a=e-i)*a+(s=t-o)*s}n.default&&(n=n.default),t.exports=r,t.exports.default=r})),fQ=lQ(((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)},t.exports=e.default})),mQ=lQ(((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},t.exports=e.default})),gQ=lQ(((e,t)=>{function n(e,t,r,i){this.message=e,this.expected=t,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(n,Error),n.buildMessage=function(e,t){var n,r={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?a(e.parts[t][0])+"-"+a(e.parts[t][1]):a(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function i(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+i(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+i(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+i(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+i(e)}))}function s(e){return r[e.type](e)}return"Expected "+function(e){var t,n,r=new Array(e.length);for(t=0;t<e.length;t++)r[t]=s(e[t]);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+(((n=t)?'"'+o(n)+'"':"end of input")+" found.")},t.exports={SyntaxError:n,parse:function(e,t){t=void 0!==t?t:{};var r,i={},o={svg_path:Ae},a=Ae,s=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t=t.concat.apply(t,e[n]);var r=t[0];return r&&"m"==r.code&&(delete r.relative,r.code="M"),t},l=function(e,t){return function(e,t){if(!t)return[e];for(var n=[e],r=0,i=t.length;r<i;r++)n[r+1]=t[r][1];return n}(e,t)},c=/^[Mm]/,u=ue(["M","m"],!1,!1),d=function(e,t,n){var r=ze(e,[t]);return n&&(r=r.concat(ze("M"==e?"L":"l",n[1]))),r},h=/^[Zz]/,p=ue(["Z","z"],!1,!1),A=function(){return ze("Z")},f=/^[Ll]/,m=ue(["L","l"],!1,!1),g=function(e,t){return ze(e,t)},v=/^[Hh]/,y=ue(["H","h"],!1,!1),b=function(e,t){return ze(e,t.map((function(e){return{x:e}})))},w=/^[Vv]/,x=ue(["V","v"],!1,!1),C=function(e,t){return ze(e,t.map((function(e){return{y:e}})))},S=/^[Cc]/,B=ue(["C","c"],!1,!1),_=function(e,t,n){return{x1:e.x,y1:e.y,x2:t.x,y2:t.y,x:n.x,y:n.y}},E=/^[Ss]/,M=ue(["S","s"],!1,!1),P=function(e,t){return{x2:e.x,y2:e.y,x:t.x,y:t.y}},T=/^[Qq]/,D=ue(["Q","q"],!1,!1),F=function(e,t){return{x1:e.x,y1:e.y,x:t.x,y:t.y}},I=/^[Tt]/,k=ue(["T","t"],!1,!1),O=/^[Aa]/,L=ue(["A","a"],!1,!1),R=function(e,t,n,r,i,o){return{rx:e,ry:t,xAxisRotation:n,largeArc:r,sweep:i,x:o.x,y:o.y}},U=function(e,t){return{x:e,y:t}},z=function(e){return 1*e},N=function(e){return 1*e.join("")},j=/^[01]/,H=ue(["0","1"],!1,!1),Q=function(e){return"1"==e},V=function(){return""},W=",",G=ce(",",!1),q=function(e){return e.join("")},K=".",Y=ce(".",!1),X=/^[eE]/,$=ue(["e","E"],!1,!1),J=/^[+\-]/,Z=ue(["+","-"],!1,!1),ee=/^[0-9]/,te=ue([["0","9"]],!1,!1),ne=function(e){return e.join("")},re=/^[ \t\n\r]/,ie=ue([" ","\t","\n","\r"],!1,!1),oe=0,ae=[{line:1,column:1}],se=0,le=[];if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=o[t.startRule]}function ce(e,t){return{type:"literal",text:e,ignoreCase:t}}function ue(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function de(t){var n,r=ae[t];if(r)return r;for(n=t-1;!ae[n];)n--;for(r={line:(r=ae[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return ae[t]=r,r}function he(e,t){var n=de(e),r=de(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function pe(e){oe<se||(oe>se&&(se=oe,le=[]),le.push(e))}function Ae(){var e,t,n,r,o;for(e=oe,t=[],n=Ie();n!==i;)t.push(n),n=Ie();if(t!==i)if(n=function(){var e,t,n,r,o,a;if(e=oe,t=fe(),t!==i){for(n=[],r=oe,o=[],a=Ie();a!==i;)o.push(a),a=Ie();for(o!==i?(a=fe())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);r!==i;){for(n.push(r),r=oe,o=[],a=Ie();a!==i;)o.push(a),a=Ie();o!==i?(a=fe())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i)}n!==i?e=t=l(t,n):(oe=e,e=i)}else oe=e,e=i;return e}(),n===i&&(n=null),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?e=t=s(n):(oe=e,e=i)}else oe=e,e=i;else oe=e,e=i;return e}function fe(){var t,n,r,o,a,s;if(t=oe,n=function(){var t,n,r,o,a,s,l;if(t=oe,c.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(u)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=Ce())!==i?(a=oe,(s=Ee())===i&&(s=null),s!==i?(l=ge())!==i?a=s=[s,l]:(oe=a,a=i):(oe=a,a=i),a===i&&(a=null),a!==i?t=n=d(n,o,a):(oe=t,t=i)):(oe=t,t=i):(oe=t,t=i)}else oe=t,t=i;return t}(),n!==i){for(r=[],o=oe,a=[],s=Ie();s!==i;)a.push(s),s=Ie();for(a!==i?(s=me())!==i?o=a=[a,s]:(oe=o,o=i):(oe=o,o=i);o!==i;){for(r.push(o),o=oe,a=[],s=Ie();s!==i;)a.push(s),s=Ie();a!==i?(s=me())!==i?o=a=[a,s]:(oe=o,o=i):(oe=o,o=i)}r!==i?t=n=l(n,r):(oe=t,t=i)}else oe=t,t=i;return t}function me(){var t;return(t=function(){var t,n;return t=oe,h.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(p)),n!==i&&(n=A()),t=n,t}())===i&&((t=function(){var t,n,r,o;if(t=oe,f.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(m)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=ge())!==i?t=n=g(n,o):(oe=t,t=i):(oe=t,t=i)}else oe=t,t=i;return t}())===i&&((t=function(){var t,n,r,o;if(t=oe,v.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(y)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=ve())!==i?t=n=b(n,o):(oe=t,t=i):(oe=t,t=i)}else oe=t,t=i;return t}())===i&&((t=function(){var t,n,r,o;if(t=oe,w.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(x)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=ve())!==i?t=n=C(n,o):(oe=t,t=i):(oe=t,t=i)}else oe=t,t=i;return t}())===i&&((t=function(){var t,n,r,o;if(t=oe,S.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(B)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=function(){var e,t,n,r,o,a;if(e=oe,t=ye(),t!==i){for(n=[],r=oe,(o=Ee())===i&&(o=null),o!==i?(a=ye())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);r!==i;)n.push(r),r=oe,(o=Ee())===i&&(o=null),o!==i?(a=ye())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);n!==i?e=t=l(t,n):(oe=e,e=i)}else oe=e,e=i;return e}(),o!==i?t=n=g(n,o):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t}())===i&&((t=function(){var t,n,r,o;if(t=oe,E.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(M)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=function(){var e,t,n,r,o,a;if(e=oe,t=be(),t!==i){for(n=[],r=oe,(o=Ee())===i&&(o=null),o!==i?(a=be())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);r!==i;)n.push(r),r=oe,(o=Ee())===i&&(o=null),o!==i?(a=be())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);n!==i?e=t=l(t,n):(oe=e,e=i)}else oe=e,e=i;return e}(),o!==i?t=n=g(n,o):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t}())===i&&((t=function(){var t,n,r,o;if(t=oe,T.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(D)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=function(){var e,t,n,r,o,a;if(e=oe,t=we(),t!==i){for(n=[],r=oe,(o=Ee())===i&&(o=null),o!==i?(a=we())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);r!==i;)n.push(r),r=oe,(o=Ee())===i&&(o=null),o!==i?(a=we())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);n!==i?e=t=l(t,n):(oe=e,e=i)}else oe=e,e=i;return e}(),o!==i?t=n=g(n,o):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t}())===i&&((t=function(){var t,n,r,o;if(t=oe,I.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(k)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=function(){var e,t,n,r,o,a;if(e=oe,t=Ce(),t!==i){for(n=[],r=oe,(o=Ee())===i&&(o=null),o!==i?(a=Ce())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);r!==i;)n.push(r),r=oe,(o=Ee())===i&&(o=null),o!==i?(a=Ce())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);n!==i?e=t=l(t,n):(oe=e,e=i)}else oe=e,e=i;return e}(),o!==i?t=n=g(n,o):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t}())===i&&(t=function(){var t,n,r,o;if(t=oe,O.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(L)),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?(o=function(){var e,t,n,r,o,a;if(e=oe,t=xe(),t!==i){for(n=[],r=oe,(o=Ee())===i&&(o=null),o!==i?(a=xe())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);r!==i;)n.push(r),r=oe,(o=Ee())===i&&(o=null),o!==i?(a=xe())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);n!==i?e=t=l(t,n):(oe=e,e=i)}else oe=e,e=i;return e}(),o!==i?t=n=g(n,o):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t}())))))))),t}function ge(){var e,t,n,r,o,a;if(e=oe,(t=Ce())!==i){for(n=[],r=oe,(o=Ee())===i&&(o=null),o!==i?(a=Ce())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);r!==i;)n.push(r),r=oe,(o=Ee())===i&&(o=null),o!==i?(a=Ce())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);n!==i?e=t=l(t,n):(oe=e,e=i)}else oe=e,e=i;return e}function ve(){var e,t,n,r,o,a;if(e=oe,(t=Be())!==i){for(n=[],r=oe,(o=Ee())===i&&(o=null),o!==i?(a=Be())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);r!==i;)n.push(r),r=oe,(o=Ee())===i&&(o=null),o!==i?(a=Be())!==i?r=o=[o,a]:(oe=r,r=i):(oe=r,r=i);n!==i?e=t=l(t,n):(oe=e,e=i)}else oe=e,e=i;return e}function ye(){var e,t,n,r,o,a;return e=oe,(t=Ce())!==i?((n=Ee())===i&&(n=null),n!==i?(r=Ce())!==i?((o=Ee())===i&&(o=null),o!==i?(a=Ce())!==i?e=t=_(t,r,a):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i),e}function be(){var e,t,n,r;return e=oe,(t=Ce())!==i?((n=Ee())===i&&(n=null),n!==i?(r=Ce())!==i?e=t=P(t,r):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i),e}function we(){var e,t,n,r;return e=oe,(t=Ce())!==i?((n=Ee())===i&&(n=null),n!==i?(r=Ce())!==i?e=t=F(t,r):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i),e}function xe(){var e,t,n,r,o,a,s,l,c,u,d;return e=oe,(t=Se())!==i?((n=Ee())===i&&(n=null),n!==i?(r=Se())!==i?((o=Ee())===i&&(o=null),o!==i?(a=Be())!==i?Ee()!==i?(s=_e())!==i?((l=Ee())===i&&(l=null),l!==i?(c=_e())!==i?((u=Ee())===i&&(u=null),u!==i?(d=Ce())!==i?e=t=R(t,r,a,s,c,d):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i):(oe=e,e=i):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i),e}function Ce(){var e,t,n,r;return e=oe,(t=Be())!==i?((n=Ee())===i&&(n=null),n!==i?(r=Be())!==i?e=t=U(t,r):(oe=e,e=i):(oe=e,e=i)):(oe=e,e=i),e}function Se(){var e;return(e=Pe())===i&&(e=Fe()),e!==i&&(e=z(e)),e}function Be(){var e,t,n;return e=oe,(t=De())===i&&(t=null),t!==i?(n=Pe())!==i?e=t=[t,n]:(oe=e,e=i):(oe=e,e=i),e===i&&(e=oe,(t=De())===i&&(t=null),t!==i?(n=Fe())!==i?e=t=[t,n]:(oe=e,e=i):(oe=e,e=i)),e!==i&&(e=N(e)),e}function _e(){var t;return j.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,pe(H)),t!==i&&(t=Q(t)),t}function Ee(){var e,t,n,r,o;if(e=oe,t=[],(n=Ie())!==i)for(;n!==i;)t.push(n),n=Ie();else t=i;if(t!==i)if((n=Me())===i&&(n=null),n!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?e=t=[t,n,r]:(oe=e,e=i)}else oe=e,e=i;else oe=e,e=i;if(e===i){if(e=oe,t=oe,(n=Me())!==i){for(r=[],o=Ie();o!==i;)r.push(o),o=Ie();r!==i?t=n=[n,r]:(oe=t,t=i)}else oe=t,t=i;t!==i&&(t=V()),e=t}return e}function Me(){var t;return 44===e.charCodeAt(oe)?(t=W,oe++):(t=i,pe(G)),t}function Pe(){var t,n,r;return t=oe,n=function(){var t,n,r,o,a;return t=oe,n=oe,r=Fe(),r===i&&(r=null),r!==i?(46===e.charCodeAt(oe)?(o=K,oe++):(o=i,pe(Y)),o!==i&&(a=Fe())!==i?(r=[r,o,a],n=r):(oe=n,n=i)):(oe=n,n=i),n===i&&(n=oe,r=Fe(),r!==i?(46===e.charCodeAt(oe)?(o=K,oe++):(o=i,pe(Y)),o!==i?(r=[r,o],n=r):(oe=n,n=i)):(oe=n,n=i)),n!==i&&(n=q(n)),t=n,t}(),n!==i?((r=Te())===i&&(r=null),r!==i?t=n=[n,r]:(oe=t,t=i)):(oe=t,t=i),t===i&&(t=oe,(n=Fe())!==i?(r=Te())!==i?t=n=[n,r]:(oe=t,t=i):(oe=t,t=i)),t!==i&&(t=q(t)),t}function Te(){var t,n,r,o;return t=oe,X.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe($)),n!==i?((r=De())===i&&(r=null),r!==i?(o=Fe())!==i?t=n=[n,r,o]:(oe=t,t=i):(oe=t,t=i)):(oe=t,t=i),t!==i&&(t=q(t)),t}function De(){var t;return J.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,pe(Z)),t}function Fe(){var t,n;if(t=[],ee.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(te)),n!==i)for(;n!==i;)t.push(n),ee.test(e.charAt(oe))?(n=e.charAt(oe),oe++):(n=i,pe(te));else t=i;return t!==i&&(t=ne(t)),t}function Ie(){var t;return re.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,pe(ie)),t!==i&&(t=V()),t}var ke,Oe,Le,Re={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Ue in Re)Re[Ue.toUpperCase()]=Re[Ue];function ze(e,t){t||(t=[{}]);for(var n=t.length;n--;){var r={code:e,command:Re[e]};for(var i in e==e.toLowerCase()&&(r.relative=!0),t[n])r[i]=t[n][i];t[n]=r}return t}if((r=a())!==i&&oe===e.length)return r;throw r!==i&&oe<e.length&&pe({type:"end"}),ke=le,Oe=se<e.length?e.charAt(se):null,Le=se<e.length?he(se,se+1):he(se,se),new n(n.buildMessage(ke,Oe),ke,Oe,Le)}}})),vQ=lQ(((e,t)=>{var n=gQ().parse;n.parseSVG=n,n.makeAbsolute=function(e){var t,n={x:0,y:0},r={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return e.forEach((function(e){for(var i in"moveto"===e.command&&(t=e),e.x0=n.x,e.y0=n.y,r)i in e&&(e[i]+=e.relative?e[r[i]]:0);"x"in e||(e.x=n.x),"y"in e||(e.y=n.y),e.relative=!1,e.code=e.code.toUpperCase(),"closepath"==e.command&&(e.x=t.x,e.y=t.y),n=e})),e},t.exports=n})),yQ=lQ(((e,t)=>{t.exports=function(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<3;i++){var o=Number(n[i]),a=Number(r[i]);if(o>a)return 1;if(a>o)return-1;if(!isNaN(o)&&isNaN(a))return 1;if(isNaN(o)&&!isNaN(a))return-1}return 0}})),bQ="149",wQ=0,xQ=1,CQ=2,SQ=3,BQ=0,_Q=1,EQ=2,MQ=1,PQ=2,TQ=3,DQ=0,FQ=1,IQ=2,kQ=0,OQ=1,LQ=2,RQ=3,UQ=4,zQ=5,NQ=100,jQ=101,HQ=102,QQ=103,VQ=104,WQ=200,GQ=201,qQ=202,KQ=203,YQ=204,XQ=205,$Q=206,JQ=207,ZQ=208,eV=209,tV=210,nV=0,rV=1,iV=2,oV=3,aV=4,sV=5,lV=6,cV=7,uV=0,dV=1,hV=2,pV=0,AV=1,fV=2,mV=3,gV=4,vV=5,yV=301,bV=302,wV=303,xV=304,CV=306,SV=1e3,BV=1001,_V=1002,EV=1003,MV=1004,PV=1005,TV=1006,DV=1007,FV=1008,IV=1009,kV=1010,OV=1011,LV=1012,RV=1013,UV=1014,zV=1015,NV=1016,jV=1017,HV=1018,QV=1020,VV=1021,WV=1023,GV=1024,qV=1025,KV=1026,YV=1027,XV=1028,$V=1029,JV=1030,ZV=1031,eW=1033,tW=33776,nW=33777,rW=33778,iW=33779,oW=35840,aW=35841,sW=35842,lW=35843,cW=36196,uW=37492,dW=37496,hW=37808,pW=37809,AW=37810,fW=37811,mW=37812,gW=37813,vW=37814,yW=37815,bW=37816,wW=37817,xW=37818,CW=37819,SW=37820,BW=37821,_W=36492,EW=36283,MW=36284,PW=36285,TW=36286,DW=2202,FW=2300,IW=2301,kW=2302,OW=2400,LW=2401,RW=2402,UW=2500,zW=3e3,NW=3001,jW=3200,HW=3201,QW=0,VW=1,WW="srgb",GW="srgb-linear",qW=7680,KW=35044,YW="300 es",XW=1035,$W=class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}},JW=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ZW=1234567,eG=Math.PI/180,tG=180/Math.PI;function nG(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(JW[255&e]+JW[e>>8&255]+JW[e>>16&255]+JW[e>>24&255]+"-"+JW[255&t]+JW[t>>8&255]+"-"+JW[t>>16&15|64]+JW[t>>24&255]+"-"+JW[63&n|128]+JW[n>>8&255]+"-"+JW[n>>16&255]+JW[n>>24&255]+JW[255&r]+JW[r>>8&255]+JW[r>>16&255]+JW[r>>24&255]).toLowerCase()}function rG(e,t,n){return Math.max(t,Math.min(n,e))}function iG(e,t){return(e%t+t)%t}function oG(e,t,n){return(1-n)*e+n*t}function aG(e){return!(e&e-1)&&0!==e}function sG(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function lG(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function cG(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function uG(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var dG=Object.freeze({__proto__:null,DEG2RAD:eG,RAD2DEG:tG,ceilPowerOfTwo:sG,clamp:rG,damp:function(e,t,n,r){return oG(e,t,1-Math.exp(-n*r))},degToRad:function(e){return e*eG},denormalize:cG,euclideanModulo:iG,floorPowerOfTwo:lG,generateUUID:nG,inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},isPowerOfTwo:aG,lerp:oG,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},normalize:uG,pingpong:function(e,t=1){return t-Math.abs(iG(e,2*t)-t)},radToDeg:function(e){return e*tG},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},seededRandom:function(e){void 0!==e&&(ZW=e);let t=ZW+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},setQuaternionFromProperEuler:function(e,t,n,r,i){let o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),d=o((t-r)/2),h=a((t-r)/2),p=o((r-t)/2),A=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*d,l*h,s*c);break;case"YZY":e.set(l*h,s*u,l*d,s*c);break;case"ZXZ":e.set(l*d,l*h,s*u,s*c);break;case"XZX":e.set(s*u,l*A,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*A,s*c);break;case"ZYZ":e.set(l*A,l*p,s*u,s*c)}},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}}),hG=class{constructor(e=0,t=0){hG.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},pG=class{constructor(){pG.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,o,a,s,l){let c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],A=r[0],f=r[3],m=r[6],g=r[1],v=r[4],y=r[7],b=r[2],w=r[5],x=r[8];return i[0]=o*A+a*g+s*b,i[3]=o*f+a*v+s*w,i[6]=o*m+a*y+s*x,i[1]=l*A+c*g+u*b,i[4]=l*f+c*v+u*w,i[7]=l*m+c*y+u*x,i[2]=d*A+h*g+p*b,i[5]=d*f+h*v+p*w,i[8]=d*m+h*y+p*x,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,d=a*s-c*i,h=l*i-o*s,p=t*u+n*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);let A=1/p;return e[0]=u*A,e[1]=(r*l-c*n)*A,e[2]=(a*n-r*o)*A,e[3]=d*A,e[4]=(c*t-r*s)*A,e[5]=(r*i-a*t)*A,e[6]=h*A,e[7]=(n*s-l*t)*A,e[8]=(o*t-n*i)*A,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){let s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(AG.makeScale(e,t)),this}rotate(e){return this.premultiply(AG.makeRotation(-e)),this}translate(e,t){return this.premultiply(AG.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}},AG=new pG;function fG(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var mG={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function gG(e,t){return new mG[e](t)}function vG(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function yG(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function bG(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var wG={[WW]:{[GW]:yG},[GW]:{[WW]:bG}},xG={legacyMode:!0,get workingColorSpace(){return GW},set workingColorSpace(e){},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(wG[t]&&void 0!==wG[t][n]){let r=wG[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},CG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},SG={r:0,g:0,b:0},BG={h:0,s:0,l:0},_G={h:0,s:0,l:0};function EG(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function MG(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var PG=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=WW){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,xG.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=xG.workingColorSpace){return this.r=e,this.g=t,this.b=n,xG.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=xG.workingColorSpace){if(e=iG(e,1),t=rG(t,0,1),n=rG(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=EG(i,r,e+1/3),this.g=EG(i,r,e),this.b=EG(i,r,e-1/3)}return xG.toWorkingColorSpace(this,r),this}setStyle(e,t=WW){function n(e){void 0!==e&&parseFloat(e)}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e,i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,xG.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,xG.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let r=parseFloat(e[1])/360,i=parseFloat(e[2])/100,o=parseFloat(e[3])/100;return n(e[4]),this.setHSL(r,i,o,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,xG.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,xG.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=WW){let n=CG[e.toLowerCase()];return void 0!==n&&this.setHex(n,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=yG(e.r),this.g=yG(e.g),this.b=yG(e.b),this}copyLinearToSRGB(e){return this.r=bG(e.r),this.g=bG(e.g),this.b=bG(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=WW){return xG.fromWorkingColorSpace(MG(this,SG),e),rG(255*SG.r,0,255)<<16^rG(255*SG.g,0,255)<<8^rG(255*SG.b,0,255)}getHexString(e=WW){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xG.workingColorSpace){xG.fromWorkingColorSpace(MG(this,SG),t);let n,r,i=SG.r,o=SG.g,a=SG.b,s=Math.max(i,o,a),l=Math.min(i,o,a),c=(l+s)/2;if(l===s)n=0,r=0;else{let e=s-l;switch(r=c<=.5?e/(s+l):e/(2-s-l),s){case i:n=(o-a)/e+(o<a?6:0);break;case o:n=(a-i)/e+2;break;case a:n=(i-o)/e+4}n/=6}return e.h=n,e.s=r,e.l=c,e}getRGB(e,t=xG.workingColorSpace){return xG.fromWorkingColorSpace(MG(this,SG),t),e.r=SG.r,e.g=SG.g,e.b=SG.b,e}getStyle(e=WW){return xG.fromWorkingColorSpace(MG(this,SG),e),e!==WW?`color(${e} ${SG.r} ${SG.g} ${SG.b})`:`rgb(${255*SG.r|0},${255*SG.g|0},${255*SG.b|0})`}offsetHSL(e,t,n){return this.getHSL(BG),BG.h+=e,BG.s+=t,BG.l+=n,this.setHSL(BG.h,BG.s,BG.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(BG),e.getHSL(_G);let n=oG(BG.h,_G.h,t),r=oG(BG.s,_G.s,t),i=oG(BG.l,_G.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};PG.NAMES=CG;var TG,DG=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===TG&&(TG=vG("canvas")),TG.width=e.width,TG.height=e.height;let n=TG.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=TG}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=vG("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*yG(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*yG(t[e]/255)):t[e]=yG(t[e]);return{data:t,width:e.width,height:e.height}}return e}},FG=class{constructor(e=null){this.isSource=!0,this.uuid=nG(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(IG(r[t].image)):e.push(IG(r[t]))}else e=IG(r);n.url=e}return t||(e.images[this.uuid]=n),n}};function IG(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?DG.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}var kG=0,OG=class extends $W{constructor(e=OG.DEFAULT_IMAGE,t=OG.DEFAULT_MAPPING,n=BV,r=BV,i=TV,o=FV,a=WV,s=IV,l=OG.DEFAULT_ANISOTROPY,c=zW){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kG++}),this.uuid=nG(),this.name="",this.source=new FG(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new hG(0,0),this.repeat=new hG(1,1),this.center=new hG(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pG,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case SV:e.x=e.x-Math.floor(e.x);break;case BV:e.x=e.x<0?0:1;break;case _V:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case SV:e.y=e.y-Math.floor(e.y);break;case BV:e.y=e.y<0?0:1;break;case _V:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}};OG.DEFAULT_IMAGE=null,OG.DEFAULT_MAPPING=300,OG.DEFAULT_ANISOTROPY=1;var LG=class{constructor(e=0,t=0,n=0,r=1){LG.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i,o=e.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],d=o[9],h=o[2],p=o[6],A=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-h)<.01&&Math.abs(d-p)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+h)<.1&&Math.abs(d+p)<.1&&Math.abs(a+u+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let e=(a+1)/2,o=(u+1)/2,f=(A+1)/2,m=(s+c)/4,g=(l+h)/4,v=(d+p)/4;return e>o&&e>f?e<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=m/n,i=g/n):o>f?o<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=m/r,i=v/r):f<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(f),n=g/i,r=v/i),this.set(n,r,i,t),this}let f=Math.sqrt((p-d)*(p-d)+(l-h)*(l-h)+(c-s)*(c-s));return Math.abs(f)<.001&&(f=1),this.x=(p-d)/f,this.y=(l-h)/f,this.z=(c-s)/f,this.w=Math.acos((a+u+A-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},RG=class extends $W{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new LG(0,0,e,t),this.scissorTest=!1,this.viewport=new LG(0,0,e,t);let r={width:e,height:t,depth:1};this.texture=new OG(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:TV,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new FG(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},UG=class extends OG{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=EV,this.minFilter=EV,this.wrapR=BV,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},zG=class extends RG{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;let i=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=i.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},NG=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3],d=i[o+0],h=i[o+1],p=i[o+2],A=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=A);if(u!==A||s!==d||l!==h||c!==p){let e=1-a,t=s*d+l*h+c*p+u*A,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){let i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}let i=a*n;if(s=s*e+d*i,l=l*e+h*i,c=c*e+p*i,u=u*e+A*i,e===1-a){let e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){let a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],d=i[o+1],h=i[o+2],p=i[o+3];return e[t]=a*p+c*u+s*h-l*d,e[t+1]=s*p+c*d+l*u-a*h,e[t+2]=l*p+c*h+a*d-s*u,e[t+3]=c*p-a*u-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),d=s(n/2),h=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+a+u;if(d>0){let e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){let e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){let e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{let e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rG(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;let s=1-a*a;if(s<=Number.EPSILON){let e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},jG=class{constructor(e=0,t=0,n=0){jG.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(QG.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(QG.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,d=-i*t-o*n-a*r;return this.x=l*s+d*-i+c*-a-u*-o,this.y=c*s+d*-o+u*-i-l*-a,this.z=u*s+d*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return HG.copy(this).projectOnVector(e),this.sub(HG)}reflect(e){return this.sub(HG.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(rG(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},HG=new jG,QG=new NG,VG=class{constructor(e=new jG(1/0,1/0,1/0),t=new jG(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){let l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){let l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=GG.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){let t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)GG.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(GG)}else null===n.boundingBox&&n.computeBoundingBox(),qG.copy(n.boundingBox),qG.applyMatrix4(e.matrixWorld),this.union(qG);let r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,GG),GG.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(eq),tq.subVectors(this.max,eq),KG.subVectors(e.a,eq),YG.subVectors(e.b,eq),XG.subVectors(e.c,eq),$G.subVectors(YG,KG),JG.subVectors(XG,YG),ZG.subVectors(KG,XG);let t=[0,-$G.z,$G.y,0,-JG.z,JG.y,0,-ZG.z,ZG.y,$G.z,0,-$G.x,JG.z,0,-JG.x,ZG.z,0,-ZG.x,-$G.y,$G.x,0,-JG.y,JG.x,0,-ZG.y,ZG.x,0];return!(!iq(t,KG,YG,XG,tq)||(t=[1,0,0,0,1,0,0,0,1],!iq(t,KG,YG,XG,tq)))&&(nq.crossVectors($G,JG),t=[nq.x,nq.y,nq.z],iq(t,KG,YG,XG,tq))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return GG.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(GG).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(WG[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),WG[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),WG[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),WG[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),WG[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),WG[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),WG[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),WG[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(WG)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},WG=[new jG,new jG,new jG,new jG,new jG,new jG,new jG,new jG],GG=new jG,qG=new VG,KG=new jG,YG=new jG,XG=new jG,$G=new jG,JG=new jG,ZG=new jG,eq=new jG,tq=new jG,nq=new jG,rq=new jG;function iq(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){rq.fromArray(e,o);let a=i.x*Math.abs(rq.x)+i.y*Math.abs(rq.y)+i.z*Math.abs(rq.z),s=t.dot(rq),l=n.dot(rq),c=r.dot(rq);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}var oq=new VG,aq=new jG,sq=new jG,lq=class{constructor(e=new jG,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):oq.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;aq.subVectors(e,this.center);let t=aq.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(aq,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(sq.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(aq.copy(e.center).add(sq)),this.expandByPoint(aq.copy(e.center).sub(sq))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}},cq=new jG,uq=new jG,dq=new jG,hq=new jG,pq=new jG,Aq=new jG,fq=new jG,mq=class{constructor(e=new jG,t=new jG(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,cq)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=cq.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(cq.copy(this.direction).multiplyScalar(t).add(this.origin),cq.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){uq.copy(e).add(t).multiplyScalar(.5),dq.copy(t).sub(e).normalize(),hq.copy(this.origin).sub(uq);let i,o,a,s,l=.5*e.distanceTo(t),c=-this.direction.dot(dq),u=hq.dot(this.direction),d=-hq.dot(dq),h=hq.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(i=c*d-u,o=c*u-d,s=l*p,i>=0)if(o>=-s)if(o<=s){let e=1/p;i*=e,o*=e,a=i*(i+c*o+2*u)+o*(c*i+o+2*d)+h}else o=l,i=Math.max(0,-(c*o+u)),a=-i*i+o*(o+2*d)+h;else o=-l,i=Math.max(0,-(c*o+u)),a=-i*i+o*(o+2*d)+h;else o<=-s?(i=Math.max(0,-(-c*l+u)),o=i>0?-l:Math.min(Math.max(-l,-d),l),a=-i*i+o*(o+2*d)+h):o<=s?(i=0,o=Math.min(Math.max(-l,-d),l),a=o*(o+2*d)+h):(i=Math.max(0,-(c*l+u)),o=i>0?l:Math.min(Math.max(-l,-d),l),a=-i*i+o*(o+2*d)+h);else o=c>0?-l:l,i=Math.max(0,-(c*o+u)),a=-i*i+o*(o+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(dq).multiplyScalar(o).add(uq),a}intersectSphere(e,t){cq.subVectors(e.center,this.origin);let n=cq.dot(this.direction),r=cq.dot(cq)-n*n,i=e.radius*e.radius;if(r>i)return null;let o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r||((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||a>r)||((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,cq)}intersectTriangle(e,t,n,r,i){pq.subVectors(t,e),Aq.subVectors(n,e),fq.crossVectors(pq,Aq);let o,a=this.direction.dot(fq);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}hq.subVectors(this.origin,e);let s=o*this.direction.dot(Aq.crossVectors(hq,Aq));if(s<0)return null;let l=o*this.direction.dot(pq.cross(hq));if(l<0||s+l>a)return null;let c=-o*hq.dot(fq);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},gq=class{constructor(){gq.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,o,a,s,l,c,u,d,h,p,A,f){let m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=l,m[6]=c,m[10]=u,m[14]=d,m[3]=h,m[7]=p,m[11]=A,m[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new gq).fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/vq.setFromMatrixColumn(e,0).length(),i=1/vq.setFromMatrixColumn(e,1).length(),o=1/vq.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){let e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){let e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){let e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){let e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){let e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){let e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bq,e,wq)}lookAt(e,t,n){let r=this.elements;return Sq.subVectors(e,t),0===Sq.lengthSq()&&(Sq.z=1),Sq.normalize(),xq.crossVectors(n,Sq),0===xq.lengthSq()&&(1===Math.abs(n.z)?Sq.x+=1e-4:Sq.z+=1e-4,Sq.normalize(),xq.crossVectors(n,Sq)),xq.normalize(),Cq.crossVectors(Sq,xq),r[0]=xq.x,r[4]=Cq.x,r[8]=Sq.x,r[1]=xq.y,r[5]=Cq.y,r[9]=Sq.y,r[2]=xq.z,r[6]=Cq.z,r[10]=Sq.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],A=n[6],f=n[10],m=n[14],g=n[3],v=n[7],y=n[11],b=n[15],w=r[0],x=r[4],C=r[8],S=r[12],B=r[1],_=r[5],E=r[9],M=r[13],P=r[2],T=r[6],D=r[10],F=r[14],I=r[3],k=r[7],O=r[11],L=r[15];return i[0]=o*w+a*B+s*P+l*I,i[4]=o*x+a*_+s*T+l*k,i[8]=o*C+a*E+s*D+l*O,i[12]=o*S+a*M+s*F+l*L,i[1]=c*w+u*B+d*P+h*I,i[5]=c*x+u*_+d*T+h*k,i[9]=c*C+u*E+d*D+h*O,i[13]=c*S+u*M+d*F+h*L,i[2]=p*w+A*B+f*P+m*I,i[6]=p*x+A*_+f*T+m*k,i[10]=p*C+A*E+f*D+m*O,i[14]=p*S+A*M+f*F+m*L,i[3]=g*w+v*B+y*P+b*I,i[7]=g*x+v*_+y*T+b*k,i[11]=g*C+v*E+y*D+b*O,i[15]=g*S+v*M+y*F+b*L,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*s*u-r*l*u-i*a*d+n*l*d+r*a*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*o*d-r*o*h+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*h-i*o*u+n*o*h+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*d+r*o*u-n*o*d+n*s*c)}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],A=e[13],f=e[14],m=e[15],g=u*f*l-A*d*l+A*s*h-a*f*h-u*s*m+a*d*m,v=p*d*l-c*f*l-p*s*h+o*f*h+c*s*m-o*d*m,y=c*A*l-p*u*l+p*a*h-o*A*h-c*a*m+o*u*m,b=p*u*s-c*A*s-p*a*d+o*A*d+c*a*f-o*u*f,w=t*g+n*v+r*y+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let x=1/w;return e[0]=g*x,e[1]=(A*d*i-u*f*i-A*r*h+n*f*h+u*r*m-n*d*m)*x,e[2]=(a*f*i-A*s*i+A*r*l-n*f*l-a*r*m+n*s*m)*x,e[3]=(u*s*i-a*d*i-u*r*l+n*d*l+a*r*h-n*s*h)*x,e[4]=v*x,e[5]=(c*f*i-p*d*i+p*r*h-t*f*h-c*r*m+t*d*m)*x,e[6]=(p*s*i-o*f*i-p*r*l+t*f*l+o*r*m-t*s*m)*x,e[7]=(o*d*i-c*s*i+c*r*l-t*d*l-o*r*h+t*s*h)*x,e[8]=y*x,e[9]=(p*u*i-c*A*i-p*n*h+t*A*h+c*n*m-t*u*m)*x,e[10]=(o*A*i-p*a*i+p*n*l-t*A*l-o*n*m+t*a*m)*x,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*h-t*a*h)*x,e[12]=b*x,e[13]=(c*A*r-p*u*r+p*n*d-t*A*d-c*n*f+t*u*f)*x,e[14]=(p*a*r-o*A*r-p*n*s+t*A*s+o*n*f-t*a*f)*x,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*d+t*a*d)*x,this}scale(e){let t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,d=i*l,h=i*c,p=i*u,A=o*c,f=o*u,m=a*u,g=s*l,v=s*c,y=s*u,b=n.x,w=n.y,x=n.z;return r[0]=(1-(A+m))*b,r[1]=(h+y)*b,r[2]=(p-v)*b,r[3]=0,r[4]=(h-y)*w,r[5]=(1-(d+m))*w,r[6]=(f+g)*w,r[7]=0,r[8]=(p+v)*x,r[9]=(f-g)*x,r[10]=(1-(d+A))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,i=vq.set(r[0],r[1],r[2]).length(),o=vq.set(r[4],r[5],r[6]).length(),a=vq.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],yq.copy(this);let s=1/i,l=1/o,c=1/a;return yq.elements[0]*=s,yq.elements[1]*=s,yq.elements[2]*=s,yq.elements[4]*=l,yq.elements[5]*=l,yq.elements[6]*=l,yq.elements[8]*=c,yq.elements[9]*=c,yq.elements[10]*=c,t.setFromRotationMatrix(yq),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){let a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){let a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,d=(n+r)*l,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},vq=new jG,yq=new gq,bq=new jG(0,0,0),wq=new jG(1,1,1),xq=new jG,Cq=new jG,Sq=new jG,Bq=new gq,_q=new NG,Eq=class{constructor(e=0,t=0,n=0,r=Eq.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(rG(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-rG(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(rG(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-rG(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(rG(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-rG(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,h),this._y=0)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Bq.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Bq,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _q.setFromEuler(this),this.setFromQuaternion(_q,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Eq.DEFAULT_ORDER="XYZ";var Mq=class{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}},Pq=0,Tq=new jG,Dq=new NG,Fq=new gq,Iq=new jG,kq=new jG,Oq=new jG,Lq=new NG,Rq=new jG(1,0,0),Uq=new jG(0,1,0),zq=new jG(0,0,1),Nq={type:"added"},jq={type:"removed"},Hq=class extends $W{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pq++}),this.uuid=nG(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hq.DEFAULT_UP.clone();let e=new jG,t=new Eq,n=new NG,r=new jG(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new gq},normalMatrix:{value:new pG}}),this.matrix=new gq,this.matrixWorld=new gq,this.matrixAutoUpdate=Hq.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Hq.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Mq,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Dq.setFromAxisAngle(e,t),this.quaternion.multiply(Dq),this}rotateOnWorldAxis(e,t){return Dq.setFromAxisAngle(e,t),this.quaternion.premultiply(Dq),this}rotateX(e){return this.rotateOnAxis(Rq,e)}rotateY(e){return this.rotateOnAxis(Uq,e)}rotateZ(e){return this.rotateOnAxis(zq,e)}translateOnAxis(e,t){return Tq.copy(e).applyQuaternion(this.quaternion),this.position.add(Tq.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Rq,e)}translateY(e){return this.translateOnAxis(Uq,e)}translateZ(e){return this.translateOnAxis(zq,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fq.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Iq.copy(e):Iq.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),kq.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fq.lookAt(kq,Iq,this.up):Fq.lookAt(Iq,kq,this.up),this.quaternion.setFromRotationMatrix(Fq),r&&(Fq.extractRotation(r.matrixWorld),Dq.setFromRotationMatrix(Fq),this.quaternion.premultiply(Dq.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this||e&&e.isObject3D&&(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Nq)),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jq)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(jq)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fq.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Fq.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fq),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){let i=this.children[r].getObjectsByProperty(e,t);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kq,e,Oq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kq,Lq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++){let r=t[n];(!0===r.matrixWorldAutoUpdate||!0===e)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++){let n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){let t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){let t=e.children[n];this.add(t.clone())}return this}};Hq.DEFAULT_UP=new jG(0,1,0),Hq.DEFAULT_MATRIX_AUTO_UPDATE=!0,Hq.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Qq=new jG,Vq=new jG,Wq=new jG,Gq=new jG,qq=new jG,Kq=new jG,Yq=new jG,Xq=new jG,$q=new jG,Jq=new jG,Zq=class{constructor(e=new jG,t=new jG,n=new jG){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Qq.subVectors(e,t),r.cross(Qq);let i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Qq.subVectors(r,t),Vq.subVectors(n,t),Wq.subVectors(e,t);let o=Qq.dot(Qq),a=Qq.dot(Vq),s=Qq.dot(Wq),l=Vq.dot(Vq),c=Vq.dot(Wq),u=o*l-a*a;if(0===u)return i.set(-2,-1,-1);let d=1/u,h=(l*s-a*c)*d,p=(o*c-a*s)*d;return i.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Gq),Gq.x>=0&&Gq.y>=0&&Gq.x+Gq.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,Gq),s.set(0,0),s.addScaledVector(i,Gq.x),s.addScaledVector(o,Gq.y),s.addScaledVector(a,Gq.z),s}static isFrontFacing(e,t,n,r){return Qq.subVectors(n,t),Vq.subVectors(e,t),Qq.cross(Vq).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qq.subVectors(this.c,this.b),Vq.subVectors(this.a,this.b),.5*Qq.cross(Vq).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zq.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Zq.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Zq.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Zq.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zq.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,r,i=this.a,o=this.b,a=this.c;qq.subVectors(o,i),Kq.subVectors(a,i),Xq.subVectors(e,i);let s=qq.dot(Xq),l=Kq.dot(Xq);if(s<=0&&l<=0)return t.copy(i);$q.subVectors(e,o);let c=qq.dot($q),u=Kq.dot($q);if(c>=0&&u<=c)return t.copy(o);let d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(qq,n);Jq.subVectors(e,a);let h=qq.dot(Jq),p=Kq.dot(Jq);if(p>=0&&h<=p)return t.copy(a);let A=h*l-s*p;if(A<=0&&l>=0&&p<=0)return r=l/(l-p),t.copy(i).addScaledVector(Kq,r);let f=c*p-h*u;if(f<=0&&u-c>=0&&h-p>=0)return Yq.subVectors(a,o),r=(u-c)/(u-c+(h-p)),t.copy(o).addScaledVector(Yq,r);let m=1/(f+A+d);return n=A*m,r=d*m,t.copy(i).addScaledVector(qq,n).addScaledVector(Kq,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},eK=0,tK=class extends $W{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:eK++}),this.uuid=nG(),this.name="",this.type="Material",this.blending=OQ,this.side=DQ,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=YQ,this.blendDst=XQ,this.blendEquation=NQ,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=oV,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qW,this.stencilZFail=qW,this.stencilZPass=qW,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n)continue;let r=this[t];void 0!==r&&(r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n)}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==OQ&&(n.blending=this.blending),this.side!==DQ&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}},nK=class extends tK{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new PG(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=uV,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},rK=new jG,iK=new hG,oK=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=KW,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)iK.fromBufferAttribute(this,t),iK.applyMatrix3(e),this.setXY(t,iK.x,iK.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)rK.fromBufferAttribute(this,t),rK.applyMatrix3(e),this.setXYZ(t,rK.x,rK.y,rK.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)rK.fromBufferAttribute(this,t),rK.applyMatrix4(e),this.setXYZ(t,rK.x,rK.y,rK.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)rK.fromBufferAttribute(this,t),rK.applyNormalMatrix(e),this.setXYZ(t,rK.x,rK.y,rK.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)rK.fromBufferAttribute(this,t),rK.transformDirection(e),this.setXYZ(t,rK.x,rK.y,rK.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=cG(t,this.array)),t}setX(e,t){return this.normalized&&(t=uG(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=cG(t,this.array)),t}setY(e,t){return this.normalized&&(t=uG(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=cG(t,this.array)),t}setZ(e,t){return this.normalized&&(t=uG(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=cG(t,this.array)),t}setW(e,t){return this.normalized&&(t=uG(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=uG(t,this.array),n=uG(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=uG(t,this.array),n=uG(n,this.array),r=uG(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=uG(t,this.array),n=uG(n,this.array),r=uG(r,this.array),i=uG(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==KW&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){}copyVector2sArray(){}copyVector3sArray(){}copyVector4sArray(){}},aK=class extends oK{constructor(e,t,n){super(new Uint16Array(e),t,n)}},sK=class extends oK{constructor(e,t,n){super(new Uint32Array(e),t,n)}},lK=class extends oK{constructor(e,t,n){super(new Float32Array(e),t,n)}},cK=0,uK=new gq,dK=new Hq,hK=new jG,pK=new VG,AK=new VG,fK=new jG,mK=class extends $W{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cK++}),this.uuid=nG(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(fG(e)?sK:aK)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=(new pG).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return uK.makeRotationFromQuaternion(e),this.applyMatrix4(uK),this}rotateX(e){return uK.makeRotationX(e),this.applyMatrix4(uK),this}rotateY(e){return uK.makeRotationY(e),this.applyMatrix4(uK),this}rotateZ(e){return uK.makeRotationZ(e),this.applyMatrix4(uK),this}translate(e,t,n){return uK.makeTranslation(e,t,n),this.applyMatrix4(uK),this}scale(e,t,n){return uK.makeScale(e,t,n),this.applyMatrix4(uK),this}lookAt(e){return dK.lookAt(e),dK.updateMatrix(),this.applyMatrix4(dK.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(hK).negate(),this.translate(hK.x,hK.y,hK.z),this}setFromPoints(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new lK(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new VG);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingBox.set(new jG(-1/0,-1/0,-1/0),new jG(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];pK.setFromBufferAttribute(n),this.morphTargetsRelative?(fK.addVectors(this.boundingBox.min,pK.min),this.boundingBox.expandByPoint(fK),fK.addVectors(this.boundingBox.max,pK.max),this.boundingBox.expandByPoint(fK)):(this.boundingBox.expandByPoint(pK.min),this.boundingBox.expandByPoint(pK.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new lq);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingSphere.set(new jG,1/0);else if(e){let n=this.boundingSphere.center;if(pK.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){let n=t[e];AK.setFromBufferAttribute(n),this.morphTargetsRelative?(fK.addVectors(pK.min,AK.min),pK.expandByPoint(fK),fK.addVectors(pK.max,AK.max),pK.expandByPoint(fK)):(pK.expandByPoint(AK.min),pK.expandByPoint(AK.max))}pK.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)fK.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(fK));if(t)for(let i=0,o=t.length;i<o;i++){let o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)fK.fromBufferAttribute(o,t),a&&(hK.fromBufferAttribute(e,t),fK.add(hK)),r=Math.max(r,n.distanceToSquared(fK))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return;let n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new oK(new Float32Array(4*a),4));let s=this.getAttribute("tangent").array,l=[],c=[];for(let B=0;B<a;B++)l[B]=new jG,c[B]=new jG;let u=new jG,d=new jG,h=new jG,p=new hG,A=new hG,f=new hG,m=new jG,g=new jG;function v(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),p.fromArray(o,2*e),A.fromArray(o,2*t),f.fromArray(o,2*n),d.sub(u),h.sub(u),A.sub(p),f.sub(p);let i=1/(A.x*f.y-f.x*A.y);!isFinite(i)||(m.copy(d).multiplyScalar(f.y).addScaledVector(h,-A.y).multiplyScalar(i),g.copy(h).multiplyScalar(A.x).addScaledVector(d,-f.x).multiplyScalar(i),l[e].add(m),l[t].add(m),l[n].add(m),c[e].add(g),c[t].add(g),c[n].add(g))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let B=0,_=y.length;B<_;++B){let e=y[B],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)v(n[r+0],n[r+1],n[r+2])}let b=new jG,w=new jG,x=new jG,C=new jG;function S(e){x.fromArray(i,3*e),C.copy(x);let t=l[e];b.copy(t),b.sub(x.multiplyScalar(x.dot(t))).normalize(),w.crossVectors(C,t);let n=w.dot(c[e])<0?-1:1;s[4*e]=b.x,s[4*e+1]=b.y,s[4*e+2]=b.z,s[4*e+3]=n}for(let B=0,_=y.length;B<_;++B){let e=y[B],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)S(n[r+0]),S(n[r+1]),S(n[r+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new oK(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let r=new jG,i=new jG,o=new jG,a=new jG,s=new jG,l=new jG,c=new jG,u=new jG;if(e)for(let d=0,h=e.count;d<h;d+=3){let h=e.getX(d+0),p=e.getX(d+1),A=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,A),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,h),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,A),a.add(c),s.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(A,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)fK.fromBufferAttribute(e,t),fK.normalize(),e.setXYZ(t,fK.x,fK.y,fK.z)}toNonIndexed(){function e(e,t){let n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r),a=0,s=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new oK(o,r,i)}if(null===this.index)return this;let t=new mK,n=this.index.array,r=this.attributes;for(let a in r){let i=e(r[a],n);t.setAttribute(a,i)}let i=this.morphAttributes;for(let a in i){let r=[],o=i[a];for(let t=0,i=o.length;t<i;t++){let i=e(o[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,s=o.length;a<s;a++){let e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let s in n){let t=n[s];e.data.attributes[s]=t.toJSON(e.data)}let r={},i=!1;for(let s in this.morphAttributes){let t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){let i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let r=e.attributes;for(let l in r){let e=r[l];this.setAttribute(l,e.clone(t))}let i=e.morphAttributes;for(let l in i){let e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,c=o.length;l<c;l++){let e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}let a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());let s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},gK=new gq,vK=new mq,yK=new lq,bK=new jG,wK=new jG,xK=new jG,CK=new jG,SK=new jG,BK=new hG,_K=new hG,EK=new hG,MK=new jG,PK=new jG,TK=class extends Hq{constructor(e=new mK,t=new nK){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(i&&a){SK.set(0,0,0);for(let n=0,r=i.length;n<r;n++){let r=a[n],s=i[n];0!==r&&(CK.fromBufferAttribute(s,e),o?SK.addScaledVector(CK,r):SK.addScaledVector(CK.sub(t),r))}t.add(SK)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),yK.copy(n.boundingSphere),yK.applyMatrix4(i),!1===e.ray.intersectsSphere(yK))||(gK.copy(i).invert(),vK.copy(e.ray).applyMatrix4(gK),null!==n.boundingBox&&!1===vK.intersectsBox(n.boundingBox)))return;let o,a=n.index,s=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.groups,d=n.drawRange;if(null!==a)if(Array.isArray(r))for(let h=0,p=u.length;h<p;h++){let n=u[h],i=r[n.materialIndex];for(let r=Math.max(n.start,d.start),s=Math.min(a.count,Math.min(n.start+n.count,d.start+d.count));r<s;r+=3){let s=a.getX(r),u=a.getX(r+1),d=a.getX(r+2);o=DK(this,i,e,vK,l,c,s,u,d),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){let i=a.getX(n),s=a.getX(n+1),u=a.getX(n+2);o=DK(this,r,e,vK,l,c,i,s,u),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==s)if(Array.isArray(r))for(let h=0,p=u.length;h<p;h++){let n=u[h],i=r[n.materialIndex];for(let r=Math.max(n.start,d.start),a=Math.min(s.count,Math.min(n.start+n.count,d.start+d.count));r<a;r+=3){o=DK(this,i,e,vK,l,c,r,r+1,r+2),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(s.count,d.start+d.count);n<i;n+=3){o=DK(this,r,e,vK,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}};function DK(e,t,n,r,i,o,a,s,l){e.getVertexPosition(a,bK),e.getVertexPosition(s,wK),e.getVertexPosition(l,xK);let c=function(e,t,n,r,i,o,a,s){let l;if(l=t.side===FQ?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side===DQ,s),null===l)return null;PK.copy(s),PK.applyMatrix4(e.matrixWorld);let c=n.ray.origin.distanceTo(PK);return c<n.near||c>n.far?null:{distance:c,point:PK.clone(),object:e}}(e,t,n,r,bK,wK,xK,MK);if(c){i&&(BK.fromBufferAttribute(i,a),_K.fromBufferAttribute(i,s),EK.fromBufferAttribute(i,l),c.uv=Zq.getUV(MK,bK,wK,xK,BK,_K,EK,new hG)),o&&(BK.fromBufferAttribute(o,a),_K.fromBufferAttribute(o,s),EK.fromBufferAttribute(o,l),c.uv2=Zq.getUV(MK,bK,wK,xK,BK,_K,EK,new hG));let e={a:a,b:s,c:l,normal:new jG,materialIndex:0};Zq.getNormal(bK,wK,xK,e.normal),c.face=e}return c}var FK=class extends mK{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};let a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);let s=[],l=[],c=[],u=[],d=0,h=0;function p(e,t,n,r,i,o,p,A,f,m,g){let v=o/f,y=p/m,b=o/2,w=p/2,x=A/2,C=f+1,S=m+1,B=0,_=0,E=new jG;for(let a=0;a<S;a++){let o=a*y-w;for(let s=0;s<C;s++){let d=s*v-b;E[e]=d*r,E[t]=o*i,E[n]=x,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=A>0?1:-1,c.push(E.x,E.y,E.z),u.push(s/f),u.push(1-a/m),B+=1}}for(let a=0;a<m;a++)for(let e=0;e<f;e++){let t=d+e+C*a,n=d+e+C*(a+1),r=d+(e+1)+C*(a+1),i=d+(e+1)+C*a;s.push(t,n,i),s.push(n,r,i),_+=6}a.addGroup(h,_,g),h+=_,d+=B}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new lK(l,3)),this.setAttribute("normal",new lK(c,3)),this.setAttribute("uv",new lK(u,2))}static fromJSON(e){return new FK(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function IK(e){let t={};for(let n in e){t[n]={};for(let r in e[n]){let i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function kK(e){let t={};for(let n=0;n<e.length;n++){let r=IK(e[n]);for(let e in r)t[e]=r[e]}return t}function OK(e){return null===e.getRenderTarget()&&e.outputEncoding===NW?WW:GW}var LK={clone:IK,merge:kK},RK=class extends tK{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=IK(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let n={};for(let r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},UK=class extends Hq{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gq,this.projectionMatrix=new gq,this.projectionMatrixInverse=new gq}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}},zK=class extends UK{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*tG*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*eG*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*tG*Math.atan(Math.tan(.5*eG*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*eG*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){let e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}let a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},NK=-90,jK=class extends Hq{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;let r=new zK(NK,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);let i=new zK(NK,1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);let o=new zK(NK,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);let a=new zK(NK,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);let s=new zK(NK,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);let l=new zK(NK,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();let n=this.renderTarget,[r,i,o,a,s,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=pV,e.xr.enabled=!1;let h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}},HK=class extends OG{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:yV,n,r,i,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},QK=class extends RG{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new HK(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:TV}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new FK(5,5,5),i=new RK({name:"CubemapFromEquirect",uniforms:IK(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:FQ,blending:kQ});i.uniforms.tEquirect.value=t;let o=new TK(r,i),a=t.minFilter;return t.minFilter===FV&&(t.minFilter=TV),new jK(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){let i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}},VK=new jG,WK=new jG,GK=new pG,qK=class{constructor(e=new jG(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=VK.subVectors(n,t).cross(WK.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let n=e.delta(VK),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||GK.getNormalMatrix(e),r=this.coplanarPoint(VK).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}},KK=new lq,YK=new jG,XK=class{constructor(e=new qK,t=new qK,n=new qK,r=new qK,i=new qK,o=new qK){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],p=n[10],A=n[11],f=n[12],m=n[13],g=n[14],v=n[15];return t[0].setComponents(a-r,u-s,A-d,v-f).normalize(),t[1].setComponents(a+r,u+s,A+d,v+f).normalize(),t[2].setComponents(a+i,u+l,A+h,v+m).normalize(),t[3].setComponents(a-i,u-l,A-h,v-m).normalize(),t[4].setComponents(a-o,u-c,A-p,v-g).normalize(),t[5].setComponents(a+o,u+c,A+p,v+g).normalize(),this}intersectsObject(e){let t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),KK.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(KK)}intersectsSprite(e){return KK.center.set(0,0,0),KK.radius=.7071067811865476,KK.applyMatrix4(e.matrixWorld),this.intersectsSphere(KK)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(YK.x=r.normal.x>0?e.max.x:e.min.x,YK.y=r.normal.y>0?e.max.y:e.min.y,YK.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(YK)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}};function $K(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function JK(e,t){let n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);let n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){let e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);let o=r.get(t);void 0===o?r.set(t,function(t,r){let i,o=t.array,a=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,o,a),t.onUploadCallback(),o instanceof Float32Array)i=5126;else if(o instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=5131}else i=5123;else if(o instanceof Int16Array)i=5122;else if(o instanceof Uint32Array)i=5125;else if(o instanceof Int32Array)i=5124;else if(o instanceof Int8Array)i=5120;else if(o instanceof Uint8Array)i=5121;else{if(!(o instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);i=5121}return{buffer:s,type:i,bytesPerElement:o.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){let o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version)}}}var ZK=class extends mK{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,d=t/s,h=[],p=[],A=[],f=[];for(let m=0;m<c;m++){let e=m*d-o;for(let t=0;t<l;t++){let n=t*u-i;p.push(n,-e,0),A.push(0,0,1),f.push(t/a),f.push(1-m/s)}}for(let m=0;m<s;m++)for(let e=0;e<a;e++){let t=e+l*m,n=e+l*(m+1),r=e+1+l*(m+1),i=e+1+l*m;h.push(t,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new lK(p,3)),this.setAttribute("normal",new lK(A,3)),this.setAttribute("uv",new lK(f,2))}static fromJSON(e){return new ZK(e.width,e.height,e.widthSegments,e.heightSegments)}},eY={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},tY={common:{diffuse:{value:new PG(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new pG},uv2Transform:{value:new pG},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new hG(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new PG(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new PG(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pG}},sprite:{diffuse:{value:new PG(16777215)},opacity:{value:1},center:{value:new hG(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pG}}},nY={basic:{uniforms:kK([tY.common,tY.specularmap,tY.envmap,tY.aomap,tY.lightmap,tY.fog]),vertexShader:eY.meshbasic_vert,fragmentShader:eY.meshbasic_frag},lambert:{uniforms:kK([tY.common,tY.specularmap,tY.envmap,tY.aomap,tY.lightmap,tY.emissivemap,tY.bumpmap,tY.normalmap,tY.displacementmap,tY.fog,tY.lights,{emissive:{value:new PG(0)}}]),vertexShader:eY.meshlambert_vert,fragmentShader:eY.meshlambert_frag},phong:{uniforms:kK([tY.common,tY.specularmap,tY.envmap,tY.aomap,tY.lightmap,tY.emissivemap,tY.bumpmap,tY.normalmap,tY.displacementmap,tY.fog,tY.lights,{emissive:{value:new PG(0)},specular:{value:new PG(1118481)},shininess:{value:30}}]),vertexShader:eY.meshphong_vert,fragmentShader:eY.meshphong_frag},standard:{uniforms:kK([tY.common,tY.envmap,tY.aomap,tY.lightmap,tY.emissivemap,tY.bumpmap,tY.normalmap,tY.displacementmap,tY.roughnessmap,tY.metalnessmap,tY.fog,tY.lights,{emissive:{value:new PG(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:eY.meshphysical_vert,fragmentShader:eY.meshphysical_frag},toon:{uniforms:kK([tY.common,tY.aomap,tY.lightmap,tY.emissivemap,tY.bumpmap,tY.normalmap,tY.displacementmap,tY.gradientmap,tY.fog,tY.lights,{emissive:{value:new PG(0)}}]),vertexShader:eY.meshtoon_vert,fragmentShader:eY.meshtoon_frag},matcap:{uniforms:kK([tY.common,tY.bumpmap,tY.normalmap,tY.displacementmap,tY.fog,{matcap:{value:null}}]),vertexShader:eY.meshmatcap_vert,fragmentShader:eY.meshmatcap_frag},points:{uniforms:kK([tY.points,tY.fog]),vertexShader:eY.points_vert,fragmentShader:eY.points_frag},dashed:{uniforms:kK([tY.common,tY.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:eY.linedashed_vert,fragmentShader:eY.linedashed_frag},depth:{uniforms:kK([tY.common,tY.displacementmap]),vertexShader:eY.depth_vert,fragmentShader:eY.depth_frag},normal:{uniforms:kK([tY.common,tY.bumpmap,tY.normalmap,tY.displacementmap,{opacity:{value:1}}]),vertexShader:eY.meshnormal_vert,fragmentShader:eY.meshnormal_frag},sprite:{uniforms:kK([tY.sprite,tY.fog]),vertexShader:eY.sprite_vert,fragmentShader:eY.sprite_frag},background:{uniforms:{uvTransform:{value:new pG},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:eY.background_vert,fragmentShader:eY.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:eY.backgroundCube_vert,fragmentShader:eY.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:eY.cube_vert,fragmentShader:eY.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:eY.equirect_vert,fragmentShader:eY.equirect_frag},distanceRGBA:{uniforms:kK([tY.common,tY.displacementmap,{referencePosition:{value:new jG},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:eY.distanceRGBA_vert,fragmentShader:eY.distanceRGBA_frag},shadow:{uniforms:kK([tY.lights,tY.fog,{color:{value:new PG(0)},opacity:{value:1}}]),vertexShader:eY.shadow_vert,fragmentShader:eY.shadow_frag}};nY.physical={uniforms:kK([nY.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new hG(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new PG(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new hG},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new PG(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new PG(1,1,1)},specularColorMap:{value:null}}]),vertexShader:eY.meshphysical_vert,fragmentShader:eY.meshphysical_frag};var rY={r:0,b:0,g:0};function iY(e,t,n,r,i,o,a){let s,l,c=new PG(0),u=!0===o?0:1,d=null,h=0,p=null;function A(t,n){t.getRGB(rY,OK(e)),r.buffers.color.setClear(rY.r,rY.g,rY.b,n,a)}return{getClearColor:function(){return c},setClearColor:function(e,t=1){c.set(e),u=t,A(c,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,A(c,u)},render:function(r,o){let a=!1,f=!0===o.isScene?o.background:null;f&&f.isTexture&&(f=(o.backgroundBlurriness>0?n:t).get(f));let m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?A(c,u):f&&f.isColor&&(A(f,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.mapping===CV)?(void 0===l&&(l=new TK(new FK(1,1,1),new RK({name:"BackgroundCubeMaterial",uniforms:IK(nY.backgroundCube.uniforms),vertexShader:nY.backgroundCube.vertexShader,fragmentShader:nY.backgroundCube.fragmentShader,side:FQ,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=f,l.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=o.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,l.material.toneMapped=f.encoding!==NW,(d!==f||h!==f.version||p!==e.toneMapping)&&(l.material.needsUpdate=!0,d=f,h=f.version,p=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null)):f&&f.isTexture&&(void 0===s&&(s=new TK(new ZK(2,2),new RK({name:"BackgroundMaterial",uniforms:IK(nY.background.uniforms),vertexShader:nY.background.vertexShader,fragmentShader:nY.background.fragmentShader,side:DQ,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=f,s.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,s.material.toneMapped=f.encoding!==NW,!0===f.matrixAutoUpdate&&f.updateMatrix(),s.material.uniforms.uvTransform.value.copy(f.matrix),(d!==f||h!==f.version||p!==e.toneMapping)&&(s.material.needsUpdate=!0,d=f,h=f.version,p=e.toneMapping),s.layers.enableAll(),r.unshift(s,s.geometry,s.material,0,0,null))}}}function oY(e,t,n,r){let i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=p(null),c=l,u=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function p(e){let t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function A(){let e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,i){let o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){let t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function y(){b(),u=!0,c!==l&&(c=l,d(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,y,b){let w=!1;if(a){let t=function(t,n,i){let a=!0===i.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(y,h,l);c!==t&&(c=t,d(c.object)),w=function(e,t,n,r){let i=c.attributes,o=t.attributes,a=0,s=n.getAttributes();for(let l in s)if(s[l].location>=0){let t=i[l],n=o[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t||t.attribute!==n||n&&t.data!==n.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(i,y,h,b),w&&function(e,t,n,r){let i={},o=t.attributes,a=0,s=n.getAttributes();for(let l in s)if(s[l].location>=0){let t=o[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));let n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,a++}c.attributes=i,c.attributesNum=a,c.index=r}(i,y,h,b)}else{let e=!0===l.wireframe;(c.geometry!==y.id||c.program!==h.id||c.wireframe!==e)&&(c.geometry=y.id,c.program=h.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,34963),(w||u)&&(u=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;A();let l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(let t in c){let r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){let t=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;let c=l.buffer,u=l.type,d=l.bytesPerElement;if(o.isInterleavedBufferAttribute){let n=o.data,l=n.stride,h=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)m(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)f(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,u,t,l*d,(h+a/r.locationSize*e)*d)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)m(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)f(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,u,t,a*d,a/r.locationSize*e*d)}}else if(void 0!==u){let n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}g()}(i,l,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(let e in s){let t=s[e];for(let e in t){let n=t[e];for(let e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;let t=s[e.id];for(let n in t){let e=t[n];for(let t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(let t in s){let n=s[t];if(void 0===n[e.id])continue;let r=n[e.id];for(let e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:A,enableAttribute:f,disableUnusedAttributes:g}}function aY(e,t,n,r){let i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(o)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return;l[c](i,r,a,s),n.update(a,i,s)}}function sY(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(a=s);let l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),A=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=d>0,y=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:A,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?e.getParameter(36183):0}}function lY(e){let t=this,n=null,r=0,i=!1,o=!1,a=new qK,s=new pG,l={value:null,needsUpdate:!1};function c(e,n,r,i){let o=null!==e?e.length:0,c=null;if(0!==o){if(c=l.value,!0!==i||null===c){let t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)a.copy(e[n]).applyMatrix4(i,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,s,u){let d=a.clippingPlanes,h=a.clipIntersection,p=a.clipShadows,A=e.get(a);if(!i||null===d||0===d.length||o&&!p)o?c(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{let e=o?0:r,t=4*e,i=A.clippingState||null;l.value=i,i=c(d,s,t,u);for(let r=0;r!==t;++r)i[r]=n[r];A.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function cY(e){let t=new WeakMap;function n(e,t){return t===wV?e.mapping=yV:t===xV&&(e.mapping=bV),e}function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){let o=i.mapping;if(o===wV||o===xV){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{let o=i.image;if(o&&o.height>0){let a=new QK(o.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}var uY=class extends UK{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}},dY=[.125,.215,.35,.446,.526,.582],hY=20,pY=new uY,AY=new PG,fY=null,mY=(1+Math.sqrt(5))/2,gY=1/mY,vY=[new jG(1,1,1),new jG(-1,1,1),new jG(1,1,-1),new jG(-1,1,-1),new jG(0,mY,gY),new jG(0,mY,-gY),new jG(gY,0,mY),new jG(-gY,0,mY),new jG(mY,gY,0),new jG(-mY,gY,0)],yY=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){fY=this._renderer.getRenderTarget(),this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=CY(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=xY(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(fY),e.scissorTest=!1,wY(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===yV||e.mapping===bV?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),fY=this._renderer.getRenderTarget();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:TV,minFilter:TV,generateMipmaps:!1,type:NV,format:WV,encoding:zW,depthBuffer:!1},r=bY(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=bY(e,t,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],n=[],r=[],i=e,o=e-4+1+dY.length;for(let a=0;a<o;a++){let o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=dY[a-e+4-1]:0===a&&(s=0),r.push(s);let l=1/(o-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,A=3,f=2,m=1,g=new Float32Array(A*p*h),v=new Float32Array(f*p*h),y=new Float32Array(m*p*h);for(let e=0;e<h;e++){let t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,A*p*e),v.set(d,f*p*e);let i=[e,e,e,e,e,e];y.set(i,m*p*e)}let b=new mK;b.setAttribute("position",new oK(g,A)),b.setAttribute("uv",new oK(v,f)),b.setAttribute("faceIndex",new oK(y,m)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){let r=new Float32Array(hY),i=new jG(0,1,0);return new RK({name:"SphericalGaussianBlur",defines:{n:hY,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:SY(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:kQ,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){let t=new TK(this._lodPlanes[0],e);this._renderer.compile(t,pY)}_sceneToCubeUV(e,t,n,r){let i=new zK(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(AY),s.toneMapping=pV,s.autoClear=!1;let u=new nK({name:"PMREM.Background",side:FQ,depthWrite:!1,depthTest:!1}),d=new TK(new FK,u),h=!1,p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy(AY),h=!0);for(let A=0;A<6;A++){let t=A%3;0===t?(i.up.set(0,o[A],0),i.lookAt(a[A],0,0)):1===t?(i.up.set(0,0,o[A]),i.lookAt(0,a[A],0)):(i.up.set(0,o[A],0),i.lookAt(0,0,a[A]));let n=this._cubeSize;wY(r,t*n,A>2?n:0,n,n),s.setRenderTarget(r),h&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=p}_textureToCubeUV(e,t){let n=this._renderer,r=e.mapping===yV||e.mapping===bV;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=CY()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=xY());let i=r?this._cubemapMaterial:this._equirectMaterial,o=new TK(this._lodPlanes[0],i);i.uniforms.envMap.value=e;let a=this._cubeSize;wY(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,pY)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=vY[(r-1)%vY.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){let s=this._renderer,l=this._blurMaterial,c=new TK(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,p=i/h,A=isFinite(i)?1+Math.floor(3*p):hY,f=[],m=0;for(let y=0;y<hY;++y){let e=y/p,t=Math.exp(-e*e/2);f.push(t),0===y?m+=t:y<A&&(m+=2*t)}for(let y=0;y<f.length;y++)f[y]=f[y]/m;u.envMap.value=e.texture,u.samples.value=A,u.weights.value=f,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);let{_lodMax:g}=this;u.dTheta.value=h,u.mipInt.value=g-n;let v=this._sizeLods[r];wY(t,3*v*(r>g-4?r-g+4:0),4*(this._cubeSize-v),3*v,2*v),s.setRenderTarget(t),s.render(c,pY)}};function bY(e,t,n){let r=new RG(e,t,n);return r.texture.mapping=CV,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function wY(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function xY(){return new RK({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:SY(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:kQ,depthTest:!1,depthWrite:!1})}function CY(){return new RK({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:SY(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:kQ,depthTest:!1,depthWrite:!1})}function SY(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function BY(e){let t=new WeakMap,n=null;function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let o=i.mapping,a=o===wV||o===xV,s=o===yV||o===bV;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new yY(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{let o=i.image;if(a&&o&&o.height>0||s&&o&&function(e){let t=0,n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(o)){null===n&&(n=new yY(e));let o=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function _Y(e){let t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){let t=n(e);return t}}}function EY(e,t,n,r){let i={},o=new WeakMap;function a(e){let s=e.target;null!==s.index&&t.remove(s.index);for(let n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];let l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){let n=[],r=e.index,i=e.attributes.position,a=0;if(null!==r){let e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){let r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{let e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){let e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}let s=new(fG(n)?sK:aK)(n,1);s.version=a;let l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){let n=e.attributes;for(let i in n)t.update(n[i],34962);let r=e.morphAttributes;for(let i in r){let e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){let t=o.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function MY(e,t,n,r){let i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(s)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return;u[d](i,l,o,r*a,c),n.update(l,i,c)}}function PY(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e}}}}function TY(e,t){return e[0]-t[0]}function DY(e,t){return Math.abs(t[1])-Math.abs(e[1])}function FY(e,t,n){let r={},i=new Float32Array(8),o=new WeakMap,a=new LG,s=[];for(let l=0;l<8;l++)s[l]=[l,0];return{update:function(l,c,u,d){let h=l.morphTargetInfluences;if(!0===t.isWebGL2){let r=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,i=void 0!==r?r.length:0,s=o.get(c);if(void 0===s||s.count!==i){let e=function(){g.dispose(),o.delete(c),c.removeEventListener("dispose",e)};void 0!==s&&s.texture.dispose();let n=void 0!==c.morphAttributes.position,r=void 0!==c.morphAttributes.normal,l=void 0!==c.morphAttributes.color,u=c.morphAttributes.position||[],d=c.morphAttributes.normal||[],h=c.morphAttributes.color||[],p=0;!0===n&&(p=1),!0===r&&(p=2),!0===l&&(p=3);let A=c.attributes.position.count*p,f=1;A>t.maxTextureSize&&(f=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);let m=new Float32Array(A*f*4*i),g=new UG(m,A,f,i);g.type=zV,g.needsUpdate=!0;let v=4*p;for(let t=0;t<i;t++){let e=u[t],i=d[t],o=h[t],s=A*f*4*t;for(let t=0;t<e.count;t++){let c=t*v;!0===n&&(a.fromBufferAttribute(e,t),m[s+c+0]=a.x,m[s+c+1]=a.y,m[s+c+2]=a.z,m[s+c+3]=0),!0===r&&(a.fromBufferAttribute(i,t),m[s+c+4]=a.x,m[s+c+5]=a.y,m[s+c+6]=a.z,m[s+c+7]=0),!0===l&&(a.fromBufferAttribute(o,t),m[s+c+8]=a.x,m[s+c+9]=a.y,m[s+c+10]=a.z,m[s+c+11]=4===o.itemSize?a.w:1)}}s={count:i,texture:g,size:new hG(A,f)},o.set(c,s),c.addEventListener("dispose",e)}let l=0;for(let e=0;e<h.length;e++)l+=h[e];let u=c.morphTargetsRelative?1:1-l;d.getUniforms().setValue(e,"morphTargetBaseInfluence",u),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",s.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",s.size)}else{let t=void 0===h?0:h.length,n=r[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[c.id]=n}for(let e=0;e<t;e++){let t=n[e];t[0]=e,t[1]=h[e]}n.sort(DY);for(let e=0;e<8;e++)e<t&&n[e][1]?(s[e][0]=n[e][0],s[e][1]=n[e][1]):(s[e][0]=Number.MAX_SAFE_INTEGER,s[e][1]=0);s.sort(TY);let o=c.morphAttributes.position,a=c.morphAttributes.normal,l=0;for(let e=0;e<8;e++){let t=s[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(o&&c.getAttribute("morphTarget"+e)!==o[n]&&c.setAttribute("morphTarget"+e,o[n]),a&&c.getAttribute("morphNormal"+e)!==a[n]&&c.setAttribute("morphNormal"+e,a[n]),i[e]=r,l+=r):(o&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),a&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),i[e]=0)}let u=c.morphTargetsRelative?1:1-l;d.getUniforms().setValue(e,"morphTargetBaseInfluence",u),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function IY(e,t,n,r){let i=new WeakMap;function o(e){let t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){let a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}var kY=new OG,OY=new UG,LY=new class extends OG{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=EV,this.minFilter=EV,this.wrapR=BV,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},RY=new HK,UY=[],zY=[],NY=new Float32Array(16),jY=new Float32Array(9),HY=new Float32Array(4);function QY(e,t,n){let r=e[0];if(r<=0||r>0)return e;let i=t*n,o=UY[i];if(void 0===o&&(o=new Float32Array(i),UY[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function VY(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function WY(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function GY(e,t){let n=zY[t];void 0===n&&(n=new Int32Array(t),zY[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function qY(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function KY(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(VY(n,t))return;e.uniform2fv(this.addr,t),WY(n,t)}}function YY(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(VY(n,t))return;e.uniform3fv(this.addr,t),WY(n,t)}}function XY(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(VY(n,t))return;e.uniform4fv(this.addr,t),WY(n,t)}}function $Y(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(VY(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),WY(n,t)}else{if(VY(n,r))return;HY.set(r),e.uniformMatrix2fv(this.addr,!1,HY),WY(n,r)}}function JY(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(VY(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),WY(n,t)}else{if(VY(n,r))return;jY.set(r),e.uniformMatrix3fv(this.addr,!1,jY),WY(n,r)}}function ZY(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(VY(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),WY(n,t)}else{if(VY(n,r))return;NY.set(r),e.uniformMatrix4fv(this.addr,!1,NY),WY(n,r)}}function eX(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function tX(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(VY(n,t))return;e.uniform2iv(this.addr,t),WY(n,t)}}function nX(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(VY(n,t))return;e.uniform3iv(this.addr,t),WY(n,t)}}function rX(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(VY(n,t))return;e.uniform4iv(this.addr,t),WY(n,t)}}function iX(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function oX(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(VY(n,t))return;e.uniform2uiv(this.addr,t),WY(n,t)}}function aX(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(VY(n,t))return;e.uniform3uiv(this.addr,t),WY(n,t)}}function sX(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(VY(n,t))return;e.uniform4uiv(this.addr,t),WY(n,t)}}function lX(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||kY,i)}function cX(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||LY,i)}function uX(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||RY,i)}function dX(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||OY,i)}function hX(e,t){e.uniform1fv(this.addr,t)}function pX(e,t){let n=QY(t,this.size,2);e.uniform2fv(this.addr,n)}function AX(e,t){let n=QY(t,this.size,3);e.uniform3fv(this.addr,n)}function fX(e,t){let n=QY(t,this.size,4);e.uniform4fv(this.addr,n)}function mX(e,t){let n=QY(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function gX(e,t){let n=QY(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function vX(e,t){let n=QY(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function yX(e,t){e.uniform1iv(this.addr,t)}function bX(e,t){e.uniform2iv(this.addr,t)}function wX(e,t){e.uniform3iv(this.addr,t)}function xX(e,t){e.uniform4iv(this.addr,t)}function CX(e,t){e.uniform1uiv(this.addr,t)}function SX(e,t){e.uniform2uiv(this.addr,t)}function BX(e,t){e.uniform3uiv(this.addr,t)}function _X(e,t){e.uniform4uiv(this.addr,t)}function EX(e,t,n){let r=this.cache,i=t.length,o=GY(n,i);VY(r,o)||(e.uniform1iv(this.addr,o),WY(r,o));for(let a=0;a!==i;++a)n.setTexture2D(t[a]||kY,o[a])}function MX(e,t,n){let r=this.cache,i=t.length,o=GY(n,i);VY(r,o)||(e.uniform1iv(this.addr,o),WY(r,o));for(let a=0;a!==i;++a)n.setTexture3D(t[a]||LY,o[a])}function PX(e,t,n){let r=this.cache,i=t.length,o=GY(n,i);VY(r,o)||(e.uniform1iv(this.addr,o),WY(r,o));for(let a=0;a!==i;++a)n.setTextureCube(t[a]||RY,o[a])}function TX(e,t,n){let r=this.cache,i=t.length,o=GY(n,i);VY(r,o)||(e.uniform1iv(this.addr,o),WY(r,o));for(let a=0;a!==i;++a)n.setTexture2DArray(t[a]||OY,o[a])}var DX=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return qY;case 35664:return KY;case 35665:return YY;case 35666:return XY;case 35674:return $Y;case 35675:return JY;case 35676:return ZY;case 5124:case 35670:return eX;case 35667:case 35671:return tX;case 35668:case 35672:return nX;case 35669:case 35673:return rX;case 5125:return iX;case 36294:return oX;case 36295:return aX;case 36296:return sX;case 35678:case 36198:case 36298:case 36306:case 35682:return lX;case 35679:case 36299:case 36307:return cX;case 35680:case 36300:case 36308:case 36293:return uX;case 36289:case 36303:case 36311:case 36292:return dX}}(t.type)}},FX=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return hX;case 35664:return pX;case 35665:return AX;case 35666:return fX;case 35674:return mX;case 35675:return gX;case 35676:return vX;case 5124:case 35670:return yX;case 35667:case 35671:return bX;case 35668:case 35672:return wX;case 35669:case 35673:return xX;case 5125:return CX;case 36294:return SX;case 36295:return BX;case 36296:return _X;case 35678:case 36198:case 36298:case 36306:case 35682:return EX;case 35679:case 36299:case 36307:return MX;case 35680:case 36300:case 36308:case 36293:return PX;case 36289:case 36303:case 36311:case 36292:return TX}}(t.type)}},IX=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let i=0,o=r.length;i!==o;++i){let o=r[i];o.setValue(e,t[o.id],n)}}},kX=/(\w+)(\])?(\[|\.)?/g;function OX(e,t){e.seq.push(t),e.map[t.id]=t}function LX(e,t,n){let r=e.name,i=r.length;for(kX.lastIndex=0;;){let o=kX.exec(r),a=kX.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){OX(n,void 0===c?new DX(s,e,t):new FX(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new IX(s),OX(n,e)),n=e}}}var RX=class{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){let n=e.getActiveUniform(t,r);LX(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){let i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){let o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,i=e.length;r!==i;++r){let i=e[r];i.id in t&&n.push(i)}return n}};function UX(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var zX=0;function NX(e,t,n){let r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";let o=/ERROR: 0:(\d+)/.exec(i);if(o){let r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=i;a<o;a++){let e=a+1;r.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function jX(e,t){let n=function(e){switch(e){case zW:return["Linear","( value )"];case NW:return["sRGB","( value )"];default:return["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function HX(e,t){let n;switch(t){case AV:n="Linear";break;case fV:n="Reinhard";break;case mV:n="OptimizedCineon";break;case gV:n="ACESFilmic";break;case vV:n="Custom";break;default:n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function QX(e){return""!==e}function VX(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function WX(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var GX=/^[ \t]*#include +<([\w\d./]+)>/gm;function qX(e){return e.replace(GX,KX)}function KX(e,t){let n=eY[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return qX(n)}var YX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XX(e){return e.replace(YX,$X)}function $X(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function JX(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ZX(e,t,n,r){let i,o,a=e.getContext(),s=n.defines,l=n.vertexShader,c=n.fragmentShader,u=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===MQ?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===PQ?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===TQ&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case yV:case bV:t="ENVMAP_TYPE_CUBE";break;case CV:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===bV&&(t="ENVMAP_MODE_REFRACTION");return t}(n),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case uV:t="ENVMAP_BLENDING_MULTIPLY";break;case dV:t="ENVMAP_BLENDING_MIX";break;case hV:t="ENVMAP_BLENDING_ADD"}return t}(n),A=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(QX).join("\n")}(n),m=function(e){let t=[];for(let n in e){let r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=a.createProgram(),v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(i=[m].filter(QX).join("\n"),i.length>0&&(i+="\n"),o=[f,m].filter(QX).join("\n"),o.length>0&&(o+="\n")):(i=[JX(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(QX).join("\n"),o=[f,JX(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",A?"#define CUBEUV_TEXEL_WIDTH "+A.texelWidth:"",A?"#define CUBEUV_TEXEL_HEIGHT "+A.texelHeight:"",A?"#define CUBEUV_MAX_MIP "+A.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==pV?"#define TONE_MAPPING":"",n.toneMapping!==pV?eY.tonemapping_pars_fragment:"",n.toneMapping!==pV?HX("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",eY.encodings_pars_fragment,jX("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(QX).join("\n")),l=qX(l),l=VX(l,n),l=WX(l,n),c=qX(c),c=VX(c,n),c=WX(c,n),l=XX(l),c=XX(c),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,o=["#define varying in",n.glslVersion===YW?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===YW?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);let y,b,w=v+o+c,x=UX(a,35633,v+i+l),C=UX(a,35632,w);if(a.attachShader(g,x),a.attachShader(g,C),void 0!==n.index0AttributeName?a.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(g,0,"position"),a.linkProgram(g),e.debug.checkShaderErrors){let e=a.getProgramInfoLog(g).trim(),t=a.getShaderInfoLog(x).trim(),n=a.getShaderInfoLog(C).trim(),r=!0,s=!0;if(!1===a.getProgramParameter(g,35714)){r=!1;NX(a,x,"vertex"),NX(a,C,"fragment")}else""!==e||(""===t||""===n)&&(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:i},fragmentShader:{log:n,prefix:o}})}return a.deleteShader(x),a.deleteShader(C),this.getUniforms=function(){return void 0===y&&(y=new RX(a,g)),y},this.getAttributes=function(){return void 0===b&&(b=function(e,t){let n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){let r=e.getActiveAttrib(t,i),o=r.name,a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(a,g)),b},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=zX++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=x,this.fragmentShader=C,this}var e$=0,t$=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new n$(e),t.set(e,n)),n}},n$=class{constructor(e){this.id=e$++,this.code=e,this.usedTimes=0}};function r$(e,t,n,r,i,o,a){let s=new Mq,l=new t$,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures,p=i.precision,A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,s,c,f,m){let g=f.fog,v=m.geometry,y=o.isMeshStandardMaterial?f.environment:null,b=(o.isMeshStandardMaterial?n:t).get(o.envMap||y),w=b&&b.mapping===CV?b.image.height:null,x=A[o.type];null!==o.precision&&(p=i.getMaxPrecision(o.precision),o.precision);let C,S,B,_,E=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,M=void 0!==E?E.length:0,P=0;if(void 0!==v.morphAttributes.position&&(P=1),void 0!==v.morphAttributes.normal&&(P=2),void 0!==v.morphAttributes.color&&(P=3),x){let e=nY[x];C=e.vertexShader,S=e.fragmentShader}else C=o.vertexShader,S=o.fragmentShader,l.update(o),B=l.getVertexShaderID(o),_=l.getFragmentShaderID(o);let T=e.getRenderTarget(),D=o.alphaTest>0,F=o.clearcoat>0,I=o.iridescence>0;return{isWebGL2:u,shaderID:x,shaderName:o.type,vertexShader:C,fragmentShader:S,defines:o.defines,customVertexShaderID:B,customFragmentShaderID:_,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:p,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:h,outputEncoding:null===T?e.outputEncoding:!0===T.isXRRenderTarget?T.texture.encoding:zW,map:!!o.map,matcap:!!o.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:w,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===VW,tangentSpaceNormalMap:o.normalMapType===QW,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===NW,clearcoat:F,clearcoatMap:F&&!!o.clearcoatMap,clearcoatRoughnessMap:F&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:F&&!!o.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!o.iridescenceMap,iridescenceThicknessMap:I&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&o.blending===OQ,alphaMap:!!o.alphaMap,alphaTest:D,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!v.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!v.attributes.color&&4===v.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!g,useFog:!0===o.fog,fogExp2:g&&g.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==v.morphAttributes.position,morphNormals:void 0!==v.morphAttributes.normal,morphColors:void 0!==v.morphAttributes.color,morphTargetsCount:M,morphTextureStride:P,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:pV,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===IQ,flipSided:o.side===FQ,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){let n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.physicallyCorrectLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.specularIntensityMap&&s.enable(15),t.specularColorMap&&s.enable(16),t.transmission&&s.enable(17),t.transmissionMap&&s.enable(18),t.thicknessMap&&s.enable(19),t.sheen&&s.enable(20),t.sheenColorMap&&s.enable(21),t.sheenRoughnessMap&&s.enable(22),t.decodeVideoTexture&&s.enable(23),t.opaque&&s.enable(24),e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){let t,n=A[e.type];if(n){let e=nY[n];t=LK.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let r;for(let e=0,i=c.length;e<i;e++){let t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new ZX(e,n,t,o),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){let t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function i$(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function o$(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function a$(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function s$(){let e=[],t=0,n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,c){let u=o(e,t,a,s,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){let u=o(e,t,a,s,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||o$),r.length>1&&r.sort(t||a$),i.length>1&&i.sort(t||a$)}}}function l$(){let e=new WeakMap;return{get:function(t,n){let r,i=e.get(t);return void 0===i?(r=new s$,e.set(t,[r])):n>=i.length?(r=new s$,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function c$(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new jG,color:new PG};break;case"SpotLight":n={position:new jG,direction:new jG,color:new PG,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new jG,color:new PG,distance:0,decay:0};break;case"HemisphereLight":n={direction:new jG,skyColor:new PG,groundColor:new PG};break;case"RectAreaLight":n={color:new PG,position:new jG,halfWidth:new jG,halfHeight:new jG}}return e[t.id]=n,n}}}var u$=0;function d$(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function h$(e,t){let n=new c$,r=function(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hG};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hG,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)i.probe.push(new jG);let o=new jG,a=new gq,s=new gq;return{setup:function(o,a){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,A=0,f=0,m=0,g=0,v=0,y=0;o.sort(d$);let b=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){let t=o[e],a=t.color,w=t.intensity,x=t.distance,C=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*w*b,l+=a.g*w*b,c+=a.b*w*b;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=C,i.directionalShadowMatrix[u]=t.shadow.matrix,f++}i.directional[u]=e,u++}else if(t.isSpotLight){let e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(w*b),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[h]=e;let o=t.shadow;if(t.map&&(i.spotLightMap[v]=t.map,v++,o.updateMatrices(t),t.castShadow&&y++),i.spotLightMatrix[h]=o.matrix,t.castShadow){let e=r.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,i.spotShadow[h]=e,i.spotShadowMap[h]=C,g++}h++}else if(t.isRectAreaLight){let e=n.get(t);e.color.copy(a).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=C,i.pointShadowMatrix[d]=t.shadow.matrix,m++}i.point[d]=e,d++}else if(t.isHemisphereLight){let e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*b),e.groundColor.copy(t.groundColor).multiplyScalar(w*b),i.hemi[A]=e,A++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=tY.LTC_FLOAT_1,i.rectAreaLTC2=tY.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")&&(i.rectAreaLTC1=tY.LTC_HALF_1,i.rectAreaLTC2=tY.LTC_HALF_2)),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;let w=i.hash;(w.directionalLength!==u||w.pointLength!==d||w.spotLength!==h||w.rectAreaLength!==p||w.hemiLength!==A||w.numDirectionalShadows!==f||w.numPointShadows!==m||w.numSpotShadows!==g||w.numSpotMaps!==v)&&(i.directional.length=u,i.spot.length=h,i.rectArea.length=p,i.point.length=d,i.hemi.length=A,i.directionalShadow.length=f,i.directionalShadowMap.length=f,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=f,i.pointShadowMatrix.length=m,i.spotLightMatrix.length=g+v-y,i.spotLightMap.length=v,i.numSpotLightShadowsWithMaps=y,w.directionalLength=u,w.pointLength=d,w.spotLength=h,w.rectAreaLength=p,w.hemiLength=A,w.numDirectionalShadows=f,w.numPointShadows=m,w.numSpotShadows=g,w.numSpotMaps=v,i.version=u$++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0,d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){let t=e[h];if(t.isDirectionalLight){let e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),n++}else if(t.isSpotLight){let e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){let e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),s.identity(),a.copy(t.matrixWorld),a.premultiply(d),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){let e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),r++}else if(t.isHemisphereLight){let e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function p$(e,t){let n=new h$(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function A$(e,t){let n=new WeakMap;return{get:function(r,i=0){let o,a=n.get(r);return void 0===a?(o=new p$(e,t),n.set(r,[o])):i>=a.length?(o=new p$(e,t),a.push(o)):o=a[i],o},dispose:function(){n=new WeakMap}}}var f$=class extends tK{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jW,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},m$=class extends tK{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new jG,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},g$="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",v$="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function y$(e,t,n){let r=new XK,i=new hG,o=new hG,a=new LG,s=new f$({depthPacking:HW}),l=new m$,c={},u=n.maxTextureSize,d={[DQ]:FQ,[FQ]:DQ,[IQ]:IQ},h=new RK({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new hG},radius:{value:4}},vertexShader:g$,fragmentShader:v$}),p=h.clone();p.defines.HORIZONTAL_PASS=1;let A=new mK;A.setAttribute("position",new oK(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let f=new TK(A,h),m=this;function g(n,r){let o=t.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new RG(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,h,f,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,p,f,null)}function v(t,n,r,i,o,a){let u=null,h=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==h)u=h;else if(u=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){let e=u.uuid,t=n.uuid,r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=u.clone(),r[t]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=a===TQ?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.map=n.map,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=o),u}function y(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===TQ)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);let r=t.update(n),i=n.material;if(Array.isArray(i)){let t=r.groups;for(let l=0,c=t.length;l<c;l++){let c=t[l],u=i[c.materialIndex];if(u&&u.visible){let t=v(n,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){let t=v(n,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}let l=n.children;for(let e=0,t=l.length;e<t;e++)y(l[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=MQ,this.render=function(t,n,s){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===t.length)return;let l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(kQ),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let p=0,A=t.length;p<A;p++){let l=t[p],c=l.shadow;if(void 0===c)continue;if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);let d=c.getFrameExtents();if(i.multiply(d),o.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/d.x),i.x=o.x*d.x,c.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/d.y),i.y=o.y*d.y,c.mapSize.y=o.y)),null===c.map){let e=this.type!==TQ?{minFilter:EV,magFilter:EV}:{};c.map=new RG(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();let A=c.getViewportCount();for(let e=0;e<A;e++){let t=c.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),h.viewport(a),c.updateMatrices(l,e),r=c.getFrustum(),y(n,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===TQ&&g(c,s),c.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function b$(e,t,n){let r=n.isWebGL2;let i=new function(){let t=!1,n=new LG,r=null,i=new LG(0,0,0,0);return{setMask:function(n){r!==n&&!t&&(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?N(2929):j(2929)},setMask:function(r){n!==r&&!t&&(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case nV:e.depthFunc(512);break;case rV:e.depthFunc(519);break;case iV:e.depthFunc(513);break;case oV:e.depthFunc(515);break;case aV:e.depthFunc(514);break;case sV:e.depthFunc(518);break;case lV:e.depthFunc(516);break;case cV:e.depthFunc(517);break;default:e.depthFunc(515)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?N(2960):j(2960))},setMask:function(r){n!==r&&!t&&(e.stencilMask(r),n=r)},setFunc:function(t,n,a){(r!==t||i!==n||o!==a)&&(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){(a!==t||s!==n||l!==r)&&(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},s=new WeakMap,l=new WeakMap,c={},u={},d=new WeakMap,h=[],p=null,A=!1,f=null,m=null,g=null,v=null,y=null,b=null,w=null,x=!1,C=null,S=null,B=null,_=null,E=null,M=e.getParameter(35661),P=!1,T=0,D=e.getParameter(7938);-1!==D.indexOf("WebGL")?(T=parseFloat(/^WebGL (\d)/.exec(D)[1]),P=T>=1):-1!==D.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),P=T>=2);let F=null,I={},k=e.getParameter(3088),O=e.getParameter(2978),L=(new LG).fromArray(k),R=(new LG).fromArray(O);function U(t,n,r){let i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}let z={};function N(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function j(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}z[3553]=U(3553,3553,1),z[34067]=U(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),N(2929),o.setFunc(oV),W(!1),G(_Q),N(2884),V(kQ);let H={[NQ]:32774,[jQ]:32778,[HQ]:32779};if(r)H[QQ]=32775,H[VQ]=32776;else{let e=t.get("EXT_blend_minmax");null!==e&&(H[QQ]=e.MIN_EXT,H[VQ]=e.MAX_EXT)}let Q={[WQ]:0,[GQ]:1,[qQ]:768,[YQ]:770,[tV]:776,[ZQ]:774,[$Q]:772,[KQ]:769,[XQ]:771,[eV]:775,[JQ]:773};function V(t,n,r,i,o,a,s,l){if(t!==kQ){if(!1===A&&(N(3042),A=!0),t===zQ)o=o||n,a=a||r,s=s||i,(n!==m||o!==y)&&(e.blendEquationSeparate(H[n],H[o]),m=n,y=o),(r!==g||i!==v||a!==b||s!==w)&&(e.blendFuncSeparate(Q[r],Q[i],Q[a],Q[s]),g=r,v=i,b=a,w=s),f=t,x=!1;else if(t!==f||l!==x){if((m!==NQ||y!==NQ)&&(e.blendEquation(32774),m=NQ,y=NQ),l)switch(t){case OQ:e.blendFuncSeparate(1,771,1,771);break;case LQ:e.blendFunc(1,1);break;case RQ:e.blendFuncSeparate(0,769,0,1);break;case UQ:e.blendFuncSeparate(0,768,0,770)}else switch(t){case OQ:e.blendFuncSeparate(770,771,1,771);break;case LQ:e.blendFunc(770,1);break;case RQ:e.blendFuncSeparate(0,769,0,1);break;case UQ:e.blendFunc(0,768)}g=null,v=null,b=null,w=null,f=t,x=l}}else!0===A&&(j(3042),A=!1)}function W(t){C!==t&&(t?e.frontFace(2304):e.frontFace(2305),C=t)}function G(t){t!==BQ?(N(2884),t!==S&&(t===_Q?e.cullFace(1029):t===EQ?e.cullFace(1028):e.cullFace(1032))):j(2884),S=t}function q(t,n,r){t?(N(32823),(_!==n||E!==r)&&(e.polygonOffset(n,r),_=n,E=r)):j(32823)}return{buffers:{color:i,depth:o,stencil:a},enable:N,disable:j,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},drawBuffers:function(r,i){let o=h,a=!1;if(r)if(o=d.get(i),void 0===o&&(o=[],d.set(i,o)),r.isWebGLMultipleRenderTargets){let e=r.texture;if(o.length!==e.length||36064!==o[0]){for(let t=0,n=e.length;t<n;t++)o[t]=36064+t;o.length=e.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:V,setMaterial:function(e,t){e.side===IQ?j(2884):N(2884);let n=e.side===FQ;t&&(n=!n),W(n),e.blending===OQ&&!1===e.transparent?V(kQ):V(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);let r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?N(32926):j(32926)},setFlipSided:W,setCullFace:G,setLineWidth:function(t){t!==B&&(P&&e.lineWidth(t),B=t)},setPolygonOffset:q,setScissorTest:function(e){e?N(3089):j(3089)},activeTexture:function(t){void 0===t&&(t=33984+M-1),F!==t&&(e.activeTexture(t),F=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===F?33984+M-1:F);let i=I[r];void 0===i&&(i={type:void 0,texture:void 0},I[r]=i),(i.type!==t||i.texture!==n)&&(F!==r&&(e.activeTexture(r),F=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){let t=I[F];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){let r=l.get(n).get(t);s.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),s.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){}},scissor:function(t){!1===L.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),L.copy(t))},viewport:function(t){!1===R.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),R.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},F=null,I={},u={},d=new WeakMap,h=[],p=null,A=!1,f=null,m=null,g=null,v=null,y=null,b=null,w=null,x=!1,C=null,S=null,B=null,_=null,E=null,L.set(0,0,e.canvas.width,e.canvas.height),R.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),a.reset()}}}function w$(e,t,n,r,i,o,a){let s,l=i.isWebGL2,c=(i.maxTextures,i.maxCubemapSize),u=i.maxTextureSize,d=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),A=new WeakMap,f=new WeakMap,m=!1;try{m=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function g(e,t){return m?new OffscreenCanvas(e,t):vG("canvas")}function v(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let r=t?lG:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===s&&(s=g(o,a));let l=n?g(o,a):s;return l.width=o,l.height=a,l.getContext("2d").drawImage(e,0,0,o,a),l}return e}return e}function y(e){return aG(e.width)&&aG(e.height)}function b(e,t){return e.generateMipmaps&&t&&e.minFilter!==EV&&e.minFilter!==TV}function w(t){e.generateMipmap(t)}function x(n,r,i,o,a=!1){if(!1===l)return r;if(null!==n&&void 0!==e[n])return e[n];let s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=o===NW&&!1===a?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),(33325===s||33326===s||33327===s||33328===s||34842===s||34836===s)&&t.get("EXT_color_buffer_float"),s}function C(e,t,n){return!0===b(e,n)||e.isFramebufferTexture&&e.minFilter!==EV&&e.minFilter!==TV?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(e){return e===EV||e===MV||e===PV?9728:9729}function B(e){let t=e.target;t.removeEventListener("dispose",B),function(e){let t=r.get(e);if(void 0===t.__webglInit)return;let n=e.source,i=f.get(n);if(i){let r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&E(e),0===Object.keys(i).length&&f.delete(n)}r.remove(e)}(t),t.isVideoTexture&&A.delete(t)}function _(t){let n=t.target;n.removeEventListener("dispose",_),function(t){let n=t.texture,i=r.get(t),o=r.get(n);if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){let t=r.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(t)}(n)}function E(t){let n=r.get(t);e.deleteTexture(n.__webglTexture);let i=t.source;delete f.get(i)[n.__cacheKey],a.memory.textures--}let M=0;function P(e,t){let i=r.get(e);if(e.isVideoTexture&&function(e){let t=a.render.frame;A.get(e)!==t&&(A.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){let n=e.image;if(null===n);else if(!1!==n.complete)return void k(i,e,t)}n.bindTexture(3553,i.__webglTexture,33984+t)}let T={[SV]:10497,[BV]:33071,[_V]:33648},D={[EV]:9728,[MV]:9984,[PV]:9986,[TV]:9729,[DV]:9985,[FV]:9987};function F(n,o,a){if(a?(e.texParameteri(n,10242,T[o.wrapS]),e.texParameteri(n,10243,T[o.wrapT]),(32879===n||35866===n)&&e.texParameteri(n,32882,T[o.wrapR]),e.texParameteri(n,10240,D[o.magFilter]),e.texParameteri(n,10241,D[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),(32879===n||35866===n)&&e.texParameteri(n,32882,33071),o.wrapS!==BV||o.wrapT,e.texParameteri(n,10240,S(o.magFilter)),e.texParameteri(n,10241,S(o.minFilter)),o.minFilter!==EV&&o.minFilter),!0===t.has("EXT_texture_filter_anisotropic")){let a=t.get("EXT_texture_filter_anisotropic");if(o.magFilter===EV||o.minFilter!==PV&&o.minFilter!==FV||o.type===zV&&!1===t.has("OES_texture_float_linear")||!1===l&&o.type===NV&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function I(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",B));let i=n.source,o=f.get(i);void 0===o&&(o={},f.set(i,o));let s=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;let i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&E(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function k(t,i,a){let s=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=35866),i.isData3DTexture&&(s=32879);let c=I(t,i),d=i.source;n.bindTexture(s,t.__webglTexture,33984+a);let h=r.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(33984+a),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);let t=function(e){return!l&&(e.wrapS!==BV||e.wrapT!==BV||e.minFilter!==EV&&e.minFilter!==TV)}(i)&&!1===y(i.image),r=v(i.image,t,!1,u);r=N(i,r);let p=y(r)||l,A=o.convert(i.format,i.encoding),f=o.convert(i.type),m=x(i.internalFormat,A,f,i.encoding,i.isVideoTexture);F(s,i,p);let g,S=i.mipmaps,B=l&&!0!==i.isVideoTexture,_=void 0===h.__version||!0===c,E=C(i,r,p);if(i.isDepthTexture)m=6402,l?m=i.type===zV?36012:i.type===UV?33190:i.type===QV?35056:33189:i.type,i.format===KV&&6402===m&&i.type!==LV&&i.type!==UV&&(i.type=UV,f=o.convert(i.type)),i.format===YV&&6402===m&&(m=34041,i.type!==QV&&(i.type=QV,f=o.convert(i.type))),_&&(B?n.texStorage2D(3553,1,m,r.width,r.height):n.texImage2D(3553,0,m,r.width,r.height,0,A,f,null));else if(i.isDataTexture)if(S.length>0&&p){B&&_&&n.texStorage2D(3553,E,m,S[0].width,S[0].height);for(let e=0,t=S.length;e<t;e++)g=S[e],B?n.texSubImage2D(3553,e,0,0,g.width,g.height,A,f,g.data):n.texImage2D(3553,e,m,g.width,g.height,0,A,f,g.data);i.generateMipmaps=!1}else B?(_&&n.texStorage2D(3553,E,m,r.width,r.height),n.texSubImage2D(3553,0,0,0,r.width,r.height,A,f,r.data)):n.texImage2D(3553,0,m,r.width,r.height,0,A,f,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){B&&_&&n.texStorage3D(35866,E,m,S[0].width,S[0].height,r.depth);for(let e=0,t=S.length;e<t;e++)g=S[e],i.format!==WV?null!==A&&(B?n.compressedTexSubImage3D(35866,e,0,0,0,g.width,g.height,r.depth,A,g.data,0,0):n.compressedTexImage3D(35866,e,m,g.width,g.height,r.depth,0,g.data,0,0)):B?n.texSubImage3D(35866,e,0,0,0,g.width,g.height,r.depth,A,f,g.data):n.texImage3D(35866,e,m,g.width,g.height,r.depth,0,A,f,g.data)}else{B&&_&&n.texStorage2D(3553,E,m,S[0].width,S[0].height);for(let e=0,t=S.length;e<t;e++)g=S[e],i.format!==WV?null!==A&&(B?n.compressedTexSubImage2D(3553,e,0,0,g.width,g.height,A,g.data):n.compressedTexImage2D(3553,e,m,g.width,g.height,0,g.data)):B?n.texSubImage2D(3553,e,0,0,g.width,g.height,A,f,g.data):n.texImage2D(3553,e,m,g.width,g.height,0,A,f,g.data)}else if(i.isDataArrayTexture)B?(_&&n.texStorage3D(35866,E,m,r.width,r.height,r.depth),n.texSubImage3D(35866,0,0,0,0,r.width,r.height,r.depth,A,f,r.data)):n.texImage3D(35866,0,m,r.width,r.height,r.depth,0,A,f,r.data);else if(i.isData3DTexture)B?(_&&n.texStorage3D(32879,E,m,r.width,r.height,r.depth),n.texSubImage3D(32879,0,0,0,0,r.width,r.height,r.depth,A,f,r.data)):n.texImage3D(32879,0,m,r.width,r.height,r.depth,0,A,f,r.data);else if(i.isFramebufferTexture){if(_)if(B)n.texStorage2D(3553,E,m,r.width,r.height);else{let e=r.width,t=r.height;for(let r=0;r<E;r++)n.texImage2D(3553,r,m,e,t,0,A,f,null),e>>=1,t>>=1}}else if(S.length>0&&p){B&&_&&n.texStorage2D(3553,E,m,S[0].width,S[0].height);for(let e=0,t=S.length;e<t;e++)g=S[e],B?n.texSubImage2D(3553,e,0,0,A,f,g):n.texImage2D(3553,e,m,A,f,g);i.generateMipmaps=!1}else B?(_&&n.texStorage2D(3553,E,m,r.width,r.height),n.texSubImage2D(3553,0,0,0,A,f,r)):n.texImage2D(3553,0,m,A,f,r);b(i,p)&&w(s),h.__version=d.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function O(t,i,a,s,l){let c=o.convert(a.format,a.encoding),u=o.convert(a.type),d=x(a.internalFormat,c,u,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,d,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),z(i)?h.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,U(i)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function L(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||z(n)){let t=n.depthTexture;t&&t.isDepthTexture&&(t.type===zV?i=36012:t.type===UV&&(i=33190));let r=U(n);z(n)?h.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){let i=U(n);r&&!1===z(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):z(n)?h.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{let t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){let a=t[i],s=o.convert(a.format,a.encoding),l=o.convert(a.type),c=x(a.internalFormat,s,l,a.encoding),u=U(n);r&&!1===z(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):z(n)?h.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function R(t){let i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height)&&(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);let o=r.get(i.depthTexture).__webglTexture,a=U(i);if(i.depthTexture.format===KV)z(i)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==YV)throw new Error("Unknown depthTexture format");z(i)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),L(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),L(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function U(e){return Math.min(d,e.samples)}function z(e){let n=r.get(e);return l&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function N(e,n){let r=e.encoding,i=e.format;e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===XW||r!==zW&&(r===NW&&(!1===l&&(!0===t.has("EXT_sRGB")&&i===WV?(e.format=XW,e.minFilter=TV,e.generateMipmaps=!1):n=DG.sRGBToLinear(n)))),n}this.allocateTextureUnit=function(){let e=M;return M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){let i=r.get(e);e.version>0&&i.__version!==e.version?k(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function(e,t){let i=r.get(e);e.version>0&&i.__version!==e.version?k(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function(t,i){let a=r.get(t);t.version>0&&a.__version!==t.version?function(t,i,a){if(6!==i.image.length)return;let s=I(t,i),u=i.source;n.bindTexture(34067,t.__webglTexture,33984+a);let d=r.get(u);if(u.version!==d.__version||!0===s){n.activeTexture(33984+a),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);let t=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=t||r?r?i.image[e].image:i.image[e]:v(i.image[e],!1,!0,c),h[e]=N(i,h[e]);let p,A=h[0],f=y(A)||l,m=o.convert(i.format,i.encoding),g=o.convert(i.type),S=x(i.internalFormat,m,g,i.encoding),B=l&&!0!==i.isVideoTexture,_=void 0===d.__version||!0===s,E=C(i,A,f);if(F(34067,i,f),t){B&&_&&n.texStorage2D(34067,E,S,A.width,A.height);for(let e=0;e<6;e++){p=h[e].mipmaps;for(let t=0;t<p.length;t++){let r=p[t];i.format!==WV?null!==m&&(B?n.compressedTexSubImage2D(34069+e,t,0,0,r.width,r.height,m,r.data):n.compressedTexImage2D(34069+e,t,S,r.width,r.height,0,r.data)):B?n.texSubImage2D(34069+e,t,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t,S,r.width,r.height,0,m,g,r.data)}}}else{p=i.mipmaps,B&&_&&(p.length>0&&E++,n.texStorage2D(34067,E,S,h[0].width,h[0].height));for(let e=0;e<6;e++)if(r){B?n.texSubImage2D(34069+e,0,0,0,h[e].width,h[e].height,m,g,h[e].data):n.texImage2D(34069+e,0,S,h[e].width,h[e].height,0,m,g,h[e].data);for(let t=0;t<p.length;t++){let r=p[t].image[e].image;B?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t+1,S,r.width,r.height,0,m,g,r.data)}}else{B?n.texSubImage2D(34069+e,0,0,0,m,g,h[e]):n.texImage2D(34069+e,0,S,m,g,h[e]);for(let t=0;t<p.length;t++){let r=p[t];B?n.texSubImage2D(34069+e,t+1,0,0,m,g,r.image[e]):n.texImage2D(34069+e,t+1,S,m,g,r.image[e])}}}b(i,f)&&w(34067),d.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(a,t,i):n.bindTexture(34067,a.__webglTexture,33984+i)},this.rebindTextures=function(e,t,n){let i=r.get(e);void 0!==t&&O(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&R(e)},this.setupRenderTarget=function(t){let s=t.texture,c=r.get(t),u=r.get(s);t.addEventListener("dispose",_),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,a.memory.textures++);let d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=y(t)||l;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),h&&i.drawBuffers){let n=t.texture;for(let t=0,i=n.length;t<i;t++){let i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}if(l&&t.samples>0&&!1===z(t)){let r=h?s:[s];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){let i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);let a=o.convert(i.format,i.encoding),s=o.convert(i.type),l=x(i.internalFormat,a,s,i.encoding,!0===t.isXRRenderTarget),u=U(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),L(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,u.__webglTexture),F(34067,s,p);for(let e=0;e<6;e++)O(c.__webglFramebuffer[e],t,s,36064,34069+e);b(s,p)&&w(34067),n.unbindTexture()}else if(h){let e=t.texture;for(let i=0,o=e.length;i<o;i++){let o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),F(3553,o,p),O(c.__webglFramebuffer,t,o,36064+i,3553),b(o,p)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l&&(e=t.isWebGL3DRenderTarget?32879:35866)),n.bindTexture(e,u.__webglTexture),F(e,s,p),O(c.__webglFramebuffer,t,s,36064,e),b(s,p)&&w(e),n.unbindTexture()}t.depthBuffer&&R(t)},this.updateRenderTargetMipmap=function(e){let t=y(e)||l,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){let a=i[o];if(b(a,t)){let t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(l&&t.samples>0&&!1===z(t)){let i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,a=t.height,s=16384,l=[],c=t.stencilBuffer?33306:36096,u=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);let h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),d){let t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),p&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);let o=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,o,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=R,this.setupFrameBufferTexture=O,this.useMultisampledRTT=z}function x$(e,t,n){let r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===IV)return 5121;if(n===jV)return 32819;if(n===HV)return 32820;if(n===kV)return 5120;if(n===OV)return 5122;if(n===LV)return 5123;if(n===RV)return 5124;if(n===UV)return 5125;if(n===zV)return 5126;if(n===NV)return r?5131:(o=t.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===VV)return 6406;if(n===WV)return 6408;if(n===GV)return 6409;if(n===qV)return 6410;if(n===KV)return 6402;if(n===YV)return 34041;if(n===XW)return o=t.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===XV)return 6403;if(n===$V)return 36244;if(n===JV)return 33319;if(n===ZV)return 33320;if(n===eW)return 36249;if(n===tW||n===nW||n===rW||n===iW)if(i===NW){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===tW)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===nW)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===rW)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===iW)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===tW)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===nW)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===rW)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===iW)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===oW||n===aW||n===sW||n===lW){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===oW)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===aW)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===sW)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===lW)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===cW)return o=t.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===uW||n===dW){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===uW)return i===NW?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===dW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===hW||n===pW||n===AW||n===fW||n===mW||n===gW||n===vW||n===yW||n===bW||n===wW||n===xW||n===CW||n===SW||n===BW){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===hW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===pW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===AW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===fW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===mW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===gW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===vW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===yW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===bW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===wW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===xW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===CW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===SW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===BW)return i===NW?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===_W){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(n===_W)return i===NW?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===EW||n===MW||n===PW||n===TW){if(o=t.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===_W)return o.COMPRESSED_RED_RGTC1_EXT;if(n===MW)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===PW)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===TW)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===QV?r?34042:(o=t.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}var C$=class extends zK{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},S$=class extends Hq{constructor(){super(),this.isGroup=!0,this.type="Group"}},B$={type:"move"},_$=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new S$,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new S$,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new jG,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new jG),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new S$,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new jG,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new jG),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null,a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(let o of e.hand.values()){let e=t.getJointPose(o,n),r=this._getHandJoint(l,o);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}let r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(B$)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new S$;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},E$=class extends OG{constructor(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:KV)!==KV&&c!==YV)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===KV&&(n=UV),void 0===n&&c===YV&&(n=QV),super(null,r,i,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:EV,this.minFilter=void 0!==s?s:EV,this.flipY=!1,this.generateMipmaps=!1}},M$=class extends $W{constructor(e,t){super();let n=this,r=null,i=1,o=null,a="local-floor",s=1,l=null,c=null,u=null,d=null,h=null,p=null,A=t.getContextAttributes(),f=null,m=null,g=[],v=[],y=new Set,b=new Map,w=new zK;w.layers.enable(1),w.viewport=new LG;let x=new zK;x.layers.enable(2),x.viewport=new LG;let C=[w,x],S=new C$;S.layers.enable(1),S.layers.enable(2);let B=null,_=null;function E(e){let t=v.indexOf(e.inputSource);if(-1===t)return;let n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function M(){r.removeEventListener("select",E),r.removeEventListener("selectstart",E),r.removeEventListener("selectend",E),r.removeEventListener("squeeze",E),r.removeEventListener("squeezestart",E),r.removeEventListener("squeezeend",E),r.removeEventListener("end",M),r.removeEventListener("inputsourceschange",P);for(let e=0;e<g.length;e++){let t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}B=null,_=null,e.setRenderTarget(f),h=null,d=null,u=null,r=null,m=null,k.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){let n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,g[r].disconnect(n))}for(let t=0;t<e.added.length;t++){let n=e.added[t],r=v.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}let i=g[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new _$,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new _$,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new _$,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,n.isPresenting},this.setReferenceSpaceType=function(e){a=e,n.isPresenting},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(f=e.getRenderTarget(),r.addEventListener("select",E),r.addEventListener("selectstart",E),r.addEventListener("selectend",E),r.addEventListener("squeeze",E),r.addEventListener("squeezestart",E),r.addEventListener("squeezeend",E),r.addEventListener("end",M),r.addEventListener("inputsourceschange",P),!0!==A.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){let n={antialias:void 0!==r.renderState.layers||A.antialias,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),m=new RG(h.framebufferWidth,h.framebufferHeight,{format:WV,type:IV,encoding:e.outputEncoding,stencilBuffer:A.stencil})}else{let n=null,o=null,a=null;A.depth&&(a=A.stencil?35056:33190,n=A.stencil?YV:KV,o=A.stencil?QV:UV);let s={colorFormat:32856,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(s),r.updateRenderState({layers:[d]}),m=new RG(d.textureWidth,d.textureHeight,{format:WV,type:IV,depthTexture:new E$(d.textureWidth,d.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await r.requestReferenceSpace(a),k.setContext(r),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};let T=new jG,D=new jG;function F(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;S.near=x.near=w.near=e.near,S.far=x.far=w.far=e.far,(B!==S.near||_!==S.far)&&(r.updateRenderState({depthNear:S.near,depthFar:S.far}),B=S.near,_=S.far);let t=e.parent,n=S.cameras;F(S,t);for(let r=0;r<n.length;r++)F(n[r],t);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),e.matrix.copy(S.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);let i=e.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(!0);2===n.length?function(e,t,n){T.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);let r=T.distanceTo(D),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=a*u,p=a*d,A=r/(-u+d),f=A*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(A),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();let m=a+A,g=s+A,v=h-f,y=p+(r-f),b=l*s/g*m,w=c*s/g*m;e.projectionMatrix.makePerspective(v,y,b,w,m,g)}(S,w,x):S.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==d||null!==h)return s},this.setFoveation=function(e){s=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.getPlanes=function(){return y};let I=null;let k=new $K;k.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||o),p=r,null!==c){let t=c.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){let i=t[r],o=null;if(null!==h)o=h.getViewport(i);else{let t=u.getViewSubImage(d,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=C[r];void 0===a&&(a=new zK,a.layers.enable(r),a.viewport=new LG,C[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&S.matrix.copy(a.matrix),!0===n&&S.cameras.push(a)}}for(let e=0;e<g.length;e++){let t=v[e],n=g[e];null!==t&&void 0!==n&&n.update(t,r,l||o)}if(I&&I(t,r),r.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:r.detectedPlanes});let e=null;for(let t of y)r.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(let t of e)y.delete(t),b.delete(t),n.dispatchEvent({type:"planeremoved",data:t});for(let t of r.detectedPlanes)if(y.has(t)){let e=b.get(t);t.lastChangedTime>e&&(b.set(t,t.lastChangedTime),n.dispatchEvent({type:"planechanged",data:t}))}else y.add(t),b.set(t,r.lastChangedTime),n.dispatchEvent({type:"planeadded",data:t})}p=null})),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}};function P$(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===FQ&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===FQ&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);let i,o,a=t.get(r).envMap;if(a&&(n.envMap.value=a,n.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;let t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.roughnessMap?i=r.roughnessMap:r.metalnessMap?i=r.metalnessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap?i=r.emissiveMap:r.clearcoatMap?i=r.clearcoatMap:r.clearcoatNormalMap?i=r.clearcoatNormalMap:r.clearcoatRoughnessMap?i=r.clearcoatRoughnessMap:r.iridescenceMap?i=r.iridescenceMap:r.iridescenceThicknessMap?i=r.iridescenceThicknessMap:r.specularIntensityMap?i=r.specularIntensityMap:r.specularColorMap?i=r.specularColorMap:r.transmissionMap?i=r.transmissionMap:r.thicknessMap?i=r.thicknessMap:r.sheenColorMap?i=r.sheenColorMap:r.sheenRoughnessMap&&(i=r.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uvTransform.value.copy(i.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,OK(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===FQ&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function T$(e,t,n,r){let i={},o={},a=[],s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){let r=e.value;if(void 0===n[t]){if("number"==typeof r)n[t]=r;else{let e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{let e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){let n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}function c(e){let t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture,t}function u(t){let n=t.target;n.removeEventListener("dispose",u);let r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(e,t){let n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=i[n.id];void 0===h&&(function(e){let t=e.uniforms,n=0,r=16,i=0;for(let o=0,a=t.length;o<a;o++){let e=t[o],a={boundary:0,storage:0},s=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=s.length;t<n;t++){let e=c(s[t]);a.boundary+=e.boundary,a.storage+=e.storage}if(e.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,o>0){i=n%r,0!==i&&r-i-a.boundary<0&&(n+=r-i,e.__offset=n)}n+=a.storage}i=n%r,i>0&&(n+=r-i),e.__size=n,e.__cache={}}(n),h=function(t){let n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return 0}();t.__bindingPointIndex=n;let r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,o),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));let p=d.program;r.updateUBOMapping(n,p);let A=t.render.frame;o[n.id]!==A&&(function(t){let n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(35345,n);for(let i=0,a=r.length;i<a;i++){let t=r[i];if(!0===l(t,i,o)){let n=t.__offset,r=Array.isArray(t.value)?t.value:[t.value],i=0;for(let o=0;o<r.length;o++){let a=r[o],s=c(a);"number"==typeof a?(t.__data[0]=a,e.bufferSubData(35345,n+i,t.__data)):a.isMatrix3?(t.__data[0]=a.elements[0],t.__data[1]=a.elements[1],t.__data[2]=a.elements[2],t.__data[3]=a.elements[0],t.__data[4]=a.elements[3],t.__data[5]=a.elements[4],t.__data[6]=a.elements[5],t.__data[7]=a.elements[0],t.__data[8]=a.elements[6],t.__data[9]=a.elements[7],t.__data[10]=a.elements[8],t.__data[11]=a.elements[0]):(a.toArray(t.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,n,t.__data)}}e.bindBuffer(35345,null)}(n),o[n.id]=A)},dispose:function(){for(let t in i)e.deleteBuffer(i[t]);a=[],i={},o={}}}}function D$(e={}){this.isWebGLRenderer=!0;let t,n=void 0!==e.canvas?e.canvas:function(){let e=vG("canvas");return e.style.display="block",e}(),r=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==r?r.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let d=null,h=null,p=[],A=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=zW,this.physicallyCorrectLights=!1,this.toneMapping=pV,this.toneMappingExposure=1;let f=this,m=!1,g=0,v=0,y=null,b=-1,w=null,x=new LG,C=new LG,S=null,B=n.width,_=n.height,E=1,M=null,P=null,T=new LG(0,0,B,_),D=new LG(0,0,B,_),F=!1,I=new XK,k=!1,O=!1,L=null,R=new gq,U=new hG,z=new jG,N={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===y?E:1}let H,Q,V,W,G,q,K,Y,X,$,J,Z,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,he=r;function pe(e,t){for(let r=0;r<e.length;r++){let i=e[r],o=n.getContext(i,t);if(null!==o)return o}return null}try{let e={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${bQ}`),n.addEventListener("webglcontextlost",me,!1),n.addEventListener("webglcontextrestored",ge,!1),n.addEventListener("webglcontextcreationerror",ve,!1),null===he){let t=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&t.shift(),he=pe(t,e),null===he)throw pe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Te){throw Te}function Ae(){H=new _Y(he),Q=new sY(he,H,e),H.init(Q),ce=new x$(he,H,Q),V=new b$(he,H,Q),W=new PY,G=new i$,q=new w$(he,H,V,G,Q,ce,W),K=new cY(f),Y=new BY(f),X=new JK(he,Q),ue=new oY(he,H,X,Q),$=new EY(he,X,W,ue),J=new IY(he,$,X,W),ae=new FY(he,Q,q),re=new lY(G),Z=new r$(f,K,Y,H,Q,ue,re),ee=new P$(f,G),te=new l$,ne=new A$(H,Q),oe=new iY(f,K,Y,V,J,t,s),ie=new y$(f,J,Q),de=new T$(he,W,Q,V),se=new aY(he,H,W,Q),le=new MY(he,H,W,Q),W.programs=Z.programs,f.capabilities=Q,f.extensions=H,f.properties=G,f.renderLists=te,f.shadowMap=ie,f.state=V,f.info=W}Ae();let fe=new M$(f,he);function me(e){e.preventDefault(),m=!0}function ge(){m=!1;let e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;Ae(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function ve(e){}function ye(e){let t=e.target;t.removeEventListener("dispose",ye),function(e){(function(e){let t=G.get(e).programs;void 0!==t&&(t.forEach((function(e){Z.releaseProgram(e)})),e.isShaderMaterial&&Z.releaseShaderCache(e))})(e),G.remove(e)}(t)}this.xr=fe,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){let e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(B,_,!1))},this.getSize=function(e){return e.set(B,_)},this.setSize=function(e,t,r){fe.isPresenting||(B=e,_=t,n.width=Math.floor(e*E),n.height=Math.floor(t*E),!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(B*E,_*E).floor()},this.setDrawingBufferSize=function(e,t,r){B=e,_=t,E=r,n.width=Math.floor(e*r),n.height=Math.floor(t*r),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(x)},this.getViewport=function(e){return e.copy(T)},this.setViewport=function(e,t,n,r){e.isVector4?T.set(e.x,e.y,e.z,e.w):T.set(e,t,n,r),V.viewport(x.copy(T).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),V.scissor(C.copy(D).multiplyScalar(E).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(e){V.setScissorTest(F=e)},this.setOpaqueSort=function(e){M=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",me,!1),n.removeEventListener("webglcontextrestored",ge,!1),n.removeEventListener("webglcontextcreationerror",ve,!1),te.dispose(),ne.dispose(),G.dispose(),K.dispose(),Y.dispose(),J.dispose(),ue.dispose(),de.dispose(),Z.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",we),fe.removeEventListener("sessionend",xe),L&&(L.dispose(),L=null),Ce.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=N);let a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=N),q.resetTextureUnits();let o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===y?f.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:zW,l=(r.isMeshStandardMaterial?Y:K).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,A=!!n.morphAttributes.color,m=r.toneMapped?f.toneMapping:pV,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,x=G.get(r),C=h.state.lights;if(!0===k&&(!0===O||e!==w)){let t=e===w&&r.id===b;re.setState(r,e,t)}let S=!1;r.version===x.__version?(x.needsLights&&x.lightsStateVersion!==C.state.version||x.outputEncoding!==s||i.isInstancedMesh&&!1===x.instancing||!i.isInstancedMesh&&!0===x.instancing||i.isSkinnedMesh&&!1===x.skinning||!i.isSkinnedMesh&&!0===x.skinning||x.envMap!==l||!0===r.fog&&x.fog!==o||void 0!==x.numClippingPlanes&&(x.numClippingPlanes!==re.numPlanes||x.numIntersection!==re.numIntersection)||x.vertexAlphas!==c||x.vertexTangents!==u||x.morphTargets!==d||x.morphNormals!==p||x.morphColors!==A||x.toneMapping!==m||!0===Q.isWebGL2&&x.morphTargetsCount!==v)&&(S=!0):(S=!0,x.__version=r.version);let B=x.currentProgram;!0===S&&(B=Me(r,t,i));let M=!1,P=!1,T=!1,D=B.getUniforms(),F=x.uniforms;if(V.useProgram(B.program)&&(M=!0,P=!0,T=!0),r.id!==b&&(b=r.id,P=!0),M||w!==e){if(D.setValue(he,"projectionMatrix",e.projectionMatrix),Q.logarithmicDepthBuffer&&D.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,P=!0,T=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){let t=D.map.cameraPosition;void 0!==t&&t.setValue(he,z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&D.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&D.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){D.setOptional(he,i,"bindMatrix"),D.setOptional(he,i,"bindMatrixInverse");let e=i.skeleton;e&&Q.floatVertexTextures&&(null===e.boneTexture&&e.computeBoneTexture(),D.setValue(he,"boneTexture",e.boneTexture,q),D.setValue(he,"boneTextureSize",e.boneTextureSize))}let I=n.morphAttributes;if((void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===Q.isWebGL2)&&ae.update(i,n,r,B),(P||x.receiveShadow!==i.receiveShadow)&&(x.receiveShadow=i.receiveShadow,D.setValue(he,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(F.envMap.value=l,F.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),P&&(D.setValue(he,"toneMappingExposure",f.toneMappingExposure),x.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(F,T),o&&!0===r.fog&&ee.refreshFogUniforms(F,o),ee.refreshMaterialUniforms(F,r,E,_,L),RX.upload(he,x.uniformsList,F,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(RX.upload(he,x.uniformsList,F,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&D.setValue(he,"center",i.center),D.setValue(he,"modelViewMatrix",i.modelViewMatrix),D.setValue(he,"normalMatrix",i.normalMatrix),D.setValue(he,"modelMatrix",i.matrixWorld),i.previousModelViewMatrix&&D.setValue(he,"previousModelViewMatrix",i.previousModelViewMatrix),e.previousProjectionMatrix&&D.setValue(he,"previousProjectionMatrix",e.previousProjectionMatrix),r.isShaderMaterial||r.isRawShaderMaterial){let e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Q.isWebGL2){let n=e[t];de.update(n,B),de.bind(n,B)}}return B}(e,t,n,r,i);V.setMaterial(r,a);let l=n.index,c=1;!0===r.wireframe&&(l=$.getWireframeAttribute(n),c=2);let u=n.drawRange,d=n.attributes.position,p=u.start*c,A=(u.start+u.count)*c;null!==o&&(p=Math.max(p,o.start*c),A=Math.min(A,(o.start+o.count)*c)),null!==l?(p=Math.max(p,0),A=Math.min(A,l.count)):null!=d&&(p=Math.max(p,0),A=Math.min(A,d.count));let m=A-p;if(m<0||m===1/0)return;ue.setup(i,r,s,n,l);let g,v=se;if(null!==l&&(g=X.get(l),v=le,v.setIndex(g)),i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*j()),v.setMode(1)):v.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),V.setLineWidth(e*j()),i.isLineSegments?v.setMode(1):i.isLineLoop?v.setMode(2):v.setMode(3)}else i.isPoints?v.setMode(0):i.isSprite&&v.setMode(4);if(i.isInstancedMesh)v.renderInstances(p,m,i.count);else if(n.isInstancedBufferGeometry){let e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(p,m,t)}else v.render(p,m)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===IQ&&!1===e.forceSinglePass?(e.side=FQ,e.needsUpdate=!0,Me(e,t,n),e.side=DQ,e.needsUpdate=!0,Me(e,t,n),e.side=IQ):Me(e,t,n)}h=ne.get(e),h.init(),A.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(f.physicallyCorrectLights),e.traverse((function(t){let r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){n(r[i],e,t)}else n(r,e,t)})),A.pop(),h=null};let be=null;function we(){Ce.stop()}function xe(){Ce.start()}let Ce=new $K;function Se(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(R);let t=J.update(e),i=e.material;i.visible&&d.push(e,t,i,n,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||I.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(R);let t=J.update(e),i=e.material;if(Array.isArray(i)){let r=t.groups;for(let o=0,a=r.length;o<a;o++){let a=r[o],s=i[a.materialIndex];s&&s.visible&&d.push(e,t,s,n,z.z,a)}}else i.visible&&d.push(e,t,i,n,z.z,null)}let i=e.children;for(let o=0,a=i.length;o<a;o++)Se(i[o],t,n,r)}function Be(e,t,n,r){let i=e.opaque,o=e.transmissive,s=e.transparent;h.setupLightsView(n),!0===k&&re.setGlobalState(f.clippingPlanes,n),o.length>0&&function(e,t,n){let r=Q.isWebGL2;null===L&&(L=new RG(1,1,{generateMipmaps:!0,type:H.has("EXT_color_buffer_half_float")?NV:IV,minFilter:FV,samples:r&&!0===a?4:0})),f.getDrawingBufferSize(U),r?L.setSize(U.x,U.y):L.setSize(lG(U.x),lG(U.y));let i=f.getRenderTarget();f.setRenderTarget(L),f.clear();let o=f.toneMapping;f.toneMapping=pV,_e(e,t,n),f.toneMapping=o,q.updateMultisampleRenderTarget(L),q.updateRenderTargetMipmap(L),f.setRenderTarget(i)}(i,t,n),r&&V.viewport(x.copy(r)),i.length>0&&_e(i,t,n),o.length>0&&_e(o,t,n),s.length>0&&_e(s,t,n),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1)}function _e(e,t,n){let r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){let o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&Ee(a,t,n,s,l,c)}}function Ee(e,t,n,r,i,o){e.onBeforeRender(f,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(f,t,n,r,e,o),!0===i.transparent&&i.side===IQ&&!1===i.forceSinglePass?(i.side=FQ,i.needsUpdate=!0,f.renderBufferDirect(n,t,r,i,e,o),i.side=DQ,i.needsUpdate=!0,f.renderBufferDirect(n,t,r,i,e,o),i.side=IQ):f.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(f,t,n,r,i,o)}function Me(e,t,n){!0!==t.isScene&&(t=N);let r=G.get(e),i=h.state.lights,o=h.state.shadowsArray,a=i.state.version,s=Z.getParameters(e,i.state,o,t,n),l=Z.getProgramCacheKey(s),c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:K).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",ye),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Pe(e,s),u}else s.uniforms=Z.getUniforms(e),e.onBuild(n,s,f),e.onBeforeCompile(s,f),u=Z.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;let d=r.uniforms;(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)&&(d.clippingPlanes=re.uniform),Pe(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);let p=u.getUniforms(),A=RX.seqWithValue(p.seq,d);return r.currentProgram=u,r.uniformsList=A,u}function Pe(e,t){let n=G.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ce.setAnimationLoop((function(e){be&&be(e)})),typeof self<"u"&&Ce.setContext(self),this.setAnimationLoop=function(e){be=e,fe.setAnimationLoop(e),null===e?Ce.stop():Ce.start()},fe.addEventListener("sessionstart",we),fe.addEventListener("sessionend",xe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return;if(!0===m)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(f,e,t,y),h=ne.get(e,A.length),h.init(),A.push(h),R.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),I.setFromProjectionMatrix(R),O=this.localClippingEnabled,k=re.init(this.clippingPlanes,O),d=te.get(e,p.length),d.init(),p.push(d),Se(e,t,0,f.sortObjects),d.finish(),!0===f.sortObjects&&d.sort(M,P),!0===k&&re.beginShadows();let n=h.state.shadowsArray;if(ie.render(n,e,t),!0===k&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(d,e),h.setupLights(f.physicallyCorrectLights),t.isArrayCamera){let n=t.cameras;for(let t=0,r=n.length;t<r;t++){let r=n[t];Be(d,e,r,r.viewport)}}else Be(d,e,t);null!==y&&(q.updateMultisampleRenderTarget(y),q.updateRenderTargetMipmap(y)),!0===e.isScene&&e.onAfterRender(f,e,t),ue.resetDefaultState(),b=-1,w=null,A.pop(),h=A.length>0?A[A.length-1]:null,p.pop(),d=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(e,t,n){G.get(e.texture).__webglTexture=t,G.get(e.depthTexture).__webglTexture=n;let r=G.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===H.has("WEBGL_multisampled_render_to_texture")&&(r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){let n=G.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){y=e,g=t,v=n;let r=!0,i=null,o=!1,a=!1;if(e){let n=G.get(e);void 0!==n.__useDefaultFramebuffer?(V.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?q.setupRenderTarget(e):n.__hasExternalTextures&&q.rebindTextures(e,G.get(e.texture).__webglTexture,G.get(e.depthTexture).__webglTexture);let s=e.texture;(s.isData3DTexture||s.isDataArrayTexture||s.isCompressedArrayTexture)&&(a=!0);let l=G.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],o=!0):i=Q.isWebGL2&&e.samples>0&&!1===q.useMultisampledRTT(e)?G.get(e).__webglMultisampledFramebuffer:l,x.copy(e.viewport),C.copy(e.scissor),S=e.scissorTest}else x.copy(T).multiplyScalar(E).floor(),C.copy(D).multiplyScalar(E).floor(),S=F;if(V.bindFramebuffer(36160,i)&&Q.drawBuffers&&r&&V.drawBuffers(e,i),V.viewport(x),V.scissor(C),V.setScissorTest(S),o){let r=G.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){let r=G.get(e.texture),i=t||0;he.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}b=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return;let s=G.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){V.bindFramebuffer(36160,s);try{let a=e.texture,s=a.format,l=a.type;if(s!==WV&&ce.convert(s)!==he.getParameter(35739))return;let c=l===NV&&(H.has("EXT_color_buffer_half_float")||Q.isWebGL2&&H.has("EXT_color_buffer_float"));if(!(l===IV||ce.convert(l)===he.getParameter(35738)||l===zV&&(Q.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float"))||c))return;t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,ce.convert(s),ce.convert(l),o)}finally{let e=null!==y?G.get(y).__webglFramebuffer:null;V.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){let r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);q.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){let i=t.image.width,o=t.image.height,a=ce.convert(n.format),s=ce.convert(n.type);q.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(f.isWebGL1Renderer)return;let o,a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,c=ce.convert(r.format),u=ce.convert(r.type);if(r.isData3DTexture)q.setTexture3D(r,0),o=32879;else{if(!r.isDataArrayTexture)return;q.setTexture2DArray(r,0),o=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);let d=he.getParameter(3314),h=he.getParameter(32878),p=he.getParameter(3316),A=he.getParameter(3315),m=he.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,g.width),he.pixelStorei(32878,g.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(o,i,t.x,t.y,t.z,a,s,l,c,u,g.data):n.isCompressedArrayTexture?he.compressedTexSubImage3D(o,i,t.x,t.y,t.z,a,s,l,c,g.data):he.texSubImage3D(o,i,t.x,t.y,t.z,a,s,l,c,u,g),he.pixelStorei(3314,d),he.pixelStorei(32878,h),he.pixelStorei(3316,p),he.pixelStorei(3315,A),he.pixelStorei(32877,m),0===i&&r.generateMipmaps&&he.generateMipmap(o),V.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?q.setTextureCube(e,0):e.isData3DTexture?q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?q.setTexture2DArray(e,0):q.setTexture2D(e,0),V.unbindTexture()},this.resetState=function(){g=0,v=0,y=null,V.reset(),ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends D${}).prototype.isWebGL1Renderer=!0;var F$=class{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new PG(e),this.near=t,this.far=n}clone(){return new F$(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},I$=class extends Hq{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return this.matrixWorldAutoUpdate}set autoUpdate(e){this.matrixWorldAutoUpdate=e}},k$=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=KW,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=nG()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nG()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nG()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},O$=new jG,L$=class{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)O$.fromBufferAttribute(this,t),O$.applyMatrix4(e),this.setXYZ(t,O$.x,O$.y,O$.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)O$.fromBufferAttribute(this,t),O$.applyNormalMatrix(e),this.setXYZ(t,O$.x,O$.y,O$.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)O$.fromBufferAttribute(this,t),O$.transformDirection(e),this.setXYZ(t,O$.x,O$.y,O$.z);return this}setX(e,t){return this.normalized&&(t=uG(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=uG(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=uG(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=uG(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=cG(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=cG(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=cG(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=cG(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=uG(t,this.array),n=uG(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=uG(t,this.array),n=uG(n,this.array),r=uG(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=uG(t,this.array),n=uG(n,this.array),r=uG(r,this.array),i=uG(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new oK(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new L$(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},R$=class extends Hq{constructor(){super(),this.isBone=!0,this.type="Bone"}},U$=class extends OG{constructor(e=null,t=1,n=1,r,i,o,a,s,l=EV,c=EV,u,d){super(null,o,a,s,l,c,r,i,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},z$=new gq,N$=new gq,j$=class{constructor(e=[],t=[]){this.uuid=nG(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new gq)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let t=new gq;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=e.length;i<o;i++){let r=e[i]?e[i].matrixWorld:N$;z$.multiplyMatrices(r,t[i]),z$.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new j$(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=sG(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let n=new U$(t,e,e,WV,zV);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let r=t[e.bones[n]];void 0===r&&(r=new R$),this.bones.push(r),this.boneInverses.push((new gq).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){let i=t[r];e.bones.push(i.uuid);let o=n[r];e.boneInverses.push(o.toArray())}return e}},H$=class extends oK{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Q$=new gq,V$=new gq,W$=[],G$=new gq,q$=new TK,K$=class extends TK{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new H$(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let r=0;r<n;r++)this.setMatrixAt(r,G$)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){let n=this.matrixWorld,r=this.count;if(q$.geometry=this.geometry,q$.material=this.material,void 0!==q$.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Q$),V$.multiplyMatrices(n,Q$),q$.matrixWorld=V$,q$.raycast(e,W$);for(let e=0,n=W$.length;e<n;e++){let n=W$[e];n.instanceId=i,n.object=this,t.push(n)}W$.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new H$(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},Y$=class extends tK{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new PG(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},X$=new jG,$$=new jG,J$=new gq,Z$=new mq,eJ=new lq,tJ=class extends Hq{constructor(e=new mK,t=new Y$){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)X$.fromBufferAttribute(t,e-1),$$.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=X$.distanceTo($$);e.setAttribute("lineDistance",new lK(n,1))}return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),eJ.copy(n.boundingSphere),eJ.applyMatrix4(r),eJ.radius+=i,!1===e.ray.intersectsSphere(eJ))return;J$.copy(r).invert(),Z$.copy(e.ray).applyMatrix4(J$);let a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new jG,c=new jG,u=new jG,d=new jG,h=this.isLineSegments?2:1,p=n.index,A=n.attributes.position;if(null!==p){for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=h){let r=p.getX(n),i=p.getX(n+1);if(l.fromBufferAttribute(A,r),c.fromBufferAttribute(A,i),Z$.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);let o=e.ray.origin.distanceTo(d);o<e.near||o>e.far||t.push({distance:o,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(A.count,o.start+o.count)-1;n<r;n+=h){if(l.fromBufferAttribute(A,n),c.fromBufferAttribute(A,n+1),Z$.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);let r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}},nJ=new jG,rJ=new jG,iJ=class extends tJ{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)nJ.fromBufferAttribute(t,e),rJ.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+nJ.distanceTo(rJ);e.setAttribute("lineDistance",new lK(n,1))}return this}},oJ=class extends OG{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:TV,this.magFilter=void 0!==i?i:TV,this.generateMipmaps=!1;let c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e==!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},aJ=class extends OG{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},sJ=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t,n=[],r=this.getPoint(0),i=0;n.push(0);for(let o=1;o<=e;o++)t=this.getPoint(o/e),i+=t.distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];let a,s=0,l=o-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,r[i]===n)return i/(o-1);let c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let i=this.getPoint(n),o=this.getPoint(r),a=t||(i.isVector2?new hG:new jG);return a.copy(o).sub(i).normalize(),a}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new jG,r=[],i=[],o=[],a=new jG,s=new gq;for(let h=0;h<=e;h++){let t=h/e;r[h]=this.getTangentAt(t,new jG)}i[0]=new jG,o[0]=new jG;let l=Number.MAX_VALUE,c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(r[h-1],r[h]),a.length()>Number.EPSILON){a.normalize();let e=Math.acos(rG(r[h-1].dot(r[h]),-1,1));i[h].applyMatrix4(s.makeRotationAxis(a,e))}o[h].crossVectors(r[h],i[h])}if(!0===t){let t=Math.acos(rG(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},lJ=class extends sJ{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){let n=t||new hG,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0===this.aClockwise&&!o&&(i===r?i=-r:i-=r);let a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};function cJ(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;l*=a,c*=a,i(t,n,l,c)},calc:function(i){let o=i*i;return e+t*i+n*o+r*(o*i)}}}var uJ=new jG,dJ=new cJ,hJ=new cJ,pJ=new cJ;function AJ(e,t,n,r,i){let o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function fJ(e,t,n,r){return function(e,t){let n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function mJ(e,t,n,r,i){return function(e,t){let n=1-e;return n*n*n*t}(e,t)+function(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}var gJ=class extends sJ{constructor(e=new hG,t=new hG,n=new hG,r=new hG){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new hG){let n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(mJ(e,r.x,i.x,o.x,a.x),mJ(e,r.y,i.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},vJ=class extends sJ{constructor(e=new jG,t=new jG,n=new jG,r=new jG){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new jG){let n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(mJ(e,r.x,i.x,o.x,a.x),mJ(e,r.y,i.y,o.y,a.y),mJ(e,r.z,i.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},yJ=class extends sJ{constructor(e=new hG,t=new hG){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new hG){let n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let n=t||new hG;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},bJ=class extends sJ{constructor(e=new jG,t=new jG){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new jG){let n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},wJ=class extends sJ{constructor(e=new hG,t=new hG,n=new hG){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new hG){let n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(fJ(e,r.x,i.x,o.x),fJ(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},xJ=class extends sJ{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new hG){let n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(AJ(a,s.x,l.x,c.x,u.x),AJ(a,s.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push((new hG).fromArray(n))}return this}},CJ=Object.freeze({__proto__:null,ArcCurve:class extends lJ{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends sJ{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new jG){let n,r,i=t,o=this.points,a=o.length,s=(a-(this.closed?0:1))*e,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:0===c&&l===a-1&&(l=a-2,c=1),this.closed||l>0?n=o[(l-1)%a]:(uJ.subVectors(o[0],o[1]).add(o[0]),n=uJ);let u=o[l%a],d=o[(l+1)%a];if(this.closed||l+2<a?r=o[(l+2)%a]:(uJ.subVectors(o[a-1],o[a-2]).add(o[a-1]),r=uJ),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(n.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(d),e),o=Math.pow(d.distanceToSquared(r),e);i<1e-4&&(i=1),t<1e-4&&(t=i),o<1e-4&&(o=i),dJ.initNonuniformCatmullRom(n.x,u.x,d.x,r.x,t,i,o),hJ.initNonuniformCatmullRom(n.y,u.y,d.y,r.y,t,i,o),pJ.initNonuniformCatmullRom(n.z,u.z,d.z,r.z,t,i,o)}else"catmullrom"===this.curveType&&(dJ.initCatmullRom(n.x,u.x,d.x,r.x,this.tension),hJ.initCatmullRom(n.y,u.y,d.y,r.y,this.tension),pJ.initCatmullRom(n.z,u.z,d.z,r.z,this.tension));return i.set(dJ.calc(c),hJ.calc(c),pJ.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push((new jG).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:gJ,CubicBezierCurve3:vJ,EllipseCurve:lJ,LineCurve:yJ,LineCurve3:bJ,QuadraticBezierCurve:wJ,QuadraticBezierCurve3:class extends sJ{constructor(e=new jG,t=new jG,n=new jG){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new jG){let n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(fJ(e,r.x,i.x,o.x),fJ(e,r.y,i.y,o.y),fJ(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:xJ}),SJ=class extends sJ{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new yJ(t,e))}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=n){let e=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-e/a;return o.getPointAt(s,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t,n=[];for(let r=0,i=this.curves;r<i.length;r++){let o=i[r],a=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){let r=s[e];t&&t.equals(r)||(n.push(r),t=r)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push((new CJ[n.type]).fromJSON(n))}return this}},BJ=class extends SJ{constructor(e){super(),this.type="Path",this.currentPoint=new hG,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new yJ(this.currentPoint.clone(),new hG(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let i=new wJ(this.currentPoint.clone(),new hG(e,t),new hG(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){let a=new gJ(this.currentPoint.clone(),new hG(e,t),new hG(n,r),new hG(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),n=new xJ(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){let a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){let l=new lJ(e,t,n,r,i,o,a,s);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},_J=class extends mK{constructor(e=[new hG(0,-.5),new hG(.5,0),new hG(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=rG(r,0,2*Math.PI);let i=[],o=[],a=[],s=[],l=[],c=1/t,u=new jG,d=new hG,h=new jG,p=new jG,A=new jG,f=0,m=0;for(let g=0;g<=e.length-1;g++)switch(g){case 0:f=e[g+1].x-e[g].x,m=e[g+1].y-e[g].y,h.x=1*m,h.y=-f,h.z=0*m,A.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(A.x,A.y,A.z);break;default:f=e[g+1].x-e[g].x,m=e[g+1].y-e[g].y,h.x=1*m,h.y=-f,h.z=0*m,p.copy(h),h.x+=A.x,h.y+=A.y,h.z+=A.z,h.normalize(),s.push(h.x,h.y,h.z),A.copy(p)}for(let g=0;g<=t;g++){let i=n+g*c*r,h=Math.sin(i),p=Math.cos(i);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*p,o.push(u.x,u.y,u.z),d.x=g/t,d.y=n/(e.length-1),a.push(d.x,d.y);let r=s[3*n+0]*h,i=s[3*n+1],c=s[3*n+0]*p;l.push(r,i,c)}}for(let g=0;g<t;g++)for(let t=0;t<e.length-1;t++){let n=t+g*e.length,r=n,o=n+e.length,a=n+e.length+1,s=n+1;i.push(r,o,s),i.push(a,s,o)}this.setIndex(i),this.setAttribute("position",new lK(o,3)),this.setAttribute("uv",new lK(a,2)),this.setAttribute("normal",new lK(l,3))}static fromJSON(e){return new _J(e.points,e.segments,e.phiStart,e.phiLength)}},EJ=class extends mK{constructor(e=1,t=1,n=1,r=32,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};let l=this;r=Math.floor(r),i=Math.floor(i);let c=[],u=[],d=[],h=[],p=0,A=[],f=n/2,m=0;function g(n){let i=p,o=new hG,A=new jG,g=0,v=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,f*y,0),d.push(0,y,0),h.push(.5,.5),p++;let b=p;for(let e=0;e<=r;e++){let t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);A.x=v*i,A.y=f*y,A.z=v*n,u.push(A.x,A.y,A.z),d.push(0,y,0),o.x=.5*n+.5,o.y=.5*i*y+.5,h.push(o.x,o.y),p++}for(let e=0;e<r;e++){let t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),g+=3}l.addGroup(m,g,!0===n?1:2),m+=g}(function(){let o=new jG,g=new jG,v=0,y=(t-e)/n;for(let l=0;l<=i;l++){let c=[],m=l/i,v=m*(t-e)+e;for(let e=0;e<=r;e++){let t=e/r,i=t*s+a,l=Math.sin(i),A=Math.cos(i);g.x=v*l,g.y=-m*n+f,g.z=v*A,u.push(g.x,g.y,g.z),o.set(l,y,A).normalize(),d.push(o.x,o.y,o.z),h.push(t,1-m),c.push(p++)}A.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){let n=A[t][e],r=A[t+1][e],i=A[t+1][e+1],o=A[t][e+1];c.push(n,r,o),c.push(r,i,o),v+=6}l.addGroup(m,v,0),m+=v})(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.setAttribute("position",new lK(u,3)),this.setAttribute("normal",new lK(d,3)),this.setAttribute("uv",new lK(h,2))}static fromJSON(e){return new EJ(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},MJ=class extends EJ{constructor(e=1,t=1,n=32,r=1,i=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new MJ(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},PJ=class extends mK{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let i=[],o=[];function a(e,t,n,r){let i=r+1,o=[];for(let a=0;a<=i;a++){o[a]=[];let r=e.clone().lerp(n,a/i),s=t.clone().lerp(n,a/i),l=i-a;for(let e=0;e<=l;e++)o[a][e]=0===e&&a===i?r:r.clone().lerp(s,e/l)}for(let a=0;a<i;a++)for(let e=0;e<2*(i-a)-1;e++){let t=Math.floor(e/2);e%2==0?(s(o[a][t+1]),s(o[a+1][t]),s(o[a][t])):(s(o[a][t+1]),s(o[a+1][t+1]),s(o[a+1][t]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){let r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(function(e){let n=new jG,r=new jG,i=new jG;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)})(r),function(e){let t=new jG;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){let e=new jG;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];let n=u(e)/2/Math.PI+.5,r=d(e)/Math.PI+.5;o.push(n,1-r)}(function(){let e=new jG,t=new jG,n=new jG,r=new jG,a=new hG,s=new hG,l=new hG;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),r.copy(e).add(t).add(n).divideScalar(3);let p=u(r);c(a,h+0,e,p),c(s,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<o.length;e+=6){let t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new lK(i,3)),this.setAttribute("normal",new lK(i.slice(),3)),this.setAttribute("uv",new lK(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new PJ(e.vertices,e.indices,e.radius,e.details)}},TJ=class extends PJ{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new TJ(e.radius,e.detail)}},DJ=class extends BJ{constructor(e){super(e),this.uuid=nG(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push((new BJ).fromJSON(n))}return this}},FJ=function(e,t,n=2){let r,i,o,a,s,l,c,u=t&&t.length,d=u?t[0]*n:e.length,h=IJ(e,0,d,n,!0),p=[];if(!h||h.next===h.prev)return p;if(u&&(h=function(e,t,n,r){let i,o,a,s,l,c=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,l=IJ(e,a,s,r,!1),l===l.next&&(l.steiner=!0),c.push(VJ(l));for(c.sort(NJ),i=0;i<c.length;i++)n=jJ(c[i],n);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(let t=n;t<d;t+=n)s=e[t],l=e[t+1],s<r&&(r=s),l<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=Math.max(o-r,a-i),c=0!==c?32767/c:0}return OJ(h,p,n,r,i,c,0),p};function IJ(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=eZ(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=eZ(o,e[o],e[o+1],a);return a&&KJ(a,a.next)&&(tZ(a),a=a.next),a}function kJ(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!KJ(r,r.next)&&0!==qJ(r.prev,r,r.next))r=r.next;else{if(tZ(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function OJ(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=QJ(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?RJ(e,r,i,o):LJ(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),tZ(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?OJ(e=UJ(kJ(e),t,n),t,n,r,i,o,2):2===a&&zJ(e,t,n,r,i,o):OJ(kJ(e),t,n,r,i,o,1);break}}function LJ(e){let t=e.prev,n=e,r=e.next;if(qJ(t,n,r)>=0)return!1;let i=t.x,o=n.x,a=r.x,s=t.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,d=s<l?s<c?s:c:l<c?l:c,h=i>o?i>a?i:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c,A=r.next;for(;A!==t;){if(A.x>=u&&A.x<=h&&A.y>=d&&A.y<=p&&WJ(i,s,o,l,a,c,A.x,A.y)&&qJ(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function RJ(e,t,n,r){let i=e.prev,o=e,a=e.next;if(qJ(i,o,a)>=0)return!1;let s=i.x,l=o.x,c=a.x,u=i.y,d=o.y,h=a.y,p=s<l?s<c?s:c:l<c?l:c,A=u<d?u<h?u:h:d<h?d:h,f=s>l?s>c?s:c:l>c?l:c,m=u>d?u>h?u:h:d>h?d:h,g=QJ(p,A,t,n,r),v=QJ(f,m,t,n,r),y=e.prevZ,b=e.nextZ;for(;y&&y.z>=g&&b&&b.z<=v;){if(y.x>=p&&y.x<=f&&y.y>=A&&y.y<=m&&y!==i&&y!==a&&WJ(s,u,l,d,c,h,y.x,y.y)&&qJ(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=p&&b.x<=f&&b.y>=A&&b.y<=m&&b!==i&&b!==a&&WJ(s,u,l,d,c,h,b.x,b.y)&&qJ(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=g;){if(y.x>=p&&y.x<=f&&y.y>=A&&y.y<=m&&y!==i&&y!==a&&WJ(s,u,l,d,c,h,y.x,y.y)&&qJ(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=f&&b.y>=A&&b.y<=m&&b!==i&&b!==a&&WJ(s,u,l,d,c,h,b.x,b.y)&&qJ(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function UJ(e,t,n){let r=e;do{let i=r.prev,o=r.next.next;!KJ(i,o)&&YJ(i,r,r.next,o)&&JJ(i,o)&&JJ(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),tZ(r),tZ(r.next),r=e=o),r=r.next}while(r!==e);return kJ(r)}function zJ(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&GJ(a,e)){let s=ZJ(a,e);return a=kJ(a,a.next),s=kJ(s,s.next),OJ(a,t,n,r,i,o,0),void OJ(s,t,n,r,i,o,0)}e=e.next}a=a.next}while(a!==e)}function NJ(e,t){return e.x-t.x}function jJ(e,t){let n=function(e,t){let n,r=t,i=-1/0,o=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){let e=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=o&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===o))return n}r=r.next}while(r!==t);if(!n)return null;let s,l=n,c=n.x,u=n.y,d=1/0;r=n;do{o>=r.x&&r.x>=c&&o!==r.x&&WJ(a<u?o:i,a,c,u,a<u?i:o,a,r.x,r.y)&&(s=Math.abs(a-r.y)/(o-r.x),JJ(r,e)&&(s<d||s===d&&(r.x>n.x||r.x===n.x&&HJ(n,r)))&&(n=r,d=s)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;let r=ZJ(n,e);return kJ(r,r.next),kJ(n,n.next)}function HJ(e,t){return qJ(e.prev,e,t.prev)<0&&qJ(t.next,e,e.next)<0}function QJ(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function VJ(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function WJ(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function GJ(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&YJ(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(JJ(e,t)&&JJ(t,e)&&function(e,t){let n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(qJ(e.prev,e,t.prev)||qJ(e,t.prev,t))||KJ(e,t)&&qJ(e.prev,e,e.next)>0&&qJ(t.prev,t,t.next)>0)}function qJ(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function KJ(e,t){return e.x===t.x&&e.y===t.y}function YJ(e,t,n,r){let i=$J(qJ(e,t,n)),o=$J(qJ(e,t,r)),a=$J(qJ(n,r,e)),s=$J(qJ(n,r,t));return!!(i!==o&&a!==s||0===i&&XJ(e,n,t)||0===o&&XJ(e,r,t)||0===a&&XJ(n,e,r)||0===s&&XJ(n,t,r))}function XJ(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function $J(e){return e>0?1:e<0?-1:0}function JJ(e,t){return qJ(e.prev,e,e.next)<0?qJ(e,t,e.next)>=0&&qJ(e,e.prev,t)>=0:qJ(e,t,e.prev)<0||qJ(e,e.next,t)<0}function ZJ(e,t){let n=new nZ(e.i,e.x,e.y),r=new nZ(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function eZ(e,t,n,r){let i=new nZ(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function tZ(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function nZ(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var rZ=class{static area(e){let t=e.length,n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return rZ.area(e)<0}static triangulateShape(e,t){let n=[],r=[],i=[];iZ(e),oZ(n,e);let o=e.length;t.forEach(iZ);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,oZ(n,t[s]);let a=FJ(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}};function iZ(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function oZ(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var aZ=class extends PJ{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aZ(e.radius,e.detail)}},sZ=class extends mK{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let s=Math.min(o+a,Math.PI),l=0,c=[],u=new jG,d=new jG,h=[],p=[],A=[],f=[];for(let m=0;m<=n;m++){let h=[],g=m/n,v=0;0==m&&0==o?v=.5/t:m==n&&s==Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){let s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(o+g*a),u.y=e*Math.cos(o+g*a),u.z=e*Math.sin(r+s*i)*Math.sin(o+g*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),A.push(d.x,d.y,d.z),f.push(s+v,1-g),h.push(l++)}c.push(h)}for(let m=0;m<n;m++)for(let e=0;e<t;e++){let t=c[m][e+1],r=c[m][e],i=c[m+1][e],a=c[m+1][e+1];(0!==m||o>0)&&h.push(t,r,a),(m!==n-1||s<Math.PI)&&h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new lK(p,3)),this.setAttribute("normal",new lK(A,3)),this.setAttribute("uv",new lK(f,2))}static fromJSON(e){return new sZ(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},lZ=class extends mK{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);let o=[],a=[],s=[],l=[],c=new jG,u=new jG,d=new jG;for(let h=0;h<=n;h++)for(let o=0;o<=r;o++){let p=o/r*i,A=h/n*Math.PI*2;u.x=(e+t*Math.cos(A))*Math.cos(p),u.y=(e+t*Math.cos(A))*Math.sin(p),u.z=t*Math.sin(A),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),s.push(d.x,d.y,d.z),l.push(o/r),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=r;e++){let t=(r+1)*h+e-1,n=(r+1)*(h-1)+e-1,i=(r+1)*(h-1)+e,a=(r+1)*h+e;o.push(t,n,a),o.push(n,i,a)}this.setIndex(o),this.setAttribute("position",new lK(a,3)),this.setAttribute("normal",new lK(s,3)),this.setAttribute("uv",new lK(l,2))}static fromJSON(e){return new lZ(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},cZ=class extends mK{constructor(e=1,t=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);let a=[],s=[],l=[],c=[],u=new jG,d=new jG,h=new jG,p=new jG,A=new jG,f=new jG,m=new jG;for(let v=0;v<=n;++v){let a=v/n*i*Math.PI*2;g(a,i,o,e,h),g(a+.01,i,o,e,p),f.subVectors(p,h),m.addVectors(p,h),A.crossVectors(f,m),m.crossVectors(A,f),A.normalize(),m.normalize();for(let e=0;e<=r;++e){let i=e/r*Math.PI*2,o=-t*Math.cos(i),a=t*Math.sin(i);u.x=h.x+(o*m.x+a*A.x),u.y=h.y+(o*m.y+a*A.y),u.z=h.z+(o*m.z+a*A.z),s.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(v/n),c.push(e/r)}}for(let v=1;v<=n;v++)for(let e=1;e<=r;e++){let t=(r+1)*(v-1)+(e-1),n=(r+1)*v+(e-1),i=(r+1)*v+e,o=(r+1)*(v-1)+e;a.push(t,n,o),a.push(n,i,o)}function g(e,t,n,r,i){let o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new lK(s,3)),this.setAttribute("normal",new lK(l,3)),this.setAttribute("uv",new lK(c,2))}static fromJSON(e){return new cZ(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function uZ(e,t,n){return hZ(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function dZ(e,t,n){return e&&e.constructor!==t?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function hZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pZ(e){let t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function AZ(e,t,n){let r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){let r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i}function fZ(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}var mZ=class{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{let a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){let r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},gZ=class extends mZ{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:OW,endingEnd:OW}}intervalChanged_(e,t,n){let r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case LW:i=e,a=2*t-n;break;case RW:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case LW:o=e,s=2*n-t;break;case RW:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}let l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),A=p*p,f=A*p,m=-d*f+2*d*A-d*p,g=(1+d)*f+(-1.5-2*d)*A+(-.5+d)*p+1,v=(-1-h)*f+(1.5+h)*A+.5*p,y=h*f-h*A;for(let b=0;b!==a;++b)i[b]=m*o[c+b]+g*o[l+b]+v*o[s+b]+y*o[u+b];return i}},vZ=class extends mZ{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let d=0;d!==a;++d)i[d]=o[l+d]*u+o[s+d]*c;return i}},yZ=class extends mZ{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}},bZ=class{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dZ(t,this.TimeBufferType),this.values=dZ(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:dZ(e.times,Array),values:dZ(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new yZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new vZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case FW:t=this.InterpolantFactoryMethodDiscrete;break;case IW:t=this.InterpolantFactoryMethodLinear;break;case kW:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return FW;case this.InterpolantFactoryMethodLinear:return IW;case this.InterpolantFactoryMethodSmooth:return kW}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);let e=this.getValueSize();this.times=uZ(n,i,o),this.values=uZ(this.values,i*e,o*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(e=!1);let n=this.times,r=this.values,i=n.length;0===i&&(e=!1);let o=null;for(let a=0;a!==i;a++){let t=n[a];if("number"==typeof t&&isNaN(t)){e=!1;break}if(null!==o&&o>t){e=!1;break}o=t}if(void 0!==r&&hZ(r))for(let a=0,s=r.length;a!==s;++a){let t=r[a];if(isNaN(t)){e=!1;break}}return e}optimize(){let e=uZ(this.times),t=uZ(this.values),n=this.getValueSize(),r=this.getInterpolation()===kW,i=e.length-1,o=1;for(let a=1;a<i;++a){let i=!1,s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{let e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){let n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];let r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=uZ(e,0,o),this.values=uZ(t,0,o*n)):(this.times=e,this.values=t),this}clone(){let e=uZ(this.times,0),t=uZ(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}};bZ.prototype.TimeBufferType=Float32Array,bZ.prototype.ValueBufferType=Float32Array,bZ.prototype.DefaultInterpolation=IW;var wZ=class extends bZ{};wZ.prototype.ValueTypeName="bool",wZ.prototype.ValueBufferType=Array,wZ.prototype.DefaultInterpolation=FW,wZ.prototype.InterpolantFactoryMethodLinear=void 0,wZ.prototype.InterpolantFactoryMethodSmooth=void 0;var xZ=class extends bZ{};xZ.prototype.ValueTypeName="color";var CZ=class extends bZ{};CZ.prototype.ValueTypeName="number";var SZ=class extends mZ{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t),l=e*a;for(let c=l+a;l!==c;l+=4)NG.slerpFlat(i,0,o,l-a,o,l,s);return i}},BZ=class extends bZ{InterpolantFactoryMethodLinear(e){return new SZ(this.times,this.values,this.getValueSize(),e)}};BZ.prototype.ValueTypeName="quaternion",BZ.prototype.DefaultInterpolation=IW,BZ.prototype.InterpolantFactoryMethodSmooth=void 0;var _Z=class extends bZ{};_Z.prototype.ValueTypeName="string",_Z.prototype.ValueBufferType=Array,_Z.prototype.DefaultInterpolation=FW,_Z.prototype.InterpolantFactoryMethodLinear=void 0,_Z.prototype.InterpolantFactoryMethodSmooth=void 0;var EZ=class extends bZ{};EZ.prototype.ValueTypeName="vector";var MZ=class{constructor(e,t=-1,n,r=UW){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=nG(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(PZ(n[o]).scale(r));let i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){let t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(bZ.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){let i=t.length,o=[];for(let a=0;a<i;a++){let e=[],s=[];e.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);let l=pZ(e);e=AZ(e,1,l),s=AZ(s,1,l),!r&&0===e[0]&&(e.push(i),s.push(s[0])),o.push(new CZ(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){let t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){let t=e[a],n=t.name.match(i);if(n&&n.length>1){let e=n[1],i=r[e];i||(r[e]=i=[]),i.push(t)}}let o=[];for(let a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return null;let n=function(e,t,n,r,i){if(0!==n.length){let o=[],a=[];fZ(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode,s=e.length||-1,l=e.hierarchy||[];for(let c=0;c<l.length;c++){let e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){let t,n={};for(t=0;t<e.length;t++)if(e[t].morphTargets)for(let r=0;r<e[t].morphTargets.length;r++)n[e[t].morphTargets[r]]=-1;for(let i in n){let n=[],o=[];for(let r=0;r!==e[t].morphTargets.length;++r){let r=e[t];n.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new CZ(".morphTargetInfluence["+i+"]",n,o))}s=n.length*o}else{let i=".bones["+t[c].name+"]";n(EZ,i+".position",e,"pos",r),n(BZ,i+".quaternion",e,"rot",r),n(EZ,i+".scale",e,"scl",r)}}return 0===r.length?null:new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){let n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function PZ(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return CZ;case"vector":case"vector2":case"vector3":case"vector4":return EZ;case"color":return xZ;case"quaternion":return BZ;case"bool":case"boolean":return wZ;case"string":return _Z}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let t=[],n=[];fZ(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var TZ={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},DZ=class{constructor(e,t,n){let r,i=this,o=!1,a=0,s=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==i.onStart&&i.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){let n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}},FZ=new DZ,IZ=class{constructor(e){this.manager=void 0!==e?e:FZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},kZ={},OZ=class extends Error{constructor(e,t){super(e),this.response=t}},LZ=class extends IZ{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=TZ.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==kZ[e])return void kZ[e].push({onLoad:t,onProgress:n,onError:r});kZ[e]=[],kZ[e].push({onLoad:t,onProgress:n,onError:r});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(t.status,typeof ReadableStream>"u"||void 0===t.body||void 0===t.body.getReader)return t;let n=kZ[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),o=i?parseInt(i):0,a=0!==o,s=0,l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;let r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){let t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new OZ(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{TZ.add(e,t);let n=kZ[e];delete kZ[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{let n=kZ[e];if(void 0===n)throw this.manager.itemError(e),t;delete kZ[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},RZ=class extends IZ{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,o=TZ.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;let a=vG("img");function s(){c(),TZ.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}},UZ=class extends IZ{constructor(e){super(e)}load(e,t,n,r){let i=new OG,o=new RZ(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}},zZ=class extends Hq{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new PG(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}},NZ=class extends zZ{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Hq.DEFAULT_UP),this.updateMatrix(),this.groundColor=new PG(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},jZ=new gq,HZ=new jG,QZ=new jG,VZ=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new hG(512,512),this.map=null,this.mapPass=null,this.matrix=new gq,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new XK,this._frameExtents=new hG(1,1),this._viewportCount=1,this._viewports=[new LG(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;HZ.setFromMatrixPosition(e.matrixWorld),t.position.copy(HZ),QZ.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(QZ),t.updateMatrixWorld(),jZ.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jZ),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(jZ)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},WZ=class extends VZ{constructor(){super(new zK(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=2*tG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},GZ=class extends zZ{constructor(e,t,n=0,r=Math.PI/3,i=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hq.DEFAULT_UP),this.updateMatrix(),this.target=new Hq,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new WZ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},qZ=new gq,KZ=new jG,YZ=new jG,XZ=class extends VZ{constructor(){super(new zK(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new hG(4,2),this._viewportCount=6,this._viewports=[new LG(2,1,1,1),new LG(0,1,1,1),new LG(3,1,1,1),new LG(1,1,1,1),new LG(3,0,1,1),new LG(1,0,1,1)],this._cubeDirections=[new jG(1,0,0),new jG(-1,0,0),new jG(0,0,1),new jG(0,0,-1),new jG(0,1,0),new jG(0,-1,0)],this._cubeUps=[new jG(0,1,0),new jG(0,1,0),new jG(0,1,0),new jG(0,1,0),new jG(0,0,1),new jG(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),KZ.setFromMatrixPosition(e.matrixWorld),n.position.copy(KZ),YZ.copy(n.position),YZ.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(YZ),n.updateMatrixWorld(),r.makeTranslation(-KZ.x,-KZ.y,-KZ.z),qZ.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qZ)}},$Z=class extends zZ{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new XZ}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},JZ=class extends VZ{constructor(){super(new uY(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},ZZ=class extends zZ{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hq.DEFAULT_UP),this.updateMatrix(),this.target=new Hq,this.shadow=new JZ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},e0=class extends mK{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},t0=class extends IZ{constructor(e){super(e)}load(e,t,n,r){let i=this,o=new LZ(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r&&r(o),i.manager.itemError(e)}}),n,r)}parse(e){let t={},n={};function r(e,r){if(void 0!==t[r])return t[r];let i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];let r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=gG(i.type,o),s=new k$(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}let i=e.isInstancedBufferGeometry?new e0:new mK,o=e.data.index;if(void 0!==o){let e=gG(o.type,o.array);i.setIndex(new oK(e,1))}let a=e.data.attributes;for(let u in a){let t,n=a[u];if(n.isInterleavedBufferAttribute){let i=r(e.data,n.data);t=new L$(i,n.itemSize,n.offset,n.normalized)}else{let e=gG(n.type,n.array);t=new(n.isInstancedBufferAttribute?H$:oK)(e,n.itemSize,n.normalized)}void 0!==n.name&&(t.name=n.name),void 0!==n.usage&&t.setUsage(n.usage),void 0!==n.updateRange&&(t.updateRange.offset=n.updateRange.offset,t.updateRange.count=n.updateRange.count),i.setAttribute(u,t)}let s=e.data.morphAttributes;if(s)for(let u in s){let t=s[u],n=[];for(let i=0,o=t.length;i<o;i++){let o,a=t[i];if(a.isInterleavedBufferAttribute){let t=r(e.data,a.data);o=new L$(t,a.itemSize,a.offset,a.normalized)}else{let e=gG(a.type,a.array);o=new oK(e,a.itemSize,a.normalized)}void 0!==a.name&&(o.name=a.name),n.push(o)}i.morphAttributes[u]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);let l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,d=l.length;u!==d;++u){let e=l[u];i.addGroup(e.start,e.count,e.materialIndex)}let c=e.data.boundingSphere;if(void 0!==c){let e=new jG;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new lq(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}},n0=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=r0(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=r0();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function r0(){return(typeof performance>"u"?Date:performance).now()}var i0=class{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;let e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){let e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){NG.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){let o=this._workIndex*i;NG.multiplyQuaternionsFlat(e,o,e,t,e,n),NG.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){let o=1-r;for(let a=0;a!==i;++a){let i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){let i=t+o;e[i]=e[i]+e[n+o]*r}}},o0="\\[\\]\\.:\\/",a0=new RegExp("["+o0+"]","g"),s0="[^"+o0+"]",l0="[^"+o0.replace("\\.","")+"]",c0=/((?:WC+[\/:])*)/.source.replace("WC",s0),u0=/(WCOD+)?/.source.replace("WCOD",l0),d0=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",s0),h0=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",s0),p0=new RegExp("^"+c0+u0+d0+h0+"$"),A0=["material","materials","bones","map"],f0=class{constructor(e,t,n){this.path=t,this.parsedPath=n||f0.parseTrackName(t),this.node=f0.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new f0.Composite(e,t,n):new f0(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(a0,"")}static parseTrackName(e){let t=p0.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){let e=n.nodeName.substring(r+1);-1!==A0.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(e){for(let r=0;r<e.length;r++){let i=e[r];if(i.name===t||i.uuid===t)return i;let o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=f0.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return;if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return;if(!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return;if(!e.material.map)return;e=e.material.map;break;default:if(void 0===e[n])return;e=e[n]}if(void 0!==r){if(void 0===e[r])return;e=e[r]}}let o=e[r];if(void 0===o){t.nodeName;return}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return;if(!e.geometry.morphAttributes)return;void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};f0.Composite=class{constructor(e,t,n){let r=n||f0.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},f0.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},f0.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},f0.prototype.GetterByBindingType=[f0.prototype._getValue_direct,f0.prototype._getValue_array,f0.prototype._getValue_arrayElement,f0.prototype._getValue_toArray],f0.prototype.SetterByBindingTypeAndVersioning=[[f0.prototype._setValue_direct,f0.prototype._setValue_direct_setNeedsUpdate,f0.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[f0.prototype._setValue_array,f0.prototype._setValue_array_setNeedsUpdate,f0.prototype._setValue_array_setMatrixWorldNeedsUpdate],[f0.prototype._setValue_arrayElement,f0.prototype._setValue_arrayElement_setNeedsUpdate,f0.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[f0.prototype._setValue_fromArray,f0.prototype._setValue_fromArray_setNeedsUpdate,f0.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var m0=class{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;let i=t.tracks,o=i.length,a=new Array(o),s={endingStart:OW,endingEnd:OW};for(let l=0;l!==o;++l){let e=i[l].createInterpolant(null);a[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let r=this._mixer,i=r.time,o=this.timeScale,a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);let i=this._startTime;if(null!==i){let r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);let o=this._updateTime(t),a=this._updateWeight(e);if(a>0){let e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(null!==n){let r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,o=n===DW;if(0===e)return-1===i||!o||1&~i?r:t-r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){let n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);let a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){let t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&!(1&~i))return t-r}return r}_setEndings(e,t,n){let r=this._interpolantSettings;n?(r.endingStart=LW,r.endingEnd=LW):(r.endingStart=e?this.zeroSlopeAtStart?LW:OW:RW,r.endingEnd=t?this.zeroSlopeAtEnd?LW:OW:RW)}_scheduleFading(e,t,n){let r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);let a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}},g0=new Float32Array(1),v0=class extends $W{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==i;++u){let e=r[u],i=e.name,l=c[i];if(void 0!==l)++l.referenceCount,o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,i));continue}let r=t&&t._propertyBindings[u].binding.parsedPath;l=new i0(f0.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,i),o[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){let r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{let t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;let i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){let e=t[n];0==--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){let r=this._bindingsByRootAndName,i=this._bindings,o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new vZ(new Float32Array(2),new Float32Array(2),1,g0),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){let r=t||this._root,i=r.uuid,o="string"==typeof e?MZ.findByName(r,e):e,a=null!==o?o.uuid:e,s=this._actionsByClip[a],l=null;if(void 0===n&&(n=null!==o?o.blendMode:UW),void 0!==s){let e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;let c=new m0(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c}existingAction(e,t){let n=t||this._root,r=n.uuid,i="string"==typeof e?MZ.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){let e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;let t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(r,e,i,o);let a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){let e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){let r=e[n];this._deactivateAction(r);let i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let i in n){let e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}let r=this._bindingsByRootAndName[t];if(void 0!==r)for(let i in r){let e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){let n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},y0=class{constructor(e){this.value=e}clone(){return new y0(void 0===this.value.clone?this.value:this.value.clone())}},b0=class{constructor(e,t,n=0,r=1/0){this.ray=new mq(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Mq,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t)}intersectObject(e,t=!0,n=[]){return x0(e,this,n,t),n.sort(w0),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)x0(e[r],this,n,t);return n.sort(w0),n}};function w0(e,t){return e.distance-t.distance}function x0(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){let r=e.children;for(let e=0,i=r.length;e<i;e++)x0(r[e],t,n,!0)}}var C0=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(rG(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},S0=new hG,B0=class{constructor(e=new hG(1/0,1/0),t=new hG(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=S0.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return S0.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},_0=new jG,E0=new jG,M0=class{constructor(e=new jG,t=new jG){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){_0.subVectors(e,this.start),E0.subVectors(this.end,this.start);let n=E0.dot(E0),r=E0.dot(_0)/n;return t&&(r=rG(r,0,1)),r}closestPointToPoint(e,t,n){let r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},P0=new jG,T0=class extends Hq{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new mK,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){let e=o/s*Math.PI*2,t=a/s*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new lK(r,3));let i=new Y$({fog:!1,toneMapped:!1});this.cone=new iJ(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),P0.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(P0),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},D0=class extends TK{constructor(e,t,n){super(new sZ(t,4,2),new nK({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},F0=new jG,I0=new jG,k0=new jG,O0=class extends Hq{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new mK;r.setAttribute("position",new lK([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new Y$({fog:!1,toneMapped:!1});this.lightPlane=new tJ(r,i),this.add(this.lightPlane),r=new mK,r.setAttribute("position",new lK([0,0,0,0,0,1],3)),this.targetLine=new tJ(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),F0.setFromMatrixPosition(this.light.matrixWorld),I0.setFromMatrixPosition(this.light.target.matrixWorld),k0.subVectors(I0,F0),this.lightPlane.lookAt(I0),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(I0),this.targetLine.scale.z=k0.length()}},L0=new jG,R0=new UK,U0=class extends iJ{constructor(e){let t=new mK,n=new Y$({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={};function a(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new lK(r,3)),t.setAttribute("color",new lK(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();let l=new PG(16755200),c=new PG(16711680),u=new PG(43775),d=new PG(16777215),h=new PG(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,r,i){let o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;R0.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),z0("c",t,e,R0,0,0,-1),z0("t",t,e,R0,0,0,1),z0("n1",t,e,R0,-1,-1,-1),z0("n2",t,e,R0,1,-1,-1),z0("n3",t,e,R0,-1,1,-1),z0("n4",t,e,R0,1,1,-1),z0("f1",t,e,R0,-1,-1,1),z0("f2",t,e,R0,1,-1,1),z0("f3",t,e,R0,-1,1,1),z0("f4",t,e,R0,1,1,1),z0("u1",t,e,R0,.7,1.1,-1),z0("u2",t,e,R0,-.7,1.1,-1),z0("u3",t,e,R0,0,2,-1),z0("cf1",t,e,R0,-1,0,1),z0("cf2",t,e,R0,1,0,1),z0("cf3",t,e,R0,0,-1,1),z0("cf4",t,e,R0,0,1,1),z0("cn1",t,e,R0,-1,0,-1),z0("cn2",t,e,R0,1,0,-1),z0("cn3",t,e,R0,0,-1,-1),z0("cn4",t,e,R0,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function z0(e,t,n,r,i,o,a){L0.set(i,o,a).unproject(r);let s=t[e];if(void 0!==s){let e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],L0.x,L0.y,L0.z)}}var N0=class extends iJ{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new mK;r.setIndex(new oK(n,1)),r.setAttribute("position",new lK([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Y$({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},j0=class extends iJ{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new mK;n.setAttribute("position",new lK(t,3)),n.setAttribute("color",new lK([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new Y$({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){let r=new PG,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},H0=function(){let e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){let e=l-127;e<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,i[l]=-e-1,i[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,i[l]=13,i[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}let o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;!(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}();var Q0=Object.freeze({__proto__:null,fromHalfFloat:function(e){let t=e>>10;return H0.uint32View[0]=H0.mantissaTable[H0.offsetTable[t]+(1023&e)]+H0.exponentTable[t],H0.floatView[0]},toHalfFloat:function(e){Math.abs(e),e=rG(e,-65504,65504),H0.floatView[0]=e;let t=H0.uint32View[0],n=t>>23&511;return H0.baseTable[n]+((8388607&t)>>H0.shiftTable[n])}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bQ}})),typeof window<"u"&&(window.__THREE__||(window.__THREE__=bQ));var V0=".",W0=Symbol("target"),G0=Symbol("unsubscribe");function q0(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}var K0=Array.isArray;function Y0(e){return"symbol"==typeof e}var X0={after:(e,t)=>K0(e)?e.slice(t.length):""===t?e:e.slice(t.length+1),concat:(e,t)=>K0(e)?(e=[...e],t&&e.push(t),e):t&&void 0!==t.toString?(""!==e&&(e+=V0),Y0(t)?e+t.toString():e+t):e,initial:e=>{if(K0(e))return e.slice(0,-1);if(""===e)return e;let t=e.lastIndexOf(V0);return-1===t?"":e.slice(0,t)},last:e=>{if(K0(e))return e[e.length-1]||"";if(""===e)return e;let t=e.lastIndexOf(V0);return-1===t?e:e.slice(t+1)},walk:(e,t)=>{if(K0(e))for(let n of e)t(n);else if(""!==e){let n=0,r=e.indexOf(V0);if(-1===r)t(e);else for(;n<e.length;)-1===r&&(r=e.length),t(e.slice(n,r)),n=r+1,r=e.indexOf(V0,n)}},get(e,t){return this.walk(t,(t=>{e&&(e=e[t])})),e}},$0=X0;function J0(e,t,n){return e.isUnsubscribed||t.ignoreSymbols&&Y0(n)||t.ignoreUnderscores&&"_"===n.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(n)}var Z0=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let n=this._getProperties(e),r=n[t];return void 0===r&&(r=Reflect.getOwnPropertyDescriptor(e,t),n[t]=r),r}getProxy(e,t,n,r){if(this.isUnsubscribed)return e;let i=e[r],o=i||e;this._pathCache.set(o,t);let a=this._proxyCache.get(o);return void 0===a&&(a=void 0===i?new Proxy(e,n):e,this._proxyCache.set(o,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,$0.get(t,this.getPath(e)))}defineProperty(e,t,n){return!!Reflect.defineProperty(e,t,n)&&(this.isUnsubscribed||(this._getProperties(e)[t]=n),!0)}setProperty(e,t,n,r,i){if(!this._equals(i,n)||!(t in e)){let i=this._getOwnPropertyDescriptor(e,t);return void 0!==i&&"set"in i?Reflect.set(e,t,n,r):Reflect.set(e,t,n)}return!0}deleteProperty(e,t,n){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let r=this._getDescriptorCache().get(e);r&&(delete r[t],this._pathCache.delete(n))}return!0}return!1}isSameDescriptor(e,t,n){let r=this._getOwnPropertyDescriptor(t,n);return void 0!==e&&void 0!==r&&Object.is(e.value,r.value)&&(e.writable||!1)===(r.writable||!1)&&(e.enumerable||!1)===(r.enumerable||!1)&&(e.configurable||!1)===(r.configurable||!1)&&e.get===r.get&&e.set===r.set}isGetInvariant(e,t){let n=this._getOwnPropertyDescriptor(e,t);return void 0!==n&&!0!==n.configurable&&!0!==n.writable}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function e1(e){return"[object Object]"===toString.call(e)}function t1(){return!0}function n1(e,t){return e.length!==t.length||e.some(((e,n)=>t[n]!==e))}var r1=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),i1=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),o1={push:t1,pop:t1,shift:t1,unshift:t1,copyWithin:n1,reverse:n1,sort:n1,splice:n1,flat:n1,fill:n1},a1=new Set([...r1,...i1,...Object.keys(o1)]);function s1(e,t){if(e.size!==t.size)return!0;for(let n of e)if(!t.has(n))return!0;return!1}var l1=["keys","values","entries"],c1=new Set(["has","toString"]),u1={add:s1,clear:s1,delete:s1,forEach:s1},d1=new Set([...c1,...Object.keys(u1),...l1]);function h1(e,t){if(e.size!==t.size)return!0;let n;for(let[r,i]of e)if(n=t.get(r),n!==i||void 0===n&&!t.has(r))return!0;return!1}var p1=new Set([...c1,"get"]),A1={set:h1,clear:h1,delete:h1,forEach:h1},f1=new Set([...p1,...Object.keys(A1),...l1]),m1=class{constructor(e,t,n,r){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=r,this._changes=r?[]:null,this.clone=void 0===t?e:this._shallowClone(e)}static isHandledMethod(e){return r1.has(e)}_shallowClone(e){let t=e;if(e1(e))t={...e};else if(K0(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map((e=>this._shallowClone(e))));else if(e instanceof Map){t=new Map;for(let[n,r]of e.entries())t.set(n,this._shallowClone(r))}return this._clonedCache.add(t),t}preferredThisArg(e,t,n,r){return e?(K0(r)?this._onIsChanged=o1[t]:r instanceof Set?this._onIsChanged=u1[t]:r instanceof Map&&(this._onIsChanged=A1[t]),r):n}update(e,t,n){let r=$0.after(e,this._path);if("length"!==t){let e=this.clone;$0.walk(r,(t=>{e&&e[t]&&(this._clonedCache.has(e[t])||(e[t]=this._shallowClone(e[t])),e=e[t])})),this._hasOnValidate&&this._changes.push({path:r,property:t,previous:n}),e&&e[t]&&(e[t]=n)}this._isChanged=!0}undo(e){let t;for(let n=this._changes.length-1;-1!==n;n--)t=this._changes[n],$0.get(e,t.path)[t.property]=t.previous}isChanged(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}},g1=class extends m1{static isHandledMethod(e){return a1.has(e)}},v1=class extends m1{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},y1=class extends m1{static isHandledMethod(e){return d1.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},b1=class extends m1{static isHandledMethod(e){return f1.has(e)}undo(e){for(let[t,n]of this.clone.entries())e.set(t,n);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},w1=class extends m1{constructor(e,t,n,r){super(void 0,t,n,r),this._arg1=n[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},x1=class extends m1{constructor(e,t,n,r){super(void 0,t,n,r),this._weakKey=n[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},C1=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return e1(e)||K0(e)||q0(e)}static isHandledMethod(e,t){return e1(e)?m1.isHandledMethod(t):K0(e)?g1.isHandledMethod(t):e instanceof Set?y1.isHandledMethod(t):e instanceof Map?b1.isHandledMethod(t):q0(e)}get isCloning(){return this._stack.length>0}start(e,t,n){let r=m1;K0(e)?r=g1:e instanceof Date?r=v1:e instanceof Set?r=y1:e instanceof Map?r=b1:e instanceof WeakSet?r=w1:e instanceof WeakMap&&(r=x1),this._stack.push(new r(e,t,n,this._hasOnValidate))}update(e,t,n){this._stack[this._stack.length-1].update(e,t,n)}preferredThisArg(e,t,n){let{name:r}=e,i=C1.isHandledMethod(n,r);return this._stack[this._stack.length-1].preferredThisArg(i,r,t,n)}isChanged(e,t,n){return this._stack[this._stack.length-1].isChanged(e,t,n)}undo(e){void 0!==this._previousClone&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},S1={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},B1=(e,t,n={})=>{n={...S1,...n};let r=Symbol("ProxyTarget"),{equals:i,isShallow:o,ignoreDetached:a,details:s}=n,l=new Z0(i),c="function"==typeof n.onValidate,u=new C1(c),d=(e,t,r,i,o)=>!c||u.isCloning||!0===n.onValidate($0.concat(l.getPath(e),t),r,i,o),h=(t,r,i,o)=>{!J0(l,n,r)&&(!a||!l.isDetached(t,e))&&p(l.getPath(t),r,i,o)},p=(e,n,r,i,o)=>{u.isCloning?u.update(e,n,i):t($0.concat(e,n),r,i,o)},A=e=>e&&(e[r]||e),f=(t,i,s,c)=>function(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}(t)||"constructor"===s||o&&!C1.isHandledMethod(i,s)||J0(l,n,s)||l.isGetInvariant(i,s)||a&&l.isDetached(i,e)?t:(void 0===c&&(c=l.getPath(i)),l.getProxy(t,$0.concat(c,s),m,r)),m={get(e,t,n){if(Y0(t)){if(t===r||t===W0)return e;if(t===G0&&!l.isUnsubscribed&&0===l.getPath(e).length)return l.unsubscribe(),e}let i=q0(e)?Reflect.get(e,t):Reflect.get(e,t,n);return f(i,e,t)},set(e,t,n,o){n=A(n);let a=e[r]||e,s=a[t];if(i(s,n)&&t in e)return!0;let c=d(e,t,n,s);return c&&l.setProperty(a,t,n,o,s)?(h(e,t,e[t],s),!0):!c},defineProperty(e,t,n){if(!l.isSameDescriptor(n,e,t)){let r=e[t];d(e,t,n.value,r)&&l.defineProperty(e,t,n,r)&&h(e,t,n.value,r)}return!0},deleteProperty(e,t){if(!Reflect.has(e,t))return!0;let n=Reflect.get(e,t),r=d(e,t,void 0,n);return r&&l.deleteProperty(e,t,n)?(h(e,t,void 0,n),!0):!r},apply(t,n,o){let a=n[r]||n;if(l.isUnsubscribed)return Reflect.apply(t,a,o);if((!1===s||!0!==s&&!s.includes(t.name))&&C1.isHandledType(a)){let r=$0.initial(l.getPath(t)),s=C1.isHandledMethod(a,t.name);u.start(a,r,o);let c=Reflect.apply(t,u.preferredThisArg(t,n,a),s?o.map((e=>A(e))):o),h=u.isChanged(a,i),g=u.stop();if(C1.isHandledType(c)&&s&&(n instanceof Map&&"get"===t.name&&(r=$0.concat(r,o[0])),c=l.getProxy(c,r,m)),h){let n={name:t.name,args:o,result:c},i=u.isCloning?$0.initial(r):r,s=u.isCloning?$0.last(r):"";d($0.get(e,i),s,a,g,n)?p(i,s,a,g,n):u.undo(a)}return(n instanceof Map||n instanceof Set)&&function(e){return"object"==typeof e&&"function"==typeof e.next}(c)?function(e,t,n,r,i){let o=e.next;if("entries"===t.name)e.next=function(){let e=o.call(this);return!1===e.done&&(e.value[0]=i(e.value[0],t,e.value[0],r),e.value[1]=i(e.value[1],t,e.value[0],r)),e};else if("values"===t.name){let a=n[W0].keys();e.next=function(){let e=o.call(this);return!1===e.done&&(e.value=i(e.value,t,a.next().value,r)),e}}else e.next=function(){let e=o.call(this);return!1===e.done&&(e.value=i(e.value,t,e.value,r)),e};return e}(c,t,n,r,f):c}return Reflect.apply(t,n,o)}},g=l.getProxy(e,n.pathAsArray?[]:"",m);return t=t.bind(g),c&&(n.onValidate=n.onValidate.bind(g)),g};B1.target=e=>e&&e[W0]||e,B1.unsubscribe=e=>e[G0]||e;var _1=B1,E1="object"==typeof global&&global&&global.Object===Object&&global,M1="object"==typeof self&&self&&self.Object===Object&&self,P1=E1||M1||Function("return this")(),T1=P1.Symbol,D1=Object.prototype,F1=D1.hasOwnProperty,I1=D1.toString,k1=T1?T1.toStringTag:void 0;var O1=function(e){var t=F1.call(e,k1),n=e[k1];try{e[k1]=void 0;var r=!0}catch{}var i=I1.call(e);return r&&(t?e[k1]=n:delete e[k1]),i},L1=Object.prototype.toString;var R1=function(e){return L1.call(e)},U1=T1?T1.toStringTag:void 0;var z1=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":U1&&U1 in Object(e)?O1(e):R1(e)};var N1=function(e){return null!=e&&"object"==typeof e};var j1=function(e){return"symbol"==typeof e||N1(e)&&"[object Symbol]"==z1(e)};var H1=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},Q1=Array.isArray,V1=1/0,W1=T1?T1.prototype:void 0,G1=W1?W1.toString:void 0;var q1=function e(t){if("string"==typeof t)return t;if(Q1(t))return H1(t,e)+"";if(j1(t))return G1?G1.call(t):"";var n=t+"";return"0"==n&&1/t==-V1?"-0":n},K1=/\s/;var Y1=function(e){for(var t=e.length;t--&&K1.test(e.charAt(t)););return t},X1=/^\s+/;var $1=function(e){return e&&e.slice(0,Y1(e)+1).replace(X1,"")};var J1=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Z1=/^[-+]0x[0-9a-f]+$/i,e2=/^0b[01]+$/i,t2=/^0o[0-7]+$/i,n2=parseInt;var r2=function(e){if("number"==typeof e)return e;if(j1(e))return NaN;if(J1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=J1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$1(e);var n=e2.test(e);return n||t2.test(e)?n2(e.slice(2),n?2:8):Z1.test(e)?NaN:+e};var i2=function(e){return e};var o2,a2=function(e){if(!J1(e))return!1;var t=z1(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},s2=P1["__core-js_shared__"],l2=(o2=/[^.]+$/.exec(s2&&s2.keys&&s2.keys.IE_PROTO||""))?"Symbol(src)_1."+o2:"";var c2=function(e){return!!l2&&l2 in e},u2=Function.prototype.toString;var d2=function(e){if(null!=e){try{return u2.call(e)}catch{}try{return e+""}catch{}}return""},h2=/^\[object .+?Constructor\]$/,p2=Function.prototype,A2=Object.prototype,f2=p2.toString,m2=A2.hasOwnProperty,g2=RegExp("^"+f2.call(m2).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var v2=function(e){return!(!J1(e)||c2(e))&&(a2(e)?g2:h2).test(d2(e))};var y2=function(e,t){return null==e?void 0:e[t]};var b2=function(e,t){var n=y2(e,t);return v2(n)?n:void 0},w2=b2(P1,"WeakMap"),x2=Object.create,C2=function(){function e(){}return function(t){if(!J1(t))return{};if(x2)return x2(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),S2=C2;var B2=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var _2=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},E2=Date.now;var M2=function(e){var t=0,n=0;return function(){var r=E2(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};var P2=function(e){return function(){return e}},T2=function(){try{var e=b2(Object,"defineProperty");return e({},"",{}),e}catch{}}(),D2=T2,F2=D2?function(e,t){return D2(e,"toString",{configurable:!0,enumerable:!1,value:P2(t),writable:!0})}:i2,I2=M2(F2);var k2=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},O2=/^(?:0|[1-9]\d*)$/;var L2=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&("number"==n||"symbol"!=n&&O2.test(e))&&e>-1&&e%1==0&&e<t};var R2=function(e,t,n){"__proto__"==t&&D2?D2(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var U2=function(e,t){return e===t||e!=e&&t!=t},z2=Object.prototype.hasOwnProperty;var N2=function(e,t,n){var r=e[t];(!z2.call(e,t)||!U2(r,n)||void 0===n&&!(t in e))&&R2(e,t,n)};var j2=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?R2(n,s,l):N2(n,s,l)}return n},H2=Math.max;var Q2=function(e,t,n){return t=H2(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=H2(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),B2(e,this,s)}};var V2=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var W2=function(e){return null!=e&&V2(e.length)&&!a2(e)},G2=Object.prototype;var q2=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||G2)};var K2=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Y2=function(e){return N1(e)&&"[object Arguments]"==z1(e)},X2=Object.prototype,$2=X2.hasOwnProperty,J2=X2.propertyIsEnumerable,Z2=Y2(function(){return arguments}())?Y2:function(e){return N1(e)&&$2.call(e,"callee")&&!J2.call(e,"callee")},e3=Z2;var t3=function(){return!1},n3="object"==typeof exports&&exports&&!exports.nodeType&&exports,r3=n3&&"object"==typeof module&&module&&!module.nodeType&&module,i3=r3&&r3.exports===n3?P1.Buffer:void 0,o3=(i3?i3.isBuffer:void 0)||t3,a3={};a3["[object Float32Array]"]=a3["[object Float64Array]"]=a3["[object Int8Array]"]=a3["[object Int16Array]"]=a3["[object Int32Array]"]=a3["[object Uint8Array]"]=a3["[object Uint8ClampedArray]"]=a3["[object Uint16Array]"]=a3["[object Uint32Array]"]=!0,a3["[object Arguments]"]=a3["[object Array]"]=a3["[object ArrayBuffer]"]=a3["[object Boolean]"]=a3["[object DataView]"]=a3["[object Date]"]=a3["[object Error]"]=a3["[object Function]"]=a3["[object Map]"]=a3["[object Number]"]=a3["[object Object]"]=a3["[object RegExp]"]=a3["[object Set]"]=a3["[object String]"]=a3["[object WeakMap]"]=!1;var s3=function(e){return N1(e)&&V2(e.length)&&!!a3[z1(e)]};var l3=function(e){return function(t){return e(t)}},c3="object"==typeof exports&&exports&&!exports.nodeType&&exports,u3=c3&&"object"==typeof module&&module&&!module.nodeType&&module,d3=u3&&u3.exports===c3&&E1.process,h3=function(){try{return u3&&u3.require&&u3.require("util").types||d3&&d3.binding&&d3.binding("util")}catch{}}(),p3=h3&&h3.isTypedArray,A3=p3?l3(p3):s3,f3=Object.prototype.hasOwnProperty;var m3=function(e,t){var n=Q1(e),r=!n&&e3(e),i=!n&&!r&&o3(e),o=!n&&!r&&!i&&A3(e),a=n||r||i||o,s=a?K2(e.length,String):[],l=s.length;for(var c in e)(t||f3.call(e,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||L2(c,l)))&&s.push(c);return s};var g3=function(e,t){return function(n){return e(t(n))}},v3=g3(Object.keys,Object),y3=Object.prototype.hasOwnProperty;var b3=function(e){if(!q2(e))return v3(e);var t=[];for(var n in Object(e))y3.call(e,n)&&"constructor"!=n&&t.push(n);return t};var w3=function(e){return W2(e)?m3(e):b3(e)};var x3=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},C3=Object.prototype.hasOwnProperty;var S3=function(e){if(!J1(e))return x3(e);var t=q2(e),n=[];for(var r in e)"constructor"==r&&(t||!C3.call(e,r))||n.push(r);return n};var B3=function(e){return W2(e)?m3(e,!0):S3(e)},_3=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E3=/^\w*$/;var M3=function(e,t){if(Q1(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!j1(e))||(E3.test(e)||!_3.test(e)||null!=t&&e in Object(t))},P3=b2(Object,"create");var T3=function(){this.__data__=P3?P3(null):{},this.size=0};var D3=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},F3=Object.prototype.hasOwnProperty;var I3=function(e){var t=this.__data__;if(P3){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return F3.call(t,e)?t[e]:void 0},k3=Object.prototype.hasOwnProperty;var O3=function(e){var t=this.__data__;return P3?void 0!==t[e]:k3.call(t,e)};var L3=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=P3&&void 0===t?"__lodash_hash_undefined__":t,this};function R3(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}R3.prototype.clear=T3,R3.prototype.delete=D3,R3.prototype.get=I3,R3.prototype.has=O3,R3.prototype.set=L3;var U3=R3;var z3=function(){this.__data__=[],this.size=0};var N3=function(e,t){for(var n=e.length;n--;)if(U2(e[n][0],t))return n;return-1},j3=Array.prototype.splice;var H3=function(e){var t=this.__data__,n=N3(t,e);return!(n<0)&&(n==t.length-1?t.pop():j3.call(t,n,1),--this.size,!0)};var Q3=function(e){var t=this.__data__,n=N3(t,e);return n<0?void 0:t[n][1]};var V3=function(e){return N3(this.__data__,e)>-1};var W3=function(e,t){var n=this.__data__,r=N3(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function G3(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}G3.prototype.clear=z3,G3.prototype.delete=H3,G3.prototype.get=Q3,G3.prototype.has=V3,G3.prototype.set=W3;var q3=G3,K3=b2(P1,"Map");var Y3=function(){this.size=0,this.__data__={hash:new U3,map:new(K3||q3),string:new U3}};var X3=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var $3=function(e,t){var n=e.__data__;return X3(t)?n["string"==typeof t?"string":"hash"]:n.map};var J3=function(e){var t=$3(this,e).delete(e);return this.size-=t?1:0,t};var Z3=function(e){return $3(this,e).get(e)};var e5=function(e){return $3(this,e).has(e)};var t5=function(e,t){var n=$3(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function n5(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}n5.prototype.clear=Y3,n5.prototype.delete=J3,n5.prototype.get=Z3,n5.prototype.has=e5,n5.prototype.set=t5;var r5=n5;function i5(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i5.Cache||r5),n}i5.Cache=r5;var o5=i5;var a5=function(e){var t=o5(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},s5=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l5=/\\(\\)?/g,c5=a5((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s5,(function(e,n,r,i){t.push(r?i.replace(l5,"$1"):n||e)})),t})),u5=c5;var d5=function(e){return null==e?"":q1(e)};var h5=function(e,t){return Q1(e)?e:M3(e,t)?[e]:u5(d5(e))},p5=1/0;var A5=function(e){if("string"==typeof e||j1(e))return e;var t=e+"";return"0"==t&&1/e==-p5?"-0":t};var f5=function(e,t){for(var n=0,r=(t=h5(t,e)).length;null!=e&&n<r;)e=e[A5(t[n++])];return n&&n==r?e:void 0};var m5=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},g5=T1?T1.isConcatSpreadable:void 0;var v5=function(e){return Q1(e)||e3(e)||!!(g5&&e&&e[g5])};var y5=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=v5),o||(o=[]);++a<s;){var l=t[a];n>0&&r(l)?n>1?e(l,n-1,r,i,o):m5(o,l):i||(o[o.length]=l)}return o};var b5=function(e){return(null==e?0:e.length)?y5(e,1):[]};var w5=function(e){return I2(Q2(e,void 0,b5),e+"")},x5=g3(Object.getPrototypeOf,Object),C5=Function.prototype,S5=Object.prototype,B5=C5.toString,_5=S5.hasOwnProperty,E5=B5.call(Object);var M5=function(e){if(!N1(e)||"[object Object]"!=z1(e))return!1;var t=x5(e);if(null===t)return!0;var n=_5.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&B5.call(n)==E5};var P5=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var T5=function(){this.__data__=new q3,this.size=0};var D5=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var F5=function(e){return this.__data__.get(e)};var I5=function(e){return this.__data__.has(e)};var k5=function(e,t){var n=this.__data__;if(n instanceof q3){var r=n.__data__;if(!K3||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new r5(r)}return n.set(e,t),this.size=n.size,this};function O5(e){var t=this.__data__=new q3(e);this.size=t.size}O5.prototype.clear=T5,O5.prototype.delete=D5,O5.prototype.get=F5,O5.prototype.has=I5,O5.prototype.set=k5;var L5=O5;var R5=function(e,t){return e&&j2(t,w3(t),e)};var U5=function(e,t){return e&&j2(t,B3(t),e)},z5="object"==typeof exports&&exports&&!exports.nodeType&&exports,N5=z5&&"object"==typeof module&&module&&!module.nodeType&&module,j5=N5&&N5.exports===z5?P1.Buffer:void 0,H5=j5?j5.allocUnsafe:void 0;var Q5=function(e,t){if(t)return e.slice();var n=e.length,r=H5?H5(n):new e.constructor(n);return e.copy(r),r};var V5=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var W5=function(){return[]},G5=Object.prototype.propertyIsEnumerable,q5=Object.getOwnPropertySymbols,K5=q5?function(e){return null==e?[]:(e=Object(e),V5(q5(e),(function(t){return G5.call(e,t)})))}:W5,Y5=K5;var X5=function(e,t){return j2(e,Y5(e),t)},$5=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)m5(t,Y5(e)),e=x5(e);return t}:W5,J5=$5;var Z5=function(e,t){return j2(e,J5(e),t)};var e4=function(e,t,n){var r=t(e);return Q1(e)?r:m5(r,n(e))};var t4=function(e){return e4(e,w3,Y5)};var n4=function(e){return e4(e,B3,J5)},r4=b2(P1,"DataView"),i4=b2(P1,"Promise"),o4=b2(P1,"Set"),a4="[object Map]",s4="[object Promise]",l4="[object Set]",c4="[object WeakMap]",u4="[object DataView]",d4=d2(r4),h4=d2(K3),p4=d2(i4),A4=d2(o4),f4=d2(w2),m4=z1;(r4&&m4(new r4(new ArrayBuffer(1)))!=u4||K3&&m4(new K3)!=a4||i4&&m4(i4.resolve())!=s4||o4&&m4(new o4)!=l4||w2&&m4(new w2)!=c4)&&(m4=function(e){var t=z1(e),n="[object Object]"==t?e.constructor:void 0,r=n?d2(n):"";if(r)switch(r){case d4:return u4;case h4:return a4;case p4:return s4;case A4:return l4;case f4:return c4}return t});var g4=m4,v4=Object.prototype.hasOwnProperty;var y4=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&v4.call(e,"index")&&(n.index=e.index,n.input=e.input),n},b4=P1.Uint8Array;var w4=function(e){var t=new e.constructor(e.byteLength);return new b4(t).set(new b4(e)),t};var x4=function(e,t){var n=t?w4(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},C4=/\w*$/;var S4=function(e){var t=new e.constructor(e.source,C4.exec(e));return t.lastIndex=e.lastIndex,t},B4=T1?T1.prototype:void 0,_4=B4?B4.valueOf:void 0;var E4=function(e){return _4?Object(_4.call(e)):{}};var M4=function(e,t){var n=t?w4(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var P4=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return w4(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return x4(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return M4(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return S4(e);case"[object Symbol]":return E4(e)}};var T4=function(e){return"function"!=typeof e.constructor||q2(e)?{}:S2(x5(e))};var D4=function(e){return N1(e)&&"[object Map]"==g4(e)},F4=h3&&h3.isMap,I4=F4?l3(F4):D4;var k4=function(e){return N1(e)&&"[object Set]"==g4(e)},O4=h3&&h3.isSet,L4=O4?l3(O4):k4,R4="[object Arguments]",U4="[object Function]",z4="[object Object]",N4={};N4[R4]=N4["[object Array]"]=N4["[object ArrayBuffer]"]=N4["[object DataView]"]=N4["[object Boolean]"]=N4["[object Date]"]=N4["[object Float32Array]"]=N4["[object Float64Array]"]=N4["[object Int8Array]"]=N4["[object Int16Array]"]=N4["[object Int32Array]"]=N4["[object Map]"]=N4["[object Number]"]=N4[z4]=N4["[object RegExp]"]=N4["[object Set]"]=N4["[object String]"]=N4["[object Symbol]"]=N4["[object Uint8Array]"]=N4["[object Uint8ClampedArray]"]=N4["[object Uint16Array]"]=N4["[object Uint32Array]"]=!0,N4["[object Error]"]=N4[U4]=N4["[object WeakMap]"]=!1;var j4=function e(t,n,r,i,o,a){var s,l=1&n,c=2&n,u=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!J1(t))return t;var d=Q1(t);if(d){if(s=y4(t),!l)return _2(t,s)}else{var h=g4(t),p=h==U4||"[object GeneratorFunction]"==h;if(o3(t))return Q5(t,l);if(h==z4||h==R4||p&&!o){if(s=c||p?{}:T4(t),!l)return c?Z5(t,U5(s,t)):X5(t,R5(s,t))}else{if(!N4[h])return o?t:{};s=P4(t,h,l)}}a||(a=new L5);var A=a.get(t);if(A)return A;a.set(t,s),L4(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):I4(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var f=d?void 0:(u?c?n4:t4:c?B3:w3)(t);return k2(f||t,(function(i,o){f&&(i=t[o=i]),N2(s,o,e(i,n,r,o,t,a))})),s};var H4=function(e){return j4(e,5)};var Q4=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var V4=function(e){return this.__data__.has(e)};function W4(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r5;++t<n;)this.add(e[t])}W4.prototype.add=W4.prototype.push=Q4,W4.prototype.has=V4;var G4=W4;var q4=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var K4=function(e,t){return e.has(t)};var Y4=function(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&n?new G4:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var A=e[d],f=t[d];if(r)var m=a?r(f,A,d,t,e,o):r(A,f,d,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!q4(t,(function(e,t){if(!K4(p,t)&&(A===e||i(A,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(A!==f&&!i(A,f,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h};var X4=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var $4=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},J4=T1?T1.prototype:void 0,Z4=J4?J4.valueOf:void 0;var e6=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new b4(e),new b4(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return U2(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=X4;case"[object Set]":var l=1&r;if(s||(s=$4),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=Y4(s(e),s(t),r,i,o,a);return a.delete(e),u;case"[object Symbol]":if(Z4)return Z4.call(e)==Z4.call(t)}return!1},t6=Object.prototype.hasOwnProperty;var n6=function(e,t,n,r,i,o){var a=1&n,s=t4(e),l=s.length;if(l!=t4(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:t6.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var A=a;++c<l;){var f=e[u=s[c]],m=t[u];if(r)var g=a?r(m,f,u,t,e,o):r(f,m,u,e,t,o);if(!(void 0===g?f===m||i(f,m,n,r,o):g)){p=!1;break}A||(A="constructor"==u)}if(p&&!A){var v=e.constructor,y=t.constructor;v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(p=!1)}return o.delete(e),o.delete(t),p},r6="[object Arguments]",i6="[object Array]",o6="[object Object]",a6=Object.prototype.hasOwnProperty;var s6=function(e,t,n,r,i,o){var a=Q1(e),s=Q1(t),l=a?i6:g4(e),c=s?i6:g4(t),u=(l=l==r6?o6:l)==o6,d=(c=c==r6?o6:c)==o6,h=l==c;if(h&&o3(e)){if(!o3(t))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new L5),a||A3(e)?Y4(e,t,n,r,i,o):e6(e,t,l,n,r,i,o);if(!(1&n)){var p=u&&a6.call(e,"__wrapped__"),A=d&&a6.call(t,"__wrapped__");if(p||A){var f=p?e.value():e,m=A?t.value():t;return o||(o=new L5),i(f,m,n,r,o)}}return!!h&&(o||(o=new L5),n6(e,t,n,r,i,o))};var l6=function e(t,n,r,i,o){return t===n||(null==t||null==n||!N1(t)&&!N1(n)?t!=t&&n!=n:s6(t,n,r,i,e,o))};var c6=function(e,t){return null!=e&&t in Object(e)};var u6=function(e,t,n){for(var r=-1,i=(t=h5(t,e)).length,o=!1;++r<i;){var a=A5(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&V2(i)&&L2(a,i)&&(Q1(e)||e3(e))};var d6=function(e,t){return null!=e&&u6(e,t,c6)},h6=function(){return P1.Date.now()},p6=Math.max,A6=Math.min;var f6=function(e,t,n){var r,i,o,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function A(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function f(){var e=h6();if(A(e))return m(e);s=setTimeout(f,function(e){var n=t-(e-l);return d?A6(n,o-(e-c)):n}(e))}function m(e){return s=void 0,h&&r?p(e):(r=i=void 0,a)}function g(){var e=h6(),n=A(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(f,t),u?p(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(f,t),p(l)}return void 0===s&&(s=setTimeout(f,t)),a}return t=r2(t)||0,J1(n)&&(u=!!n.leading,o=(d="maxWait"in n)?p6(r2(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),g.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},g.flush=function(){return void 0===s?a:m(h6())},g};var m6=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var g6=function(e,t){return e>t};var v6=function(e,t){return t.length<2?e:f5(e,P5(t,0,-1))};var y6=function(e,t){return l6(e,t)};var b6=function(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!j1(a):n(a,s)))var s=a,l=o}return l};var w6=function(e){return e&&e.length?b6(e,i2,g6):void 0};var x6=function(e,t){return t=h5(t,e),null==(e=v6(e,t))||delete e[A5(m6(t))]};var C6=function(e){return M5(e)?void 0:e},S6=w5((function(e,t){var n={};if(null==e)return n;var r=!1;t=H1(t,(function(t){return t=h5(t,e),r||(r=t.length>1),t})),j2(e,n4(e),n),r&&(n=j4(n,7,C6));for(var i=t.length;i--;)x6(n,t[i]);return n})),B6=S6;var _6=function(e,t,n,r){if(!J1(e))return e;for(var i=-1,o=(t=h5(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=A5(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=J1(u)?u:L2(t[i+1])?[]:{})}N2(s,l,c),s=s[l]}return e};var E6=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=f5(e,a);n(s,a)&&_6(o,h5(a,e),s)}return o};var M6=function(e,t){return E6(e,t,(function(t,n){return d6(e,n)}))},P6=w5((function(e,t){return null==e?{}:M6(e,t)})),T6=P6;var D6=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return J1(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),f6(e,t,{leading:r,maxWait:t,trailing:i})};function F6(e){for(let t of Object.keys(e))void 0===e[t]&&delete e[t];return e}function I6(e,t){return Object.setPrototypeOf(e,t),e}var k6=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().includes(" electron/");k6&&(()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");e?window.localStorage.setItem("desktop-app-version",e):window.localStorage.getItem("desktop-app-version")})();var O6=!(typeof window>"u")&&window.navigator.platform.toUpperCase().includes("MAC"),L6=!(typeof window>"u")&&(/iPad|iPhone|iPod/.test(window.navigator.userAgent)||O6&&"ontouchend"in document),R6=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,U6=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0),z6=(()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)})(),N6=Number((()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]})());function j6(e){return Array.isArray(e)?e:[e]}function H6(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}function Q6(e){return O6?e.metaKey:e.ctrlKey}var V6=[],W6={},G6={},q6={};function K6(e){V6.includes(e)||V6.push(e)}function Y6(e){delete W6[e.pointerId];for(let t=0;t<V6.length;t++)if(V6[t].pointerId===e.pointerId){V6.splice(t,1);break}}function X6(e){if("touch"!==e.pointerType)return;let t=W6[e.pointerId];void 0===t&&(t={x:0,y:0},W6[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function $6(e){let t=e.pointerId===V6[0].pointerId?V6[1]:V6[0];return W6[t.pointerId]}function J6(e){G6[e.key]=!0,q6[e.key]=void 0===q6[e.key]?1:q6[e.key]+1}function Z6(e){if(O6&&G6.Meta)for(let t in G6)G6[t]=!1;else G6[e.key]=!1;q6={}}var e8,t8,n8=new Promise((e=>{e8=e}));function r8(){if(t8)return t8;return t8=async function(){let e=nF((()=>import("./navmesh-CVA1PEDv.js")),[]),[t,n]=await Promise.all([e,fetch("https://unpkg.com/@splinetool/navmesh-wasm@1.9.21/build/navmesh.wasm").then((e=>e.arrayBuffer()))]),r=t.default,i=await r({wasmBinary:n});e8(i)}()}var i8,o8,a8=new Promise((e=>{i8=e}));function s8(){if(o8)return o8;return o8=async function(){let e=await nF((()=>import("./physics-OC_TZvlZ.js")),[]);await e.init(),i8(e)}()}var l8=class{modifyById(e,t){let n=this;if(void 0===n[e])throw new Error("not expected");{let r={...n,[e]:t};return Object.setPrototypeOf(r,l8.prototype),r}}add(e,t){var n;return(null==(n=this.runOp({type:1,id:e,data:t}))?void 0:n.data)??this}runOp(e){let t=this;if(1===e.type){let n,r=t[e.id];n=void 0===r?{type:2,id:e.id}:{type:1,id:e.id,data:r};let{id:i,data:o}=e,a={...t,[i]:o};return Object.setPrototypeOf(a,l8.prototype),{data:a,actual:e,reverse:n}}if(2===e.type){let{id:n}=e,r=t[n];if(void 0===r)return null;{let i={...t};return Object.setPrototypeOf(i,l8.prototype),delete i[n],{data:i,actual:e,reverse:{type:1,id:n,data:r}}}}return null}};function c8(e){if(void 0!==e.deepFreeze)return void e.deepFreeze(e);let t=Object.getOwnPropertyNames(e);for(let n of t){let t=e[n];t&&"object"==typeof t&&c8(t)}return Object.freeze(e)}var u8=class extends Error{};function d8(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function h8(e,t,n){if(void 0===e?void 0===t?(e=0,t=10):e=t-10:void 0===t&&(t=e+10),e>t){let n=e;e=t,t=n}let r=[],i=1/(n+1);for(let o=0;o<n;o++){let n=e+(t-e)*(o+.75+.5*Math.random())*i;r.push(n)}return r}function p8(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function A8(e,t){for(let n of e)!0!==t(n.id,n.data)&&A8(n.children,t)}function f8(e,t){if(!0!==t(e.id,e.data))for(let n of e.children)f8(n,t)}var m8,g8=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,g8.prototype)}deepFreeze(){let e=0;for(;e<this.length;)c8(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let n of e.children)this.fillCaches0(n,e.id)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(!t)return e;e=t}return e}isDescendantOf(e,t){for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}data(e){var t;return null==(t=this.get(e))?void 0:t.data}has(e){return void 0!==this.childrenOf(e)}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return null===e?this:null==(t=this.get(e))?void 0:t.children}traverseFrom(e,t){if(null===e)this.traverse(t);else{let n=this.get(e);n&&f8(n,t)}}traverse(e){A8(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return null===e?this:this.get(e).children}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let n=this.parent(e),r=this.childrenArray(n),i=r.findIndex((t=>t.id===e));if(i<0)throw new Error("not expected");let o=r[i];return r=[...r],r[i]={...o,data:t},this.modifyArrayBy(n,r)}}modifyArrayBy(e,t){let n=e,r=t;for(;null!==n;){let e=r,t=n;if(n=this.parent(n),void 0===n)throw new Error;r=this.childrenArray(n);let i=r.findIndex((e=>e.id===t));if(i<0)throw new Error;r=[...r],r[i]={...r[i],children:e}}Object.setPrototypeOf(r,g8.prototype);let i=r;return i.fillCaches(),i}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(void 0!==this.get(e))return!0;for(let n of t)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(e){let{parent:t,fi:n,id:r,data:i,children:o}=e;if(null!==t&&void 0===this.get(t))return null;if(this.checkDuplicatedIdRec(e))return null;{let a=t,s=this.childrenArray(a),l={fi:n,id:r,data:i,children:o};return s=[...s,l],s.sort(((e,t)=>e.fi-t.fi)),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(a,s),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(null===this.get(t))return null;{let n=this.parent(t);if(void 0===n)return null;let r=this.childrenArray(n),i=r.findIndex((e=>e.id===t));e.localIndex=i,r=[...r];let o=r.splice(i,1)[0];return{data:this.modifyArrayBy(n,r),actual:e,reverse:{type:7,...o,parent:n}}}}moveOp(e){let{parent:t,fi:n,id:r}=e;if(null!==t&&void 0===this.get(t))return this.deleteOp({type:8,id:r});if(null!==t){let e=t;for(;null!==e;){if(void 0===e)throw new Error;if(e===r)throw new u8("cyclic tree");e=this.parent(e)}}let i=this.parent(r);if(void 0===i)return null;let o=i,a=this.childrenArray(i),s=a.findIndex((e=>e.id===r));a=[...a];let l=a.splice(s,1)[0],c=this.modifyArrayBy(i,a);i=t,a=c.childrenArray(i);let u=l.fi;return l={...l,fi:n},a=[...a,l],a.sort(((e,t)=>e.fi-t.fi)),e.localIndex=a.indexOf(l),c=c.modifyArrayBy(i,a),{data:c,actual:e,reverse:{type:9,parent:o,fi:u,id:r}}}previous(e,t){if(null===t){let t=this.childrenArray(e);return 0===t.length?null:t[t.length-1].id}let n=null;for(let r of this.childrenArray(e)){if(r.id===t)return n;n=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(void 0!==t){let n=this.childrenArray(t),r=n.findIndex((t=>t.id===e))+1;if(r<n.length)return n[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(void 0!==t){let n=this.childrenArray(t),r=n.findIndex((t=>t.id===e))-1;return r>=0?this.traverseSortPrevious(n[r].id):t}}getAllSorted(e){let t=[];for(let n of e){let e=this.getWithSortKey(n.id);void 0!==e&&t.push({...n,...e})}t.sort(((e,t)=>function(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}(e.sortKey,t.sortKey)));for(let n of t)delete n.sortKey;return t}getWithSortKey(e){var t=e;let n=[],r=this.get(t),i=r;if(void 0!==r){for(;t;)n.splice(0,0,r.fi),null!==(t=this.parent(t))&&(r=this.get(t));return{...i,sortKey:n}}}insertBeforeHelper(e,t,n){return this.insertAfterHelper(e,this.previous(e,t),n)}insertAfterHelper(e,t,n){let r=this.childrenArray(e);if(null===t){if(0===r.length)return h8(0,n,n);{let e=r[0].fi;return h8(e-n,e,n)}}{let i=this.get(t);if(void 0===i||this.parent(t)!==e)throw new Error("illegal args");let o=r.find((e=>e.fi>i.fi));if(void 0===o){let e=r[r.length-1].fi;return h8(e,e+n,n)}return h8(i.fi,o.fi,n)}}};(m8||(m8={})).runOp=function(e,t){if(0!==t.type)return null;if(Array.isArray(e)){let n=t.props,r={},i=[...e],o=!1;if(n)for(let e of Object.keys(n)){let t=parseInt(e);if(isNaN(t))throw new Error("wrong index");r[e]=i[t],i[t]=n[e],o=!0}return o?{data:i,actual:t,reverse:{type:0,props:r}}:null}{let n=t.props,r={},i={...e},o=!1;if(n)for(let e of Object.keys(n)){r[e]=i[e];let t=n[e];void 0===t?delete i[e]:i[e]=t,o=!0}return o?{data:i,actual:t,reverse:{type:0,props:r}}:null}};var v8=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,v8.prototype)}deepFreeze(){let e=0;for(;e<this.length;)c8(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return null==(t=this.get(e))?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let n=this,r=n.findIndex((t=>t.id===e));if(r<0)throw new Error("not expected");let i=n[r];return n=[...n],n[r]={...i,data:t},this.modifyArrayBy(n)}}modifyArrayBy(e){Object.setPrototypeOf(e,v8.prototype);let t=e;return typeof process<"u"||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:n,data:r}=e,i=this,o={fi:t,id:n,data:r};return i=[...i,o],i.sort(((e,t)=>e.fi-t.fi)),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:5,id:n}}}deleteOp(e){let{id:t}=e,n=this,r=n.findIndex((e=>e.id===t));if(-1===r)return null;e.localIndex=r,n=[...n];let i=n.splice(r,1)[0];return{data:this.modifyArrayBy(n),actual:e,reverse:{type:4,...i}}}moveOp(e){let{fi:t,id:n}=e,r=this;r=[...r];let i=r.findIndex((e=>e.id===n));if(-1===i)return null;let o=r[i].fi,a={...r[i],fi:t};return r[i]=a,r.sort(((e,t)=>e.fi-t.fi)),e.localIndex=r.indexOf(a),{data:this.modifyArrayBy(r),actual:e,reverse:{type:6,fi:o,id:n}}}previous(e){if(null===e)return 0===this.length?null:this[this.length-1].id;let t=null;for(let n of this){if(n.id===e)return t;t=n.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let n=this;if(null===e){if(0===n.length)return h8(0,t,t);{let e=n[0].fi;return h8(e-t,e,t)}}{let r=this.get(e);if(void 0===r)throw new Error("illegal args");let i=n.find((e=>e.fi>r.fi));if(void 0===i){let e=n[n.length-1].fi;return h8(e,e+t,t)}return h8(r.fi,i.fi,t)}}};function y8(e){return e&&"object"==typeof e&&e instanceof B8}var b8,w8,x8,C8,S8,B8=class{unusedFunOverridesTable(e){}runOp(e){let t=[],n=this,r=0,i={};for(;r<e.path.length;){if(t.push(n),n=void 0===n?void 0:n[e.path[r]],void 0!==n&&!y8(n))return null;r+=1}n=n?d8(n):new B8;for(let[o,a]of Object.entries(e.props)){let e=n[o];i[o]=e,void 0===a?delete n[o]:n[o]=a}for(;r>0;){if(0===Object.keys(n).length){let i=t[r-1];i&&(n=d8(i),delete n[e.path[r-1]])}else{let i=t[r-1];if(i){let t=d8(i);t[e.path[r-1]]=n,n=t}else{let t=new B8;t[e.path[r-1]]=n,n=t}}r-=1}return{data:Object.setPrototypeOf(n,B8.prototype),actual:e,reverse:{...e,props:i}}}};function _8(e,t){if(void 0===t)return;let n=!1,r=e.map((e=>{let r=e.id,i=E8(e.data,t[r]);if(n=n||void 0!==i,void 0===i&&(i=e.data),e.children){let o=_8(e.children,t);return void 0!==o?n=!0:o=e.children,{...e,id:r,data:i,children:o}}return{...e,id:r,data:i}}));return n?r:void 0}function E8(e,t){if(!y8(t))return t;if(e instanceof g8){let n=_8(e,t);return void 0!==n&&Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}if(e instanceof v8)return function(e,t){if(void 0===t)return;let n=!1,r=e.map((e=>{let r=e.id,i=E8(e.data,t[r]);return n=n||void 0!==i,void 0===i&&(i=e.data),{...e,id:r,data:i}}));return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}(e,t);if(Array.isArray(e)){let n=!1,r=e.map(((e,r)=>{let i=E8(e,t[r]);return n=n||void 0!==i,void 0===i&&(i=e),i}));return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}if(e instanceof B8)return M8(e,t);if(e&&"object"==typeof e){let n={},r=!1;for(let[i,o]of Object.entries(e)){let e=E8(o,t[i]);r=r||void 0!==e,void 0===e&&(e=o),n[i]=e}return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}}function M8(e,t){if(void 0===e)return t;if(void 0===t)return e;if(!y8(t))return t;if(!y8(e))return b8.apply(e,t);let n=new Set;for(let i of Object.keys(e))n.add(i);for(let i of Object.keys(t))n.add(i);let r=new B8;for(let i of n){let n=M8(void 0===e?void 0:e[i],void 0===t?void 0:t[i]);r[i]=n}return r}function P8(e,t){let n={cur:[],result:[],len:0};return[e=I8(e,t,n)??e,n.result]}function T8(e,t){return null===e?null:(e.cur[e.len]=t,e.len+=1,e)}function D8(e){e&&(e.len-=1)}function F8(e,t,n){let r=!1,i=e.map((e=>{let i=e.id,o=t[i];if(void 0!==o&&"string"==typeof o&&(r=!0,i=o,null!==n))throw new Error("not supported");let a=I8(e.data,t,T8(n,i));D8(n),r=r||void 0!==a,void 0===a&&(a=e.data);let s=F8(e.children,t,n);return void 0!==s?r=!0:s=e.children,{...e,id:i,data:a,children:s}}));if(r)return i}function I8(e,t,n){if(e instanceof g8){let r=F8(e,t,n);return void 0!==r&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}if(e instanceof v8)return function(e,t,n){let r=!1,i=e.map((e=>{let i=e.id,o=t[i];if(void 0!==o&&"string"==typeof o&&(r=!0,i=o,null!==n))throw new Error("not supported");let a=I8(e.data,t,T8(n,i));return D8(n),r=r||void 0!==a,void 0===a&&(a=e.data),{...e,id:i,data:a}}));if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}(e,t,n);if(Array.isArray(e)){let r=!1,i=e.map(((e,i)=>{let o=I8(e,t,T8(n,i));return D8(n),r=r||void 0!==o,void 0===o&&(o=e),o}));return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}if(e&&"object"==typeof e&&!p8(e)){let r={},i=!1;for(let[o,a]of Object.entries(e))if("name"!==o&&"variableId"!==o){let e=t[o];if("string"==typeof e){if(null!==n)throw new Error("not supported");i=!0,o=e}let s=I8(a,t,T8(n,o));D8(n),i=i||void 0!==s,void 0===s&&(s=a),r[o]=s}else r[o]=a;return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}if("string"==typeof e){let r=t[e];return void 0!==r&&function(e){if(null===e)return null;e.result.push(e.cur.slice(0,e.len))}(n),r}}(w8=b8||(b8={})).apply=function(e,t){return E8(e,t)??e},w8.merge=function(e,t){return M8(e,t)},w8.filterOp=function(e,t){let n=0,r=t.path,i=e;for(;n<r.length&&void 0!==i;){if(i=G8.zoomOnce(i,r[n]),void 0===i)return t;if(!y8(i))return;n+=1}if(void 0===i)return t;if(y8(i)){if(0===t.type){let e={...t.props};for(let t of Object.keys(i))delete e[t];return{...t,props:e}}if(1===t.type||4===t.type||7===t.type){let e=_8([t],i);return e||t}return t}},(x8||(x8={})).replaceProps=function(e,t){let n=G8.zoom(t,e.path);if("object"==typeof n){let t={};for(let r of Object.keys(e.props))t[r]=n[r];return{...e,props:t}}return{...e,props:{}}},(e=>{function t(e,t){var n,r;let i=t.path;for(var o=[];;){let a;if(e instanceof B8&&0===t.type&&(a=e.runOp({...t,path:i.slice(o.length)}),null===a&&(a=void 0)),void 0===a&&o.length===i.length&&(a=e instanceof g8||e instanceof v8||e instanceof l8?e.runOp(t):m8.runOp(e,t)),void 0!==a){if(null!==a){let e=a.data;for(let t=o.length-1;t>=0;t--){let n=i[t],r=o[t];if(r instanceof g8){if("number"==typeof n)throw new Error("illegal arg");e=r.modifyById(n,e)}else if(r instanceof v8){if("number"==typeof n)throw new Error("illegal arg");e=r.modifyById(n,e)}else if(r instanceof l8){if("number"==typeof n)throw new Error("illegal arg");e=r.modifyById(n,e)}else if(r instanceof B8){let t={...r,[n]:e};e=Object.setPrototypeOf(t,B8.prototype)}else{if("object"!=typeof r)return null;if(Array.isArray(r)){if("string"==typeof n&&(n=parseInt(n),isNaN(n)))throw new Error("Invalid path");let t=e;e=[...r],e[n]=t}else e={...r,[n]:e}}}return{data:e,actual:{...a.actual,path:i},reverse:{...a.reverse,path:i}}}return null}let s,l=i[o.length];if(e instanceof g8){if("number"==typeof l)throw new Error("");s=null==(n=e.get(l))?void 0:n.data}else if(e instanceof v8){if("number"==typeof l)throw new Error("");s=null==(r=e.get(l))?void 0:r.data}else null!==e&&(s=e[l]);if(void 0===s)return null;o.push(e),e=s}}function n(e,t){for(let n=0;n<e.length&&n<t.length;n++)if(e[n]!==t[n])return!0;return!1}function r(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}e.drop=function(e,t){return{...e,path:e.path.slice(t)}},e.applySimple=function(e,n){var r;return(null==(r=t(e,n))?void 0:r.data)??e},e.apply=t,e.pathDisjoint=n,e.pathEq=r,e.commutative=function(e,t){return n(e.path,t.path)},e.subsumed=function(e,t){return!(0!==e.type||0!==t.type||!r(e.path,t.path))&&Object.keys(e.props).every((e=>void 0!==t.props[e]))}})(C8||(C8={})),(e=>{function t(e,t){var n=e;let r=[],i=[];for(let a of t)try{if(3===a.type||5===a.type&&"variables"===a.path[a.path.length-1]){let e,t,o;if(3===a.type?(e=G8.zoom(n,[...a.path,a.id]),o=C8.apply(n,{...a,type:2})):(e=G8.zoom(n,[...a.path,a.id,"value"]),o=C8.apply(n,a)),null!==o){n=o.data;let[s,l]=P8(n,{[a.id]:e});n=s;for(let o=0;o<l.length;o++){let s=l[o],c=s.pop();if("number"==typeof c){let r=[c];for(let e=o+1;e<l.length;e++){let t=l[e],n=t[t.length-1];if("number"!=typeof n||!G8.equal(s,t.slice(0,t.length-1)))break;r.push(n),l.splice(e,1)}let i=G8.zoom(n,s);t=i.map(((e,t)=>r.includes(t)?a.id:e)),e=i,c=s.pop()}else{if("alphaOverride"===c||"alpha"===c){e/=100;let t=e,r=G8.zoom(n,s.slice(0,s.length-2)),i=r.layers.map((e=>e.id===s[s.length-1]?{...e,data:{...e.data,[c]:t}}:e));Object.setPrototypeOf(i,Object.getPrototypeOf(r.layers)),r.layers=i}t=a.id}r.push({type:0,path:s,props:{[c]:e}}),i.push({type:0,path:s,props:{[c]:t}})}i.push(o.reverse),r.push(o.actual)}}else{let e=C8.apply(n,a);null!==e&&(r.push(e.actual),n=e.data,i.push(e.reverse))}}catch(o){if(o instanceof u8)return null;throw o}return{data:n,actual:r,reverse:i.reverse()}}e.empty=function(){return[]},e.removePrefix=function(e,t){let n=[];for(let r of e){let[e,...i]=r.path;e===t&&n.push({...r,path:i})}return n},e.addPrefix=function(e,t){return e.map((e=>({...e,path:[t,...e.path]})))},e.concat=function(e,t){return[...e,...t]},e.compress=function(e,t){return[...e.filter((e=>!t.some((t=>C8.subsumed(e,t))))),...t]},e.commutative=function(e,t){return e.every((e=>t.every((t=>C8.commutative(e,t)))))},e.applyAll=function(e,n){for(let r of n){let n=t(e,r);null!==n&&(e=n.data)}return e},e.apply=t})(S8||(S8={}));var k8=Symbol(),O8=Symbol(),L8=Symbol(),R8=class{reportOp(e,t,n=[]){let r=this;if(null===t)return;r._current=t.data;let i=n;for(;!(r instanceof q8);){let e=r._path,t=r._current;if(""!==e&&i.splice(0,0,e),r=r._parent,null===r)return;r.update(e,t)}r.push(i,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let n=t[L8];n&&n(),delete this._children[e]}}}},U8=class extends R8{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){if(Array.isArray(this._current)){if("string"==typeof e&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,m8.runOp(this._current,e),e.path)}},z8=class extends R8{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,l8.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},N8={get(e,t){if(t===L8)return()=>{e._parent=null};if(t===k8)return e._current;if(t===O8)return e;let{_current:n,_children:r}=e;if("push"===t&&Array.isArray(n))throw new Error("not supported to expand array");let i=void 0===r?void 0:r[t];if(void 0!==i)return i;let o=n[t],a=K8(e,t,o);return a!==o?(void 0===r&&(r={},e._children=r),r[t]=a,a):o},has:(e,t)=>t in e._current,ownKeys:e=>Reflect.ownKeys(e._current),defineProperty(){throw Error("not supported")},getPrototypeOf:e=>Object.getPrototypeOf(e._current),setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let n=e._current,r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:n[t]}}},j8={...N8,set(e,t,n){let r={type:0,props:{[t]:$8(n)??n}};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty(e,t){let n={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(n),!0}},H8={...N8,set(e,t,n){return void 0===n?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:n})),!0},deleteProperty:(e,t)=>(e.runOp({type:2,id:t}),!0)},Q8=class extends R8{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[L8]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse(((t,n)=>{e(t,this.data(t))}))}data(e){var t;let{_current:n,_children:r}=this,i=void 0===r?void 0:r[e];if(void 0!==i)return i;let o=null==(t=n.get(e))?void 0:t.data,a=K8(this,e,o);return a!==o?(void 0===r&&(r={},this._children=r),r[e]=a,a):o}add(e,t,n,r,i){this.runOp({type:7,parent:e,fi:t,id:n,data:r,children:i})}move(e,t,n){this.runOp({type:9,parent:e,fi:t,id:n})}insertAfter(e,t,n){let r=this._current.insertAfterHelper(e,t,n.length);for(let i=0;i<n.length;i++){let t=n[i];this.add(e,r[i],t.id,t.data,t.children)}}insertBefore(e,t,n){let r=this._current.insertBeforeHelper(e,t,n.length);for(let i=0;i<n.length;i++){let t=n[i];this.add(e,r[i],t.id,t.data,t.children)}}moveAfter(e,t,n){let r=this._current.insertAfterHelper(e,t,n.length);for(let i=0;i<n.length;i++){let t=n[i];this.move(e,r[i],t)}}moveBefore(e,t,n){let r=this._current.insertBeforeHelper(e,t,n.length);for(let i=0;i<n.length;i++){let t=n[i];this.move(e,r[i],t)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},V8=class extends R8{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[L8]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let n=0;n<t;n++){let t=this._current[n].id,r=this._current[n].fi;e(this.data(this._current[n].id),t,r)}}find(e){let t=this.length;for(let n=0;n<t;n++){let t=this._current[n].id;if(e(this.data(t),t))return this.get(t)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var t;let{_current:n,_children:r}=this,i=void 0===r?void 0:r[e];if(void 0!==i)return i;let o=null==(t=n.get(e))?void 0:t.data,a=K8(this,e,o);return a!==o?(void 0===r&&(r={},this._children=r),r[e]=a,a):o}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,n){this.runOp({type:4,fi:e,id:t,data:n})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let e=t[r];this.add(n[r],e.id,e.data)}}insertBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let e=t[r];this.add(n[r],e.id,e.data)}}moveAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let e=t[r];this.move(n[r],e)}}moveBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let e=t[r];this.move(n[r],e)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function W8(e,t,n){if(e.length>0){let r=e[e.length-1];if(0===r.type&&0===t.type&&G8.equal(r.path,n))return void Object.assign(r.props,t.props)}e.push({...t,path:n})}var G8,q8=class extends R8{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(""!==e)throw new Error("");this._current=t}push(e,t,n,r){W8(this.ts,t,e),W8(this.actual,n,e),W8(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function K8(e,t,n){return n instanceof g8?new Q8(e,t,n):n instanceof v8?new V8(e,t,n):n instanceof l8?new Proxy(new z8(e,t,n),H8):null!==n&&"object"==typeof n?p8(n)?n:new Proxy(new U8(e,t,n),j8):n}function Y8(e){let t=new q8(e);return[K8(t,"",e),t]}function X8(e,t){let[n,r]=Y8(e);return t(n),r.result()}function $8(e){return e instanceof Q8||e instanceof V8?e._current:null!==e&&"object"==typeof e?e[k8]:e}function J8(e,t){let n=[];if(!(t.length<=e.length))return null;for(var r=0;r<t.length;){if("*"===t[r])n.push(e[r]);else if(e[r]!==t[r])return null;r+=1}return n}(e=>{function t(e,t){return(e instanceof g8||e instanceof Q8)&&"string"==typeof t||(e instanceof v8||e instanceof V8)&&"string"==typeof t?e.data(t):"number"==typeof t&&Array.isArray(e)||"string"==typeof t&&"object"==typeof e&&null!==e?e[t]:void 0}function n(e,n,r=0){for(;r<n.length&&void 0!==e;)e=t(e,n[r]),r+=1;return e}e.equal=function(e,t){if(t.length!==e.length)return!1;for(var n=0;n<e.length;){if(e[n]!==t[n])return!1;n+=1}return!0},e.removeOverridden=function(e,t,r){let i=n(r,e);if(void 0!==i&&"object"==typeof i&&null!==i){let e={...t};return Object.keys(i).forEach((t=>{delete e[t]})),e}return t},e.zoomOnce=t,e.zoom=n})(G8||(G8={}));var Z8,e7=class{},t7=class extends e7{constructor(e){super(),this.id=e}},n7=class extends e7{constructor(e){super(),this.data=e}};try{Z8=new TextDecoder}catch{}var r7,i7,o7,a7,s7,l7,c7,u7=0,d7={},h7=0,p7=0,A7=[],f7={useRecords:!1,mapsAsObjects:!0},m7=class{},g7=new m7;g7.name="MessagePack 0xC1";var v7=!1,y7=class{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(r7)return V7((()=>(W7(),this?this.unpack(e,t):y7.prototype.unpack.call(f7,e,t))));i7=t>-1?t:e.length,u7=0,p7=0,a7=null,s7=null,r7=e;try{c7=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(w8){throw r7=null,e instanceof Uint8Array?w8:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof y7){if(d7=this,this.structures)return o7=this.structures,b7();(!o7||o7.length>0)&&(o7=[])}else d7=f7,(!o7||o7.length>0)&&(o7=[]);return b7()}unpackMultiple(e,t){let n,r=0;try{v7=!0;let i=e.length,o=this?this.unpack(e,i):q7.unpack(e,i);if(!t){for(n=[o];u7<i;)r=u7,n.push(b7());return n}for(t(o);u7<i;)if(r=u7,!1===t(b7()))return}catch(ree){throw ree.lastPosition=r,ree.values=n,ree}finally{v7=!1,W7()}}_mergeStructures(e,t){for(let n=0,r=(e=e||[]).length;n<r;n++){let t=e[n];t&&(t.isShared=!0,n>=32&&(t.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in t||[])if(n>=0){let r=e[n],i=t[n];i&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[n]=r),e[n]=i)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function b7(){try{if(!d7.trusted&&!v7){let e=o7.sharedLength||0;e<o7.length&&(o7.length=e)}let e=x7();if(u7==i7)o7.restoreStructures&&w7(),o7=null,r7=null,l7&&(l7=null);else{if(u7>i7){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}if(!v7)throw new Error("Data read, but end of buffer not reached")}return e}catch(o2){throw o7.restoreStructures&&w7(),W7(),(o2 instanceof RangeError||o2.message.startsWith("Unexpected end of buffer"))&&(o2.incomplete=!0),o2}}function w7(){for(let e in o7.restoreStructures)o7[e]=o7.restoreStructures[e];o7.restoreStructures=null}function x7(){let e=r7[u7++];if(e<160){if(e<128){if(e<64)return e;{let t=o7[63&e]||d7.getStructures&&_7()[63&e];return t?(t.read||(t.read=S7(t,63&e)),t.read()):e}}if(e<144){if(e-=128,d7.mapsAsObjects){let t={};for(let n=0;n<e;n++)t[N7()]=x7();return t}{let t=new Map;for(let n=0;n<e;n++)t.set(x7(),x7());return t}}{e-=144;let t=new Array(e);for(let n=0;n<e;n++)t[n]=x7();return t}}if(e<192){let t=e-160;if(p7>=u7)return a7.slice(u7-h7,(u7+=t)-h7);if(0==p7&&i7<140){let e=t<16?L7(t):O7(t);if(null!=e)return e}return E7(t)}{let t;switch(e){case 192:return null;case 193:return s7?(t=x7(),t>0?s7[1].slice(s7.position1,s7.position1+=t):s7[0].slice(s7.position0,s7.position0-=t)):g7;case 194:return!1;case 195:return!0;case 196:return R7(r7[u7++]);case 197:return t=c7.getUint16(u7),u7+=2,R7(t);case 198:return t=c7.getUint32(u7),u7+=4,R7(t);case 199:return U7(r7[u7++]);case 200:return t=c7.getUint16(u7),u7+=2,U7(t);case 201:return t=c7.getUint32(u7),u7+=4,U7(t);case 202:if(t=c7.getFloat32(u7),d7.useFloat32>2){let e=G7[(127&r7[u7])<<1|r7[u7+1]>>7];return u7+=4,(e*t+(t>0?.5:-.5)|0)/e}return u7+=4,t;case 203:return t=c7.getFloat64(u7),u7+=8,t;case 204:return r7[u7++];case 205:return t=c7.getUint16(u7),u7+=2,t;case 206:return t=c7.getUint32(u7),u7+=4,t;case 207:return d7.int64AsNumber?(t=4294967296*c7.getUint32(u7),t+=c7.getUint32(u7+4)):t=c7.getBigUint64(u7),u7+=8,t;case 208:return c7.getInt8(u7++);case 209:return t=c7.getInt16(u7),u7+=2,t;case 210:return t=c7.getInt32(u7),u7+=4,t;case 211:return d7.int64AsNumber?(t=4294967296*c7.getInt32(u7),t+=c7.getUint32(u7+4)):t=c7.getBigInt64(u7),u7+=8,t;case 212:if(t=r7[u7++],114==t)return j7(63&r7[u7++]);{let e=A7[t];if(e)return e.read?(u7++,e.read(x7())):e.noBuffer?(u7++,e()):e(r7.subarray(u7,++u7));throw new Error("Unknown extension "+t)}case 213:return t=r7[u7],114==t?(u7++,j7(63&r7[u7++],r7[u7++])):U7(2);case 214:return U7(4);case 215:return U7(8);case 216:return U7(16);case 217:return t=r7[u7++],p7>=u7?a7.slice(u7-h7,(u7+=t)-h7):M7(t);case 218:return t=c7.getUint16(u7),p7>=(u7+=2)?a7.slice(u7-h7,(u7+=t)-h7):P7(t);case 219:return t=c7.getUint32(u7),p7>=(u7+=4)?a7.slice(u7-h7,(u7+=t)-h7):T7(t);case 220:return t=c7.getUint16(u7),u7+=2,F7(t);case 221:return t=c7.getUint32(u7),u7+=4,F7(t);case 222:return t=c7.getUint16(u7),u7+=2,I7(t);case 223:return t=c7.getUint32(u7),u7+=4,I7(t);default:if(e>=224)return e-256;if(void 0===e){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw new Error("Unknown MessagePack token "+e)}}}var C7=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function S7(e,t){function n(){if(n.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map((e=>C7.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}}")(x7);return 0===e.highByte&&(e.read=B7(t,e.read)),n()}let r={};for(let t=0,n=e.length;t<n;t++){r[e[t]]=x7()}return r}return n.count=0,0===e.highByte?B7(t,n):n}var B7=(e,t)=>function(){let n=r7[u7++];if(0===n)return t();let r=e<32?-(e+(n<<5)):e+(n<<5),i=o7[r]||_7()[r];if(!i)throw new Error("Record id is not defined for "+r);return i.read||(i.read=S7(i,e)),i.read()};function _7(){let e=V7((()=>(r7=null,d7.getStructures())));return o7=d7._mergeStructures(e,o7)}var E7=D7,M7=D7,P7=D7,T7=D7;function D7(e){let t;if(e<16&&(t=L7(e)))return t;if(e>64&&Z8)return Z8.decode(r7.subarray(u7,u7+=e));let n=u7+e,r=[];for(t="";u7<n;){let e=r7[u7++];if(128&e)if(192==(224&e)){let t=63&r7[u7++];r.push((31&e)<<6|t)}else if(224==(240&e)){let t=63&r7[u7++],n=63&r7[u7++];r.push((31&e)<<12|t<<6|n)}else if(240==(248&e)){let t=(7&e)<<18|(63&r7[u7++])<<12|(63&r7[u7++])<<6|63&r7[u7++];t>65535&&(t-=65536,r.push(t>>>10&1023|55296),t=56320|1023&t),r.push(t)}else r.push(e);else r.push(e);r.length>=4096&&(t+=k7.apply(String,r),r.length=0)}return r.length>0&&(t+=k7.apply(String,r)),t}function F7(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]=x7();return t}function I7(e){if(d7.mapsAsObjects){let t={};for(let n=0;n<e;n++)t[N7()]=x7();return t}{let t=new Map;for(let n=0;n<e;n++)t.set(x7(),x7());return t}}var k7=String.fromCharCode;function O7(e){let t=u7,n=new Array(e);for(let r=0;r<e;r++){let e=r7[u7++];if((128&e)>0)return void(u7=t);n[r]=e}return k7.apply(String,n)}function L7(e){if(e<4){if(e<2){if(0===e)return"";{let e=r7[u7++];return(128&e)>1?void(u7-=1):k7(e)}}{let t=r7[u7++],n=r7[u7++];if((128&t)>0||(128&n)>0)return void(u7-=2);if(e<3)return k7(t,n);let r=r7[u7++];return(128&r)>0?void(u7-=3):k7(t,n,r)}}{let t=r7[u7++],n=r7[u7++],r=r7[u7++],i=r7[u7++];if((128&t)>0||(128&n)>0||(128&r)>0||(128&i)>0)return void(u7-=4);if(e<6){if(4===e)return k7(t,n,r,i);{let e=r7[u7++];return(128&e)>0?void(u7-=5):k7(t,n,r,i,e)}}if(e<8){let o=r7[u7++],a=r7[u7++];if((128&o)>0||(128&a)>0)return void(u7-=6);if(e<7)return k7(t,n,r,i,o,a);let s=r7[u7++];return(128&s)>0?void(u7-=7):k7(t,n,r,i,o,a,s)}{let o=r7[u7++],a=r7[u7++],s=r7[u7++],l=r7[u7++];if((128&o)>0||(128&a)>0||(128&s)>0||(128&l)>0)return void(u7-=8);if(e<10){if(8===e)return k7(t,n,r,i,o,a,s,l);{let e=r7[u7++];return(128&e)>0?void(u7-=9):k7(t,n,r,i,o,a,s,l,e)}}if(e<12){let c=r7[u7++],u=r7[u7++];if((128&c)>0||(128&u)>0)return void(u7-=10);if(e<11)return k7(t,n,r,i,o,a,s,l,c,u);let d=r7[u7++];return(128&d)>0?void(u7-=11):k7(t,n,r,i,o,a,s,l,c,u,d)}{let c=r7[u7++],u=r7[u7++],d=r7[u7++],h=r7[u7++];if((128&c)>0||(128&u)>0||(128&d)>0||(128&h)>0)return void(u7-=12);if(e<14){if(12===e)return k7(t,n,r,i,o,a,s,l,c,u,d,h);{let e=r7[u7++];return(128&e)>0?void(u7-=13):k7(t,n,r,i,o,a,s,l,c,u,d,h,e)}}{let p=r7[u7++],A=r7[u7++];if((128&p)>0||(128&A)>0)return void(u7-=14);if(e<15)return k7(t,n,r,i,o,a,s,l,c,u,d,h,p,A);let f=r7[u7++];return(128&f)>0?void(u7-=15):k7(t,n,r,i,o,a,s,l,c,u,d,h,p,A,f)}}}}}function R7(e){return d7.copyBuffers?Uint8Array.prototype.slice.call(r7,u7,u7+=e):r7.subarray(u7,u7+=e)}function U7(e){let t=r7[u7++];if(A7[t])return A7[t](r7.subarray(u7,u7+=e));throw new Error("Unknown extension type "+t)}var z7=new Array(4096);function N7(){let e=r7[u7++];if(!(e>=160&&e<192))return u7--,x7();if(e-=160,p7>=u7)return a7.slice(u7-h7,(u7+=e)-h7);if(!(0==p7&&i7<180))return E7(e);let t,n=4095&(e<<5^(e>1?c7.getUint16(u7):e>0?r7[u7]:0)),r=z7[n],i=u7,o=u7+e-3,a=0;if(r&&r.bytes==e){for(;i<o;){if(t=c7.getUint32(i),t!=r[a++]){i=1879048192;break}i+=4}for(o+=3;i<o;)if(t=r7[i++],t!=r[a++]){i=1879048192;break}if(i===o)return u7=i,r.string;o-=3,i=u7}for(r=[],z7[n]=r,r.bytes=e;i<o;)t=c7.getUint32(i),r.push(t),i+=4;for(o+=3;i<o;)t=r7[i++],r.push(t);let s=e<16?L7(e):O7(e);return r.string=null!=s?s:E7(e)}var j7=(e,t)=>{var n=x7();let r=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,n.highByte=t);let i=o7[e];return i&&i.isShared&&((o7.restoreStructures||(o7.restoreStructures=[]))[e]=i),o7[e]=n,n.read=S7(n,r),n.read()},H7="object"==typeof self?self:global;A7[0]=()=>{},A7[0].noBuffer=!0,A7[101]=()=>{let e=x7();return(H7[e[0]]||Error)(e[1])},A7[105]=e=>{let t=c7.getUint32(u7-4);l7||(l7=new Map);let n,r=r7[u7];n=r>=144&&r<160||220==r||221==r?[]:{};let i={target:n};l7.set(t,i);let o=x7();return i.used?Object.assign(n,o):(i.target=o,o)},A7[112]=e=>{let t=c7.getUint32(u7-4),n=l7.get(t);return n.used=!0,n.target},A7[115]=()=>new Set(x7());var Q7=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((e=>e+"Array"));function V7(e){let t=i7,n=u7,r=h7,i=p7,o=a7,a=l7,s=s7,l=new Uint8Array(r7.slice(0,i7)),c=o7,u=o7.slice(0,o7.length),d=d7,h=v7,p=e();return i7=t,u7=n,h7=r,p7=i,a7=o,l7=a,s7=s,r7=l,v7=h,(o7=c).splice(0,o7.length,...u),d7=d,c7=new DataView(r7.buffer,r7.byteOffset,r7.byteLength),p}function W7(){r7=null,l7=null,o7=null}A7[116]=e=>{let t=e[0],n=Q7[t];if(!n)throw new Error("Could not find typed array for code "+t);return new H7[n](Uint8Array.prototype.slice.call(e,1).buffer)},A7[120]=()=>{let e=x7();return new RegExp(e[0],e[1])},A7[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],n=u7;u7+=t-4,(s7=[x7(),x7()]).position0=0,s7.position1=0;let r=u7;u7=n;try{return x7()}finally{u7=r}},A7[255]=e=>4==e.length?new Date(1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])):new Date("invalid");var G7=new Array(147);for(let nTe=0;nTe<256;nTe++)G7[nTe]=+("1e"+Math.floor(45.15-.30103*nTe));var q7=new y7({useRecords:!1});q7.unpack,q7.unpackMultiple,q7.unpack;var K7,Y7=new Float32Array(1);new Uint8Array(Y7.buffer,0,4);try{K7=new TextEncoder}catch{}var X7,$7,J7,Z7,e9,t9=typeof Buffer<"u",n9=t9?Buffer.allocUnsafeSlow:Uint8Array,r9=t9?Buffer:Uint8Array,i9=t9?4294967296:2144337920,o9=0,a9=null,s9=/[\u0080-\uFFFF]/,l9=Symbol("record-id"),c9=class extends y7{constructor(e){super(e),this.offset=0;let t,n,r,i,o,a=0,s=r9.prototype.utf8Write?function(e,t,n){return J7.utf8Write(e,t,n)}:!(!K7||!K7.encodeInto)&&function(e,t){return K7.encodeInto(e,J7.subarray(t)).written},l=this;e||(e={});let c=e&&e.sequential,u=e.structures||e.saveStructures,d=e.maxSharedStructures;if(null==d&&(d=u?32:0),d>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;null==h&&(h=u?32:64),c&&!e.saveStructures&&(this.structures=[]);let p=d>32||h+d>64,A=d+64,f=d+h+64;if(f>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let m=[],g=0,v=0;this.pack=this.encode=function(e,s){if(J7||(J7=new n9(8192),Z7=new DataView(J7.buffer,0,8192),o9=0),(e9=J7.length-10)-o9<2048?(J7=new n9(J7.length),Z7=new DataView(J7.buffer,0,J7.length),e9=J7.length-10,o9=0):o9=o9+7&2147483640,t=o9,o=l.structuredClone?new Map:null,l.bundleStrings?(a9=["",""],J7[o9++]=214,J7[o9++]=98,a9.position=o9-t,o9+=4):a9=null,n=l.structures,n){n.uninitialized&&(n=l._mergeStructures(l.getStructures()));let e=n.sharedLength||0;if(e>d)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let t=0;t<e;t++){let e=n[t];if(!e)continue;let r,i=n.transitions;for(let t=0,n=e.length;t<n;t++){let n=e[t];r=i[n],r||(r=i[n]=Object.create(null)),i=r}i[l9]=t+64}a=e}c||(n.nextId=e+64)}r&&(r=!1),i=n||[];try{if(y(e),a9){Z7.setUint32(a9.position+t,o9-a9.position-t);let e=a9;a9=null,y(e[0]),y(e[1])}if(l.offset=o9,o&&o.idsToInsert){(o9+=6*o.idsToInsert.length)>e9&&w(o9),l.offset=o9;let e=function(e,t){let n,r=6*t.length,i=e.length-r;for(t.sort(((e,t)=>e.offset>t.offset?1:-1));n=t.pop();){let t=n.offset,o=n.id;e.copyWithin(t+r,t,i),r-=6;let a=t+r;e[a++]=214,e[a++]=105,e[a++]=o>>24,e[a++]=o>>16&255,e[a++]=o>>8&255,e[a++]=255&o,i=t}return e}(J7.subarray(t,o9),o.idsToInsert);return o=null,e}return s&v9?(J7.start=t,J7.end=o9,J7):J7.subarray(t,o9)}finally{if(n){if(v<10&&v++,g>1e4)n.transitions=null,v=0,g=0,m.length>0&&(m=[]);else if(m.length>0&&!c){for(let e=0,t=m.length;e<t;e++)m[e][l9]=0;m=[]}if(r&&l.saveStructures){let r=n.sharedLength||d;n.length>r&&(n=n.slice(0,r));let i=J7.subarray(t,o9);return!1===l.saveStructures(n,a)?(l._mergeStructures(l.getStructures()),l.pack(e)):(a=r,i)}}s&y9&&(o9=t)}};let y=e=>{o9>e9&&(J7=w(o9));var n,r=typeof e;if("string"===r){let t,r=e.length;if(a9&&r>=8&&r<4096){let t=s9.test(e);return a9[t?0:1]+=e,J7[o9++]=193,void y(t?-r:r)}t=r<32?1:r<256?2:r<65536?3:5;let i=3*r;if(o9+i>e9&&(J7=w(o9+i)),r<64||!s){let i,o,a,s=o9+t;for(i=0;i<r;i++)o=e.charCodeAt(i),o<128?J7[s++]=o:o<2048?(J7[s++]=o>>6|192,J7[s++]=63&o|128):55296==(64512&o)&&56320==(64512&(a=e.charCodeAt(i+1)))?(o=65536+((1023&o)<<10)+(1023&a),i++,J7[s++]=o>>18|240,J7[s++]=o>>12&63|128,J7[s++]=o>>6&63|128,J7[s++]=63&o|128):(J7[s++]=o>>12|224,J7[s++]=o>>6&63|128,J7[s++]=63&o|128);n=s-o9-t}else n=s(e,o9+t,i);n<32?J7[o9++]=160|n:n<256?(t<2&&J7.copyWithin(o9+2,o9+1,o9+1+n),J7[o9++]=217,J7[o9++]=n):n<65536?(t<3&&J7.copyWithin(o9+3,o9+2,o9+2+n),J7[o9++]=218,J7[o9++]=n>>8,J7[o9++]=255&n):(t<5&&J7.copyWithin(o9+5,o9+3,o9+3+n),J7[o9++]=219,Z7.setUint32(o9,n),o9+=4),o9+=n}else if("number"===r)if(e>>>0===e)e<64?J7[o9++]=e:e<256?(J7[o9++]=204,J7[o9++]=e):e<65536?(J7[o9++]=205,J7[o9++]=e>>8,J7[o9++]=255&e):(J7[o9++]=206,Z7.setUint32(o9,e),o9+=4);else if((e|0)===e)e>=-32?J7[o9++]=256+e:e>=-128?(J7[o9++]=208,J7[o9++]=e+256):e>=-32768?(J7[o9++]=209,Z7.setInt16(o9,e),o9+=2):(J7[o9++]=210,Z7.setInt32(o9,e),o9+=4);else{let t;if((t=this.useFloat32)>0&&e<4294967296&&e>=-2147483648){let n;if(J7[o9++]=202,Z7.setFloat32(o9,e),t<4||((n=e*G7[(127&J7[o9])<<1|J7[o9+1]>>7])|0)===n)return void(o9+=4);o9--}J7[o9++]=203,Z7.setFloat64(o9,e),o9+=8}else if("object"===r)if(e){if(o){let n=o.get(e);if(n){if(!n.id){let e=o.idsToInsert||(o.idsToInsert=[]);n.id=e.push(n)}return J7[o9++]=214,J7[o9++]=112,Z7.setUint32(o9,n.id),void(o9+=4)}o.set(e,{offset:o9-t})}let r=e.constructor;if(r===Object)b(e,!0);else if(r===Array){(n=e.length)<16?J7[o9++]=144|n:n<65536?(J7[o9++]=220,J7[o9++]=n>>8,J7[o9++]=255&n):(J7[o9++]=221,Z7.setUint32(o9,n),o9+=4);for(let t=0;t<n;t++)y(e[t])}else if(r===Map){(n=e.size)<16?J7[o9++]=128|n:n<65536?(J7[o9++]=222,J7[o9++]=n>>8,J7[o9++]=255&n):(J7[o9++]=223,Z7.setUint32(o9,n),o9+=4);for(let[t,n]of e)y(t),y(n)}else{for(let t=0,n=X7.length;t<n;t++){if(e instanceof $7[t]){let n=X7[t];if(n.write)return n.type&&(J7[o9++]=212,J7[o9++]=n.type,J7[o9++]=0),void y(n.write.call(this,e));let r,i=J7,o=Z7,a=o9;J7=null;try{r=n.pack.call(this,e,(e=>(J7=i,i=null,(o9+=e)>e9&&w(o9),{target:J7,targetView:Z7,position:o9-e})),y)}finally{i&&(Z7=o,o9=a,e9=(J7=i).length-10)}return void(r&&(r.length+o9>e9&&w(r.length+o9),o9=h9(r,J7,o9,n.type)))}}b(e,!e.hasOwnProperty)}}else J7[o9++]=192;else if("boolean"===r)J7[o9++]=e?195:194;else if("bigint"===r){if(e<BigInt(1)<<BigInt(63)&&e>=-(BigInt(1)<<BigInt(63)))J7[o9++]=211,Z7.setBigInt64(o9,e);else if(e<BigInt(1)<<BigInt(64)&&e>0)J7[o9++]=207,Z7.setBigUint64(o9,e);else{if(!this.largeBigIntToFloat)throw new RangeError(e+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");J7[o9++]=203,Z7.setFloat64(o9,Number(e))}o9+=8}else if("undefined"===r)this.encodeUndefinedAsNil?J7[o9++]=192:(J7[o9++]=212,J7[o9++]=0,J7[o9++]=0);else{if("function"!==r)throw new Error("Unknown type: "+r);y(this.writeFunction&&this.writeFunction())}},b=!1===this.useRecords?this.variableMapSize?e=>{let t,n=Object.keys(e),r=n.length;r<16?J7[o9++]=128|r:r<65536?(J7[o9++]=222,J7[o9++]=r>>8,J7[o9++]=255&r):(J7[o9++]=223,Z7.setUint32(o9,r),o9+=4);for(let i=0;i<r;i++)y(t=n[i]),y(e[t])}:(e,n)=>{J7[o9++]=222;let r=o9-t;o9+=2;let i=0;for(let t in e)(n||e.hasOwnProperty(t))&&(y(t),y(e[t]),i++);J7[r+++t]=i>>8,J7[r+t]=255&i}:e=>{let t,n=Object.keys(e),o=i.transitions||(i.transitions=Object.create(null)),a=0;for(let r=0,i=n.length;r<i;r++){let e=n[r];t=o[e],t||(t=o[e]=Object.create(null),a++),o=t}let s=o[l9];if(s)s>=96&&p?(J7[o9++]=96+(31&(s-=96)),J7[o9++]=s>>5):J7[o9++]=s;else{s=i.nextId,s||(s=64),s<A&&this.shouldShareStructure&&!this.shouldShareStructure(n)?(s=i.nextOwnId,s<f||(s=A),i.nextOwnId=s+1):(s>=f&&(s=A),i.nextId=s+1);let e=n.highByte=s>=96&&p?s-96>>5:-1;o[l9]=s,i[s-64]=n,s<A?(n.isShared=!0,i.sharedLength=s-63,r=!0,e>=0?(J7[o9++]=96+(31&s),J7[o9++]=e):J7[o9++]=s):(e>=0?(J7[o9++]=213,J7[o9++]=114,J7[o9++]=96+(31&s),J7[o9++]=e):(J7[o9++]=212,J7[o9++]=114,J7[o9++]=s),a&&(g+=v*a),m.length>=h&&(m.shift()[l9]=0),m.push(o),y(n))}for(let r=0,i=n.length;r<i;r++)y(e[n[r]])},w=e=>{let n;if(e>16777216){if(e-t>i9)throw new Error("Packed buffer would be larger than maximum buffer size");n=Math.min(i9,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(e-t<<2,J7.length-1)>>12)<<12;let r=new n9(n);return Z7=new DataView(r.buffer,0,n),J7.copy?J7.copy(r,0,t,e):r.set(J7.slice(t,e)),o9-=t,t=0,e9=r.length-10,J7=r}}useBuffer(e){J7=e,Z7=new DataView(J7.buffer,J7.byteOffset,J7.byteLength),o9=0}};function u9(e,t,n,r){let i=e.byteLength;if(i+1<256){var{target:o,position:a}=n(4+i);o[a++]=199,o[a++]=i+1}else if(i+1<65536){var{target:o,position:a}=n(5+i);o[a++]=200,o[a++]=i+1>>8,o[a++]=i+1&255}else{var{target:o,position:a,targetView:s}=n(7+i);o[a++]=201,s.setUint32(a,i+1),a+=4}o[a++]=116,o[a++]=t,o.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function d9(e,t){let n=e.byteLength;var r,i;if(n<256){var{target:r,position:i}=t(n+2);r[i++]=196,r[i++]=n}else if(n<65536){var{target:r,position:i}=t(n+3);r[i++]=197,r[i++]=n>>8,r[i++]=255&n}else{var{target:r,position:i,targetView:o}=t(n+5);r[i++]=198,o.setUint32(i,n),i+=4}r.set(e,i)}function h9(e,t,n,r){let i=e.length;switch(i){case 1:t[n++]=212;break;case 2:t[n++]=213;break;case 4:t[n++]=214;break;case 8:t[n++]=215;break;case 16:t[n++]=216;break;default:i<256?(t[n++]=199,t[n++]=i):i<65536?(t[n++]=200,t[n++]=i>>8,t[n++]=255&i):(t[n++]=201,t[n++]=i>>24,t[n++]=i>>16&255,t[n++]=i>>8&255,t[n++]=255&i)}return t[n++]=r,t.set(e,n),n+=i}function p9(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");$7.unshift(e.Class),X7.unshift(e)}!function(e){e.unpack?A7[e.type]=e.unpack:A7[e.type]=e}(e)}$7=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,m7],X7=[{pack(e,t,n){let r=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&r>=0&&r<4294967296){let{target:e,targetView:n,position:i}=t(6);e[i++]=214,e[i++]=255,n.setUint32(i,r)}else if(r>0&&r<17179869184){let{target:n,targetView:i,position:o}=t(10);n[o++]=215,n[o++]=255,i.setUint32(o,4e6*e.getMilliseconds()+(r/1e3/4294967296|0)),i.setUint32(o+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),n(this.onInvalidDate());let{target:e,targetView:r,position:i}=t(3);e[i++]=212,e[i++]=255,e[i++]=255}else{let{target:n,targetView:i,position:o}=t(15);n[o++]=199,n[o++]=12,n[o++]=255,i.setUint32(o,1e6*e.getMilliseconds()),i.setBigInt64(o+4,BigInt(Math.floor(r)))}}},{pack(e,t,n){let r=Array.from(e),{target:i,position:o}=t(this.structuredClone?3:0);this.structuredClone&&(i[o++]=212,i[o++]=115,i[o++]=0),n(r)}},{pack(e,t,n){let{target:r,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(r[i++]=212,r[i++]=101,r[i++]=0),n([e.name,e.message])}},{pack(e,t,n){let{target:r,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(r[i++]=212,r[i++]=120,r[i++]=0),n([e.source,e.flags])}},{pack(e,t){this.structuredClone?u9(e,16,t):d9(t9?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let n=e.constructor;n!==r9&&this.structuredClone?u9(e,Q7.indexOf(n.name),t):d9(e,t)}},{pack(e,t){let{target:n,position:r}=t(1);n[r]=193}}];var A9=new c9({useRecords:!1});A9.pack,A9.pack;var f9,m9,g9,v9=512,y9=1024,b9=new c9({structuredClone:!0});function w9(e){if(p8(e))return e;if(Array.isArray(e))return e.map(w9);if("object"==typeof e&&null!==e){let t={};for(let n of Object.keys(e).sort())t[n]=w9(e[n]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}return e}function x9(e){return"MouseDown"===e||"MouseUp"===e||"KeyDown"===e||"KeyUp"===e||"Collision"===e||"Trigger"===e}p9({Class:l8.prototype.constructor,type:1,write:e=>({...e}),read:e=>(Object.setPrototypeOf(e,l8.prototype),e)}),p9({Class:v8.prototype.constructor,type:2,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,v8.prototype),e)}),p9({Class:g8.prototype.constructor,type:3,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,g8.prototype),e)}),p9({Class:t7.prototype.constructor,type:4,write:e=>e.id,read:e=>new t7(e)}),p9({Class:n7.prototype.constructor,type:5,write:e=>e.data,read:e=>new n7(e)}),p9({Class:B8.prototype.constructor,type:6,write:e=>({...e}),read:e=>(Object.setPrototypeOf(e,B8.prototype),e)}),(e=>{function t(e){return b9.pack(e)}e.serialize=t,e.deserialize=function(e){return b9.unpack(e)},e.checksum=function(e){return function(e){var t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e[n],t|=0;return t}(t(w9(e))).toString()}})(f9||(f9={})),(g9=m9||(m9={})).toEventUIType=function(e){return"Conditional"===e.type?"Distance"===e.condition.type?"Distance":"StateChange":e.type},g9.fromEventUIType=function(e){return"Distance"===e||"StateChange"===e?"Conditional":e};var C9,S9,B9,_9,E9,M9,P9,T9,D9,F9,I9,k9,O9,L9,R9,U9,z9,N9,j9={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]};(e=>{e.is=function(e){return"MouseDown"===e.type||"MouseUp"===e.type||"MousePress"===e.type||"KeyDown"===e.type||"KeyUp"===e.type||"KeyPress"===e.type},e.defaultData=function(e){return"MouseDown"===e||"MouseUp"===e||"MousePress"===e?{type:e,mode:"Object",disabled:!1,actions:new v8}:{type:e,disabled:!1,key:void 0,actions:new v8}}})(C9||(C9={})),(e=>{e.propertyDefaultData=function(e){return{type:"Property",value:[e??null,"position","x"]}},e.valueDefaultData={type:"Literal",value:0}})(S9||(S9={})),(e=>{e.comparisonDefaultData=function(e){return{type:"Comparison",operator:"==",lOperand:S9.propertyDefaultData(e),rOperand:{...S9.valueDefaultData}}},e.distanceDefaultData=function(e){return{type:"Distance",toObject:e??null,fromObject:e??null,distance:200}},e.stateDefaultData=function(e,t){return{type:"State",object:e??null,state:t??null}}})(B9||(B9={})),(_9||(_9={})).isConditionalSubActions=function(e){return void 0!==e.find((e=>"ifActions"===e||"elseActions"===e))},(e=>{e.is=function(e){return"Conditional"===e.type},e.defaultData=function(e){return{type:"Conditional",disabled:!1,inActions:new v8,outActions:new v8,condition:B9.distanceDefaultData(e)}}})(E9||(E9={})),(M9||(M9={})).defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new v8,drop:new v8}},(P9||(P9={})).defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new v8},(T9||(T9={})).defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5},(e=>{e.is=function(e){return"MouseHover"===e.type},e.defaultData=function(){return{type:"MouseHover",disabled:!1,actions:new v8}}})(D9||(D9={})),(e=>{e.is=function(e){return"Scroll"===e.type},e.defaultData=function(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new v8}}})(F9||(F9={})),(e=>{e.is=function(e){return"Start"===e.type},e.defaultData=function(){return{type:"Start",disabled:!1,actions:new v8}}})(I9||(I9={})),(e=>{e.is=function(e){return"Collision"===e.type},e.defaultData=function(){return{type:"Collision",disabled:!1,target:"character",actions:new v8}}})(k9||(k9={})),(e=>{e.is=function(e){return"Trigger"===e.type},e.defaultData=function(e,t){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new v8,triggerZone:"box",position:t.toArray(),rotation:[0,0,0],size:e.toArray(),radius:e.length()/2,helperVisible:!0}}})(O9||(O9={})),(R9=L9||(L9={})).defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]},R9.is=function(e){return"Resize"===e.type},R9.sizeToDevice=function(e){return"string"==typeof e?e:"custom"},R9.deviceToSize=function(e){return"string"==typeof e?[...R9.defaultSizes[e]]:[...e]},R9.defaultData=function(){let e={size:"mobile",operator:"<",actions:new v8},t={size:"tablet",operator:"<",actions:new v8},n={size:[...R9.defaultSizes.custom],operator:"<>",actions:new v8},r=new v8;return r.push({id:dG.generateUUID(),fi:0,data:e},{id:dG.generateUUID(),fi:1,data:t},{id:dG.generateUUID(),fi:2,data:n}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:r}},R9.defaultBreakpointData=function(){return{size:[...R9.defaultSizes.custom],operator:"<>",actions:new v8}},(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]},e.is=function(e){return"VariableChange"===e.type},e.defaultData=function(){return{disabled:!1,type:"VariableChange",actions:new v8,variableId:"",objectId:null,property:"Position X"}}})(U9||(U9={})),(e=>{e.is=function(e){return"API"===e.type},e.defaultData=function(){return{disabled:!1,type:"API",successActions:new v8,errorActions:new v8,userAPIId:""}}})(z9||(z9={})),(e=>{e.is=function(e){return"WEBHOOK"===e.type},e.defaultData=function(){return{disabled:!1,type:"WEBHOOK",actions:new v8,userWebhookId:""}}})(N9||(N9={}));var H9,Q9,V9,W9,G9,q9,K9,Y9,X9,$9,J9,Z9,eee,tee,nee,ree,iee,oee,aee,see,lee="personal camera",cee="a218fcc3-276b-49b9-b485-49037fd14f5f",uee=5526619;function dee(e){return"string"==typeof e&&36===e.length&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}(e=>{function t(e,t){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function n(e,n){return Math.sqrt(t(e,n))}function r(t,n,r){let i=e.sub(n,t),o=e.sub(r,t),a=e.dot(i,o)/e.dot(i,i),s=e.scalarMultiply(i,a);return e.add(t,s)}e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]},e.add=function(e,t){return[e[0]+t[0],e[1]+t[1]]},e.sub=function(e,t){return[e[0]-t[0],e[1]-t[1]]},e.multiply=function(e,t){return[e[0]*t[0],e[1]*t[1]]},e.divide=function(e,t){return[e[0]/t[0],e[1]/t[1]]},e.distanceSquared=t,e.distance=n,e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},e.scalarMultiply=function(e,t){return[e[0]*t,e[1]*t]},e.projectionOnto=r,e.projectionOntoDistance=function(e,t,i){return n(e,r(e,t,i))},e.center=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]}})(H9||(H9={})),(V9=Q9||(Q9={})).isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},V9.add=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]},V9.sub=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},V9.div=function(e,t){return[e[0]/t[0],e[1]/t[1],e[2]/t[2]]},V9.mul=function(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2]]},V9.dist=function(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},V9.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n,e[2]+(t[2]-e[2])*n]},(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n,e[2]+(t[2]-e[2])*n,e[3]+(t[3]-e[3])*n]}})(W9||(W9={})),(e=>{let t=180/Math.PI,n=Math.PI/180;function r(e){return"number"==typeof e?e*t:e}function i(e){return"number"==typeof e?e*n:e}e.radToDeg=function(e){return[r(e[0]),r(e[1]),r(e[2])]},e.degToRad=function(e){return[i(e[0]),i(e[1]),i(e[2])]}})(G9||(G9={})),(K9=q9||(q9={})).identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K9.isEqual=function(e,t){for(let n=0;n<16;n++)if(e[n]!==t[n])return!1;return!0},K9.simplify=function(e){return e??K9.identity},K9.applyMatrix4=function(e,t){let n=t.slice(0);for(var r=0,i=t.length;r<i;r+=3){let i=e[3]*t[r]+e[7]*t[r+1]+e[11]*t[r+2]+e[15];n[r]=(e[0]*t[r]+e[4]*t[r+1]+e[8]*t[r+2]+e[12])/i,n[r+1]=(e[1]*t[r]+e[5]*t[r+1]+e[9]*t[r+2]+e[13])/i,n[r+2]=(e[2]*t[r]+e[6]*t[r+1]+e[10]*t[r+2]+e[14])/i}return n},(X9=Y9||(Y9={})).isRGB=function(e){return"object"==typeof e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},X9.white={r:1,g:1,b:1},X9.red={r:1,g:0,b:0},X9.black={r:0,g:0,b:0},X9.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:1}},X9.clone=function(e){return{r:e.r,g:e.g,b:e.b}},X9.fromHex=function(e){return{r:((e=Math.floor(e))>>16&255)/255,g:(e>>8&255)/255,b:(255&e)/255}},X9.toHex=function(e){return 65536*Math.round(255*e.r)+256*Math.round(255*e.g)+Math.round(255*e.b)},X9.equals=function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b},X9.equalsFixed=function(e,t){return e.r.toFixed(2)===t.r.toFixed(2)&&e.g.toFixed(2)===t.g.toFixed(2)&&e.b.toFixed(2)===t.b.toFixed(2)},X9.lerp=function(e,t,n){return{r:e.r+(t.r-e.r)*n,g:e.g+(t.g-e.g)*n,b:e.b+(t.b-e.b)*n}},(J9=$9||($9={})).white={...Y9.white,a:1},J9.transparent={...Y9.white,a:0},J9.from0to1=function(e){return{r:e[0],g:e[1],b:e[2],a:e[3]}},J9.fromHexAndA=function(e,t){return{...Y9.fromHex(e),a:t}},J9.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:e.a}},J9.equals=function(e,t){return Y9.equals(e,t)&&e.a===t.a},J9.equalsFixed=function(e,t){return Y9.equalsFixed(e,t)&&e.a.toFixed(2)===t.a.toFixed(2)},J9.lerp=function(e,t,n){return{r:e.r+(t.r-e.r)*n,g:e.g+(t.g-e.g)*n,b:e.b+(t.b-e.b)*n,a:e.a+(t.a-e.a)*n}},J9.toStyle=function({r:e,g:t,b:n,a:r}=J9.white){return`rgba(${255*e}, ${255*t}, ${255*n}, ${r})`},(Z9||(Z9={})).identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]},(eee||(eee={})).defaultData={mass:1,stiffness:80,damping:10,velocity:0},(tee||(tee={})).defaultData={control1:[.5,0],control2:[.5,1]},(ree=nee||(nee={})).linear=[0,0,1,1],ree.ease=[.25,.1,.25,1],ree.easeIn=[.42,0,1,1],ree.easeOut=[0,0,.58,1],ree.easeInOut=[.42,0,.58,1],(e=>{e.all=["PerspectiveCamera","OrthographicCamera"],e.is=function(t){return e.all.includes(t)}})(iee||(iee={})),(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset},e.getZoom=function(e){var t,n;return"PerspectiveCamera"===e.type?(null==(t=e.perspective)?void 0:t.zoom)??1:(null==(n=e.orthographic)?void 0:n.zoom)??1}})(oee||(oee={})),(e=>{e.defaultData=function(e,t=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:2*Math.max(e[0],e[1]),start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[e[0]+e[0]*t,0,0]},grid:{count:[2,2,2],size:e.map((e=>e*(1+t))),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}},e.merge=function(e,t){let n={...e};if(Cee.forEach((r=>{Object.assign(n,{[r]:t[r]??e[r]})})),n.radial={...e.radial},t.radial){let r=e.radial,i=t.radial;See.forEach((e=>{Object.assign(n.radial,{[e]:i[e]??r[e]})}))}if(n.linear={...e.linear},t.linear){let r=e.linear,i=t.linear;Bee.forEach((e=>{Object.assign(n.linear,{[e]:i[e]??r[e]})}))}if(n.grid={...e.grid},t.grid){let r=e.grid,i=t.grid;_ee.forEach((e=>{Object.assign(n.grid,{[e]:i[e]??r[e]})}))}if(n.toObject={...e.toObject},t.toObject){let r=e.toObject,i=t.toObject;Eee.forEach((e=>{Object.assign(n.toObject,{[e]:i[e]??r[e]})}))}if(n.randomnessObject={...e.randomnessObject},t.randomnessObject){let r=e.randomnessObject,i=t.randomnessObject;Mee.forEach((e=>{Object.assign(n.randomnessObject,{[e]:i[e]??r[e]})}))}return n}})(aee||(aee={})),(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];e.toOps=function(e,n){let r=[];void 0!==e.count&&r.push({type:0,path:n,props:{count:e.count}});for(let i of t){let t=e[i];t&&Object.keys(t).length>0&&r.push({type:0,path:[...n,i],props:t})}return r}})(see||(see={}));var hee,pee,Aee,fee,mee,gee,vee,yee,bee,wee,xee,Cee=["count"],See=["radius","start","end","position","scale","rotation"],Bee=["position","scale","rotation"],_ee=["count","size"],Eee=["count","position","scale","rotation"],Mee=["strength","scale","rotation","position","movement","seed","freqScale"];(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"],e.is=function(t){return e.all.includes(t)}})(hee||(hee={})),(pee||(pee={})).defaultData=function(e){return function(e){if("PointLight"===e)return{type:e,color:$9.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if("SpotLight"===e)return{type:e,color:$9.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if("DirectionalLight"===e)return{type:e,color:$9.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}(e)},(e=>{e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1,...e.defaultCollisionData}})(Aee||(Aee={})),(fee||(fee={})).defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]},(e=>{e.defaultData={castShadow:!0,receiveShadow:!0},e.equals=function(e,t){return e.castShadow===t.castShadow&&e.receiveShadow===t.receiveShadow}})(mee||(mee={})),(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0},e.equals=function(e,t){return e.flatShading===t.flatShading&&e.side===t.side&&e.wireframe===t.wireframe}})(gee||(gee={})),(vee||(vee={})).defaultData={...gee.defaultData,...mee.defaultData},(yee||(yee={})).getMaterialData=function(e,t){var n,r;let i=[];if("material"in e){let r="string"==typeof e.material?t.materials[e.material]??(null==(n=t.lib.materials[e.material])?void 0:n.asset):e.material;r&&i.push(r)}else if("materials"in e)for(let o of e.materials){let e="string"==typeof o?t.materials[o]??(null==(r=t.lib.materials[o])?void 0:r.asset):o;e&&i.push(e)}return i},(e=>{e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7})(bee||(bee={})),(wee||(wee={})).is=function(e){return"texture"===e||"video"===e||"color"===e||"depth"===e||"normal"===e||"gradient"===e||"noise"===e||"fresnel"===e||"rainbow"===e||"toon"===e||"outline"===e||"particle"===e||"transmission"===e||"matcap"===e||"displace"===e||"pattern"===e||"light"===e},(xee||(xee={})).is=function(e){return"phong"===e||"toon"===e||"lambert"===e||"physical"===e};var Pee,Tee,Dee,Fee,Iee=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],kee=["wrapping","image","video","name","minFilter","magFilter"];(e=>{e.patch=function(e,t){let{texture:n,...r}=t;if(Object.assign(e,r),n){let t=e.texture;t&&Object.assign(t,n)}},e.defaultData=function(e,t){return"light"===e&&t?function(e){let t={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(e){case"phong":return{...t,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...t,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...t,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...t,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}(t):function(e){let t={alpha:1,mode:0,isMask:!1,visible:!0};switch(e){case"texture":return{...t,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"video":return{...t,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:bee.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"color":return{...t,type:"color",color:Y9.fromHex(uee)};case"depth":return{...t,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...t,type:"normal",cnormal:[1,1,1]};case"gradient":return{...t,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...t,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Y9.fromHex(6710886),a:1},colorB:{...Y9.fromHex(6710886),a:1},colorC:{...Y9.fromHex(16777215),a:1},colorD:{...Y9.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...t,type:"fresnel",color:$9.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...t,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...t,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:$9.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...t,type:"outline",outlineColor:$9.fromHexAndA(0,1),contourColor:$9.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...t,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}};case"transmission":return{...t,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...t,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Y9.fromHex(0),a:1},colorB:{...Y9.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}(e)}})(Pee||(Pee={})),(e=>{function t(e,t="layer1",n="layer2"){let r=new v8;return r.push({fi:0,data:Pee.defaultData("light",e),id:t}),r.push({fi:1,data:Pee.defaultData("color"),id:n}),{layers:r}}e.isMergable=function(e){return!e.layers.some((e=>"texture"===e.data.type&&0!==e.data.projection||"depth"===e.data.type&&!e.data.isWorldSpace||"noise"===e.data.type||"displace"===e.data.type))},e.getHash=function(e){let t="";return e.layers.forEach((e=>{Object.entries(e.data).forEach((([e,n])=>{t+=`${e}${n}`,Array.isArray(n)?n.forEach((e=>t+=`${e}`)):"object"==typeof n?Object.values(n).forEach((e=>{t+="number"==typeof e?`${e.toFixed(4)}`:`${e}`})):t+=`${n}`}))})),t},e.defaultEmptyData=function(){return{layers:new v8}},e.defaultData=function(e="layer1",n="layer2"){return t("phong",e,n)},e.withName=function(e,t){return{...e,name:t}},e.defaultTwoLayerData=t,e.defaultUIObjectMaterial=function(e){let t=Pee.defaultData("texture");e&&Object.assign(t.texture,{image:e});let n=new v8;return n.push({fi:0,data:t,id:"layer1"}),n.push({fi:1,data:{...Pee.defaultData("transmission"),alpha:1},id:"layer2"}),n.push({fi:2,data:{...Pee.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:n}},e.defaultTwoLayerTextureData=function(e,t="phong",n="layer1",r="layer2"){let i=Pee.defaultData("texture");Object.assign(i.texture,{image:e});let o=new v8;return o.push({fi:0,data:i,id:n}),o.push({fi:1,data:Pee.defaultData("light",t),id:r}),{layers:o}},e.defaultTwoLayerVideoTextureData=function(e,t="phong",n="layer1",r="layer2"){let i=Pee.defaultData("video");Object.assign(i.texture,{video:e});let o=new v8;return o.push({fi:0,data:i,id:n}),o.push({fi:1,data:Pee.defaultData("light",t),id:r}),{layers:o}}})(Tee||(Tee={})),(Dee||(Dee={})).defaultData=function(){return{points:new v8,roundness:0,shapeHoles:[],isClosed:!1}},(Fee||(Fee={})).defaultData=function(){return{points:new v8,lastInsertionPlane:null,subdivisions:12,isClosed:!1}};var Oee,Lee={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0};(Oee||(Oee={})).merge=function(e,t){let n={...e};return Hee.forEach((r=>{Object.assign(n,{[r]:t[r]??e[r]})})),n};var Ree,Uee,zee,Nee,jee={shape:Lee,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},Hee=["depth","offset","angle","twist","startScale","endScale"];(e=>{e.is2DParametricMesh=function(e){return"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e||"UIGeometry"===e},e.isParametricMesh=function(e){return"PolygonGeometry"===e||"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e||"PathGeometry"===e||"VectorGeometry"===e||"ConeGeometry"===e||"CubeGeometry"===e||"CylinderGeometry"===e||"DodecahedronGeometry"===e||"HelixGeometry"===e||"IcosahedronGeometry"===e||"LatheGeometry"===e||"PyramidGeometry"===e||"SphereGeometry"===e||"PlaneGeometry"===e||"BackdropGeometry"===e||"TorusGeometry"===e||"TorusKnotGeometry"===e||"BooleanGeometry"===e||"TextGeometry"===e||"InputGeometry"===e}})(Ree||(Ree={})),(Uee||(Uee={})).merge=function(e,t){let n={...e};return Object.assign(n,t),"PathGeometry"===n.type&&"extrusion"in t&&t.extrusion&&(n.extrusion={...e.extrusion},Object.assign(n.extrusion,Oee.merge(n.extrusion,t.extrusion))),n},(Nee=zee||(zee={})).defaultData=function(e){if("RectangleGeometry"===e)return{width:320,height:320,type:e,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("UIGeometry"===e)return{type:e,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if("PathGeometry"===e)return{type:e,width:1,height:1,depth:1,path:Fee.defaultData(),extrusion:jee};if("VectorGeometry"===e)return{width:1,height:1,type:e,subdivisions:12,shape:Dee.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("BooleanGeometry"===e)return{type:e,operation:2,width:0,height:0,depth:0,phongAngle:35};if("TextGeometry"===e)return{type:e,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if("InputGeometry"===e)return{...Nee.defaultData("TextGeometry"),type:e,editable:!0};if("SphereGeometry"===e)return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")};var Qee,Vee,Wee,Gee,qee,Kee,Yee,Xee,$ee,Jee,Zee,ete,tte,nte,rte,ite,ote,ate,ste,lte,cte,ute,dte,hte,pte,Ate,fte,mte,gte,vte,yte,bte,wte,xte,Cte,Ste,Bte,_te,Ete,Mte,Pte,Tte,Dte=["width","height","depth"];function Fte(e){e.layers.forEach((e=>{if("depth"===e.type&&void 0!==e.colorA){let t=e.colorA,n=e.colorB,r=[[t.r,t.g,t.b,t.a],[n.r,n.g,n.b,n.a]],i=[0,1];for(let e=2;e<10;e++)r.push(r[1]),i.push(1);let o={...T6($8(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,e.near),far:Math.max(0,e.far),colors:r,steps:i,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(e,o)}else if("depth"===e.type&&1===e.gradientType&&(e.near<0||e.far<0)){let t={...$8(e),near:Math.max(e.near,0),far:Math.max(e.far,0)};Object.assign(e,t)}}))}function Ite(e,t){Object.values(e.shared.materials).forEach((e=>t(e)))}function kte(e,t){e.scene.objects.traverse(((e,n)=>{"materials"in n?n.materials.forEach(((e,r)=>{void 0===e&&(n.materials[r]=Tee.defaultData(),e=n.materials[r]),"string"!=typeof e&&t(e)})):"material"in n?"string"!=typeof n.material&&(void 0===n.material&&(n.material=Tee.defaultData()),t(n.material)):"Mesh"===n.type&&(void 0===n.material&&(n.material=Tee.defaultData()),t(n.material)),"overrides"in n&&Object.values(n.overrides).forEach((e=>{e.material&&"string"!=typeof e.material&&Object.getPrototypeOf(e.material)!==B8.prototype&&t(e.material)}))}))}function Ote(e){void 0===e.layers&&Object.assign(e,Tee.defaultTwoLayerData("lambert"))}function Lte(e){!e.layers||e.layers.forEach((e=>{if("depth"===e.type&&10===e.colors.length){let t=[...e.colors];t.push(e.colors[9]);let n=[...e.steps];n.push(e.steps[9]);let r={...$8(e),colors:t,steps:n};Object.assign(e,r)}}))}function Rte(e){e.scene.objects.traverse(((e,t)=>{"materials"in t?t.materials.forEach((e=>{"string"!=typeof e&&Lte(e)})):"material"in t&&"string"!=typeof t.material&&Lte(t.material)})),Object.values(e.shared.materials).forEach((e=>Lte(e)))}function Ute(e){e.layers&&e.layers.forEach((e=>{"depth"===e.type&&void 0!==e.num&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)}))}function zte(e){e.layers&&e.layers.forEach((e=>{(function(e){return"displace"!==e.type})(e)&&void 0===e.isMask&&(e.isMask=!1),("texture"===e.type||"video"===e.type)&&void 0===e.blending&&(e.blending=0),("noise"===e.type||"displace"===e.type&&"noise"===e.displacementType)&&(void 0===e.voronoiStyle&&(e.voronoiStyle=0),void 0===e.highCut&&(e.highCut=1),void 0===e.lowCut&&(e.lowCut=0),void 0===e.smoothness&&(e.smoothness=.3),void 0===e.seed&&(e.seed=0),void 0===e.quality&&(e.quality=1))}))}function Nte(e){var t;let n=null==(t=e.layers.find((e=>"light"===e.type)))?void 0:t.data;if("basic"===(null==n?void 0:n.category)){let e=Pee.defaultData("light","phong"),t=n;Object.assign(t,e),t.visible=!1}}function jte(e){Ite(e,Nte),kte(e,Nte)}function Hte(e){e.layers.forEach((e=>{"light"===e.type&&"toon"!==e.category&&void 0===e.occlusion&&(e.occlusion=!0)}))}function Qte(e){e.layers&&e.layers.forEach((e=>{"light"===e.type&&void 0===e.bumpMapIntensity&&(e.bumpMapIntensity=5)}))}function Vte(e,t){if(t<1&&(kte(e,Fte),Ite(e,Fte),e.schema=1),t<2&&(function(e){Object.assign(e.scene.publish,{orbitControls:{...pte.defaultData,...$8(e.scene.publish.orbitControls)}})}(e),e.schema=2),t<3&&(function(e){function t(e){if(e.layers)for(let t of Object.values(e.layers))if(t)for(let[e,n]of Object.entries(t))if((Iee.includes(e)||"boolean"==typeof n)&&delete t[e],"texture"===e)for(let[t,r]of Object.entries(n))(kee.includes(t)||"boolean"==typeof r)&&delete n[t]}e.scene.objects.traverse(((e,n)=>{n.states.forEach((e=>{let n=e;n.material?t(n.material):n.materials&&n.materials.forEach((e=>{t(e)}))}))}))}(e),e.schema=3),t<4&&(function(e){e.scene.publish.withBackground=!0}(e),e.schema=4),t<5&&(function(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}(e),e.schema=5),t<6&&(function(e){e.scene.objects.traverse(((e,t)=>{let n=t.cloner;n&&(n.radial.scale=n.radial.scale.map((e=>e+1)),n.linear.scale=n.linear.scale.map((e=>e+1)))}))}(e),e.schema=6),t<7&&(function(e){e.scene.objects.traverse(((e,t)=>{let n=t.geometry;n&&("DodecahedronGeometry"===n.type||"IcosahedronGeometry"===n.type)&&(n.detail=Math.round(n.detail))}))}(e),e.schema=7),t<8&&(e.schema=8),t<9&&(Rte(e),e.schema=9),t<10&&(function(e){e.scene.objects.traverse(((e,t)=>{"Mesh"===t.type&&("BooleanGeometry"===t.geometry.type||"SubdivGeometry"===t.geometry.type)&&(t.geometry.phongAngle=35)}))}(e),e.schema=10),t<11&&(function(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse(((e,t)=>{("DirectionalLight"===t.type||"SpotLight"===t.type)&&(t.shadowResolution=1024,t.shadowRadius=1,t.depth=1e5)})),e.shared.penumbraSize=new Array(5).fill(.5)}(e),e.schema=11),t<12&&(Rte(e),e.schema=12),t<13&&(function(e){e.shared.audios=I6({},l8.prototype)}(e),e.schema=13),t<14&&(function(e){let t=e.shared.materials;Object.entries(t).forEach((([e,n])=>{if(!n.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[e]:n})}}))}(e),e.schema=14),t<15&&(function(e){Object.entries($8(e.shared.images)).filter((e=>!1===e[1].asset)).map((e=>e[0])).forEach((t=>{delete e.shared.images[t]})),Object.entries($8(e.shared.audios)).filter((e=>!1===e[1].asset)).map((e=>e[0])).forEach((t=>{delete e.shared.audios[t]}))}(e),e.schema=15),t<16&&(function(e){e.scene.publish.settings.web.preload=!1}(e),e.schema=16),t<17&&(kte(e,Ute),Ite(e,Ute),e.schema=17),t<18&&(kte(e,Ote),Ite(e,Ote),e.schema=18),t<19&&(function(e){Object.assign(e.scene.publish.settings,{video:{...Ate.defaultData.settings.video,...$8(e.scene.publish.settings.video)}})}(e),e.schema=19),t<20&&(function(e){e.shared.fonts=I6({},l8.prototype)}(e),function(e){let t=[];e.scene.objects.traverse(((n,r)=>{let i=r;if("TextFrame"===i.type){let r=Tee.defaultTwoLayerData("phong"),o="string"==typeof i.color?e.shared.colors[i.color]:i.color;r.layers[1].data.color={r:o.r,g:o.g,b:o.b},r.layers[1].data.alpha=i.alpha;let a=function(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}(i.font);void 0===e.shared.fonts[a]&&(e.shared.fonts[a]={name:a});let s={name:i.name,...ete.defaultData,...ote.defaultData,flatShading:!1,wireframe:!1,geometry:{...zee.defaultData("TextGeometry"),width:i.width,height:i.height,font:a,depth:0,horizontalAlign:i.horizontalAlign,verticalAlign:i.verticalAlign,fontSize:1.40625*i.fontSize,lineHeight:i.lineHeight/1.40625,letterSpacing:i.letterSpacing-1,text:i.text,textTransform:i.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:r,states:$8(i.states),events:$8(i.events),visible:i.visible,raycastLock:i.raycastLock,position:i.position,rotation:i.rotation,scale:i.scale,hiddenMatrix:i.hiddenMatrix},l=$8(e.scene.objects).parent(n);e.scene.objects.insertAfter(l??null,n,[{id:n+"new",data:s,children:[]}]),t.push(n)}})),t.forEach((t=>{e.scene.objects.delete(t)}))}(e),e.schema=20),t<21&&(function(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse(((e,n)=>{n.events.forEach((e=>{if(t[Number(e.type)])if(Object.assign(e,{type:t[Number(e.type)]}),"Audio"===e.type&&"audioEvent"in e&&(Object.assign(e,{playAudio:e.audioEvent}),delete e.audioEvent),"GameControl"===e.type)Object.assign(e,{gameActions:{idle:new v8,move:new v8,jump:new v8}});else{let t=new v8;Object.assign(e,{actions:t}),("MouseDown"===e.type||"MouseUp"===e.type||"KeyDown"===e.type||"KeyUp"===e.type)&&"url"in e&&t.push({fi:0,id:dG.generateUUID(),data:{type:"Link",url:e.url,delay:0}}),"targets"in e&&(e.targets.forEach(((e,n,r)=>{let i={easing:e.easing,duration:e.duration};6===e.easing?Object.assign(i,T6(e,"mass","stiffness","damping","velocity")):5===e.easing&&Object.assign(i,{control1:{...e.control1},control2:{...e.control2}});let o={repeat:e.repeat?-1:0,delay:e.delay,delayDirection:e.delayDirection,direction:e.cycle&&e.rewind?"pingpong-rewind":e.cycle?"pingpong":"normal"},a={state:e.state,...o,...i},s={allowSlerp:!0,type:"Transition",object:e.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new v8({fi:0,id:dG.generateUUID(),data:{state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4}},{fi:1,id:dG.generateUUID(),data:a})};t.push({fi:r,id:n,data:s})})),delete e.targets)}}))}))}(e),function(e){e.scene.objects.traverse(((e,t)=>{function n(e,n){var r;let i=new v8,o=[];if(t.events.forEach(((e,t,r)=>{if("Audio"===e.type&&e.trigger===n){let n;o.push(t),"play"===e.interaction?n={...T6(e,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in e?e.after:void 0,toggle:"after"in e?e.toggle:void 0,type:"Audio"}:("pause"===e.interaction||"stop"===e.interaction)&&(n={...T6(e,"interaction","delay","object","playAudio"),type:"Audio"}),n&&i.push({fi:r,id:t,data:n})}})),o.forEach((e=>t.events.delete(e))),i.length){let n=null==(r=t.events.find((t=>t.type===e)))?void 0:r.data;n?"actions"in n&&n.actions.insertBefore(null,i):t.events.insertBefore(null,[{id:dG.generateUUID(),data:{type:e,actions:i}}])}}n("Start","start"),n("MouseDown","mouseDown"),n("MouseUp","mouseUp"),n("KeyDown","keyDown"),n("KeyUp","keyUp")}))}(e),e.schema=21),t<22&&(jte(e),e.schema=22),t<23&&(function(e){e.scene.objects.traverse(((e,t)=>{"Mesh"===t.type&&"SubdivGeometry"===t.geometry.type&&(t.geometry.scaleBaked||(t.geometry.scaleBaked=[1,1,1]))}))}(e),e.schema=23),t<24&&(function(e){e.scene.objects.traverse(((e,t)=>{("Empty"===t.type||"Mesh"===t.type)&&t.cloner&&!t.cloner.randomnessObject&&!t.cloner.toObject&&!t.cloner.randomness&&(t.cloner={...t.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})}))}(e),e.schema=24),(t<25||void 0===e.shared.videos)&&(function(e){e.shared.videos=I6({},l8.prototype)}(e),t<25&&(e.schema=25)),t<26&&(function(e){e.scene.objects.traverse(((t,n)=>{let r=e.scene.objects.unproxy().parent(t);if(r){let t=$8(e.scene.objects.data(r));t&&"Mesh"===t.type&&"BooleanGeometry"===t.geometry.type&&"Mesh"===n.type&&(n.visible=!0!==$8(n).booleanExclude)}}))}(e),e.schema=26),t<27&&(function(e){e.scene.objects.traverse(((e,t)=>{if("Mesh"===t.type){let e=t;"NonParametricGeometry"===t.geometry.type?void 0!==e.material&&delete e.material:void 0!==e.materials&&delete e.materials}}))}(e),e.schema=27),t<28&&(jte(e),e.schema=28),t<29&&(function(e){function t(e){Object.setPrototypeOf(e,B8.prototype),e.texture&&Object.setPrototypeOf(e.texture,B8.prototype)}function n(e){Object.setPrototypeOf(e,B8.prototype);for(let n in e)t(e[n])}e.scene.objects.traverse(((e,t)=>{t.states.forEach((e=>{let t=e;if(t.material){let e=$8(t.material).layers;n(e),t.material.layers=e}if(t.materials)for(let r=0;r<t.materials.length;r++){let e=t.materials[r],i=$8(e).layers;n(i),e.layers=i}}))}))}(e),e.schema=29),t<30&&(function(e){e.scene.objects.traverse(((e,t)=>{"Mesh"===t.type&&"NonParametricGeometry"===t.geometry.type&&!("material"in t)&&!("materials"in t)&&(t.material=Tee.defaultTwoLayerData("phong"))}))}(e),e.schema=30),t<31&&(function(e){void 0===e.scene.publish.orbitControls.autoZoom&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse(((e,t)=>{("OrthographicCamera"===t.type||"PerspectiveCamera"===t.type)&&(void 0===t.orthographic.autoZoom&&(t.orthographic.autoZoom=!1),void 0===t.orthographic.autoZoomFrustumSize&&(t.orthographic.autoZoomFrustumSize=790))}))}(e),e.schema=31),t<33&&(function(e){e.scene.objects.traverse(((e,t)=>{void 0===t.pathSnapping&&(t.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),void 0===t.pathSnapping.offset&&(t.pathSnapping.offset=0)}))}(e),e.schema=33),t<34&&(function(e){void 0===e.scene.publish.mouseEventTarget&&(e.scene.publish.mouseEventTarget="canvas"),void 0===e.scene.publish.settings.web.hint&&(e.scene.publish.settings.web.hint=!1)}(e),e.schema=34),t<35&&(function(e){let{video:t}=e.scene.publish.settings;"gif"===t.format&&t.fps>48&&(t.fps=15)}(e),e.schema=35),t<36&&(function(e){e.scene.objects.traverse(((e,t)=>{t.events.forEach((e=>{"GameControl"===e.type&&(e.resetYPosition=Math.abs(e.resetYPosition-t.position[1]))}))}))}(e),e.schema=36),t<37&&(function(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse(((e,n)=>{t&&null===n.physics?n.collision=!1:n.collision="visibility"}))}(e),e.schema=37),t<38&&(kte(e,zte),Ite(e,zte),e.schema=38),t<39&&(function(e){e.scene.objects.traverse(((e,t)=>{t.events.forEach((e=>{"GameControl"===e.type&&(e.navmesh=Tte.defaultDataThirdPerson.navmesh)}))}))}(e),e.schema=39),t<40&&(function(e){e.scene.styles||(e.scene.styles=gte.defaultData())}(e),e.schema=40),t<41&&(function(e){void 0===e.scene.environment.ambientLight.occlusion&&(e.scene.environment.ambientLight.occlusion=!1),void 0===e.scene.environment.ambientLight.aoFullRes&&(e.scene.environment.ambientLight.aoFullRes=!1),void 0===e.scene.environment.ambientLight.radius&&(e.scene.environment.ambientLight.radius=256),void 0===e.scene.environment.ambientLight.bias&&(e.scene.environment.ambientLight.bias=.5),void 0===e.scene.environment.ambientLight.aoColor&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),kte(e,Hte),Ite(e,Hte)}(e),e.schema=41),t<42&&(function(e){e.scene.objects.traverse(((e,t)=>{t.events.forEach((e=>{"GameControl"===e.type&&Object.assign(e.gameActions,{run:new v8})}))}))}(e),e.schema=42),t<43&&(function(e){e.scene.objects.traverse(((e,t)=>{t.events.forEach((e=>{"GameControl"===e.type&&(e.keyAssignments=[...e.keyAssignments,["run","⇧"],["none","Ctrl"]])}))}))}(e),e.schema=43),t<99){kte(e,Qte),Ite(e,Qte),null===e.scene.publish.playCamera&&(e.scene.publish.playCamera=lee);let t=$8(e.scene.objects),n=e.scene.objects;e.scene.publish.playPage=cee,n.insertBefore(null,null,[{id:cee,data:{...ute.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:T6(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:T6(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...Kee.defaultData,...T6(e.scene.environment,"usePhysics","gravity")},camera:$8(e.scene.ownerCamera)??ute.defaultData.camera,name:"Scene"},children:[]}]);for(let e of t)e.id!==yte.TRASH_CAN_ID&&n.move(cee,e.fi,e.id);let r=0,i=0;e.shared.penumbraSize&&e.scene.objects.traverse(((t,n)=>{"DirectionalLight"===n.type?(n.penumbraSize=e.shared.penumbraSize[Math.min(r,2)],r+=1):"SpotLight"===n.type&&(n.penumbraSize=e.shared.penumbraSize[3+Math.min(i,1)],i+=1),(void 0===n.physics||null===n.physics)&&"Instance"!==n.type&&(n.physics={},Object.assign(n.physics,fee.defaultData)),void 0!==n.physics&&null!==n.physics&&(n.physics.enabled=n.collision??"visibility",delete n.collision)})),e.schema=99}}function Wte(e){e.layers&&e.layers.forEach((e=>{"light"===e.type&&void 0===e.alphaOverride&&(e.alphaOverride=1)}))}(Qee||(Qee={})).defaultData={enabled:!1,useBackgroundColor:!1,color:Y9.white,near:.1,far:2e3},(()=>{let e={opacity:1,blendFunction:13,enabled:!1};(Vee||(Vee={})).defaultData={enabled:!1,pixelation:{...e,blendFunction:16,granularity:15},bloom:{...e,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...e,offset:[2,2]},vignette:{...e,darkness:1,offset:0},hueSaturation:{...e,hue:3,saturation:0},brightnessContrast:{...e,brightness:.25,contrast:0},depthOfField:{...e,focusDistance:100,focalLength:20,bokehScale:5},noise:{...e,blendFunction:16}}})(),(Wee||(Wee={})).defaultData={softShadowQuality:"low"},(Gee||(Gee={})).defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75},(qee||(qee={})).defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}},(Kee||(Kee={})).defaultData={usePhysics:!1,gravity:-10},(Yee||(Yee={})).defaultData={playCamera:lee,gameControlObject:null},(Xee||(Xee={})).defaultData={backgroundColor:$9.fromHexAndA(2960946,1),postprocessing:Vee.defaultData,fog:Qee.defaultData,globalPhysics:Kee.defaultData,ambient:Gee.defaultData,ao:qee.defaultData,shadow:Wee.defaultData,publish:Yee.defaultData},($ee||($ee={})).defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95},(e=>{e.isComponentRelated=function(e){return"Component"===e||"Instance"===e},e.isEmptyOrComponent=function(e){return"Empty"===e||"Instance"===e}})(Jee||(Jee={})),(e=>{e.identity={...Z9.identity,hiddenMatrix:q9.identity},e.fromObject=function(e){return{position:e.position,rotation:e.rotation,scale:e.scale,hiddenMatrix:e.hiddenMatrix}},e.merge=function(e,t){return{position:(null==t?void 0:t.position)||e.position,rotation:(null==t?void 0:t.rotation)||e.rotation,scale:(null==t?void 0:t.scale)||e.scale,hiddenMatrix:(null==t?void 0:t.hiddenMatrix)||e.hiddenMatrix}},e.diff=function(e,t){return F6({position:Q9.isEqual(e.position,t.position)?void 0:t.position,rotation:Q9.isEqual(e.rotation,t.rotation)?void 0:t.rotation,scale:Q9.isEqual(e.scale,t.scale)?null:t.scale,hiddenMatrix:q9.isEqual(e.hiddenMatrix,t.hiddenMatrix)?void 0:t.hiddenMatrix})}})(Zee||(Zee={})),(ete||(ete={})).defaultData={states:new v8,events:new v8,visible:!0,raycastLock:!1,physics:fee.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Zee.identity,cloner:null},(tte||(tte={})).defaultData={type:"Empty",...ete.defaultData},(nte||(nte={})).defaultData={type:"ParticleCollider",...$ee.defaultData,...ete.defaultData},(rte||(rte={})).defaultData={type:"Component",...ete.defaultData},(ite||(ite={})).defaultData={type:"Particle",...ete.defaultData,...Aee.defaultData},(ote||(ote={})).defaultData={type:"Mesh",...ete.defaultData,...vee.defaultData},(ate||(ate={})).defaultData={...ete.defaultData,...Zee.identity,position:[0,0,oee.DefaultTargetOffset],...oee.defaultData},(e=>{e.defaultData=function(e){return{...ete.defaultData,...pee.defaultData(e)}},e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(ste||(ste={})),(e=>{function t(e,t,n=0){for(;n<t.length;){let r=e?e[t[n]]:void 0;if(t.length===n+1)return r;if(!r)return;e=r.descendants,n+=1}}e.resolveWithDes=t,e.resolve=function(e,n,r=0){let i=t(e,n,r);if(i){let e=Object.keys(i);if(1===e.length&&"descendants"===e[0])return}return i}})(lte||(lte={})),(e=>{function t(e,t){return{...ete.defaultData,...t,component:e,overrides:new B8,physics:void 0,events:void 0,type:"Instance"}}e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"],e.ofComponent=t,e.fromComponentData=function(e){let n=Zee.fromObject(e.data);return t(e.id,n)}})(cte||(cte={})),(e=>{e.defaultData={type:"Page",...ete.defaultData,physics:{...fee.defaultData,fusedBody:!1},...Xee.defaultData,camera:ate.defaultData},e.isUIPage=function(e){return void 0!==e.uiScene}})(ute||(ute={})),(e=>{e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:q9.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:fee.defaultData,states:new v8,events:new v8,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...oee.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...ete.defaultData,...ote.defaultData,geometry:zee.defaultData("RectangleGeometry"),material:Tee.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...ete.defaultData,...ote.defaultData,geometry:zee.defaultData("BooleanGeometry"),material:Tee.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...ete.defaultData,...ote.defaultData,geometry:zee.defaultData("TextGeometry"),material:Tee.defaultTwoLayerData("phong","layer1","layer2")},e.defaultInputObject={name:"Input",...ete.defaultData,...ote.defaultData,geometry:zee.defaultData("InputGeometry"),material:Tee.defaultTwoLayerData("phong","layer1","layer2")}})(dte||(dte={})),(e=>{e.newEmpty=function(e,t){let n={name:t};return"Mesh"===e.type?(n.geometry={},"material"in e&&(n.material={layers:new B8}),"materials"in e&&(n.materials=e.materials.map((e=>({layers:new B8}))))):iee.is(e.type)&&(n.perspective={},n.orthographic={}),n},e.toOps=function(e,t){let n,r=[],i={orthographic:0,perspective:0,geometry:0};function o(e,t){for(let[n,i]of Object.entries(t.layers)){let{texture:t,...o}=i;if(void 0!==t&&Object.keys(t).length>0){let i={path:[...e,"layers",n,"texture"],props:t,type:0};r.push(i)}if(Object.keys(o).length>0){let t={path:[...e,"layers",n],props:o,type:0};r.push(t)}}}for(let[a,s]of Object.entries(t))if("name"!==a)if("cloner"===a)r.push(...see.toOps(s,["cloner"]));else if("pathSnapping"===a)r.push({path:[a],props:{slide:s.slide,offset:s.offset},type:0});else if("material"===a)o(["material"],s);else if("materials"===a)for(let[e,t]of Object.entries(s))o(["materials",e],t);else if(0===i[a]){if("geometry"===a&&void 0!==s.extrusion){let e={path:[a,"extrusion"],props:s.extrusion,type:0};r.push(e),s={...s},delete s.extrusion}if(Object.keys(s).length>0){let e={path:[a],props:s,type:0};r.push(e)}}else void 0===n&&(n={path:[],props:{},type:0},r.push(n)),n.props[a]=s;return r},e.patch=function(e,t){var n,r,i,o,a,s;if(void 0===t)return e;let l={...e};if(Object.assign(l,Zee.merge(l,t)),Object.assign(l,{pathSnapping:Object.assign({},l.pathSnapping,{slide:(null==(n=t.pathSnapping)?void 0:n.slide)??(null==(r=l.pathSnapping)?void 0:r.slide)??0,offset:(null==(i=t.pathSnapping)?void 0:i.offset)??(null==(o=l.pathSnapping)?void 0:o.offset)??0})}),iee.is(e.type)){l.orthographic={...l.orthographic},l.perspective={...l.perspective};let e=t;void 0!==(null==(a=e.orthographic)?void 0:a.zoom)&&(l.orthographic.zoom=e.orthographic.zoom),void 0!==(null==(s=e.perspective)?void 0:s.zoom)&&(l.perspective.zoom=e.perspective.zoom),void 0!==e.isUpVectorFlipped&&(l.isUpVectorFlipped=e.isUpVectorFlipped),void 0!==e.targetOffset&&(l.targetOffset=e.targetOffset)}else if("Mesh"===e.type)"geometry"in t&&Object.assign(l,{geometry:Uee.merge(l.geometry,t.geometry)}),(t.material||t.materials)&&(l=function(e,t){if(void 0===t)return e;let n={...e};return"material"in n&&"material"in t&&t.material&&(n.material=X8(n.material,(e=>{if("string"!=typeof e)for(let[n,r]of Object.entries(t.material.layers)){let t=e.layers.data(n);t&&Pee.patch(t,r)}})).data),n.materials&&t.materials&&(n.materials=X8(n.materials,(e=>{var r,i;for(let o=0;o<n.materials.length;o++){let n=t.materials[o];if("string"!=typeof n)for(let[t,a]of Object.entries(n.layers)){let n=null==(i=null==(r=e[o])?void 0:r.layers)?void 0:i.data(t);n&&Pee.patch(n,a)}}})).data),n}(l,t)),l.cloner&&"cloner"in t&&Object.assign(l,{cloner:aee.merge(l.cloner,t.cloner)});else if("Empty"===e.type)l.cloner&&"cloner"in t&&Object.assign(l,{cloner:aee.merge(l.cloner,t.cloner)});else if(hee.is(e.type)){let e=t;void 0!==e.intensity&&(l.intensity=e.intensity),void 0!==e.color&&("string"==typeof e.color?l.color=e.color:l.color=Y9.clone(e.color))}return l}})(hte||(hte={})),(pte||(pte={})).defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0},(Ate||(Ate={})).defaultData={orbitControls:pte.defaultData,playPage:cee,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map(((e,t)=>{let n=0,r=0;return t<5?r=-30:t<10&&(r=30),0===t||10===t||5===t?n=30:(4===t||11===t||9===t)&&(n=-30),[120,[n,r],"show"]})),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70}},stopRaycast:!0,hdTransmission:!1},(fte||(fte={})).defaultData={id:"basic",label:"Basic",style:"None",prompt:""},(mte||(mte={})).defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0},(e=>{e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...fte.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:mte.defaultData}),e.generateSeed=()=>Math.round(1e5*Math.random())})(gte||(gte={})),(e=>{e.physicsEnabled=function(e){return void 0!==e.find((e=>"Page"===e.data.type&&e.data.globalPhysics.usePhysics))},e.traverseModuleInstances=function(e,t,n){e.scene.objects.traverseFrom(t,((t,r)=>{var i;if("Instance"===r.type){let o=null==(i=Yte.getComponentData(e,r.component))?void 0:i.data;o&&n(t,r,o.events)}else n(t,r,r.events)}))}})(vte||(vte={})),(e=>{function t(t=!0,n=[]){let r=[],i=dte.defaultMeshObject;t&&(r.push({...e.defaultLight}),r.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:i,children:[]})),r.push(...n);let o=new g8;return o.push({fi:1,id:cee,data:{...ute.defaultData,name:"Scene 1"},children:r}),o}function n(t){return{...e.defaultData,objects:I6(t,g8.prototype)}}e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:ste.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]},e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:Ate.defaultData,styles:gte.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new g8,publish:Ate.defaultData,styles:gte.defaultData()}},e.emptyDataWithPage=function(e=!0){return{objects:t(e),publish:Ate.defaultData,styles:gte.defaultData()}},e.emptyData=function(){return{objects:new g8,publish:{...Ate.defaultData},styles:gte.defaultData()}},e.withObjs=n,e.withObj=function(e,t){return n([{id:e,data:t,children:[],fi:0}])}})(yte||(yte={})),(bte||(bte={})).defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}},(e=>{e.defaultData=e=>({url:e,name:"New Webhook",parametersSchemas:new v8}),e.defaultParameterValueByType=e=>"number"===e?0:"boolean"!==e&&""})(wte||(wte={})),(xte||(xte={})).defaultData=(e,t="GET")=>({url:e,method:t,name:"New API",headers:new v8,queries:new v8,autoStart:!0}),(e=>{function t(e){return void 0!==e.textValue}function n(e){return"boolean"==typeof e}e.isTextValue=t,e.isNumber=function(e){return"number"==typeof e},e.isBoolean=n,e.typeOfVariable=function(e){return t(e)?"string":n(e)?"boolean":"number"},e.getDisplayedValue=function(t){return e.isTextValue(t)?Array.isArray(t.textValue)?t.textValue.map((e=>e.toString().padStart(t.padding??2,"0"))).join(t.deliminator??":")+(void 0!==t.suffix?" "+t.suffix:""):t.textValue.toString():e.isBoolean(t)?t?"True":"False":e.isNumber(t)?parseFloat(t.toFixed(3)).toString():t.toString()}})(Cte||(Cte={})),(Ste||(Ste={})).all=["images","videos","colors","audios","particles","fonts","materials","variables"],(Bte||(Bte={})).all=[...Ste.all,"components"],(_te||(_te={})).defaultData=function(){return{images:new l8,videos:new l8,colors:new l8,audios:new l8,particles:new l8,fonts:new l8,materials:new l8,components:new l8,variables:new l8,userAPIs:new l8,userWebhooks:new l8}},(Ete||(Ete={})).defaultData=function(){return{images:new l8,videos:new l8,colors:new l8,audios:new l8,particles:new l8,fonts:new l8,materials:new l8,components:new l8,variables:new l8,userAPIs:new l8,userWebhooks:new l8}},(e=>{e.defaultColors=function(){let e={"89b10010-844c-11ec-a8a3-0242ac120002":{r:.5,g:.5,b:.5,a:1,name:"Default Color"}};return I6(e,l8.prototype)},e.defaultImages=function(){return I6({},l8.prototype)},e.emptyData=function(){return{catelogs:new l8,materials:new l8,images:new l8,videos:new l8,colors:new l8,audios:new l8,particles:new l8,fonts:new l8,variables:new v8,userAPIs:new l8,userWebhooks:new l8,lib:Ete.defaultData()}},e.defaultVariables=function(e){switch(e){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let e=[0,0,0];return{name:"Time",value:{textValue:e,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:e,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0}}},e.getFormattedTimerTime=function(e,t){if("HH:mm:ss"===t.format){let t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return{textValue:[t,n,Math.round(e-3600*t-60*n)]}}if("mm:ss"===t.format){let t=Math.floor(e/60);return{textValue:[t,Math.round(e-60*t)]}}return e="number"===t.format?Math.round(e):Math.round(1e3*e)/1e3}})(Mte||(Mte={})),(Pte||(Pte={})).list=["idle","move","jump","run"],(e=>{e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new v8,move:new v8,jump:new v8,run:new v8},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:$9.fromHexAndA(3728051,1)}}})(Tte||(Tte={}));var Gte=180/Math.PI;function qte(e){e.rotation=e.rotation.slice(0,3).map((e=>e*Gte))}function Kte(e){var t,n;qte(e),"Page"===e.type&&qte(e.camera),null==(t=e.states)||t.forEach((e=>{void 0===e.rotation||null===e.rotation||(e.rotation=e.rotation.slice(0,3).map((e=>e*Gte)))}));let r=e.geometry;r&&"SphereGeometry"===r.type&&(r.thetaLength=(r.thetaLength??180)*Gte),r&&"TorusGeometry"===r.type&&(r.arc=r.arc*Gte),r&&"PathGeometry"===r.type&&(r.extrusion.angle*=Gte,r.extrusion.twist*=Gte),"Mesh"===e.type&&"TextGeometry"===e.geometry.type&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray($8(e.events))&&(null==(n=e.events)||n.forEach((e=>{("MouseDown"===e.type||"MouseUp"===e.type||"MousePress"===e.type||"KeyDown"===e.type||"KeyUp"===e.type||"KeyPress"===e.type||"Collision"===e.type||"Trigger"===e.type)&&(e.runMode=e.toggle?"Toggle":"Repeat")})))}var Yte,Xte,$te,Jte,Zte,ene,tne,nne,rne,ine,one,ane,sne,lne,cne,une,dne,hne,pne,Ane,fne=115;function mne(e,t){t(e.data);for(let n of e.children)mne(n,t)}function gne(e){let t=e.schema??104;t!==fne&&t<105&&(mne(e.asset,Kte),e.schema=105)}function vne(e){let t=e.schema??0;if(t!==fne){Vte(e,t),t<100&&(void 0===e.scene.publish.joystickSizeAndXYOffset&&(e.scene.publish.joystickSizeAndXYOffset=Ate.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(kte(e,Wte),Ite(e,Wte),e.schema=101),t<102&&(function(e){e.scene.objects.traverse(((e,t)=>{let n=t.geometry;n&&"PathGeometry"===n.type&&(n.extrusion.capType="flat",n.extrusion.bevel=50,n.extrusion.bevelSides=6,"Custom"===n.extrusion.shape.type&&(n.extrusion.shape.shapeQuality="low"))}))}(e),e.schema=102),t<104&&(e.shared.catelogs=new l8,e.shared.lib=Ete.defaultData(),e.schema=104),t<105&&(function(e){e.shared.variables=I6({},l8.prototype)}(e),e.scene.objects.traverse(((e,t)=>{Kte(t)})),e.schema=105);for(let t of Object.values(e.shared.lib.components))gne(t);t<106&&(function(e){let t=$8(e.shared.variables);e.shared.variables=I6(Object.entries(t??{}).map((([e,t],n)=>({fi:n,id:e,data:t}))),v8.prototype)}(e),e.schema=106),t<107&&(e.shared.lib.variables=Ete.defaultData().variables,e.schema=107),t<109&&(function(e){e.shared.particles=I6({},l8.prototype),e.shared.lib&&(e.shared.lib.particles=Ete.defaultData().particles)}(e),e.schema=109),t<110&&(function(e){e.scene.objects.traverse(((e,t)=>{"Particle"===t.type&&"number"==typeof t.renderMaterial.size&&Object.assign(t.renderMaterial,{size:[t.renderMaterial.size,t.renderMaterial.size]})}))}(e),e.schema=110),t<111&&(e.scene.objects.traverse(((e,t)=>{!function(e){var t;Array.isArray($8(e.events))&&(null==(t=e.events)||t.forEach((e=>{"disabled"in e||(e.disabled=!1),("MouseDown"===e.type||"MouseUp"===e.type||"MousePress"===e.type)&&(e.mode=e.mode||"Object")})))}(t)})),e.schema=111),t<112&&(function(e){e.scene.objects.traverse(((e,t)=>{"Page"===t.type&&(t.postprocessing.depthOfField.focusDistance=100,t.postprocessing.depthOfField.focalLength=20,t.postprocessing.depthOfField.bokehScale=5)}))}(e),e.schema=112),t<113&&(function(e){e.scene.objects.traverse(((e,t)=>{var n;!1!==Array.isArray($8(t.events))&&(null==(n=t.events)||n.forEach((e=>{var t,n,r,i,o,a,s,l,c,u,d;let h=e.runMode;"MouseDown"===e.type||"MouseUp"===e.type||"KeyDown"===e.type||"KeyUp"===e.type||"Collision"===e.type||"Trigger"===e.type?null==(t=e.actions)||t.forEach((e=>{"Transition"===e.type&&(e.runMode=h??"Repeat"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle"===h?"Toggle":"Normal")})):"MouseHover"===e.type||"MousePress"===e.type||"KeyPress"===e.type?null==(n=e.actions)||n.forEach((e=>{("Transition"===e.type||"Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle")})):"GameControl"===e.type?(delete e.actions,Object.keys(e.gameActions).forEach((t=>{var n;null==(n=e.gameActions[t])||n.forEach((e=>{"Transition"===e.type&&(e.runMode="Repeat"),"Animation"===e.type&&(e.runMode="Normal")}))}))):"DragDrop"===e.type?(delete e.actions,null==(i=null==(r=e.dragDropActions)?void 0:r.drag)||i.forEach((e=>{("Transition"===e.type||"Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle")})),null==(a=null==(o=e.dragDropActions)?void 0:o.drop)||a.forEach((e=>{("Transition"===e.type||"Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle")}))):"Resize"===e.type?(delete e.actions,null==(s=e.breakpoints)||s.forEach((e=>{var t;null==(t=e.actions)||t.forEach((e=>{("Transition"===e.type||"Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle")}))}))):"Start"===e.type?null==(l=e.actions)||l.forEach((e=>{"Transition"===e.type&&(e.runMode="Once"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Normal")})):"VariableChange"===e.type||"Scroll"===e.type?null==(c=e.actions)||c.forEach((e=>{"Transition"===e.type&&(e.runMode="Repeat"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Normal")})):"Conditional"===e.type&&(delete e.actions,null==(u=e.inActions)||u.forEach((e=>{"Transition"===e.type&&(e.runMode="Repeat"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Normal")})),null==(d=e.outActions)||d.forEach((e=>{"Transition"===e.type&&(e.runMode="Repeat"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Normal")})))})))}))}(e),e.schema=113),t<114&&(void 0===e.scene.publish.settings.web.imageQuality&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),t<115&&(function(e){e.shared.userAPIs=I6({},l8.prototype),e.shared.userWebhooks=I6({},l8.prototype),e.shared.lib&&(e.shared.lib.userAPIs=Ete.defaultData().userAPIs,e.shared.lib.userWebhooks=Ete.defaultData().userWebhooks)}(e),e.schema=115)}}function yne(e,t=!1){let n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=e[0].morphTargetsRelative,l=new mK,c=0;for(let u=0;u<e.length;++u){let d=e[u],h=0;if(n!==(null!==d.index))return null;for(let e in d.attributes){if(!r.has(e))return null;void 0===o[e]&&(o[e]=[]),o[e].push(d.attributes[e]),h++}if(h!==r.size)return null;if(s!==d.morphTargetsRelative)return null;for(let e in d.morphAttributes){if(!i.has(e))return null;void 0===a[e]&&(a[e]=[]),a[e].push(d.morphAttributes[e])}if(t){let e;if(n)e=d.index.count;else{if(void 0===d.attributes.position)return null;e=d.attributes.position.count}l.addGroup(c,e,u),c+=e}}if(n){let t=0,n=[];for(let r=0;r<e.length;++r){let i=e[r].index;for(let e=0;e<i.count;++e)n.push(i.getX(e)+t);t+=e[r].attributes.position.count}l.setIndex(n)}for(let u in o){let e=bne(o[u]);if(!e)return null;l.setAttribute(u,e)}for(let u in a){let e=a[u][0].length;if(0===e)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let t=0;t<e;++t){let e=[];for(let r=0;r<a[u].length;++r)e.push(a[u][r][t]);let n=bne(e);if(!n)return null;l.morphAttributes[u].push(n)}}return l}function bne(e){let t,n,r,i=0;for(let s=0;s<e.length;++s){let o=e[s];if(o.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return null;if(void 0===n&&(n=o.itemSize),n!==o.itemSize)return null;if(void 0===r&&(r=o.normalized),r!==o.normalized)return null;i+=o.array.length}let o=new t(i),a=0;for(let s=0;s<e.length;++s)o.set(e[s].array,a),a+=e[s].array.length;return new oK(o,n,r)}(e=>{e.defaultData={schema:fne,scene:yte.defaultData,frames:(new l8).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",bte.defaultData),shared:{...Mte.emptyData(),colors:Mte.defaultColors()}},e.emptyDataForImports=function(){let e=yte.emptyDataWithPage();return{schema:fne,scene:e,frames:(new l8).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",bte.defaultData),shared:{...Mte.emptyData(),colors:Mte.defaultColors(),images:Mte.defaultImages()}}},e.emptyData=function(){return{schema:fne,scene:yte.emptyDataWithPage(),frames:(new l8).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",bte.defaultData),shared:Mte.emptyData()}},e.clipboard2dData=function(){return{schema:fne,scene:yte.emptyData(),frames:new l8,shared:Mte.emptyData()}},e.collabHelper={...S8,updateSchema:e=>(e.schema??0)<fne?X8(e,vne):(e.schema??0)-fne},e.updateSchemaDirectly=function(t){let n=e.collabHelper.updateSchema(t);return"number"==typeof n?0===n?t:null:n.data},e.withoutLib=function(e){return{...e,shared:{...e.shared,lib:Ete.defaultData()}}},e.getComponentData=function(e,t){let n=e.scene.objects.get(t);if(n&&"Component"===n.data.type)return n;{let n=e.shared.lib.components[t];if(n)return n.asset}},e.hasSensitiveData=function(e){let t=Object.values(e.shared.userAPIs);for(let n of t){let e=n.headers;for(let t of e)if("authorization"===t.data.key.toLowerCase()&&""!==t.data.value)return!0}return!1}})(Yte||(Yte={})),(Xte||(Xte={})).emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"},($te||($te={})).is=function(e){return!0},(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]},e.merge=function(e,t){return{position:(null==t?void 0:t.position)??e.position,rotation:(null==t?void 0:t.rotation)??e.rotation,scale:(null==t?void 0:t.scale)??e.scale,shear:(null==t?void 0:t.shear)??e.shear}},e.diff=function(e,t){return F6({position:H9.isEqual(e.position,t.position)?void 0:t.position,rotation:e.rotation===t.rotation?void 0:t.rotation,scale:H9.isEqual(e.scale,t.scale)?void 0:t.scale,shear:e.shear&&t.shear&&H9.isEqual(e.shear,t.shear)?void 0:t.shear})}})(Jte||(Jte={})),(Zte||(Zte={})).defaultData={horizontalConstraint:0,verticalConstraint:0},(ene||(ene={})).defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8},(tne||(tne={})).defaultData={opacity:1,fill:{color:$9.fromHexAndA(uee,1),enabled:!0},stroke:{color:$9.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:$9.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:$9.from0to1([0,0,0,1]),enabled:!1,spread:0}},(e=>{e.newEmpty=function(e,t){return{name:t}},e.patch=function(e,t){if(void 0===t)return e;let n={...e};return Object.assign(n,Jte.merge(n,t)),n=function(e,t){if(void 0===t)return e;let n={...e},r=["width","height","cornerRadius"];for(let i of r)i in n&&i in t&&void 0!==t[i]&&Object.assign(n,{[i]:t[i]});return n}(n,t),n=function(e,t){if(void 0===t)return e;let n={...e};return"fill"in n&&"fill"in t&&void 0!==t.fill&&Object.assign(n,{fill:{...n.fill,...t.fill}}),"stroke"in n&&"stroke"in t&&void 0!==t.stroke&&Object.assign(n,{stroke:{...n.stroke,...t.stroke}}),"layerBlur"in n&&"layerBlur"in t&&void 0!==t.layerBlur&&Object.assign(n,{layerBlur:{...n.layerBlur,...t.layerBlur}}),"backgroundBlur"in n&&"backgroundBlur"in t&&void 0!==t.backgroundBlur&&Object.assign(n,{backgroundBlur:{...n.backgroundBlur,...t.backgroundBlur}}),"dropShadow"in n&&"dropShadow"in t&&void 0!==t.dropShadow&&Object.assign(n,{dropShadow:{...n.dropShadow,...t.dropShadow}}),"innerShadow"in n&&"innerShadow"in t&&void 0!==t.innerShadow&&Object.assign(n,{innerShadow:{...n.innerShadow,...t.innerShadow}}),n}(n,t),n},e.toOps=function(e,t){let n,r=[];for(let[i,o]of Object.entries(t))"name"!==i&&(void 0===n&&(n={path:[],props:{},type:0},r.push(n)),n.props[i]=o);return r}})(nne||(nne={})),(rne||(rne={})).defaultData={...Jte.defaultData,...Zte.defaultData,states:new v8,events:new v8,visible:!0,raycastLock:!1},(ine||(ine={})).defaultData={...rne.defaultData,...tne.defaultData},(one||(one={})).defaultData={cornerRadius:[0,0,0,0]},(ane||(ane={})).defaultData={...ine.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"},(sne||(sne={})).defaultData={...ine.defaultData,...one.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"},(lne||(lne={})).defaultData={...ine.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"},(cne||(cne={})).defaultData={...ine.defaultData,type:"path2d",path:"",name:"Path"},(une||(une={})).is=function(e){return"ellipse2d"===e.type||"rectangle2d"===e.type||"text2d"===e.type||"vector2d"===e.type||"path2d"===e.type},(dne||(dne={})).defaultData={...rne.defaultData,name:"Group",type:"group2d"},(hne||(hne={})).defaultData=()=>({...rne.defaultData,...one.defaultData,...tne.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:$9.fromHexAndA(4737101,1),enabled:!0},stroke:{color:$9.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}}),(e=>{e.defaultData=function(e){switch(e){case"rectangle2d":case"vector2d":return{...sne.defaultData};case"ellipse2d":return{...ane.defaultData};case"text2d":return{...lne.defaultData};case"path2d":return{...cne.defaultData};case"frame2d":return{...hne.defaultData()};case"group2d":return{...dne.defaultData}}},e.getPivot=function(e){return"width"in e&&"height"in e?["number"==typeof e.width?.5*e.width:0,"number"==typeof e.height?.5*e.height:0]:[0,0]},e.isResizeable=function(e){return"rectangle2d"===e.type||"ellipse2d"===e.type||"text2d"===e.type||"frame2d"===e.type},e.isAutoLayoutable=function(e){return"frame2d"===e.type&&void 0!==e.autoLayout},e.hasCorners=function(e){return"rectangle2d"===e.type||"frame2d"===e.type}})(pne||(pne={})),(e=>{e.defaultData={name:"UI",type:"scene2d",objects:new g8},e.emptyData=function(){return{type:"scene2d",objects:new g8}}})(Ane||(Ane={}));var wne=Math.pow(2,-24),xne=class{constructor(){}};function Cne(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function Sne(e){let t=-1,n=-1/0;for(let r=0;r<3;r++){let i=e[r+3]-e[r];i>n&&(n=i,t=r)}return t}function Bne(e,t){t.set(e)}function _ne(e,t,n){let r,i;for(let o=0;o<3;o++){let a=o+3;r=e[o],i=t[o],n[o]=r<i?r:i,r=e[a],i=t[a],n[a]=r>i?r:i}}function Ene(e,t,n){for(let r=0;r<3;r++){let i=t[e+2*r],o=t[e+2*r+1],a=i-o,s=i+o;a<n[r]&&(n[r]=a),s>n[r+3]&&(n[r+3]=s)}}function Mne(e){let t=e[3]-e[0],n=e[4]-e[1],r=e[5]-e[2];return 2*(t*n+n*r+r*t)}function Pne(e,t,n,r,i=null){let o=1/0,a=1/0,s=1/0,l=-1/0,c=-1/0,u=-1/0,d=1/0,h=1/0,p=1/0,A=-1/0,f=-1/0,m=-1/0,g=null!==i;for(let v=6*t,y=6*(t+n);v<y;v+=6){let t=e[v+0],n=e[v+1],r=t-n,i=t+n;r<o&&(o=r),i>l&&(l=i),g&&t<d&&(d=t),g&&t>A&&(A=t);let y=e[v+2],b=e[v+3],w=y-b,x=y+b;w<a&&(a=w),x>c&&(c=x),g&&y<h&&(h=y),g&&y>f&&(f=y);let C=e[v+4],S=e[v+5],B=C-S,_=C+S;B<s&&(s=B),_>u&&(u=_),g&&C<p&&(p=C),g&&C>m&&(m=C)}r[0]=o,r[1]=a,r[2]=s,r[3]=l,r[4]=c,r[5]=u,g&&(i[0]=d,i[1]=h,i[2]=p,i[3]=A,i[4]=f,i[5]=m)}var Tne=32,Dne=(e,t)=>e.candidate-t.candidate,Fne=new Array(Tne).fill().map((()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}))),Ine=new Float32Array(6);function kne(e,t){function n(e){d&&d(e/h)}function r(e,t,i,d=null,h=0){if(!p&&h>=l&&(p=!0),i<=c||h>=l)return n(t+i),e.offset=t,e.count=i,e;let A=function(e,t,n,r,i,o){let a=-1,s=0;if(0===o)a=Sne(t),-1!==a&&(s=(t[a]+t[a+3])/2);else if(1===o)a=Sne(e),-1!==a&&(s=function(e,t,n,r){let i=0;for(let o=t,a=t+n;o<a;o++)i+=e[6*o+2*r];return i/n}(n,r,i,a));else if(2===o){let o=Mne(e),l=1.25*i,c=6*r,u=6*(r+i);for(let e=0;e<3;e++){let r=t[e],d=(t[e+3]-r)/Tne;if(i<Tne/4){let t=[...Fne];t.length=i;let r=0;for(let i=c;i<u;i+=6,r++){let o=t[r];o.candidate=n[i+2*e],o.count=0;let{bounds:a,leftCacheBounds:s,rightCacheBounds:l}=o;for(let e=0;e<3;e++)l[e]=1/0,l[e+3]=-1/0,s[e]=1/0,s[e+3]=-1/0,a[e]=1/0,a[e+3]=-1/0;Ene(i,n,a)}t.sort(Dne);let d=i;for(let e=0;e<d;e++){let n=t[e];for(;e+1<d&&t[e+1].candidate===n.candidate;)t.splice(e+1,1),d--}for(let i=c;i<u;i+=6){let r=n[i+2*e];for(let e=0;e<d;e++){let o=t[e];r>=o.candidate?Ene(i,n,o.rightCacheBounds):(Ene(i,n,o.leftCacheBounds),o.count++)}}for(let n=0;n<d;n++){let r=t[n],c=r.count,u=i-r.count,d=r.leftCacheBounds,h=r.rightCacheBounds,p=0;0!==c&&(p=Mne(d)/o);let A=0;0!==u&&(A=Mne(h)/o);let f=1+1.25*(p*c+A*u);f<l&&(a=e,l=f,s=r.candidate)}}else{for(let e=0;e<Tne;e++){let t=Fne[e];t.count=0,t.candidate=r+d+e*d;let n=t.bounds;for(let e=0;e<3;e++)n[e]=1/0,n[e+3]=-1/0}for(let i=c;i<u;i+=6){let t=~~((n[i+2*e]-r)/d);t>=Tne&&(t=Tne-1);let o=Fne[t];o.count++,Ene(i,n,o.bounds)}let t=Fne[Tne-1];Bne(t.bounds,t.rightCacheBounds);for(let e=Tne-2;e>=0;e--){let t=Fne[e],n=Fne[e+1];_ne(t.bounds,n.rightCacheBounds,t.rightCacheBounds)}let h=0;for(let n=0;n<Tne-1;n++){let t=Fne[n],r=t.count,c=t.bounds,u=Fne[n+1].rightCacheBounds;0!==r&&(0===h?Bne(c,Ine):_ne(c,Ine,Ine)),h+=r;let d=0,p=0;0!==h&&(d=Mne(Ine)/o);let A=i-h;0!==A&&(p=Mne(u)/o);let f=1+1.25*(d*h+p*A);f<l&&(a=e,l=f,s=t.candidate)}}}}return{axis:a,pos:s}}(e.boundingData,d,a,t,i,u);if(-1===A.axis)return n(t+i),e.offset=t,e.count=i,e;let f=function(e,t,n,r,i){let o=n,a=n+r-1,s=i.pos,l=2*i.axis;for(;;){for(;o<=a&&t[6*o+l]<s;)o++;for(;o<=a&&t[6*a+l]>=s;)a--;if(!(o<a))return o;for(let n=0;n<3;n++){let r=e[3*o+n];e[3*o+n]=e[3*a+n],e[3*a+n]=r;let i=t[6*o+2*n+0];t[6*o+2*n+0]=t[6*a+2*n+0],t[6*a+2*n+0]=i;let s=t[6*o+2*n+1];t[6*o+2*n+1]=t[6*a+2*n+1],t[6*a+2*n+1]=s}o++,a--}}(s,a,t,i,A);if(f===t||f===t+i)n(t+i),e.offset=t,e.count=i;else{e.splitAxis=A.axis;let n=new xne,s=t,l=f-t;e.left=n,n.boundingData=new Float32Array(6),Pne(a,s,l,n.boundingData,o),r(n,s,l,o,h+1);let c=new xne,u=f,d=i-l;e.right=c,c.boundingData=new Float32Array(6),Pne(a,u,d,c.boundingData,o),r(c,u,d,o,h+1)}return e}!function(e,t){if(!e.index){let n,r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;n=r>65535?new Uint32Array(new i(4*r)):new Uint16Array(new i(2*r)),e.setIndex(new oK(n,1));for(let e=0;e<r;e++)n[e]=e}}(e,t);let i=new Float32Array(6),o=new Float32Array(6),a=function(e,t){let n=e.attributes.position,r=e.index.array,i=r.length/3,o=new Float32Array(6*i),a=n.normalized,s=n.array,l=n.offset||0,c=3;n.isInterleavedBufferAttribute&&(c=n.data.stride);let u=["getX","getY","getZ"];for(let d=0;d<i;d++){let e,i,h,p=3*d,A=6*d;a?(e=r[p+0],i=r[p+1],h=r[p+2]):(e=r[p+0]*c+l,i=r[p+1]*c+l,h=r[p+2]*c+l);for(let r=0;r<3;r++){let l,c,d;a?(l=n[u[r]](e),c=n[u[r]](i),d=n[u[r]](h)):(l=s[e+r],c=s[i+r],d=s[h+r]);let p=l;c<p&&(p=c),d<p&&(p=d);let f=l;c>f&&(f=c),d>f&&(f=d);let m=(f-p)/2,g=2*r;o[A+g+0]=p+m,o[A+g+1]=m+(Math.abs(p)+m)*wne,p<t[r]&&(t[r]=p),f>t[r+3]&&(t[r+3]=f)}}return o}(e,i),s=e.index.array,l=t.maxDepth,c=(t.verbose,t.maxLeafTris),u=t.strategy,d=t.onProgress,h=e.index.count/3,p=!1,A=[],f=function(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],n=new Set;for(let i of e.groups)n.add(i.start),n.add(i.start+i.count);let r=Array.from(n.values()).sort(((e,t)=>e-t));for(let i=0;i<r.length-1;i++){let e=r[i],n=r[i+1];t.push({offset:e/3,count:(n-e)/3})}return t}(e);if(1===f.length){let e=f[0],t=new xne;t.boundingData=i,function(e,t,n,r){let i=1/0,o=1/0,a=1/0,s=-1/0,l=-1/0,c=-1/0;for(let u=6*t,d=6*(t+n);u<d;u+=6){let t=e[u+0];t<i&&(i=t),t>s&&(s=t);let n=e[u+2];n<o&&(o=n),n>l&&(l=n);let r=e[u+4];r<a&&(a=r),r>c&&(c=r)}r[0]=i,r[1]=o,r[2]=a,r[3]=s,r[4]=l,r[5]=c}(a,e.offset,e.count,o),r(t,e.offset,e.count,o),A.push(t)}else for(let m of f){let e=new xne;e.boundingData=new Float32Array(6),Pne(a,m.offset,m.count,e.boundingData,o),r(e,m.offset,m.count,o),A.push(e)}return A}var One=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,r=-1/0;for(let i=0,o=e.length;i<o;i++){let o=e[i][t];n=o<n?o:n,r=o>r?o:r}this.min=n,this.max=r}setFromPoints(e,t){let n=1/0,r=-1/0;for(let i=0,o=t.length;i<o;i++){let o=t[i],a=e.dot(o);n=a<n?a:n,r=a>r?a:r}this.min=n,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};One.prototype.setFromBox=function(){let e=new jG;return function(t,n){let r=n.min,i=n.max,o=1/0,a=-1/0;for(let s=0;s<=1;s++)for(let n=0;n<=1;n++)for(let l=0;l<=1;l++){e.x=r.x*s+i.x*(1-s),e.y=r.y*n+i.y*(1-n),e.z=r.z*l+i.z*(1-l);let c=t.dot(e);o=Math.min(c,o),a=Math.max(c,a)}this.min=o,this.max=a}}();var Lne=function(){let e=new jG,t=new jG,n=new jG;return function(r,i,o){let a=r.start,s=e,l=i.start,c=t;n.subVectors(a,l),e.subVectors(r.end,r.start),t.subVectors(i.end,i.start);let u,d,h=n.dot(c),p=c.dot(s),A=c.dot(c),f=n.dot(s),m=s.dot(s)*A-p*p;u=0!==m?(h*p-f*A)/m:0,d=(h+u*p)/A,o.x=u,o.y=d}}(),Rne=function(){let e=new hG,t=new jG,n=new jG;return function(r,i,o,a){Lne(r,i,e);let s=e.x,l=e.y;if(s>=0&&s<=1&&l>=0&&l<=1)return r.at(s,o),void i.at(l,a);if(s>=0&&s<=1)return l<0?i.at(0,a):i.at(1,a),void r.closestPointToPoint(a,!0,o);if(l>=0&&l<=1)return s<0?r.at(0,o):r.at(1,o),void i.closestPointToPoint(o,!0,a);{let e,c;e=s<0?r.start:r.end,c=l<0?i.start:i.end;let u=t,d=n;return r.closestPointToPoint(c,!0,t),i.closestPointToPoint(e,!0,n),u.distanceToSquared(c)<=d.distanceToSquared(e)?(o.copy(u),void a.copy(c)):(o.copy(e),void a.copy(d))}}}(),Une=function(){let e=new jG,t=new jG,n=new qK,r=new M0;return function(i,o){let{radius:a,center:s}=i,{a:l,b:c,c:u}=o;if(r.start=l,r.end=c,r.closestPointToPoint(s,!0,e).distanceTo(s)<=a||(r.start=l,r.end=u,r.closestPointToPoint(s,!0,e).distanceTo(s)<=a)||(r.start=c,r.end=u,r.closestPointToPoint(s,!0,e).distanceTo(s)<=a))return!0;let d=o.getPlane(n);if(Math.abs(d.distanceToPoint(s))<=a){let e=d.projectPoint(s,t);if(o.containsPoint(e))return!0}return!1}}();function zne(e){return Math.abs(e)<1e-15}var Nne=class extends Zq{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map((()=>new jG)),this.satBounds=new Array(4).fill().map((()=>new One)),this.points=[this.a,this.b,this.c],this.sphere=new lq,this.plane=new qK,this.needsUpdate=!0}intersectsSphere(e){return Une(e,this)}update(){let e=this.a,t=this.b,n=this.c,r=this.points,i=this.satAxes,o=this.satBounds,a=i[0],s=o[0];this.getNormal(a),s.setFromPoints(a,r);let l=i[1],c=o[1];l.subVectors(e,t),c.setFromPoints(l,r);let u=i[2],d=o[2];u.subVectors(t,n),d.setFromPoints(u,r);let h=i[3],p=o[3];h.subVectors(n,e),p.setFromPoints(h,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};Nne.prototype.closestPointToSegment=function(){let e=new jG,t=new jG,n=new M0;return function(r,i=null,o=null){let a,{start:s,end:l}=r,c=this.points,u=1/0;for(let d=0;d<3;d++){let s=(d+1)%3;n.start.copy(c[d]),n.end.copy(c[s]),Rne(n,r,e,t),a=e.distanceToSquared(t),a<u&&(u=a,i&&i.copy(e),o&&o.copy(t))}return this.closestPointToPoint(s,e),a=s.distanceToSquared(e),a<u&&(u=a,i&&i.copy(e),o&&o.copy(s)),this.closestPointToPoint(l,e),a=l.distanceToSquared(e),a<u&&(u=a,i&&i.copy(e),o&&o.copy(l)),Math.sqrt(u)}}(),Nne.prototype.intersectsTriangle=function(){let e=new Nne,t=new Array(3),n=new Array(3),r=new One,i=new One,o=new jG,a=new jG,s=new jG,l=new jG,c=new M0,u=new M0,d=new M0;return function(h,p=null,A=!1){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let f=this.plane,m=h.plane;if(Math.abs(f.normal.dot(m.normal))>1-1e-10){let e=this.satBounds,a=this.satAxes;n[0]=h.a,n[1]=h.b,n[2]=h.c;for(let t=0;t<4;t++){let i=e[t],o=a[t];if(r.setFromPoints(o,n),i.isSeparated(r))return!1}let s=h.satBounds,l=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let n=0;n<4;n++){let e=s[n],i=l[n];if(r.setFromPoints(i,t),e.isSeparated(r))return!1}for(let c=0;c<4;c++){let e=a[c];for(let a=0;a<4;a++){let s=l[a];if(o.crossVectors(e,s),r.setFromPoints(o,t),i.setFromPoints(o,n),r.isSeparated(i))return!1}}return p&&(p.start.set(0,0,0),p.end.set(0,0,0)),!0}{let e=this.points,t=!1,n=0;for(let s=0;s<3;s++){let r=e[s],i=e[(s+1)%3];c.start.copy(r),c.end.copy(i),c.delta(a);let o=t?u.start:u.end,l=zne(m.distanceToPoint(r));if(zne(m.normal.dot(a))&&l){u.copy(c),n=2;break}if((m.intersectLine(c,o)||l)&&!zne(o.distanceTo(i))){if(n++,t)break;t=!0}}if(1===n&&h.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(2!==n)return!1;let r=h.points,i=!1,o=0;for(let a=0;a<3;a++){let e=r[a],t=r[(a+1)%3];c.start.copy(e),c.end.copy(t),c.delta(s);let n=i?d.start:d.end,l=zne(f.distanceToPoint(e));if(zne(f.normal.dot(s))&&l){d.copy(c),o=2;break}if((f.intersectLine(c,n)||l)&&!zne(n.distanceTo(t))){if(o++,i)break;i=!0}}if(1===o&&this.containsPoint(d.end))return p&&(p.start.copy(d.end),p.end.copy(d.end)),!0;if(2!==o)return!1;if(u.delta(a),d.delta(s),a.dot(s)<0){let e=d.start;d.start=d.end,d.end=e}let A=u.start.dot(a),g=u.end.dot(a),v=d.start.dot(a),y=d.end.dot(a);return(A===y||v===g||g<v!==A<y)&&(p&&(l.subVectors(u.start,d.start),l.dot(a)>0?p.start.copy(u.start):p.start.copy(d.start),l.subVectors(u.end,d.end),l.dot(a)<0?p.end.copy(u.end):p.end.copy(d.end)),!0)}}}(),Nne.prototype.distanceToPoint=function(){let e=new jG;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),Nne.prototype.distanceToTriangle=function(){let e=new jG,t=new jG,n=["a","b","c"],r=new M0,i=new M0;return function(o,a=null,s=null){let l=a||s?r:null;if(this.intersectsTriangle(o,l))return(a||s)&&(a&&l.getCenter(a),s&&l.getCenter(s)),0;let c=1/0;for(let t=0;t<3;t++){let r,i=n[t],l=o[i];this.closestPointToPoint(l,e),r=l.distanceToSquared(e),r<c&&(c=r,a&&a.copy(e),s&&s.copy(l));let u=this[i];o.closestPointToPoint(u,e),r=u.distanceToSquared(e),r<c&&(c=r,a&&a.copy(u),s&&s.copy(e))}for(let u=0;u<3;u++){let l=n[u],d=n[(u+1)%3];r.set(this[l],this[d]);for(let u=0;u<3;u++){let l=n[u],d=n[(u+1)%3];i.set(o[l],o[d]),Rne(r,i,e,t);let h=e.distanceToSquared(t);h<c&&(c=h,a&&a.copy(e),s&&s.copy(t))}}return Math.sqrt(c)}}();var jne=class{constructor(e,t,n){this.isOrientedBox=!0,this.min=new jG,this.max=new jG,this.matrix=new gq,this.invMatrix=new gq,this.points=new Array(8).fill().map((()=>new jG)),this.satAxes=new Array(3).fill().map((()=>new jG)),this.satBounds=new Array(3).fill().map((()=>new One)),this.alignedSatBounds=new Array(3).fill().map((()=>new One)),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};jne.prototype.update=function(){return function(){let e=this.matrix,t=this.min,n=this.max,r=this.points;for(let l=0;l<=1;l++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){let a=r[1*l|2*i|4*o];a.x=l?n.x:t.x,a.y=i?n.y:t.y,a.z=o?n.z:t.z,a.applyMatrix4(e)}let i=this.satBounds,o=this.satAxes,a=r[0];for(let l=0;l<3;l++){let e=o[l],t=i[l],n=r[1<<l];e.subVectors(a,n),t.setFromPoints(e,r)}let s=this.alignedSatBounds;s[0].setFromPointsField(r,"x"),s[1].setFromPointsField(r,"y"),s[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}(),jne.prototype.intersectsBox=function(){let e=new One;return function(t){this.needsUpdate&&this.update();let n=t.min,r=t.max,i=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(e.min=n.x,e.max=r.x,a[0].isSeparated(e)||(e.min=n.y,e.max=r.y,a[1].isSeparated(e))||(e.min=n.z,e.max=r.z,a[2].isSeparated(e)))return!1;for(let s=0;s<3;s++){let n=o[s],r=i[s];if(e.setFromBox(n,t),r.isSeparated(e))return!1}return!0}}(),jne.prototype.intersectsTriangle=function(){let e=new Nne,t=new Array(3),n=new One,r=new One,i=new jG;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);let a=this.satBounds,s=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let e=0;e<3;e++){let r=a[e],i=s[e];if(n.setFromPoints(i,t),r.isSeparated(n))return!1}let l=o.satBounds,c=o.satAxes,u=this.points;for(let e=0;e<3;e++){let t=l[e],r=c[e];if(n.setFromPoints(r,u),t.isSeparated(n))return!1}for(let e=0;e<3;e++){let o=s[e];for(let e=0;e<4;e++){let a=c[e];if(i.crossVectors(o,a),n.setFromPoints(i,t),r.setFromPoints(i,u),n.isSeparated(r))return!1}}return!0}}(),jne.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}(),jne.prototype.distanceToPoint=function(){let e=new jG;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),jne.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map((()=>new M0)),n=new Array(12).fill().map((()=>new M0)),r=new jG,i=new jG;return function(o,a=0,s=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(s||l)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),s&&s.copy(r),l&&l.copy(i)),0;let c=a*a,u=o.min,d=o.max,h=this.points,p=1/0;for(let e=0;e<8;e++){let t=h[e];i.copy(t).clamp(u,d);let n=t.distanceToSquared(i);if(n<p&&(p=n,s&&s.copy(t),l&&l.copy(i),n<c))return Math.sqrt(n)}let A=0;for(let r=0;r<3;r++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){let a=(r+1)%3,s=(r+2)%3,l=1<<r|i<<a|o<<s,c=h[i<<a|o<<s],p=h[l];t[A].set(c,p);let f=e[r],m=e[a],g=e[s],v=n[A],y=v.start,b=v.end;y[f]=u[f],y[m]=i?u[m]:d[m],y[g]=o?u[g]:d[m],b[f]=d[f],b[m]=i?u[m]:d[m],b[g]=o?u[g]:d[m],A++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let n=0;n<=1;n++){i.x=e?d.x:u.x,i.y=t?d.y:u.y,i.z=n?d.z:u.z,this.closestPointToPoint(i,r);let o=i.distanceToSquared(r);if(o<p&&(p=o,s&&s.copy(r),l&&l.copy(i),o<c))return Math.sqrt(o)}for(let e=0;e<12;e++){let o=t[e];for(let e=0;e<12;e++){let t=n[e];Rne(o,t,r,i);let a=r.distanceToSquared(i);if(a<p&&(p=a,s&&s.copy(r),l&&l.copy(i),a<c))return Math.sqrt(a)}}return Math.sqrt(p)}}();var Hne=new jG,Qne=new jG,Vne=new jG,Wne=new hG,Gne=new hG,qne=new hG,Kne=new jG,Yne=new jG,Xne=new jG,$ne=new jG;function Jne(e,t,n,r,i,o,a,s,l){Hne.fromBufferAttribute(t,o),Qne.fromBufferAttribute(t,a),Vne.fromBufferAttribute(t,s);let c=function(e,t,n,r,i,o){let a;return a=o===FQ?e.intersectTriangle(r,n,t,!0,i):e.intersectTriangle(t,n,r,o!==IQ,i),null===a?null:{distance:e.origin.distanceTo(i),point:i.clone()}}(e,Hne,Qne,Vne,$ne,l);if(c){r&&(Wne.fromBufferAttribute(r,o),Gne.fromBufferAttribute(r,a),qne.fromBufferAttribute(r,s),c.uv=Zq.getInterpolation($ne,Hne,Qne,Vne,Wne,Gne,qne,new hG)),i&&(Wne.fromBufferAttribute(i,o),Gne.fromBufferAttribute(i,a),qne.fromBufferAttribute(i,s),c.uv1=Zq.getInterpolation($ne,Hne,Qne,Vne,Wne,Gne,qne,new hG)),n&&(Kne.fromBufferAttribute(n,o),Yne.fromBufferAttribute(n,a),Xne.fromBufferAttribute(n,s),c.normal=Zq.getInterpolation($ne,Hne,Qne,Vne,Kne,Yne,Xne,new jG),c.normal.dot(e.direction)>0&&c.normal.multiplyScalar(-1));let t={a:o,b:a,c:s,normal:new jG,materialIndex:0};Zq.getNormal(Hne,Qne,Vne,t.normal),c.face=t,c.faceIndex=o}return c}function Zne(e,t,n,r,i){let o=3*r,a=e.index.getX(o),s=e.index.getX(o+1),l=e.index.getX(o+2),{position:c,normal:u,uv:d,uv1:h}=e.attributes,p=Jne(n,c,u,d,h,a,s,l,t);return p?(p.faceIndex=r,i&&i.push(p),p):null}function ere(e,t,n,r){let i=e.a,o=e.b,a=e.c,s=t,l=t+1,c=t+2;n&&(s=n.getX(t),l=n.getX(t+1),c=n.getX(t+2)),i.x=r.getX(s),i.y=r.getY(s),i.z=r.getZ(s),o.x=r.getX(l),o.y=r.getY(l),o.z=r.getZ(l),a.x=r.getX(c),a.y=r.getY(c),a.z=r.getZ(c)}function tre(e,t,n,r,i,o,a){let s=n.index,l=n.attributes.position;for(let c=e,u=t+e;c<u;c++)if(ere(a,3*c,s,l),a.needsUpdate=!0,r(a,c,i,o))return!0;return!1}var nre=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function rre(e,t){return 65535===t[e+15]}function ire(e,t){return t[e+6]}function ore(e,t){return t[e+14]}function are(e){return e+8}function sre(e,t){return t[e+6]}var lre=new VG,cre=new jG,ure=["x","y","z"];function dre(e,t,n,r,i){let o=2*e,a=gre,s=vre,l=yre;if(rre(o,s)){!function(e,t,n,r,i,o){for(let a=r,s=r+i;a<s;a++)Zne(e,t,n,a,o)}(t,n,r,ire(e,l),ore(o,s),i)}else{let o=are(e);fre(o,a,r,cre)&&dre(o,t,n,r,i);let s=sre(e,l);fre(s,a,r,cre)&&dre(s,t,n,r,i)}}function hre(e,t,n,r){let i=2*e,o=gre,a=vre,s=yre;if(rre(i,a)){return function(e,t,n,r,i){let o=1/0,a=null;for(let s=r,l=r+i;s<l;s++){let r=Zne(e,t,n,s);r&&r.distance<o&&(a=r,o=r.distance)}return a}(t,n,r,ire(e,s),ore(i,a))}{let i,a,l=function(e,t){return t[e+7]}(e,s),c=ure[l],u=r.direction[c]>=0;u?(i=are(e),a=sre(e,s)):(i=sre(e,s),a=are(e));let d=fre(i,o,r,cre)?hre(i,t,n,r):null;if(d){let e=d.point[c];if(u?e<=o[a+l]:e>=o[a+l+3])return d}let h=fre(a,o,r,cre)?hre(a,t,n,r):null;return d&&h?d.distance<=h.distance?d:h:d||h||null}}var pre=function(){let e,t,n=[],r=new nre((()=>new VG));return function(...o){e=r.getPrimitive(),t=r.getPrimitive(),n.push(e,t);let a=i(...o);r.releasePrimitive(e),r.releasePrimitive(t),n.pop(),n.pop();let s=n.length;return s>0&&(t=n[s-1],e=n[s-2]),a};function i(n,r,o,a,s=null,l=0,c=0){function u(e){let t=2*e,n=vre,r=yre;for(;!rre(t,n);)t=2*(e=are(e));return ire(e,r)}function d(e){let t=2*e,n=vre,r=yre;for(;!rre(t,n);)t=2*(e=sre(e,r));return ire(e,r)+ore(t,n)}let h=2*n,p=gre,A=vre,f=yre;if(rre(h,A)){let t=ire(n,f),r=ore(h,A);return Cne(n,p,e),a(t,r,!1,c,l+n,e)}{let h,m,g,v,y=are(n),b=sre(n,f),w=y,x=b;if(s&&(g=e,v=t,Cne(w,p,g),Cne(x,p,v),h=s(g),m=s(v),m<h)){w=b,x=y;let e=h;h=m,m=e,g=v}g||(g=e,Cne(w,p,g));let C,S=o(g,rre(2*w,A),h,c+1,l+w);if(2===S){let e=u(w);C=a(e,d(w)-e,!0,c+1,l+w,g)}else C=S&&i(w,r,o,a,s,l,c+1);if(C)return!0;v=t,Cne(x,p,v);let B,_=o(v,rre(2*x,A),m,c+1,l+x);if(2===_){let e=u(x);B=a(e,d(x)-e,!0,c+1,l+x,v)}else B=_&&i(x,r,o,a,s,l,c+1);return!!B}}}(),Are=function(){let e=new Nne,t=new Nne,n=new gq,r=new jne,i=new jne;return function o(a,s,l,c,u=null){let d=2*a,h=gre,p=vre,A=yre;if(null===u&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,c),u=r),!rre(d,p)){let e=a+8,t=A[a+6];return Cne(e,h,lre),!!(u.intersectsBox(lre)&&o(e,s,l,c,u)||(Cne(t,h,lre),u.intersectsBox(lre)&&o(t,s,l,c,u)))}{let r=s,o=r.index,u=r.attributes.position,f=l.index,m=l.attributes.position,g=ire(a,A),v=ore(d,p);if(n.copy(c).invert(),l.boundsTree)return Cne(a,h,i),i.matrix.copy(n),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:e=>i.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(c),e.b.applyMatrix4(c),e.c.applyMatrix4(c),e.needsUpdate=!0;for(let n=3*g,r=3*(v+g);n<r;n+=3)if(ere(t,n,o,u),t.needsUpdate=!0,e.intersectsTriangle(t))return!0;return!1}});for(let i=3*g,a=v+3*g;i<a;i+=3){ere(e,i,o,u),e.a.applyMatrix4(n),e.b.applyMatrix4(n),e.c.applyMatrix4(n),e.needsUpdate=!0;for(let n=0,r=f.count;n<r;n+=3)if(ere(t,n,f,m),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}}}();function fre(e,t,n,r){return Cne(e,t,lre),n.intersectBox(lre,r)}var mre,gre,vre,yre,bre=[];function wre(e){mre&&bre.push(mre),mre=e,gre=new Float32Array(e),vre=new Uint16Array(e),yre=new Uint32Array(e)}function xre(){mre=null,gre=null,vre=null,yre=null,bre.length&&wre(bre.pop())}var Cre=Symbol("skip tree generation"),Sre=new VG,Bre=new VG,_re=new gq,Ere=new jne,Mre=new jne,Pre=new jG,Tre=new jG,Dre=new jG,Fre=new jG,Ire=new jG,kre=new VG,Ore=new nre((()=>new Nne)),Lre=class{static serialize(e,t={}){if(t.isBufferGeometry)return Lre.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});t={cloneBuffers:!0,...t};let n,r=e.geometry,i=e._roots,o=r.getIndex();return n=t.cloneBuffers?{roots:i.map((e=>e.slice())),index:o.array.slice()}:{roots:i,index:o.array},n}static deserialize(e,t,n={}){if("boolean"==typeof n)return Lre.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});n={setIndex:!0,...n};let{index:r,roots:i}=e,o=new Lre(t,{...n,[Cre]:!0});if(o._roots=i,n.setIndex){let n=t.getIndex();if(null===n){let n=new oK(e.index,1,!1);t.setIndex(n)}else n.array!==r&&(n.array.set(r),n.needsUpdate=!0)}return o}constructor(e,t={}){if(!e.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if((t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Cre]:!1},t)).useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[Cre]||(this._roots=function(e,t){let n,r,i,o=kne(e,t),a=[],s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let u=0;u<o.length;u++){let e=o[u],t=new s(32*l(e));n=new Float32Array(t),r=new Uint32Array(t),i=new Uint16Array(t),c(0,e),a.push(t)}return a;function l(e){return e.count?1:1+l(e.left)+l(e.right)}function c(e,t){let o=e/4,a=e/2,s=!!t.count,l=t.boundingData;for(let r=0;r<6;r++)n[o+r]=l[r];if(s){let n=t.offset,s=t.count;return r[o+6]=n,i[a+14]=s,i[a+15]=65535,e+32}{let n,i=t.left,a=t.right,s=t.splitAxis;if(n=c(e+32,i),n/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[o+6]=n/4,n=c(n,a),r[o+7]=s,n}}}(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new VG))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t,n,r,i,o=this.geometry,a=o.index.array,s=o.attributes.position,l=0,c=this._roots;for(let d=0,h=c.length;d<h;d++)t=c[d],n=new Uint32Array(t),r=new Uint16Array(t),i=new Float32Array(t),u(0,l),l+=t.byteLength;function u(t,o,l=!1){let c=2*t;if(65535===r[c+15]){let e=n[t+6],o=1/0,l=1/0,u=1/0,d=-1/0,h=-1/0,p=-1/0;for(let t=3*e,n=3*(e+r[c+14]);t<n;t++){let e=a[t],n=s.getX(e),r=s.getY(e),i=s.getZ(e);n<o&&(o=n),n>d&&(d=n),r<l&&(l=r),r>h&&(h=r),i<u&&(u=i),i>p&&(p=i)}return(i[t+0]!==o||i[t+1]!==l||i[t+2]!==u||i[t+3]!==d||i[t+4]!==h||i[t+5]!==p)&&(i[t+0]=o,i[t+1]=l,i[t+2]=u,i[t+3]=d,i[t+4]=h,i[t+5]=p,!0)}{let r=t+8,a=n[t+6],s=r+o,c=a+o,d=l,h=!1,p=!1;e?d||(h=e.has(s),p=e.has(c),d=!h&&!p):(h=!0,p=!0);let A=d||p,f=!1;(d||h)&&(f=u(r,o,d));let m=!1;A&&(m=u(a,o,d));let g=f||m;if(g)for(let e=0;e<3;e++){let n=r+e,o=a+e,s=i[n],l=i[n+3],c=i[o],u=i[o+3];i[t+e]=s<c?s:c,i[t+e+3]=l>u?l:u}return g}}}traverse(e,t=0){let n=this._roots[t],r=new Uint32Array(n),i=new Uint16Array(n);!function t(o,a=0){let s=2*o,l=65535===i[s+15];if(l){let t=r[o+6],c=i[s+14];e(a,l,new Float32Array(n,4*o,6),t,c)}else{let i=o+8,s=r[o+6],c=r[o+7];e(a,l,new Float32Array(n,4*o,6),c)||(t(i,a+1),t(s,a+1))}}(0)}raycast(e,t=DQ){let n=this._roots,r=this.geometry,i=[],o=t.isMaterial,a=Array.isArray(t),s=r.groups,l=o?t.side:t;for(let c=0,u=n.length;c<u;c++){let o=a?t[s[c].materialIndex].side:l,u=i.length;if(wre(n[c]),dre(0,r,o,e,i),xre(),a){let e=s[c].materialIndex;for(let t=u,n=i.length;t<n;t++)i[t].face.materialIndex=e}}return i}raycastFirst(e,t=DQ){let n=this._roots,r=this.geometry,i=t.isMaterial,o=Array.isArray(t),a=null,s=r.groups,l=i?t.side:t;for(let c=0,u=n.length;c<u;c++){let i=o?t[s[c].materialIndex].side:l;wre(n[c]);let u=hre(0,r,i,e);xre(),null!=u&&(null==a||u.distance<a.distance)&&(a=u,o&&(u.face.materialIndex=s[c].materialIndex))}return a}intersectsGeometry(e,t){let n=this.geometry,r=!1;for(let i of this._roots)if(wre(i),r=Are(0,n,e,t),xre(),r)break;return r}shapecast(e,t,n){let r=this.geometry;if(e instanceof Function){if(t){let e=t;t=(t,n,r,i)=>{let o=3*n;return e(t,o,o+1,o+2,r,i)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null}}let i=Ore.getPrimitive(),{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:s,intersectsTriangle:l}=e;if(s&&l){let e=s;s=(t,n,o,a,s)=>!!e(t,n,o,a,s)||tre(t,n,r,l,o,a,i)}else s||(s=l?(e,t,n,o)=>tre(e,t,r,l,n,o,i):(e,t,n)=>n);let c=!1,u=0;for(let d of this._roots){if(wre(d),c=pre(0,r,a,s,o,u),xre(),c)break;u+=d.byteLength}return Ore.releasePrimitive(i),c}bvhcast(e,t,n){let{intersectsRanges:r,intersectsTriangles:i}=n,o=this.geometry.index,a=this.geometry.attributes.position,s=e.geometry.index,l=e.geometry.attributes.position;_re.copy(t).invert();let c=Ore.getPrimitive(),u=Ore.getPrimitive();if(i){let e=function(e,n,r,d,h,p,A,f){for(let m=r,g=r+d;m<g;m++){ere(u,3*m,s,l),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let t=e,r=e+n;t<r;t++)if(ere(c,3*t,o,a),c.needsUpdate=!0,i(c,u,t,m,h,p,A,f))return!0}return!1};if(r){let t=r;r=function(n,r,i,o,a,s,l,c){return!!t(n,r,i,o,a,s,l,c)||e(n,r,i,o,a,s,l,c)}}else r=e}e.getBoundingBox(Bre),Bre.applyMatrix4(t);let d=this.shapecast({intersectsBounds:e=>Bre.intersectsBox(e),intersectsRange:(t,n,i,o,a,s)=>(Sre.copy(s),Sre.applyMatrix4(_re),e.shapecast({intersectsBounds:e=>Sre.intersectsBox(e),intersectsRange:(e,i,s,l,c)=>r(t,n,e,i,o,a,l,c)}))});return Ore.releasePrimitive(c),Ore.releasePrimitive(u),d}intersectsBox(e,t){return Ere.set(e.min,e.max,t),Ere.needsUpdate=!0,this.shapecast({intersectsBounds:e=>Ere.intersectsBox(e),intersectsTriangle:e=>Ere.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},r={},i=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Ere.set(e.boundingBox.min,e.boundingBox.max,t),Ere.needsUpdate=!0;let a=this.geometry,s=a.attributes.position,l=a.index,c=e.attributes.position,u=e.index,d=Ore.getPrimitive(),h=Ore.getPrimitive(),p=Tre,A=Dre,f=null,m=null;r&&(f=Fre,m=Ire);let g=1/0,v=null,y=null;return _re.copy(t).invert(),Mre.matrix.copy(_re),this.shapecast({boundsTraverseOrder:e=>Ere.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<o&&(t&&(Mre.min.copy(e.min),Mre.max.copy(e.max),Mre.needsUpdate=!0),!0),intersectsRange:(n,r)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:e=>Mre.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<o,intersectsRange:(e,o)=>{for(let a=3*e,b=3*(e+o);a<b;a+=3){ere(h,a,u,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let e=3*n,t=3*(n+r);e<t;e+=3){ere(d,e,l,s),d.needsUpdate=!0;let t=d.distanceToTriangle(h,p,f);if(t<g&&(A.copy(p),m&&m.copy(f),g=t,v=e/3,y=a/3),t<i)return!0}}}});for(let e=0,o=u?u.count:c.count;e<o;e+=3){ere(h,e,u,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let t=3*n,o=3*(n+r);t<o;t+=3){ere(d,t,l,s),d.needsUpdate=!0;let n=d.distanceToTriangle(h,p,f);if(n<g&&(A.copy(p),m&&m.copy(f),g=n,v=t/3,y=e/3),n<i)return!0}}}}),Ore.releasePrimitive(d),Ore.releasePrimitive(h),g===1/0?null:(n.point?n.point.copy(A):n.point=A.clone(),n.distance=g,n.faceIndex=v,r&&(r.point?r.point.copy(m):r.point=m.clone(),r.point.applyMatrix4(_re),A.applyMatrix4(_re),r.distance=A.sub(r.point).length(),r.faceIndex=y),n)}closestPointToPoint(e,t={},n=0,r=1/0){let i=n*n,o=r*r,a=1/0,s=null;if(this.shapecast({boundsTraverseOrder:t=>(Pre.copy(e).clamp(t.min,t.max),Pre.distanceToSquared(e)),intersectsBounds:(e,t,n)=>n<a&&n<o,intersectsTriangle:(t,n)=>{t.closestPointToPoint(e,Pre);let r=e.distanceToSquared(Pre);return r<a&&(Tre.copy(Pre),a=r,s=n),r<i}}),a===1/0)return null;let l=Math.sqrt(a);return t.point?t.point.copy(Tre):t.point=Tre.clone(),t.distance=l,t.faceIndex=s,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach((t=>{Cne(0,new Float32Array(t),kre),e.union(kre)})),e}},Rre=cQ(dQ()),Ure=.5*(Math.sqrt(3)-1),zre=(3-Math.sqrt(3))/6,Nre=1/3,jre=1/6,Hre=e=>0|Math.floor(e),Qre=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),Vre=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Wre(e=Math.random){let t=Gre(e),n=new Float64Array(t).map((e=>Qre[e%12*2])),r=new Float64Array(t).map((e=>Qre[e%12*2+1]));return function(e,i){let o,a,s=0,l=0,c=0,u=(e+i)*Ure,d=Hre(e+u),h=Hre(i+u),p=(d+h)*zre,A=e-(d-p),f=i-(h-p);A>f?(o=1,a=0):(o=0,a=1);let m=A-o+zre,g=f-a+zre,v=A-1+2*zre,y=f-1+2*zre,b=255&d,w=255&h,x=.5-A*A-f*f;if(x>=0){let e=b+t[w];x*=x,s=x*x*(n[e]*A+r[e]*f)}let C=.5-m*m-g*g;if(C>=0){let e=b+o+t[w+a];C*=C,l=C*C*(n[e]*m+r[e]*g)}let S=.5-v*v-y*y;if(S>=0){let e=b+1+t[w+1];S*=S,c=S*S*(n[e]*v+r[e]*y)}return 70*(s+l+c)}}function Gre(e){let t=new Uint8Array(512);for(let n=0;n<256;n++)t[n]=n;for(let n=0;n<255;n++){let r=n+~~(e()*(256-n)),i=t[n];t[n]=t[r],t[r]=i}for(let n=256;n<512;n++)t[n]=t[n-256];return t}var qre,Kre=new Zq,Yre=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||3!==t.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let n=1;Kre.a.fromBufferAttribute(e,r),Kre.b.fromBufferAttribute(e,r+1),Kre.c.fromBufferAttribute(e,r+2),n*=Kre.getArea(),t[r/3]=n}this.distribution=new Float32Array(e.count/3);let n=0;for(let r=0;r<t.length;r++)n+=t[r],this.distribution[r]=n;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let n=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*n);return this.sampleFace(r,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,n=0,r=t.length-1,i=-1;for(;n<=r;){let o=Math.ceil((n+r)/2);if(0===o||t[o-1]<=e&&t[o]>e){i=o;break}e<t[o]?r=o-1:n=o+1}return i}sampleFace(e,t,n){let r=this.randomFunction(),i=this.randomFunction();return r+i>1&&(r=1-r,i=1-i),Kre.a.fromBufferAttribute(this.positionAttribute,3*e),Kre.b.fromBufferAttribute(this.positionAttribute,3*e+1),Kre.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(Kre.a,r).addScaledVector(Kre.b,i).addScaledVector(Kre.c,1-(r+i)),Kre.getNormal(n),this}},Xre=cQ(hQ()),$re=new gq,Jre=new gq,Zre=new gq;(qre||(qre={})).is=function(e){return e&&e.__isSPEObject};var eie,tie=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new gq,this.copyPreviousMatrix=!0,this.hiddenMatrix=new gq,this.matrixWorldRigid=new gq,this.shearScale=new gq,this.shearScaleInv=new gq}get __isSPEObject(){return!0}isDescendantOf(e){e instanceof Hq&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let t of this.children)t.updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),t)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseChildren(e,t=0){for(let n of this.children)qre.is(n)&&n.traverseObject(e,t+1)}traverseObject(e,t=0){if(!0!==e(this,t))for(let n of this.children)qre.is(n)&&n.traverseObject(e,t+1)}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:n,v:r,q:i}=(0,Xre.SVD)(t),o=$re.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),a=Jre.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),s=Zre.copy(a).transpose();this.shearScale.makeScale(i[0],i[1],i[2]).multiply(s).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,s).copyPosition(this.matrixWorld),i.every((e=>Math.abs(i[0]-e)<.01))?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(e,t){this.updateWorldMatrix(!0,!1);let n=(new gq).copy(this.matrixWorld).invert();return null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),n.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof gq?e.hiddenMatrix.premultiply(n):e.applyMatrix4(n),e.updateWorldMatrix(!1,!1),this.add(e),void 0!==t&&(this.children.pop(),this.children.splice(t,0,e)),this}copy(e,t=!1){return super.copy(e,t),this.hasNonUniformScale=e.hasNonUniformScale,this}onAfterRender(e,t,n,r,i,o){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},nie=class extends(tie(Hq)){},rie=class extends nie{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let n=this.children[e];(null==n?void 0:n.object)!==t&&(n&&this.remove(n),n=new rie(t),this.add(n),this.children.splice(e,0,this.children.pop()),n.matrixWorldNeedsUpdate=!0,n.matrixAutoUpdate=!1,n.matrix=t.matrix,n.hiddenMatrix=t.hiddenMatrix),n.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return void 0!==this.playModeVisible?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&!0===(null==(e=this.object.dataPatched.cloner)?void 0:e.hideBase)}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return(e=>"Mesh"===e.type)(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},iie=new jG,oie=new jG,aie=new gq,sie=[new jG(-1,1,1),new jG(-1,-1,1),new jG(1,-1,1),new jG(1,1,1),new jG(-1,1,-1),new jG(-1,-1,-1),new jG(1,-1,-1),new jG(1,1,-1)],lie=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],cie=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],uie=(e,t,n)=>{e.updateEntityBoxSize(iie,oie),aie.copy(t).multiply(e.matrixWorld),0===oie.x&&0===oie.y&&0===oie.z?n.push(new jG(iie.x,iie.y,iie.z).applyMatrix4(aie)):sie.forEach((e=>{n.push(e.clone().multiply(oie).add(iie).applyMatrix4(aie))}))},die=class extends VG{constructor(){super(...arguments),this.matrix=new gq,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map((e=>e.clone())),this.faces=e.faces.map((e=>e.clone())),this.edges=e.edges.map((e=>e.clone())),this.centerEdges=e.centerEdges.map((e=>e.clone())),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let n=(new gq).copy(e.matrixWorld).invert();return this.expandByObjectSize(e,n,t)}expandByObjectSize(e,t,n=!1){let r=[];return!0===n?e.traverseEntity((e=>{if(e.visible||e.cloner&&e.data.visible){if(!("geometry"in e))return void r.push(new jG);uie(e,t,r)}})):uie(e,t,r),this.setFromPoints(r)}getCenter(e){return(e=super.getCenter(e)).applyMatrix4(this.matrix),e}getPositionToCenter(e){return(e=super.getCenter(e)).applyMatrix4(aie.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(oie).multiplyScalar(.5),this.getCenter(iie),aie.copy(this.matrix).setPosition(iie),this.vertices=sie.map((e=>e.clone().multiply(oie).applyMatrix4(aie)))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=lie.map((([e,t])=>new M0(this.vertices[e],this.vertices[t]))),this.centerEdges=this.edges.map((e=>e.getCenter(new jG)))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=cie.map((([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5)))}},hie={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},pie=class extends SJ{constructor(){super()}getPoints(e=12){let t,n=[],r=this.getCurveLengths(),i=r[r.length-1]/r.length;for(let o=0,a=this.curves;o<a.length;o++){let s=a[o],l=0===o?r[o]:r[o]-r[o-1],c=Math.ceil(e*l/i),u=s.getPoints(c);for(let e=0;e<u.length;e++){let r=u[e];t&&t.equals(r)||(n.push(r),t=r)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},Aie=.001;function fie(e,t,n){return t.clone().sub(e).cross(t.clone().sub(n)).length()<=Aie}function mie(e,t){let n=new jG(...e.position),r=new jG(...e.controlNext.position),i=new jG(...t.controlPrevious.position),o=new jG(...t.position);return fie(n,r,o)&&fie(n,i,o)}function gie(e){let t=e.points.map((e=>new jG(...e.data.position))),n=[e.points[0]],r=new jG(...n[0].data.position);for(let u=0;u<e.points.length-1;u++)fie(r,t[u],t[u+1])||(n.push(e.points[u]),r=t[u]);n.push(e.points[e.points.length-1]);let i=e.isClosed,o=n.length-(i?0:1),a=n.length,s=[];for(let u=0;u<a;u++){let t=n[u].data,r=new jG(...t.position),o=new jG(...t.controlPrevious.position),l=new jG(...t.controlNext.position),c={position:r,baseRoundness:t.roundness,controlPrevious:o,controlNext:l};if(0===t.roundness||!e.isClosed&&(0===u||u===a-1)){s[u]={...c,removedLength:0};continue}let d=i&&u==a-1?0:u+1,h=n[i&&0==u?a-1:u-1].data,p=n[d].data,A=new jG(...h.position),f=new jG(...p.position),m=A.clone().sub(r).normalize(),g=f.clone().sub(r).normalize();Object.assign(c,{prevDir:m,nextDir:g});let v=mie(h,t),y=mie(t,p);if(v&&y){let e=m.clone().add(g).normalize(),n=e.clone().cross(m).length()/m.dot(e);s[u]={...c,tan:n,removedLength:t.roundness/n}}else s[u]={...c,removedLength:0}}for(let u=0;u<o;u++){let e=i&&u===a-1?0:u+1,t=s[u],n=s[e];if(0!==t.removedLength||0!==n.removedLength){let e=t.position.distanceTo(n.position);t.removedLength=Math.min(t.removedLength,e/2),n.removedLength=Math.min(n.removedLength,e/2)}}let l=[];for(let u=0;u<o;u++){let e=u,t=i&&u===a-1?0:u+1,r=s[e],o=s[t],c=null;if(mie(n[e].data,n[t].data)){let e=r.position.clone(),t=o.position.clone();(0!==r.removedLength||0!==o.removedLength)&&(r.nextDir&&e.add(r.nextDir.clone().setLength(r.removedLength)),o.prevDir&&t.add(o.prevDir.clone().setLength(o.removedLength))),e.distanceTo(t)>Aie&&(c=new vJ(e,e.clone().lerp(t,.3),t.clone().lerp(e,.3),t))}else r.position.distanceTo(o.position)>Aie&&(c=new vJ(r.position,r.controlNext,o.controlPrevious,o.position));l[2*u+1]=c}for(let u=0;u<a;u++){let e=s[u];if(0===e.removedLength){l[2*u]=null;continue}let t=e.position,n=e.prevDir.clone().multiplyScalar(e.removedLength).add(t),r=e.nextDir.clone().multiplyScalar(e.removedLength).add(t),i=e.tan*e.removedLength,o=e.prevDir.clone().add(e.nextDir).normalize(),a=n.clone().lerp(r,.5),c=n.distanceTo(r)/2,d=o.clone().multiplyScalar(Math.sqrt(Math.pow(i,2)-Math.pow(c,2))).add(a),h=o.clone().multiplyScalar(-i).add(d),p=t.distanceTo(h)/t.distanceTo(a),A=e.prevDir.clone().multiplyScalar(p*t.distanceTo(n)).add(t),f=A.clone().lerp(h,2),m=n.clone().lerp(A,4/3),g=r.clone().lerp(f,4/3);l[2*u]=new vJ(n,m,g,r)}let c=new pie;return l.forEach((e=>{e&&c.add(e)})),c}(eie||(eie={})).is=function(e){return e&&e.__isEntity};var vie=e=>eie.is(e),yie={type:"completeState",isfromEntity:!0},bie=["x","y","z"],wie=new jG,xie=(new jG).set(0,1,0),Cie=e=>class extends(tie(e)){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new die,this._recursiveBBox=new die,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(e){let t=this.children[e];if(eie.is(t))return t}entityChildrenCount(){let e=this.children.length;for(;e--;)if(eie.is(this.children[e]))return e+1;return 0}get isConcreteEntity(){return"string"==typeof this.identity}get isVirtualEntity(){return"string"!=typeof this.identity}get isInstanceRoot(){return this.isConcreteEntity&&"Instance"===this.data.type}nearestInstanceSelfOrParent(){let e=this;for(;"Instance"!==e.data.type;){let t=e.parent;if(!eie.is(t))return;e=t}return e}forInstancesRec(e){this.instances.forEach((t=>{t.disposed||e(t),t.forInstancesRec(e)}))}super_Entity(e,t){"string"==typeof e&&(this.uuid=e),this.identity=e,this.data=t,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(e,t,n=!1){if(0!==this.data.states.length||n){for(let e of this.data.states)hte.toOps(this.data,e.data).forEach((e=>{let n=x8.replaceProps(e,this.data);this.dataPatched=this.data,this.updateByPatchedOp(n,this.data,t)}));if(null!==e){let n=this.data.states.data(e);n&&(this.dataPatched=hte.patch(this.data,n),hte.toOps(this.data,n).forEach((e=>{this.updateByPatchedOp(e,this.dataPatched,t)})))}n&&this.updateTransformState(this.dataPatched,t),this.stateSelection=e,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(e,t){e.setScalar(0),t.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors((e=>{vie(e)&&e.resetBBoxNeedsUpdateSelf()})),this.traverseEntity((e=>{e.resetBBoxNeedsUpdateSelf()}))}find(e){let t;return this.traverseEntity((n=>{n.uuid===e&&(t=n)})),t}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children,n=t.indexOf(this)+1;if(eie.is(t[n]))return t[n];if(eie.is(e))return e.traverseSortNextHelper()}}sortNext(){let e=this.children;return this.children.length>0&&eie.is(this.children[0])?e[0]:this.traverseSortNextHelper()}goUp(e){let t=this;for(;e>0&&null!==t;)t=t.parent,e-=1;return t}hasAnccestorOrSelf(e){return this===e||this.hasAnccestor(e)}hasAnccestor(e){let t=this.parent;for(;t;){if(e===t)return!0;t=t.parent}return!1}countToAccestor(e){let t=0,n=this;for(;n!==e;){if(null===n)return-1;n=n.parent,t+=1}return t}forEachEntity(e){for(let t of this.children)vie(t)&&e(t)}traverseEntityAncestors(e){this.traverseAncestors((t=>{eie.is(t)&&e(t)}))}traverseConcreteEntity(e,t=0){if(!0!==e(this,t))for(let n of this.children)vie(n)&&n.isConcreteEntity&&n.traverseEntity(e,t+1)}traverseEntity(e,t=0){if(!0!==e(this,t))for(let n of this.children)vie(n)&&n.traverseEntity(e,t+1)}traverseVisibleEntity(e){e(this);for(let t of this.children)vie(t)&&t.visible&&t.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(e){super.updateMatrixWorld(e),this.dispatchEvent({type:"updateMatrixWorld"})}copy(e,t=!1){return super.copy(e,t),this.dataPatched=e.dataPatched,this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}hasEntityChild(){return this.children.some((e=>vie(e)))}isAncestorOf(e){if(this.uuid===e)return!1;let t=!1;return this.traverseEntity((n=>{n.uuid===e&&(t=!0)})),t}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let t={position:this.position.toArray(),rotation:[this.rotation.x*dG.RAD2DEG,this.rotation.y*dG.RAD2DEG,this.rotation.z*dG.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return B6(t,e)}getTransformValues(e,t,n){return t[e].map(((t,r)=>(null==n?void 0:n.shared.getVariable(t,[this.uuid,e,bie[r]]))??t))}updateTransformState(e,t){let n=!1;return e.position&&(this.position.fromArray(this.getTransformValues("position",e,t)),n=!0),e.rotation&&(wie.fromArray(this.getTransformValues("rotation",e,t)).multiplyScalar(dG.DEG2RAD),this.rotation.setFromVector3(wie),n=!0),e.scale&&(this.scale.fromArray(this.getTransformValues("scale",e,t)),n=!0),void 0!==e.hiddenMatrix&&(n=!0,this.hiddenMatrix.fromArray(e.hiddenMatrix??q9.identity)),n&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors((e=>{e.invalidateClonerTransform(this)}))),e.position&&e.rotation&&e.scale&&void 0!==e.hiddenMatrix&&this.updateWorldMatrix(!1,!0),n}onVariableUpdate(e=!1){e?this.resetBBoxNeedsUpdate():(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors((e=>{e.invalidateClonerTransform(this)})))}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let e of this.children)eie.is(e)&&e.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach((e=>{eie.is(e)&&e.disposeRecursively()}))}toState(e=[]){let t={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return B6(t,e)}updateByObjUpdateOp(e,t){void 0!==e&&this.updateByOp({type:0,props:e,path:[]},{...this.data,...e},t,!1)}updateByOp(e,t,n,r){let i=this.data;this.data=t;let o=e,a=J8(e.path,["states","*"]);if(null!==a){if(0===e.type){let[t]=a;if((null==this?void 0:this.stateSelection)===t){let t={...e.props};if(delete t.name,Object.values(e.props).some((e=>void 0===e))){let n=this.data;if(void 0!==n){let r=G8.zoom(n,e.path.slice(2));if(r)for(let n in e.props)void 0===e.props[n]&&n in r&&(t[n]=r[n])}}o={...e,props:t,path:e.path.slice(2)}}}}else if(0===e.type){let t=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(void 0!==t){if(void 0!==e.props.name&&t.name){let{name:e,...n}=t;t=n}if(void 0!==e.props.material&&"material"in t){let{material:e,...n}=t;t=n}let n=G8.removeOverridden(e.path,e.props,t);o={...e,props:n}}}if(this.updateByPatchedOpBase(o,hte.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),n),J8(e.path,["overrides"])){let r=[],i=[...e.path];for(r.push(i[1]),i.splice(0,2);i.length>0&&"descendants"===i[0];)r.push(i[1]),i.splice(0,2);if(void 0===r[r.length-1]){if(0===e.type)for(let t of Object.keys(e.props)){r[r.length-1]=t;let i=n.scene.findInstance([this.uuid,...r]);i&&(i.overrideData=e.props[t],i.updateState(b8.apply(i.component.data,i.overrideData),n))}}else{let o=n.scene.findInstance([this.uuid,...r]);if(o){let a=G8.zoom(o.component.data,i);if(0===(e={...e,path:i}).type){let t=e.props;if(a)for(let[n,r]of Object.entries(e.props))void 0===r&&(t===e.props&&(t={...e.props}),t[n]=a[n]);e={...e,props:t}}o.overrideData=lte.resolve(t.overrides,r),o.updateByOp(e,C8.applySimple(o.data,e),n,!1)}}}else if(this.instances.length>0){let r;if(0===e.path.length&&0===e.type){let t;for(let n of cte.rootOverrideProps)n in e.props&&(void 0===t&&(t={}),t[n]=e.props[n]);t&&(r={...e,props:t})}else for(let t of cte.rootOverrideProps)if(J8(e.path,[t])){r=e;break}void 0!==r&&this.instances.forEach((e=>{if(e.isInstanceRoot){let t=b8.filterOp(e.overrideData,r);t&&e.updateByOp(t,C8.applySimple(e.data,t),n,!0)}})),this.instances.forEach((r=>{if(!r.isInstanceRoot){let o=b8.filterOp(r.overrideData,e);if(o){let a;a=i===r.data&&e===o?t:C8.applySimple(r.data,o),r.updateByOp(o,a,n,!0)}}}))}}updateByPatchedOpBase(e,t,n){if(this.dataPatched=t,0===e.path.length&&0===e.type)void 0!==e.props.type&&!iee.is(e.props.type)&&hie.changeEntityProptotype(this,t,n);else if(1===e.path.length&&"geometry"===e.path[0]&&0===e.type&&"type"in e.props){hie.changeEntityProptotype(this,t,n);for(let e of this.children)eie.is(e)&&e.updateVisible(n.scene)}this.updateByPatchedOp(e,t,n)}updateByPatchedOp(e,t,n){if(0===e.path.length&&0===e.type&&this.updateState(e.props,n),null!==J8(e.path,["pathSnapping"])&&this.updatePathSnapping(t.pathSnapping),null!==J8(e.path,["cloner"])){let r=C8.drop(e,1);0===r.path.length&&0===r.type&&!0===r.props.disabled?this.setFromClonerState(null,n):this.cloner?this.cloner.updateState(t.cloner,n.scene):(this.setFromClonerState(t.cloner,n),this.expandCloner(n.scene)),this.updateVisible(n.scene)}}updatePathSnapping(e=this.dataPatched.pathSnapping){this._updatedPathSnapping=e,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(e){var t,n,r,i,o;let a=(null==(t=this._updatedPathSnapping)?void 0:t.pathId)??this.dataPatched.pathSnapping.pathId,s=(null==(n=this._updatedPathSnapping)?void 0:n.slide)??this.dataPatched.pathSnapping.slide??0,l=(null==(r=this._updatedPathSnapping)?void 0:r.offset)??this.dataPatched.pathSnapping.offset??0,c=(null==(i=this._updatedPathSnapping)?void 0:i.orientation)??this.dataPatched.pathSnapping.orientation;if(null===a)return;let u=e.find(a);if(!u||!1===this._needApplyPathSnapping)return;this._needApplyPathSnapping=!1;let d=u.data;if(d.geometry.path.points.length<=1)return;let h=gie(d.geometry.path),p=(s+l)%1;s+l===1&&0===p&&(p=1);let A=h.curves.length?h.getPointAt(p):null;if(null===A)return;let f=this.parent?null==(o=this.parent)?void 0:o.matrixWorld:new gq;u.updateMatrixWorld();let m=(new gq).multiplyMatrices(f.clone().invert(),u.matrixWorld);A.applyMatrix4(m);let g={position:A.toArray(),rotation:d.rotation};if("tangential"===c){let e=(new gq).extractRotation(u.matrixWorld),t=h.getTangentAt(p).applyMatrix4(e).add(A),n=(new gq).lookAt(A,t,xie),r=wie.setFromEuler((new Eq).setFromRotationMatrix(n)).multiplyScalar(dG.RAD2DEG);g={...g,rotation:r.toArray()}}this.updateTransformState(g),this.traverseEntity((e=>{e._cameraType&&e.dispatchEvent(yie)}))}updateVisible(e){var t;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||!0!==(null==(t=this.dataPatched.cloner)?void 0:t.hideBase)),!e)return;let n=!1;this.traverseEntity((e=>{if("Splat"===e.data.type)return n=!0,!0})),n&&e.reloadSplats()}updateState_Entity(e,t){void 0!==e.name&&(this.name=e.name),void 0!==e.raycastLock&&(this.raycastLock=e.raycastLock),void 0!==e.visible&&(this.updateVisible(null==t?void 0:t.scene),this.resetBBoxNeedsUpdate()),t&&"cloner"in e&&void 0!==e.cloner&&(this.setFromClonerState(e.cloner,t),this.updateVisible(t.scene)),this.updateTransformState(e,t)}get attachedSurfaceCloners(){return this.children.filter((e=>e instanceof hie.Cloner&&"toObject"===e.parameters.type))}setFromClonerState(e,t){this.disposed||(null===e||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):void 0===this.cloner?(this.cloner=new hie.Cloner(this,e),t.scene.addPendingExpandCloner(this)):this.cloner.updateState(e,t.scene))}expandCloner(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}invalidateClonerTransform(e){this.cloner&&this.cloner.invalidateTransform(e)}requestRender(){this.dispatchEvent({type:"requestRender"})}},Sie=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);n.thetaLength=dG.clamp(n.thetaLength,0,360);let r=n.width/2,i=n.radiusTop??r,o=n.radiusBottom??r;return i===o?(i=r,o=r):i>o?(i=r,o=o*r/i):(i=i*r/o,o=r),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),radiusTop:i,radiusBottom:o})}}static build(e){let t,{width:n,depth:r,height:i,radialSegments:o,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c,radiusTop:u,radiusBottom:d,cornerRadius:h,cornerSegments:p,hollow:A}=e.parameters;return 0===c?(t=new mK,t.setAttribute("position",new lK([],3))):t=h||A?new Eie(u,d,i,o,a,s,l,c*Math.PI/180,h,h,p,A):new EJ(u,d,i,o,a,s,l,c*Math.PI/180),t.scale(1,1,r/n),Object.assign(t,{userData:{...e,type:"CylinderGeometry"}})}};function Bie(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function _ie(e){return new hG(e.y,-e.x)}var Eie=class extends mK{constructor(e,t,n,r,i,o,a,s,l,c,u,d,h=!1){super(),this.type="RoundedCylinderBufferGeometry",e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI,o&&(l=0,c=0);let p=[],A=[],f=[],m=[],g=0,v=n/2,y=new jG,b=new jG;h&&0==e&&(e=l),h&&0==t&&(t=c);let w=new hG(e,v),x=new hG(t,-v),C=null,S=null,B=null,_=null,E=w.clone().sub(x),M=0,P=0,T=0;d>0&&(M=Math.min(e,t)*(1-d),P=e-M,T=t-M);let D=w.clone();D.x-=M;let F=Math.PI-E.angle(),I=E.angle(),k=Math.tan(I/2),O=Math.tan(F/2),L=k+O,R=d?L:O,U=d?L:k;if(l=Math.min(l,(e-P)/R,E.length()/L),c=Math.min(c,(t-T)/U,E.length()/L),l>0){let e=l/k;C=w.clone().sub(new hG(e,l)),d&&(B=C.clone(),B.x-=M-L*l),w.sub(E.clone().setLength(e))}if(c>0){let e=c/O;S=x.clone().sub(new hG(e,-c)),x.add(E.clone().setLength(e)),d&&(_=S.clone(),_.x-=M-L*c,D.sub(E.clone().setLength(e)))}E=w.clone().sub(x);let z=E.length()<.5,N=[];for(let V=0;V<=r;V++){let u=[],h=V/r,p=h*s+a,v=new hG(Math.sin(p),Math.cos(p));if(_&&S?(j(u,h,v,F,c,_,-1,!0),j(u,h,v,I,c,S,-1,!1)):S?(H(u,v,S.x,0,-1),j(u,h,v,I,c,S,-1,!1)):o||H(u,v,t,T,-1),Bie(_ie(E).normalize(),v,y),!z)for(let e=0;e<=i;e++){let t=e/i;Bie(E.clone().multiplyScalar(t).add(x),v,b),A.push(b.x,b.y,b.z),f.push(y.x,y.y,y.z),m.push(h,.5+b.y/n),u.push(g++)}if(B&&C?(j(u,h,v,F,l,C,1,!1),j(u,h,v,I,l,B,1,!0)):C?(j(u,h,v,F,l,C,1,!1),H(u,v,C.x,0,1)):o||H(u,v,e,P,1),d&&!z){Bie(_ie(E).multiplyScalar(-1).normalize(),v,y);for(let e=0;e<=i;e++){let t=e/i;Bie(E.clone().multiplyScalar(-t).add(D),v,b),A.push(b.x,b.y,b.z),f.push(y.x,y.y,y.z),m.push(h,.5+b.y/n),u.push(g++)}}d&&!o&&u.push(u[0]),N.push(u)}for(let V=0;V<N.length-1;V++)for(let e=0;e<N[0].length-1;e++){if(o&&d&&e==i)continue;let t=N[V][e],n=N[V+1][e],r=N[V+1][e+1],a=N[V][e+1],s=A[3*r+0],l=A[3*r+2];p.push(t,n,a),(0!=s||0!=l)&&p.push(n,r,a)}function j(e,t,r,i,o,a,s,l){for(let c=0;c<u+1;c++){let d=c/u,h=s<0?d:1-d;l&&(h-=1),h*=i;let p=new hG(Math.sin(h),Math.cos(h)*s);Bie(p.clone().multiplyScalar(o).add(a),r,b),A.push(b.x,b.y,b.z),Bie(p,r,y),f.push(y.x,y.y,y.z),m.push(t,.5+b.y/n),e.push(g++)}}function H(e,t,n,r,i){let o=new jG,a=new hG,s=[n,r];i<0&&s.reverse();for(let l of s)a.set(l,v*i),Bie(a,t,o),A.push(o.x,o.y,o.z),f.push(0,i,0),m.push(.5,.5),e.push(g++)}function Q(n,r,i){let o=new hG(Math.sin(i),Math.cos(i)),a=new hG(-Math.cos(i),Math.sin(i)),s=new jG,l=n<0?(e,t,n)=>p.push(e,t,n):(e,t,n)=>p.push(e,n,t);Bie(new hG((e+t+P+T)/4,0),o,s),A.push(s.x,s.y,s.z),f.push(a.x,0,a.y),m.push(.5,.5);let c=g++;for(let e of r){let t=A.slice(3*e,3*e+3);A.push(...t),f.push(a.x,0,a.y);let n=m.slice(2*e,2*e+2);m.push(...n),g++}for(let e=c+1;e<g-1;e++)l(c,e,e+1);l(c,g-1,c+1)}s<2*Math.PI&&(Q(-1,N[0],a),Q(1,N[N.length-1],a+s)),this.setIndex(p),this.setAttribute("position",new lK(A,3)),this.setAttribute("normal",new lK(f,3)),this.setAttribute("uv",new lK(m,2))}},Mie=Math.PI/2,Pie=class extends mK{constructor(e=1,t=1,n=1,r=1,i=1,o=1,a=0,s=4){super(),this.type="BoxGeometry",r=Math.floor(r),i=Math.floor(i),o=Math.floor(o),s=Math.floor(s),a=Math.min(a,e/2,t/2,n/2);let l=[],c=[],u=[],d=[],h=0;function p(e,t,n,r,i,o,s,p,A,f){let m=(o-2*a)/A,g=(s-2*a)/f,v=o/2-a,y=s/2-a,b=p/2,w=A+1,x=f+1,C=0,S=new jG;for(let a=0;a<x;a++){let o=a*g-y;for(let s=0;s<w;s++){let l=s*m-v;S[e]=l*r,S[t]=o*i,S[n]=b,c.push(S.x,S.y,S.z),S[e]=0,S[t]=0,S[n]=p>0?1:-1,u.push(S.x,S.y,S.z),d.push(s/A),d.push(1-a/f),C+=1}}for(let a=0;a<f;a++)for(let e=0;e<A;e++){let t=h+e+w*a,n=h+e+w*(a+1),r=h+(e+1)+w*(a+1),i=h+(e+1)+w*a;l.push(t,n,i),l.push(n,r,i)}h+=C}function A(e,t,n,r,i,o,p,A,f,m){let g=(p-2*a)/m,v=p/2-a,y=A/2-a,b=f/2,w=m+1,x=0,C=new jG,S=new jG;for(let l=0;l<s+1;l++){let h=l/s*Mie,p=Math.sin(h)*a,A=(1-Math.cos(h))*a,f=Math.sin(h),B=Math.cos(h);C[t]=(y+p)*i,C[n]=(b-A)*o,S[e]=0,S[t]=f*Math.sign(C[t]),S[n]=B*Math.sign(C[n]);for(let t=0;t<w;t++){let n=t*g-v;C[e]=n*r,c.push(C.x,C.y,C.z),u.push(S.x,S.y,S.z),d.push(t/m),d.push(0),x+=1}}for(let a=0;a<s;a++)for(let e=0;e<m;e++){let t=h+e+w*a,n=h+e+w*(a+1),r=h+(e+1)+w*(a+1),i=h+(e+1)+w*a;l.push(t,n,i),l.push(n,r,i)}h+=x}function f(r,i,o){let p=new jG,A=new jG(e/2,t/2,n/2);A.subScalar(a);let f=[],m=r*i*o>0?(e,t,n)=>l.push(e,t,n):(e,t,n)=>l.push(e,n,t);for(let e=0;e<=s;e++){let t=[],n=Mie*(1-e/s),l=Math.cos(n),m=Math.sin(n),g=0;for(let s=0;s<=e;s++){let n=Math.cos(g),s=Math.sin(g);p.x=l*n,p.y=m,p.z=l*s;let f=A.clone().addScaledVector(p,a);c.push(r*f.x,i*f.y,o*f.z),u.push(r*p.x,i*p.y,o*p.z),d.push(0,0),t.push(h++),g+=Mie/e}f.push(t)}let g=f.length-1;for(let e=0;e<g;e++){let t=f[e],n=f[e+1],r=t.length-1;m(t[0],n[1],n[0]);for(let e=1;e<=r;e++)m(t[e-1],t[e],n[e]),m(t[e],n[e+1],n[e])}}p("z","y","x",-1,-1,n,t,e,o,i),p("z","y","x",1,-1,n,t,-e,o,i),p("x","z","y",1,1,e,n,t,r,o),p("x","z","y",1,-1,e,n,-t,r,o),p("x","y","z",1,-1,e,t,n,r,i),p("x","y","z",-1,-1,e,t,-n,r,i),a>0&&(A("z","y","x",-1,-1,1,n,t,e,o),A("z","y","x",1,-1,-1,n,t,e,o),A("z","y","x",-1,1,-1,n,t,e,o),A("z","y","x",1,1,1,n,t,e,o),A("x","y","z",-1,-1,-1,e,t,n,r),A("x","y","z",1,-1,1,e,t,n,r),A("x","y","z",-1,1,1,e,t,n,r),A("x","y","z",1,1,-1,e,t,n,r),A("y","x","z",-1,-1,1,t,e,n,i),A("y","x","z",1,-1,-1,t,e,n,i),A("y","x","z",1,1,1,t,e,n,i),A("y","x","z",-1,1,-1,t,e,n,i),f(1,1,1),f(-1,1,1),f(1,-1,1),f(-1,-1,1),f(1,1,-1),f(-1,1,-1),f(1,-1,-1),f(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new lK(c,3)),this.setAttribute("normal",new lK(u,3)),this.setAttribute("uv",new lK(d,2))}},Tie=class extends mK{constructor(e=[],t=[],n="",r=1,i=.2,o=4){super(),this.type="PolyhedronGeometryRound";let a=[],s=[],l=[];return function(){var s;0==(i=Math.min(.99999,i))&&(o=0);let c={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[n],u=new jG,d=u.clone(),h=new Zq,p=i*r,A=r-p,f=o+1,m=new jG,g=(e,t)=>m.subVectors(e,t).normalize(),v=(e,t)=>Array(e).fill(void 0).map(t),y=v(e.length/3,((t,n)=>(new jG).fromArray(e,3*n).setLength(r))),b=[],w=1e6;for(let e=0;e<y.length;e++){let n,r,i,o=y[e],a=[],l=1e10,c=-1;for(;-1!=(c=t.indexOf(e,c+1));){let e=c-c%3;n=t[e+(c+1)%3],r=t[e+(c+2)%3],i=o.distanceToSquared(y[n]),l=Math.min(l,i),a.push([n,r,i])}l+=1e-6;let u=[],d=0,h=a.length;for(let t=0;t<h;t++){[n,r,i]=a[d];let t=1==(null==(s=b[n])?void 0:s.includes(e));i<=l&&u.push(n+ +t*w),d=a.findIndex((e=>e[0]==r))}b.push(u)}let x=[];{let e,t,n=0,r=0,i=3==c;for(let a=0;a<=o;a++){e=a*(a+1)/2,t=(a+1)*(a+2)/2;for(let s=0;s<o-a;s++)[n,r]=[e+s+a+2,t+s+a+3],x.push(e,t,...i?[r,e]:[n,t],r,n),[e,t]=[n,r];x.push(e,t,e+o+2)}}let C=u.clone(),S=u.clone(),B=u.clone(),_=u.clone(),E=u.clone(),M=[],P=v(y.length,(()=>v(c,(()=>u.clone()))));for(let e=0;e<y.length;e++){u.copy(y[e]).normalize(),C.copy(u).multiplyScalar(A);let t=b[e];for(let o=0;o<t.length;o++){let n=t[o],r=t[(o+1)%c];h.setFromPointsAndIndices(y,e,n%w,r%w),h.b.sub(h.a).setLength(1e10).add(h.a),h.c.sub(h.a).setLength(1e10).add(h.a),h.closestPointToPoint(C,P[e][o])}let n=[],r=[],i=[],s=new jG;0==o&&[...P[e]].reduce(((e,t)=>e.add(t)),s).multiplyScalar(1/c);for(let a=0;a<c;a++){let t=[],l=(a-1+c)%c,h=P[e][l],v=P[e][a];u.copy(h).sub(C),d.copy(v).sub(C);let y=C.angleTo(u),b=u.angleTo(d),w=Math.cos(y)*p;0==o?S.copy(s):S.copy(C).setLength(A+w),r.push(w);let x=[S,h,v];for(let e=0;e<2;e++){let r=x[e],i=x[e+1];_.subVectors(r,C),E.subVectors(i,C),B.crossVectors(_,E).normalize();for(let o=0;o<f;o++){let i=[y,b][e]*o/f;u.copy(_).applyAxisAngle(B,i).add(C),n.push(u.clone()),e&&(g(u,C),t.push([0==o?r:u.clone(),m.clone()]))}e&&(g(i,C),t.push([i,m.clone()]))}i.push(t)}M.push(i);let v=2*f,T=2;for(let e=0;e<c;e++){let t=v*e,i=v*((e+1)%c),o=[n[t]];for(let a=1;a<f;a++){_=n[t+a],E=n[i+a],o.push(_);for(let t=1,n=a-T+1;t<=n;t++)u.lerpVectors(_,E,t/(n+1)),u.sub(C).setLength(r[e]).add(C),o.push(u.clone());o.push(E)}for(let e=0;e<f;e++)o.push(n[e+f+t]);o.push(n[i+f]);let s=x.map((e=>o[e]));a.push(...s.map((e=>[e.x,e.y,e.z])).flat()),l.push(...s.map((e=>(g(e,C),[m.x,m.y,m.z]))).flat())}}let T=[];for(let e=0;e<b.length;e++)for(let t=0;t<c;t++){let n=b[e][t];if(n<w){let r=b[n].findIndex((t=>t%w==e)),i=M[e][t],o=M[n][r];for(let e=0;e<f;e++){let t=i[e],n=o[f-e],r=i[e+1];[t,n,r,r,n,o[f-(e+1)]].forEach((e=>{a.push(e[0].x,e[0].y,e[0].z),l.push(e[1].x,e[1].y,e[1].z)}))}T.push(i[0][0],o[f][0],i[f][0],o[0][0])}}for(;T.length;){let e,t,n,r;[e,t]=T.splice(0,2);let i=[e];for(;e!=t;)i.push(t),n=T.indexOf(t),r=n%2,t=T.splice(n-r,2)[1-r];m.subVectors(i[0],i[1]).cross(u.subVectors(i[0],i[2])).normalize();let o=m.dot(i[0])<0;o&&m.negate();for(let s=1;s<=i.length-2;s++)[i[s+ +o],i[s+1-+o],i[0]].forEach((e=>{a.push(e.x,e.y,e.z),l.push(m.x,m.y,m.z)}))}}(),function(){let e=new jG;for(let p=0;p<a.length;p+=3){e.x=a[p+0],e.y=a[p+1],e.z=a[p+2];let t=d(e)/2/Math.PI+.5,n=h(e)/Math.PI+.5;s.push(t,1-n)}let t=new jG,n=new jG,r=new jG,i=new jG,o=new hG,l=new hG,c=new hG,u=(e,t,n,r)=>{r<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/Math.PI+.5)};for(let p=0,A=0;p<a.length;p+=9,A+=6){t.set(a[p+0],a[p+1],a[p+2]),n.set(a[p+3],a[p+4],a[p+5]),r.set(a[p+6],a[p+7],a[p+8]),o.set(s[A+0],s[A+1]),l.set(s[A+2],s[A+3]),c.set(s[A+4],s[A+5]),i.copy(t).add(n).add(r).divideScalar(3);let e=d(i);u(o,A+0,t,e),u(l,A+2,n,e),u(c,A+4,r,e)}for(let a=0;a<s.length;a+=6){let e=s[a+0],t=s[a+2],n=s[a+4],r=Math.max(e,t,n),i=Math.min(e,t,n);r>.9&&i<.1&&(e<.2&&(s[a+0]+=1),t<.2&&(s[a+2]+=1),n<.2&&(s[a+4]+=1))}function d(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}(),this.setAttribute("position",new lK(a,3)),this.setAttribute("normal",new lK(l,3)),void this.setAttribute("uv",new lK(s,2))}static fromJSON(e){return new Tie(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},Die=class extends Tie{constructor(e=1,t=.2,n=4){let r=(1+Math.sqrt(5))/2,i=1/r,o="DodecahedronGeometry";super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o,e,t,n),this.type=o}static fromJSON(e){return new Die(e.radius,e.corner,e.cornerSides)}},Fie=1e-12,Iie=class{constructor(e){this.position=new hG,this.startPosition=new hG,this.uuid=dG.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Iie(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},kie=class extends Iie{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new kie(this.parent).copy(this)}},Oie=class extends Iie{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new kie(this),new kie(this))}static create(e,t){let n=new Oie(e,new hG(...t.position));return n.controls[0].position.set(...t.controlPrevious.position),n.controls[1].position.set(...t.controlNext.position),n.roundness=t.roundness,n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,n}getOppositeControl(e){let t=this.controls.indexOf(e);return 0===t?this.controls[1]:1===t?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let n=0,r=this.controls.length;n<r;n++){let r=this.controls[n];this.position.distanceTo(r.position)<=t?r.position.copy(this.position):r.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new Oie(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var e,t;return[null==(e=this.curveBefore)?void 0:e.getTangentAt(1),null==(t=this.curveAfter)?void 0:t.getTangentAt(0)]}computeNormals(e=new hG,t=new hG){let[n,r]=this.computeTangents();return n&&r&&(Lie(n,e),Lie(r,t)),[e,t]}computeTangent(e=new hG){let[t,n]=this.computeTangents();return t&&n&&e.copy(t).add(n).normalize(),e}computeNormal(e=new hG){let[t,n]=this.computeNormals();return e.copy(t).add(n).normalize(),e}};function Lie(e,t=new hG){let n=e.length();return t.set(-e.y/n,e.x/n)}var Rie=new hG,Uie=new hG,zie=new hG,Nie=new hG,jie=new hG,Hie=new hG,Qie=new jG,Vie=new jG;function Wie(e){let t=new hG;t.addVectors(e.v0,Rie.subVectors(e.v1,e.v0).multiplyScalar(2/3));let n=new hG;return n.addVectors(e.v2,Uie.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new gJ(e.v0,t,n,e.v2)}function Gie(e,t,n=Number.EPSILON){return Math.abs(e-t)<n}function qie(e,t,n=Number.EPSILON){return e.distanceTo(t)<n}function Kie(e,t,n=Number.EPSILON){return e.distanceTo(t)<n}function Yie(e,t,n){let r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),i=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return Math.acos((i*i+r*r-o*o)/(2*i*r))}function Xie(e,t,n){return noe(e,t)&&noe(t,n)&&$ie(e.position,t.position,n.position)}function $ie(e,t,n){return 0===Rie.copy(t).sub(e).cross(Uie.copy(n).sub(e))}function Jie(e,t,n,r,i){let o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(o/2,2))*(e.y-t.y)/o,c=Math.sqrt(Math.pow(n,2)-Math.pow(o/2,2))*(t.x-e.x)/o;return r.set(s+l,a+c),i.set(s-l,a-c),[r,i]}function Zie(e,t,n){return e.distanceTo(n)<t.distanceTo(n)?t:e}function eoe(e,t,n,r,i,o){let a,s=t.x-e.x,l=t.y-e.y,c=n.x-e.x,u=n.y-e.y,d=Math.sqrt((s+c)*(s+c)+(l+u)*(l+u));return Yie(t,e,n)>Math.PI&&(d*=-1),a=Gie(u,l)?(l+u)*(r/d-.5)*8/3/(s-c):(s+c)*(r/d-.5)*8/3/(u-l),i.set(t.x-a*l,t.y+a*s),o.set(n.x+a*u,n.y-a*c),[i,o]}function toe(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function noe(e,t){return $ie(e.position,e.controls[1].position,t.position)&&$ie(e.position,t.controls[0].position,t.position)}function roe(e,t=12,n=!1){let r=[];for(let i=0,o=e.length;i<o;i++){let o=e[i],a=0;if(n&&void 0!==o.roundedCurveCorner){let e=.5*ioe(o.roundedCurveCorner,t);i>0&&(r[i-1]+=e),a+=e}void 0!==o.curveAfter&&(a+=ioe(o.curveAfter,t)),r.push(a)}return e.length>0&&n&&void 0!==e[0].roundedCurveCorner&&(r[e.length-1]+=.5*ioe(e[0].roundedCurveCorner,t)),r}function ioe(e,t=12){return e&&e instanceof lJ?2*t:e&&(e instanceof yJ||e instanceof bJ)?1:e&&e instanceof xJ?t*e.points.length:t}var ooe,aoe,soe=new hG,loe=new hG,coe=new hG,uoe=new hG,doe=new hG,hoe=new hG,poe=class extends DJ{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new qK(new jG(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=dG.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,n){let r=new poe;return r.isClosed=e.isClosed,r.points=e.points.map((e=>Oie.create(e.id,e.data))),"number"==typeof e.roundness&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map((e=>poe.createFromState(e))),void 0!==t&&void 0!==n&&r.applySize(t,n),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,n=this.points.length;t<n;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map((e=>this.getPointIndexById(e))).filter((e=>e>=0))}getPointIndexById(e){let t=this.points.length,n=this.points.findIndex((t=>t.uuid===e));if(n<0){let n=t;for(let t=0,r=this.shapeHoles.length;t<r;t++){let r=this.shapeHoles[t],i=r.points.length,o=r.getPointIndexById(e);if(!(o<0))return o+n;n+=i}}return n}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let n=0,r=this.shapeHoles.length;n<r;n++){let r=this.shapeHoles[n],i=e-t;if(i<=r.points.length-1)return r.points[i];t+=r.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let n=0,r=this.shapeHoles.length;n<r;n++){let r=this.shapeHoles[n],i=r.points.indexOf(e);if(i>=0)return t+i;t+=r.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map((e=>e.points)));return[...this.points,...e]}applySize(e,t){0===e&&(e=.001),0===t&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let n=soe.set(e,t);for(let r=0,i=this.points.length;r<i;r++){let e=this.points[r];e.position.multiply(n),e.controls[0].position.multiply(n),e.controls[1].position.multiply(n)}for(let r=0,i=this.shapeHoles.length;r<i;r++)this.shapeHoles[r].applyScale(e,t);this._update()}createPoint(e,t=0,n=dG.generateUUID()){let r;r=e instanceof hG?e:new hG(e,t);let i=new Oie(n,r);return i.roundness=this.roundness,i}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];if(n.uuid===e)return n}for(let t=0,n=this.shapeHoles.length;t<n;t++){let n=this.shapeHoles[t].getPointByUuid(e);if(n)return n}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find((t=>t.uuid===e));t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,n=!1){this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t);let r=n?this.roundedCurveDivisions:this.curveDivisions;return function(e,t,n=12,r=!0){let i,o=Vie.set(0,0,0),a=0;for(let s=0;s<t.length;s++){let r=t[s],l=Rie,c=ioe(r,n);for(let t=0;t<=c;t++)if(r instanceof gJ||r instanceof wJ||r instanceof yJ){if(r.getPoint(t/c,l),o.set(l.x,l.y,0),void 0!==i&&Kie(i,o))continue;void 0===i&&(i=Qie),i.copy(o),e.setXYZ(a,o.x,o.y,o.z),a++}}r&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++)}(e,n?this.roundedCurves:this.curves,t,this.autoClose),r.reduce(((e,t)=>e+t),0)+1}computeCurveDivisions(e=12){return this.curveDivisions=roe(this.points,e,!1),this.roundedCurveDivisions=roe(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,n=12){return 2*function(e,t,n,r=12,i=!0){let o=Vie.set(0,0,0),a=0,s=[];for(let l=0;l<t.length;l++){if(!1===n[l])continue;let i,c=t[l],u=Rie,d=ioe(c,r);s.push(d);for(let t=0;t<=d;t++)if(c instanceof gJ||c instanceof wJ||c instanceof yJ){if(c.getPoint(t/d,u),o.set(u.x,u.y,0),null==i?void 0:i.equals(o))continue;void 0===i?i=Qie:(e.setXYZ(a,i.x,i.y,i.z),a++,e.setXYZ(a,o.x,o.y,o.z),a++),i.copy(o)}}return i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),s}(e,this.curves,t,n,this.autoClose).reduce(((e,t)=>e+t),0)}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t),function(e,t,n=12,r=!0){let i,o=0;for(let a=0;a<t.length;a++){let r=t[a],s=ioe(r,n),l=Rie;for(let t=0;t<=s;t++)if(r instanceof gJ||r instanceof wJ||r instanceof yJ){if(r.getPoint(t/s,l),void 0!==i&&qie(i,l,Fie))continue;void 0===i&&(i=Uie),i.copy(l),e.push(l.x,l.y),o++}}return Gie(e[0],e[e.length-2],Fie)&&Gie(e[1],e[e.length-1],Fie)&&(e.pop(),e.pop()),r&&o>1&&!(Gie(e[o-1],e[1],Fie)&&Gie(e[o-2],e[0],Fie))&&(e.push(e[0],e[1]),o++),e}(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let n=0;void 0===this.curveDivisions&&this.computeCurveDivisions(this.subdivision);let r=t?this.roundedCurveDivisions:this.curveDivisions,i=0;t&&void 0!==this.points[0].roundedCurveCorner&&(i=.5*ioe(this.points[0].roundedCurveCorner,this.subdivision));let o=e-i;o<0&&(o+=r.reduce(((e,t)=>e+t),0));for(let a=0,s=r.length;a<s;a++){let e=r[a];if(o<n+e)return[a,(o-n+1)/e];n+=e}return[0,1]}getCurveT(e,t,n){let r=this.points[e],i=this.points[e>=this.points.length-1?0:e+1],o=this.curveDivisions,a=o[e];if(toe(r,i)){let e=r.position.distanceTo(i.position);return r.position.distanceTo(soe.set(n.x,n.y))/e}let s=0;for(let l=0;l<e;l++)s+=o[l];return(t-s)/a}dispose(){}_applyCurveForPoint(e,t){toe(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let n=this.curves[this.curves.length-1];e.curveBefore=n,t.curveAfter=n;let r=n.clone();e.roundedCurveBefore=r,t.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,n=this.points.length;t<n;t++){let e=this.points[t];if(0===t)this.moveTo(e.position.x,e.position.y);else{let n=this.points[t-1];this._applyCurveForPoint(e,n)}}let e=this.getLastPoint();if((null==e?void 0:e.curveAfter)&&(e.curveAfter=void 0),this.isClosed){let e=this.points[0],t=this.points[this.points.length-1];this._applyCurveForPoint(e,t)}if(this.points.length>2){let e=0;for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t],r=this.points[t-1]??this.points[this.points.length-1],i=this.points[t+1]??this.points[0],o=n.roundness,a=r&&i&&Xie(r,n,i);if(!n.controlsMoved()&&o>0&&!a){let r=n.curveBefore,i=n.curveAfter;if(void 0===r||void 0===i)continue;let a,s=n.roundedCurveBefore,l=n.roundedCurveAfter,c=r.getLength(),u=i.getLength(),d=Math.min(o,.499*c),h=Math.min(o,.499*u),p=Math.min(d,h),A=1-p/c,f=p/u,m=r.getPointAt(A,soe),g=i.getPointAt(f,loe);if(this._subSplitCurve(r,s,A,m,void 0),this._subSplitCurve(i,l,f,void 0,g),this.useCubicForRoundedCorners){let e=Yie(m,n.position,g)/2,t=Math.tan(e)*m.distanceTo(n.position),[r,i]=Jie(m,g,t,coe,uoe),o=Zie(r,i,n.position),[s,l]=eoe(o,m,g,t,doe,hoe);a=new gJ(m.clone(),s.clone(),l.clone(),g.clone())}else a=new wJ(m.clone(),n.position.clone(),g.clone());n.roundedCurveCorner=a,this.roundedCurves.splice(t+e,0,a),e++}}}}_subSplitCurve(e,t,n,r,i){if(!(e instanceof yJ)){let o=e,a=t,s=o.getUtoTmapping(n,0),l=function(e,t,n,r,i=.5){let o=Rie.subVectors(t,e).multiplyScalar(i).add(e),a=Uie.subVectors(n,t).multiplyScalar(i).add(t),s=zie.subVectors(r,n).multiplyScalar(i).add(n),l=o,c=Nie.subVectors(a,o).multiplyScalar(i).add(o),u=jie.subVectors(s,a).multiplyScalar(i).add(a),d=s,h=Hie.subVectors(u,c).multiplyScalar(i).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,h.x,h.y,u.x,u.y,d.x,d.y,r.x,r.y]}(o.v0,o.v1,o.v2,o.v3,s);return void 0!==r&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),void 0!==i&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return void 0!==r&&t.v2.copy(r),void 0!==i&&t.v1.copy(i),t}clone(){let e=new poe(this._width,this._height);return e.points=this.points.map((e=>e.clone())),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map((e=>e.clone())),e}toJSON(){return{points:this.points.reduce(((e,t)=>e.concat(t.toJSON())),[]),shapeHoles:this.shapeHoles.map((e=>e.toJSON())),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var t;this.points=[],this.pointIDs=0;let n=e.points.length/7;for(let r=0;r<n;r++){let t=7*r,n=e.points[t+0],i=e.points[t+1],o=e.points[t+2],a=e.points[t+3],s=e.points[t+4],l=e.points[t+5],c=e.points[t+6],u=new Oie(dG.generateUUID(),new hG(n,i));u.controls[0].position.set(o,a),u.controls[1].position.set(s,l),u.roundness=c,this.points.push(u)}return this.shapeHoles=(null==(t=e.shapeHoles)?void 0:t.length)?e.shapeHoles.map((e=>{let t=new poe;return t.fromJSON(e),t})):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let n=(e,t)=>{t instanceof gJ&&t.v3.equals(e.position)&&e.controls[0].position.copy(t.v2)};return this.points=(e=>{let t,r,i=[];for(t=0,r=e.length;t<r;t++)e[t]instanceof wJ&&(e[t]=Wie(e[t]));for(t=0,r=e.length;t<r;t++){let r,o=e[t],a=t>0?e[t-1]:null;o instanceof gJ?(r=this.createPoint(o.v0),r.controls[1].position.copy(o.v1)):o instanceof yJ&&(r=this.createPoint(o.v1)),void 0!==r&&(null!==a&&n(r,a),i.push(r))}let o=e[e.length-1],a=!1;return o instanceof gJ?o.v3.equals(i[0].position)&&(i[0].controls[0].position.copy(o.v2),a=!0):o instanceof yJ&&o.v2.equals(i[0].position)&&(a=!0),this.isClosed=a,i})(e.curves),e instanceof DJ&&(this.shapeHoles=e.holes.map((e=>{let t=new poe;return t.fromShape(e),t}))),this.update(),this}updatePoint(e,t){let n=this.getPointByUuid(e);n&&(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.roundness&&(n.roundness=t.roundness),void 0!==t.areControlsDirectionsMirrored&&(n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var n;let r=null==(n=this.getPointByUuid(e))?void 0:n.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var n;let r=null==(n=this.getPointByUuid(e))?void 0:n.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},Aoe=2*Math.PI;function foe({x:e,y:t},n,r,i,o){return{x:e*n+i,y:t*r+o}}function moe(e,t){let n=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[{x:r-i*n,y:i+r*n},{x:o+a*n,y:a-o*n},{x:o,y:a}]}function goe(e,t,n,r){let i=e*r-t*n<0?-1:1,o=Math.min(1,Math.max(-1,e*n+t*r));return i*Math.acos(o)}function voe({px:e,py:t,cx:n,cy:r,rx:i,ry:o,largeArcFlag:a,sweepFlag:s}){let l=[];if(0===i||0===o)return[];let c=(e-n)/2,u=(t-r)/2;if(0===c&&0===u)return[];i=Math.abs(i),o=Math.abs(o);let d=Math.pow(c,2)/Math.pow(i,2)+Math.pow(u,2)/Math.pow(o,2);d>1&&(i*=Math.sqrt(d),o*=Math.sqrt(d));let h=function(e,t,n,r,i,o,a,s,l,c){let u=Math.pow(i,2),d=Math.pow(o,2),h=Math.pow(a,2),p=Math.pow(s,2),A=u*d-u*p-d*h;A<0&&(A=0),A/=u*p+d*h,A=Math.sqrt(A)*(l===c?-1:1);let f=A*i/o*s,m=A*-o/i*a,g=f+(e+n)/2,v=m+(t+r)/2,y=(a-f)/i,b=(s-m)/o,w=(-a-f)/i,x=(-s-m)/o,C=goe(1,0,y,b),S=goe(y,b,w,x);return!c&&S>0&&(S-=Aoe),c&&S<0&&(S+=Aoe),{centerx:g,centery:v,ang1:C,ang2:S}}(e,t,n,r,i,o,c,u,a,s),{ang1:p,ang2:A}=h,{centerx:f,centery:m}=h,g=Math.abs(A)/(Aoe/4);Math.abs(1-g)<1e-7&&(g=1);let v=Math.max(Math.ceil(g),1);A/=v;for(let y=0;y<v;y++)l.push(moe(p,A)),p+=A;return l.map((e=>{let{x:t,y:n}=foe(e[0],i,o,f,m),{x:r,y:a}=foe(e[1],i,o,f,m),{x:s,y:l}=foe(e[2],i,o,f,m);return{x1:t,y1:n,x2:r,y2:a,x:s,y:l}}))}function yoe(e,t){if(!e)throw t||"Assertion Failed!"}!function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(ooe||(ooe={})),function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(aoe||(aoe={}));var boe=function(){function e(){}return e.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.edgeEval=function(t,n,r){yoe(e.vertLeq(t,n)&&e.vertLeq(n,r));var i=n.s-t.s,o=r.s-n.s;return i+o>0?i<o?n.t-t.t+(t.t-r.t)*(i/(i+o)):n.t-r.t+(r.t-t.t)*(o/(i+o)):0},e.edgeSign=function(t,n,r){yoe(e.vertLeq(t,n)&&e.vertLeq(n,r));var i=n.s-t.s,o=r.s-n.s;return i+o>0?(n.t-r.t)*i+(n.t-t.t)*o:0},e.transEval=function(t,n,r){yoe(e.transLeq(t,n)&&e.transLeq(n,r));var i=n.t-t.t,o=r.t-n.t;return i+o>0?i<o?n.s-t.s+(t.s-r.s)*(i/(i+o)):n.s-r.s+(r.s-t.s)*(o/(i+o)):0},e.transSign=function(t,n,r){yoe(e.transLeq(t,n)&&e.transLeq(n,r));var i=n.t-t.t,o=r.t-n.t;return i+o>0?(n.s-r.s)*i+(n.s-t.s)*o:0},e.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},e.interpolate=function(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)},e.intersect=function(t,n,r,i,o){var a,s,l;e.vertLeq(t,n)||(l=t,t=n,n=l),e.vertLeq(r,i)||(l=r,r=i,i=l),e.vertLeq(t,r)||(l=t,t=r,r=l,l=n,n=i,i=l),e.vertLeq(r,n)?e.vertLeq(n,i)?((a=e.edgeEval(t,r,n))+(s=e.edgeEval(r,n,i))<0&&(a=-a,s=-s),o.s=e.interpolate(a,r.s,s,n.s)):((a=e.edgeSign(t,r,n))+(s=-e.edgeSign(t,i,n))<0&&(a=-a,s=-s),o.s=e.interpolate(a,r.s,s,i.s)):o.s=(r.s+n.s)/2,e.transLeq(t,n)||(l=t,t=n,n=l),e.transLeq(r,i)||(l=r,r=i,i=l),e.transLeq(t,r)||(l=t,t=r,r=l,l=n,n=i,i=l),e.transLeq(r,n)?e.transLeq(n,i)?((a=e.transEval(t,r,n))+(s=e.transEval(r,n,i))<0&&(a=-a,s=-s),o.t=e.interpolate(a,r.t,s,n.t)):((a=e.transSign(t,r,n))+(s=-e.transSign(t,i,n))<0&&(a=-a,s=-s),o.t=e.interpolate(a,r.t,s,i.t)):o.t=(r.t+n.t)/2},e}(),woe=function(){return function(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}}(),xoe=function(){function e(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),e}(),Coe=function(){return function(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}}(),Soe=function(){function e(){var e=new Coe,t=new woe,n=new xoe(0),r=new xoe(1);e.next=e.prev=e,e.anEdge=null,t.next=t.prev=t,n.next=n,n.Sym=r,r.next=r,r.Sym=n,this.vHead=e,this.fHead=t,this.eHead=n,this.eHeadSym=r}return e.prototype.makeEdge_=function(e){var t=new xoe(0),n=new xoe(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return n.next=r,r.Sym.next=t,t.next=e,e.Sym.next=n,t.Sym=n,t.Onext=t,t.Lnext=n,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,n.Sym=t,n.Onext=n,n.Lnext=t,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,t},e.prototype.splice_=function(e,t){var n=e.Onext,r=t.Onext;n.Sym.Lnext=t,r.Sym.Lnext=e,e.Onext=r,t.Onext=n},e.prototype.makeVertex_=function(e,t,n){var r=e;yoe(r,"Vertex can't be null!");var i=n.prev;r.prev=i,i.next=r,r.next=n,n.prev=r,r.anEdge=t;var o=t;do{o.Org=r,o=o.Onext}while(o!==t)},e.prototype.makeFace_=function(e,t,n){var r=e;yoe(r,"Face can't be null");var i=n.prev;r.prev=i,i.next=r,r.next=n,n.prev=r,r.anEdge=t,r.trail=null,r.marked=!1,r.inside=n.inside;var o=t;do{o.Lface=r,o=o.Lnext}while(o!==t)},e.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var t=e.next,n=e.Sym.next;t.Sym.next=n,n.Sym.next=t},e.prototype.killVertex_=function(e,t){var n=e.anEdge,r=n;do{r.Org=t,r=r.Onext}while(r!==n);var i=e.prev,o=e.next;o.prev=i,i.next=o},e.prototype.killFace_=function(e,t){var n=e.anEdge,r=n;do{r.Lface=t,r=r.Lnext}while(r!==n);var i=e.prev,o=e.next;o.prev=i,i.next=o},e.prototype.makeEdge=function(){var e=new Coe,t=new Coe,n=new woe,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(t,r.Sym,this.vHead),this.makeFace_(n,r,this.fHead),r},e.prototype.splice=function(e,t){var n=!1,r=!1;if(e!==t){if(t.Org!==e.Org&&(r=!0,this.killVertex_(t.Org,e.Org)),t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(t,e),!r){var i=new Coe;this.makeVertex_(i,t,e.Org),e.Org.anEdge=e}if(!n){var o=new woe;this.makeFace_(o,t,e.Lface),e.Lface.anEdge=e}}},e.prototype.delete=function(e){var t=e.Sym,n=!1;if(e.Lface!==e.Rface&&(n=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!n){var r=new woe;this.makeFace_(r,e,e.Lface)}t.Onext===t?(this.killVertex_(t.Org,null),this.killFace_(t.Lface,null)):(e.Lface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),this.killEdge_(e)},e.prototype.addEdgeVertex=function(e){var t=this.makeEdge_(e),n=t.Sym;this.splice_(t,e.Lnext),t.Org=e.Dst;var r=new Coe;return this.makeVertex_(r,n,t.Org),t.Lface=n.Lface=e.Lface,t},e.prototype.splitEdge=function(e){var t=this.addEdgeVertex(e).Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,t),e.Dst=t.Org,t.Dst.anEdge=t.Sym,t.Rface=e.Rface,t.winding=e.winding,t.Sym.winding=e.Sym.winding,t.idx=e.idx,t.Sym.idx=e.Sym.idx,t},e.prototype.connect=function(e,t){var n=!1,r=this.makeEdge_(e),i=r.Sym;if(t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(i,t),r.Org=e.Dst,i.Org=t.Org,r.Lface=i.Lface=e.Lface,e.Lface.anEdge=i,!n){var o=new woe;this.makeFace_(o,r,e.Lface)}return r},e.prototype.zapFace=function(e){var t,n,r,i,o,a=e.anEdge;n=a.Lnext;do{n=(t=n).Lnext,t.Lface=null,null===t.Rface&&(t.Onext===t?this.killVertex_(t.Org,null):(t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),(r=t.Sym).Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t))}while(t!=a);i=e.prev,(o=e.next).prev=i,i.next=o},e.prototype.countFaceVerts_=function(e){var t=e.anEdge,n=0;do{n++,t=t.Lnext}while(t!==e.anEdge);return n},e.prototype.mergeConvexFaces=function(e){var t,n,r,i,o;for(t=this.fHead.next;t!==this.fHead;t=t.next)if(t.inside)for(o=(n=t.anEdge).Org;r=n.Lnext,(i=n.Sym)&&i.Lface&&i.Lface.inside&&(this.countFaceVerts_(t)+this.countFaceVerts_(i.Lface)-2<=e&&boe.vertCCW(n.Lprev.Org,n.Org,i.Lnext.Lnext.Org)&&boe.vertCCW(i.Lprev.Org,i.Org,n.Lnext.Lnext.Org)&&(r=i.Lnext,this.delete(i),n=null,i=null)),!n||n.Lnext.Org!==o;)n=r;return!0},e.prototype.check=function(){var e,t,n,r,i,o,a=this.fHead,s=this.vHead,l=this.eHead;for(t=a,t=a;(e=t.next)!==a;t=e){yoe(e.prev===t),i=e.anEdge;do{yoe(i.Sym!==i),yoe(i.Sym.Sym===i),yoe(i.Lnext.Onext.Sym===i),yoe(i.Onext.Sym.Lnext===i),yoe(i.Lface===e),i=i.Lnext}while(i!==e.anEdge)}for(yoe(e.prev===t&&null===e.anEdge),r=s,r=s;(n=r.next)!==s;r=n){yoe(n.prev===r),i=n.anEdge;do{yoe(i.Sym!==i),yoe(i.Sym.Sym===i),yoe(i.Lnext.Onext.Sym===i),yoe(i.Onext.Sym.Lnext===i),yoe(i.Org===n),i=i.Onext}while(i!==n.anEdge)}for(yoe(n.prev===r&&null===n.anEdge),o=l,o=l;(i=o.next)!==l;o=i)yoe(i.Sym.next===o.Sym),yoe(i.Sym!==i),yoe(i.Sym.Sym===i),yoe(null!==i.Org),yoe(null!==i.Dst),yoe(i.Lnext.Onext.Sym===i),yoe(i.Onext.Sym.Lnext===i);yoe(i.Sym.next===o.Sym&&i.Sym===this.eHeadSym&&i.Sym.Sym===i&&null===i.Org&&null===i.Dst&&null===i.Lface&&null===i.Rface)},e}(),Boe=function(){return function(){this.handle=null}}(),_oe=function(){return function(){this.key=null,this.node=0}}(),Eoe=function(){function e(e,t){this.leq=t,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var n=0;n<e+1;n++)this.nodes[n]=new Boe,this.handles[n]=new _oe;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(e){var t,n,r,i=this.nodes,o=this.handles;for(t=i[e].handle;;){if((r=e<<1)<this.size&&this.leq(o[i[r+1].handle].key,o[i[r].handle].key)&&++r,yoe(r<=this.max),n=i[r].handle,r>this.size||this.leq(o[t].key,o[n].key)){i[e].handle=t,o[t].node=e;break}i[e].handle=n,o[n].node=e,e=r}},e.prototype.floatUp_=function(e){var t,n,r,i=this.nodes,o=this.handles;for(t=i[e].handle;;){if(n=i[r=e>>1].handle,0===r||this.leq(o[n].key,o[t].key)){i[e].handle=t,o[t].node=e;break}i[e].handle=n,o[n].node=e,e=r}},e.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(e){var t,n;if(2*(t=++this.size)>this.max){var r,i;for(this.max*=2,i=this.nodes.length,this.nodes.length=this.max+1,r=i;r<this.nodes.length;r++)this.nodes[r]=new Boe;for(i=this.handles.length,this.handles.length=this.max+1,r=i;r<this.handles.length;r++)this.handles[r]=new _oe}return 0===this.freeList?n=t:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[t].handle=n,this.handles[n].node=t,this.handles[n].key=e,this.initialized&&this.floatUp_(t),n},e.prototype.extractMin=function(){var e=this.nodes,t=this.handles,n=e[1].handle,r=t[n].key;return this.size>0&&(e[1].handle=e[this.size].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),r},e.prototype.delete=function(e){var t,n=this.nodes,r=this.handles;yoe(e>=1&&e<=this.max&&null!==r[e].key),n[t=r[e].node].handle=n[this.size].handle,r[n[t].handle].node=t,--this.size,t<=this.size&&(t<=1||this.leq(r[n[t>>1].handle].key,r[n[t].handle].key)?this.floatDown_(t):this.floatUp_(t)),r[e].key=null,r[e].node=this.freeList,this.freeList=e},e}(),Moe=function(){return function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}}(),Poe=function(){return function(){this.key=null,this.next=null,this.prev=null}}(),Toe=function(){function e(e,t){this.frame=e,this.leq=t,this.head=new Poe,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(e){return this.insertBefore(this.head,e)},e.prototype.search=function(e){var t=this.head;do{t=t.next}while(null!==t.key&&!this.leq(this.frame,e,t.key));return t},e.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq(this.frame,e.key,t));var n=new Poe;return n.key=t,n.next=e.next,e.next.prev=n,n.prev=e,e.next=n,n},e.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},e}(),Doe=function(){function e(){}return e.regionBelow=function(e){return e.nodeUp.prev.key},e.regionAbove=function(e){return e.nodeUp.next.key},e.debugEvent=function(e){},e.addWinding=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.edgeLeq=function(e,t,n){var r=e.event,i=t.eUp,o=n.eUp;return i.Dst===r?o.Dst===r?boe.vertLeq(i.Org,o.Org)?boe.edgeSign(o.Dst,i.Org,o.Org)<=0:boe.edgeSign(i.Dst,o.Org,i.Org)>=0:boe.edgeSign(o.Dst,r,o.Org)<=0:o.Dst===r?boe.edgeSign(i.Dst,r,i.Org)>=0:boe.edgeEval(i.Dst,r,i.Org)>=boe.edgeEval(o.Dst,r,o.Org)},e.deleteRegion=function(e,t){t.fixUpperEdge&&yoe(0===t.eUp.winding),t.eUp.activeRegion=null,e.dict.delete(t.nodeUp)},e.fixUpperEdge=function(e,t,n){yoe(t.fixUpperEdge),e.mesh.delete(t.eUp),t.fixUpperEdge=!1,t.eUp=n,n.activeRegion=t},e.topLeftRegion=function(t,n){var r,i=n.eUp.Org;do{n=e.regionAbove(n)}while(n.eUp.Org===i);if(n.fixUpperEdge){if(null===(r=t.mesh.connect(e.regionBelow(n).eUp.Sym,n.eUp.Lnext)))return null;e.fixUpperEdge(t,n,r),n=e.regionAbove(n)}return n},e.topRightRegion=function(t){var n=t.eUp.Dst;do{t=e.regionAbove(t)}while(t.eUp.Dst===n);return t},e.addRegionBelow=function(e,t,n){var r=new Moe;return r.eUp=n,r.nodeUp=e.dict.insertBefore(t.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,n.activeRegion=r,r},e.isWindingInside=function(e,t){switch(e.windingRule){case ooe.ODD:return!!(1&t);case ooe.NONZERO:return 0!==t;case ooe.POSITIVE:return t>0;case ooe.NEGATIVE:return t<0;case ooe.ABS_GEQ_TWO:return t>=2||t<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,n){n.windingNumber=e.regionAbove(n).windingNumber+n.eUp.winding,n.inside=e.isWindingInside(t,n.windingNumber)},e.finishRegion=function(t,n){var r=n.eUp,i=r.Lface;i.inside=n.inside,i.anEdge=r,e.deleteRegion(t,n)},e.finishLeftRegions=function(t,n,r){for(var i,o=null,a=n,s=n.eUp;a!==r;){if(a.fixUpperEdge=!1,(i=(o=e.regionBelow(a)).eUp).Org!=s.Org){if(!o.fixUpperEdge){e.finishRegion(t,a);break}i=t.mesh.connect(s.Lprev,i.Sym),e.fixUpperEdge(t,o,i)}s.Onext!==i&&(t.mesh.splice(i.Oprev,i),t.mesh.splice(s,i)),e.finishRegion(t,a),s=o.eUp,a=o}return s},e.addRightEdges=function(t,n,r,i,o,a){var s,l,c,u,d=!0;c=r;do{yoe(boe.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,n,c.Sym),c=c.Onext}while(c!==i);for(null===o&&(o=e.regionBelow(n).eUp.Rprev),l=n,u=o;(c=(s=e.regionBelow(l)).eUp.Sym).Org===u.Org;)c.Onext!==u&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(u.Oprev,c)),s.windingNumber=l.windingNumber-c.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!d&&e.checkForRightSplice(t,l)&&(e.addWinding(c,u),e.deleteRegion(t,l),t.mesh.delete(u)),d=!1,l=s,u=c;l.dirty=!0,yoe(l.windingNumber-c.winding===s.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(e,t,n){e.mesh.splice(t,n)},e.vertexWeights=function(e,t,n){var r=boe.vertL1dist(t,e),i=boe.vertL1dist(n,e),o=.5*i/(r+i),a=.5*r/(r+i);e.coords[0]+=o*t.coords[0]+a*n.coords[0],e.coords[1]+=o*t.coords[1]+a*n.coords[1],e.coords[2]+=o*t.coords[2]+a*n.coords[2]},e.getIntersectData=function(t,n,r,i,o,a){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,e.vertexWeights(n,r,i),e.vertexWeights(n,o,a)},e.checkForRightSplice=function(t,n){var r=e.regionBelow(n),i=n.eUp,o=r.eUp;if(boe.vertLeq(i.Org,o.Org)){if(boe.edgeSign(o.Dst,i.Org,o.Org)>0)return!1;boe.vertEq(i.Org,o.Org)?i.Org!==o.Org&&(t.pq.delete(i.Org.pqHandle),e.spliceMergeVertices(t,o.Oprev,i)):(t.mesh.splitEdge(o.Sym),t.mesh.splice(i,o.Oprev),n.dirty=r.dirty=!0)}else{if(boe.edgeSign(i.Dst,o.Org,i.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(i.Sym),t.mesh.splice(o.Oprev,i)}return!0},e.checkForLeftSplice=function(t,n){var r,i=e.regionBelow(n),o=n.eUp,a=i.eUp;if(yoe(!boe.vertEq(o.Dst,a.Dst)),boe.vertLeq(o.Dst,a.Dst)){if(boe.edgeSign(o.Dst,a.Dst,o.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,r=t.mesh.splitEdge(o),t.mesh.splice(a.Sym,r),r.Lface.inside=n.inside}else{if(boe.edgeSign(a.Dst,o.Dst,a.Org)>0)return!1;n.dirty=i.dirty=!0,r=t.mesh.splitEdge(a),t.mesh.splice(o.Lnext,a.Sym),r.Rface.inside=n.inside}return!0},e.checkForIntersect=function(t,n){var r,i,o=e.regionBelow(n),a=n.eUp,s=o.eUp,l=a.Org,c=s.Org,u=a.Dst,d=s.Dst,h=new Coe;if(yoe(!boe.vertEq(d,u)),yoe(boe.edgeSign(u,t.event,l)<=0),yoe(boe.edgeSign(d,t.event,c)>=0),yoe(l!==t.event&&c!==t.event),yoe(!n.fixUpperEdge&&!o.fixUpperEdge),l===c||Math.min(l.t,u.t)>Math.max(c.t,d.t))return!1;if(boe.vertLeq(l,c)){if(boe.edgeSign(d,l,c)>0)return!1}else if(boe.edgeSign(u,c,l)<0)return!1;return e.debugEvent(t),boe.intersect(u,l,d,c,h),yoe(Math.min(l.t,u.t)<=h.t),yoe(h.t<=Math.max(c.t,d.t)),yoe(Math.min(d.s,u.s)<=h.s),yoe(h.s<=Math.max(c.s,l.s)),boe.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),r=boe.vertLeq(l,c)?l:c,boe.vertLeq(r,h)&&(h.s=r.s,h.t=r.t),boe.vertEq(h,l)||boe.vertEq(h,c)?(e.checkForRightSplice(t,n),!1):!boe.vertEq(u,t.event)&&boe.edgeSign(u,t.event,h)>=0||!boe.vertEq(d,t.event)&&boe.edgeSign(d,t.event,h)<=0?d===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(s.Sym,a),n=e.topLeftRegion(t,n),a=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),o),e.addRightEdges(t,n,a.Oprev,a,a,!0),!0):u===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(a.Lnext,s.Oprev),o=n,n=e.topRightRegion(n),i=e.regionBelow(n).eUp.Rprev,o.eUp=s.Oprev,s=e.finishLeftRegions(t,o,null),e.addRightEdges(t,n,s.Onext,a.Rprev,i,!0),!0):(boe.edgeSign(u,t.event,h)>=0&&(e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),boe.edgeSign(d,t.event,h)<=0&&(n.dirty=o.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(a.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,a),a.Org.s=h.s,a.Org.t=h.t,a.Org.pqHandle=t.pq.insert(a.Org),e.getIntersectData(t,a.Org,l,u,c,d),e.regionAbove(n).dirty=n.dirty=o.dirty=!0,!1)},e.walkDirtyRegions=function(t,n){for(var r,i,o=e.regionBelow(n);;){for(;o.dirty;)n=o,o=e.regionBelow(o);if(!n.dirty&&(o=n,null===(n=e.regionAbove(n))||!n.dirty))return;if(n.dirty=!1,r=n.eUp,i=o.eUp,r.Dst!==i.Dst&&e.checkForLeftSplice(t,n)&&(o.fixUpperEdge?(e.deleteRegion(t,o),t.mesh.delete(i),i=(o=e.regionBelow(n)).eUp):n.fixUpperEdge&&(e.deleteRegion(t,n),t.mesh.delete(r),r=(n=e.regionAbove(o)).eUp)),r.Org!==i.Org)if(r.Dst===i.Dst||n.fixUpperEdge||o.fixUpperEdge||r.Dst!==t.event&&i.Dst!==t.event)e.checkForRightSplice(t,n);else if(e.checkForIntersect(t,n))return;r.Org===i.Org&&r.Dst===i.Dst&&(e.addWinding(i,r),e.deleteRegion(t,n),t.mesh.delete(r),n=e.regionAbove(o))}},e.connectRightVertex=function(t,n,r){var i,o=r.Onext,a=e.regionBelow(n),s=n.eUp,l=a.eUp,c=!1;s.Dst!==l.Dst&&e.checkForIntersect(t,n),boe.vertEq(s.Org,t.event)&&(t.mesh.splice(o.Oprev,s),n=e.topLeftRegion(t,n),o=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),a),c=!0),boe.vertEq(l.Org,t.event)&&(t.mesh.splice(r,l.Oprev),r=e.finishLeftRegions(t,a,null),c=!0),c?e.addRightEdges(t,n,r.Onext,o,o,!0):(i=boe.vertLeq(l.Org,s.Org)?l.Oprev:s,i=t.mesh.connect(r.Lprev,i),e.addRightEdges(t,n,i,i.Onext,i.Onext,!1),i.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,n))},e.connectLeftDegenerate=function(t,n,r){var i,o,a,s,l;return i=n.eUp,boe.vertEq(i.Org,r)?(yoe(!1),void e.spliceMergeVertices(t,i,r.anEdge)):boe.vertEq(i.Dst,r)?(yoe(!1),n=e.topRightRegion(n),o=s=(a=(l=e.regionBelow(n)).eUp.Sym).Onext,l.fixUpperEdge&&(yoe(o!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=o.Oprev),t.mesh.splice(r.anEdge,a),boe.edgeGoesLeft(o)||(o=null),void e.addRightEdges(t,n,a.Onext,s,o,!0)):(t.mesh.splitEdge(i.Sym),n.fixUpperEdge&&(t.mesh.delete(i.Onext),n.fixUpperEdge=!1),t.mesh.splice(r.anEdge,i),void e.sweepEvent(t,r))},e.connectLeftVertex=function(t,n){var r,i,o,a,s,l,c=new Moe;if(c.eUp=n.anEdge.Sym,r=t.dict.search(c).key,i=e.regionBelow(r)){if(a=r.eUp,s=i.eUp,0===boe.edgeSign(a.Dst,n,a.Org))return void e.connectLeftDegenerate(t,r,n);if(o=boe.vertLeq(s.Dst,a.Dst)?r:i,r.inside||o.fixUpperEdge){if(o===r)l=t.mesh.connect(n.anEdge.Sym,a.Lnext);else l=t.mesh.connect(s.Dnext,n.anEdge).Sym;o.fixUpperEdge?e.fixUpperEdge(t,o,l):e.computeWinding(t,e.addRegionBelow(t,r,l)),e.sweepEvent(t,n)}else e.addRightEdges(t,r,n.anEdge,n.anEdge,null,!0)}},e.sweepEvent=function(t,n){t.event=n,e.debugEvent(t);for(var r=n.anEdge;null===r.activeRegion;)if((r=r.Onext)===n.anEdge)return void e.connectLeftVertex(t,n);var i=e.topLeftRegion(t,r.activeRegion);yoe(null!==i);var o=e.regionBelow(i),a=o.eUp,s=e.finishLeftRegions(t,o,null);s.Onext===a?e.connectRightVertex(t,i,s):e.addRightEdges(t,i,s.Onext,a,a,!0)},e.addSentinel=function(e,t,n,r){var i=new Moe,o=e.mesh.makeEdge();o.Org.s=n,o.Org.t=r,o.Dst.s=t,o.Dst.t=r,e.event=o.Dst,i.eUp=o,i.windingNumber=0,i.inside=!1,i.fixUpperEdge=!1,i.sentinel=!0,i.dirty=!1,i.nodeUp=e.dict.insert(i)},e.initEdgeDict=function(t){t.dict=new Toe(t,e.edgeLeq);var n=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],i=t.bmin[0]-n,o=t.bmax[0]+n,a=t.bmin[1]-r,s=t.bmax[1]+r;e.addSentinel(t,i,o,a),e.addSentinel(t,i,o,s)},e.doneEdgeDict=function(t){for(var n,r=0;null!==(n=t.dict.min().key);)n.sentinel||(yoe(n.fixUpperEdge),yoe(1==++r)),yoe(0===n.windingNumber),e.deleteRegion(t,n)},e.removeDegenerateEdges=function(t){var n,r,i,o=t.mesh.eHead;for(n=o.next;n!==o;n=r)r=n.next,i=n.Lnext,boe.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(e.spliceMergeVertices(t,i,n),t.mesh.delete(n),i=(n=i).Lnext),i.Lnext===n&&(i!==n&&((i===r||i===r.Sym)&&(r=r.next),t.mesh.delete(i)),(n===r||n===r.Sym)&&(r=r.next),t.mesh.delete(n))},e.initPriorityQ=function(e){var t,n,r,i=0;for(n=(r=e.mesh.vHead).next;n!==r;n=n.next)i++;for(i+=8,t=e.pq=new Eoe(i,boe.vertLeq),n=(r=e.mesh.vHead).next;n!==r;n=n.next)n.pqHandle=t.insert(n);return n===r&&(t.init(),!0)},e.donePriorityQ=function(e){e.pq=null},e.removeDegenerateFaces=function(t,n){var r,i,o;for(r=n.fHead.next;r!==n.fHead;r=i)i=r.next,yoe((o=r.anEdge).Lnext!==o),o.Lnext.Lnext===o&&(e.addWinding(o.Onext,o),t.mesh.delete(o));return!0},e.computeInterior=function(t,n){var r,i;if(void 0===n&&(n=!0),e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);null!==(r=t.pq.extractMin());){for(;null!==(i=t.pq.min())&&boe.vertEq(i,r);)i=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,i.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),!!e.removeDegenerateFaces(t,t.mesh)&&(n&&t.mesh.check(),!0)},e}(),Foe=function(){function e(){this.mesh=new Soe,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=ooe.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.prototype.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!t)throw"Zero-size vector!";t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},e.prototype.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.prototype.computeNormal_=function(e){var t,n,r,i,o,a,s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[0,0,0],d=[0,0,0],h=[null,null,null],p=[null,null,null],A=this.mesh.vHead;t=A.next;for(var f=0;f<3;++f)i=t.coords[f],l[f]=i,p[f]=t,s[f]=i,h[f]=t;for(t=A.next;t!==A;t=t.next)for(var m=0;m<3;++m)(i=t.coords[m])<l[m]&&(l[m]=i,p[m]=t),i>s[m]&&(s[m]=i,h[m]=t);var g=0;if(s[1]-l[1]>s[0]-l[0]&&(g=1),s[2]-l[2]>s[g]-l[g]&&(g=2),l[g]>=s[g])return e[0]=0,e[1]=0,void(e[2]=1);for(a=0,n=p[g],r=h[g],c[0]=n.coords[0]-r.coords[0],c[1]=n.coords[1]-r.coords[1],c[2]=n.coords[2]-r.coords[2],t=A.next;t!==A;t=t.next)u[0]=t.coords[0]-r.coords[0],u[1]=t.coords[1]-r.coords[1],u[2]=t.coords[2]-r.coords[2],d[0]=c[1]*u[2]-c[2]*u[1],d[1]=c[2]*u[0]-c[0]*u[2],d[2]=c[0]*u[1]-c[1]*u[0],(o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2])>a&&(a=o,e[0]=d[0],e[1]=d[1],e[2]=d[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(c)]=1)},e.prototype.checkOrientation_=function(){for(var e,t,n=this.mesh.fHead,r=this.mesh.vHead,i=0,o=n.next;o!==n;o=o.next)if(!((t=o.anEdge).winding<=0))do{i+=(t.Org.s-t.Dst.s)*(t.Org.t+t.Dst.t),t=t.Lnext}while(t!==o.anEdge);if(i<0){for(e=r.next;e!==r;e=e.next)e.t=-e.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var e,t,n=this.mesh.vHead,r=[0,0,0],i=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),i=!0),e=this.sUnit,t=this.tUnit;var o=this.longAxis_(r);e[o]=0,e[(o+1)%3]=1,e[(o+2)%3]=0,t[o]=0,t[(o+1)%3]=0,t[(o+2)%3]=r[o]>0?1:-1;for(var a=n.next;a!==n;a=a.next)a.s=this.dot_(a.coords,e),a.t=this.dot_(a.coords,t);i&&this.checkOrientation_();for(var s=!0,l=n.next;l!==n;l=l.next)s?(this.bmin[0]=this.bmax[0]=l.s,this.bmin[1]=this.bmax[1]=l.t,s=!1):(l.s<this.bmin[0]&&(this.bmin[0]=l.s),l.s>this.bmax[0]&&(this.bmax[0]=l.s),l.t<this.bmin[1]&&(this.bmin[1]=l.t),l.t>this.bmax[1]&&(this.bmax[1]=l.t))},e.prototype.addWinding_=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.prototype.tessellateMonoRegion_=function(e,t){var n,r;if((n=t.anEdge).Lnext===n||n.Lnext.Lnext===n)throw"Mono region invalid";for(;boe.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;boe.vertLeq(n.Org,n.Dst);n=n.Lnext);r=n.Lprev;for(;n.Lnext!==r;)if(boe.vertLeq(n.Dst,r.Org)){for(;r.Lnext!==n&&(boe.edgeGoesLeft(r.Lnext)||boe.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)r=e.connect(r.Lnext,r).Sym;r=r.Lprev}else{for(;r.Lnext!==n&&(boe.edgeGoesRight(n.Lprev)||boe.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)n=e.connect(n,n.Lprev).Sym;n=n.Lnext}if(r.Lnext===n)throw"Mono region invalid";for(;r.Lnext.Lnext!==n;)r=e.connect(r.Lnext,r).Sym;return!0},e.prototype.tessellateInterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)if(t=n.next,n.inside&&!this.tessellateMonoRegion_(e,n))return!1;return!0},e.prototype.discardExterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||e.zapFace(n)},e.prototype.setWindingNumber_=function(e,t,n){for(var r,i=e.eHead.next;i!==e.eHead;i=r)r=i.next,i.Rface.inside!==i.Lface.inside?i.winding=i.Lface.inside?t:-t:n?e.delete(i):i.winding=0},e.prototype.getNeighbourFace_=function(e){return e.Rface&&e.Rface.inside?e.Rface.n:-1},e.prototype.outputPolymesh_=function(e,t,n,r){var i,o,a=0,s=0;n>3&&e.mergeConvexFaces(n);for(var l=e.vHead.next;l!==e.vHead;l=l.next)l.n=-1;for(var c=e.fHead.next;c!==e.fHead;c=c.next)if(c.n=-1,c.inside){i=c.anEdge,o=0;do{-1===(l=i.Org).n&&(l.n=s,s++),o++,i=i.Lnext}while(i!==c.anEdge);if(o>n)throw"Face vertex greater that support polygon";c.n=a,++a}this.elementCount=a,t===aoe.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*n,this.vertexCount=s,this.vertices=[],this.vertices.length=s*r,this.vertexIndices=[],this.vertexIndices.length=s;for(l=e.vHead.next;l!==e.vHead;l=l.next)if(-1!==l.n){var u=l.n*r;this.vertices[u+0]=l.coords[0],this.vertices[u+1]=l.coords[1],r>2&&(this.vertices[u+2]=l.coords[2]),this.vertexIndices[l.n]=l.idx}var d=0;for(c=e.fHead.next;c!==e.fHead;c=c.next)if(c.inside){i=c.anEdge,o=0;do{l=i.Org;this.elements[d++]=l.n,o++,i=i.Lnext}while(i!==c.anEdge);for(var h=o;h<n;++h)this.elements[d++]=-1;if(t===aoe.CONNECTED_POLYGONS){i=c.anEdge;do{this.elements[d++]=this.getNeighbourFace_(i),i=i.Lnext}while(i!==c.anEdge);for(var p=o;p<n;++p)this.elements[d++]=-1}}},e.prototype.outputContours_=function(e,t){var n,r,i=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=n=a.anEdge;do{this.vertexCount++,n=n.Lnext}while(n!==r);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*t,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var s=0,l=0,c=0;i=0;for(a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=n=a.anEdge;do{this.vertices[s++]=n.Org.coords[0],this.vertices[s++]=n.Org.coords[1],t>2&&(this.vertices[s++]=n.Org.coords[2]),this.vertexIndices[l++]=this.vertexIdCallback?this.vertexIdCallback(n):n.Org.idx,o++,n=n.Lnext}while(n!==r);this.elements[c++]=i,this.elements[c++]=o,i+=o}},e.prototype.addContour=function(e,t){null===this.mesh&&(this.mesh=new Soe),e<2&&(e=2),e>3&&(e=3);for(var n=null,r=0;r<t.length;r+=e)null===n?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=t[r+0],n.Org.coords[1]=t[r+1],n.Org.coords[2]=e>2?t[r+2]:0,n.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(n),n.winding=1,n.Sym.winding=-1},e.prototype.tesselate=function(e,t,n,r,i,o){if(void 0===e&&(e=ooe.ODD),void 0===t&&(t=aoe.POLYGONS),void 0===o&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,i&&(this.normal[0]=i[0],this.normal[1]=i[1],this.normal[2]=i[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),Doe.computeInterior(this,o);var a=this.mesh;return t===aoe.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),t===aoe.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,t,n,r),!0},e}();function Ioe(e){var t=e.windingRule,n=void 0===t?ooe.ODD:t,r=e.elementType,i=void 0===r?aoe.POLYGONS:r,o=e.polySize,a=void 0===o?3:o,s=e.vertexSize,l=void 0===s?2:s,c=e.normal,u=void 0===c?[0,0,1]:c,d=e.contours,h=void 0===d?[]:d,p=e.strict,A=void 0===p||p,f=e.debug,m=void 0!==f&&f;if(!h&&A)throw new Error("Contours can't be empty");if(h){var g=new Foe;e.edgeCreateCallback&&(g.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(g.vertexIdCallback=e.vertexIdCallback);for(var v=0;v<h.length;v++)g.addContour(l||2,h[v]);return g.tesselate(n,i,a,l,u,A),{vertices:g.vertices,vertexIndices:g.vertexIndices,vertexCount:g.vertexCount,elements:g.elements,elementCount:g.elementCount,mesh:m?g.mesh:void 0}}}ooe.ODD,ooe.NONZERO,ooe.POSITIVE,ooe.NEGATIVE,ooe.ABS_GEQ_TWO,aoe.POLYGONS,aoe.CONNECTED_POLYGONS,aoe.BOUNDARY_CONTOURS;var koe=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug;let n=e*koe.eSize;this.buffer=new ArrayBuffer(n);let r=Float32Array.BYTES_PER_ELEMENT,i=0;this.positions=new Float32Array(this.buffer,i*r,3*e),i+=3*e,this.normals=new Float32Array(this.buffer,i*r,3*e),i+=3*e,this.uvs=new Float32Array(this.buffer,i*r,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug;let n=e*koe.eSize,r=new ArrayBuffer(n),i=Float32Array.BYTES_PER_ELEMENT,o=0,a=new Float32Array(r,o*i,3*e);o+=3*e;let s=new Float32Array(r,o*i,3*e);o+=3*e;let l=new Float32Array(r,o*i,2*e);t?(a.set(this.positions.subarray(0,3*this.size)),s.set(this.normals.subarray(0,3*this.size)),l.set(this.uvs.subarray(0,2*this.size))):(a.set(this.positions),s.set(this.normals),l.set(this.uvs)),this.buffer=r,this.positions=a,this.normals=s,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let e=this.capacity;for(;t>e;)e*=2;this.realloc(e)}let n=this.size;return this.size=t,n}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug,this.realloc(this.size,!0)}},Ooe=koe;Ooe.eSize=8*Float32Array.BYTES_PER_ELEMENT;var Loe=cQ(AQ()),Roe={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},Uoe={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},zoe={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},Noe=(e,t)=>([n,r])=>(r<n&&(r+=t),(e>=n?e:e+t)<=r),joe=class extends mK{constructor(e,t,n=0,r=12,i=3,o=ooe.ODD,a=!1){super(),this.forPathBevel=a,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=r,this._bevelSegmentsInput=i;let s,l,c,u=this._shape.extractShapePointsToFlatArray([],r),d=this._shape.shapeHoles.map((e=>{let t=e.extractShapePointsToFlatArray([],r),n=[];for(let r=t.length-1;r>=1;r-=2){let e=t[r-1],i=t[r-0];n.push(e,i)}return n})),h=[],p=[];for(let B=0;B<u.length;B+=2)p.push([u[B],u[B+1]]);h.push(p);for(let B=0;B<d.length;B++){let e=d[B],t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);h.push(t)}s=e.isText?.1*(new B0).setFromPoints(e.points.map((e=>e.position))).getSize(new hG).length():0===h[0].length?n:(0,Loe.default)(h).distance,n<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(n,s,t/2),this._bevelSegments=Math.floor(i));try{l=Ioe({windingRule:o,elementType:aoe.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[u]})}catch{l=Roe}try{c=Ioe({windingRule:ooe.ODD,elementType:aoe.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...d]})}catch{c=Uoe}if(!l)throw new Error("error generating geometry");let A=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let e=0;e<c.elements.length;e++){let t=c.elements[e],n=e%2==0?l.vertexCount:0;l.elements.push(t+n)}for(let e=0;e<c.vertexIndices.length;e++){let t=c.vertexIndices[e],n=l.vertexCount;l.vertexIndices.push(t+n)}for(let e=0;e<c.vertices.length;e++){let t=c.vertices[e];l.vertices.push(t)}}let f=1/0,m=-1/0,g=1/0,v=-1/0;for(let B=0,_=l.vertexCount;B<_;B++){let e=2*B,t=l.vertices[e+0],n=l.vertices[e+1];t<f&&(f=t),t>m&&(m=t),n<g&&(g=n),n>v&&(v=n)}this._minX=f,this._minY=g,this._width=m-f,this._height=v-g,this._buffer=new Ooe(this._computeBufferEstimatedSize(l));let y=[],b=[];for(let B=l.elementCount-1;B>=0;B--){let e=B>=A,t=2*B,n=l.elements[t+0],i=l.elements[t+1],o=n+i,c={start:n,count:i,normals:[],continuous:[],concave:[]},u=n,h=o-1,p=n+1,f=this._shape.roundedCurves.length;do{let t=u-n,r=l.vertices[2*h+0],a=l.vertices[2*h+1],s=l.vertices[2*u+0],d=l.vertices[2*u+1],A=l.vertices[2*p+0],m=l.vertices[2*p+1],g=s-r,v=d-a,y=Math.sqrt(g*g+v*v);g/=y,v/=y;let b=s-A,w=d-m,x=Math.sqrt(b*b+w*w);b/=x,w/=x,c.normals[2*t+0]=-w,c.normals[2*t+1]=b,c.concave[t]=g*w-v*b>0;let C=l.vertexIndices[u];if(Array.isArray(C))c.continuous[t]=!1;else{let[e,n]=this._shape.getCurveIndexFromVertexId(C-1,!0);if(n>0&&n<1)c.continuous[t]=!0;else{let r=1===n?e+1:e-1;r=(r+f)%f;let i=1===n?0:1,o=this._shape.roundedCurves[e].getTangent(n),a=this._shape.roundedCurves[r].getTangent(i);c.continuous[t]=o.dot(a)>.95}}e&&(c.normals[2*t+0]*=-1,c.normals[2*t+1]*=-1),[h,u,p]=[u,p,p+1],p>=o&&(p-=i)}while(p!==n+1);let m=[];m.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(2*n,2*o),vertexCount:i,vertexIndices:new Array(i).fill(!0).map(((e,t)=>[t,t])),elements:[0,i],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(2*n,2*o)});let g=0;for(let a=1;a<=this._bevelSegments;a++){let t=a/this._bevelSegments*Math.PI/2,n=(1-Math.cos(t))*this._bevel,o=[],s=[],u=0;for(let a=0;a<i;a++){let t=2*a,d=(a-1+i)%i*2,h=l.vertices[2*c.start+t+0],p=l.vertices[2*c.start+t+1],A=-c.normals[d+0]*n,f=-c.normals[d+1]*n,m=-c.normals[t+0]*n,g=-c.normals[t+1]*n;if(c.concave[a]||!c.concave[a]&&e){let t=Math.atan2(f,A),i=Math.atan2(g,m);i>t&&(i-=2*Math.PI);let l=i-t;if(c.continuous[a]||e){let r=t+l/2,i=Math.cos(r)*n,c=Math.sin(r)*n;o[2*u+0]=h+i*(e?-1:1),o[2*u+1]=p+c*(e?-1:1),s[u]=a,u++}else{let e=Math.max(1,Math.floor(r/4*Math.abs(l)/Math.PI));for(let r=0;r<=e;r++){let i=t+l*(r/e),c=Math.cos(i)*n,d=Math.sin(i)*n;o[2*u+0]=h+c,o[2*u+1]=p+d,s[u]=a,u++}}}else o[2*u+0]=h+A,o[2*u+1]=p+f,s[u]=a,u++,o[2*u+0]=h,o[2*u+1]=p,s[u]=a,u++,o[2*u+0]=h+m,o[2*u+1]=p+g,s[u]=a,u++}let d=Ioe({windingRule:ooe.POSITIVE,elementType:aoe.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o],edgeCreateCallback:e=>{let t=e.Org.idx,n=s[t],r=s[(t+1)%s.length];e.idx=[n,r],e.Sym.idx=[r,n]},vertexIdCallback:e=>{let t=e.Lprev.idx;return[t?t[1]:0,e.idx?e.idx[0]:0]}});if(!d)throw new Error(`error generating bevel geometry for ${a}'th loop`);if(!d.vertexCount){let e=(a-1)/this._bevelSegments*Math.PI/2;g=(1-Math.sin(e))*this._bevel;break}for(let e=0;e<d.vertexIndices.length;e++){let[t,n]=d.vertexIndices[e];if(t===n)continue;let r=n;n<t&&(r+=i);for(let o=t;o<r;o++){let r=o%i,a=(o+1)%i;if(!c.continuous[r]||!c.continuous[a]){d.vertexIndices[e]=[t,r],d.vertexIndices.splice(e+1,0,[a,n]),d.vertices.splice(2*(e+1),0,d.vertices[2*e],d.vertices[2*e+1]);break}}}m.push({bevelI:a,angle:t,size:n,boundary:d,reverseMap:s,insetPoints:o})}let v=(e,t,n)=>{let r=0,i=e.boundary.vertexIndices.length;for(;r<i&&n(e.boundary.vertexIndices[t]);)t=(t+1)%i,r++;return r},w=y.length;for(let r=1;r<m.length;r++){let e=m[r-1],t=m[r],n=e.boundary.vertexIndices.length,o=t.boundary.vertexIndices.length;if(!n||!o)break;let s=c.concave.length,l=0,u=Noe(l,i);for(;!e.boundary.vertexIndices.filter(u).length||!t.boundary.vertexIndices.filter(u).length;)l++,u=Noe(l,i);let d=e.boundary.vertexIndices.findIndex(u),h=t.boundary.vertexIndices.findIndex(u);do{d=(d+1)%n}while(u(e.boundary.vertexIndices[d]));do{h=(h+1)%o}while(u(t.boundary.vertexIndices[h]));l=(l+1)%i;let p,A,f=l,g=0,b=this._buildBevelVert(c,e,(d-1+n)%n,void 0,g),w=this._buildBevelVert(c,t,(h-1+o)%o,void 0,g),x=!1;do{g=(l||s)/s,u=Noe(l,i);let r=v(e,d,u),f=v(t,h,u),m=x;if(x=!1,r&&!f){for(let t=0;t<r;t++)p=this._buildBevelVert(c,e,(d+t)%n,t/(r-1),g),y.push(b.topN,p.topP,w.topN),!1===a&&y.push(p.bottomP,b.bottomN,w.bottomN),b=p;x=!0}else if(!r&&f)for(let e=0;e<f;e++)A=this._buildBevelVert(c,t,(h+e)%o,e/(f-1),g),y.push(w.topN,b.topP,A.topP),!1===a&&y.push(b.bottomP,w.bottomN,A.bottomP),w=A;else if(r&&f)if(p=this._buildBevelVert(c,e,d,0,g),A=this._buildBevelVert(c,t,h,0,g),m?(y.push(b.topN,A.topP,w.topN),y.push(b.topN,p.topP,A.topP),!1===a&&(y.push(A.bottomP,b.bottomN,w.bottomN),y.push(A.bottomP,p.bottomP,b.bottomN))):(y.push(w.topN,b.topN,p.topP),y.push(w.topN,p.topP,A.topP),!1===a&&(y.push(p.bottomP,b.bottomN,w.bottomN),y.push(p.bottomP,w.bottomN,A.bottomP))),b=p,w=A,r===f)for(let i=1;i<r;i++)p=this._buildBevelVert(c,e,(d+i)%n,i/(r-1),g),A=this._buildBevelVert(c,t,(h+i)%o,i/(f-1),g),y.push(b.topN,p.topP,w.topN),y.push(w.topN,p.topP,A.topP),!1===a&&(y.push(p.bottomP,b.bottomN,w.bottomN),y.push(p.bottomP,w.bottomN,A.bottomP)),b=p,w=A;else if(r>f){let i=r/f,s=0;for(let l=1;l<r;l++)p=this._buildBevelVert(c,e,(d+l)%n,l/(r-1),g),y.push(b.topN,p.topP,w.topN),!1===a&&y.push(p.bottomP,b.bottomN,w.bottomN),b=p,l>(s+1)*i&&(s++,A=this._buildBevelVert(c,t,(h+s)%o,s/(f-1),g),y.push(w.topN,p.topP,A.topP),!1===a&&y.push(p.bottomP,w.bottomN,A.bottomP),w=A)}else{let i=f/r,s=0;for(let l=1;l<f;l++)A=this._buildBevelVert(c,t,(h+l)%o,l/(f-1),g),y.push(w.topN,p.topP,A.topP),!1===a&&y.push(p.bottomP,w.bottomN,A.bottomP),w=A,l>(s+1)*i&&(s++,p=this._buildBevelVert(c,e,(d+s)%n,s/(r-1),g),y.push(b.topN,p.topP,w.topN),!1===a&&y.push(p.bottomP,b.bottomN,w.bottomN),b=p)}d=(d+r)%n,h=(h+f)%o,l=(l+1)%s}while(l!==f)}if(!1===a&&this._depth>2*this._bevel&&this._buildWall(m,c,y),e){let e=[];for(let t=y.length-1;t>=w+2;t-=3){let n=y[t-2],r=y[t-1],i=y[t-0];e.push(i,r,n)}y.splice(w,y.length-w,...e)}if(e){let e=[];for(let t=m[m.length-1].boundary.vertices.length-1;t>=1;t-=2){let n=m[m.length-1].boundary.vertices[t-1],r=m[m.length-1].boundary.vertices[t-0];e.push(n,r)}b.push(e)}if(!e){let e,t=m[m.length-1];try{e=Ioe({windingRule:m.length>1?ooe.POSITIVE:ooe.ODD,elementType:aoe.POLYGONS,vertexSize:2,strict:!0,contours:[t.insetPoints,...b]})}catch{e=zoe}if(!e)throw new Error("Error generating geometry for surface");0===d.length&&this._bevel<s&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let n=0;n<3*e.elementCount;n+=3){let t=this._buildSurfaceVert(e,e.elements[n+0],g),r=this._buildSurfaceVert(e,e.elements[n+1],g),i=this._buildSurfaceVert(e,e.elements[n+2],g);y.push(t.top,r.top,i.top),!1===a&&y.push(i.bottom,r.bottom,t.bottom)}}this.vertexCache={}}this._buffer.shrink();let w=new oK(Uint32Array.from(y),1),x=new oK(this._buffer.positions,3),C=new oK(this._buffer.normals,3),S=new oK(this._buffer.uvs,2);x.needsUpdate=!0,C.needsUpdate=!0,S.needsUpdate=!0,w.needsUpdate=!0,this.setAttribute("position",x),this.setAttribute("normal",C),this.setAttribute("uv",S),this.setIndex(w)}_computeBufferEstimatedSize(e){return 2*e.vertexCount*(2+this._bevelSegments)}_buildWall(e,t,n){let r=e[0];for(let i=0,o=r.boundary.vertexCount;i<o;i++){let e=this._buildBevelVert(t,r,i),a=this._buildBevelVert(t,r,(i+1)%o);n.push(a.topP,e.topN,e.bottomN),n.push(a.topP,e.bottomN,a.bottomP)}}_buildSurfaceVert(e,t,n){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let i=e.vertices[2*t+0],o=e.vertices[2*t+1],a=(i-this._minX)/this._width,s=(o-this._minY)/this._height;this.forPathBevel&&(s=1);let l=this._buffer.get(this.forPathBevel?1:2),c=3*l,u=2*l,d={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=i,this._buffer.positions[c+1]=o,this._buffer.positions[c+2]=this.forPathBevel?this._bevel:this._depth-n,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[u+0]=a,this._buffer.uvs[u+1]=s,!1===this.forPathBevel&&(this._buffer.positions[c+3]=i,this._buffer.positions[c+4]=o,this._buffer.positions[c+5]=n,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[u+2]=a,this._buffer.uvs[u+3]=s),this.vertexCache[r]=d,d}_buildBevelVert(e,t,n,r=1,i){let o=`${t.bevelI}:${n}`;if(o in this.vertexCache&&0!==i&&1!==i&&(!i||i===this.vertexCache[o].pathBevelUCoord))return this.vertexCache[o];let a,s,l,c,[u,d]=t.boundary.vertexIndices[n];u!==d?(s=u,a=d,c=!1,l=e.continuous[s]&&e.continuous[a]):(a=u,s=(a-1+e.count)%e.count,c=e.concave[a]&&t.bevelI>0,l=e.continuous[a]||c);let h=Math.cos(t.angle),p=Math.sin(t.angle),A=2*n,f=2*a,m=2*s,g=t.boundary.vertices[A+0],v=t.boundary.vertices[A+1],y=(1-p)*this._bevel,b=(g-this._minX)/this._width,w=(v-this._minY)/this._height;this.forPathBevel&&(void 0!==i&&(b=i),w=1);let x=e.normals[f+0],C=e.normals[f+1],S=e.normals[m+0],B=e.normals[m+1];if(c){x+=(S-x)*(1-r),C+=(B-C)*(1-r);let e=Math.sqrt(x*x+C*C);x/=e,C/=e}let _=this.forPathBevel?this._buffer.get(l?1:2):this._buffer.get(l?2:4),E=3*_,M=2*_,P={i:n,fi:a,topP:_+0,topN:_+0,bottomP:_+1,bottomN:_+1,pathBevelUCoord:i};return this._buffer.positions[E+0]=g,this._buffer.positions[E+1]=v,this._buffer.positions[E+2]=(this.forPathBevel?this._bevel:this._depth)-y,this._buffer.normals[E+0]=x*h,this._buffer.normals[E+1]=C*h,this._buffer.normals[E+2]=p,this._buffer.uvs[M+0]=b,this._buffer.uvs[M+1]=w,!1===this.forPathBevel&&(this._buffer.positions[E+3]=g,this._buffer.positions[E+4]=v,this._buffer.positions[E+5]=y,this._buffer.normals[E+3]=x*h,this._buffer.normals[E+4]=C*h,this._buffer.normals[E+5]=-p,this._buffer.uvs[M+2]=w,this._buffer.uvs[M+3]=b),l||(this.forPathBevel?(_+=1,E+=3,M+=2):(_+=2,E+=6,M+=4),P.topP=_+0,P.bottomP=_+1,this._buffer.positions[E+0]=g,this._buffer.positions[E+1]=v,this._buffer.positions[E+2]=(this.forPathBevel?this._bevel:this._depth)-y,this._buffer.normals[E+0]=S*h,this._buffer.normals[E+1]=B*h,this._buffer.normals[E+2]=p,this._buffer.uvs[M+0]=b,this._buffer.uvs[M+1]=w,!1===this.forPathBevel&&(this._buffer.positions[E+3]=g,this._buffer.positions[E+4]=v,this._buffer.positions[E+5]=y,this._buffer.normals[E+3]=S*h,this._buffer.normals[E+4]=B*h,this._buffer.normals[E+5]=-p,this._buffer.uvs[M+2]=w,this._buffer.uvs[M+3]=b)),this.vertexCache[o]=P,P}clone(){let e=new joe(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=H4(this.userData),e}},Hoe=class extends mK{constructor(e,t=12,n={}){super(),this.type="ShapeGeometry",this.windingRule=ooe.ODD,this.elementType=aoe.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:ooe.ODD,elementType:aoe.POLYGONS,polySize:3,vertexSize:2,strict:!0},n);let r,i,o,a=this._shape.extractShapePointsToFlatArray([],this._curveSegments),s=this._shape.shapeHoles.map((e=>e.extractShapePointsToFlatArray([],this._curveSegments))),l=!0,c=!0;for(let h=0,p=a.length/2;h<p;h++){let e=2*h,t=a[e+0],n=a[e+1];if(void 0!==i&&t!==i&&(l=!1),void 0!==o&&n!==o&&(c=!1),i=t,o=n,!l&&!c)break}if(!l&&!c)try{r=Ioe({contours:[a,...s],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{r=Roe}let u=(null==r?void 0:r.vertexCount)??1,d=(null==r?void 0:r.elementCount)??1;if(this._positionAttribute=new oK(new Float32Array(3*u),3),this._normalAttribute=new oK(new Float32Array(3*u),3),this._uvAttribute=new oK(new Float32Array(2*u),2),this._indexAttribute=new oK(new Uint32Array(3*d),1),r){let e=1/0,t=-1/0,n=1/0,i=-1/0;for(let s=0,l=u;s<l;s++){let o=2*s,a=r.vertices[o+0],l=r.vertices[o+1];a<e&&(e=a),a>t&&(t=a),l<n&&(n=l),l>i&&(i=l)}let o=t-e,a=i-n;for(let s=0,l=u;s<l;s++){let t=2*s,i=r.vertices[t+0],l=r.vertices[t+1],c=(i-e)/o,u=(l-n)/a;this._positionAttribute.setXYZ(s,i,l,0),this._normalAttribute.setXYZ(s,0,0,1),this._uvAttribute.setXY(s,c,u)}for(let s=0,l=d;s<l;s++){let e=3*s,t=r.elements[e+0],n=r.elements[e+1],i=r.elements[e+2];this._indexAttribute.setX(e+0,t),this._indexAttribute.setX(e+1,n),this._indexAttribute.setX(e+2,i)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,3*((null==r?void 0:r.elementCount)??1))}clone(){let e=new Hoe(this._shape,this._curveSegments);return e.userData=H4(this.userData),e}},Qoe=class extends joe{constructor(e,t,n=0,r=12,i=3,o=ooe.ODD){super(e,t,n,r,i,o),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return 2*e.vertexCount*(2+this._bevelSegments)}_buildWall(e,t,n){let r=e[0];for(let i=0,o=r.boundary.vertexCount;i<o;i++){let e=this._buildBevelVert(t,r,i),a=this._buildBevelVert(t,r,(i+1)%o);n.push(a.topP,e.topN,e.bottomN),n.push(a.topP,e.bottomN,a.bottomP)}}clone(){let e=new Qoe(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=H4(this.userData),e}},Voe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r;let i=Object.assign({},(null==t?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:ooe.ODD},e.parameters),o=Math.abs(i.width),a=Math.abs(i.height??i.width),s=Math.abs(i.depth??0),l=e.shape??(null==t?void 0:t.shape),c=(null==l?void 0:l.roundness)??i.roundness;void 0!==l&&(l instanceof poe?(l.width!==o||l.height!==a)&&l.applySize(o,a):l=new poe(o,a).fromJSON(l),void 0!==(null==(n=e.parameters)?void 0:n.roundness)&&(null==(r=e.parameters)?void 0:r.roundness)>0&&l.update());let u=l??new poe(o,a);return{parameters:Object.assign(i,{width:o,height:a,depth:s,roundness:c}),shape:u}}static build(e){let t,{depth:n,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:o,roundness:a,windingRule:s}=e.parameters;return e.shape.roundness=a,t=n<=0?new Hoe(e.shape,o,{windingRule:s}):new Qoe(e.shape,n,r,o,i,s),Object.assign(t,{userData:{...e,type:"VectorGeometry"}})}},Woe=2*Math.PI,Goe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return n.angle=dG.clamp(n.angle,0,360),{shape:e.shape&&e.shape instanceof poe?e.shape:new poe,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let t,{width:n,height:r,spikes:i,angle:o,innerRadius:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,u=e.shape,d=function(e,t,n,r,i,o){if(r>=Woe)return i>30||i%4==0?(function(e,t,n,r=0,i=0,o=0){let a=.5522847498,s=t*a,l=n*a;e.addPoint(Yoe(i-t,o,i-t,o-l,i-t,o+l)),e.addPoint(Yoe(i,o+n,i-s,o+n,i+s,o+n)),e.addPoint(Yoe(i+t,o,i+t,o+l,i+t,o-l)),e.addPoint(Yoe(i,o-n,i+s,o-n,i-s,o-n)),r>0&&$oe(e,t,n,r)}(e,t,n,o),Math.round(i/4)):qoe(e,r,i,t,n,o);r=Math.max(r,.001);let a={x:0,y:n},s=r+.5*Math.PI,l={x:Math.cos(s)*t,y:Math.sin(s)*n},c=voe({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:n,largeArcFlag:r>Math.PI,sweepFlag:!0});return i>30||i%c.length==0?function(e,t,n,r,i,o,a,s){let l=Math.round(i/r.length);e.addPoint(Koe(t,n));for(let c=0,u=r.length;c<u;c++){let t=r[c],n=e.points[c],i=Koe(t.x,t.y);n.controls[1].position.set(t.x1,t.y1),i.controls[0].position.set(t.x2,t.y2),e.addPoint(i)}return s>0?Xoe(e,o,a,s):e.addPoint(Koe(0,0)),l}(e,a.x,a.y,c,i,t,n,o):qoe(e,r,i,t,n,o)}(u,.5*n,.5*r,o*Math.PI/180,i,a);return u.isClosed=!0,u.update(),0===o?(t=new mK,t.setAttribute("position",new lK([],3))):t=Voe.create({shape:u,parameters:{subdivisions:d,depth:s,extrudeBevelSize:l,extrudeBevelSegments:c}}),Object.assign(t,{userData:{...e,type:"EllipseGeometry"}})}};function qoe(e,t,n,r,i,o){let a=-t/n;for(let s=0;s<=n;s++){let t=a*s,n=Math.sin(t)*r,o=Math.cos(t)*i;e.addPoint(Koe(n,o))}return t<Woe?o>0?Xoe(e,r,i,o):e.addPoint(Koe(0,0)):(e.removePoint(e.points[e.points.length-1]),o>0&&$oe(e,r,i,o)),1}function Koe(e,t){return new Oie(dG.generateUUID(),new hG(e,t))}function Yoe(e,t,n,r,i,o){let a=Koe(e,t);return a.controls[0].position.set(n,r),a.controls[1].position.set(i,o),a}function Xoe(e,t,n,r){Joe(e,t,n,r).forEach((t=>e.addPoint(t)))}function $oe(e,t,n,r){let i=Joe(e,t,n,r),o=new poe;i.forEach((e=>o.addPoint(e))),o.isClosed=!0,e.shapeHoles.push(o)}function Joe(e,t,n,r){let i=r*t/100,o=i*(Math.abs(n)/Math.abs(t)),a=new hG(i/t,o/n),s=e.points.map((e=>{let t=e.clone();return t.uuid=dG.generateUUID(),t})).reverse();return s.forEach((e=>{e.position.multiply(a);let t=e.controls[0].position.clone().multiply(a),n=e.controls[1].position.clone().multiply(a);e.controls[0].position.copy(n),e.controls[1].position.copy(t)})),s}var Zoe=new sK([0,0,0],1),eae=class extends mK{constructor(e=!0,t=1,n=1,r=1,i=1,o=1,a=1,s=1,l=1,c=1,u=1,d=1){if(super(),0===o)return;let h=e&&1===o;h&&(d=0),u>100&&(u=100),0===u&&(d=0);let p,A,f,m,g,v,y,b,w=()=>new jG,x=new jG,C=w(),S=w(),B=w(),_=w(),E=w(),M=w(),P=w(),T=w(),D=w(),F=w(),I=w(),k=n-2*s+.001,O=k/o,L=Math.ceil(a*o),R=L+1,U=k/L,z=-k/2,N=c+1,j=2*Math.PI/c,H=Math.PI/2/d,Q=Math.min((1-u/100)*s,s-.01),V=s-Q,W=0,G=2*d+2,q=N*G/2,K=q+N*R,Y=Math.max(0,N*(R+G)),[X,$,J]=[3,3,2].map((e=>Array(Y*e).fill(0))),Z=[],ee=i-s;function te(t,n){let r=Math.PI/2;v=n*U,b=2*Math.PI*(v%O)/O+r,v+=z,y=Math.sin(b)*ee,g=Math.cos(b)*ee,e?t.set(g,y,v):t.set(g,v,y)}te(x,-1e-10),te(C,0),_.copy(x),te(x,1);let ne=x.distanceTo(C),re=h?0:V+Q,ie=ne*L+2*re,oe=Q,ae=ie-re;for(let ue=0;ue<=L;ue++){te(S,ue),I.subVectors(S,_).normalize(),_.copy(S),D.copy(S).setComponent(+e+1,0).normalize(),F.crossVectors(I,D).normalize();let t=0===ue,n=ue===L,r=t?3*Math.PI/2:H,i=t?oe:ae,o=t?N:K,a=t?0:Y-N,l=I.clone().multiplyScalar(t?-V:V).add(S),u=I.clone().multiplyScalar(t?-1:1).normalize();for(let e=0;e<N;e++){let p=e*j;if(E.addVectors(x.copy(D).multiplyScalar(s*Math.cos(p)),C.copy(F).multiplyScalar(s*Math.sin(p))),M.copy(E).normalize(),t||n){h||(W=a+e,[0,1,2].forEach((e=>{X[3*W+e]=l.getComponent(e),$[3*W+e]=u.getComponent(e)})),J[2*W]=+n,J[2*W+1]=e/c),C.copy(M).multiplyScalar(Q),B.addVectors(S,C);for(let n=0;n<d;n++){let a=n*H+r;P.addVectors(x.copy(I).multiplyScalar(V*Math.sin(a)),C.copy(M).multiplyScalar(V*Math.cos(a))),T.copy(P).normalize(),C.addVectors(B,P),P.normalize(),W=o+n*N+e,[0,1,2].forEach((e=>{X[3*W+e]=C.getComponent(e),$[3*W+e]=T.getComponent(e)}));let s=+t+Math.sin(a);J[2*W]=(i+V*s)/ie,J[2*W+1]=e/c}}C.addVectors(S,E),W=q+ue*N+e,[0,1,2].forEach((e=>{X[3*W+e]=C.getComponent(e),$[3*W+e]=M.getComponent(e)})),J[2*W]=(re+ue*ne)/ie,J[2*W+1]=e/c}}let se=R+2*d+2,[le,ce]=[+h,se-1];for(let ue=le;ue<=ce-1;ue++){let e=h&&ue===ce-1;for(let t=0;t<N-1;t++)p=ue*N+t,A=p+1,f=(e?t:p)+N,m=(e?t+1:A)+N,0===ue?Z.push(A,m,f):ue===se-2?Z.push(p,A,f):Z.push(p,A,f,A,m,f)}this.setIndex(Z),this.setAttribute("position",new lK(X,3)),this.setAttribute("normal",new lK($,3)),this.setAttribute("uv",new lK(J,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e,t,n,r,i=this.userData.parameters,o=Math.ceil(i.tubularSegments),a=i.radialSegments+1,s=Array.from(this.getIndex().array),l=6*(o-1)*i.radialSegments,c=o,u=c===o;for(let d=0;d<i.radialSegments;d++)e=c*a+d,t=e+1,n=(u?d:e)+a,r=(u?d+1:t)+a,s[l++]=e,s[l++]=t,s[l++]=n,s[l++]=t,s[l++]=r,s[l++]=n;return s.length=l,Zoe.array=s,Zoe.count=s.length,Zoe}},tae=class extends Tie{constructor(e=1,t=.2,n=4){let r=(1+Math.sqrt(5))/2,i="IcosahedronGeometry";super([-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],i,e,t,n),this.type=i}static fromJSON(e){return new tae(e.radius,e.corner,e.cornerSides)}},nae=new gq,rae=new Hq,iae=new jG,oae=class extends $W{constructor(){super(),this.uuid=dG.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=(new pG).getNormalMatrix(e);for(let n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(let n=0,r=this.faces.length;n<r;n++){let e=this.faces[n];e.normal.applyMatrix3(t).normalize();for(let n=0,r=e.vertexNormals.length;n<r;n++)e.vertexNormals[n].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return nae.makeRotationX(e),this.applyMatrix4(nae),this}rotateY(e){return nae.makeRotationY(e),this.applyMatrix4(nae),this}rotateZ(e){return nae.makeRotationZ(e),this.applyMatrix4(nae),this}translate(e,t,n){return nae.makeTranslation(e,t,n),this.applyMatrix4(nae),this}scale(e,t,n){return nae.makeScale(e,t,n),this.applyMatrix4(nae),this}lookAt(e){return rae.lookAt(e),rae.updateMatrix(),this.applyMatrix4(rae.matrix),this}fromBufferGeometry(e){let t=this,n=null!==e.index?e.index:void 0,r=e.attributes;if(void 0===r.position)return this;let i=r.position,o=r.normal,a=r.color,s=r.uv,l=r.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let d=0;d<i.count;d++)t.vertices.push((new jG).fromBufferAttribute(i,d)),void 0!==a&&t.colors.push((new PG).fromBufferAttribute(a,d));function c(e,n,r,i){let c=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],u=void 0===o?[]:[(new jG).fromBufferAttribute(o,e),(new jG).fromBufferAttribute(o,n),(new jG).fromBufferAttribute(o,r)],d=new sae(e,n,r,u,c,i);t.faces.push(d),void 0!==s&&t.faceVertexUvs[0].push([(new hG).fromBufferAttribute(s,e),(new hG).fromBufferAttribute(s,n),(new hG).fromBufferAttribute(s,r)]),void 0!==l&&t.faceVertexUvs[1].push([(new hG).fromBufferAttribute(l,e),(new hG).fromBufferAttribute(l,n),(new hG).fromBufferAttribute(l,r)])}let u=e.groups;if(u.length>0)for(let d=0;d<u.length;d++){let e=u[d],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)void 0!==n?c(n.getX(r),n.getX(r+1),n.getX(r+2),e.materialIndex):c(r,r+1,r+2,e.materialIndex)}else if(void 0!==n)for(let d=0;d<n.count;d+=3)c(n.getX(d),n.getX(d+1),n.getX(d+2));else for(let d=0;d<i.count;d+=3)c(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(iae).negate(),this.translate(iae.x,iae.y,iae.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new gq;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new jG,t=new jG;for(let n=0,r=this.faces.length;n<r;n++){let r=this.faces[n],i=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];e.subVectors(a,o),t.subVectors(i,o),e.cross(t),e.normalize(),r.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let n=0,r=this.vertices.length;n<r;n++)t[n]=new jG;if(e){let e=new jG,n=new jG;for(let r=0,i=this.faces.length;r<i;r++){let i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),n.subVectors(o,a),e.cross(n),t[i.a].add(e),t[i.b].add(e),t[i.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){let n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let n=0,r=this.vertices.length;n<r;n++)t[n].normalize();for(let n=0,r=this.faces.length;n<r;n++){let e=this.faces[n],r=e.vertexNormals;3===r.length?(r[0].copy(t[e.a]),r[1].copy(t[e.b]),r[2].copy(t[e.c])):(r[0]=t[e.a].clone(),r[1]=t[e.b].clone(),r[2]=t[e.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,n=this.faces.length;t<n;t++){let e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,n=e.vertexNormals.length;t<n;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}let e=new oae;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,r=this.faces.length;t<r;t++){let t=new jG,r={a:new jG,b:new jG,c:new jG};e.push(t),n.push(r)}}let n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e],r=n.faceNormals[e],i=n.vertexNormals[e];r.copy(t.normal),i.a.copy(t.vertexNormals[0]),i.b.copy(t.vertexNormals[1]),i.c.copy(t.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){let e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new VG),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new lq),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,n=0){if(!e||!e.isGeometry)return;let r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.colors,u=e.colors;void 0!==t&&(r=(new pG).getNormalMatrix(t));for(let d=0,h=a.length;d<h;d++){let e=a[d].clone();void 0!==t&&e.applyMatrix4(t),o.push(e)}for(let d=0,h=u.length;d<h;d++)c.push(u[d].clone());for(let d=0,h=l.length;d<h;d++){let e,t,o=l[d],a=o.vertexNormals,c=o.vertexColors,u=new sae(o.a+i,o.b+i,o.c+i);u.normal.copy(o.normal),void 0!==r&&u.normal.applyMatrix3(r).normalize();for(let n=0,i=a.length;n<i;n++)e=a[n].clone(),void 0!==r&&e.applyMatrix3(r).normalize(),u.vertexNormals.push(e);u.color.copy(o.color);for(let n=0,r=c.length;n<r;n++)t=c[n],u.vertexColors.push(t.clone());u.materialIndex=o.materialIndex+n,s.push(u)}for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let t=e.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(let e=0,n=t.length;e<n;e++){let n=t[e],r=[];for(let e=0,t=n.length;e<t;e++)r.push(n[e].clone());this.faceVertexUvs[d].push(r)}}}mergeMesh(e){e&&e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))}mergeVertices(e=4){let t={},n=[],r=[],i=Math.pow(10,e);for(let s=0,l=this.vertices.length;s<l;s++){let e=this.vertices[s],o=Math.round(e.x*i)+"_"+Math.round(e.y*i)+"_"+Math.round(e.z*i);void 0===t[o]?(t[o]=s,n.push(this.vertices[s]),r[s]=n.length-1):r[s]=r[t[o]]}let o=[];for(let s=0,l=this.faces.length;s<l;s++){let e=this.faces[s];e.a=r[e.a],e.b=r[e.b],e.c=r[e.c];let t=[e.a,e.b,e.c];for(let n=0;n<3;n++)if(t[n]===t[(n+1)%3]){o.push(s);break}}for(let s=o.length-1;s>=0;s--){let e=o[s];this.faces.splice(e,1);for(let t=0,n=this.faceVertexUvs.length;t<n;t++)this.faceVertexUvs[t].splice(e,1)}let a=this.vertices.length-n.length;return this.vertices=n,a}setFromPoints(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){let n=e[t];this.vertices.push(new jG(n.x,n.y,n.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));let n,r,i=this.faceVertexUvs[0],o=this.faceVertexUvs[1];i&&i.length===t&&(n=[]),o&&o.length===t&&(r=[]);for(let a=0;a<t;a++){let t=e[a]._id;n&&n.push(i[t]),r&&r.push(o[t])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}let t=[];for(let p=0;p<this.vertices.length;p++){let e=this.vertices[p];t.push(e.x,e.y,e.z)}let n=[],r=[],i={},o=[],a={},s=[],l={};for(let p=0;p<this.faces.length;p++){let e=this.faces[p],t=!0,r=!1,i=void 0!==this.faceVertexUvs[0][p],o=e.normal.length()>0,a=e.vertexNormals.length>0,s=1!==e.color.r||1!==e.color.g||1!==e.color.b,l=e.vertexColors.length>0,A=0;if(A=c(A,0,0),A=c(A,1,t),A=c(A,2,r),A=c(A,3,i),A=c(A,4,o),A=c(A,5,a),A=c(A,6,s),A=c(A,7,l),n.push(A),n.push(e.a,e.b,e.c),n.push(e.materialIndex),i){let e=this.faceVertexUvs[0][p];n.push(h(e[0]),h(e[1]),h(e[2]))}if(o&&n.push(u(e.normal)),a){let t=e.vertexNormals;n.push(u(t[0]),u(t[1]),u(t[2]))}if(s&&n.push(d(e.color)),l){let t=e.vertexColors;n.push(d(t[0]),d(t[1]),d(t[2]))}}function c(e,t,n){return n?e|1<<t:e&~(1<<t)}function u(e){let t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==i[t]||(i[t]=r.length/3,r.push(e.x,e.y,e.z)),i[t]}function d(e){let t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==a[t]||(a[t]=o.length,o.push(e.getHex())),a[t]}function h(e){let t=e.x.toString()+e.y.toString();return void 0!==l[t]||(l[t]=s.length/2,s.push(e.x,e.y)),l[t]}return e.data={},e.data.vertices=t,e.data.normals=r,o.length>0&&(e.data.colors=o),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e}clone(){return(new oae).copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let d=0,h=t.length;d<h;d++)this.vertices.push(t[d].clone());let n=e.colors;for(let d=0,h=n.length;d<h;d++)this.colors.push(n[d].clone());let r=e.faces;for(let d=0,h=r.length;d<h;d++)this.faces.push(r[d].clone());for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let t=e.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(let e=0,n=t.length;e<n;e++){let n=t[e],r=[];for(let e=0,t=n.length;e<t;e++){let t=n[e];r.push(t.clone())}this.faceVertexUvs[d].push(r)}}let i=e.morphTargets;for(let d=0,h=i.length;d<h;d++){let e={};if(e.name=i[d].name,void 0!==i[d].vertices){e.vertices=[];for(let t=0,n=i[d].vertices.length;t<n;t++)e.vertices.push(i[d].vertices[t].clone())}if(void 0!==i[d].normals){e.normals=[];for(let t=0,n=i[d].normals.length;t<n;t++)e.normals.push(i[d].normals[t].clone())}this.morphTargets.push(e)}let o=e.morphNormals;for(let d=0,h=o.length;d<h;d++){let e={};if(void 0!==o[d].vertexNormals){e.vertexNormals=[];for(let t=0,n=o[d].vertexNormals.length;t<n;t++){let n=o[d].vertexNormals[t],r={};r.a=n.a.clone(),r.b=n.b.clone(),r.c=n.c.clone(),e.vertexNormals.push(r)}}if(void 0!==o[d].faceNormals){e.faceNormals=[];for(let t=0,n=o[d].faceNormals.length;t<n;t++)e.faceNormals.push(o[d].faceNormals[t].clone())}this.morphNormals.push(e)}let a=e.skinWeights;for(let d=0,h=a.length;d<h;d++)this.skinWeights.push(a[d].clone());let s=e.skinIndices;for(let d=0,h=s.length;d<h;d++)this.skinIndices.push(s[d].clone());let l=e.lineDistances;for(let d=0,h=l.length;d<h;d++)this.lineDistances.push(l[d]);let c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());let u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=(new aae).fromGeometry(this),t=new mK,n=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",dae.call(new oK(n,3),e.vertices)),e.normals.length>0){let n=new Float32Array(3*e.normals.length);t.setAttribute("normal",dae.call(new oK(n,3),e.normals))}if(e.colors.length>0){let n=new Float32Array(3*e.colors.length);t.setAttribute("color",cae.call(new oK(n,3),e.colors))}if(e.uvs.length>0){let n=new Float32Array(2*e.uvs.length);t.setAttribute("uv",uae.call(new oK(n,2),e.uvs))}if(e.uvs2.length>0){let n=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",uae.call(new oK(n,2),e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let n=[],i=e.morphTargets[r];for(let e=0,t=i.length;e<t;e++){let t=i[e],r=new lK(3*t.data.length,3);r.name=t.name,n.push(dae.call(r,t.data))}t.morphAttributes[r]=n}if(e.skinIndices.length>0){let n=new lK(4*e.skinIndices.length,4);t.setAttribute("skinIndex",hae.call(n,e.skinIndices))}if(e.skinWeights.length>0){let n=new lK(4*e.skinWeights.length,4);t.setAttribute("skinWeight",hae.call(n,e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){}computeLineDistances(){}applyMatrix(e){return this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new mK,n=e.geometry;if(e.isPoints||e.isLine){let e=new lK(3*n.vertices.length,3),r=new lK(3*n.colors.length,3);if(t.setAttribute("position",dae.call(e,n.vertices)),t.setAttribute("color",cae.call(r,n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){let e=new lK(n.lineDistances.length,1);t.setAttribute("lineDistance",lae.call(e,n.lineDistances))}null!==n.boundingSphere&&(t.boundingSphere=n.boundingSphere.clone()),null!==n.boundingBox&&(t.boundingBox=n.boundingBox.clone())}else e.isMesh&&(t=n.toBufferGeometry());return t}};oae.prototype.isGeometry=!0;var aae=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t,n,r,i=[],o=e.faces;for(n=0;n<o.length;n++){let e=o[n];e.materialIndex!==r&&(r=e.materialIndex,void 0!==t&&(t.count=3*n-t.start,i.push(t)),t={start:3*n,materialIndex:r})}void 0!==t&&(t.count=3*n-t.start,i.push(t)),this.groups=i}fromGeometry(e){let t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(let e=0;e<l;e++)t[e]={name:s[e].name,data:[]};this.morphTargets.position=t}let c,u=e.morphNormals,d=u.length;if(d>0){c=[];for(let e=0;e<d;e++)c[e]={name:u[e].name,data:[]};this.morphTargets.normal=c}let h=e.skinIndices,p=e.skinWeights,A=h.length===r.length,f=p.length===r.length;r.length>0&&n.length;for(let m=0;m<n.length;m++){let e=n[m];this.vertices.push(r[e.a],r[e.b],r[e.c]);let g=e.vertexNormals;if(3===g.length)this.normals.push(g[0],g[1],g[2]);else{let t=e.normal;this.normals.push(t,t,t)}let v=e.vertexColors;if(3===v.length)this.colors.push(v[0],v[1],v[2]);else{let t=e.color;this.colors.push(t,t,t)}if(!0===o){let e=i[0][m];void 0!==e?this.uvs.push(e[0],e[1],e[2]):this.uvs.push(new hG,new hG,new hG)}if(!0===a){let e=i[1][m];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):this.uvs2.push(new hG,new hG,new hG)}for(let n=0;n<l;n++){let r=s[n].vertices;t[n].data.push(r[e.a],r[e.b],r[e.c])}for(let t=0;t<d;t++){let e=u[t].vertexNormals[m];c[t].data.push(e.a,e.b,e.c)}A&&this.skinIndices.push(h[e.a],h[e.b],h[e.c]),f&&this.skinWeights.push(p[e.a],p[e.b],p[e.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}},sae=class{constructor(e,t,n,r,i,o=0){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new jG,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new PG,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function lae(e){return this.array.set(e),this}function cae(e){let t=this.array,n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(i=new PG),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}function uae(e){let t=this.array,n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(i=new hG),t[n++]=i.x,t[n++]=i.y}return this}function dae(e){let t=this.array,n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(i=new jG),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}function hae(e){let t=this.array,n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(i=new LG),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}var pae=["a","b","c"];function Aae(e,t){switch(t){case"c":return e.c;case"b":return e.b;default:return e.a}}function fae(e,t,n){let r=Math.min(e,t)+"_"+Math.max(e,t);return n.get(r)}function mae(e,t,n,r,i,o){let a,s=Math.min(e,t),l=Math.max(e,t),c=s+"_"+l;if(r.has(c))a=r.get(c);else{a={a:n[s],b:n[l],newEdge:null,faces:[]},r.set(c,a)}a.faces.push(i),o[e].edges.push(a),o[t].edges.push(a)}function gae(e,t,n,r,i){e.push(new sae(t,n,r,void 0,void 0,i))}function vae(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function yae(e,t,n,r){e.push([t.clone(),n.clone(),r.clone()])}var bae=class{constructor(e=1){this.subdivisions=e}modify(e){(e=e instanceof mK?(new oae).fromBufferGeometry(e):e.clone()).mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t,n,r,i,o,a=new jG,s=e.vertices,l=e.faces,c=e.faceVertexUvs[0],u=void 0!==c&&c.length>0,d=[],h=new Map;!function(e,t,n,r){let i,o,a;for(i=0,o=e.length;i<o;i++)n[i]={edges:[]};for(i=0,o=t.length;i<o;i++)a=t[i],mae(a.a,a.b,e,r,a,n),mae(a.b,a.c,e,r,a,n),mae(a.c,a.a,e,r,a,n)}(s,l,d,h);let p,A,f,m,g,v,y,b=[];for(let Q of Array.from(h.keys())){for(A=h.get(Q),f=new jG,g=3/8,v=1/8,y=A.faces.length,2!=y&&(g=.5,v=0),f.addVectors(A.a,A.b).multiplyScalar(g),a.set(0,0,0),i=0;i<y;i++){for(m=A.faces[i],o=0;o<3&&(p=s[Aae(m,pae[o])],p===A.a||p===A.b);o++);p&&a.add(p)}a.multiplyScalar(v),f.add(a),A.newEdge=b.length,b.push(f)}let w,x,C,S,B,_,E,M=[];for(n=0,r=s.length;n<r;n++){for(_=s[n],B=d[n].edges,t=B.length,3==t?w=3/16:t>3&&(w=3/(8*t)),x=1-t*Number(w),C=w,t<=2&&(2==t&&(x=3/4,C=1/8)),E=_.clone().multiplyScalar(x),a.set(0,0,0),i=0;i<t;i++)S=B[i],p=S.a!==_?S.a:S.b,a.add(p);a.multiplyScalar(Number(C)),E.add(a),M.push(E)}let P,T,D,F,I,k,O,L=M.concat(b),R=M.length,U=[],z=[],N=new hG,j=new hG,H=new hG;for(n=0,r=l.length;n<r;n++)m=l[n],P=Number(fae(m.a,m.b,h).newEdge)+R,T=Number(fae(m.b,m.c,h).newEdge)+R,D=Number(fae(m.c,m.a,h).newEdge)+R,gae(U,P,T,D,m.materialIndex),gae(U,m.a,P,D,m.materialIndex),gae(U,m.b,T,P,m.materialIndex),gae(U,m.c,D,T,m.materialIndex),u&&(F=c[n],I=F[0],k=F[1],O=F[2],N.set(vae(I.x,k.x),vae(I.y,k.y)),j.set(vae(k.x,O.x),vae(k.y,O.y)),H.set(vae(I.x,O.x),vae(I.y,O.y)),yae(z,N,j,H),yae(z,I,N,H),yae(z,k,j,N),yae(z,O,H,j));e.vertices=L,e.faces=U,u&&(e.faceVertexUvs[0]=z)}},wae=new jG,xae=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof poe?e.shape:new poe,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,spikes:r,cornerRadius:i,depth:o,extrudeBevelSize:a,extrudeBevelSegments:s}=e.parameters,l=e.shape,c=.5*t,u=.5*n,d=2*Math.PI/r;for(let p=0;p<r;p++){let e=d*p,t=0+Math.sin(e)*c,n=0+Math.cos(e)*u;l.addPoint(l.createPoint(t,n))}l.isClosed=!0;for(let p=0,A=l.points.length;p<A;p++)l.points[p].roundness=i;l.roundness=i,l.update();let h=Voe.create({shape:l,parameters:{roundness:i,depth:o,extrudeBevelSize:a,extrudeBevelSegments:s}});return Object.assign(h,{userData:{...e,type:"PolygonGeometry"}})}};function Cae(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function Sae(e,t,n,r,i,o){let a=t.clone().sub(e),s=n.clone().sub(e),l=a.angleTo(s);if(a.normalize(),s.normalize(),r===i){let t=a.add(s).normalize();o.copy(e).addScaledVector(t,r/Math.sin(l/2))}else{let t=a.angleTo(s);o.copy(e),o.addScaledVector(a,i/Math.sin(t)),o.addScaledVector(s,r/Math.sin(t))}}function Bae(e,t,n){let r=e.clone().sub(t),i=n.clone().sub(t);return r.projectOnVector(i),r.add(t)}var _ae=class extends mK{constructor(e=.5,t=1,n=4,r=1,i=!1,o=0,a=4){super(),n=Math.floor(Math.max(3,n)),r=Math.floor(r),a=Math.floor(a);let s,l=[],c=[],u=[],d=[],h=0,p=t/2,A=Math.PI/n,f=e*Math.cos(Math.PI/n),m=2*Math.PI/n,g=(n-2)*Math.PI/n,v=Math.PI-g,y=new jG(0,-p,0),b=new jG(0,p,0),w=new hG(e,-p),x=new hG(f,-p),C=new hG(0,b.y).sub(x),S=new hG(0,b.y).sub(w),B=new hG(C.y,-C.x).normalize(),_=new hG(S.y,-S.x).normalize(),E=e*Math.cos(Math.PI/n)*Math.tan((Math.PI-C.angle())/2)-1e-8;o=Math.min(o,E);{let e=new jG(B.x,B.y,0),t=new jG(Math.cos(m)*e.x,e.y,Math.sin(m)*e.x);s=e.angleTo(t)}let M=o/Math.tan((Math.PI-C.angle())/2),P=o/Math.tan((Math.PI-s)/2),T=new jG;if(!i){c.push(y.x,y.y,y.z),u.push(0,-1,0),d.push(0,0);let e=h++,t=[],r=w.clone(),i=M/Math.cos(Math.PI/n);r.x-=i;for(let o=0;o<n;o++){let e=o/n*Math.PI*2+A;Cae(r,new hG(Math.sin(e),Math.cos(e)),T),c.push(T.x,T.y,T.z),u.push(0,-1,0),d.push(0,0),t.push(h++)}for(let n=0;n<t.length;n++)l.push(t[n],e,t[(n+1)%t.length])}{let e=new jG,t=new jG,r=new jG,i=new jG,p=new jG,f=new jG;for(let m=0;m<n;m++){let g=m/n*Math.PI*2+A,v=(m+.5)/n*Math.PI*2+A,x=(m+1)/n*Math.PI*2+A,S=new hG(Math.sin(g),Math.cos(g)),E=new hG(Math.sin(v),Math.cos(v)),T=new hG(Math.sin(x),Math.cos(x));Cae(w,S,t),Cae(w,T,r),Cae(B,E,e),Sae(b,t,r,P,P,i),c.push(i.x,i.y,i.z),Sae(t,b,r,P,M,p),c.push(p.x,p.y,p.z),Sae(r,t,b,M,P,f),c.push(f.x,f.y,f.z),u.push(e.x,e.y,e.z),u.push(e.x,e.y,e.z),u.push(e.x,e.y,e.z),d.push(0,0),d.push(0,0),d.push(0,0);let I=h++,k=h++,O=h++;if(l.push(I,k,O),o>0){{let e=t.clone().add(r).multiplyScalar(.5),n=b.clone().sub(e).normalize(),i=y.clone().sub(e).normalize().add(n).normalize().multiplyScalar(-1);D(e,f.clone().sub(p),i,C.angle())}let A,m;{let e=new jG;Cae(_,T,e);let t=f.clone().add(i).multiplyScalar(.5);t=Bae(t,r,b);let n=f.clone().sub(i);[A,m]=D(t,n,e,s,i.y)}{let e=A,t=e.clone().setY(0).normalize(),n=new jG(0,-1,0),r=t.clone().cross(n);F(e,t,n,r)}{let t=C.angle(),r=Math.PI-t,i=b.clone();i.y-=o/Math.sin(t-Math.PI/2);let s=new jG,p=[];for(let l=0;l<a;l++){let t=[],A=Math.PI/2-r*l/a,f=Math.cos(A),m=Math.sin(A),g=v;for(let r=0;r<=l;r++){let r=Math.cos(g),a=Math.sin(g);e.x=f*a,e.y=m,e.z=f*r,s.copy(i).addScaledVector(e,o),c.push(s.x,s.y,s.z),u.push(e.x,e.y,e.z),d.push(0,0),t.push(h++),g+=2*Math.PI/l/n}p.push(t)}m.reverse(),p.push(m);let A=p.length-1;for(let e=0;e<A;e++){let t=p[e],n=p[e+1],r=t.length-1;l.push(n[1],t[0],n[0]);for(let e=1;e<=r;e++)l.push(t[e],t[e-1],n[e]),l.push(n[e+1],t[e],n[e])}}}}}function D(e,t,n,r,i){let s=-r/2,p=(Math.PI-r)/2,A=t.clone().normalize().cross(n);e.addScaledVector(n,-o/Math.sin(p));let f=new jG,m=new jG,g=h,v=[];for(let l=0;l<=a;l++){let p=s+l/a*r;m.set(0,0,0),m.addScaledVector(A,Math.sin(p)),m.addScaledVector(n,Math.cos(p));for(let n=0;n<=1;n++){let r=n/1-.5;if(f.copy(e),f.addScaledVector(t,r),f.addScaledVector(m,o),null!=i){let e=Math.max(0,f.y-i);f.addScaledVector(t,-e/t.y)}c.push(f.x,f.y,f.z),u.push(m.x,m.y,m.z),d.push(0,0),0===n&&v.push(h),h++}}for(let o=0;o<a;o++)for(let e=0;e<1;e++){let t=g+e+2*o,n=t+2,r=n+1,i=t+1;l.push(t,n,i),l.push(n,r,i)}return[e.clone().addScaledVector(t,.5),v]}function F(e,t,n,r){let i=Math.PI/2,s=S.angle()-i,p=[],A=new jG,f=new jG;for(let l=0;l<=a;l++){let m=[],g=l/a;for(let a=0;a<=l;a++){let p=((l?a/l:0)-.5)*v,y=Math.cos(p),b=Math.sin(p),w=(i+Math.atan(Math.tan(s)*y))*g,x=Math.cos(w),C=Math.sin(w);A.set(0,0,0),A.addScaledVector(t,C*y),A.addScaledVector(n,x),A.addScaledVector(r,C*b),f.copy(e).addScaledVector(A,o),c.push(f.x,f.y,f.z),u.push(A.x,A.y,A.z),d.push(0,0),m.push(h++)}p.push(m)}let m=p.length-1;for(let o=0;o<m;o++){let e=p[o],t=p[o+1],n=e.length-1;l.push(e[0],t[1],t[0]);for(let r=1;r<=n;r++)l.push(e[r-1],e[r],t[r]),l.push(e[r],t[r+1],t[r])}}this.setIndex(l),this.setAttribute("position",new lK(c,3)),this.setAttribute("normal",new lK(u,3)),this.setAttribute("uv",new lK(d,2))}},Eae=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),r=Object.assign((null==t?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof poe?e.shape:new poe,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)}),ui:r}}static build(e){let t=e.shape,{width:n,height:r,cornerRadius:i,cornerType:o,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,c={x:.5*n,y:.5*r},u={x:-c.x,y:-c.y},d={x:c.x,y:c.y};function h(e,t,i){return t>n&&i>r?Math.min(e*n/t,e*r/i):t>n?e*n/t:i>r?e*r/i:e}let p=[];p[0]=0===i[0]?0:h(i[0],i[0]+i[3],i[0]+i[1]),p[1]=0===i[1]?0:h(i[1],i[1]+i[2],i[1]+i[0]),p[2]=0===i[2]?0:h(i[2],i[2]+i[1],i[2]+i[3]),p[3]=0===i[3]?0:h(i[3],i[3]+i[0],i[3]+i[2]);let A=u.x,f=d.x,m=d.y,g=u.y;t.addPoint(t.createPoint(A,m)),t.addPoint(t.createPoint(f,m)),t.addPoint(t.createPoint(f,g)),t.addPoint(t.createPoint(A,g)),t.isClosed=!0;let v=!0;for(let b=0,w=t.points.length;b<w;b++)t.points[b].roundness=p[b],b>0&&p[b]!==p[b-1]&&(v=!1);v&&(t.roundness=p[0]),t.useCubicForRoundedCorners=1!==o,t.update();let y=Voe.create({shape:t,parameters:{depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(y,{userData:{...e,type:"RectangleGeometry"}})}},Mae=class extends mK{constructor(e=1,t=1,n=1,r=90,i=10,o=24){super(),this.type="BackdropGeometry";let a=[],s=[],l=[],c=.001;0==i&&(o=1),o=Math.max(1,Math.floor(o)),i=Math.min(i,100),r=Math.min(179.999,r),r*=Math.PI/180;let u=[],d=Math.PI/2,h=(e=0,t=0,n=0)=>new jG(e,t,n),p=h(),A=h(),[f,m,g]=[t/2,e/2,n/2],v=-m,y=+m,[b,w,x]=[h(v,-f,+g),h(v,-f,-g),h(v,+f,-g)],C=(e,t=!1)=>Math.sin(e-Math.PI/(+t+1)),S=(e,t=!1)=>Math.cos(e-Math.PI/(+t+1));x.y=Math.sin(r)*t-f;let B=Math.cos(r)*t-g,_=b.z-c;r<=d?(x.z=Math.min(B,_),x.z==_&&(x.y-=(B-_)/Math.tan(d-r))):w.z=Math.min(w.z-B-g,b.z-c),p.subVectors(b,w),A.subVectors(x,w);let E=Math.min(p.length(),A.length())*i/100,M=E*Math.tan(r/2),P=E/Math.cos(r/2),T=p.clone().normalize().add(A.normalize()).setLength(P).add(w);p.set(0,C(r,!0),S(r,!0)),u.push([x,p.clone()]);let D=(Math.PI-r)/o;for(let H=0;H<=o;H++){let e=d+r+H*D;p.set(0,Math.sin(e)*M,Math.cos(e)*M),p.add(T),A.set(0,C(e),S(e)),u.push([p.clone(),A.clone()])}u.push([b,h(0,1,0)]);let F=Math.sin(D/2)*M*2,I=u.length-1,k=u[0][0].distanceTo(u[1][0]),O=k+F*o+u[I-1][0].distanceTo(u[I][0]);u[0].push(1);for(let H=0;H<=o;H++)u[H+1].push(1-(k+H*F)/O);u[I].push(0);let L,R,U,[z,N,j]=u[0];for(let H=1;H<u.length;H++)[L,R,U]=u[H],a.push(v,z.y,z.z,v,L.y,L.z,y,z.y,z.z,y,z.y,z.z,v,L.y,L.z,y,L.y,L.z),s.push(0,N.y,N.z,0,R.y,R.z,0,N.y,N.z,0,N.y,N.z,0,R.y,R.z,0,R.y,R.z),l.push(0,j,0,U,1,j,1,j,0,U,1,U),[z,N,j]=[L,R,U];this.setAttribute("position",new lK(a,3)),this.setAttribute("normal",new lK(s,3)),this.setAttribute("uv",new lK(l,2))}},Pae=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof poe?e.shape:new poe,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,innerRadiusPercent:r,spikes:i,cornerRadius:o,angle:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,u=e.shape,d=.5*t,h=.5*n,p=a*Math.PI/360/i,A=Math.PI/2*3*-1,f=d*r/100,m=h*r/100;if(3===i&&50===r){p=2*Math.PI/i;for(let e=0;e<i;e++){let t=p*e,n=0+Math.sin(t)*d,r=0+Math.cos(t)*h;u.addPoint(u.createPoint(n,r))}}else for(let v=0;v<i;v++){let e=0+Math.cos(A)*d,t=0+Math.sin(A)*h;u.addPoint(u.createPoint(e,t)),A+=p,e=0+Math.cos(A)*f,t=0+Math.sin(A)*m,u.addPoint(u.createPoint(e,t)),A+=p}u.isClosed=!0;for(let v=0,y=u.points.length;v<y;v++)u.points[v].roundness=o;u.roundness=o,u.update();let g=Voe.create({shape:u,parameters:{roundness:o,depth:s,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(g,{userData:{...e,type:"StarGeometry"}})}};var Tae=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+Tae.version}static addUnaryOp(e){return Tae.max_unop_len=Math.max(e.length,Tae.max_unop_len),Tae.unary_ops[e]=1,Tae}static addBinaryOp(e,t,n){return Tae.max_binop_len=Math.max(e.length,Tae.max_binop_len),Tae.binary_ops[e]=t,n?Tae.right_associative.add(e):Tae.right_associative.delete(e),Tae}static addIdentifierChar(e){return Tae.additional_identifier_chars.add(e),Tae}static addLiteral(e,t){return Tae.literals[e]=t,Tae}static removeUnaryOp(e){return delete Tae.unary_ops[e],e.length===Tae.max_unop_len&&(Tae.max_unop_len=Tae.getMaxKeyLen(Tae.unary_ops)),Tae}static removeAllUnaryOps(){return Tae.unary_ops={},Tae.max_unop_len=0,Tae}static removeIdentifierChar(e){return Tae.additional_identifier_chars.delete(e),Tae}static removeBinaryOp(e){return delete Tae.binary_ops[e],e.length===Tae.max_binop_len&&(Tae.max_binop_len=Tae.getMaxKeyLen(Tae.binary_ops)),Tae.right_associative.delete(e),Tae}static removeAllBinaryOps(){return Tae.binary_ops={},Tae.max_binop_len=0,Tae}static removeLiteral(e){return delete Tae.literals[e],Tae}static removeAllLiterals(){return Tae.literals={},Tae}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new Tae(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map((e=>e.length)))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return Tae.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!Tae.binary_ops[String.fromCharCode(e)]||Tae.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return Tae.isIdentifierStart(e)||Tae.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(Tae.hooks[e]){let n={context:this,node:t};return Tae.hooks.run(e,n),n.node}return t}searchHook(e){if(Tae.hooks[e]){let t={context:this};return Tae.hooks[e].find((function(e){return e.call(t.context,t),t.node})),t.node}}gobbleSpaces(){let e=this.code;for(;e===Tae.SPACE_CODE||e===Tae.TAB_CODE||e===Tae.LF_CODE||e===Tae.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=1===e.length?e[0]:{type:Tae.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t,n,r=[];for(;this.index<this.expr.length;)if(t=this.code,t===Tae.SEMCOL_CODE||t===Tae.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())r.push(n);else if(this.index<this.expr.length){if(t===e)break;this.throwError('Unexpected "'+this.char+'"')}return r}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,Tae.max_binop_len),t=e.length;for(;t>0;){if(Tae.binary_ops.hasOwnProperty(e)&&(!Tae.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!Tae.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,n,r,i,o,a,s,l;if(o=this.gobbleToken(),!o||(t=this.gobbleBinaryOp(),!t))return o;for(i={value:t,prec:Tae.binaryPrecedence(t),right_a:Tae.right_associative.has(t)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+t),r=[o,i,a];t=this.gobbleBinaryOp();){if(n=Tae.binaryPrecedence(t),0===n){this.index-=t.length;break}i={value:t,prec:n,right_a:Tae.right_associative.has(t)},l=t;let s=e=>i.right_a&&e.right_a?n>e.prec:n<=e.prec;for(;r.length>2&&s(r[r.length-2]);)a=r.pop(),t=r.pop().value,o=r.pop(),e={type:Tae.BINARY_EXP,operator:t,left:o,right:a},r.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),r.push(i,e)}for(s=r.length-1,e=r[s];s>1;)e={type:Tae.BINARY_EXP,operator:r[s-1].value,left:r[s-2],right:e},s-=2;return e}gobbleToken(){let e,t,n,r;if(this.gobbleSpaces(),r=this.searchHook("gobble-token"),r)return this.runHook("after-token",r);if(e=this.code,Tae.isDecimalDigit(e)||e===Tae.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===Tae.SQUOTE_CODE||e===Tae.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===Tae.OBRACK_CODE)r=this.gobbleArray();else{for(t=this.expr.substr(this.index,Tae.max_unop_len),n=t.length;n>0;){if(Tae.unary_ops.hasOwnProperty(t)&&(!Tae.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!Tae.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=n;let e=this.gobbleToken();return e||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:Tae.UNARY_EXP,operator:t,argument:e,prefix:!0})}t=t.substr(0,--n)}Tae.isIdentifierStart(e)?(r=this.gobbleIdentifier(),Tae.literals.hasOwnProperty(r.name)?r={type:Tae.LITERAL,value:Tae.literals[r.name],raw:r.name}:r.name===Tae.this_str&&(r={type:Tae.THIS_EXP})):e===Tae.OPAREN_CODE&&(r=this.gobbleGroup())}return r?(r=this.gobbleTokenProperty(r),this.runHook("after-token",r)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===Tae.PERIOD_CODE||t===Tae.OBRACK_CODE||t===Tae.OPAREN_CODE||t===Tae.QUMARK_CODE;){let n;if(t===Tae.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==Tae.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===Tae.OBRACK_CODE?(e={type:Tae.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==Tae.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===Tae.OPAREN_CODE?e={type:Tae.CALL_EXP,arguments:this.gobbleArguments(Tae.CPAREN_CODE),callee:e}:(t===Tae.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),e={type:Tae.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),n&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e,t,n="";for(;Tae.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(this.code===Tae.PERIOD_CODE)for(n+=this.expr.charAt(this.index++);Tae.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(e=this.char,"e"===e||"E"===e){for(n+=this.expr.charAt(this.index++),e=this.char,("+"===e||"-"===e)&&(n+=this.expr.charAt(this.index++));Tae.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);Tae.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+n+this.char+")")}return t=this.code,Tae.isIdentifierStart(t)?this.throwError("Variable names cannot start with a number ("+n+this.char+")"):(t===Tae.PERIOD_CODE||1===n.length&&n.charCodeAt(0)===Tae.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:Tae.LITERAL,value:parseFloat(n),raw:n}}gobbleStringLiteral(){let e="",t=this.index,n=this.expr.charAt(this.index++),r=!1;for(;this.index<this.expr.length;){let t=this.expr.charAt(this.index++);if(t===n){r=!0;break}if("\\"===t)switch(t=this.expr.charAt(this.index++),t){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return r||this.throwError('Unclosed quote after "'+e+'"'),{type:Tae.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(Tae.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,Tae.isIdentifierPart(e));)this.index++;return{type:Tae.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],n=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let i=this.code;if(i===e){n=!0,this.index++,e===Tae.CPAREN_CODE&&r&&r>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(i===Tae.COMMA_CODE){if(this.index++,r++,r!==t.length)if(e===Tae.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===Tae.CBRACK_CODE)for(let e=t.length;e<r;e++)t.push(null)}else if(t.length!==r&&0!==r)this.throwError("Expected comma");else{let e=this.gobbleExpression();(!e||e.type===Tae.COMPOUND)&&this.throwError("Expected comma"),t.push(e)}}return n||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(Tae.CPAREN_CODE);if(this.code===Tae.CPAREN_CODE)return this.index++,1===e.length?e[0]:!!e.length&&{type:Tae.SEQUENCE_EXP,expressions:e};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:Tae.ARRAY_EXP,elements:this.gobbleArguments(Tae.CBRACK_CODE)}}},Dae=new class{add(e,t,n){if("string"!=typeof arguments[0])for(let r in arguments[0])this.add(r,arguments[0][r],arguments[1]);else(Array.isArray(e)?e:[e]).forEach((function(e){this[e]=this[e]||[],t&&this[e][n?"unshift":"push"](t)}),this)}run(e,t){this[e]=this[e]||[],this[e].forEach((function(e){e.call(t&&t.context?t.context:t,t)}))}};Object.assign(Tae,{hooks:Dae,plugins:new class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach((e=>{if("object"!=typeof e||!e.name||!e.init)throw new Error("Invalid JSEP plugin format");this.registered[e.name]||(e.init(this.jsep),this.registered[e.name]=e)}))}}(Tae),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),Tae.max_unop_len=Tae.getMaxKeyLen(Tae.unary_ops),Tae.max_binop_len=Tae.getMaxKeyLen(Tae.binary_ops);var Fae=e=>new Tae(e).parse();Object.getOwnPropertyNames(Tae).forEach((e=>{void 0===Fae[e]&&"prototype"!==e&&(Fae[e]=Tae[e])})),Fae.Jsep=Tae;var Iae={name:"ternary",init(e){e.hooks.add("after-expression",(function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let n=t.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let i=this.gobbleExpression();if(i||this.throwError("Expected expression"),t.node={type:"ConditionalExpression",test:n,consequent:r,alternate:i},n.operator&&e.binary_ops[n.operator]<=.9){let r=n;for(;r.right.operator&&e.binary_ops[r.right.operator]<=.9;)r=r.right;t.node.test=r.right,r.right=t.node,t.node=n}}else this.throwError("Expected :")}}))}};Fae.plugins.register(Iae);var kae=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],Oae=["0","1","2","3","4","5","6","7","8","9","."],Lae=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function Rae(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}function Uae(e,t,n="number"){let r,i,o="";for(let a=0;a<e.length;a++){let r=e[a];if("objType"in r&&"api"===r.objType){let e=JSON.parse(r.id),n=e[0],i=t.getUserAPI(n);if(void 0!==i){let t=i.retrieveValue(e.slice(1));void 0!==t&&(o+=t)}}else if("objType"in r&&"webhook"===r.objType){let e=JSON.parse(r.id),[n,i]=e,a=t.getUserWebhook(n);if(void 0!==a){let e=a.getParameterValue(i);void 0!==e&&(o+=e)}}else if("id"in r){let i=e[a-1];if(a>0&&"id"in i)return;let s=t.getVariable(r.id),l=Cte.getDisplayedValue(s);"number"===n&&Cte.isTextValue(s)&&Array.isArray(s.textValue)&&1===s.textValue.length?l=parseFloat(l).toString():"boolean"===n&&Cte.isBoolean(s)?l=s?"true":"false":"boolean"===n&&Cte.isTextValue(s)&&!Array.isArray(s.textValue)&&(l='"'+l+'"'),o+=l}else"string"!==n?"and"!==r.name?"or"!==r.name?"True"!==r.name?"False"!==r.name?"boolean"!==n||Rae(r.name)||Oae.includes(r.name)||kae.includes(r.name)||Lae.includes(r.name.replace(/\($/g,""))?o+=r.name:o+='"'+r.name+'"':o+="false":o+="true":o+="||":o+="&&":('"'!==r.name&&("+"!==r.name||r.escaped)&&(o+=r.name),"+"===r.name&&!r.escaped&&"\\"===o[o.length-1]&&(o=o.slice(0,-1)+r.name))}if("string"===n)return o;if(0===e.length){if("number"===n)return 0;if("boolean"===n)return!1}try{r=Fae(o)}catch(R9){return}try{i=zae(r)}catch(R9){}return i}function zae(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return Number(zae(e.left)===zae(e.right));case"!=":return Number(zae(e.left)!==zae(e.right));case">":return Number(zae(e.left)>zae(e.right));case">=":return Number(zae(e.left)>=zae(e.right));case"<":return Number(zae(e.left)<zae(e.right));case"<=":return Number(zae(e.left)<=zae(e.right));case"+":return zae(e.left)+zae(e.right);case"-":return zae(e.left)-zae(e.right);case"*":return zae(e.left)*zae(e.right);case"/":return zae(e.left)/zae(e.right);case"%":return zae(e.left)%zae(e.right);case"&&":return zae(e.left)&&zae(e.right);case"||":return zae(e.left)||zae(e.right);case"^":return Math.pow(zae(e.left),zae(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-zae(e.argument);case"!":return Number(!zae(e.argument));default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if("Identifier"===e.callee.type){if("random"===e.callee.name){let t=0,n=1;if(e.arguments.length>=1)try{t=zae(e.arguments[0])}catch(w8){}if(e.arguments.length>=2)try{n=zae(e.arguments[1])}catch(w8){}return t=Math.min(n,t),n=Math.max(n,t),t+Math.random()*(n-t)}return Math[e.callee.name].apply(null,e.arguments.map(zae))}throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}Fae.addBinaryOp("^",11,!0);var Nae=new gq,jae=new gq;var Hae=class extends mK{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&1===this.inputs.parameters.extrusion.depth}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&1===e.depth&&function(e,t){let n=2*Math.PI;return(e%n+n)%n==(t%n+n)%n}(e.twist,0)&&e.startScale===e.endScale)}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:n,offset:r}=this.inputs.parameters.extrusion;n=Math.max(0,Math.min(n,1)),r=Math.max(0,Math.min(r,1));let i=this.inputs.path.isClosed?e.length:e.length-1,o=Math.floor(r*i),a=this.inputs.path.isClosed?Math.ceil((n+r)*i):Math.ceil(Math.min(1,n+r)*i),s=Math.min(Math.max(2,a-o+1),i+2),l=[],c=[];for(let I=0;I<s;I++){let n=this.inputs.path.isClosed?(I+o)%e.length:Math.min(I+o,e.length-1);l.push(e[n].clone()),c.push(t[n].clone())}let u=(e,t,n)=>{l[e]=l[e].clone().lerp(l[t],n),c[e]=function(e,t,n){let r=[new jG,new jG,new jG],i=[new jG,new jG,new jG];return e.extractBasis(r[0],r[1],r[2]),t.extractBasis(i[0],i[1],i[2]),r.forEach(((e,t)=>{let r=i[t],o=dG.lerp(e.length(),r.length(),n);e.lerp(r,n).setLength(o)})),(new gq).makeBasis(r[0],r[1],r[2])}(c[e],c[t],n)},d=0,h=r*i%1;(!this.inputs.path.isClosed||n<=1)&&(h||0===r)&&(d=h,u(0,1,d));let p=0,A=(r+n)*i%1;if((this.inputs.path.isClosed&&n<=1||!this.inputs.path.isClosed&&r+n<1)&&A&&(p=A,u(l.length-1,l.length-2,1-p)),0===n){let e=l.length-1;l[e].copy(l[0]),c[e].copy(c[0])}this._applyPathModifiers(c,d,p);let{bevel:f,bevelSides:m}=this.inputs.parameters.extrusion,g=f>0?this.inputs.parameters.extrusion.capType:"flat",v=5;"Custom"===this.inputs.parameters.extrusion.shape.type&&(v="low"===this.inputs.parameters.extrusion.shape.shapeQuality?5:12);let y,{regions:b,infos:w,vertices:x}=this._computeShapePoints(v),C=0;"round"===g&&(y=new joe(this.inputs.shapeData,2*f,f,v,m,void 0,!0),C=y.getAttribute("position").count);let S=0,B=0;w.sort(((e,t)=>e.start-t.start)),w.forEach((e=>{e.verticesStart=S,e.verticesCount=e.continuous.reduce(((e,t,n)=>e+(0!==n&&t?1:2)),0),B+=e.verticesCount,S=B}));let _,E=B*s,M=0;if(this._isOpenEnded()&&"flat"===g){try{_=Ioe({windingRule:ooe.ODD,elementType:aoe.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:b})}catch{_=zoe}M=_.vertexCount}let P=E+2*M+2*C,T=E+2*M,D={positions:new Float32Array(3*P),normals:new Float32Array(3*P),uvs:new Float32Array(2*P)},F=[];if(w.forEach((e=>{this._extrudeRegion(e,x,c,l,D,F,this._isGeometryClosed()&&!this._isOpenEnded())})),_&&(this._closeEnd(_,E,F,D,c[0],l[0],!1),this._closeEnd(_,E+M,F,D,c[c.length-1],l[l.length-1],!0)),y){D.positions.set(y.getAttribute("position").array,3*T),D.normals.set(y.getAttribute("normal").array,3*T),D.uvs.set(y.getAttribute("uv").array,2*T);for(let r=T;r<T+C;r++)D.uvs[2*r+1]=1e-4;let e=F.length;F.push(...y.getIndex().array.map((e=>e+T))),T+=C,D.positions.set(y.getAttribute("position").array,3*T),D.normals.set(y.getAttribute("normal").array,3*T),D.uvs.set(y.getAttribute("uv").array,2*T);let t=F.length;F.push(...y.getIndex().array.map((e=>e+T))),this.setAttribute("position",new oK(D.positions,3)),this.setAttribute("normal",new oK(D.normals,3)),this.setAttribute("uv",new oK(D.uvs,2)),this.setIndex(F);let n=Nae;n.copy(c[c.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(n,T,P),n.copy(c[0]).setPosition(l[0]).multiply(jae.makeScale(1,1,-1)),this.applyMatrix4OnRange(n,T-C,T),this.reverseIndicesOnRange(e,t)}else this.setAttribute("position",new oK(D.positions,3)),this.setAttribute("normal",new oK(D.normals,3)),this.setAttribute("uv",new oK(D.uvs,2)),this.setIndex(F)}_extractPathPoints(){let e=gie(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach((e=>{t[t.length-1].distanceToSquared(e)>.001&&t.push(e)})),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],n=e.length,r=this.inputs.path.isClosed,i=new jG,o=new jG,a=new jG,s=new jG,l=new jG(0,1,0);for(let A=0;A<n;A++){let c,u,d=e[A];c=0===A?r?e[e.length-2]:d.clone().multiplyScalar(2).sub(e[1]):e[A-1],u=A===n-1?r?e[1]:d.clone().multiplyScalar(2).sub(e[A-1]):e[A+1];let h=d.clone().sub(c).normalize(),p=u.clone().sub(d).normalize(),f=h.clone().add(p).normalize();a.copy(f),0===A&&(f.equals(l)||f.clone().negate().equals(l))&&l.set(0,0,1);let m=l.clone().cross(f).normalize(),g=f.clone().cross(m).normalize();l.copy(g),s.copy(m),0===A&&(i.copy(g),o.copy(f));let v=(new gq).makeBasis(m,g,f);t.push(v)}let c=r?o:a,u=r?i:new jG(0,1,0),d=c.clone().cross(s).normalize(),h=Math.acos(u.dot(d));if(isNaN(h))return t;let p=u.clone().cross(d);c.dot(p)>0&&(h*=-1);for(let A=1;A<t.length;A++){let e=(new gq).makeRotationZ(h*A/t.length);t[A].multiply(e)}return t}_applyPathModifiers(e,t,n){let r=e.length,{angle:i,twist:o,startScale:a,endScale:s}=this.inputs.parameters.extrusion,l=new gq,c=new gq;return e.forEach(((e,u)=>{let d=0===u?0:u===r-1?1:(u-t)/(r-(0===n?0:1)-(t+(1-n)));l.makeRotationZ(dG.lerp(i,i+o,d)*dG.DEG2RAD);let h=dG.lerp(a,s,d);c.makeScale(h,h,h),e.multiply(l).multiply(c)})),e}_computeShapePoints(e=12,t=ooe.ODD){let n,r,i=this.inputs.shapeData,o=i.extractShapePointsToFlatArray([],e),a=i.shapeHoles.map((t=>{let n=t.extractShapePointsToFlatArray([],e),r=[];for(let e=n.length-1;e>=1;e-=2){let t=n[e-1],i=n[e-0];r.push(t,i)}return r}));try{n=Ioe({windingRule:t,elementType:aoe.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{n=Roe}try{r=Ioe({windingRule:ooe.ODD,elementType:aoe.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]})}catch{r=Uoe}if(!n)throw new Error("error generating geometry");let s=n.elementCount;if(r){n.elementCount+=r.elementCount;for(let e=0;e<r.elements.length;e++){let t=r.elements[e],i=e%2==0?n.vertexCount:0;n.elements.push(t+i)}for(let e=0;e<r.vertexIndices.length;e++){let t=r.vertexIndices[e],i=n.vertexCount;n.vertexIndices.push(t+i)}for(let e=0;e<r.vertices.length;e++){let t=r.vertices[e];n.vertices.push(t)}}for(let c=0,u=n.vertexCount;c<u;c++){let e=2*c;n.vertices[e+0],n.vertices[e+1]}let l=[];for(let c=n.elementCount-1;c>=0;c--){let e=c>=s,t=2*c,r=n.elements[t+0],o=n.elements[t+1],a=r+o,u={start:r,count:o,normals:[],isHole:e,continuous:[],verticesStart:0,verticesCount:0};l.push(u);let d=r,h=a-1,p=r+1,A=i.roundedCurves.length;do{let t=d-r;n.vertices[2*h+0],n.vertices[2*h+1];let s=n.vertices[2*d+0],l=n.vertices[2*d+1],c=s-n.vertices[2*p+0],f=l-n.vertices[2*p+1],m=Math.sqrt(c*c+f*f);c/=m,f/=m,u.normals[2*t+0]=-f,u.normals[2*t+1]=c;let g=n.vertexIndices[d];if(Array.isArray(g))u.continuous[t]=!1;else{let[e,n]=i.getCurveIndexFromVertexId(g-1,!0);if(n>0&&n<1)u.continuous[t]=!0;else{let r=1===n?e+1:e-1;r=(r+A)%A;let o=1===n?0:1,a=i.roundedCurves[e].getTangent(n),s=i.roundedCurves[r].getTangent(o);u.continuous[t]=a.dot(s)>.95}}e&&(u.normals[2*t+0]*=-1,u.normals[2*t+1]*=-1),[h,d,p]=[d,p,p+1],p>=a&&(p-=o)}while(p!==r+1)}return{regions:[o,...a],infos:l,vertices:n.vertices}}_insertVertex(e,t,n,r,i){let o=2*t,a=3*t;e.positions[a+0]=n.x,e.positions[a+1]=n.y,e.positions[a+2]=n.z,e.normals[a+0]=r.x,e.normals[a+1]=r.y,e.normals[a+2]=r.z,e.uvs[o+0]=i.x,e.uvs[o+1]=i.y}_extrudeRegion(e,t,n,r,i,o,a){let s=new jG,l=new jG,c=new jG,u=new jG,d=new hG;n.forEach(((o,a)=>{let h=r[a],p=e.verticesStart*n.length+e.verticesCount*a;for(let r=0;r<e.count;r++){let A=2*(e.start+r);if(s.set(t[A+0],t[A+1],0),c.copy(s).applyMatrix4(o).add(h),e.continuous[r])u.set(e.normals[2*r+0],e.normals[2*r+1],0);else{let n=0===r?2*(e.start+e.count-1):A-2;l.set(t[n+0],t[n+1],0),u.copy(s).sub(l),u.set(-u.y,u.x,0),e.isHole||u.negate()}if(u.applyMatrix4(o).normalize(),d.set(0===r?1:r/e.count,a/(n.length-1)),this._insertVertex(i,p,c,u,d),p++,!e.continuous[r]||0===r){if(0===r)u.set(e.normals[2*r+0],e.normals[2*r+1],0),d.set(0,a/(n.length-1));else{let n=r===e.count-1?2*e.start:A+2;l.set(t[n+0],t[n+1],0),u.copy(l).sub(s),u.set(-u.y,u.x,0),e.isHole||u.negate()}u.applyMatrix4(o).normalize(),this._insertVertex(i,p,c,u,d),p++}}}));let h=n.length-1;for(let p=0;p<h;p++){let t=e.verticesStart*n.length+e.verticesCount*p,r=e.verticesStart*n.length+e.verticesCount*(p+1),i=0;for(let n=0;n<e.count;n++){(!e.continuous[n]||0===n)&&i++;let a=n===e.count-1?0:i+1,s=t+i,l=t+a,c=r+a,u=r+i;e.isHole?o.push(s,c,l,s,u,c):o.push(s,l,c,s,c,u),i++}}}_closeEnd(e,t,n,r,i,o,a){let s=e.vertexCount,l=new jG(0,0,a?-1:1).applyMatrix4(i),c=new jG,u=new hG;for(let h=0;h<s;h++){let n=2*h;c.set(e.vertices[n+0],e.vertices[n+1],0).applyMatrix4(i).add(o),this._insertVertex(r,t+h,c,l,u)}let d=e.elements;for(let h=0;h<e.elementCount;h++){let e=3*h,r=d[e+0]+t,i=d[e+(a?1:2)]+t,o=d[e+(a?2:1)]+t;n.push(r,i,o)}}applyMatrix4OnRange(e,t,n){let r,i,o,a,s=e.elements,l=(new pG).getNormalMatrix(e).elements,c=this.attributes.position,u=this.attributes.normal;if(!c||!u)return;let d=c.array,h=u.array,p=c.itemSize;for(let A=t*p,f=n*p;A<f;A+=p)r=d[A+0],i=d[A+1],o=d[A+2],a=1/(s[3]*r+s[7]*i+s[11]*o+s[15]),d[A+0]=(s[0]*r+s[4]*i+s[8]*o+s[12])*a,d[A+1]=(s[1]*r+s[5]*i+s[9]*o+s[13])*a,d[A+2]=(s[2]*r+s[6]*i+s[10]*o+s[14])*a,r=h[A+0],i=h[A+1],o=h[A+2],h[A+0]=l[0]*r+l[3]*i+l[6]*o,h[A+1]=l[1]*r+l[4]*i+l[7]*o,h[A+2]=l[2]*r+l[5]*i+l[8]*o;c.needsUpdate=!0,u.needsUpdate=!0}reverseIndicesOnRange(e,t){let n=this.index;if(n){for(let r=e;r<t;r+=3){let e=n.getX(r),t=n.getX(r+1),i=n.getX(r+2);n.setXYZ(r,i,t,e)}n.needsUpdate=!0}}};function Qae(){let e=new mK;return e.setAttribute("position",new oK(new Float32Array([]),3)),e.setIndex(new oK(new Uint16Array([]),1)),e}var Vae=Qae().attributes,Wae=class extends mK{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,Vae),this.userData={parameters:e,type:"TextGeometry"};let n=t.getFont(e.font);(null==n?void 0:n.isLoaded)?(this.font=n,this.update(e)):this.updateFont(e.font,t).then((()=>{this.update(e),null==t||t.requestRender()}))}async updateFont(e,t){let n=t.getFont(e);n&&(this.font=n,await n.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(null==t?void 0:t.isLoaded))return;let{width:n,height:r,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a,text:s,textTransform:l}=e,c=Cte.getDisplayedValue(s),u=function(e,t,n){let r=[""],i="";for(let o of n)i+=o," "===o||"\n"===o?(r[r.length-1]+=i,i="","\n"===o&&r.push("")):t.getTextWidth(r[r.length-1]+i,e)>e.width&&(r[r.length-1].length&&r.push(""),t.getTextWidth(r[r.length-1]+i,e)>e.width&&(1===i.length?(r[r.length-1]+=i,i=""):(r[r.length-1]+=i.slice(0,-1),i=i[i.length-1],r.push(""))));return r[r.length-1]+=i,r}(e,t,2===l?c.toUpperCase():3===l?c.toLowerCase():c),{shapes:d,charWidths:h,charCoords:p}=t.generateShapes(u,e),A=.5*("number"==typeof n?n:1),f=.5*("number"==typeof r?r:1),m=d.map((e=>(new poe).fromShape(e,!0)));this.vectorShapes=m;let g=m.map((e=>Voe.create({shape:e,parameters:{depth:i,extrudeBevelSegments:a,extrudeBevelSize:o,windingRule:i<=0?ooe.NONZERO:ooe.ODD,subdivisions:this.isLowResolution&&i>0?1:12}}))),v=g.length?yne(g):Qae();v.translate(-A,f,0),this.dispose(),this.wrappedText=u,this.charCoords=p,this.charWidths=h,this.deleteAttribute("extrudeNormal"),Object.entries(v.attributes).forEach((([e,t])=>{this.setAttribute(e,t)})),this.setIndex(v.index),this.computeBoundingSphere()}clone(){let e=I6(new mK,Wae.prototype);return e.copy(this),e}copy(e){return Object.entries(e.attributes).forEach((([e,t])=>{this.setAttribute(e,t)})),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:{textValue:e}})}get text(){return this.userData.parameters.text??""}};var Gae,qae,Kae=new Promise((e=>{Gae=e})),Yae=!1;function Xae(){if(!Yae)return qae||(qae=async function(){let e=nF((()=>import("./process-lGjCclSZ.js")),[]),[t,n]=await Promise.all([e,fetch("https://unpkg.com/@splinetool/modelling-wasm@1.9.21/build/process.wasm").then((e=>e.arrayBuffer()))]),r=t.default,i=await r({wasmBinary:n});Gae(i),Yae=!0}(),qae)}var $ae=["font"];function Jae(e,t,n,r){var i,o;let a,s,l;"PathGeometry"===e.type?(s=JSON.parse(JSON.stringify(e)),l=[[],["extrusion"]]):(s={...e},l=[[]]);for(let d of l){let e=s;for(let t of d)e=e[t];for(a in e){let n=e[a];dee(n)&&!$ae.includes(a)&&(e[a]=t.getVariable(n,[r.uuid,"geometry",...d,a]),dee(e[a])&&(e[a]=1))}}let c,u={parameters:s,type:s.type};if("PathGeometry"===s.type)u.path=s.path;else if("VectorGeometry"===s.type){let e=poe.createFromState(s.shape,s.width,s.height);u.shape=e}else if("NonParametricGeometry"===s.type){if(s.data.groups&&(null==(i=s.data.groups)||i.forEach((e=>e.materialIndex=Math.max(e.materialIndex??0,0)))),u.geometry=(new t0).parse(s),0===u.geometry.groups.length){let e=u.geometry;e.addGroup(0,Math.max((null==(o=e.getIndex())?void 0:o.count)??0,e.getAttribute("position").count),0)}}else{if("SubdivGeometry"===s.type){let t=new sse(s,n);return t.data=e,t}if("TextGeometry"===s.type)return new Wae(s,t);if("InputGeometry"===s.type)return new Wae(s,t);if("UIGeometry"===s.type)return Eae.create({parameters:{width:s.width,height:s.height,cornerRadius:s.cornerRadius,cornerType:s.cornerType}})}try{c=Dse(u)}catch(J9){}if(!c){let e=poe.createFromState(Dee.defaultData(),100,100);u.shape=e,c=Dse(u)}return c}var Zae=new gq;function ese(e,t,n,r){let i,o,a,s=e.position.array,l=e.normal.array,c=Zae.makeScale(t,n,r).invert().elements;for(var u=0,d=s.length;u<d;u+=3)s[u]*=t,s[u+1]*=n,s[u+2]*=r,i=l[u],o=l[u+1],a=l[u+2],l[u]=c[0]*i+c[4]*o+c[8]*a,l[u+1]=c[1]*i+c[5]*o+c[9]*a,l[u+2]=c[2]*i+c[6]*o+c[10]*a;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var tse,nse=new VG,rse=new jG;Kae.then((e=>{tse=e}));var ise=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),ose=new Uint32Array([0,1,2,3]),ase=new Uint8Array([4]),sse=class extends mK{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let n=this.data.scaleBaked,r=Q9.div(t,n);this.subdividedGeometry&&ese(this.subdividedGeometry.attributes,...r),this.originalGeometry&&ese(this.originalGeometry.attributes,...r),this.data=e;let i=this.userData.parameters;this.userData.parameters={width:i.width*r[0],height:i.height*r[1],depth:i.depth*r[2]},this.originalGeometry.boundingSphere.center.multiply(rse.fromArray(r));let o=rse.set(i.width,i.height,i.depth).length();this.originalGeometry.boundingSphere.radius=o/2}ensureSubdivPointer(){return 0===this.subdivPointer&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,n;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:n}=sse.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new FK(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let r=this.subdividedGeometry??this.originalGeometry;Object.assign(this,r),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(sse.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new lq,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,n=e.boundingSphere.center;nse.setFromBufferAttribute(t),nse.getCenter(n),e.boundingSphere.radius=n.distanceTo(nse.max),isNaN(e.boundingSphere.radius),nse.getSize(rse);let r={width:rse.x,height:rse.y,depth:rse.z};return this.userData.parameters=r,r}static build(e,t,n,r){let i,o,a,s=(null==e?void 0:e.phongAngle)??35;!1===n&&(s=-1),t&&(tse.free_bvh(t),tse.free_subdivision_surface(t));try{i=sse.allocate(e,r)}catch(l){i=sse.allocate({positionWASM:ise,indexWASM:ose,verticesPerFaceWASM:ase},r)}if(tse.set_destination_refinement_level(i,0),o=sse.buildLevel(i,!0,s),e.subdivisions>0)try{tse.set_destination_refinement_level(i,e.subdivisions),a=sse.buildLevel(i,!1,s)}catch{try{tse.set_destination_refinement_level(i,e.subdivisions-1),a=sse.buildLevel(i,!1,s)}catch{a=null}}else a=null;return{subdivPointer:i,originalGeometry:o,subdividedGeometry:a}}static primitiveToQuads(e,t,n){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),"DodecahedronGeometry"===e.type&&(e.detail=0);let r,i,o,a,s,l,c=void 0!==e.shape||void 0!==e.path?t.geometry:Jae(e,n,!1);if(r="TorusGeometry"===e.type&&e.arc===2*Math.PI?c.getClosedTorusIndicesForBooleanOrSubdiv():c.getIndex(),({positions:i,triIndices:s}=cse(c.getAttribute("position"),r)),"CylinderGeometry"===e.type&&0===e.cornerRadius&&0===e.hollow&&!1===e.openEnded){let t=e.radialSegments*e.heightSegments*3*2;l=[t,t+3*e.radialSegments]}return({indices:o,verticesPerFace:a}=Ase(i,s,c,l)),{positions:i,indices:o,verticesPerFace:a}}static allocate(e,t){var n;let r,i,o,a=[],s=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,o=e.verticesPerFaceWASM):(r=ise,i=ose,o=ase);let l,c=r.length,u=i.length,d=o.length,h=r.length+a.length+s.length,p=i.length+o.length,A=h*Float32Array.BYTES_PER_ELEMENT+p*Uint32Array.BYTES_PER_ELEMENT,f=h*Float32Array.BYTES_PER_ELEMENT,m=tse._malloc(A),g=new Float32Array(tse.HEAPF32.buffer,m,h),v=new Uint32Array(tse.HEAPU32.buffer,m+f,p);g.set(r,0),g.set(a,r.length),g.set(s,r.length+a.length),v.set(i,0),v.set(o,i.length),(null==(n=null==e?void 0:e.scaleBaked)?void 0:n.some((e=>1!==e)))&&(l=(new gq).makeScale(...e.scaleBaked)),t&&(l?l.premultiply(t):l=t);let y=l?tse.alloc_subdivision_surface2(m,c,m+f,u,m+f+i.length*Uint32Array.BYTES_PER_ELEMENT,d,l.elements):tse.alloc_subdivision_surface(m,c,m+f,u,m+f+i.length*Uint32Array.BYTES_PER_ELEMENT,d);return tse._free(m),y}static buildLevel(e,t,n,r,i){let o=i?tse.get_mesh_data2(e,t?tse.Level.CONTROL:tse.Level.REFINED,n,i.elements):tse.get_mesh_data(e,t?tse.Level.CONTROL:tse.Level.REFINED,n),a=tse.HEAPU32.subarray(o>>2,8+(o>>2)),s=a.subarray(4,8),l=0,c=tse.HEAPU32[a[l]>>2],u=tse.HEAPF32.subarray(c>>2,(c>>2)+s[l]);l++;let d=tse.HEAPU32[a[l]>>2],h=tse.HEAPF32.subarray(d>>2,(d>>2)+s[l]);l++;let p=tse.HEAPU32[a[l]>>2],A=tse.HEAPU32.subarray(p>>2,(p>>2)+s[l]);l++;let f=tse.HEAPU32[a[l]>>2],m=tse.HEAPU32.subarray(f>>2,(f>>2)+s[l]);if(l++,void 0===r){let e=new mK;if(e.setIndex(new sK(m,1)),e.setAttribute("position",new lK(u,3)),e.setAttribute("normal",new lK(h,3)),t){e.setAttribute("faceMap",new sK(A,1));let t=new Float32Array(h.length/3*4).fill(0);e.setAttribute("color",new oK(t,4))}return tse.free_mesh_data(o),e.userData.type="SubdivGeometry",e}r.getAttribute("position").copyArray(u),r.getAttribute("normal").copyArray(h),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,tse.free_mesh_data(o)}static freeSubdivPointer(e){tse.free_bvh(e),tse.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,n){let r=tse.get_wireframe_data_for_base_level(e),i=tse.HEAPU32.subarray(r>>2,4+(r>>2)),o=i.subarray(2,4),a=0,s=tse.HEAPU32[i[a]>>2],l=tse.HEAPF32.subarray(s>>2,(s>>2)+o[a]);a++;let c=tse.HEAPU32[i[a]>>2],u=tse.HEAPU32.subarray(c>>2,(c>>2)+o[a]);if(void 0===t){let e=new mK;e.setAttribute("position",new lK(l,3));let t=new Float32Array(l.length);for(let r=0,i=l.length;r<i;)t[r++]=n.r,t[r++]=n.g,t[r++]=n.b;return e.setAttribute("color",new oK(t,3)),e.setIndex(new sK(u,1)),tse.free_wireframe_data_for_base_level(r),e}t.getAttribute("position").copyArray(l),t.attributes.position.needsUpdate=!0,tse.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,n){let r=0===t;r||tse.set_destination_refinement_level(e,t);let i=n?tse.get_topological_data2(e,r?tse.Level.CONTROL:tse.Level.REFINED,n.elements):tse.get_topological_data(e,r?tse.Level.CONTROL:tse.Level.REFINED),o=tse.HEAPU32.subarray(i>>2,6+(i>>2)),a=o.subarray(3,6),s=0,l=tse.HEAPU32[o[s]>>2],c=new Float32Array(tse.HEAPF32.subarray(l>>2,(l>>2)+a[s]));s++;let u=tse.HEAPU32[o[s]>>2],d=new Uint32Array(tse.HEAPU32.subarray(u>>2,(u>>2)+a[s]));s++;let h=tse.HEAPU32[o[s]>>2],p=new Uint8Array(tse.HEAPU32.subarray(h>>2,(h>>2)+a[s]));return tse.free_topological_data(i),{positions:c,indices:d,verticesPerFace:p}}},lse=["getX","getY","getZ"];function cse(e,t){let n={},r=t?t.count:e.count,i=0,o=[],a=[];for(let l=0;l<r;l++){let r=t?t.getX(l):l,s="";for(let t=0;t<3;t++)s+=~~(1e4*e[lse[t]](r))+",";if(s in n)o.push(n[s]);else{for(let t=0;t<3;t++)a.push(e[lse[t]](r));n[s]=i,o.push(i),i++}}let s=[];for(let l=0;l<o.length;l+=3)o[l]===o[l+1]||o[l]===o[l+2]||o[l+1]===o[l+2]||s.push(o[l],o[l+1],o[l+2]);return{positions:a,triIndices:s}}var use=new jG,dse=new jG,hse=new jG,pse=new jG;function Ase(e,t,n,r){let i=[],o=[];if(void 0!==n.userData.shape&&0===n.userData.parameters.depth&&0===n.userData.shape.shapeHoles.length){let t=n.userData.shape.extractShapePointsToFlatArray([]),r=n.userData.parameters.spikes;if("EllipseGeometry"===n.userData.type&&r<=24&&r%4==0&&n.userData.parameters.angle>=360){let e=t.length/2/r;t=t.filter(((t,n)=>Math.floor(n/2)%e==0))}let a=0;for(let e=0;e<t.length;e+=2)a+=(t[e]-t[(0===e?t.length:e)-2])*(t[e+1]+t[(0===e?t.length:e)-1]);e.length=0;let s=0;if(a<0)for(let n=0;n<t.length;n+=2)e.push(t[n],t[n+1],0),i.push(s++);else for(let n=t.length-2;n>=0;n-=2)e.push(t[n],t[n+1],0),i.push(s++);return o.push(s),{indices:i,verticesPerFace:o}}let a=new Float32Array([n.userData.parameters.depth])[0],s=0;for(;s<t.length;){if(n.useNgonForTopBottomFaceDuringBake){let n=0;if((e[3*t[s]+2]===a||0===e[3*t[s]+2])&&n++,(e[3*t[s+1]+2]===a||0===e[3*t[s+1]+2])&&n++,(e[3*t[s+2]+2]===a||0===e[3*t[s+2]+2])&&n++,3===n)break}if(t[s+1]===t[s+3]&&t[s+2]===t[s+5]||t[s+0]===t[s+3]&&t[s+2]===t[s+4]){use.set(e[3*t[s]],e[3*t[s]+1],e[3*t[s]+2]),dse.set(e[3*t[s+1]],e[3*t[s+1]+1],e[3*t[s+1]+2]),hse.set(e[3*t[s+4]],e[3*t[s+4]+1],e[3*t[s+4]+2]),pse.set(e[3*t[s+5]],e[3*t[s+5]+1],e[3*t[s+5]+2]),dse.sub(use).normalize(),hse.sub(use).normalize(),pse.sub(use).normalize();let n=dse.cross(hse).dot(pse);Math.abs(n)>.005||r&&r.some(((e,t)=>t%2!=1&&(s>=r[t]&&s<r[t+1])))?(i.push(t[s],t[s+1],t[s+2]),o.push(3),s+=3):(i.push(t[s],t[s+1],t[s+4],t[s+5]),o.push(4),s+=6)}else i.push(t[s],t[s+1],t[s+2]),o.push(3),s+=3}if(n.useNgonForTopBottomFaceDuringBake){let t=[],r=[],s=0;for(let n=0,i=0;n<e.length;n+=3,i++)0===e[n+2]&&(t.push(i),s++),e[n+2]===a&&r.push(i);if(0===n.userData.parameters.extrudeBevelSize){let e=r[0];r[0]=r[1],r[1]=e}t.reverse(),i.push(...t,...r),o.push(s,s)}return{indices:i,verticesPerFace:o}}var fse={};((e,t)=>{for(var n in t)rQ(e,n,{get:t[n],enumerable:!0})})(fse,{calcBoolean:()=>Bse,calcBooleanTopological:()=>Sse,freeMeshSet:()=>Pse,getMeshSet:()=>_se,hasOpenEdges:()=>Ese,transformMeshSet:()=>Mse});var mse,gse,vse,yse,bse=new Promise((e=>{mse=e}));function wse(){if(gse)return gse;return gse=async function(){let e=nF((()=>import("./boolean-Do0-4Ogh.js")),[]),[t,n]=await Promise.all([e,fetch("https://unpkg.com/@splinetool/boolean-wasm@1.9.21/build/boolean.wasm").then((e=>e.arrayBuffer()))]),r=t.default,i=await r({wasmBinary:n});mse(i)}(),gse}function xse(e){let t=e.length,n=t*Uint32Array.BYTES_PER_ELEMENT,r=t*Float32Array.BYTES_PER_ELEMENT,i=Number.isInteger(e[0])?n:r,o=vse._malloc(i);return(Number.isInteger(e[0])?new Uint32Array(vse.HEAPU32.buffer,o,t):new Float32Array(vse.HEAPF32.buffer,o,t)).set(e,0),o}function Cse(e){switch(e){case 0:return vse.OP.UNION;case 1:return vse.OP.INTERSECTION;case 2:return vse.OP.A_MINUS_B;case 3:return vse.OP.B_MINUS_A;case 4:return vse.OP.SYMMETRIC_DIFFERENCE;case 5:return vse.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function Sse(e,t){void 0===yse&&(yse=vse.init_csg());let n=xse(e),r=vse.csg_calc_topological(yse,n,e.length,Cse(t));vse._free(n);let i=vse.HEAPU32.subarray(r>>2,6+(r>>2)),o=i.subarray(3,6),a=0,s=vse.HEAPU32[i[a]>>2],l=new Float32Array(vse.HEAPF32.subarray(s>>2,(s>>2)+o[a]));a++;let c=vse.HEAPU32[i[a]>>2],u=new Uint32Array(vse.HEAPU32.subarray(c>>2,(c>>2)+o[a]));a++;let d=vse.HEAPU32[i[a]>>2],h=new Uint8Array(vse.HEAPU32.subarray(d>>2,(d>>2)+o[a]));return vse.free_mesh_data(r),{positions:l,indices:u,verticesPerFace:h}}function Bse(e,t,n,r){void 0===yse&&(yse=vse.init_csg());let i=xse(e),o=vse.csg_calc(yse,i,e.length,r,Cse(t));vse._free(i);let a=vse.HEAPU32.subarray(o>>2,5+(o>>2)),s=a.subarray(2,5),l=0,c=vse.HEAPU32[a[l]>>2],u=vse.HEAPF32.subarray(c>>2,(c>>2)+s[l]);l++;let d=vse.HEAPU32[a[l]>>2],h=vse.HEAPF32.subarray(d>>2,(d>>2)+s[l]);l++;let p=s[l];n.setAttribute("position",new lK(u,3)),n.setAttribute("normal",new lK(h,3));let A=vse.HEAPF32.subarray(5+(o>>2),5+(o>>2)+6);return null===n.boundingSphere&&(n.boundingSphere=new lq),n.boundingSphere.center.set(A[0],A[1],A[2]),n.boundingSphere.radius=(A[3]**2+A[4]**2+A[5]**2)**.5,n.userData.parameters={width:2*A[3],height:2*A[4],depth:2*A[5]},vse.free_mesh_data(o),p}function _se(e,t,n){if(void 0===vse)return-1;let r,i,o;if(t&&void 0!==e.userData.positions){let t=e.userData;o=t.verticesPerFace.length,r=t.positions,i=Array(t.verticesPerFace.reduce(((e,t)=>e+t),0)+o);for(let e=0,n=0,r=0;e<t.verticesPerFace.length;e++){i[r++]=t.verticesPerFace[e];for(let o=0;o<t.verticesPerFace[e];o++)i[r++]=t.indices[n++]}}else({positions:r,faceIndices:i,nFaces:o}=function(e,t,n){let r,i;i="TorusGeometry"===e.userData.parameters.type&&e.userData.parameters.arc===2*Math.PI?e.getClosedTorusIndicesForBooleanOrSubdiv():e.getIndex();let o,{positions:a,triIndices:s}=cse(e.getAttribute("position"),i);if(t&&n){let{indices:t,verticesPerFace:n}=Ase(a,s,e);o=n.length,r=[];for(let e=0,i=0;e<o;e++){r.push(n[e]);for(let o=0;o<n[e];o++)r.push(t[i++])}}else{let e=s.length;r=Array(e+e/3),o=0;for(let t=0,n=0;n<r.length;)r[n++]=3,o++,r[n++]=s[t++],r[n++]=s[t++],r[n++]=s[t++]}return{positions:a,faceIndices:r,nFaces:o}}(e,t,n));let a=r.length,s=i.length,l=r.length,c=i.length,u=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,d=l*Float32Array.BYTES_PER_ELEMENT,h=vse._malloc(u),p=new Float32Array(vse.HEAPF32.buffer,h,l),A=new Uint32Array(vse.HEAPU32.buffer,h+d,c);p.set(r,0),A.set(i,0);let f=vse.get_csg_mesh(h,a,h+d,s,o);return vse._free(h),f}function Ese(e){return vse.has_open_edges(e)}function Mse(e,t){vse.transform_csg_mesh(e,t.elements)}function Pse(e){vse.free_csg_mesh(e)}bse.then((e=>vse=e));var Tse={ConeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return n.thetaLength=dG.clamp(n.thetaLength,0,360),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let t,{width:n,depth:r,height:i,radialSegments:o,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c,cornerRadiusTop:u,cornerRadiusBottom:d,cornerSegments:h}=e.parameters;return 0===c?(t=new mK,t.setAttribute("position",new lK([],3))):t=u>0||d>0||c<360?new Eie(0,n/2,i,o,a,s,l,c*Math.PI/180,u,d,h,0,!0):new MJ(n/2,i,o,a,s),t.scale(1,1,r/n),Object.assign(t,{userData:{...e,type:"ConeGeometry"}})}},CubeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let t,{width:n,height:r,depth:i,widthSegments:o,heightSegments:a,depthSegments:s,cornerRadius:l,cornerSegments:c}=e.parameters;return t=0===l?new FK(n,r,i,o,a,s):new Pie(n,r,i,o,a,s,l,c),Object.assign(t,{userData:{...e,type:"CubeGeometry"}})}},CylinderGeometry:Sie,DodecahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:r,detail:i,corner:o,cornerSides:a}=e.parameters,s=0===i&&0!==o?new Die(.5*t,o,a):new TJ(.5*t,i);return s.scale(1,n/t,r/t),Object.assign(s,{userData:{...e,type:"DodecahedronGeometry"}})}},EllipseGeometry:Goe,HelixGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),r=Math.abs(n.width),i=Math.abs(n.height??r),o=Math.abs(n.depth??r),a=Math.abs(Math.min(r,o))/2;return{parameters:Object.assign(n,{width:r,height:i,depth:o,radius:a,segments:Math.round(n.segments),pathSegments:Math.round(n.pathSegments),cornerSegments:Math.round(n.cornerSegments)})}}static build(e){let{width:t,height:n,depth:r,radius:i,revolutions:o,segments:a,pathRadius:s,pathType:l,pathSegments:c,cornerRadius:u,cornerSegments:d}=e.parameters,h=new eae(!1,t,n,r,i,o,a,s,l,c,u,d);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},IcosahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:r,detail:i,corner:o,cornerSides:a}=e.parameters,s=0===i&&0!==o?new tae(.5*t,o,a):new aZ(.5*t,i);return s.scale(1,n/t,r/t),Object.assign(s,{userData:{...e,type:"IcosahedronGeometry"}})}},LatheGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n;((null==(n=e.parameters)?void 0:n.points)??[]).forEach((e=>{Array.isArray(e)&&(e.x=e[0],e.y=e[1])}));let r=Object.assign({},(null==t?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:n,verticalSegments:r}=e.parameters,i=new DJ;i.moveTo(t[0].x,t[0].y),i.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let o=new _J(i.extractPoints(r).shape,n);return o.rotateZ(Math.PI),Object.assign(o,{userData:{...e,type:"LatheGeometry"}})}},NonParametricGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n,r=e.geometry??(null==t?void 0:t.geometry)??(new mK).copy(new FK(100,100,100));void 0===t?(r.computeBoundingBox(),r.boundingBox.getSize(wae),n={width:wae.x,height:wae.y,depth:wae.z,subdivisions:0}):n=t.parameters;let i={...n,...e.parameters};return{parameters:{width:Math.abs(i.width),height:Math.abs(i.height),depth:Math.abs(i.depth),subdivisions:Math.abs(i.subdivisions)},geometry:r}}static build(e){let{width:t,height:n,depth:r,subdivisions:i}=e.parameters,o=e.geometry??(new mK).copy(new FK(100,100,100)),a=o.userData.parameters;void 0===a?(o.computeBoundingBox(),o.boundingBox.getSize(wae)):wae.set(a.width,a.height,a.depth),(t!==wae.x||n!==wae.y||r!==wae.z)&&o.scale(0===wae.x?1:t/wae.x,0===wae.y?1:n/wae.y,0===wae.z?1:r/wae.z);let s=o.originalGeometry;try{i>0?(void 0===s||(null==a?void 0:a.subdivisions)!==i)&&(void 0===s&&(s=o),o=new bae(i).modify(s).toBufferGeometry()):(void 0!==s&&(o=s),s=void 0,void 0===o.getAttribute("normal")&&o.computeVertexNormals())}catch{void 0!==s&&(o=s),s=void 0,void 0===o.getAttribute("normal")&&o.computeVertexNormals()}return void 0!==s&&Object.assign(o,{originalGeometry:s}),delete e.geometry,Object.assign(o,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,n){new t0(n).load(e,(e=>{let n=this.normalizeInputs({geometry:e});e.boundingBox.getSize(wae);let r=100/wae.x;Object.assign(n.parameters,{width:100,height:wae.y*r,depth:wae.z*r}),t(this.build(n))}))}},PolygonGeometry:xae,PyramidGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:r,radialSegments:i,heightSegments:o,openEnded:a,cornerRadius:s,cornerSegments:l}=e.parameters,c=new _ae(.5*t,n,i,o,a,s,l);return c.scale(1,1,r/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}},RectangleGeometry:Eae,SphereGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return n.thetaLength=dG.clamp(n.thetaLength,0,180),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let t,{width:n=100,height:r=n,depth:i=n,widthSegments:o=64,heightSegments:a=64,phiStart:s,phiLength:l,thetaStart:c,thetaLength:u}=e.parameters;return 0===u?(t=new mK,t.setAttribute("position",new lK([],3))):t=new sZ(.5*n,o,a,s,l,c,u*dG.DEG2RAD),t.scale(1,r/n,i/n),Object.assign(t,{userData:{...e,type:"SphereGeometry"}})}},PlaneGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:0})}}static build(e){let{width:t=100,height:n=t,widthSegments:r=8,heightSegments:i=8}=e.parameters,o=new ZK(t,n,r,i);return o.scale(1,1,1),Object.assign(o,{userData:{...e,type:"PlaneGeometry"}})}},BackdropGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:r,angle:i,cornerRadius:o,cornerSegments:a}=e.parameters,s=new Mae(t,n,r,i,o,a);return Object.assign(s,{userData:{...e,type:"BackdropGeometry"}})}},StarGeometry:Pae,TextFrameGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n}=e.parameters,r=new ZK(t,n);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},TorusGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),r=Math.abs(n.width),i=Math.abs(n.height??n.width),o=Math.round(Math.abs(n.depth??.25*n.width));return{parameters:Object.assign(n,{width:r,height:i,depth:o})}}static build(e){let{width:t,height:n,depth:r,radialSegments:i,tubularSegments:o,arc:a,cornerRadius:s,cornerSegments:l}=e.parameters,c=function(e,t,n,r,i,o,a,s,l,c,u){[t,n]=[n,t],a=t/2;let d=dG.clamp(i/360,0,1);if(0===d){let e=new mK;return e.setAttribute("position",new lK([],3)),e}return 1===d&&(c=0),new eae(!0,e,t,n,r,d,o,a,s,l,c,u)}(t,n,r,.5*t,a,o,0,0,i,s,l);return c.scale(1,n/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}},TorusKnotGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),tube:n.tube??.125*n.width})}}static build(e){let{width:t,tube:n,tubularSegments:r,radialSegments:i,p:o,q:a}=e.parameters,s=.5*t;s!==n&&(s-=n);let l=new cZ(s,n,r,i,o,a);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},TriangleGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof poe?e.shape:new poe,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width*(n.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t=100,height:n,cornerRadius:r,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a,isRect:s}=e.parameters,l=e.shape,c=.5*t,u=.5*n;s?(l.addPoint(l.createPoint(-c,u)),l.addPoint(l.createPoint(c,-u)),l.addPoint(l.createPoint(-c,-u))):(l.addPoint(l.createPoint(0,u)),l.addPoint(l.createPoint(c,-u)),l.addPoint(l.createPoint(-c,-u))),l.isClosed=!0;for(let h=0,p=l.points.length;h<p;h++)l.points[h].roundness=r;l.roundness=r,l.update();let d=Voe.create({shape:l,parameters:{roundness:r,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(d,{userData:{...e,type:"TriangleGeometry"}})}},PathGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},(null==t?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),r=Math.abs(n.width),i=Math.abs(n.height??n.width),o=Math.abs(n.depth??0),a=(null==t?void 0:t.shapeData)??Goe.create({parameters:Lee}).userData.shape;return{path:e.path??Fee.defaultData(),parameters:Object.assign(n,{width:r,height:i,depth:o,extrusion:{...jee,...n.extrusion}}),shapeData:a}}static build(e){if(e.path.points.length>=2){let t=new Hae(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}return Object.assign(new mK,{userData:{...e,type:"PathGeometry"}})}},VectorGeometry:Voe},Dse=e=>Tse[e.type].create(e);function Fse(e){return null!==e&&"booleanOp"in e}var Ise=class extends(Cie(TK)){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new gq}updateVisible(e){super.updateVisible(e),this.visible=!Fse(this.parent)&&this.visible,Fse(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){-1!==this.booleanMeshSetAddress&&(fse.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Fse(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof Ise&&(e.freeBooleanPointer(),Fse(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let n=super.updateTransformState(e,t);return n&&Fse(this.parent)&&this.invalidateDownstreamBooleanData(!0),n}onVariableUpdate(e=!1){super.onVariableUpdate(e),Fse(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},kse=new VG;function Ose(e,t=0,n=e.count,r,i){let o=1/0,a=1/0,s=1/0,l=-1/0,c=-1/0,u=-1/0;for(let d=t;d<n;d++){let t=e.getX(d),n=e.getY(d),r=e.getZ(d);t<o&&(o=t),n<a&&(a=n),r<s&&(s=r),t>l&&(l=t),n>c&&(c=n),r>u&&(u=r)}kse.min.set(o,a,s),kse.max.set(l,c,u),kse.getCenter(r),kse.getSize(i).multiplyScalar(.5)}var Lse=new mK,Rse=new nK,Use=class extends Ise{constructor(e,t){super(Lse,Rse),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?Ose(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},zse=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},null===zse.uuidContext)throw new Error("plz startContext");zse.uuidContext===zse.globalContext?this.uuid="_gid"+zse.uuidContext.nodeContextUuid++:this.uuid="_uid"+zse.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){(null===this.uuidContext||this.uuidContext===zse.globalContext)&&(this.uuidContext=e)}static endContext(e){this.uuidContext,this.uuidContext=null}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,n){return n=n??{},this.analyze(e,n),this.flow(e,t,n)}flow(e,t,n){n=n??{},e.addFlow(n.slot,n.cache,n.context);let r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,t,n){t=t??this.getType(e,t);let r=e.getNodeData(n??this);return e.analyzing&&this.appendDepsNode(e,r,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)}updateFrame(e){}generateReadonly(e,t,n,r,i,o){return""}generate(e,t,n,r,i){return""}parse(e,t,n,r){}appendDepsNode(e,t,n){t.deps=(t.deps||0)+1;let r=e.getTypeLength(n);(r>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=r,t.output=n)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type}},Nse=zse;Nse.globalContext={nodeContextUuid:0},Nse.uuidContext=zse.globalContext;var jse=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Hse=new class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,n){n=void 0===n||n,this.keywords[e]={callback:t,cache:n}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return void 0!==this.nodes[e]}containsKeyword(e){return void 0!==this.keywords[e]}},Qse=class extends Nse{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}build(e,t,n,r){if(t=t??this.getType(e),this.getShared(e,t)){let i=this.getUnique(e,t);i&&void 0===this.uuid&&(this.uuid=dG.generateUUID()),n=e.getUUID(n??this.getUUID(),!i);let o=e.getNodeData(n),a=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,t),this.generate(e,t,n)):super.build(e,t,n);if(i)return o.name=o.name||super.build(e,t,n),o.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||1===o.deps))return super.build(e,t,n);n=this.getUUID(!1);let s=this.getTemp(e,n);if(s)return e.format(s,a,t);{s=super.generate(e,t,n,o.output,r);let i=this.generate(e,a,n);return e.addNodeCode(s+" = "+i+";"),e.format(s,a,t)}}return super.build(e,t,n)}getShared(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let n=e.getVars()[t];return n?n.name:void 0}generate(e,t,n,r,i){return this.getShared(e,t),n=n??this.uuid,e.getTempVar(n,r??this.getType(e),i,this.getLabel()).name}},Vse=class extends Qse{constructor(e,t){(t=t??{}).shared=void 0!==t.shared&&t.shared,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,n,r,i,o){n=e.getUUID(n??this.getUUID()),r=r??this.getType(e);let a=e.getNodeData(n);return this.getReadonly()&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,r,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,i,o,this.getLabel())),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,i,o,this.getLabel())),e.format(a.fragment.name,r,t))}},Wse=class extends Vse{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof hG?e:new hG(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,n,r,i,o){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},Gse=class extends Vse{constructor(e=0,t,n){super("v3"),this.nodeType="Vector3",this.value=e instanceof jG?e:new jG(e,t,n)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,n,r,i,o){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},qse=class extends PG{constructor(e,t,n,r){super(e,t,n),this.isColorA=!0,this.a=r}setRGBA(e,t,n,r){super.setRGB(e,t,n),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e,t="srgb"){let n;if("transparent"===e)return this.setRGBA(0,0,0,0),this;if(n=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a="rgba"===i?parseFloat(r[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a="hsla"===i?parseFloat(r[4]):1,super.setStyle(e,t)}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Kse=class extends Vse{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof qse?e:new qse(e.r,e.g,e.b,e.a)}generateReadonly(e,t,n,r,i,o){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},Yse=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,Xse=/[a-z_0-9]+/gi,$se=class extends Qse{constructor(e,t,n,r,i){super(i),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=void 0===i,this.isInterface=!1,this.parse(e,t,n,r)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,n,r,i){let o,a=0,s=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;o=Xse.exec(this.src);)l.push(o);for(let c=0;c<l.length;c++){let t=l[c],n=t[0],r=!this.isMethod||!this.getInputByName(n),i=n;if(this.keywords[n]||this.useKeywords&&r&&Hse.containsKeyword(n)){let t=this.keywords[n];if(!t){let r=Hse.getKeywordData(n);r.cache&&(t=e.keywords[n]),t=t||Hse.getKeyword(n,e),r.cache&&(e.keywords[n]=t)}i=t.build(e)}n!==i&&"."!==s[t.index+a-1]&&(s=s.substring(0,t.index+a)+i+s.substring(t.index+n.length+a),a+=i.length-n.length),void 0===this.getIncludeByName(i)&&Hse.contains(i)&&e.include(Hse.get(i))}return"source"===t?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}parse(e,t,n,r){if(this.src=e||"",this.includes=t??[],this.extensions=n??{},this.keywords=r??{},this.isMethod){let e=Yse.exec(this.src);if(this.inputs=[],e&&4==e.length){this.type=e[1],this.name=e[2];let t=e[3].match(Xse);if(t){let e=0;for(;e<t.length;){let n,r=t[e++];"in"===r||"out"===r||"inout"===r?n=t[e++]:(n=r,r="");let i=t[e++];this.inputs.push({name:i,type:n,qualifier:r})}}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}},Jse=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,Zse=class extends Qse{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||Zse.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,n,r,i){this.src=e||"";let o,a,s="",l=Jse.exec(e);this.useDefine=i??"#"===this.src.charAt(0),l&&l.length>1?(a=l[1],o=l[2],s=l[3]):(o=this.src,a="f"),this.name=o,this.type=a,this.value=s}build(e,t){if("source"===t){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,n,r,i){return e.format(this.name,this.getType(e),t)}},ele=Zse;ele.PI="PI",ele.PI2="PI2",ele.RECIPROCAL_PI="RECIPROCAL_PI",ele.RECIPROCAL_PI2="RECIPROCAL_PI2",ele.LOG2="LOG2",ele.EPSILON="EPSILON";var tle=new RegExp("^structs*([a-z_0-9]+)s*{s*((.|\n)*?)}","gim"),nle=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),rle=class extends Qse{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,n,r,i){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=tle.exec(e);if(t){let e,n=t[2];for(;e=nle.exec(n);)this.inputs.push({type:e[1],name:e[2]});this.name=t[1]}else this.name="";this.type=this.name}},ile=class extends Qse{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(r,this.getType(e),t)}};Hse.addKeyword("uv",(function(){return new ile})),Hse.addKeyword("uv2",(function(){return new ile(1)}));var ole=class extends Qse{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??ole.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case zW:return["Linear"];case NW:return["sRGB"];default:return[]}}generate(e,t){var n;let r=this.input.build(e,"v4"),i=this.getType(e),o=ole.Nodes[this.method],a=e.include(o);if(a===ole.LINEAR_TO_LINEAR)return e.format(r,i,t);if(2===(null==(n=o.inputs)?void 0:n.length)){let n=this.factor.build(e,"f");return e.format(a+"( "+r+", "+n+" )",i,t)}return e.format(a+"( "+r+" )",i,t)}fromEncoding(e){let t=ole.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=ole.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},ale=ole;ale.Nodes={LinearToLinear:new $se(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sRGBToLinear:new $se(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new $se(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n"))},ale.LINEAR_TO_LINEAR="LinearToLinear",ale.SRGB_TO_LINEAR="sRGBToLinear",ale.LINEAR_TO_SRGB="LinearTosRGB";var sle=class extends $se{constructor(e="",t,n,r,i){super(e,i,r,n,t),this.nodeType="Expression"}},lle=class extends Vse{constructor(e=new OG,t,n,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new ile,this.bias=n,this.project=void 0!==r&&r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if("sampler2D"===t)return this.getTexture(e,t);let n,r,i=this.getTexture(e,t),o=this.uv.build(e,this.project?"v4":"v2"),a=this.bias?this.bias.build(e,"f"):void 0;void 0===a&&e.context.bias&&(a=e.context.bias.setTexture(this).build(e,"f")),n=this.project?"texture2DProj":a?"tex2DBias":"tex2D",r=a?n+"( "+i+", "+o+", "+a+" )":n+"( "+i+", "+o+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new ale(new sle("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(r),r=this.colorSpace.build(e,l),e.removeContext(),e.format(r,l,t)}},cle=class extends Vse{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,n,r,i,o){return e.format(this.value+(this.value%1?"":".0"),r,t)}},ule=class extends Qse{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,n,r,i){r=this.getType(e);let o=this.value,a=o.build(e,t)+"( ",s=[];if(o.inputs){for(let t=0;t<o.inputs.length;t++){let n=o.inputs[t],r=this.inputs[t]||this.inputs[n.name];s.push(r.build(e,e.getTypeByFormat(n.type)))}a+=s.join(", ")+" )"}return e.format(a,r,t)}},dle=class extends Qse{constructor(e,t,n=dle.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=n}getType(e){let t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t}generate(e,t){let n=this.getType(e);this.type=n;let r=this.a.build(e,n),i=this.b.build(e,n);return e.format("( "+r+" "+this.op+" "+i+" )",n,t)}},hle=dle;hle.ADD="+",hle.SUB="-",hle.MUL="*",hle.DIV="/";var ple=class extends Qse{constructor(e,t=ple.ABS,n,r){super(),this.nodeType="Math",this.a=e,"string"!=typeof t?this.b=t:r=t,"string"!=typeof n?this.c=n:r=n,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case ple.MIX:case ple.CLAMP:case ple.REFRACT:case ple.SMOOTHSTEP:case ple.FACEFORWARD:return 3;case ple.MIN:case ple.MAX:case ple.MOD:case ple.STEP:case ple.REFLECT:case ple.DISTANCE:case ple.DOT:case ple.CROSS:case ple.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>r?this.a.getType(e):n>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case ple.LENGTH:case ple.DISTANCE:case ple.DOT:return"f";case ple.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let n,r,i,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case ple.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case ple.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case ple.CROSS:n=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case ple.STEP:n=this.a.build(e,1===o?"f":l),r=this.b.build(e,l);break;case ple.MIN:case ple.MAX:case ple.MOD:n=this.a.build(e,l),r=this.b.build(e,1===a?"f":l);break;case ple.REFRACT:n=this.a.build(e,l),r=this.b.build(e,l),i=this.c.build(e,"f");break;case ple.MIX:n=this.a.build(e,l),r=this.b.build(e,l),i=this.c.build(e,1===s?"f":l);break;default:n=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(i=this.c.build(e,l))}let u=[];u.push(n),r&&u.push(r),i&&u.push(i);let d=this.getNumInputs(e);if(u.length!==d)throw Error(`Arguments not match used in "${this.method}". Require ${d}, currently ${u.length}.`);return e.format(this.method+"( "+u.join(", ")+" )",c,t)}},Ale=ple;Ale.RAD="radians",Ale.DEG="degrees",Ale.EXP="exp",Ale.EXP2="exp2",Ale.LOG="log",Ale.LOG2="log2",Ale.SQRT="sqrt",Ale.INV_SQRT="inversesqrt",Ale.FLOOR="floor",Ale.CEIL="ceil",Ale.NORMALIZE="normalize",Ale.FRACT="fract",Ale.SATURATE="saturate",Ale.SIN="sin",Ale.COS="cos",Ale.TAN="tan",Ale.ASIN="asin",Ale.ACOS="acos",Ale.ARCTAN="atan",Ale.ABS="abs",Ale.SIGN="sign",Ale.LENGTH="length",Ale.NEGATE="negate",Ale.INVERT="invert",Ale.MIN="min",Ale.MAX="max",Ale.MOD="mod",Ale.STEP="step",Ale.REFLECT="reflect",Ale.DISTANCE="distance",Ale.DOT="dot",Ale.CROSS="cross",Ale.POW="pow",Ale.MIX="mix",Ale.CLAMP="clamp",Ale.REFRACT="refract",Ale.SMOOTHSTEP="smoothstep",Ale.FACEFORWARD="faceforward";var fle=class extends Qse{constructor(e,t,n){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=n}bilinearCubeUV(e,t,n,r){let i=new ule(fle.Nodes.bilinearCubeUV,[t,n,r]);this.colorSpaceTL=this.colorSpaceTL??new ale(new sle("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(i.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new ale(new sle("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(i.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new ale(new sle("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(i.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new ale(new sle("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(i.build(e)+".br");let o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new sle(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new sle(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new sle(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new sle(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new sle("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=i,a}generate(e,t){if(e.isShader("fragment")){let n=this.uv,r=this.bias||e.context.roughness,i=new ule(fle.Nodes.roughnessToMip,[r]),o=new Ale(i,fle.Nodes.m0,fle.Nodes.cubeUV_maxMipLevel,Ale.CLAMP),a=new Ale(o,Ale.FLOOR),s=new Ale(o,Ale.FRACT),l=this.bilinearCubeUV(e,this.value,n,a),c=this.bilinearCubeUV(e,this.value,n,new hle(a,new cle(1).setReadonly(!0),hle.ADD)),u=new Ale(l,c,s,Ale.MIX);return e.format(u.build(e),"v4",t)}return e.format("vec4( 0.0 )",this.getType(e),t)}},mle=fle;mle.Nodes=function(){let e=new rle("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new ele("float cubeUV_maxMipLevel 8.0",!0),n=new ele("float cubeUV_minMipLevel 4.0",!0),r=new ele("float cubeUV_maxTileSize 256.0",!0),i=new ele("float cubeUV_minTileSize 16.0",!0),o=new $se("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");o.useKeywords=!1;let a=new $se("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");a.useKeywords=!1;let s=new $se("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,o,a,t,n,r,i]);s.useKeywords=!1;let l=new ele("float r0 1.0",!0),c=new ele("float v0 0.339",!0),u=new ele("float m0 -2.0",!0),d=new ele("float r1 0.8",!0),h=new ele("float v1 0.276",!0),p=new ele("float m1 -1.0",!0),A=new ele("float r4 0.4",!0),f=new ele("float v4 0.046",!0),m=new ele("float m4 2.0",!0),g=new ele("float r5 0.305",!0),v=new ele("float v5 0.016",!0),y=new ele("float m5 3.0",!0),b=new ele("float r6 0.21",!0),w=new ele("float v6 0.0038",!0),x=new ele("float m6 4.0",!0);return{bilinearCubeUV:s,roughnessToMip:new $se("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[l,c,u,d,h,p,A,f,m,g,v,y,b,w,x]),m0:u,cubeUV_maxMipLevel:t}}();var gle=class extends Qse{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??gle.VIEW}getShared(){return this.scope===gle.WORLD}build(e,t,n,r){let i=e.context[this.scope+"Normal"];return i?i.build(e,t,n,r):super.build(e,t,n)}generate(e,t,n,r,i){let o;switch(this.scope){case gle.VIEW:o=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case gle.LOCAL:e.isShader("vertex")?o="objectNormal":(e.requires.normal=!0,o="vObjectNormal");break;case gle.WORLD:e.isShader("vertex")?o="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,o="vWNormal")}return e.format(o,this.getType(e),t)}},vle=gle;vle.LOCAL="local",vle.WORLD="world",vle.VIEW="view",vle.NORMAL="normal",Hse.addKeyword("viewNormal",(function(){return new vle(vle.VIEW)})),Hse.addKeyword("localNormal",(function(){return new vle(vle.NORMAL)})),Hse.addKeyword("worldNormal",(function(){return new vle(vle.WORLD)}));var yle=class extends Qse{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??yle.LOCAL}getType(){return this.scope===yle.PROJECTION?"v4":this.type}getShader(){switch(this.scope){case yle.LOCAL:case yle.WORLD:return!1}return!0}generate(e,t,n,r,i){let o;switch(this.scope){case yle.LOCAL:e.isShader("vertex")?o="transformed":(e.requires.position=!0,o="vPosition");break;case yle.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,o="vWPosition";break;case yle.VIEW:o=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case yle.PROJECTION:o=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(o,this.getType(),t)}},ble=yle;ble.LOCAL="local",ble.WORLD="world",ble.VIEW="view",ble.PROJECTION="projection",Hse.addKeyword("position",(function(){return new ble})),Hse.addKeyword("worldPosition",(function(){return new ble(ble.WORLD)})),Hse.addKeyword("viewPosition",(function(){return new ble(ble.VIEW)}));var wle=class extends Qse{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??wle.CUBE}getUnique(e){return!e.context.viewNormal}getType(){return this.scope===wle.SPHERE?"v2":this.type}generate(e,t){let n=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case wle.VECTOR:{let t=new vle(vle.VIEW),i=e.context.roughness,o=t.build(e,"v3"),a=new ble(ble.VIEW).build(e,"v3"),s=i?i.build(e,"f"):void 0,l=`reflect( -normalize( ${a} ), ${o} )`;s&&(l=`normalize( mix( ${l}, ${o}, ${s} * ${s} ) )`);let c=`inverseTransformDirection( ${l}, viewMatrix )`;n?(e.addNodeCode(`vec3 reflectVec = ${c};`),r="reflectVec"):r=c;break}case wle.CUBE:{let t=new wle(wle.VECTOR).build(e,"v3"),i="vec3( -"+t+".x, "+t+".yz )";n?(e.addNodeCode(`vec3 reflectCubeVec = ${i};`),r="reflectCubeVec"):r=i;break}case wle.SPHERE:{let t="normalize( ( viewMatrix * vec4( "+new wle(wle.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(e.addNodeCode(`vec2 reflectSphereVec = ${t};`),r="reflectSphereVec"):r=t;break}}return e.format(r,this.getType(),t)}return e.format("vec3( 0.0 )",this.type,t)}},xle=wle;xle.CUBE="cube",xle.SPHERE="sphere",xle.VECTOR="vector";var Cle=class extends Qse{constructor(e=new lle,t,n){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new mle(this.value,t??new xle(xle.VECTOR),n),this.irradianceNode=new mle(this.value,new vle(vle.WORLD),new cle(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):e.format("vec4( 0.0 )",this.getType(e),t)}},Sle=class extends Vse{constructor(e=new HK,t,n){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new xle,this.bias=n}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var n;if("samplerCube"===t)return this.getTexture(e,t);let r,i=this.getTexture(e,t),o=null==(n=this.uv)?void 0:n.build(e,"v3"),a=this.bias?this.bias.build(e,"f"):void 0;void 0===a&&e.context.bias&&(a=e.context.bias.setTexture(this).build(e,"f")),r=a?"texCubeBias( "+i+", "+o+", "+a+" )":"texCube( "+i+", "+o+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new ale(new sle("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(r),r=this.colorSpace.build(e,l),e.removeContext(),e.format(r,l,t)}},Ble=["x","y","z","w"],_le=["float","vec2","vec3","vec4"],Ele={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Mle={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Ple=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,n){let r=this.getIncludes(t,n);if(!r)return"";let i="";r=r.sort(e);for(let e=0;e<r.length;e++)r[e].src&&(i+=r[e].src+"\n");return i}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","\n\t\t\t// NOTE: Include Spline's blending modes. This could be part of BlendNode\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\tif ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join("\n"),fragment:["float accumAlpha = 0.0;","void accumulateAlpha(float alpha) {\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * alpha;\n\t\t\t\t}",""].join("\n")},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode("\nuniform int frameIndex;\nuniform vec2 resolution;\nuniform mat4 previousModelViewMatrix;\nuniform mat4 previousProjectionMatrix;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n"),this.addFragmentParsCode("\nlayout(location = 1) out vec4 gVelocity;\n\nuniform int frameIndex;\nuniform vec2 resolution;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\nvec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n  const float goldenAngle = 2.399963f; // radians\n  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n  float theta = float(sampleIndex) * goldenAngle + angle;\n  float sine = sin(theta);\n  float cosine = cos(theta);\n  return vec2(cosine, sine) * r;\n}\n\n// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso\nfloat getNoiseInterleavedGradient(vec2 screenPos) {\n    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);\n    return fract(magic.z * fract(dot(screenPos, magic.xy)));\n}\n\n"),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let e=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+e+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+e+";"),this.addVertexFinalCode("vUv"+e+" = uv"+e+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode("\n// TODO: This could be generated CPU side and passed to the shader every frame\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\n// TODO: Pass correct view size\nvec2 offset = haltonSequence[frameIndex];\noffset.x /= resolution.x;\noffset.y /= resolution.y;\n\nvec4 currentPosition = gl_Position;\nvec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);\n\n// We want to calculate the velocity with unjittered positions\n// so that things that are not moving get a velocity = 0\nvCurrentPosition = currentPosition;\nvPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);\n#ifdef OUTLINE_COMPENSATION\nvPreviousPosition.xy += OUTLINE_COMPENSATION;\n#endif\ngl_Position = currentPositionJittered;\n\n"),this.addFragmentFinalCode("\nvec2 oldPos = vPreviousPosition.xy;\n    oldPos /= vPreviousPosition.w;\n    oldPos.xy = (oldPos.xy+1.)/2.0;\n\nvec2 newPos = vCurrentPosition.xy;\n    newPos /= vCurrentPosition.w;\n    newPos.xy = (newPos.xy+1.)/2.0;\n\nvec2 velocity = (newPos - oldPos);\n\n// Discard fully transparent pixels \nif (gl_FragColor.a <= 0.0) discard;\n\ngVelocity = vec4(velocity, 0.0, 1.0);\n")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,n){return this.addSlot(e).addCache(t).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){void 0===this.fragmentVariables[e]&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){void 0===this.fragmentParsVariables[e]&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){void 0===this.vertexParsVariables[e]&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+"\n"}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+"\n"}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+"\n"}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+"\n"}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return-1!==this.caches.indexOf(e)}isSlot(e){return-1!==this.slots.indexOf(e)}define(e,t){this.defines[e]=void 0===t?1:t}require(e){this.requires[e]=!0}isDefined(e){return void 0!==this.defines[e]}getVar(e,t,n,r="varying",i="V",o=""){let a=this.getVars(r),s=a[e];if(!s){let r=a.length;s={name:n||"node"+i+r+(o?"_"+o:""),type:t},a.push(s),a[e]=s}return s}getTempVar(e,t,n,r){return this.getVar(e,t,n,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")}getVarListCode(e,t){t=t??"";let n="";for(let r=0,i=e.length;r<i;++r){let i=e[r],o=i.type,a=i.name,s=i.size,l=this.getFormatByType(o);if(void 0===l)throw new Error("Node pars "+l+" not found.");l.includes("[]")?n+=t+" "+l.substring(0,l.length-2)+" "+a+`[${s}];\n`:n+=t+" "+l+" "+a+";\n"}return n}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof Nse?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,n,r,i,o){if(t.includes("[]")){let a=this.inputs.arrayUniforms,s=a.list.length,l=new jse({type:t,size:n.size,name:r||"nodeUA"+s+(o?"_"+o:""),node:n,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}{let a=this.inputs.uniforms,s=a.list.length,l=new jse({type:t,name:r||"nodeU"+s+(o?"_"+o:""),node:n,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,n,r,i){return this.createUniform("vertex",e,t,n,r,i)}createFragmentUniform(e,t,n,r,i){return this.createUniform("fragment",e,t,n,r,i)}include(e,t,n){var r;let i;if(e="string"==typeof e?Hse.get(e):e,!1===this.context.include)return e.name;e instanceof $se?i=this.includes.functions:e instanceof ele?i=this.includes.consts:e instanceof rle&&(i=this.includes.structs);let o=i[this.shader]=i[this.shader]||[];if(e){let i=o[e.name];if(i||(i=o[e.name]={node:e,deps:[]},o.push(i),i.src=e.build(this,"source")),e instanceof $se&&t&&o[t.name]&&-1===o[t.name].deps.indexOf(e)&&(o[t.name].deps.push(e),null==(r=e.includes)?void 0:r.length)){let n=0;do{this.include(e.includes[n++],t)}while(n<e.includes.length)}return n&&(i.src=n),e.name}throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return _le[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return 1===e?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let n=e[t];if(null==n?void 0:n.isNode)return n}}resolve(...e){for(let t=0;t<arguments.length;t++){let n=e[t];if(void 0!==n){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case yV:case bV:return new Sle(n);case CV:return new Cle(new lle(n));default:return new lle(n)}else{if(n.isVector2)return new Wse(n);if(n.isVector3)return new Gse(n);if(n.isVector4)return new Kse(n)}}}}format(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return Ele[e]||e}getFormatByType(e){return Mle[e]||e}getUUID(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return Ble[e]}getIndexByElement(e){return Ble.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=zW,t===zW&&this.context.gamma&&(t=NW),t}},Tle=class extends Vse{constructor(e=0,t,n,r){super("c"),this.nodeType="Color",this.value=e instanceof qse?e:new qse(e||0,t,n,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,n,r,i,o){n=e.getUUID(n??this.getUUID()),r=r??this.getType(e);let a=e.getNodeData(n),s=this.getReadonly()&&void 0!==this.generateReadonly;if(this.alpha){let t=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${t};`)}return s?this.generateReadonly(e,t,n,r,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,i,o,this.getLabel())),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,i,o,this.getLabel())),e.format(a.fragment.name,r,t))}generateReadonly(e,t,n,r,i,o){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},Dle=class extends Vse{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,n,r,i,o){return e.format(this.value.toString(),r,t)}},Fle=class extends Vse{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,n,r){return e.format(this.value?"true":"false",r,t)}},Ile=class extends Vse{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:"number"==typeof t?new Array(e).fill(t):new Array(e).fill(0)}},kle=class extends Vse{},Ole=class extends kle{constructor(e){super("v3"),this.image=e,this._value=new jG}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},Lle=class extends kle{constructor(e,t,n=1008,r=1006){super("t"),this.image=e,this.wrap=t,this.minFilter=n,this.magFilter=r}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},Rle=class extends Vse{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new pG}generateReadonly(e,t,n,r,i,o){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Ule=class extends Vse{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new gq}generateReadonly(e,t,n,r,i,o){return e.format("mat4("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function zle(e,t,n,r=0){e.setUvTransform(n[0],n[1],t[0],t[1],0,0,0).premultiply((new pG).makeRotation(r*dG.DEG2RAD))}var Nle=class extends Rle{constructor(e,t,n=0){super(new pG),this.repeat=e,this.offset=t,this.rotation=n,zle(this.value,e,t,n)}updateMatrix(){zle(this.value,this.repeat,this.offset,this.rotation)}},jle=class extends Vse{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof LG?new Array(e).fill(t):new Array(e).fill(new LG(0))}},Hle=class extends Qse{constructor(e,t,n,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=n,this.mode=r}generate(e,t){if(e.isShader("fragment")){let n=[];return n.push(this.a.build(e,"c")),n.push(this.b.build(e,"c")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),e.format("spe_blend("+n.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},Qle=class extends Qse{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n=e.include(Qle.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.color.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},Vle=Qle;Vle.Nodes={customColor:new $se("vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color;\n\t\t\t}")};var Wle=class extends Qse{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n=e.include(Wle.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},Gle=Wle;Gle.Nodes={customNormal:new $se("vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 normal = packNormalToRGB( norm ).rgb;\n\t\t\t\tnormal *= step( vec3(0.5), cnormal );\n\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n\t\t\t\treturn normal;\n\t\t\t}")};var qle=class extends Qse{constructor(e,t,n,r,i,o,a,s,l,c,u,d){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=n,this.projection=r,this.axis=i,this.side=o,this.size=a,this.blending=s,this.mat=l,this.isMask=d,this.alpha=c,this.mode=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let n,r=`g${this.uuid.toString().replace(/-/g,"")}`;switch(this.projection.value){case 3:n=e.include(qle.Nodes.cylindrical);break;case 2:n=e.include(qle.Nodes.spherical);break;case 1:let t=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],i=["zy","xz","xy"][this.axis.value],o=new $se(`\n\t\tvec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 projected = (1. + (position.${i})) / 2.;\n\t\t\t\tvec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\t${2===this.side.value?"":`lalpha *= step(0.0, ${1===this.side.value?"-1.0 * ":""}dot(vObjectNormal, ${t}));`}\n\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}`);n=e.include(o);break;case 4:n=e.include(qle.Nodes.triplanar);break;default:n=e.include(qle.Nodes.uv)}e.addFragmentVariable(this.calpha,"float");let i=[];if(i.push("normal"),i.push(this.texture.generate(e,"t")),i.push(this.textureSize.build(e,"v2")),i.push(this.crop.build(e,"f")),i.push(this.mat.build(e,"mat3")),i.push(this.size.build(e,"v2")),i.push(this.blending.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),4===this.projection.value){let t=`${r}_writeUvs`,n=t+"0",o=t+"1",a=t+"2",s=`${r}_triplanarWeights`;e.addFragmentVariable(n,"vec2"),e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(s,"vec3"),i.push(n),i.push(o),i.push(a),i.push(s)}else{let t=`${r}_writeUvs`;e.addFragmentVariable(t,"vec2"),i.push(t)}return e.format(n+"("+i.join(",")+")",this.getType(e),t)}},Kle=qle;Kle.Nodes={cylindrical:new $se("\nvec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(position);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float scaledHeight = position.y / (size.y * 0.5);\n                float v =  (scaledHeight / 2.) + .5;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\t\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),spherical:new $se("\nvec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(vPosition);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float v = 0.5 + asin(posN.y) / 3.1415;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),uv:new $se("vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}"),triplanar:new $se("vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {\n\t\t\t\tvec3 p = position;\n\t\t\t\tvec2 uv0 = (1.0 + p.xy) / 2.0;     \n\t\t\t\tvec2 uv1 = (1.0 + p.zy) / 2.0;\t\t\n\t\t\t\tvec2 uv2 = (1.0 + p.xz) / 2.0;\t\t\n\t\n\t\t\t\tuv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\n\t\t\t\t// Write out all sets of UVs that we generated\n\t\t\t\twriteUvs0 = uv0;\n\t\t\t\twriteUvs1 = uv1;\n\t\t\t\twriteUvs2 = uv2;\n\t\t\t\twriteWeights = weights;\n\n\t\t\t\t// Derivatives for LOD\n\t\t\t\tvec2 df0 = fwidth(uv0);\n\t\t\t\tvec2 df1 = fwidth(uv1);\n\t\t\t\tvec2 df2 = fwidth(uv2);\n\t\t\t\tif (df0.x > 0.5) df0.x = 0.0;\n\t\t\t\tif (df1.x > 0.5) df1.x = 0.0;\n\t\t\t\tif (df2.x > 0.5) df2.x = 0.0;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                \tvec4 tmp = \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#else\n                \tvec4 tmp = \n\t\t\t\t\t\ttextureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttextureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttextureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\n\t\t\t\t// Apply cropping across all 3 planes\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;//n * 0.5 + 0.5;\n\t\t\t}\t\t\t\n\t\t\t")};var Yle=class extends Qse{constructor(e,t,n,r,i,o,a,s,l,c,u,d){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=n,this.far=r,this.isVector=i,this.isWorldSpace=o,this.origin=a,this.direction=s,this.colors=l,this.steps=c,this.isMask=d,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let n=`g${this.uuid.toString().replace(/-/g,"")}`,r=new $se(`vec3 ${n}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${n}_MAX_COLORS], float steps[${n}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {\n               vec4 color = colors[0];\n               #ifdef ${n}_IS_VECTOR\n                   #ifdef ${n}_LINEAR\n                       #ifdef ${n}_WORLDSPACE\n                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);\n                       #else\n                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);\n                       #endif\n                   #else\n                       #ifdef ${n}_WORLDSPACE\n                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);\n                       #else\n                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);\n                       #endif\n                   #endif\n               #else\n                   float dist = length(vWPosition - cameraPosition);\n\t\t\t       float depth = ( dist - near ) / ( far - near );\n               #endif\n\n\n              float p;\n              #ifdef ${n}_SMOOTH\n\t\t\t\tfor ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {\n\t\t\t\t\t\tp = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n              #else\n                for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {\n                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);\n                   color = mix(color, colors[i], p);\n                 }\n              #endif\n\n               float lalpha = alpha * color.a * mask;\n               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t   \n               return color.rgb;\n\t\t\t}`,[Yle.Nodes.vectorLinearWorldSpaceDepth,Yle.Nodes.vectorLinearObjectSpaceDepth,Yle.Nodes.vectorSphericalObjectSpaceDepth,Yle.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${n}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${n}_SMOOTH`),this.isVector.value>.5&&e.define(`${n}_IS_VECTOR`),0===this.gradientType.value&&e.define(`${n}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${n}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let i=e.include(r),o=[];return o.push(this.near.build(e,"f")),o.push(this.far.build(e,"f")),o.push(this.origin.build(e,"v3")),o.push(this.direction.build(e,"v3")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},Xle=Yle;Xle.Nodes={vectorLinearWorldSpaceDepth:new $se("float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorLinearObjectSpaceDepth:new $se("float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalWorldSpaceDepth:new $se("float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(vWPosition - origin);\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalObjectSpaceDepth:new $se("float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(position - origin);\n               return ( dist - near ) / ( far - near );\n            }")};var $le=class extends Qse{constructor(e,t,n,r,i,o,a,s){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=n,this.intensity=r,this.factor=i,this.isMask=s,this.alpha=o,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=new $se("vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {\n\t\t\t\t\tfloat fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );\n\n\t\t\t\t\tfloat lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn color;\n\t\t\t\t}"),r=e.include(n),i=[];return i.push(this.color.build(e,"c")),i.push(this.bias.build(e,"f")),i.push(this.scale.build(e,"f")),i.push(this.intensity.build(e,"f")),i.push(this.factor.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},Jle=class extends Qse{constructor(e,t,n,r,i,o,a,s,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=n,this.steps=r,this.offset=i,this.morph=o,this.angle=a,this.isMask=l,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(Jle.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},Zle=Jle;Zle.Nodes={gradient:new $se("vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tvec2 m = morph / vUv.xy;\n\t\t\t\tvec2 rot = vec2( 0.5 + m.x, m.y );\n\t\t\t\tvec2 dt = vec2(\n\t\t\t\t\tcos( angle ) * rot.x - sin( angle ) * rot.y,\n\t\t\t\t\tsin( angle ) * rot.x + cos( angle ) * rot.y\n\t\t\t\t);\n\t\t\t\tvec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;\n\t\t\t\tfloat t = dot( pt, dt ) / dot( dt, dt );\n\t\t\t\tif ( gradientType == 1 ) {\n\t\t\t\t\tt = distance (\n\t\t\t\t\t\t( vUv + morph ) * 3.0,\n\t\t\t\t\t\t( vUv + offset ) + 1.0\n\t\t\t\t\t) + angle;\n\t\t\t\t} else if ( gradientType == 2 ) {\n\t\t\t\t\tfloat polar = atan(\n\t\t\t\t\t\tvUv.x + morph.x - 0.5 + offset.x,\n\t\t\t\t\t\tvUv.y + morph.y - 0.5 + offset.y\n\t\t\t\t\t) * -1.0;\n\t\t\t\t\tt = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );\n\t\t\t\t}\n\n\t\t\t\tfloat p;\n\t\t\t\tif (smoothed) {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], p);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\n\t\t\t\treturn color.xyz;\n\t\t\t}")};var ece=class extends Qse{constructor(e,t,n,r,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=r,this.alpha=t,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`,this.rotation=i}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=e.include(ece.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),r.push(this.rotation.build(e,"f")),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},tce=ece;tce.Nodes={matcap:new $se("vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {\n\t\t\t\t\tvec3 viewDir = normalize( vViewPosition );\n\t\t\t\t\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\t\t\t\t\tvec3 y = cross( viewDir, x );\n\t\t\t\t\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) );\n\t\t\t\t\tuv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;\n\t\t\t\t\tuv = uv * 0.495 + 0.5;\n\t\t\t\t\tvec4 matcapColor = texture2D( matcapTex, uv );\n\n\t\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\t\n\t\t\t\t\treturn matcapColor.rgb;\n            \t}")};var nce=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(nce||{}),rce=function(){let e=new $se("vec3 random3(vec3 c) {\n\t\t\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\t\t\tvec3 r;\n\t\t\tr.z = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.x = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.y = fract(512.0*j);\n\t\t\treturn r-0.5;\n\t\t}"),t=new $se("float simplex3d(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t \n\t\t\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t vec3 x1 = x - i1 + G3;\n\t\t\t vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(s), x);\n\t\t\t d.y = dot(random3(s + i1), x1);\n\t\t\t d.z = dot(random3(s + i2), x2);\n\t\t\t d.w = dot(random3(s + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[e]);t.keywords.F3=new ele("float F3 0.3333333"),t.keywords.G3=new ele("float G3 0.1666667");let n=new $se("float simplex3dFractal(vec3 m) {\n\t\t\tmat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\n\t\t\tmat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\n\t\t\tmat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\t\t\treturn 0.5333333 * simplex3d(m * rot1)\n\t\t\t\t + 0.2666667 * simplex3d(2.0 * m * rot2)\n\t\t\t\t + 0.1333333 * simplex3d(4.0 * m * rot3)\n\t\t\t\t + 0.0666667 * simplex3d(8.0 * m);\n\t\t}",[t]),r=new $se("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),i=new $se("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),o=new $se("float simplexAshima(vec3 v) {\n\t\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\t\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\t\t  vec3 g = step(x0.yzx, x0.xyz);\n\t\t  vec3 l = 1.0 - g;\n\t\t  vec3 i1 = min( g.xyz, l.zxy );\n\t\t  vec3 i2 = max( g.xyz, l.zxy );\n\t\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\t\t  i = mod(i, 289.0 ); \n\t\t  vec4 p = permute( permute( permute( \n\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n\t\t\t\t   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\t\t  float n_ = 1.0/7.0; // N=7\n\t\t  vec3  ns = n_ * D.wyz - D.xzx;\n\t\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\t\t  vec4 x_ = floor(j * ns.z);\n\t\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\t\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t\t  vec4 h = 1.0 - abs(x) - abs(y);\n\t\t  vec4 b0 = vec4( x.xy, y.xy );\n\t\t  vec4 b1 = vec4( x.zw, y.zw );\n\t\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t\t  vec4 sh = -step(h, vec4(0.0));\n\t\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\t\t  vec3 p0 = vec3(a0.xy,h.x);\n\t\t  vec3 p1 = vec3(a0.zw,h.y);\n\t\t  vec3 p2 = vec3(a1.xy,h.z);\n\t\t  vec3 p3 = vec3(a1.zw,h.w);\n\t\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t\t  p0 *= norm.x;\n\t\t  p1 *= norm.y;\n\t\t  p2 *= norm.z;\n\t\t  p3 *= norm.w;\n\t\t  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t\t  m = m * m;\n\t\t  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n\t\t}",[r,i]),a=new $se("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),s=new $se("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[a]),l=new $se("float noise(vec3 p){\n\t\t\tvec3 a = floor(p);\n\t\t\tvec3 d = p - a;\n\t\t\td = d * d * (3.0 - 2.0 * d);\n\t\t\tvec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n\t\t\tvec4 k1 = perm(b.xyxy);\n\t\t\tvec4 k2 = perm(k1.xyxy + b.zzww);\n\t\t\tvec4 c = k2 + a.zzzz;\n\t\t\tvec4 k3 = perm(c);\n\t\t\tvec4 k4 = perm(c + 1.0);\n\t\t\tvec4 o1 = fract(k3 * (1.0 / 41.0));\n\t\t\tvec4 o2 = fract(k4 * (1.0 / 41.0));\n\t\t\tvec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n\t\t\tvec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\t\t\treturn o4.y * d.y + o4.x * (1.0 - d.y);\n\t\t}",[s]),c=new $se("float fbm(vec3 x) {\n\t\t\tfloat v = 0.0;\n\t\t\tfloat a = 0.5;\n\t\t\tvec3 shift = vec3(100);\n\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\tv += a * noise(x);\n\t\t\t\tx = x * 2.0 + shift;\n\t\t\t\ta *= 0.5;\n\t\t\t}\n\t\t\treturn v;\n\t\t}",[l]);c.keywords.NUM_OCTAVES=new ele("int NUM_OCTAVES 5");let u=new $se("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),d=new $se("float perlin(vec3 P){\n\t\t  vec3 Pi0 = floor(P);\n\t\t  vec3 Pi1 = Pi0 + vec3(1.0);\n\t\t  Pi0 = mod(Pi0, 289.0);\n\t\t  Pi1 = mod(Pi1, 289.0);\n\t\t  vec3 Pf0 = fract(P);\n\t\t  vec3 Pf1 = Pf0 - vec3(1.0);\n\t\t  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\t\t  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n\t\t  vec4 iz0 = Pi0.zzzz;\n\t\t  vec4 iz1 = Pi1.zzzz;\n\t\t  vec4 ixy = permute(permute(ix) + iy);\n\t\t  vec4 ixy0 = permute(ixy + iz0);\n\t\t  vec4 ixy1 = permute(ixy + iz1);\n\t\t  vec4 gx0 = ixy0 / 7.0;\n\t\t  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n\t\t  gx0 = fract(gx0);\n\t\t  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\t\t  vec4 sz0 = step(gz0, vec4(0.0));\n\t\t  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\t\t  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\t\t  vec4 gx1 = ixy1 / 7.0;\n\t\t  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n\t\t  gx1 = fract(gx1);\n\t\t  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\t\t  vec4 sz1 = step(gz1, vec4(0.0));\n\t\t  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\t\t  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\t\t  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\t\t  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\t\t  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\t\t  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\t\t  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\t\t  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\t\t  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\t\t  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\t\t  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\t\t  g000 *= norm0.x;\n\t\t  g010 *= norm0.y;\n\t\t  g100 *= norm0.z;\n\t\t  g110 *= norm0.w;\n\t\t  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\t\t  g001 *= norm1.x;\n\t\t  g011 *= norm1.y;\n\t\t  g101 *= norm1.z;\n\t\t  g111 *= norm1.w;\n\t\t  float n000 = dot(g000, Pf0);\n\t\t  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\t\t  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\t\t  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\t\t  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\t\t  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\t\t  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\t\t  float n111 = dot(g111, Pf1);\n\t\t  vec3 fade_xyz = fade(Pf0);\n\t\t  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\t\t  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\t\t  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n\t\t  return 2.2 * n_xyz;\n\t\t}",[r,i,u]),h=new $se("float hashwithoutsine13(vec3 p3)\n\t\t{\n\t\t\tp3  = fract(p3 * .1031);\n\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t}"),p=new $se("vec3 hashwithoutsine33(vec3 p3)\n\t\t{\n\t\t\tp3 = fract(p3 * vec3(.1031, .1030, .0973));\n\t\t\tp3 += dot(p3, p3.yxz+33.33);\n\t\t\treturn fract((p3.xxy + p3.yxx)*p3.zyx);\n\t\t}"),A=new $se("float metric(in vec3 p)\n\t\t{\n\t\t\t// L2 \n\t\t\treturn length(p);\n\n\t\t\t// Chebyshev \n\t\t\t// vec3 a = abs(p);\n\t\t\t// return max(a.x, max(a.y, a.z));\n\t\t}"),f=new $se("float smin( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(b, a, h) - correction;\n\t\t}"),m=new $se("float smax( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(a, b, h) + correction;\n\t\t}"),g=new $se("float remap(float value, float input_min, float input_max, float output_min, float output_max) {\n\t\t\t// Compute width of each interval\n\t\t\tfloat input_width = input_max - input_min;\n\t\t\tfloat output_width = output_max - output_min;\n\t\t\n\t\t\t// Convert input range into a 0-1 range \n\t\t\tfloat scaled = (value - input_min) / input_width;\n\t\t\n\t\t\t// Convert the 0-1 range into a value in output range\n\t\t\treturn output_min + (scaled * output_width);\n\t\t}");return{simplex:t,simplexFractal:n,simplexAshima:o,fbm:c,perlin:d,voronoi:new $se('float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) \n\t\t{\n\t\t\t// Integer and fractional parts of this point\'s coordinates\n\t\t\tivec3 p = ivec3(floor(x));\n\t\t\tvec3 f = fract(x);\n\n\t\t\t// Different variables that we will use to construct noise:\n\t\t\t//\n\t\t\t// f1: distance to the closest feature point\n\t\t\t// f2: distance to the second closest feature point\n\t\t\t// e: distance to the closest edge (cell boundary)\n\t\t\t//\n\t\t\t// We also compute "smooth" versions of all of the above quantites, essentially\n\t\t\t// replacing "hard" minimums with "smooth" minimums (described by IQ)\n\t\t\tfloat f1_smooth = 8.0;\n\t\t\tfloat f1 = 8.0;\n\t\t\tfloat f2_smooth = 8.0;\n\t\t\tfloat f2 = 8.0;\n\t\t\tfloat e_smooth = 8.0;\n\t\t\tfloat e = 8.0;\n\n\t\t\t// Variables stored from closest cell\n\t\t\tivec3 mb;\n\t\t\tvec3 mr; \n\n\t\t\tint steps = quality;\n\t\t\t\n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d = length(r);\n\t\t\t\t\n\t\t\t\tf1_smooth = smin(d, f1_smooth, smoothness);\n\n\t\t\t\t// Store un-smoothed distances too \n\t\t\t\tif (d < f1) \n\t\t\t\t{\n\t\t\t\t\tf2 = f1;\n\t\t\t\t\tf1 = d;\n\n\t\t\t\t\tmb = ivec3(x, y, z);\n\t\t\t\t\tmr = r;\n\t\t\t\t} \n\t\t\t\telse if (d < f2) \n\t\t\t\t{\n\t\t\t\t\tf2 = d;\n\t\t\t\t}\n\t\t\t}\t\n\t\t\t\n\t\t\tfloat id = hashwithoutsine13(vec3(p + mb) + seed);\n\n\t\t\t// Second pass for edge distance  \n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\t// Start search at the cell that contains the closest point to "x" (found in 1st pass)\n\t\t\t\tivec3 b = mb + ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d1 = dot(0.5 * (mr + r), (r - mr)); \t\t\t\t// IQ normalizes "r - mr" but that breaks things for the smooth version?\n\t\t\t\tfloat d2 = dot(0.5 * (mr + r), normalize(r - mr));\n\n\t\t\t\te_smooth = smin(d1, e_smooth, smoothness);\n\n\t\t\t\te = min(e, d2);\n\n\t\t\t\t// Also compute a smooth version of F2 in this pass\n\t\t\t\t{\n\t\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\t\tif (b != mb) \n\t\t\t\t\t{\n\t\t\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\t\t\tfloat d = length(r);\n\n\t\t\t\t\t\tf2_smooth = smin(d, f2_smooth, smoothness);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Different visualization modes \n\t\t\tif (style == 0) \n\t\t\t{\n\t\t\t\treturn f1_smooth;\n\t\t\t}\n\t\t\tif (style == 1) \n\t\t\t{\n\t\t\t\treturn f2_smooth;\n\t\t\t}\n\t\t\tif (style == 2) \n\t\t\t{\n\t\t\t\treturn f2_smooth - f1_smooth;\n\t\t\t\t\n\t\t\t\t// "Pebbles" also cool\n\t\t\t\t//return step(0.2, f2_smooth - f1_smooth);\n\t\t\t}\n\t\t\tif (style == 3) \n\t\t\t{\n\t\t\t\t// This one is really good for rock / stone effects\n\t\t\t\tfloat a = f1; \n\t\t\t\tfloat b = f2;\n\t\t\t\tfloat k = 3.0;\n\t\t\t\tfloat h = max(k - abs(a - b), 0.0) / k;\n\t\t\t\tfloat final = min(a, b) - h * h * k * (1.0 / 4.0);\n\t\t\t\treturn final;\n\t\t\t}\n\t\t\tif (style == 4) \n\t\t\t{\n\t\t\t\t// Some random adjustments to make this style stand out more \n\t\t\t\treturn exp(5.0 * e_smooth);\n\t\t\t}\n\t\t\tif (style == 5) \n\t\t\t{\n\t\t\t\treturn pow(f1_smooth, 3.0);\n\t\t\t}\n\t\t\tif (style == 6) \n\t\t\t{\t\t\t\t\n\t\t\t\tconst float eps = 0.0125;\n\n\t\t\t\t// Thicker lines as the user increases the smoothness slider\n\t\t\t\tfloat thickness = smoothness * 0.25 + eps;\n\n\t\t\t\t// Blurrier lines as the user increases the smoothness slider\n\t\t\t\tfloat blur = pow(smoothness, 3.0) * 0.25 + eps;\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\tthickness - thickness * blur, \n\t\t\t\t\tthickness + thickness * blur, \n\t\t\t\t\te\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (style == 7) \n\t\t\t{\n\t\t\t\treturn hashwithoutsine13(vec3(p + mb) + seed);\n\t\t\t}\n\t\t}\n\t',[h,p,A,f,m,g])}}(),ice=class extends Qse{constructor(e,t,n,r,i,o,a,s,l,c,u,d,h,p,A,f,m,g,v){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=n,this.fA=r,this.fB=i,this.distortion=o,this.colorA=a,this.colorB=s,this.colorC=l,this.colorD=c,this.noiseType=d,this.voronoiStyle=p,this.highCut=A,this.lowCut=f,this.smoothness=m,this.seed=g,this.quality=v,this.isMask=h,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,n,r,i){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let o=Object.values(nce)[this.noiseType.value],a=new $se(`vec3 ${o}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) \n\t\t\t{\n                // Prevent scale of zero \n\t\t\t\tscale = max(abs(scale), 0.001);\n\n\t\t\t\tvec3 st = position / size;\n\t\t\t\tst /= scale;\n\n\t\t\t\t${"voronoi"==o?`\n\t\tfloat v = ${o}(st + move, voronoiStyle, smoothness, seed, quality);\n\n\t\t// Apply clipping to colors\n\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t// Note that the voronoi mode only uses colors "A" and "C" from the UI \n\t\tvec4 color = mix(colorA, colorC, v); \n\t\t`:`\n\t\tvec3 q = vec3(${o}(st),\n\t\t\t\t\t   ${o}(st + vec3(1.0)),\n\t\t\t\t\t   ${o}(st + vec3(1.0)));\n\t\tvec3 r = vec3(${o}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),\n\t\t\t\t\t  ${o}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), \n\t\t\t\t\t  ${o}(st * q));\n\t\tfloat f = ${o}(st + r);\n\t\tvec4 color;\n\t\tcolor = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));\n\t\tcolor = mix(color, colorC, clamp(length(q), 0.0, 1.0));\n\t\tcolor = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));\n\t\t`}\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t}`,[rce.simplex,rce.simplexFractal,rce.simplexAshima,rce.fbm,rce.perlin,rce.voronoi]),s=e.include(a),l=[];return l.push(this.scale.build(e,"f")),l.push(this.size.build(e,"v3")),l.push(this.move.build(e,"f")),l.push(this.fA.build(e,"v2")),l.push(this.fB.build(e,"v2")),l.push(this.distortion.build(e,"v2")),l.push(this.colorA.build(e,"v4")),l.push(this.colorB.build(e,"v4")),l.push(this.colorC.build(e,"v4")),l.push(this.colorD.build(e,"v4")),l.push(this.voronoiStyle.build(e,"i")),l.push(this.highCut.build(e,"f")),l.push(this.lowCut.build(e,"f")),l.push(this.smoothness.build(e,"f")),l.push(this.seed.build(e,"f")),l.push(this.quality.build(e,"i")),l.push(this.isMask.build(e,"b")),l.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),l.push(this.alpha.build(e,"f")),l.push(this.calpha),e.format(s+"("+l.join(",")+")",this.getType(e),t)}};ice.numOctaves=5;var oce=class extends Qse{constructor(e,t,n,r,i,o,a,s,l,c,u,d,h,p,A,f){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=n,this.contourWidth=r,this.contourThreshold=i,this.outlineThreshold=o,this.contourFrequency=a,this.outlineSmoothing=s,this.contourDirection=l,this.positionalLines=c,this.compensation=u,this.resolution=d,this.normalMap=h,this.depthMap=p,this.pixelRatio=A,this.alpha=f,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let n=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${n}_offset`),this.firstTime){let t=this.outlineWidth.build(e,"f"),r=this.resolution.build(e,"v2"),i=this.compensation.build(e,"b"),o=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(t,"uniform float"),e.addVertexParsVariable(r,"uniform vec2"),e.addVertexParsVariable(i,"uniform bool"),e.addVertexParsVariable(o,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`\n                vID = randomColor.r;\n                vec2 ${n}_offset = vec2(0.0);\n                if (${i}) {\n                    vec4 ${n}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));\n                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the\n                    // normals face the camera directly. So we hackily fix this by offsetting the normal\n                    // by a tiny amount.\n                    vec3 ${n}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;\n                    ${n}_offset = normalize(${n}_clipNormal.xy) / ${r} * (${t} / 2.0) * ${n}_clipPosition.w * 2.0 * ${o};\n                    ${n}_clipPosition.xy += ${n}_offset;\n                    // TODO(MAX): To handle multiple outline layers, we only want to extrude\n                    // if this offset is the biggest of all the potential offsets\n                    gl_Position = ${n}_clipPosition;\n                }\n            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(oce.Nodes.outline),r=[];return r.push(this.outlineColor.build(e,"c")),r.push(this.contourColor.build(e,"c")),r.push(this.outlineWidth.build(e,"f")),r.push(this.contourWidth.build(e,"f")),r.push(this.contourThreshold.build(e,"f")),r.push(this.outlineThreshold.build(e,"f")),r.push(this.contourFrequency.build(e,"f")),r.push(this.outlineSmoothing.build(e,"f")),r.push(this.contourDirection.build(e,"v3")),r.push(this.positionalLines.build(e,"b")),r.push(this.resolution.build(e,"v2")),r.push(this.normalMap.getTexture(e,"t")),r.push(this.depthMap.getTexture(e,"t")),r.push(this.pixelRatio.build(e,"f")),r.push(this.compensation.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,e.format(n+"("+r.join(",")+")",this.getType(e),t)}return""}},ace=oce;ace.Nodes=function(){let e=new $se("\nfloat sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)\n{\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    vec2 texelSize = (vec2(1.0) / resolution);\n    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;\n\n    vec2 uvSamples[9];\n    vec4 normalSamples[9];\n\n\tuvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);\n\tuvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);\n\tuvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);\n\tuvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);\n\tuvSamples[4] = uv;\n\tuvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);\n\tuvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);\n\tuvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);\n\tuvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);\n\n\n    normalSamples[0] = texture2D(t, uvSamples[0]);\n    normalSamples[1] = texture2D(t, uvSamples[1]);\n    normalSamples[2] = texture2D(t, uvSamples[2]);\n    normalSamples[3] = texture2D(t, uvSamples[3]);\n    normalSamples[4] = texture2D(t, uvSamples[4]);\n    normalSamples[5] = texture2D(t, uvSamples[5]);\n    normalSamples[6] = texture2D(t, uvSamples[6]);\n    normalSamples[7] = texture2D(t, uvSamples[7]);\n    normalSamples[8] = texture2D(t, uvSamples[8]);\n\n    float depthBias = 0.0001;\n    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!\n    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n\n    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);\n  \tvec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);\n\n    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));\n    return edgeNormal;\n}\n");return{outline:new $se("vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {\n                vec3 result = outlineColor;\n                float resultAlpha = 0.0;\n\n                vec3 N = normalize(vWNormal);\n                vec2 nuv = (gl_FragCoord.xy / resolution);\n                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);\n                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);\n\n                //resultAlpha = 1.0;\n                //result = vec3(sobelSample);\n\n                float t = 1.0 - contourThreshold;\n                if(positionalLines) {\n                    vec3 NDir = position * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float f  = fract(NT * contourFrequency * 0.01);\n                    float df = fwidth(NT * contourFrequency);\n\n                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);\n                    if (g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0;\n                    }\n                 }\n                 else {\n                    vec3 NDir = N * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float df = fwidth(NT * contourThreshold);\n                    float f = sin(NT * 1.0 * contourFrequency);\n                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);\n\n                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0 - g;\n                    }\n                 }\n\n                 float lalpha = alpha * resultAlpha * mask;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\t \n                 return result;\n             }",[e])}}();var sce=class extends Qse{constructor(e,t,n,r,i,o,a,s,l,c,u,d,h,p,A,f,m,g){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=n,this.blending=r,this.offset=i,this.colorA=o,this.colorB=a,this.frequency=s,this.size=l,this.variation=c,this.smoothness=u,this.zigzag=d,this.rotation=h,this.vertical=p,this.horizontal=A,this.sides=f,this.isMask=g,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n;switch(e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float"),this.style.value){case 0:default:n="circle";break;case 1:n="ring";break;case 2:n="polygon";break;case 3:n="xcross";break;case 4:n="diamond";break;case 5:n="checkerboard";break;case 6:n="line";break;case 7:n="wave"}let r=`g${this.uuid.toString().replace(/-/g,"")}`,i=new $se("float hashwithoutsine12(vec2 p)\n\t\t\t\t{\n\t\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * .1031);\n\t\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t\t}"),o=new $se("vec2 rotate_uv(in vec2 uv, float a, bool repeat) \n\t\t\t\t{\n\t\t\t\t\tconst float mid = 0.5;\n\t\t\t\t\tfloat radians = a * (PI / 180.0);\n\t\t\t\t\tvec2 rotated = vec2(\n\t\t\t\t\t\tcos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,\n\t\t\t\t\t\tcos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid\n\t\t\t\t\t);\n\t\t\t\t\treturn repeat ? fract(rotated): rotated;\n\t\t\t\t}"),a="";if(4===this.projection.value){a=`\n\t\t\t\tvec3 p = position;\n\t\t\t\tfloat factor = 0.0125;\n\t\t\t\tvec2 uv0 = fract(p.xy * factor);\n\t\t\t\tvec2 uv1 = fract(p.zy * factor);\n\t\t\t\tvec2 uv2 = fract(p.xz * factor);\n\t\t\t\t\n\t\t\t\tuv0 = rotate_uv(uv0 + offset, rotation, true);\n\t\t\t\tuv1 = rotate_uv(uv1 + offset, rotation, true);\n\t\t\t\tuv2 = rotate_uv(uv2 + offset, rotation, true);\n\t\n\t\t\t\tfloat d0 = ${2===this.style.value?`${n}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\tfloat d1 = ${2===this.style.value?`${n}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\tfloat d2 = ${2===this.style.value?`${n}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\t\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\t\t\t\td0 *= weights.z;\n\t\t\t\td1 *= weights.x;\n\t\t\t\td2 *= weights.y;\n\t\t\t\tfloat draw = d0 + d1 + d2;\n\t\n\t\t\t\tvec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;\n\t\t\t\t`}else{let e=2===this.style.value?`${n}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,t="";0===this.axis.value?t="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.z);\n\t\t\t\t\tfloat phi = acos(p.x / radius);":1===this.axis.value?t="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.x, p.z);\n\t\t\t\t\tfloat phi = acos(p.y / radius);":(this.axis.value,t="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.x);\n\t\t\t\t\tfloat phi = acos(p.z / radius);");let r="";switch(this.projection.value){case 0:r="custom_uv = vUv.st;";break;case 1:break;case 2:r=`\n\t\t\t\t\t\t\tvec3 p = position;\n\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t\tcustom_uv = vec2(theta, phi);\n\t\t\t\t\t\t\tcustom_uv /= PI;\n\t\t\t\t\t\t\t`}a=`\n\t\t\t\tvec2 custom_uv;\n\t\t\t\t${r}\n\t\n\t\t\t\tcustom_uv += offset;\n\t\t\t\tcustom_uv = fract(custom_uv);\n\t\t\t\tcustom_uv = rotate_uv(custom_uv, rotation, true);\n\t\n\t\t\t\tfloat draw = ${e};\n\t\t\t\t`}let s=new $se(`vec3 ${r}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\t\tconst float TWO_PI = PI * 2.0;\n\t\t\t\t\tfloat smoothness_remapped = pow(smoothness, 5.0);\t\n\n\t\t\t\t\t${a}\n\n\t\t\t\t\t// Construct final output color\n\t\t\t\t\tvec4 color = mix(colorA, colorB, draw);\n\t\t\t\t\tcolor.a = clamp(color.a, 0.0, 1.0);\n\n\t\t\t\t\t// Apply cuts\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(vertical.x, custom_uv.y) * \n\t\t\t\t\t\tstep(custom_uv.y, vertical.y);\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(horizontal.x, abs(custom_uv.x)) * \n\t\t\t\t\t\tstep(abs(custom_uv.x), horizontal.y);\n\n\t\t\t\t\t// Accumulate alpha \n\t\t\t\t\tfloat lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t\t}`,[o,i,sce.DrawFunctions.circle,sce.DrawFunctions.ring,sce.DrawFunctions.polygon,sce.DrawFunctions.cross,sce.DrawFunctions.diamond,sce.DrawFunctions.checkerboard,sce.DrawFunctions.line,sce.DrawFunctions.wave]),l=e.include(s),c=[];return c.push("normal"),c.push(this.blending.build(e,"f")),c.push(this.style.build(e,"i")),c.push(this.offset.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.frequency.build(e,"v2")),c.push(this.size.build(e,"f")),c.push(this.variation.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.zigzag.build(e,"f")),c.push(this.rotation.build(e,"f")),c.push(this.vertical.build(e,"v2")),c.push(this.horizontal.build(e,"v2")),c.push(this.sides.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}return e.format("vec3(0.0)",this.getType(e),t)}},lce=sce;lce.DrawFunctions=function(){let e=new $se("float hashwithoutsine12(vec2 p) {\n\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * 0.1031);\n\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t}"),t=new $se("vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {\n                // Create tiles in UV-space\n                uv *= frequency;\n\n                // Integer coords\n                vec2 i = floor(uv);\n\n                // Offset every other row based on zigzag param, then compute fractional coords\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = fract(uv);\n\n\t\t\t\t// Rotate the tile itself:\n\t\t\t\t// const float mid = 0.5;\n\t\t\t\t// f = vec2(\n\t\t\t\t// \tcos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,\n\t\t\t\t// \tcos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid\n\t\t\t\t// );\n\t\t\t\t// f = fract(f);\n\n                f = f * 2.0 - 1.0;\n\n\t\t\t\t// Recompute integer coords after shifting - then, random value per tile \n\t\t\t\ti = floor(uv);\n\t\t\t\tfloat rand = (hashwithoutsine12(i) * 5.0 + 1.0);\n\t\t\t\tfloat jitter = mix(1.0, rand, variation);\n\t\t\t\tf *= jitter;\n\n                return f;\n            }",[e]);return{tileAndCenter:t,circle:new $se("float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(\n                    -smoothness, \n                     smoothness, \n                     length(f) - size\n                );\n            }",[t]),ring:new $se("float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\n\t\t\t\tfloat d = length(f);\n                const float inner_width = 0.5;\n\n                float outer = smoothstep(-smoothness, smoothness, d - size);\n                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);\n\t\t\t\treturn outer + (1.0 - inner);   \n            }",[t]),polygon:new $se("float sdf_ngon(in vec2 p, in float r, in int n) {\n                float an = (PI * 2.0) / float(n);\n                float he = r * tan(0.5 * an);\n                \n                // Rotate to first sector\n                p = -p.yx; \n                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);\n                vec2  cs = vec2(cos(bn), sin(bn));\n                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;\n            \n                // Side of polygon\n                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);\n            }\n            \n            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));\n            }",[t]),cross:new $se("float sdf_cross(in vec2 p, in vec2 b, float r ) {\n                p = abs(p); \n\t\t\t\tp = (p.y > p.x) ? p.yx : p.xy;\n                vec2  q = p - b;\n                float k = max(q.y, q.x);\n                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n                return sign(k) * length(max(w, 0.0)) + r;\n            }\n            \n            // Avoid namespace conflicts \n            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));\n            }",[t]),diamond:new $se("float ndot(vec2 a, vec2 b) { \n                return a.x*b.x - a.y*b.y; \n            }\n            \n            float sdf_diamond(in vec2 p, in vec2 b) {\n                p = abs(p);\n                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);\n                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));\n                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);\n            }\n\n            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\t            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));\n            }",[t]),checkerboard:new $se("float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                uv *= frequency;\n                vec2 i = floor(uv);\n\n                float offset = mod(i.y, 2.0);\n\n                uv.x += offset + zigzag * offset;\n                float x = floor(uv.x);\n                \n                return mod(x, 2.0);\n            }"),line:new $se("float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);\n\t\t\t\t\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat row = floor(uv * frequency).y;\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(row));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\ts - smoothness, \n\t\t\t\t\ts + smoothness, \n\t\t\t\t\tabs(f.y)\n\t\t\t\t);\n            }",[t]),wave:new $se("// Uses bisection \n            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {\n                // Convert all data to a primitive cosine wave\n                p = c * (p - vec2(d, a));\n                \n                const float TWO_PI = PI * 2.0;\n\n                // Reduce to principal half cycle\n                p.x = mod(p.x, TWO_PI); \n                if (p.x > PI) {\n                    p.x = TWO_PI - p.x;\n                }\n            \n                // Find zero of derivative (minimize distance)\n                float xa = 0.0;\n                float xb = TWO_PI;\n\n                // 24 bit precision\n                for (int i = 0; i < 24; i++) {\n                    float x = 0.5 * (xa + xb);\n                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));\n                    if (y < 0.0) xa = x; \n                    else xb = x;\n                }\n                float x = 0.5 * (xa + xb);\n                \n                // Compute distance    \n                vec2 q = vec2(x, b * c * cos(x));\n                return length(p - q) / c;\n            }\n\n            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                float repeat = frequency.x;\n                uv *= repeat;\n                vec2 i = floor(uv);\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = vec2(uv.x, fract(uv.y));\n\n                // Generalized cosine: y(x) = a + b * cos(cx + d)\n                const float amplitude = 0.125;\n                float wave_frequency = frequency.y * 0.1;\n                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);\n\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(i.y));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);\n            }")}}();var cce=class extends Qse{constructor(e,t,n,r,i,o,a,s){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=n,this.noiseStrength=r,this.noiseScale=i,this.offset=o,this.isMask=s,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(cce.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},uce=cce;uce.Nodes=function(){let e=new $se("vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {\n                 vec3 st = position / noiseScale;\n\t\t\t\t vec3 q = vec3(simplex3d(st),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)));\n\n\t\t\t\t vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st * q));\n\n                 float noise = simplex3d(st + r);\n\n                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);\n             }",[rce.simplex]);return{rainbow:new $se("vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);\n\n\t\t\t\tfloat rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);\n\n\t\t\t\tfloat lalpha = alpha * rainbowContribution * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn res;\n             }",[e])}}();var dce=class extends Qse{constructor(e,t,n,r,i,o,a,s,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=n,this.source=r,this.isWorldSpace=i,this.noiseStrength=o,this.noiseScale=a,this.shadowColor=s,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let n=e.include(dce.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},hce=dce;hce.Nodes=function(){let e=new $se("float rand(float n) {\n\t\t\t\treturn fract(sin(n) * 43758.5453123);\n\t\t\t}"),t=new $se("float hash1(float p) { \n\t\t\t\tp = fract(p * 0.011); \n\t\t\t\tp *= p + 7.5; \n\t\t\t\tp *= p + p; \n\t\t\t\treturn fract(p); \n\t\t\t}"),n=new $se("float valueNoise(vec3 x) {\n\t\t\t\tconst vec3 step = vec3(110, 241, 171);\n\t\t\t\n\t\t\t\tvec3 i = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\t\t\t \n\t\t\t\t// For performance, compute the base input to a 1D hash from the integer part of the argument and the \n\t\t\t\t// incremental change to the 1D based on the 3D -> 1D wrapping\n\t\t\t\tfloat n = dot(i, step);\n\t\t\t\n\t\t\t\tvec3 u = f * f * (3.0 - 2.0 * f);\n\t\t\t\treturn mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n\t\t\t\t\t\t   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n\t\t\t}",[t]),r=new $se("vec3 hash3(vec3 x) {\n\t\t\t\tx = vec3(dot(x,vec3(127.1, 311.7, 74.7)),\n\t\t\t\t\t\t dot(x,vec3(269.5, 183.3, 246.1)),\n\t\t\t\t\t\t dot(x,vec3(113.5, 271.9, 124.6)));\n\t\t\t\n\t\t\t\treturn fract(sin(x)*43758.5453123);\n\t\t\t}"),i=new $se('vec3 voronoiNoise(in vec3 x)\n\t\t\t{\n\t\t\t\tvec3 p = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\n\t\t\t\tfloat id = 0.0;\n\t\t\t\tvec2 res = vec2(100.0);\n\n\t\t\t\tfor(int k=-1; k<=1; k++)\n\t\t\t\tfor(int j=-1; j<=1; j++)\n\t\t\t\tfor(int i=-1; i<=1; i++)\n\t\t\t\t{\n\t\t\t\t\tvec3 b = vec3(float(i), float(j), float(k));\n\n\t\t\t\t\t// Comment out the "+ hash(p + b);" part below to get "square" cells\n\t\t\t\t\tvec3 r = vec3(b) - f + hash3(p + b);\n\t\t\t\t\tfloat d = dot(r, r);\n\n\t\t\t\t\tif (d < res.x)\n\t\t\t\t\t{\n\t\t\t\t\t\tid = dot(p + b, vec3(1.0, 57.0, 113.0));\n\t\t\t\t\t\tres = vec2(d, res.x);\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if (d < res.y)\n\t\t\t\t\t{\n\t\t\t\t\t\tres.y = d;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn vec3(sqrt(res), abs(id));\n\t\t\t}\n\t\t\t',[r]);return{toon:new $se('vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat t = 0.0;\n\t\t\t\tfloat shadow = 1.0;\n\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\t// Can\'t do this mode if lighting is "none"\n\t\t\t\t\t#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))\n\n\t\t\t\t\t\t// Algorithm from Chapter 10 of Graphics Shaders\n\t\t\t\t\t\tconst vec3 weights = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 lpos;\n\t\t\t\t\t\tvec3 l;\n\t\t\t\t\t\tfloat dproduct;\n\n\t\t\t\t\t\t#if (NUM_POINT_LIGHTS > 0)\n\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tPointLightShadow pointLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_POINT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Light positions are in view-space for some reason?\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// TODO: we want to use "intensity" but it isn\'t available in the shader code\n\t\t\t\t\t\t\t\t//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);\n\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tpointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getPointShadow( \n\t\t\t\t\t\t\t\t\t\t\tpointShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowRadius,\n\t\t\t\t\t\t\t\t\t\t\tvPointShadowCoord[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraNear, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraFar);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_DIR_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tDirectionalLightShadow directionalLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_DIR_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Use the direction vector for directional lights instead\n\t\t\t\t\t\t\t\tl = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;\n\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tdirectionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow( \n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tdirectionalShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tSpotLightShadow spotLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SPOT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tspotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow(\n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tspotShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvSpotLightCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tt = clamp(t, 0.0, 1.0);\n\t\t\t\t\n\t\t\t\t\t#endif\n\n\t\t\t\t} else if (positioning == 1) {\n\t\t\t\t\t\n\t\t\t\t\tvec3 origin = mix(position, worldPosition, float(isWorldSpace));\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvec3 origin = worldPosition;\n\t\t\t\t\tvec3 source = cameraPosition - offset;\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif (noiseStrength > 0.0) {\n\t\t\t\t\t// Distort with noise\n\t\t\t\t\tvec3 st = position / noiseScale;\n\t\t\t\t\t\n\t\t\t\t\t// Voronoi "smooth" noise\n\t\t\t\t\tfloat noise = 1.0 - voronoiNoise(st).x;\n\n\t\t\t\t\t// Voronoi cellular noise\n\t\t\t\t\t//float noise = 1.0 - rand(voronoiNoise(st).z);\n\n\t\t\t\t\t// Position warp noise\n\t\t\t\t\t// vec3 offset = vec3(\n\t\t\t\t\t// \tsimplex3d(st),\n\t\t\t\t\t// \tsimplex3d(st + vec3(111.1, 143.89, 217.19)),\n\t\t\t\t\t// \tsimplex3d(st + vec3(171.1, 247.89, 117.23))\n\t\t\t\t\t// );\n\t\t\t\t\t// st += offset;\n\t\t\t\t\t// float noise = valueNoise(st);\n\n\t\t\t\t\tt += noise * noiseStrength;\n\t\t\t\t}\n\n\t\t\t\tt = clamp(t, 0.0, 1.0);\n\n\t\t\t\t// Compute ramp color\n\t\t\t\tfloat p;\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tfor (int i = 1; i < COLORS_MAX; i++) {\n\t\t\t\t\tp = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);\n\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t}\n\n\t\t\t\t// Incorporate custom shadow color\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\tvec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);\n\t\t\t\t\tcolor.rgb = mix(blendedShadow, color.rgb, shadow);\n\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t// Accumulate alpha as usual\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\n            }',[rce.simplex,e,n,i])}}();var pce={textureBicubic:new $se("float w0( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n        }\n    \n        float w1( float a ) {\n            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n        }\n    \n        float w2( float a ){\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n        }\n    \n        float w3( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * a * a );\n        }\n    \n        // g0 and g1 are the two amplitude functions\n        float g0( float a ) {\n            return w0( a ) + w1( a );\n        }\n    \n        float g1( float a ) {\n            return w2( a ) + w3( a );\n        }\n    \n        // h0 and h1 are the two offset functions\n        float h0( float a ) {\n            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n        }\n    \n        float h1( float a ) {\n            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n        }\n    \n        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n            uv = uv * texelSize.zw + 0.5;\n    \n            vec2 iuv = floor( uv );\n            vec2 fuv = fract( uv );\n    \n            float g0x = g0( fuv.x );\n            float g1x = g1( fuv.x );\n            float h0x = h0( fuv.x );\n            float h1x = h1( fuv.x );\n            float h0y = h0( fuv.y );\n            float h1y = h1( fuv.y );\n    \n            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n    \n            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + \n                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n        }\n\n        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n            vec2 fLodSizeInv = 1.0 / fLodSize;\n            vec2 cLodSizeInv = 1.0 / cLodSize;\n            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n            return mix( fSample, cSample, fract( lod ) );\n        }")};var Ace=class extends Qse{constructor(e,t,n,r,i,o,a,s){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=n,this.transmissionSamplerSize=r,this.transmissionSamplerMap=i,this.transmissionDepthMap=o,this.aspectRatio=a,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,yce.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let n=e.include(Ace.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},fce=Ace;fce.Nodes=function(){let e=new $se("vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {\n                // Slightly modified version of this:\n                // https://www.shadertoy.com/view/ltScRG\n\n\t\t\t\t// Special case for blur == 0.0\n\t\t\t\tif (lod == 0.0) {\n\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\treturn texture2DLodEXT( sp, U, 0.0).rgb;\n\t\t\t\t\t#else\n\t\t\t\t\treturn textureLod( sp, U, 0.0).rgb;\n\t\t\t\t\t#endif\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec2 texelSize = vec2(1.0) / resolution;\n                vec2 halton = haltonSequence[frameIndex];\n                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n                float temporalAngle  = temporalOffset * PI2;\n\t\t\t\tvec3 res = vec3(0.0);\n                vec2 uv = vec2(0.0);\n                vec2 offset = vec2(0.0);\n                vec2 vogelSample = vec2(0.0);\n                for (int i = 0; i < NUM_SAMPLES; i++) {\n                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;\n                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20\n                    uv = U + offset;\n                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));\n                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {\n                        uv = unrefractedU;\n                        lod = lod > 4.0 ? lod : lod / 2.0;\n                    }\n                    res += textureLod(sp, uv, lod).rgb;\n                }\n                return res / float(NUM_SAMPLES);\n            }"),t=new $se("vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\t        // Direction of refracted light.\n\t\t        vec3 refractionVector = refract( -v,  n, 1.0 / ior );\n\t\t        \n\t\t\t\t// Compute rotation-independant scaling of the model matrix.\n\t\t        vec3 modelScale;\n\t\t        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\t        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\t        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t        // The thickness is specified in local space\n\t\t        return normalize( refractionVector ) * thickness * modelScale;\n\t        }"),n=new $se("float applyIorToRoughness( float roughness, float ior ) {\n\t\t\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\t\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t\t\t}"),r=new $se('vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {\n\t\t\t\t// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see\n\t\t\t\t// also the code in convertTransmission.ts, which runs during export\n\t\t\t\t#ifdef IS_THREEJS_EXPORT\n\t\t\t\t\tfloat lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);\n\t\t\t\t\treturn textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;\n\t\t\t\t#else\n\t\t\t\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t\t\t\tfloat lod = applyIorToRoughness(roughness, ior);\n\t\t\t\t\treturn blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);\n\t\t\t\t#endif\n\t\t\t}',[pce.textureBicubic,n,e]),i=new $se("vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\n\t\t\t\tvec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );\n\t\t\t\tvec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;\n\t\t\t\tunrefractedCoords += 1.0;\n\t\t\t\tunrefractedCoords /= 2.0;\n\n\t\t\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\t\t\treturn getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );\n    \t\t}",[r,t]);return{transmission:new $se("vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {\n                vec3 v = vec3(0.);\n                if (isOrthographic) {\n                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n                } else {\n                    v = normalize(vWPosition - cameraPosition);\n                }\n                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );\n                \n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n\n\t\t\t\treturn transmission;\n            }",[i])}}();var mce=(e=>(e.NOISE="noise",e.MAP="map",e))(mce||{}),gce=class extends Qse{constructor(e,t,n,r,i,o,a,s,l,c,u){super("v3"),this.displacementTypeIndex=new Dle(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,"map"===Object.values(mce)[this.displacementTypeIndex.value]&&(this.mat=new Rle(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=c,this.noiseFunctionIndex=u,this.voronoiStyle=r,this.smoothness=i,this.seed=o,this.highCut=a,this.lowCut=s,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let n,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(mce)[this.displacementTypeIndex.value]){case"map":n=e.include(gce.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break;case"noise":{let t=Object.values(nce)[this.noiseFunctionIndex.value],i=new $se("vec3 orthogonal(vec3 v) {\n\t\t\t\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t\t\t\t}"),o=new $se(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {\n\t\t\t\t\t\t\t${"voronoi"==t?`\n\t\t\t\t\tfloat v = ${t}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);\n\t\t\t\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\t\t\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\t\t\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t\t\t\treturn p + n * v * intensity;\n\t\t\t\t\t`:`\n\t\t\t\t\treturn p + n * ${t}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;\n\t\t\t\t\t`}\n\t\t\t\t\t\t}`,[rce.simplex,rce.simplexFractal,rce.simplexAshima,rce.fbm,rce.perlin,rce.voronoi]),a=new $se("vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {\n\t\t\t\t\t\t\tvec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 tangent1 = orthogonal(normal);\n\t\t\t\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\n                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.\n                            // This caused some small oval/circular visual artifacts in the lighting.\n                            // For now, simply using neighbors further away betters the problem,\n                            // but we should figure out the underlying cause when we have some time.\n                            // Maybe its related to how we calculate the tangent and bitangent?\n\t\t\t\t\t\t\tvec3 nearby1 = position + tangent1;\n\t\t\t\t\t\t\tvec3 nearby2 = position + tangent2;\n\t\t\t\t\t\t\tvec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\t\t\t\treturn displaced_position;\n\t\t\t\t\t\t}",[o,i]);n=e.include(a),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f")),r.push(this.voronoiStyle.build(e,"i")),r.push(this.smoothness.build(e,"f")),r.push(this.seed.build(e,"f")),r.push(this.highCut.build(e,"f")),r.push(this.lowCut.build(e,"f")),r.push(this.quality.build(e,"i"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return e.format("vec3( 0.0 )",this.getType(e),t)}},vce=gce;vce.Nodes=function(){let e=new $se("vec3 orthogonal(vec3 v) {\n\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t}"),t=new $se("float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {\n\t\t\t\tvec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;\n\t\t\t\tvec4 tmp = texture2D(tex, uvs);\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tif (crop > 0.5) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\treturn 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn col.r;\n\t\t\t}");return{map:new $se("vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {\n\t\t\t\tvec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;\n\t\t\t\tvec3 tangent1 = normalize(orthogonal(normal));\n\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\t\t\t\tvec3 nearby1 = position + tangent1 * 0.1;\n\t\t\t\tvec3 nearby2 = position + tangent2 * 0.1;\n\t\t\t\tvec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tvec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\treturn displaced_position;\n\t\t\t}",[e,t])}}();var yce={normalRenderTarget:new lle,normalRenderTargetDepth:new lle,transmissionRenderTarget:new lle,aspectRatio:new Wse,transmissionSize:new Wse(2048,2048),transmissionRenderTargetDepth:new lle,aoRenderTarget:new lle,aoEnabled:new Fle,pixelRatioNode:new cle(1),resolution:new Wse,penumbraSize:new Ile(5,.5),frameIndex:new Dle(0),transmissionLod:new Dle(2)};for(let nTe of Object.values(yce))nTe.isRenderGlobal=!0;var bce,wce={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.9.21/build/ui.wasm"},xce=class extends Nse{constructor(){super("basic"),this.nodeType="Basic",this.color=new Tle(uee),this.shadingAlpha=new cle(1),this.shadingBlend=new Dle(0),this.previousModelViewMatrix=new Ule,this.previouseProjectionMatrix=new Ule}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({resolution:yce.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(LK.merge([tY.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","\tvNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{void 0===this.color&&(this.color=new Tle(uee)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let n=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,i=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=void 0!==r,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join("\n"));let a=["#include <normal_fragment_begin>",n.code];r&&a.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),o?a.push(o.code,`vec3 outgoingLight = ${n.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`):a.push(`vec3 finalColor = ${n.result};`);let s="1.0";this.mask&&(this.mask.analyze(e),s=`luminance(${this.mask.flow(e,"v3").result})`),r?a.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} * ${s} );`):a.push("gl_FragColor = vec4("+n.result+", 1.0 );"),i&&a.push(`gl_FragColor.a *= ${i.result};`),a.push("#include <fog_fragment>","#include <dithering_fragment>"),t=a.join("\n")}return t}},Cce=class extends Nse{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Tle(uee),this.emissive=new Tle(0),this.emissiveIntensity=new cle(1),this.previousModelViewMatrix=new Ule,this.previouseProjectionMatrix=new Ule,this.shadingAlpha=new cle(1),this.shadingBlend=new Dle(0),this.occlusion=new Fle(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({resolution:yce.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(LK.merge([tY.fog,tY.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\n\t\t\t\t\tvec3 diffuse = vec3( 1.0 );\n\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\tgeometry.position = mvPosition.xyz;\n\t\t\t\t\tgeometry.normal = normalize( transformedNormal );\n\t\t\t\t\tgeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\t\t\t\t"),r.push("\n\t\t\t\t\tGeometricContext backGeometry;\n\t\t\t\t\tbackGeometry.position = geometry.position;\n\t\t\t\t\tbackGeometry.normal = -geometry.normal;\n\t\t\t\t\tbackGeometry.viewDir = geometry.viewDir;\n\t\t\t\t\tvLightFront = vec3( 0.0 );\n\t\t\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\tfloat dotNL;\n\t\t\t\t\tvec3 directLightColor_Diffuse;\n\t\t\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_POINT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_DIR_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_HEMI_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{e.mergeUniform({penumbraSize:yce.penumbraSize}),e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({aoMap:yce.aoRenderTarget}),e.mergeUniform({aoEnabled:yce.aoEnabled}),void 0===this.color&&(this.color=new Tle(uee)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),i=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),o=this.occlusion.flow(e,"b",{slot:"occlusion"}),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let d=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx, viewdy));\n\t\t\t\tbool isFrontFacing = (dot(normal, faceNormal) >= 0.0);\n\t\t\t\t","#include <clipping_planes_fragment>"];d.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&d.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),d.push("#ifdef DOUBLE_SIDED","\treflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","\treflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","\treflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","\treflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&d.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+i.result+";"),d.push("vec3 ao = aoEnabled && "+o.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${h} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${h}, ${s.result} );\n\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&d.push(`gl_FragColor.a *= ${u.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join("\n")}return t}},Sce={dHdxy:new $se("vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {\n\n            // Gradient of UVs w.r.t. X coordinate (in screen-space)\n            vec2 dSTdx = dFdx(bumpMapUv);\n\n            // Gradient of UVs w.r.t. Y coordinate (in screen-space)\n            vec2 dSTdy = dFdy(bumpMapUv);\n            \n            // Forward differencing\n            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);\n            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;\n            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;\n            \n            return vec2( dBx, dBy );\n        }"),perturbNormalArb:new $se("vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n            vec3 vSigmaX = dFdx( surf_pos.xyz );\n            vec3 vSigmaY = dFdy( surf_pos.xyz );\n            vec3 vN = surf_norm; // normalized\n            \n            vN = normalize(vN);\n\n            vec3 R1 = cross( vSigmaY, vN );\n            vec3 R2 = cross( vN, vSigmaX );\n\n            R1 = normalize(R1);\n            R2 = normalize(R2);\n    \n            float fDet = dot( vSigmaX, R1 ) * faceDirection;\n    \n            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n            return normalize( abs( fDet ) * vN - vGrad );\n        }")},Bce=class extends Nse{constructor(){super("phong"),this.nodeType="Phong",this.color=new Tle(uee),this.specular=new Tle(1118481),this.shininess=new cle(30),this.previousModelViewMatrix=new Ule,this.previouseProjectionMatrix=new Ule,this.shadingAlpha=new cle(1),this.shadingBlend=new Dle(0),this.occlusion=new Fle(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({resolution:yce.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(LK.merge([tY.fog,tY.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{e.mergeUniform({penumbraSize:yce.penumbraSize}),e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({aoMap:yce.aoRenderTarget}),e.mergeUniform({aoEnabled:yce.aoEnabled}),void 0===this.color&&(this.color=new Tle(uee)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let n=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),o=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let d=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tBlinnPhongMaterial material;"];if(this.bumpMap){e.include(Sce.dHdxy),e.include(Sce.perturbNormalArb);let t=this.bumpMap.texture.flow(e,"t"),n=this.bumpMap.flow(e,"v3"),r=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",i="";i=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${t.result}, uv0, ${r});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${t.result}, uv1, ${r});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${t.result}, uv2, ${r});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${t.result}, bumpMapCachedUv, ${r});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,d.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${n.result};\n\t\t\t\t\t${i}\n\t\t\t\t\t`)}d.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;",i.code,"\tvec3 specular = "+i.result+";",o.code,"\tfloat shininess = max( 0.0001, "+o.result+" );","\tfloat specularStrength = 1.0;"),c&&d.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled && "+n.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${h} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${h}, ${s.result} );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result});`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&d.push(`gl_FragColor.a *= ${u.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join("\n")}return t}},_ce=class extends Nse{constructor(){super("standard"),this.nodeType="Standard",this.color=new Tle(uee),this.roughness=new cle(.3),this.metalness=new cle(0),this.reflectivity=new cle(.5),this.previousModelViewMatrix=new Ule,this.previouseProjectionMatrix=new Ule,this.shadingAlpha=new cle(1),this.shadingBlend=new Dle(0),this.occlusion=new Fle(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({resolution:yce.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(LK.merge([tY.fog,tY.lights])),tY.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{e.mergeUniform({penumbraSize:yce.penumbraSize}),e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({aoMap:yce.aoRenderTarget}),e.mergeUniform({aoEnabled:yce.aoEnabled});let n={gamma:!0};void 0===this.color&&(this.color=new Tle(uee)),this.color.analyze(e,{slot:"color",context:n}),this.roughness.analyze(e),this.metalness.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let i=this.color.flow(e,"c",{slot:"color",context:n}),o=this.roughness.flow(e,"f"),a=this.metalness.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=void 0!==u,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join("\n"));let p=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Sce.dHdxy),e.include(Sce.perturbNormalArb);let t=this.bumpMap.texture.flow(e,"t"),n=this.bumpMap.flow(e,"v3"),r=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",i="";i=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${t.result}, uv0, ${r});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${t.result}, uv1, ${r});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${t.result}, uv2, ${r});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${t.result}, bumpMapCachedUv, ${r});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${n.result};\n\t\t\t\t\t${i}\n\t\t\t\t\t`)}if(p.push(i.code,"\tvec3 diffuseColor = "+i.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"\tfloat metalnessFactor = "+a.result+";"),this.roughnessMap){let t=this.roughnessMap.texture.flow(e,"t"),n=this.roughnessMap.flow(e,"v3"),r="";r=4===this.roughnessMap.projection.value?`\n\t\t\t\t\tfloat roughnessChange = 1.0;\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tfloat r0 = luminance(texture(${t.result}, uv0).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r1 = luminance(texture(${t.result}, uv1).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r2 = luminance(texture(${t.result}, uv2).rgb) * roughnessScale;\n\n\t\t\t\t\t\troughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);\n\t\t\t\t\t}\n\t\t\t\t\tfloat roughnessFactor = roughnessChange * ${o.result};\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\n\t\t\t\t\tvec4 vals = texture(${t.result},  roughnessMapCachedUv);\n\t\t\t\t\tfloat roughnessFactor = luminance(vals.rgb) * ${o.result};\n\t\t\t\t\t`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${n.result};\n\n\t\t\t\t\tconst float roughnessScale = 1.0;\n\n\t\t\t\t\t${r}\n\t\t\t\t`)}else p.push(o.code,"\tfloat roughnessFactor = "+o.result+";");u&&p.push(u.code,"#ifdef ALPHATEST","\tif ( "+u.result+" <= ALPHATEST ) discard;","#endif"),p.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),p.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?p.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):p.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),p.push("#include <lights_fragment_begin>"),p.push("#include <lights_fragment_end>"),p.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let A="1.0";this.mask&&(this.mask.analyze(e),A=`luminance(${this.mask.flow(e,"v3").result})`),p.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${A} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${A}, ${l.result} );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),c&&p.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),u?p.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&p.push(`gl_FragColor.a *= ${d.result};`),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=p.join("\n")}return t}},Ece=class extends Nse{constructor(){super("toon"),this.nodeType="Toon",this.color=new Tle(uee),this.specular=new Tle(1118481),this.shininess=new cle(30),this.previousModelViewMatrix=new Ule,this.previouseProjectionMatrix=new Ule,this.shadingAlpha=new cle(1),this.shadingBlend=new Dle(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({resolution:yce.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(LK.merge([tY.fog,tY.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{e.mergeUniform({penumbraSize:yce.penumbraSize}),e.mergeUniform({frameIndex:yce.frameIndex}),e.mergeUniform({aoMap:yce.aoRenderTarget}),e.mergeUniform({aoEnabled:yce.aoEnabled}),void 0===this.color&&(this.color=new Tle(uee)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),i=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>","\n\t\t\t\t\tvarying vec3 vViewPosition;\n\t\t\t\t\tstruct ToonMaterial {\n\t\t\t\t\t\tvec3\tdiffuseColor;\n\t\t\t\t\t\tvec3\tspecularColor;\n\t\t\t\t\t\tfloat\tspecularShininess;\n\t\t\t\t\t\tfloat\tspecularStrength;\n\t\t\t\t\t};\n\t\t\t\t\tvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t\t\t\n\t\t\t\t\t\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\t\t\t\t\t}\n\t\t\t\t\tvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\t\t\t\t\t#define RE_Direct\t\t\t\tRE_Direct_Toon\n\t\t\t\t\t#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\t\t\t\t\t#define Material_LightProbeLOD( material )\t(0)\n\t\t\t\t\t","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join("\n"));let u=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tToonMaterial material;"];if(this.bumpMap){e.include(Sce.dHdxy),e.include(Sce.perturbNormalArb);let t=this.bumpMap.texture.flow(e,"t"),n=this.bumpMap.flow(e,"v3"),r=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",i="";i=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${t.result}, uv0, ${r});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${t.result}, uv1, ${r});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${t.result}, uv2, ${r});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${t.result}, bumpMapCachedUv, ${r});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,u.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${n.result};\n\t\t\t\t\t${i}\n\t\t\t\t\t`)}u.push(n.code,"\tvec3 diffuseColor = "+n.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"\tvec3 specular = "+r.result+";",i.code,"\tfloat shininess = max( 0.0001, "+i.result+" );","\tfloat specularStrength = 1.0;"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${d} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${d}, ${a.result} );\n\t\t\t\t}\n\t\t\t\t`),s&&u.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&u.push(`gl_FragColor.a *= ${c.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join("\n")}return t}},Mce=class{constructor(e=1e4){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout((()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")}),this.timeout+1e3))}has(e){var t;return null==(t=this.cache.get(e))?void 0:t.data}load(e){let t=Date.now(),n=this.cache.get(e);return void 0===n?(n={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,n)):(n.time=t,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}},Pce=class extends Mce{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}};var Tce=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,0===this.refCount&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount,0}},Dce=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data),0}load(e){let t=this.cache.get(e);return void 0===t&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},Fce=class extends Tce{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo="video"===e.type,this.isBuffer=!0===e.isWebGLRenderTarget,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;for(let e of Object.values(this._cache))for(let t of Object.values(e))for(let e of Object.values(t))e&&(e.image=this.img,e.needsUpdate=!0);this.shared.requestRender()};if(this.isBuffer)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,"string"!=typeof e){var n=new FileReader;let t;n.readAsDataURL(new Blob([e],{type:"video/mp4"})),await new Promise((e=>{n.onloadend=n=>{var r;t=null==(r=n.target)?void 0:r.result,e(null)}})),this.img.src=t}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=function(e){return"string"==typeof e?e:(bce||(bce=new Pce),bce.load(e))}(e),this.img.onload=t}getTexture(e,t=1008,n=1006){var r,i;let o=null==(i=null==(r=this._cache[e])?void 0:r[t])?void 0:i[n];if(o)return o;{let r;return r=this.isBuffer?this.img.texture:this.isVideo?new oJ(this.img,void 0,e,e):new OG(this.img,void 0,e,e,n,t),this.loaded&&(r.needsUpdate=!0),void 0===this._cache[e]&&(this._cache[e]={}),void 0===this._cache[e][t]&&(this._cache[e][t]={}),this._cache[e][t][n]=r,r}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let n of Object.values(t))for(let t of Object.values(n))t&&(t.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[n,r]of Object.entries(t))for(let[t,i]of Object.entries(r))null==i||i.dispose(),void 0!==this._cache[e]&&void 0!==this._cache[e][n]&&(this._cache[e][n][t]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},Ice=class extends Fce{};function kce(e,t){var n=function(e){if(!Lce[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n="06/25/2014, 00:00:00"===t||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===t;Lce[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Lce[e]}(t);return n.formatToParts?function(e,t){try{for(var n=e.formatToParts(t),r=[],i=0;i<n.length;i++){var o=Oce[n[i].type];o>=0&&(r[o]=parseInt(n[i].value,10))}return r}catch(R9){if(R9 instanceof RangeError)return[NaN];throw R9}}(n,e):function(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}(n,e)}var Oce={year:0,month:1,day:2,hour:3,minute:4,second:5};var Lce={};function Rce(e,t,n,r,i,o,a){var s=new Date(0);return s.setUTCFullYear(e,t,n),s.setUTCHours(r,i,o,a),s}var Uce=36e5,zce=6e4,Nce={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function jce(e,t,n){var r,i,o;if(!e||(r=Nce.timezoneZ.exec(e)))return 0;if(r=Nce.timezoneHH.exec(e))return Qce(o=parseInt(r[1],10))?-o*Uce:NaN;if(r=Nce.timezoneHHMM.exec(e)){o=parseInt(r[1],10);var a=parseInt(r[2],10);return Qce(o,a)?(i=Math.abs(o)*Uce+a*zce,o>0?-i:i):NaN}if(function(e){if(Vce[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Vce[e]=!0,!0}catch{return!1}}(e)){t=new Date(t||Date.now());var s=n?t:function(e){return Rce(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),l=Hce(s,e),c=n?l:function(e,t,n){var r=e.getTime(),i=r-t,o=Hce(new Date(i),n);if(t===o)return t;i-=o-t;var a=Hce(new Date(i),n);return o===a?o:Math.max(o,a)}(t,l,e);return-c}return NaN}function Hce(e,t){var n=kce(e,t),r=Rce(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=e.getTime(),o=i%1e3;return r-(i-=o>=0?o:1e3+o)}function Qce(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var Vce={};var Wce=cQ(fQ(),1),Gce=cQ(mQ(),1),qce=36e5,Kce=6e4,Yce=2,Xce={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function $ce(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n={},r=null==n.additionalDigits?Yce:(0,Wce.default)(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i=function(e){var t,n={},r=Xce.dateTimePattern.exec(e);if(r?(n.date=r[1],t=r[3]):(r=Xce.datePattern.exec(e),r?(n.date=r[1],t=r[2]):(n.date=null,t=e)),t){var i=Xce.timeZone.exec(t);i?(n.time=t.replace(i[1],""),n.timeZone=i[1].trim()):n.time=t}return n}(e),o=function(e,t){var n,r=Xce.YYY[t],i=Xce.YYYYY[t];if(n=Xce.YYYY.exec(e)||i.exec(e),n){var o=n[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(n=Xce.YY.exec(e)||r.exec(e),n){var a=n[1];return{year:100*parseInt(a,10),restDateString:e.slice(a.length)}}return{year:null}}(i.date,r),a=o.year,s=function(e,t){if(null===t)return null;var n,r,i,o;if(0===e.length)return r=new Date(0),r.setUTCFullYear(t),r;if(n=Xce.MM.exec(e),n)return r=new Date(0),i=parseInt(n[1],10)-1,nue(t,i)?(r.setUTCFullYear(t,i),r):new Date(NaN);if(n=Xce.DDD.exec(e),n){r=new Date(0);var a=parseInt(n[1],10);return function(e,t){if(t<1)return!1;var n=tue(e);return!(n&&t>366||!n&&t>365)}(t,a)?(r.setUTCFullYear(t,0,a),r):new Date(NaN)}if(n=Xce.MMDD.exec(e),n){r=new Date(0),i=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return nue(t,i,s)?(r.setUTCFullYear(t,i,s),r):new Date(NaN)}if(n=Xce.Www.exec(e),n)return o=parseInt(n[1],10)-1,rue(t,o)?Jce(t,o):new Date(NaN);if(n=Xce.WwwD.exec(e),n){o=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return rue(t,o,l)?Jce(t,o,l):new Date(NaN)}return null}(o.restDateString,a);if(isNaN(s))return new Date(NaN);if(s){var l,c=s.getTime(),u=0;if(i.time&&(u=function(e){var t,n,r;if(t=Xce.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),iue(n)?n%24*qce:NaN;if(t=Xce.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),iue(n,r)?n%24*qce+r*Kce:NaN;if(t=Xce.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return iue(n,r,i)?n%24*qce+r*Kce+1e3*i:NaN}return null}(i.time),isNaN(u)))return new Date(NaN);if(i.timeZone||n.timeZone){if(l=jce(i.timeZone||n.timeZone,new Date(c+u)),isNaN(l))return new Date(NaN)}else l=(0,Gce.default)(new Date(c+u)),l=(0,Gce.default)(new Date(c+u+l));return new Date(c+u+l)}return new Date(NaN)}function Jce(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var Zce=[31,28,31,30,31,30,31,31,30,31,30,31],eue=[31,29,31,30,31,30,31,31,30,31,30,31];function tue(e){return e%400==0||e%4==0&&e%100!=0}function nue(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var r=tue(e);if(r&&n>eue[t]||!r&&n>Zce[t])return!1}return!0}function rue(e,t,n){return!(t<0||t>52||null!=n&&(n<0||n>6))}function iue(e,t,n){return!(null!=e&&(e<0||e>=25)||null!=t&&(t<0||t>=60)||null!=n&&(n<0||n>=60))}function oue(e,t){return t.color(e)}function aue(e=new Date,t){let n=t.format,r=e.getSeconds(),i=e;t&&null!==t.timeZone&&(i=function(e,t,n){var r=$ce(e,n),i=jce(t,r,!0),o=new Date(r.getTime()-i),a=new Date(0);return a.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),a.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),a}(new Date,t.timeZone));let o,a=i.getHours(),s=i.getMinutes();"12ampm"===t.format12h24h&&(o=a>=12?"PM":"AM");let l,c,u=a;switch("24"!==t.format12h24h&&(u=a%12,0===u&&(u=12)),n){case"HH:mm:ss":l=[u,s,r];break;case"HH:mm":l=[u,s];break;case"HH":l=[u],o=void 0;break;case"mm":l=[s],o=void 0;break;case"ss":l=[r],o=void 0;break;case"year":c=i.getFullYear();break;case"month":c=i.getMonth()+1;break;case"dayOfYear":c=Math.floor((i.getTime()-new Date(i.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":c=i.getDate();break;case"secondOfDay":c=60*a*60+60*s+r;break;default:c=0}return void 0!==l?{textValue:l,suffix:o}:c}function sue(e,t){switch(e.type){case"fresnel":return function(e,t){let{bias:n,scale:r,intensity:i,factor:o,color:a}=e;return{...cue(e,t),color:oue(a,t),bias:n,scale:r,intensity:i,factor:o}}(e,t);case"gradient":return function(e,t){let{gradientType:n,smooth:r,colors:i,steps:o,angle:a,offset:s,morph:l}=e;return{...cue(e,t),gradientType:n,smooth:r,colors:i.map((e=>new LG(e[0],e[1],e[2],e[3]))),num:i.length,steps:o,offset:new hG(...s),morph:new hG(...l),angle:a}}(e,t);case"depth":return function(e,t){let{gradientType:n,near:r,far:i,isVector:o,isWorldSpace:a,origin:s,direction:l,colors:c,steps:u,smooth:d}=e;return{...cue(e,t),gradientType:n,near:r,far:i,isVector:o,isWorldSpace:a,origin:new jG(...s),direction:l?new jG(...l):new jG(1,0,0),colors:c.map((e=>void 0!==e?new LG(e[0],e[1],e[2],e[3]):new LG(0,0,0,0))),steps:u.slice(0,c.length),smooth:d}}(e,t);case"normal":return function(e,t){let{cnormal:n}=e;return{...cue(e,t),cnormal:new jG(n[0],n[1],n[2])}}(e,t);case"noise":return function(e,t){return{...cue(e,t),scale:e.scale,move:e.move,fA:new hG(...e.fA),fB:new hG(...e.fB),size:new jG(...e.size),distortion:new hG(...e.distortion),colorA:oue(e.colorA,t),colorB:oue(e.colorB,t),colorC:oue(e.colorC,t),colorD:oue(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}(e,t);case"rainbow":return function(e,t){return{...cue(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new jG(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new jG(...e.offset)}}(e,t);case"toon":return function(e,t){return{...cue(e,t),positioning:e.positioning,colors:e.colors.map((e=>new LG(e[0],e[1],e[2],e[3]))),num:e.colors.length,steps:e.steps,source:new jG(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:oue(e.shadowColor,t),offset:new jG(...e.offset)}}(e,t);case"outline":return function(e,t){return{...cue(e,t),outlineColor:oue(e.outlineColor,t),contourColor:oue(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new jG(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}(e,t);case"transmission":return function(e,t){return{...cue(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}(e,t);case"color":return function(e,t){return{...cue(e,t),color:oue(e.color,t)}}(e,t);case"pattern":return function(e,t){return{...cue(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new hG(...e.offset),colorA:oue(e.colorA,t),colorB:oue(e.colorB,t),frequency:new hG(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new hG(...e.vertical),horizontal:new hG(...e.horizontal),sides:e.sides}}(e,t)}}function lue(e){return{type:e.type}}function cue(e,t){let{alpha:n,mode:r,isMask:i}=e,o="string"==typeof n?(Number(t.getVariable(n))??100)/100:n;return{...lue(e),alpha:o,mode:r,isMask:i}}var uue=class extends qse{},due={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},hue={depth:["colors"]};function pue(e,t,n){var r,i;if("isMask"===t)return!0;let o=due[e.type],a=hue[e.type];if(void 0!==a){let o=e.color;if(a.includes(t)){let e=null==(i=null==(r=o[t])?void 0:r.value)?void 0:i.length;if(void 0!==e&&e!==n.length)return!0}}return void 0!==o&&o.includes(t)}function Aue(e,t,n){let r=n.uniforms[`f${n.id}_texture`];if(!r)return!1;let i=!1,o=e;if("image"in o){let e=o.image,n=t.image(e),i=r;i.image instanceof Ice||i.image.deref(),i.image=n}if("video"in o){let e=o.video,n=t.video(e),i=r;i.image instanceof Ice||i.image.deref(),i.image=n}if("wrapping"in o){r.wrap=o.wrapping}if("minFilter"in o){r.minFilter=o.minFilter}if("magFilter"in o){r.magFilter=o.magFilter}if("rotation"in o&&n.uniforms[`f${n.id}_rotation`])return n.uniforms[`f${n.id}_rotation`].value=(o.rotation??0)*dG.DEG2RAD,i;if("repeat"in o||"offset"in o||"rotation"in o){let e="mat",t=n.uniforms[`f${n.id}_${e}`];"repeat"in o&&(t.repeat=o.repeat),"offset"in o&&(t.offset=o.offset),"rotation"in o&&(t.rotation=o.rotation??0),t.updateMatrix()}return i}var fue=(e,t,n)=>Math.max(0,Math.min(1,Number(t.getVariable("number"==typeof e?100*e:e,n)??100)/100))??1,mue=class{constructor(e,t,n,r,i){this.id=e,this.uuid=t,this.data=n,this.uniforms={};for(let o in r)this.uniforms[`f${this.id}_${o}`]=r[o];for(let o in n)wue(o,this,n,i)}get type(){return this.data.type}static create(e,t,n,r){if("light"===n.type)return yue.createLigherLayer(e,t,n,r);if("texture"===n.type||"video"===n.type){let i="texture"===n.type?r.uiBuffer(n.texture.image)??r.image(n.texture.image):r.video(n.texture.video),o=new Lle(i,n.texture.wrapping,n.texture.minFilter??1008,n.texture.magFilter??1006),a=new Ole(i),s=new Nle(n.texture.repeat,n.texture.offset,n.texture.rotation??0),l=new cle(n.crop?1:0),c=new Dle(n.projection??0),u=new Dle(["x","y","z"].indexOf(n.axis)??0),d=new Dle(n.side??0),h=new Wse(n.size?new hG(n.size[0],n.size[1]):new hG(100,100)),p=new cle(n.blending??0),A=new cle(fue(n.alpha,r)),f=new Dle(n.mode??0),m=new Fle(n.isMask??!1),g=new Kle(o,a,l,c,u,d,h,p,s,A,f,m),v=new sle(g.calpha,"f");return new gue(e,t,n,{texture:o,textureSize:a,crop:l,projection:c,axis:u,side:d,size:h,blending:p,mat:s,alpha:A,mode:f,isMask:m},g,f,v,m,r)}if("matcap"===n.type){let i=r.image(n.texture.image),o=new Lle(i,n.texture.wrapping,n.texture.minFilter??1008,n.texture.magFilter??1006),a=new cle(fue(n.alpha,r)),s=new Dle(n.mode??0),l=new Fle(n.isMask??!1),c=new cle((n.texture.rotation??0)*dG.DEG2RAD),u=new tce(o,a,s,l,c),d=new sle(u.calpha,"f");return new gue(e,t,n,{texture:o,alpha:a,mode:s,isMask:l,rotation:c},u,s,d,l,r)}if("displace"===n.type){if("noise"===n.displacementType){let i=new Gse(new jG(...n.offset)),o=new cle(n.scale??10),a=new cle(n.intensity??8),s=new cle(n.movement??1),l=new Dle(n.noiseType??0),c=new Dle(n.voronoiStyle??0),u=new cle(n.smoothness??.5),d=new cle(n.seed??0),h=new cle(n.highCut??1),p=new cle(n.lowCut??0),A=new Dle(n.quality??1),f=new vce(a,s,i,c,u,d,h,p,A,o,l);return new vue(e,t,n,{offset:i,scale:o,intensity:a,movement:s,noiseType:l,voronoiStyle:c,smoothness:u,seed:d,highCut:h,lowCut:p,quality:A},f,r)}throw new Error}return function(e,t,n,r){let i=sue(n,r);return function(e,t,n,r,i){switch(e.type){case"color":{let o=new Tle(r.color??uee),a=bue(r),s=new Vle(o,a.alpha),l=new sle(s.calpha,"f");return new gue(t,n,e,{color:o,...a},s,a.mode,l,a.isMask,i)}case"fresnel":{let o=new Tle(r.color??16777215),a=new cle(r.bias??.1),s=new cle(r.scale??1),l=new cle(r.intensity??2),c=new cle(r.factor??1),u=bue(r),d=new $le(o,a,s,l,c,u.alpha,u.mode,u.isMask),h=new sle(d.calpha,"f");return new gue(t,n,e,{color:o,bias:a,scale:s,intensity:l,factor:c,...u},d,u.mode,h,u.isMask,i)}case"rainbow":{let o=new cle(r.filmThickness??30),a=new cle(r.movement??0),s=new Gse(r.wavelengths??new jG(0,0,0)),l=new cle(r.noiseStrength??0),c=new cle(r.noiseScale??1),u=new Gse(r.offset??new jG(0,0,0)),d=bue(r),h=new uce(o,a,s,l,c,u,d.alpha,d.isMask),p=new sle(h.calpha,"f");return new gue(t,n,e,{filmThickness:o,movement:a,wavelengths:s,noiseStrength:l,noiseScale:c,offset:u,...d},h,d.mode,p,d.isMask,i)}case"transmission":{let o=new cle(r.thickness??10),a=new cle(r.ior??1.5),s=new cle(r.roughness??.5),l=yce.transmissionSize,c=yce.transmissionRenderTarget,u=yce.transmissionRenderTargetDepth,d=window.innerWidth,h=window.innerHeight,p=d>=h?new Wse(h/d,1):new Wse(1,d/h),A=bue(r),f=new fce(o,a,s,l,c,u,p,A.alpha),m=new sle(f.calpha,"f");return new gue(t,n,e,{thickness:o,ior:a,roughness:s,aspectRatio:p,...A},f,A.mode,m,A.isMask,i)}case"toon":{let o,a,s=new Dle(r.positioning??0);r.colors?o=new jle(r.colors.length,r.colors):(o=new jle(10,new LG(0,0,0,1)),o.value[1]=new LG(1,1,1,1)),r.steps?a=new Ile(r.steps.length,r.steps):(a=new Ile(10,1),a.value[0]=0);let l=new Gse(r.source??new jG(0,0,0)),c=new Fle(r.isWorldSpace??!0),u=new cle(r.noiseStrength??0),d=new cle(r.noiseScale??1),h=new Kse(r.shadowColor),p=new Gse(r.offset??new jG(0,0,0)),A=bue(r),f=new hce(s,o,a,l,c,u,d,h,p,A.alpha),m=new sle(f.calpha,"f");return new gue(t,n,e,{positioning:s,colors:o,steps:a,source:l,isWorldSpace:c,noiseStrength:u,noiseScale:d,shadowColor:h,offset:p,...A},f,A.mode,m,A.isMask,i)}case"outline":{let o=new Tle(r.outlineColor??16777215),a=new Tle(r.contourColor??16777215),s=new cle(r.outlineWidth??.1),l=new cle(r.contourWidth??.1),c=new cle(r.outlineThreshold??.1),u=new cle(r.contourThreshold??.1),d=new cle(r.outlineSmoothing??.1),h=new cle(r.contourFrequency??.1),p=new Gse(r.contourDirection??new jG(0,1,0)),A=new Fle(r.positionalLines??!1),f=new Fle(r.compensation??!0),m=yce.normalRenderTarget,g=yce.normalRenderTargetDepth,v=yce.pixelRatioNode,y=yce.resolution,b=bue(r),w=new ace(o,a,s,l,c,u,d,h,p,A,f,y,m,g,v,b.alpha),x=new sle(w.calpha,"f");return new gue(t,n,e,{outlineColor:o,contourColor:a,outlineWidth:s,contourWidth:l,outlineThreshold:c,contourThreshold:u,outlineSmoothing:d,contourFrequency:h,contourDirection:p,positionalLines:A,compensation:f,...b},w,b.mode,x,b.isMask,i)}case"depth":{let o,a,s=new Dle(r.gradientType??0),l=new Fle(r.smooth??!1),c=new cle(r.near??50),u=new cle(r.far??200),d=new cle(r.isVector??1),h=new cle(r.isWorldSpace??0),p=new Gse(r.origin??new jG),A=new Gse(r.direction??new jG);r.colors?o=new jle(r.colors.length,r.colors):(o=new jle(2,new LG(0,0,0,1)),o.value[1]=new LG(1,1,1,1)),r.steps?a=new Ile(r.steps.length,r.steps):(a=new Ile(2,1),a.value[0]=0);let f=bue(r),m=new Xle(s,l,c,u,d,h,p,A,o,a,f.alpha,f.isMask),g=new sle(m.calpha,"f");return new gue(t,n,e,{gradientType:s,smooth:l,near:c,far:u,isVector:d,isWorldSpace:h,origin:p,direction:A,colors:o,steps:a,...f},m,f.mode,g,f.isMask,i)}case"noise":{let o=new cle(r.scale??1),a=new Gse(r.size??new jG(100,100,100)),s=new cle(r.move??1),l=new Wse(r.fA??new hG(1.7,9.2)),c=new Wse(r.fB??new hG(8.3,2.8)),u=new Wse(r.distortion??new hG(1,1)),d=new Kse(r.colorA),h=new Kse(r.colorB),p=new Kse(r.colorC),A=new Kse(r.colorD),f=new Dle(r.noiseType??0),m=new Dle(r.voronoiStyle??0),g=new cle(r.highCut??1),v=new cle(r.lowCut??0),y=new cle(r.smoothness??.5),b=new cle(r.seed??.5),w=new Dle(r.quality??1),x=bue(r),C=new ice(o,a,s,l,c,u,d,h,p,A,x.alpha,f,x.isMask,m,g,v,y,b,w),S=new sle(C.calpha,"f");return new gue(t,n,e,{scale:o,size:a,move:s,fA:l,fB:c,distortion:u,colorA:d,colorB:h,colorC:p,colorD:A,noiseType:f,...x,voronoiStyle:m,highCut:g,lowCut:v,smoothness:y,seed:b,quality:w},C,x.mode,S,x.isMask,i)}case"normal":{let o=new Gse(r.cnormal??new jG(1,1,1)),a=bue(r),s=new Gle(o,a.alpha),l=new sle(s.calpha,"f");return new gue(t,n,e,{cnormal:o,...a},s,a.mode,l,a.isMask,i)}case"gradient":{let o,a,s=new Dle(r.gradientType??0),l=new Fle(r.smooth??!1);r.colors?o=new jle(r.colors.length,r.colors):(o=new jle(10,new LG(0,0,0,1)),o.value[1]=new LG(1,1,1,1)),r.steps?a=new Ile(r.steps.length,r.steps):(a=new Ile(10,1),a.value[0]=0);let c=new Wse(r.offset??new hG(0,0)),u=new Wse(r.morph??new hG(0,0)),d=new cle(r.angle??0),h=bue(r),p=new Zle(s,l,o,a,c,u,d,h.alpha,h.isMask),A=new sle(p.calpha,"f");return new gue(t,n,e,{gradientType:s,smooth:l,colors:o,steps:a,offset:c,morph:u,angle:d,...h},p,h.mode,A,h.isMask,i)}case"pattern":{let o=new Dle(r.style??0),a=new Dle(r.projection??0),s=new Dle(["x","y","z"].indexOf(r.axis)??0),l=new cle(r.blending??0),c=new Wse(r.offset??new hG(0,0)),u=new Kse(r.colorA),d=new Kse(r.colorB),h=new Wse(r.frequency??new hG(10,10)),p=new cle(r.size??.5),A=new cle(r.variation??0),f=new cle(r.smoothness??.5),m=new cle(r.zigzag??0),g=new cle(r.rotation??0),v=new Wse(r.vertical??new hG(0,1)),y=new Wse(r.horizontal??new hG(0,1)),b=new Dle(r.sides??6),w=bue(r),x=new lce(o,a,s,l,c,u,d,h,p,A,f,m,g,v,y,b,w.alpha,w.isMask),C=new sle(x.calpha,"f");return new gue(t,n,e,{style:o,projection:a,axis:s,blending:l,offset:c,colorA:u,colorB:d,frequency:h,size:p,variation:A,smoothness:f,zigzag:m,rotation:g,vertical:v,horizontal:y,sides:b,...w},x,w.mode,C,w.isMask,i)}default:{let o=new Tle(1,0,0,1),a=bue(r),s=new Vle(o,a.alpha),l=new sle(s.calpha,"f");return new gue(t,n,e,{color:o,...a},s,a.mode,l,a.isMask,i)}}}(n,e,t,i,r)}(e,t,n,r)}updateByOp(e,t,n){let r=e;if(void 0===r.path[0]){if(0===r.type)return"type"in r.props||"category"in r.props||"visible"in r.props?(n.scene.markNeedsUpdateRendererDirty(),!0):function(e,t,n,r){let i=!1;for(let[o,a]of Object.entries(e)){if("bumpMap"===o||"roughnessMap"===o){i=!0;continue}if(!o||void 0===a)continue;if(wue(o,n,r,t)){"visible"===o&&"light"===n.type&&(i=!0);continue}n.visible=r.visible;let e=n.uniforms[`f${n.id}_${o}`];if(e&&!(e instanceof kle))switch(i=i||pue(n,o,a),e.constructor){case Tle:if("string"==typeof a){let n=t.getColor(a);n&&(e.value=n);break}{let t=a;e.value instanceof uue?e.value=new qse(t.r,t.g,t.b,t.a):e.setRGBA(t);break}case Kse:if("string"==typeof a){let n=t.getColor(a);n&&(e.value=n);break}{let t=a;e.value instanceof uue?e.value=new qse(t.r,t.g,t.b,t.a):e.value.setRGBA(t.r,t.g,t.b,t.a);break}case Wse:{let t=a;e.value.setX(t[0]),e.value.setY(t[1]);break}case Gse:{let t=a;e.value.setX(t[0]),e.value.setY(t[1]),e.value.setZ(t[2]);break}case lle:Aue(a,t,n);break;case jle:e.value=a.map((e=>new LG(...e)));break;default:e.value=a}}return i}(r.props,n.shared,this,t)}else if("texture"===r.path[0])return!("texture"in t)&&!("video"in t)||Aue(r.props,n.shared,this);return!1}dispose(){if(function(e){let t=e instanceof mue?e.type:e;return"texture"===t||"video"===t||"displace_map"===t||"matcap"===t}(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Ice||t.image.deref()}}hasValueByKey(e){return void 0!==this.uniforms[e]}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let n=`f${this.id}_${e}`;this.hasValueByKey(n)&&void 0!==t&&(this.uniforms[n].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1]}getNames(){let e=[];for(let t in this.uniforms){let n=this.getName(t);n&&e.push(n)}return e}},gue=class extends mue{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,l),this.params=r,this.color=i,this.mode=o,this.alpha=a,this.isMask=s}},vue=class extends mue{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this.position=i}},yue=class extends mue{constructor(e,t,n,r,i,o){super(e,t,n,i,o),this.node=r}static createLigherLayer(e,t,n,r){let i,o,a=new cle(fue(n.alpha,r)),s=new Dle(n.mode),l=new cle(n.bumpMapIntensity),c=new cle(fue(n.alphaOverride,r));if(n.visible)if("lambert"===n.category){i=new Cce;let e=new Tle(r.color(n.emissive)??0),t=new Fle(n.occlusion??!0);o={emissive:e,occlusion:t},i.emissive=e,i.occlusion=t}else if("toon"===n.category){i=new Ece;let e=new cle(n.shininess??30),t=new Tle(r.color(n.specular)??1118481);o={shininess:e,specular:t},i.shininess=e,i.specular=t}else if("physical"===n.category){i=new _ce;let e=new cle(n.roughness??.3),t=new cle(n.metalness??0),r=new cle(n.reflectivity??.5),a=new Fle(n.occlusion??!0);o={roughness:e,metalness:t,reflectivity:r,occlusion:a},i.roughness=e,i.metalness=t,i.reflectivity=r,i.occlusion=a}else{i=new Bce;let e=new cle(n.shininess??30),t=new Tle(void 0!==n.specular?r.color(n.specular)??1118481:1118481),a=new Fle(n.occlusion??!0);o={shininess:e,specular:t,occlusion:a},i.shininess=e,i.specular=t,i.occlusion=a}else i=new xce,o={};return i.alpha=new cle(1),i.shadingAlpha=a,i.shadingBlend=s,i.bumpMapIntensity=l,i.alphaOverride=c,o.alpha=i.shadingAlpha,o.mode=i.shadingBlend,o.bumpMapIntensity=i.bumpMapIntensity,o.alphaOverride=i.alphaOverride,new yue(e,t,n,i,o,r)}get category(){return this.node.category}};function bue(e){return{alpha:new cle(e.alpha??1),mode:new Dle(e.mode??0),isMask:new Fle(e.isMask??!1)}}function wue(e,t,n,r){if("displace"===n.type&&("intensity"===e||"visible"===e)){let e=t.uniforms[`f${t.id}_intensity`];return e?(e.value=n.intensity*(n.visible?1:0),e):void 0}if("displace"!==n.type&&("alpha"===e||"visible"===e)){let i=t.uniforms[`f${t.id}_alpha`];if(!i)return;if(i.value=fue(n.alpha,r)*(n.visible?1:0),"outline"===n.type&&"visible"===e){let e=t.uniforms[`f${t.id}_compensation`];e&&(e.value=n.compensation&&n.visible)}return i}}function xue(e,t){let n=0,r=e.layers.find((e=>"light"===e.data.type));if(r){let e=r.data,n=Number(t.getVariable(e.alphaOverride));if(("string"==typeof e.alphaOverride?n/100:e.alphaOverride)<1)return!0}for(let i of e.layers){if("displace"!==i.data.type&&i.data.isMask)return!0;if("displace"!==i.data.type&&"alpha"in i.data&&"light"!==i.data.type&&"fresnel"!==i.data.type&&"texture"!==i.data.type&&"matcap"!==i.data.type&&"rainbow"!==i.data.type&&"outline"!==i.data.type&&"pattern"!==i.data.type){let e=i.data.visible?i.data.alpha:0;if("string"==typeof e&&(e=Math.max(0,Math.min(1,Number(t.getVariable(e)??100)/100))),1===e&&"depth"===i.data.type||"gradient"===i.data.type){for(let t of i.data.colors)if(t[3]<1){e=t[3];break}}else if(1===e&&"noise"===i.data.type){let n=t.color(i.data.colorA).a,r=t.color(i.data.colorB).a,o=t.color(i.data.colorC).a,a=t.color(i.data.colorD).a,s=Math.min(n,Math.min(r,Math.min(o,a)));s<1&&(e=s)}n+=(1-n)*e}}return n<1}var Cue=class extends RK{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},Sue=class extends Cue{constructor(e,t,n,r){super(),this.flatShading=e,this.side=t,this.wireframe=n,this.root=r}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,n){return this.root.getFlavor(e,t,n)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,n){this.root.updateByOp(e,t,n)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Bue=class extends Cue{constructor(e,t,n=!0){super(),this.data=e,this.allowVariableSaves=n,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,Nse.startContext(this),this.reset0(e,t),Nse.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,n){let r=n?6:(e?3:0)+t;if(0===r)return this;void 0===this.flavors&&(this.flavors=[]),r-=1;let i=this.flavors[r];return void 0===i&&(i=new Sue(e,t,n,this),i.needsJitter=this.needsJitter,this.flavors[r]=i,i.flatShading=e,i.side=t,i.updateAfterBuild()),i}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return(null==(e=this.lightLayer.getNode("occlusion"))?void 0:e.value)??!1}reset(e,t,n=!1){Nse.startContext(this),(this.data!==e||n)&&this.reset0(e,t),Nse.endContext(this)}reset0(e,t){this.data=e;let n=e.layers??Tee.defaultTwoLayerData("phong").layers;try{this.layers=n.map((e=>mue.create(this.layerIdGen++,e.id,e.data,t.shared)))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=xue(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,n){if("alphaOverride"===e[0])this.transparent=xue(this.data,n.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if("layer"===e[0]){let r=e[1],i=e[2];if(r&&i){let e=this.layers.find((e=>e.uuid===r));(null==e?void 0:e.hasValue(i))&&("alpha"===i?(this.transparent=xue(this.data,n.shared),e.setValue(i,Math.max(0,Math.min(Number(t)/100,1)))):e.setValue(i,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find((e=>"light"===e.data.type));t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach((t=>{"alpha"in t.data&&"string"==typeof t.data.alpha&&e.shared.getVariable(t.data.alpha,["material",this.uuid,"layer",t.id,"alpha"])}))}getLayersOfType(e){return this.layers.filter((t=>t.type===e))}getLayerByUuid(e){return this.layers.find((t=>t.uuid===e))}onUpdate(e){this.lightLayer=this.layers.find((e=>e instanceof yue)),void 0===this.lightLayer&&(this.lightLayer=new yue(0,"",{...Pee.defaultData("light","phong"),visible:!1},new xce,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find((e=>e instanceof yue));if(!e)return;let t=e.data,n=t.bumpMap,r=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let i=0;i<this.layers.length;++i){let t=this.layers[i];t instanceof gue&&t.color instanceof Kle&&(t.uuid===n&&(e.node.bumpMap=t.color),t.uuid===r&&(e.node.roughnessMap=t.color))}}updateByOp(e,t,n){if(Nse.startContext(this),void 0!==t?this.data=t:t=this.data,this.transparent=xue(t,n.shared),"layers"===e.path[0]){let r=n.shared,i=e.path[1];if(void 0===i)n.scene.markNeedsUpdateRendererDirty(),this.reset0(t,n);else{0===e.type&&void 0!==e.props.occlusion&&n.scene.markNeedsUpdateRendererDirty();let o=this.layers.find((e=>e.uuid===i));if(o){let a,s=t.layers.data(i);0===e.type&&("alpha"in e.props||"alphaOverride"in e.props)&&(a="alpha"in e.props?{...e.props,alpha:fue(e.props.alpha,r,["material",this.uuid,"layer",i,"alpha"])}:{...e.props,alphaOverride:fue(e.props.alphaOverride,r,["material",this.uuid,"alphaOverride"])}),o.updateByOp({...e,...a?{props:a}:{},path:e.path.slice(2)},s,n)&&this.reset0(t,n)}}}else this.reset0(t,n);Nse.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof gue?t.color.mask=void 0:t instanceof yue&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof gue&&t.isMask.value&&t.data.visible&&e>0){let n=e-1,r=this.layers[n];r instanceof yue?r.node.mask=new hle(t.color,t.alpha,hle.MUL):r instanceof gue&&(r.isMask.value||(r.color.mask=new hle(t.color,t.alpha,hle.MUL)))}}}blendColors(){let e=this.layers.findIndex((e=>e instanceof gue)),t=this.layers.findIndex((e=>e instanceof yue));if(-1!==e&&e<t){let n=this.layers[e].color;for(let r=e+1;r<t;++r){let e=this.layers[r];if(e instanceof gue){if(e.isMask.value)continue;n=new Hle(n,e.color,e.alpha,e.mode)}}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let e=new sle("outgoingLight","f"),t=this.layers.findIndex((e=>e instanceof yue));if(this.layers.length>t+1){for(let n=t+1;n<this.layers.length;++n){let t=this.layers[n];if(t instanceof gue){if(t.isMask.value)continue;e=new Hle(e,t.color,t.alpha,t.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter((e=>e instanceof vue));if(e.length>0){let t=e[0].position;for(let n=1;n<e.length;++n)e[n]&&(t=new hle(t,e[n].position,hle.ADD),t=new hle(t,new cle(.5).setReadonly(!0),hle.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=!0===this.extensions.derivatives,e.extensionFragDepth=!0===this.extensions.fragDepth,e.extensionDrawBuffers=!0===this.extensions.drawBuffers,e.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}clampUniformsForPreview(e,t){let n=(e,t,n)=>Math.min(Math.max(e,t),n);for(let r of this.layers)if("displace"===r.type){let i=n(r.uniforms[`f${r.id}_intensity`].value,e,t);r.uniforms[`f${r.id}_intensity`].value=i}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new Ple;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach((e=>e.dispose())),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof gue){let t=e.params.texture;if(t instanceof Lle&&!t.image.loaded)return!1}return!0}};Object.defineProperties(Cue.prototype,{properties:{get:function(){return this.fragment.properties}}});var _ue=class extends Bue{constructor(e,t,n){super(e,t,!1),this.uuid=n,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},Eue=new Map;function Mue(e){if("string"==typeof e)return e;let t=Eue.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},Eue.set(e,t)),t.url}var Pue,Tue,Due,Fue=new Promise((e=>{Pue=e})),Iue=!1;function kue(){if(!Iue)return Tue||(Tue=async function(){await nF((()=>import("./howler-DVKXqOB-.js").then((e=>e.h))),[]),Pue(void 0!==window?window:global),Iue=!0}())}function Oue(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{if(void 0===n.events||!1===Array.isArray(n.events))return!0;let r=[];n.events.forEach((e=>{"dragDropActions"in e.data?(r.push(...e.data.dragDropActions.drag),r.push(...e.data.dragDropActions.drop)):"inActions"in e.data?(r.push(...e.data.inActions),r.push(...e.data.outActions)):"gameActions"in e.data?(r.push(...e.data.gameActions.idle),r.push(...e.data.gameActions.move),r.push(...e.data.gameActions.jump),r.push(...e.data.gameActions.run)):"breakpoints"in e.data?e.data.breakpoints.forEach((e=>{r.push(...e.data.actions)})):"actions"in e.data&&r.push(...e.data.actions),t=t||r.some((e=>"Audio"===e.data.type))}))})),t}Fue.then((e=>Due=e));var Lue,Rue,Uue=class{constructor({src:e,volume:t,delay:n,loop:r}){let i;this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)},i="string"==typeof e?{src:e}:{src:Mue(e),format:"wav"},this.sound=new Due.Howl(i),this.sound.on("end",this.onEnd),this.src=e,void 0!==t&&(this.volume=t),void 0!==n&&(this.delay=n),void 0!==r&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout((()=>{this.sound.play(),this.clearDelay()}),this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout((()=>{this.sound.fade(this._volume,0,t),this.clearFade()}),e)):this.sound.fade(this._volume,0,t)}on(e,t,n){this.sound.on(e,t,n)}off(e,t,n){this.sound.off(e,t,n)}play(){"playing"===this._status||this.sound.playing()||("paused"===this._status?(0===this.sound.seek()?this.replay():this.sound.play(),this._status="playing"):"stopped"===this._status&&(this.replay(),this._status="playing"))}pause(){"playing"===this._status&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},zue=class{constructor(){this.type="ShapePath",this.color=new PG,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new BJ,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var n;return null==(n=this.currentPath)||n.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){var i;return null==(i=this.currentPath)||i.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){var a;return null==(a=this.currentPath)||a.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){var t;return null==(t=this.currentPath)||t.splineThru(e),this}toShapes(){let e=0,t=1,n=2,r=3,i=4,o=5,a=6,s={loc:e,t:0};function l(t,r,i,o){let a=t.x,l=r.x,u=i.x,d=o.x,h=t.y,p=r.y,A=i.y,f=o.y,m=(d-u)*(h-A)-(f-A)*(a-u),g=(f-A)*(l-a)-(d-u)*(p-h),v=m/g,y=((l-a)*(h-A)-(p-h)*(a-u))/g;if(0===g&&0!==m||v<=0||v>=1||y<0||y>1)return null;if(0===m&&0===g){for(let u=0;u<2;u++){if(c(0===u?i:o,t,r),s.loc===e){let e=0===u?i:o;return{x:e.x,y:e.y,t:s.t}}if(s.loc===n){return{x:+(a+s.t*(l-a)).toPrecision(10),y:+(h+s.t*(p-h)).toPrecision(10),t:s.t}}}return null}for(let n=0;n<2;n++)if(c(0===n?i:o,t,r),s.loc===e){let e=0===n?i:o;return{x:e.x,y:e.y,t:s.t}}return{x:+(a+v*(l-a)).toPrecision(10),y:+(h+v*(p-h)).toPrecision(10),t:v}}function c(l,c,u){let d,h=u.x-c.x,p=u.y-c.y,A=l.x-c.x,f=l.y-c.y,m=h*f-A*p;return l.x===c.x&&l.y===c.y?(s.loc=e,void(s.t=0)):l.x===u.x&&l.y===u.y?(s.loc=t,void(s.t=1)):void(m<-Number.EPSILON?s.loc=r:m>Number.EPSILON?s.loc=i:h*A<0||p*f<0?s.loc=o:Math.sqrt(h*h+p*p)<Math.sqrt(A*A+f*f)?s.loc=a:(d=0!==h?A/h:f/p,s.loc=n,s.t=d))}function u(e,t,n){let r=new hG;t.getCenter(r);let i=[];return n.forEach((t=>{t.boundingBox.containsPoint(r)&&function(e,t){let n=[],r=[];for(let i=1;i<e.length;i++){let o=e[i-1],a=e[i];for(let e=1;e<t.length;e++){let i=l(o,a,t[e-1],t[e]);null!==i&&void 0===n.find((e=>e.t<=i.t+Number.EPSILON&&e.t>=i.t-Number.EPSILON))&&(n.push(i),r.push(new hG(i.x,i.y)))}}return r}(e,t.points).forEach((e=>{i.push({identifier:t.identifier,isCW:t.isCW,point:e})}))})),i.sort(((e,t)=>e.point.x-t.point.x)),i}let d=0,h=999999999,p=-999999999,A=[];this.subPaths.forEach((e=>{let t=e.getPoints(),n=-999999999,r=999999999,i=-999999999,o=999999999;for(let a=0;a<t.length;a++){let e=t[a];e.y>n&&(n=e.y),e.y<r&&(r=e.y),e.x>i&&(i=e.x),e.x<o&&(o=e.x)}p<=i&&(p=i+1),h>=o&&(h=o-1),t.length&&A.push({curves:e.curves,points:t,isCW:rZ.isClockWise(t),identifier:d++,boundingBox:new B0(new hG(o,r),new hG(i,n))})}));let f=A.map((e=>{var t;return function(e,t,n,r,i){(null==i||""===i)&&(i="nonzero");let o=new hG;e.boundingBox.getCenter(o);let a=u([new hG(n,o.y),new hG(r,o.y)],e.boundingBox,t);a.sort(((e,t)=>e.point.x-t.point.x));let s=[],l=[];a.forEach((t=>{t.identifier===e.identifier?s.push(t):l.push(t)}));let c=s[0].point.x,d=[],h=0;for(;h<l.length&&l[h].point.x<c;)d.length>0&&d[d.length-1]===l[h].identifier?d.pop():d.push(l[h].identifier),h++;if(d.push(e.identifier),"evenodd"===i){let t=d.length%2==0,n=d[d.length-2];return{identifier:e.identifier,isHole:t,for:n}}if("nonzero"===i){let n=!0,r=null,i=null;for(let e=0;e<d.length;e++){let o=d[e];t[o]&&(n?(i=t[o].isCW,n=!1,r=o):i!==t[o].isCW&&(i=t[o].isCW,n=!0))}return{identifier:e.identifier,isHole:n,for:r}}}(e,A,h,p,null==(t=this.userData)?void 0:t.style.fillRule)})),m=[];return A.forEach((e=>{let t=f[e.identifier];if(t&&!t.isHole){let t=new DJ;t.curves=e.curves,f.filter((t=>(null==t?void 0:t.isHole)&&t.for===e.identifier)).forEach((e=>{if(e){let n=A[e.identifier],r=new BJ;r.curves=n.curves,t.holes.push(r)}})),m.push(t)}})),m}},Nue=!1,jue=new Promise((e=>{Lue=e})),Hue=!1;function Que(){if(Nue=!0,!Hue)return Rue||(Rue=async function(){let e=await nF((()=>import("./opentype-D7TV-MLb.js")),[]);Lue(e),Hue=!0}(),Rue)}var Vue=new class{async load(e,t,n=()=>{}){let{load:r}=await jue;r(e,((e,r)=>{e||!r?n(e??"Something went wrong"):t(r)}))}async parse(e){let{parse:t,Bidi:n}=await jue;try{let r=t(e),i=new n,o=e=>r.charToGlyphIndex(e.char);return i.registerModifier("glyphIndex",null,o),i.applyFeatures(r,r.defaultRenderOptions.features),{font:r,bidi:i}}catch(K9){}}};async function Wue(e){let t,n,r=!1;if(e.url?(t=await async function(e){return await(await fetch(e)).arrayBuffer()}(e.url),n=e.url,r=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){if(!Nue)return{font:void 0,url:n,intercepted:r,arr:t,bidi:null};{let e=await Vue.parse(t);if(e)return{font:e.font,url:n,intercepted:r,arr:t,bidi:e.bidi}}}}function Gue(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var que=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=Wue(e).then((e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)}))}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=Wue(e).then((e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)}))}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,n){if(!this._bidi)return[];let r=this._bidi;r.getTextGlyphs(t);let i=r.tokenizer.tokens,o=[],a=0,s=n.length===i.length;for(let l=0;l<n.length;l++){let r=n[l].index,c=String.fromCharCode(n[l].unicode),u=i[a];if(Gue(r,u)||s)o.push({char:c,index:r,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),a++;else{let n=u.char,i="",s=[u.state.glyphIndex],l=[],d=!1;for(;!d;)a++,i=t.charAt(a),n+=i,s.push(e.charToGlyphIndex(i)),l=e.stringToGlyphs(n),1===l.length&&l[0].index===r&&(d=!0),a>t.length&&(d=!0);o.push({char:c,index:r,replacements:s,replacementChars:Array.from(n)}),a++}}return o}generateShapes(e,t){if(!this._isLoaded)return;let n,r=this.font,i=t.fontSize/this.unitsPerEm,o=t.fontSize*t.lineHeight,a=e.map((e=>this.getTextWidth(e,t))),s=t.width,l=this.getCharWidth("\n",t),c=1===t.horizontalAlign?l:0,u=this.computeSpaceWidthForLine(e,0,t),d=this.getLineInitialOffsetX(a[0],s,t.horizontalAlign,e[0],l),h=this.getLineInitialOffsetY(o,e.length,t.height,i,t.verticalAlign),p=[],A=e.map((e=>[])),f=e.map((e=>[]));for(let v=0;v<e.length;v++){let m=e[v],y={features:{liga:!0}},b=[];try{b=r.stringToGlyphs(m,y)}catch(g){}d=this.getLineInitialOffsetX(a[v],s,t.horizontalAlign,m,l);let w=[];try{w=this.reverseLigaturesTable(r,m,b)}catch(g){}u=this.computeSpaceWidthForLine(e,v,t);for(let e=0;e<b.length;e++){let o=b[e],a=0===o.index?"\n":o.unicode?String.fromCharCode(o.unicode):void 0,s=w[e],l=0,m=0;0===e&&2===t.horizontalAlign&&void 0!==o.leftSideBearing&&(m=-o.leftSideBearing*i),n&&(l=r.getKerningValue(o,n)*i),d+=m+l;let g=0;if("\n"===a)g=c;else if(" "===a)g=u;else{let e=this.createPath(o,i,d,h,t);e&&(g=e.offsetX-(l+m),p.push(e.path))}if(1===s.replacements.length)f[v].push([d,h]),A[v].push(g);else{let e=s.replacements.map((e=>(r.glyphs.get(e).advanceWidth??0)*i)),t=e.reduce(((e,t)=>e+t),0),n=e.map((e=>e/t)),o=d;for(let r=0;r<n.length;r++){let e=g*n[r];f[v].push([o,h]),A[v].push(e),o+=e}}d+=g,n=o}h-=o}let m=[];for(let v=0,y=p.length;v<y;v++)m.push(...p[v].toShapes());return{shapes:m,charWidths:A,lineWidths:a,charCoords:f}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return(null==(e=this.font)?void 0:e.ascender)??0}get descender(){var e;return(null==(e=this.font)?void 0:e.descender)??0}get familyName(){var e;return(null==(e=this.font)?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return(null==(e=this.font)?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return(null==(e=this.font)?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,n,r,i){return(3===n||2===n)&&r.indexOf("\n")>=0&&(e-=i),3===n?.5*t-.5*e:2===n?t-e:0}getLineInitialOffsetY(e,t,n,r,i){let o=t*e,a=e-Math.abs(this.ascender-this.descender)*r,s=-this.ascender*r-a/2;return 3===i?-(n-o-s):2===i?-(.5*n-.5*o-s):s}createPath(e,t,n,r,i){var o;let a=e.getPath(n,-r,i.fontSize,{kerning:!1,letterSpacing:i.letterSpacing});if(!a)return;let s=new zue,l=(e.advanceWidth??1)*t;if(e)for(let c of a.commands){let e=null==(o=s.currentPath)?void 0:o.currentPoint;if(!e||"Z"===c.type||e.x!==c.x||-e.y!==c.y)switch(c.type){case"M":s.moveTo(c.x,-c.y);break;case"L":s.lineTo(c.x,-c.y);break;case"Q":s.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":s.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y)}}return s.subPaths.forEach((e=>{let t=function(e){if(e.length){let t=e[0];if(t instanceof yJ)return t.v1;if(t instanceof gJ||t instanceof wJ)return t.v0}}(e.curves);void 0!==t&&e.currentPoint.distanceTo(t)>0&&e.lineTo(t.x,t.y)})),{offsetX:l+i.fontSize*i.letterSpacing,path:s}}getCharWidth(e,t){var n;return(null==(n=this.font)?void 0:n.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var n;return(null==(n=this.font)?void 0:n.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,n){let r=this.getCharWidth(" ",n),i=e[t];if(i){let o=this.countSpaces(i.trimEnd());if(4===n.horizontalAlign&&t<e.length-1&&o){return(n.width-(this.getTextWidth(i,n)-o*r))/o}}return r}countSpaces(e){return(e.match(/ /g)||[]).length}};var Kue=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,n){let r=this.objects.get(e);return void 0===r?(r=this.createObject(e,t,n),this.objects.set(e,r)):r.isShared=!0,r}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let n=this.objects.get(e);if(n&&!0!==n.isShared)return this.objects.delete(e),this.objects.set(t,n),n}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){t===this.objects.get(e)&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach((e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)})),this.unreachable.clear()}dispose(){this.objects.forEach((e=>{this.disposeObject(e)})),this.objects.clear()}},Yue=class extends Kue{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,n){let r=Jae(e,t,this.flatShading,n);return r.computeBoundingSphere(),r}},Xue={markNeedsUpdateRendererDirty:()=>{}};function $ue(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}var Jue=class{constructor(e,t,n){var r;this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise((e=>e())),this.emitter=$ue(),"OpenAI"===(null==(r=null==t?void 0:t.integration)?void 0:r.type)?this.result={content:""}:"GET"===t.method&&""!==t.url&&(this.prefetchPromise=this.prefetch(n))}async prefetch(e){await this.callUserAPI(e)}async callUserAPI(e){var t,n,r;this.emitter.emit("start",{userAPIId:this.id}),this.isLoading=!0,this.isLoading=!1;try{this.result=await async function(e,t,n=new AbortController){var r,i;let o;if("OpenAI"===(null==(r=e.integration)?void 0:r.type)){let n=tde(""===e.integration.prompt?"":JSON.parse(e.integration.prompt),t),r=""===e.integration.behavior?"":tde(JSON.parse(e.integration.behavior),t);o=`{\n\t\t\t"model": "${e.integration.model}",\n\t\t\t"messages": [${e.integration.useBehavior?`\n\t\t\t{\n\t\t\t\t"role": "system",\n\t\t\t\t"content": "${r}"\n\t\t\t},`:""}\n\t\t\t{\n\t\t\t\t"role": "user",\n\t\t\t\t"content": "${n}"\n\t\t\t}\n\t\t\t]\n\t\t}`}else"POST"===e.method&&e.body&&(o=tde(JSON.parse(e.body),t));let a=await fetch(e.url,{method:e.method,headers:Zue(e),signal:n.signal,body:o});if(!a.ok)throw new Error("status:"+a.status+"_:_"+a.statusText);return"OpenAI"===(null==(i=e.integration)?void 0:i.type)?{content:(await a.json()).choices[0].message.content}:await a.json()}(this.userAPI,e),this.error="null",this.emitter.emit("success",{userAPIId:this.id})}catch(g9){let i=(null==(r=null==(n=null==(t=g9.message)?void 0:t.split("_:_"))?void 0:n[0])?void 0:r.replace("status:",""))??"null";this.error=i,this.result=null,this.emitter.emit("error",{userAPIId:this.id})}this.isLoading=!1,this.isPrefetched=!0,this.isLoaded=!0}update(e,t){this.userAPI=e,""!==this.userAPI.url&&"GET"===this.userAPI.method&&this.prefetch(t)}retrieveValue(e){if(this.result)try{return G8.zoom(this.result,e)}catch(g9){}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?G8.zoom(this.result,e):this.result;if(function(e){return"object"==typeof e&&null!==e}(t))return Object.entries(t);if(function(e){return Array.isArray(e)}(t))return t.map(((e,t)=>[t.toString(),e]));throw function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null===e}(t)?new Error("This path points to a value, use retrieveValue() instead. "+(null==e?void 0:e.join("."))):new Error("Path error"+(null==e?void 0:e.join(".")))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function Zue(e){let t=new Headers;return e.headers.forEach((e=>{""!==e.data.key&&t.append(e.data.key,e.data.value)})),t}var ede=(e,t)=>{if("string"==typeof e){let n=t.getVariable(e);if(n)return ede(n,t)}return Cte.isBoolean(e)?Cte.getDisplayedValue(e).toLowerCase():Cte.getDisplayedValue(e)},tde=(e,t)=>e.map(((e,n)=>{if("text"in e)return e.text;if("type"in e){if("paragraph"===e.type)return(n>0?"\n":"")+tde(e.children,t);if("variable"===e.type){let n=t.getVariable(e.variableId);if(void 0!==n)return ede(n,t)}}return""})).join(""),nde=1e3,rde=512e3;var ide=class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=$ue(),this.reconnectWaitFor=nde,this._onError=e=>{var t,n,r;null==(t=this.eventSource)||t.removeEventListener("message",this._onMessage),null==(n=this.eventSource)||n.removeEventListener("error",this._onError),null==(r=this.eventSource)||r.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=e=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=nde,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=nde,this._connected=!1},this._onMessage=e=>{let t,n=e.data;try{t=JSON.parse(n)}catch(K9){}if(t){let e=!1;this.userWebhook.parametersSchemas.forEach((({data:n})=>{void 0!==t[n.name]&&function(e,t){let n=typeof e;return!!(("string"===t||"number"===t)&&n===t||"boolean"===t&&("true"===e||"false"===e||!0===e||!1===e)||"image"===t&&"string"===n&&e.startsWith("http"))}(t[n.name],n.type)&&(void 0===this.result&&(this.result={}),this.result[n.name]=t[n.name],e=!0)})),e&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource("https://hooks.spline.design/events?hashFile="+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){var e,t,n,r;null==(e=this.eventSource)||e.removeEventListener("message",this._onMessage),null==(t=this.eventSource)||t.removeEventListener("error",this._onError),null==(n=this.eventSource)||n.removeEventListener("open",this._onConnected),null==(r=this.eventSource)||r.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>rde&&(this.reconnectWaitFor=rde),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout((()=>{this.scheduledReconnectHandle=void 0,this.connect()}),this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map((e=>e.data.name))}getParameterValue(e){var t;if(this.getParametersKeys().includes(e)){if(this.result)return null==(t=this.result)?void 0:t[e];for(let t of this.userWebhook.parametersSchemas)if(t.data.name===e)return wte.defaultParameterValueByType(t.data.type)}}};function ode(e){return"variable_"+e}var ade=class extends Dce{constructor(e){super(),this.shared=e}create(e){return new Fce(e,this.shared)}},sde=class{constructor(e,t={},n=!0,r=!1){if(this.data=e,this.needsJitter=n,this.enableLocalStorageForPersistentVariables=r,this.geometryCache=new Yue(!0),this.geometryCache2=new Yue(!1),this.imageHolderCache=new ade(this),this.thisContext={scene:Xue,shared:this},this.deletedMaterial=new _ue(Tee.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Ice(Xte.emptyImage,this),this.deletedVideo=new Ice(bee.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[i,o]of Object.entries(t.images))this.addImage(i,o);if(t.videos)for(let[i,o]of Object.entries(t.videos))this.addVideo(i,o);if(t.audios)for(let[i,o]of Object.entries(t.audios))this.addAudio(i,o);if(t.particles)for(let[i,o]of Object.entries(t.particles))this.addParticle(i,o);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map((e=>e.loadPromise))}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.data=e,this.resetLib(e.lib);for(let{id:n,data:r}of e.variables)this.addVariableHolder(n,r),t&&this.updateVariableHolder(n,r);for(let[n,r]of Object.entries(e.userAPIs))this.addUserAPI(n,r);for(let[n,r]of Object.entries(e.userWebhooks))this.addUserWebhook(n,r);for(let[n,r]of Object.entries(e.images))this.addImage(n,r);for(let[n,r]of Object.entries(e.videos))this.addVideo(n,r);for(let[n,r]of Object.entries(e.colors))this.addColor(n,r);for(let[n,r]of Object.entries(e.materials))this.addMaterial(n,r);for(let[n,r]of Object.entries(e.audios))this.addAudio(n,r);for(let[n,r]of Object.entries(e.particles))this.addParticle(n,r);for(let[n,r]of Object.entries(e.fonts))this.addFont(n,r)}addMaterial(e,t){if(this.materials[e]){let n=this.materials[e];n.reset(t,this.thisContext),n.dispose()}else{let n=new _ue(t,this.thisContext,e);this.materials[e]=n}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return"string"==typeof e?this.getMaterialOrDeletedPlaceholder(e):null==e?this.deletedMaterial:new Bue(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Ice(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return"string"==typeof e?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new Ice(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Ice(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return"string"==typeof e?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):(this.colors[e]=new uue(t.r,t.g,t.b,"a"in t?t.a:1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let n=this.colors[e];return this.colors[e].r=t.r??n.r,this.colors[e].g=t.g??n.g,this.colors[e].b=t.b??n.b,this.colors[e].a=t.a??n.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if("string"!=typeof e)return new qse(e.r,e.g,e.b,"a"in e?e.a:1);{let n=this.getColor(e);t=n||new qse(0,0,0,0)}return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof Uue)return t;{let n=new Uue({src:t.data});return this.audios[e]=n,n}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof Uue&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new que(t),this.fonts[e].loadingPromise.then((()=>this.requestRender()))}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach((e=>this.deleteMaterial(e))),this._requestRender=void 0,Object.values(this.audios).forEach((e=>{e instanceof Uue&&e.dispose()})),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(void 0===this.variables[e]){let n=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let r=localStorage.getItem(ode(e));n=null!==r?JSON.parse(r):t.value}return this.variables[e]={value:n,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)void 0!==this.variables[e].dynamicVariablePlayState&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(void 0===this.variables[e])return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(ode(e),JSON.stringify(t));let n=t;for(;"string"==typeof n;)n=this.variables[n].value;let r=this.entityOpContext.scene;for(let i=this.variables[e].locations.length-1;i>=0;i--){let t=this.variables[e].locations[i];if("material"===t[0]){let e=t[1],i=n,o={scene:r,shared:this},a=t.slice(2);r.traverseMaterial((t=>{let n=t.root??t;n.uuid===e&&n.onVariableUpdate(a,i,o)}));let s=this.materials[e];s&&s.onVariableUpdate(a,i,o)}else{let o=r.find(t[0]);if(void 0===o){this.variables[e].locations.splice(i,1);continue}if("geometry"!==t[1]&&"particles"!==t[1]){for(let e=1;e<t.length-1;e++)o=o[t[e]];"rotation"===t[1]?o[t[t.length-1]]=n*dG.DEG2RAD:o[t[t.length-1]]=n}if(o=r.find(t[0]),"ParticleEmitter"===o.type&&o.updateVariableState(n,t),eie.is(o))if("position"===t[1]||"rotation"===t[1]||"scale"===t[1])o.onVariableUpdate();else if("geometry"===t[1]){let e=o;o.component&&(e=o.component);let t=e.dataPatched;e.chooseGeoemtryCache(this).forceDelete(t.geometry),e.createGeometryDelayed(this.entityOpContext),e.onVariableUpdate(!0),e.instances.forEach((e=>{let t=e.dataPatched;e.chooseGeoemtryCache(this).forceDelete(t.geometry),e.createGeometryDelayed(this.entityOpContext),e.onVariableUpdate(!0)}))}}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var n,r,i;if(Array.isArray(e)){if("mouse"===e[0])return(null==(n=this.mouseProperty)?void 0:n[e[1]])??0;if("raycast"===e[0])return(null==(r=this.raycastProperty)?void 0:r[e[1]])??0;let t=this.entityOpContext.scene.find(e[0]);if("width"===e[1]||"height"===e[1]||"depth"===e[1])return t.geometry.userData.parameters[e[1]];for(let n=1;n<e.length;n++)t=t[e[n]];return"rotation"===e[1]&&(t*=dG.RAD2DEG),t}for(let o in this.variables){if(void 0===t)break;let e=this.variables[o],n=null==(i=e.locations)?void 0:i.findIndex((e=>G8.equal(e,t)));void 0!==n&&-1!==n&&e.locations.splice(n,1)}if("string"==typeof e){let n=e,r=e;do{if(r=n,void 0===this.variables[n])break;let e=this.variables[n].value;t&&void 0!==this.variables[r]&&this.variables[r].locations.push(t),n=e}while("string"==typeof n);return n}return e}getVariables(){return this.variables}getDynamicVariablePlayState(e){var t;return null==(t=this.variables[e])?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){void 0!==this.variables[e]&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return null==(t=this.variables[e])?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){void 0!==this.variables[e]&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,n]of Object.entries(e.images))this.addImage(t,n.asset);for(let[t,n]of Object.entries(e.audios))this.addAudio(t,n.asset);for(let[t,n]of Object.entries(e.particles))this.addParticle(t,n.asset);for(let[t,n]of Object.entries(e.colors))this.addColor(t,n.asset);for(let[t,n]of Object.entries(e.fonts))this.addFont(t,n.asset);for(let[t,n]of Object.entries(e.materials))this.addMaterial(t,n.asset);for(let[t,n]of Object.entries(e.videos))this.addVideo(t,n.asset);for(let[t,n]of Object.entries(e.variables))this.addVariableHolder(t,n.asset)}updateLibByOp(e,t){"images"===e.path[0]?1===e.path.length&&1===e.type?this.addImage(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteImage(e.id):"videos"===e.path[0]?1===e.path.length&&1===e.type?this.addVideo(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteVideo(e.id):"audios"===e.path[0]?1===e.path.length&&1===e.type?this.addAudio(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteAudio(e.id):"particles"===e.path[0]?1===e.path.length&&1===e.type?this.addParticle(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteParticle(e.id):"colors"===e.path[0]?1===e.path.length&&1===e.type?this.addColor(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteColor(e.id):"materials"===e.path[0]?1===e.path.length&&1===e.type?this.addMaterial(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteMaterial(e.id):"fonts"===e.path[0]?1===e.path.length&&1===e.type?this.addFont(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteFont(e.id):"variables"===e.path[0]?1===e.path.length&&1===e.type?this.addVariableHolder(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteVariable(e.id):"components"===e.path[0]&&t.updateByLibOp(e,this)}updateByOp(e,t,n){var r,i;if(this.data=t,"images"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):1===e.path.length&&1===e.type?this.addImage(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteImage(e.id);else if("videos"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):1===e.path.length&&1===e.type?this.addVideo(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteVideo(e.id);else if("audios"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):1===e.path.length&&1===e.type?this.addAudio(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteAudio(e.id);else if("particles"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):1===e.path.length&&1===e.type?this.addParticle(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteParticle(e.id);else if("colors"===e.path[0])2===e.path.length&&0===e.type?this.updateColor(e.path[1],e.props):1===e.path.length&&1===e.type?this.addColor(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteColor(e.id);else if("materials"===e.path[0])1===e.path.length&&1===e.type?this.addMaterial(e.id,e.data):1===e.path.length&&2===e.type?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(C8.drop(e,2),t.materials[e.path[1]],{shared:this,scene:n});else if("fonts"===e.path[0])2===e.path.length&&0===e.type?this.updateFont(e.path[1],e,n):1===e.path.length&&1===e.type?this.addFont(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteFont(e.id);else if("variables"===e.path[0])2===e.path.length&&0===e.type?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):1===e.path.length&&4===e.type?this.addVariableHolder(e.id,e.data):1===e.path.length&&5===e.type&&this.deleteVariable(e.id);else if("userAPIs"===e.path[0]){if(1===e.path.length&&1===e.type)this.addUserAPI(e.id,e.data);else if(1===e.path.length&&2===e.type)this.deleteUserAPI(e.id);else if("string"==typeof e.path[1]){let n=t.userAPIs[e.path[1]];n&&(null==(r=this.getUserAPI(e.path[1]))||r.update(n,this))}}else if("userWebhooks"===e.path[0]){if(1===e.path.length&&1===e.type)this.addUserWebhook(e.id,e.data);else if(1===e.path.length&&2===e.type)this.deleteUserWebhook(e.id);else if("string"==typeof e.path[1]){let n=t.userWebhooks[e.path[1]];n&&(null==(i=this.getUserWebhook(e.path[1]))||i.update(n))}}else"lib"===e.path[0]&&this.updateLibByOp(C8.drop(e,1),n)}updateFont(e,t,n){if(t.props.url){let r=this.getFont(e),i={...this.data.fonts[e],url:t.props.url};r.update(i),r.loadingPromise.then((()=>this.requestRender())),n.updateFont(e,this)}}addUserAPI(e,t){return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):(this.userAPIs[e]=new Jue(e,t,this),!1)}getUserAPI(e){return this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new ide(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}};new sde(Mte.emptyData());var lde=class extends Use{updateByPatchedOp(e,t,n){if(super.updateByPatchedOp(e,t,n),null!==function(e,t){let n=[];if(t.length!==e.length)return null;for(var r=0;r<e.length;){if("*"===t[r])n.push(e[r]);else if(e[r]!==t[r])return null;r+=1}return n}(e.path,["materials"])&&0===e.type&&Array.isArray(this.material))for(let[r,i]of Object.entries(e.props)){let e=n.shared.material(i);this.material[Number(r)]=e}else if(J8(e.path,["material"])&&this.material instanceof Cue)"material"in t&&"string"!=typeof t.material&&this.material.updateByOp(C8.drop(e,1),t.material,n);else if(J8(e.path,["materials","*"])&&Array.isArray(this.material)){let r=e.path[1];if("materials"in t&&r<this.material.length){let i=t.materials[r];"string"!=typeof i&&this.material[r].updateByOp(C8.drop(e,2),i,n)}}}get needsAO(){return void 0!==this.material&&(Array.isArray(this.material)?this.material[0]:this.material).hasAO}updateState(e,t){var n,r;super.updateState(e,t),void 0!==e.castShadow&&(this.castShadow=e.castShadow),void 0!==e.receiveShadow&&(this.receiveShadow=e.receiveShadow);let i=this.dataPatched;if("NonParametricGeometry"!==(null==(n=e.geometry)?void 0:n.type)&&"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe),t.scene.markNeedsUpdateRendererDirty()),("NonParametricGeometry"===(null==(r=e.geometry)?void 0:r.type)||"materials"in e)&&("materials"in e&&void 0!==e.materials?(this.disposeMaterial(),this.material=e.materials.map((e=>t.shared.material(e).getFlavor(i.flatShading,i.side,i.wireframe))),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe)],t.scene.markNeedsUpdateRendererDirty())),void 0!==e.flatShading||void 0!==e.wireframe||void 0!==e.side)if(Array.isArray(this.material))for(let o=0;o<this.material.length;o++)this.material[o]=this.material[o].getFlavor(i.flatShading,i.side,i.wireframe);else this.material=this.material.getFlavor(i.flatShading,i.side,i.wireframe)}disposeMaterial(){this.material&&j6(this.material).forEach((e=>{e instanceof Cue&&(e instanceof _ue||e.nodeMaterialDispose())}))}dispose(){this.disposeMaterial(),super.dispose()}},cde=new jG,ude=new LG,dde=new LG,hde=new jG,pde=new gq,Ade=class extends lde{constructor(e,t,n){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=(new gq).fromArray(t.bindMatrix),this.bindMatrixInverse=new gq)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof mK&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(void 0!==this.localGeometry)return this.localGeometry;if(this.geometryCreateDeleyed instanceof sde){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return Ree.is2DParametricMesh(e.type)&&0===e.depth}get is2DType(){return Ree.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return"NonParametricGeometry"===this.geometry.userData.type}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),J8(e.path,["geometry"])&&this.updateByPatchedOpGeometry(C8.drop(e,1),t.geometry,n)}removeInteractionGeometry(e){var t;null==(t=this.localGeometry)||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var n;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if("NonParametricGeometry"===r||"SubdivGeometry"===r){let n,r,i,o=e;if(void 0===this.localGeometry){let e={...this.data.geometry,...o};this.localGeometry=Jae(e,t,this.data.flatShading,this)}o.scaleBaked?[n,r,i]=o.scaleBaked:({width:n,height:r,depth:i}=o);let a=this.localGeometry.userData;void 0!==a.sxPrev&&ese(this.localGeometry.attributes,n/a.sxPrev,r/a.syPrev,i/a.szPrev),a.sxPrev=n,a.syPrev=r,a.szPrev=i}else{let r={...this.data.geometry,...e};null==(n=this.localGeometry)||n.dispose(),this.localGeometry=Jae(r,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand((()=>t.updateShape()))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,n){var r;let i=!1;0===e.type&&0===e.path.length&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof sse&&this.chooseGeoemtryCache(n.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(n),this.refreshAttachedPaths(n)),i||(null==(r=n.scene)||r.markGeometryCacheDirty(),this.createGeometryDelayed(n)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){void 0!==e.geometry&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&0===this.geometry.groups.length&&this.geometry.addGroup(0,Math.max((null==(e=this.geometry.getIndex())?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let n=this.geometry.userData.parameters;this.is2DType?e.set(0,0,.5*n.depth):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new LG,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){t.fromBufferAttribute(n,r);let e=1/t.manhattanLength();e!==1/0?t.multiplyScalar(e):t.set(1,0,0,0),n.setXYZW(r,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let n=this.skeleton;if(void 0===n)return;let r=this.geometry;ude.fromBufferAttribute(r.attributes.skinIndex,e),dde.fromBufferAttribute(r.attributes.skinWeight,e),cde.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){let e=dde.getComponent(i);if(0!==e){let r=ude.getComponent(i);pde.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(hde.copy(cde).applyMatrix4(pde),e)}}return t.applyMatrix4(this.bindMatrixInverse)}};function fde(e){if(Array.isArray(e.material)){for(let t of e.material)if(0===t.getLayersOfType("outline").length)return}else if(!(e.material instanceof Cue)||0===e.material.getLayersOfType("outline").length)return;e instanceof Ade&&e.is2DAndNoDepth?function(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,n=new Float32Array(t.length),r=new jG;for(let i=0;i<t.length;i+=3)r.set(t[i],t[i+1],t[i+2]).normalize(),n[i]=r.x,n[i+1]=r.y,n[i+2]=r.z;e.geometry.setAttribute("extrudeNormal",new lK(n,3))}(e):function(e){var t,n;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let r=new Map,i=e.geometry.attributes,o=i.position.array,a=i.normal.array,s=new Float32Array(o.length);for(let l=0;l<o.length;l+=3){let e=`${o[l]}_${o[l+1]}_${o[l+2]}`,n=new jG(a[l],a[l+1],a[l+2]);r.has(e)?null==(t=r.get(e))||t.normals.push(n):r.set(e,{normals:[n],result:new jG})}r.forEach(((e,t)=>{for(let n of e.normals)e.result.add(n);e.result.divideScalar(e.normals.length)}));for(let l=0;l<o.length;l+=3){let e=`${o[l]}_${o[l+1]}_${o[l+2]}`,t=null==(n=r.get(e))?void 0:n.result;t&&(s[l]=t.x,s[l+1]=t.y,s[l+2]=t.z)}e.geometry.setAttribute("extrudeNormal",new lK(s,3))}(e)}function mde(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,n=new Float32Array(t.length),r=parseInt(e.uuid.replace(/\D/g,"")),i=[dG.seededRandom(r),dG.seededRandom(r+1e4),dG.seededRandom(r+2e4)];for(let o=0;o<t.length;o++)n[o]=i[o%3];e.geometry.setAttribute("randomColor",new oK(n,3))}var gde=new VG,vde=new jG;function yde(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{"Mesh"===n.type&&"SubdivGeometry"===n.geometry.type&&(t=!0)})),t}var bde=class extends Ade{constructor(e,t,n){super(e,t,n),this.data=t,this.hiddenMatrixOld=new gq,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return void 0!==this.localGeometry?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return void 0!==this.localGeometry?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let n=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var t,n,r;if(!0===this.skipReactionUpdate)return;let i=null==(t=this.localGeometry)?void 0:t.uuid,{originalGeometry:o,subdividedGeometry:a,subdivPointer:s}=sse.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=s,void 0!==o&&(null==(n=this.originalGeometry)||n.dispose(),this.originalGeometry=o),void 0!==a&&(null==(r=this.subdividedGeometry)||r.dispose(),this.subdividedGeometry=a??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,fde(this),mde(this),this.calcBoundingBox(),i&&(this.localGeometry.uuid=i)}updateState(e,t){if(super.updateState(e,t),void 0!==e.flatShading){let n=this.material;this.material=Array.isArray(n)?n.map((e=>e.getFlavor(!1,e.side,e.wireframe))):n.getFlavor(!1,n.side,n.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){sse.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&sse.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=sse.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=sse.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let n=this.localGeometry;this.localGeometry=this.originalGeometryNew,Use.prototype.raycast.call(this,e,t),this.localGeometry=n}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new lq,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,n=e.boundingSphere.center;gde.setFromBufferAttribute(t),gde.getCenter(n),e.boundingSphere.radius=n.distanceTo(gde.max),isNaN(e.boundingSphere.radius),gde.getSize(vde),this.hasNonUniformScale&&vde.divide(this.scale);let r={width:vde.x,height:vde.y,depth:vde.z};return this.geometry.userData.parameters=r,r}updateBoundingSphere(e){let t=this.originalGeometry;gde.min.set(e[0],e[2],e[4]),gde.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(gde.min.applyMatrix4(this.shearScaleInv),gde.max.applyMatrix4(this.shearScaleInv)),null===t.boundingSphere&&(t.boundingSphere=new lq);let n=t.boundingSphere.center;gde.getCenter(n),t.boundingSphere.radius=n.distanceTo(gde.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(sse.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,null==(e=this.originalGeometry)||e.dispose(),null==(t=this.subdividedGeometry)||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,n){super.updateByPatchedOpGeometry(e,t,n),this.localGeometry&&this.createGeometryByControls(t)}},wde={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},xde={polygon_center:0,edge:1,vertex:2},Cde=(e,t)=>(n,r)=>t&&0!==n&&0!==e?e*r/100:0,Sde=(e,t)=>{let n=Math.abs(t),r=-1*n;return(e- -1)*(n-r)/2+r};var Bde=new jG,_de=new jG,Ede=new jG,Mde=new jG;function Pde(e,t){let n=Ede.fromArray(e),r=Mde.fromArray(t);_de.copy(r).sub(n);let i=_de.length();return _de.normalize().multiplyScalar(.5*i),Bde.copy(n).add(_de).toArray()}var Tde=new Zq,Dde=new jG,Fde=new jG,Ide=new jG;var kde=e=>.5*(1-Math.cos(e*Math.PI)),Ode=class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,n=0){if(null==this.perlin){this.perlin=new Array(4096);for(let e=0;e<4096;e++)this.perlin[e]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);let r,i,o,a,s,l=Math.floor(e),c=Math.floor(t),u=Math.floor(n),d=e-l,h=t-c,p=n-u,A=0,f=.5;for(let m=0;m<4;m++){let e=l+(c<<4)+(u<<8);r=kde(d),i=kde(h),o=this.perlin[4095&e],o+=r*(this.perlin[e+1&4095]-o),a=this.perlin[e+16&4095],a+=r*(this.perlin[e+16+1&4095]-a),o+=i*(a-o),e+=256,a=this.perlin[4095&e],a+=r*(this.perlin[e+1&4095]-a),s=this.perlin[e+16&4095],s+=r*(this.perlin[e+16+1&4095]-s),a+=i*(s-a),o+=kde(p)*(a-o),A+=o*f,f*=.5,l<<=1,d*=2,c<<=1,h*=2,u<<=1,p*=2,d>=1&&(l++,d--),h>=1&&(c++,h--),p>=1&&(u++,p--)}return A}noiseSeed(e){let t=(()=>{let e,t;return{setSeed(n){t=e=(n??4294967296*Math.random())>>>0},getSeed:()=>e,rand:()=>(t=(1664525*t+1013904223)%4294967296,t/4294967296)}})();t.setSeed(e),this.perlin=new Array(4096);for(let n=0;n<4096;n++)this.perlin[n]=t.rand()}},Lde=new jG,Rde=new gq,Ude=new mq;function zde(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{"Mesh"===n.type&&"TextGeometry"===n.geometry.type&&(t=!0)})),t}var Nde,jde,Hde,Qde,Vde=class extends Ade{constructor(e,t,n){super(e,t,n),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var e;let t=this.dataPatched;return(null==(e=this.font)?void 0:e.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,t.geometry.height,this.fontScale,t.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return((null==(e=this.font)?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return((null==(e=this.font)?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:n}=this;if(!isNaN(e.ray.origin.x)&&0!==this.scale.x&&0!==this.scale.y&&0!==this.scale.z&&(Rde.copy(n).invert(),Ude.copy(e.ray).applyMatrix4(Rde),Ude.intersectBox(this.singleBBox,Lde))){let r=Lde.applyMatrix4(n),i=e.ray.origin.distanceTo(r);t.push({distance:i,point:r.clone(),object:this})}}},Wde=1e-4,Gde=new jG,qde=new jG;Kae.then((e=>{jde=[(Nde=e).get_face_center,Nde.get_edge_midpoint,Nde.get_vertex_position],Hde=[Nde.get_face_normal,Nde.get_edge_normal,Nde.get_vertex_normal],Qde=[Nde.face_count,Nde.edge_count,Nde.vertex_count]}));var Kde=new gq,Yde=new gq,Xde=new jG,$de=new jG,Jde=new jG,Zde=new jG,ehe=new jG,the=new jG,nhe=new Ode,rhe=class extends(tie(Hq)){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(null===this.parent)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof rie&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse((t=>{t instanceof rie&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)}))}onObjUpdateMatrix(){"toObject"!==this.parameters.type&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(t=void 0!==e?e:"grid"===this.parameters.type?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,"toObject"===this.parameters.type&&!this.parameters.toObject.object&&(t=0),"toObject"===this.parameters.type&&this.objectForSample){for(let t=0,n=this.children.length;t<n;++t)this.remove(this.children[0]);let e=this.children;if(e.length===t)return;if(e.length<t)for(let n=0,r=t-e.length;n<r;++n){let e=new rie(this.object);e.expand(),this.add(e)}else for(let n=0,r=e.length-t;n<r;++n)this.remove(e[n])}else{if(this.children.length===t)return;if(this.children.length<t)for(let e=0,n=t-this.children.length;e<n;++e){let e=new rie(this.object);e.expand(),this.add(e)}else for(let e=0,n=this.children.length-t;e<n;++e)this.remove(this.children[0])}}_updateRadial(e){let t,n=e.radial,r=n.start*dG.DEG2RAD,i=r-n.end*dG.DEG2RAD,o=new Eq(n.rotation[0],n.rotation[1],n.rotation[2]);switch(n.axis){case"z":t=new jG(0,0,1);break;case"y":t=new jG(0,1,0);break;default:t=new jG(1,0,0)}let a=e.randomnessObject??aee.defaultData([1,1,1]).randomnessObject,s="perlin"===a.noiseType;nhe.noiseSeed(a.seed);let l=Wre((0,Rre.default)(a.seed)),c=Cde(a.strength,this.parameters.randomness);for(let[u,d]of this.children.entries()){let h=u*(a.freqScale/10)+a.movement,p=s?nhe.noise(h):l(h,h),A=u+1;d.scale.x=n.scale[0]+c(A,Sde(p,a.scale[0]))||Wde,d.scale.y=n.scale[1]+c(A,Sde(p,a.scale[1]))||Wde,d.scale.z=n.scale[2]+c(A,Sde(p,a.scale[2]))||Wde,d.position.setScalar(0);let f=i/e.count*u-r;switch(n.axis){case"x":d.rotation.set(0,f,0);break;case"y":d.rotation.set(0,0,f);break;case"z":d.rotation.set(f,0,0)}d.translateOnAxis(t,n.radius),d.position.x+=n.position[0]+c(A,Sde(p,a.position[0])),d.position.y+=n.position[1]+c(A,Sde(p,a.position[1])),d.position.z+=n.position[2]+c(A,Sde(p,a.position[2]));let m=c(A,Sde(p,a.rotation[0])),g=c(A,Sde(p,a.rotation[1])),v=c(A,Sde(p,a.rotation[2]));!0===n.alignment?(d.rotation.x+=o.x+m,d.rotation.y+=o.y+g,d.rotation.z+=o.z+v):d.rotation.set(o.x+m,o.y+g,o.z+v)}}_updateLinear(e){if("linear"!==e.type)throw new Error;let t=e.linear,n=new Eq(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??aee.defaultData([1,1,1]).randomnessObject,i="perlin"===r.noiseType;nhe.noiseSeed(r.seed);let o=Wre((0,Rre.default)(r.seed)),a=Cde(r.strength,this.parameters.randomness);for(let[s,l]of this.children.entries()){let e=s*(r.freqScale/10)+r.movement,c=i?nhe.noise(e):o(e,e),u=s+1,d=a(u,Sde(c,r.rotation[0])),h=a(u,Sde(c,r.rotation[1])),p=a(u,Sde(c,r.rotation[2]));l.scale.x=1+(t.scale[0]-1)*s+a(u,Sde(c,r.scale[0]))||Wde,l.scale.y=1+(t.scale[1]-1)*s+a(u,Sde(c,r.scale[1]))||Wde,l.scale.z=1+(t.scale[2]-1)*s+a(u,Sde(c,r.scale[2]))||Wde,l.rotation.x=n.x*s+d,l.rotation.y=n.y*s+h,l.rotation.z=n.z*s+p,l.position.x=t.position[0]*s+a(u,Sde(c,r.position[0])),l.position.y=t.position[1]*s+a(u,Sde(c,r.position[1])),l.position.z=t.position[2]*s+a(u,Sde(c,r.position[2]))}}_updateGrid(e){let t=0,n=e.grid,r=e.randomnessObject??aee.defaultData([1,1,1]).randomnessObject,i=Cde(r.strength,this.parameters.randomness),o="perlin"===r.noiseType;nhe.noiseSeed(r.seed);let a=function(e=Math.random){let t=Gre(e),n=new Float64Array(t).map((e=>Vre[e%12*3])),r=new Float64Array(t).map((e=>Vre[e%12*3+1])),i=new Float64Array(t).map((e=>Vre[e%12*3+2]));return function(e,o,a){let s,l,c,u,d,h,p,A,f,m,g=(e+o+a)*Nre,v=Hre(e+g),y=Hre(o+g),b=Hre(a+g),w=(v+y+b)*jre,x=e-(v-w),C=o-(y-w),S=a-(b-w);x>=C?C>=S?(d=1,h=0,p=0,A=1,f=1,m=0):x>=S?(d=1,h=0,p=0,A=1,f=0,m=1):(d=0,h=0,p=1,A=1,f=0,m=1):C<S?(d=0,h=0,p=1,A=0,f=1,m=1):x<S?(d=0,h=1,p=0,A=0,f=1,m=1):(d=0,h=1,p=0,A=1,f=1,m=0);let B=x-d+jre,_=C-h+jre,E=S-p+jre,M=x-A+2*jre,P=C-f+2*jre,T=S-m+2*jre,D=x-1+.5,F=C-1+.5,I=S-1+.5,k=255&v,O=255&y,L=255&b,R=.6-x*x-C*C-S*S;if(R<0)s=0;else{let e=k+t[O+t[L]];R*=R,s=R*R*(n[e]*x+r[e]*C+i[e]*S)}let U=.6-B*B-_*_-E*E;if(U<0)l=0;else{let e=k+d+t[O+h+t[L+p]];U*=U,l=U*U*(n[e]*B+r[e]*_+i[e]*E)}let z=.6-M*M-P*P-T*T;if(z<0)c=0;else{let e=k+A+t[O+f+t[L+m]];z*=z,c=z*z*(n[e]*M+r[e]*P+i[e]*T)}let N=.6-D*D-F*F-I*I;if(N<0)u=0;else{let e=k+1+t[O+1+t[L+1]];N*=N,u=N*N*(n[e]*D+r[e]*F+i[e]*I)}return 32*(s+l+c+u)}}((0,Rre.default)(r.seed));if(!0===n.useCenter){let e={x:n.count[0]%2==0?2:1,y:n.count[1]%2==0?2:1,z:n.count[2]%2==0?2:1},s=new jG(n.size[0]*(n.count[0]-e.x)*.5,n.size[1]*(n.count[1]-e.y)*.5,n.size[2]*(n.count[2]-e.z)*.5);for(let l=0;l<n.count[0];l++)for(let e=0;e<n.count[1];e++)for(let c=0;c<n.count[2];c++){let u=[(l+1)*(r.freqScale/10)+r.movement,(e+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement],d=o?nhe.noise(...u):a(...u),h=this.children[t++];h.scale.x=1+i(t,Sde(d,r.scale[0]))||Wde,h.scale.y=1+i(t,Sde(d,r.scale[1]))||Wde,h.scale.z=1+i(t,Sde(d,r.scale[2]))||Wde;let p=i(t,Sde(d,r.rotation[0])),A=i(t,Sde(d,r.rotation[1])),f=i(t,Sde(d,r.rotation[2]));h.rotation.set(p,A,f),h.position.x=n.size[0]*l-s.x+i(t,Sde(d,r.position[0])),h.position.y=n.size[1]*e-s.y+i(t,Sde(d,r.position[1])),h.position.z=n.size[2]*c-s.z+i(t,Sde(d,r.position[2]))}}else for(let s=0;s<n.count[0];s++)for(let e=0;e<n.count[1];e++)for(let l=0;l<n.count[2];l++){let c=[(s+1)*(r.freqScale/10)+r.movement,(e+1)*(r.freqScale/10)+r.movement,(l+1)*(r.freqScale/10)+r.movement],u=o?nhe.noise(...c):a(...c),d=this.children[t++];d.scale.x=1+i(t,Sde(u,r.scale[0]))||Wde,d.scale.y=1+i(t,Sde(u,r.scale[1]))||Wde,d.scale.z=1+i(t,Sde(u,r.scale[2]))||Wde;let h=i(t,Sde(u,r.rotation[0])),p=i(t,Sde(u,r.rotation[1])),A=i(t,Sde(u,r.rotation[2]));d.rotation.set(h,p,A),d.position.x=n.size[0]*s+i(t,Sde(u,r.position[0])),d.position.y=-n.size[1]*e+i(t,Sde(u,r.position[1])),d.position.z=-n.size[2]*l+i(t,Sde(u,r.position[2]))}}_updateToObject(e){var t;if("toObject"!==e.type)throw new Error;let{toObject:n}=e,r=new Eq(n.rotation[0],n.rotation[1],n.rotation[2]),i=e.randomnessObject??aee.defaultData([1,1,1]).randomnessObject,o="perlin"===i.noiseType;nhe.noiseSeed(i.seed);let a=Wre((0,Rre.default)(i.seed)),s=Cde(i.strength,this.parameters.randomness);if(!n.object){for(let[,e]of this.children.entries())e.position.set(0,0,0),e.scale.setScalar(1),e.rotation.set(0,0,0);return void(this.objectForSample=void 0)}if(!this.objectForSample)return;if(this.objectForSample instanceof Vde){if(!(null==(t=this.objectForSample.font)?void 0:t.isLoaded)||void 0===this.objectForSample.geometry.attributes.position)return void(this._pendingMediaLoad=!0);this._pendingMediaLoad=!1}if(void 0===this.objectForSample.geometry&&this.objectForSample.isAncestorOf(this.object.uuid))return;let l=this.getSubdivData(),c=[],u=e=>{let t=e.length;return[e.map((e=>e[0])).reduce(((e,t)=>e+t),0)/t,e.map((e=>e[1])).reduce(((e,t)=>e+t),0)/t,e.map((e=>e[2])).reduce(((e,t)=>e+t),0)/t]},d=e=>Math.round(1e6*e)/1e6;l.forEach((e=>{let t=l.filter((t=>d(e.pos[0])===d(t.pos[0])&&d(e.pos[1])===d(t.pos[1])&&d(e.pos[2])===d(t.pos[2])));t.length>1?c.push({pos:e.pos,norm:u(t.map((e=>e.norm)))}):c.push(e)}));let h=function(e){let t=[],n={};for(var r=0,i=e.length;r<i;r++){var o=JSON.stringify(e[r].pos.map((e=>Math.round(1e4*e)/1e4)));n[o]||(t.push(e[r]),n[o]=!0)}return t}(c);if(h.length>0){let e=Math.round(h.length*n.count/100);this._updateCount(e)}else{let e=this.objectForSample.geometry.getAttribute("position");if(!e||isNaN(e.count)||0===e.count)return}this.objectForSample.updateMatrixWorld();let p=new Yre(this.objectForSample).build(),A=wde[n.axis],f=this.children;p.setRandomGenerator((0,Rre.default)(this.object.uuid+n.seed));for(let[m,g]of f.entries()){let e=m*(i.freqScale/10)+i.movement,t=o?nhe.noise(e):a(e,e),l=m+1,c=s(l,Sde(t,i.rotation[0])),u=s(l,Sde(t,i.rotation[1])),d=s(l,Sde(t,i.rotation[2]));"random"===n.spreadType?p.sample(Jde,Zde):(h.length&&(Jde.fromArray(h[m].pos),Zde.fromArray(h[m].norm)),this.objectForSample instanceof bde&&Jde.applyMatrix4(Kde.copy(this.objectForSample.matrixWorld).invert())),Jde.applyMatrix4(this.object.hiddenMatrix.clone().invert()),g.position.copy(Jde),Xde.fromArray(A);let f="normal"===n.align?Zde:this.object.getWorldDirection(the),v=$de.fromArray(n.position);$de.x+=s(l,Sde(t,i.position[0])),$de.y+=s(l,Sde(t,i.position[1])),$de.z+=s(l,Sde(t,i.position[2]));let y=Math.acos(f.dot(Xde)),b=ehe.crossVectors(Xde,f).normalize(),w=Yde.makeRotationAxis(b,y),x=f.clone().cross(this.object.up).normalize(),C=x.clone().cross(f).normalize(),S=(new gq).makeBasis(x,f,C),B=new jG(Xde.y,Xde.z,Xde.x).normalize(),_=B.clone().cross(Xde).normalize(),E=(new gq).makeBasis(B,Xde,_).invert(),M=(new gq).multiplyMatrices(S,E);g.rotation.setFromRotationMatrix(M),v.applyMatrix4(w),g.position.add(v),g.rotation.x=g.rotation.x+r.x+c,g.rotation.y=g.rotation.y+r.y+u,g.rotation.z=g.rotation.z+r.z+d,g.scale.setScalar(1),g.scale.x=g.scale.x+n.scale[0]+s(l,Sde(t,i.scale[0]))||Wde,g.scale.y=g.scale.y+n.scale[1]+s(l,Sde(t,i.scale[1]))||Wde,g.scale.z=g.scale.z+n.scale[2]+s(l,Sde(t,i.scale[2]))||Wde,g.scale.multiply(this.object.scale),g.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if("random"===e)return[];if(this.objectForSample instanceof bde){let t=this.objectForSample,n=xde[e],r=Qde[n],i=jde[n],o=Hde[n],a=[],s=r(t.subdivPointerNew);for(let e=0;e<=s-1;e++){let n=i(t.subdivPointerNew,e),r=o(t.subdivPointerNew,e);Gde.fromArray(n).applyMatrix4(t.matrixWorld),qde.fromArray(r),a.push({pos:Gde.toArray(),norm:qde.toArray()})}return a}return(this.objectForSample.geometry.index?function(e){let t=[];for(let n=0;n<=e.index.count;n++)if(Dde.fromArray(e.index.array,3*n),Tde.setFromAttributeAndIndices(e.attributes.position,Dde.x,Dde.y,Dde.z),Tde.getNormal(Fde),Tde.getMidpoint(Ide),!(isNaN(Ide.x)||isNaN(Ide.y)||isNaN(Ide.z))){let{a:e,b:n,c:r}=Tde,i=e.toArray(),o=n.toArray(),a=r.toArray(),s=e.distanceTo(n),l=n.distanceTo(r),c=r.distanceTo(e),u=Pde(i,o),d=Pde(o,a),h=Pde(a,i),p=[s,l,c],A=Math.max(...p),f=p.filter((e=>Math.round(e)===Math.round(A))).length>1,m=[],g=Tde.getMidpoint(Ide).toArray();A===s&&!f&&(m=[d,h,h],g=u),A===l&&!f&&(m=[u,h,h],g=d),A===c&&!f&&(m=[u,d,d],g=h),f&&(m=[u,d,h]),t.push({vertices:[i,o,a],faceCenters:m,midpoint:g,norm:Tde.getNormal(Fde).toArray()})}return t}(this.objectForSample.geometry):function(e){let t=[],{position:n}=e.attributes;for(let r=0;r<n.count;r++){Tde.setFromAttributeAndIndices(n,3*r,3*r+1,3*r+2),Tde.getNormal(Fde),Tde.getMidpoint(Ide);let e=Tde.a.toArray(),i=Tde.b.toArray(),o=Tde.c.toArray();t.push({vertices:[e,i,o],faceCenters:[Pde(e,i),Pde(i,o),Pde(o,e)],midpoint:Ide.toArray(),norm:Fde.toArray()})}return t}(this.objectForSample.geometry)).map(((t,n)=>"polygon_center"===e?{pos:t.midpoint,norm:t.norm}:"vertex"===e?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:"edge"===e?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[])).flat()}updateState(e,t){var n;if(this.parameters=H4(e),"toObject"!==this.parameters.type)(null===this.parent||this.parent!==this.object)&&(this.removeFromParent(),null==(n=this.object.parent)||n.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(null===this.parent||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let e=t.find(this.parameters.toObject.object);this.objectForSample=e instanceof Use?e:void 0,this.matrix=new gq,this.hiddenMatrix=new gq,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,e&&e.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},ihe=e=>{var t;return(t=class extends e{}).geometryHelper=new FK(30,30,30),t},ohe=new mq,ahe=new lq,she=new gq,lhe=(e,t,n,r,i=!1,o=e)=>{let a=t,s=o.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),ahe.copy(a.boundingSphere),ahe.applyMatrix4(s),!1===n.ray.intersectsSphere(ahe)||(she.copy(s).invert(),ohe.copy(n.ray).applyMatrix4(she),null!==a.boundingBox&&!1===ohe.intersectsBox(a.boundingBox)))return;let l,c,u,d,h,p,A=a.index,f=a.attributes.position,m=a.drawRange;if(!1===i){for(h=Math.max(0,m.start),p=Math.min(A.count,m.start+m.count);h<p;h+=3)if(c=A.getX(h),u=A.getX(h+1),d=A.getX(h+2),l=g(e,n,ohe,f,c,u,d),l)return l.faceIndex=Math.floor(h/3),void r.push(l)}else{let t=a.attributes.position,i=new jG,s=new jG,l=new jG,c=new jG,u=2,d=1/((o.scale.x+o.scale.y+o.scale.z)/3),h=d*d;for(let a=Math.max(0,m.start),p=Math.min(t.count,m.start+m.count)-1;a<p;a+=u){if(i.fromBufferAttribute(t,a),s.fromBufferAttribute(t,a+1),ohe.distanceSqToSegment(i,s,c,l)>h)continue;c.applyMatrix4(o.matrixWorld);let u=n.ray.origin.distanceTo(c);u<n.near||u>n.far||r.push({distance:u,point:l.clone().applyMatrix4(o.matrixWorld),object:e})}}function g(e,t,n,r,i,o,a){let s=new jG,l=new jG,c=new jG,u=new jG,d=new jG;if(s.fromBufferAttribute(r,i),l.fromBufferAttribute(r,o),c.fromBufferAttribute(r,a),null===n.intersectTriangle(s,l,c,!1,u))return null;d.copy(u),d.applyMatrix4(e.matrixWorld);let h=t.ray.origin.distanceTo(d);return h<t.near||h>t.far?null:{faceIndex:1,distance:h,point:d.clone(),object:e}}},che=new jG,uhe=new UK,dhe=class extends iJ{constructor(e){let t=new mK,n=new Y$({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new PG(15711266),s=new PG(15711266),l=new PG(2857471);function c(e,t,n){u(e,n),u(t,n)}function u(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}c("n1","n2",a),c("n2","n4",a),c("n4","n3",a),c("n3","n1",a),c("f1","f2",a),c("f2","f4",a),c("f4","f3",a),c("f3","f1",a),c("n1","f1",a),c("n2","f2",a),c("n3","f3",a),c("n4","f4",a),c("p","n1",s),c("p","n2",s),c("p","n3",s),c("p","n4",s),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l),t.setAttribute("position",new lK(r,3)),t.setAttribute("color",new lK(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){let e=this.geometry,t=this.pointMap;uhe.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let n=.8;hhe("n1",t,e,uhe,-1,-1,n),hhe("n2",t,e,uhe,1,-1,n),hhe("n3",t,e,uhe,-1,1,n),hhe("n4",t,e,uhe,1,1,n);let r=n;hhe("f1",t,e,uhe,-1,-1,r),hhe("f2",t,e,uhe,1,-1,r),hhe("f3",t,e,uhe,-1,1,r),hhe("f4",t,e,uhe,1,1,r);let i=r;hhe("u1",t,e,uhe,.35,1.1,i),hhe("u2",t,e,uhe,-.35,1.1,i),hhe("u3",t,e,uhe,0,1.55,i),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function hhe(e,t,n,r,i,o,a){che.set(i,o,a).unproject(r);let s=t[e];if(void 0!==s){let e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],che.x,che.y,che.z)}}var phe,Ahe=class extends(ihe(dhe)){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){lhe(this.object,this.geometry,e,t,!0)}};(phe||(phe={})).is=e=>"objectHelper"in e;var fhe=(e,t)=>class extends(Cie(e)){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(e,t){this.objectHelper.raycast(e,t)}showGizmos(){for(let e in this.gizmos){let t=this.gizmos[e];t instanceof N0&&(t.visible=!0)}}updateEntityBoxSize(e,t){this.objectHelper.visible&&this.geometryHelper instanceof FK?(e.setScalar(0),t.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(e,t)}hideGizmos(){for(let e in this.gizmos){let t=this.gizmos[e];t instanceof N0&&(t.visible=!1)}}},mhe=new jG,ghe=new jG,vhe=new NG,yhe=new jG,bhe=new jG,whe=new jG,xhe=class extends(fhe(UK,Ahe)){constructor(e="",t={...ate.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=oee.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new gq,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let n=this.width,r=this.height;this.orthoCamera=new uY(-.5*n,.5*n,.5*r,-.5*r,-5e4,1e4),this.perspCamera=new zK(45,n/r,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return"PerspectiveCamera"===this.cameraType}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){"PerspectiveCamera"===e?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&("PerspectiveCamera"===e?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){"PerspectiveCamera"===e?this.toPerspective():"OrthographicCamera"===e&&this.toOrthographic()}get near(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near}set near(e){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,n){"number"==typeof e&&(e=new jG(e,t,n)),super.lookAt(e),this.getWorldPosition(mhe),this.targetOffset=mhe.distanceTo(e)}getTarget(e=new jG){return this.getWorldDirection(ghe),this.getWorldPosition(mhe),ghe.multiplyScalar(this.targetOffset),e.copy(mhe).add(ghe),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(mhe),mhe.distanceTo(e)}updateUp(){this.getWorldQuaternion(vhe),yhe.set(0,0,1).applyQuaternion(vhe),bhe.copy(Hq.DEFAULT_UP),this.isUpVectorFlipped&&bhe.negate(),bhe.applyQuaternion(vhe),whe.copy(Hq.DEFAULT_UP).projectOnPlane(yhe),this.angleOffsetFromUp=whe.angleTo(bhe),this.angleOffsetFromUp*=whe.cross(bhe).dot(yhe)>=0?1:-1}updateTransformState(e,t){let n=super.updateTransformState(e,t);return void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),n}getViewFrontToObject(e){let t=e.getWorldPosition(new jG),n=e.getWorldDirection(new jG).multiplyScalar(this.targetOffset);return{position:t.clone().add(n),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new jG).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new jG;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,n=!1){if(this.aspect=e/t,n){let n=e>t?this.aspect:1,r=e>t?1:this.aspect;this.left=-395*n,this.right=395*n,this.top=1/r*395,this.bottom=1/r*-395}else this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,n,r,i,o){"PerspectiveCamera"===this._cameraType?this.perspCamera.setViewOffset(e,t,n,r,i,o):this.orthoCamera.setViewOffset(e,t,n,r,i,o)}clearViewOffset(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){"PerspectiveCamera"===this._cameraType?this.toPerspective():"OrthographicCamera"===this._cameraType&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=null===e.view?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return B6(t,e)}updateCameraSubtype(e,t){let n="perspective"===e?"PerspectiveCamera":"OrthographicCamera";void 0!==t.zoom&&this.setZoom(n,t.zoom),void 0!==t.near&&this.setNear(n,t.near),void 0!==t.fov&&"PerspectiveCamera"===n&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),void 0!==e.far&&(this.far=e.far),void 0!==e.orthographic&&this.updateCameraSubtype("orthographic",e.orthographic),void 0!==e.perspective&&this.updateCameraSubtype("perspective",e.perspective),void 0!==e.type&&(this.cameraType=e.type),void 0!==e.up&&this.up.fromArray(e.up),void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset),void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),1===e.path.length&&0===e.type&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},Che=new gq,She=new gq;function Bhe(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{var r;"BooleanGeometry"===(null==(r=n.geometry)?void 0:r.type)&&(t=!0)})),t}var _he,Ehe=class extends lde{constructor(e,t,n){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new mK,this.onAfterRender=(e,t,n,r,i,o)=>{super.onAfterRender(e,t,n,r,i,o),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),1===e.path.length&&"geometry"===e.path[0]&&0===e.type&&void 0!==e.props.operation&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var n;if(-1!==this.booleanMeshSetAddress&&!e)return;for(let i=0;i<this.children.length;i++){let n=this.children[i];n instanceof Ehe&&!0===n.dataPatched.visible&&n.recomputeBoolean(!0===e,t)}this.meshSetAddresses=[];for(let i=0;i<this.children.length;i++){let r=this.children[i];if(r instanceof Use&&!0===r.dataPatched.visible&&(null==(n=r.geometry.attributes.position)?void 0:n.count)>0&&r.geometry.drawRange.count>0&&0!==r.booleanMeshSetAddress){Che.multiplyMatrices(r.hiddenMatrix,r.matrix);try{if(-1===r.booleanMeshSetAddress){if((r.geometry.index??r.geometry.getAttribute("position")).count/3<15e5&&(r.booleanMeshSetAddress=fse.getMeshSet(r.geometry,!0===e,t)),-1===r.booleanMeshSetAddress)return;fse.transformMeshSet(r.booleanMeshSetAddress,Che),r.booleanMatrixInvOld.copy(Che).invert(),r.booleanWasTransformed=!1}else r instanceof Ehe&&!0===r.needsTransformForDownstream?(fse.transformMeshSet(r.booleanMeshSetAddress,Che),r.needsTransformForDownstream=!1):!0===r.booleanWasTransformed&&(fse.transformMeshSet(r.booleanMeshSetAddress,She.multiplyMatrices(Che,r.booleanMatrixInvOld)),r.booleanMatrixInvOld.copy(Che).invert(),r.booleanWasTransformed=!1)}catch(V9){r.booleanMeshSetAddress=0,r.geometry.userData.booleanOperationDidFail=!0;continue}!1===fse.hasOpenEdges(r.booleanMeshSetAddress)||i===this.children.length-1&&2===this.booleanOp?(this.meshSetAddresses.push(r.booleanMeshSetAddress),r.geometry.userData.booleanOperationDidFail=!1):r.geometry.userData.booleanOperationDidFail="openEdges"}}if(0===this.meshSetAddresses.length)return this.geometry.setAttribute("position",new lK([],0)),void this.geometry.setDrawRange(0,0);if(!0===e)return fse.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new mK,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=fse.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(ree){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,fde(this),mde(this)}dispose(){super.dispose(),this.geometry.dispose()}};(_he||(_he={})).is=function(e){return eie.is(e)&&e instanceof zZ};var Mhe=(e,t)=>class extends(fhe(e,t)){updateState_Light(e,t){this.updateState_Entity(e,t),void 0!==e.color&&(this.color=t.shared.color(e.color)),void 0!==e.intensity&&(this.intensity=e.intensity),void 0!==e.depth&&(this.shadow.camera.far=e.depth,this.shadow.needsUpdate=!0),void 0!==e.shadows&&(this.castShadow=e.shadows)}},Phe=e=>e instanceof Use,The=e=>null!==e&&e instanceof Ehe,Dhe=e=>phe.is(e),Fhe=new jG(1,1,1),Ihe=new jG,khe=new jG,Ohe=new NG,Lhe=class extends(ihe(j0)){constructor(e,t=15){super(t),this.object=e,this.dummy=new S$,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){lhe(this.object,Lhe.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose(Ihe,Ohe,khe),this.matrix.compose(Ihe,Ohe,Fhe),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},Rhe=class extends(fhe(S$,Lhe)){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&1===Object.keys(e).length&&t.scene.reloadSplats()}},Uhe=class extends(fhe(S$,Lhe)){constructor(e,t,n){super(),this.super_Entity(e,t),this.context=n,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},zhe=0,Nhe=1,jhe="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Hhe=class extends RK{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new y0(null),kernel16:new y0(null),inputBuffer:new y0(null),cocBuffer:new y0(null),texelSize:new y0(new hG),scale:new y0(1)},blending:kQ,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}",vertexShader:jhe}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=new Float32Array(128),t=new Float32Array(32),n=0,r=0;for(let a=0;a<80;++a){let i=2.39996323*a,o=Math.sqrt(a)/Math.sqrt(80),s=o*Math.cos(i),l=o*Math.sin(i);a%5==0?(t[r++]=s,t[r++]=l):(e[n++]=s,e[n++]=l)}let i=[],o=[];for(let a=0;a<128;)i.push(new LG(e[a++],e[a++],e[a++],e[a++]));for(let a=0;a<32;)o.push(new LG(t[a++],t[a++],t[a++],t[a++]));this.uniforms.kernel64.value=i,this.uniforms.kernel16.value=o}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function Qhe(e,t,n){return e*(t-n)-t}function Vhe(e,t,n){return Math.min(Math.max((e+t)/(t-n),0),1)}var Whe=class extends RK{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new y0(null),focusDistance:new y0(0),focusRange:new y0(0),cameraNear:new y0(.3),cameraFar:new y0(1e3)},blending:kQ,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:jhe}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=jW){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-Qhe(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=Vhe(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-Qhe(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=Vhe(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof zK?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Ghe=class extends RK{constructor(e=new hG){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new y0(null),texelSize:new y0(new hG),halfTexelSize:new y0(new hG),kernel:new y0(0),scale:new y0(1)},blending:kQ,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.halfTexelSize.value.copy(n.texelSize.value).multiplyScalar(.5)}},qhe=class extends RK{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new y0(null),opacity:new y0(1)},blending:kQ,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:jhe}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},Khe=2,Yhe=0,Xhe=class extends RK{constructor(e=new hG,t=Khe){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:bQ.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new y0(null),depthBuffer:new y0(null),predicationBuffer:new y0(null),texelSize:new y0(e)},blending:kQ,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=jW){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},$he="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}",Jhe={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Zhe=class extends RK{constructor(e,t,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:bQ.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new y0(null),depthBuffer:new y0(null),resolution:new y0(new hG),texelSize:new y0(new hG),cameraNear:new y0(.3),cameraFar:new y0(1e3),aspect:new y0(1),time:new y0(0)},blending:kQ,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=jW){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=$he.replace(Jhe.FRAGMENT_HEAD,e.get(Jhe.FRAGMENT_HEAD)).replace(Jhe.FRAGMENT_MAIN_UV,e.get(Jhe.FRAGMENT_MAIN_UV)).replace(Jhe.FRAGMENT_MAIN_IMAGE,e.get(Jhe.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(Jhe.VERTEX_HEAD,e.get(Jhe.VERTEX_HEAD)).replace(Jhe.VERTEX_MAIN_SUPPORT,e.get(Jhe.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof zK?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return Jhe}},epe=class extends RK{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:bQ.replace(/\D+/g,"")},uniforms:{inputBuffer:new y0(null),threshold:new y0(0),smoothing:new y0(1),range:new y0(null)},blending:kQ,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:jhe}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},tpe=0,npe=1,rpe=class extends RK{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new y0(e),inputBuffer:new y0(null),strength:new y0(1)},blending:kQ,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:jhe}),this.toneMapped=!1,this.setColorChannel(zhe),this.setMaskFunction(tpe)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==IV&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},ipe=class extends RK{constructor(e=new hG,t=new hG){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new y0(null),searchTexture:new y0(null),areaTexture:new y0(null),resolution:new y0(t),texelSize:new y0(e)},blending:kQ,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.resolution.value.set(e,t)}},ope=new UK,ape=null;var spe=class{constructor(e="Pass",t=new I$,n=ope){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new TK(function(){if(null===ape){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(ape=new mK).setAttribute?(ape.setAttribute("position",new oK(e,3)),ape.setAttribute("uv",new oK(t,2))):(ape.addAttribute("position",new oK(e,3)),ape.addAttribute("uv",new oK(t,2)))}return ape}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new I$),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=jW){}render(e,t,n,r,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"object"==typeof t&&"function"==typeof t.dispose){if(t instanceof I$||t===this.renderer)continue;this[e].dispose()}}}},lpe=class extends spe{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new qhe,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new RG(1,1,{minFilter:TV,magFilter:TV,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==IV?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===NW&&(this.renderTarget.texture.encoding=NW))}},cpe=class extends spe{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){let o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},upe=new PG,dpe=class extends spe{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,i){let o=this.overrideClearColor,a=this.overrideClearAlpha,s=e.getClearAlpha(),l=null!==o,c=a>=0;l?(upe.copy(e.getClearColor(upe)),e.setClearColor(o,c?a:s)):c&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(upe,s):c&&e.setClearAlpha(s)}},hpe=-1,ppe=class extends $W{constructor(e,t=-1,n=-1,r=1){super(),this.resizable=e,this.base=new hG(1,1),this.preferred=new hG(t,n),this.target=this.preferred,this.s=r}get width(){let e,{base:t,preferred:n,scale:r}=this;return e=n.width!==hpe?n.width:n.height!==hpe?Math.round(n.height*(t.width/Math.max(t.height,1))):Math.round(t.width*r),e}set width(e){this.preferredWidth=e}get height(){let e,{base:t,preferred:n,scale:r}=this;return e=n.height!==hpe?n.height:n.width!==hpe?Math.round(n.width/Math.max(t.width/Math.max(t.height,1),1)):Math.round(t.height*r),e}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(hpe),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return hpe}},Ape=!1,fpe=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case IQ:t=this.materialsFlatShadedDoubleSide;break;case FQ:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case IQ:t=this.materialsDoubleSide;break;case FQ:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let n of t)n.uniforms=Object.assign({},e.uniforms),n.side=DQ;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=FQ,n})),this.materialsDoubleSide=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=IQ,n})),this.materialsFlatShaded=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=FQ,n})),this.materialsFlatShadedDoubleSide=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=IQ,n}))}}render(e,t,n){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Ape){let r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(let e of r)e[0].material=e[1];this.meshCount!==r.size&&r.clear()}else{let r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Ape}static set workaroundEnabled(e){Ape=e}},mpe=class extends spe{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new dpe,this.overrideMaterialManager=null===n?null:new fpe(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new fpe(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){let o=this.scene,a=this.camera,s=this.selection,l=a.layers.mask,c=o.background,u=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;null!==s&&a.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,o,a):e.render(o,a),a.layers.mask=l,o.background=c,e.shadowMap.autoUpdate=u}},gpe=class extends spe{constructor(e,t,{resolutionScale:n=1,width:r=ppe.AUTO_SIZE,height:i=ppe.AUTO_SIZE,renderTarget:o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new mpe(e,t,new f$({depthPacking:HW}));let a=this.renderPass;a.skipShadowMapUpdate=!0,a.ignoreBackground=!0;let s=a.getClearPass();s.overrideClearColor=new PG(16777215),s.overrideClearAlpha=1,this.renderTarget=o,void 0===this.renderTarget&&(this.renderTarget=new RG(1,1,{minFilter:EV,magFilter:EV,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new ppe(this,r,i,n);l.addEventListener("change",(e=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){let o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,o)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}},vpe={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},ype=new Map([[vpe.SKIP,null],[vpe.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[vpe.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[vpe.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[vpe.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[vpe.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[vpe.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[vpe.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[vpe.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[vpe.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[vpe.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[vpe.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[vpe.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[vpe.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[vpe.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[vpe.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[vpe.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[vpe.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[vpe.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),bpe=class extends $W{constructor(e,t=1){super(),this.f=e,this.opacity=new y0(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return ype.get(this.blendFunction)}},wpe=0,xpe=1,Cpe=2,Spe=class extends $W{constructor(e,t,{attributes:n=wpe,blendFunction:r=vpe.SCREEN,defines:i=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:s=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=s,this.defines=i,this.uniforms=o,this.extensions=a,this.blendMode=new bpe(r),this.blendMode.addEventListener("change",(e=>this.setChanged()))}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=jW){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"object"==typeof t&&"function"==typeof t.dispose){if(t instanceof I$||t===this.renderer)continue;this[e].dispose()}}}};function Bpe(e,t,n){for(let r of t){let t="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),i=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(i,t))}}function _pe(e,t,n,r,i,o,a){let s=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=void 0!==s.get("fragment")&&/mainImage/.test(s.get("fragment")),c=void 0!==s.get("fragment")&&/mainUv/.test(s.get("fragment")),u=[],d=[],h=!1,p=!1;if(void 0===s.get("fragment"));else if(c&&a&Cpe);else if(l||c){let A=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,f=Zhe.Section;if(c){let t=`\t${e}MainUv(UV);\n`;n.set(f.FRAGMENT_MAIN_UV,n.get(f.FRAGMENT_MAIN_UV)+t),h=!0}if(null!==s.get("vertex")&&/mainSupport/.test(s.get("vertex"))){let t=`\t${e}MainSupport(`;t+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s.get("vertex"))?"vUv);\n":");\n",n.set(f.VERTEX_MAIN_SUPPORT,n.get(f.VERTEX_MAIN_SUPPORT)+t),u=u.concat([...s.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map((e=>e[1]))),d=d.concat(u).concat([...s.get("vertex").matchAll(A)].map((e=>e[1])))}d=d.concat([...s.get("fragment").matchAll(A)].map((e=>e[1]))),d=d.concat([...t.defines.keys()].map((e=>e.replace(/\([\w\s,]*\)/g,"")))),d=d.concat([...t.uniforms.keys()]),t.uniforms.forEach(((t,n)=>o.set(e+n.charAt(0).toUpperCase()+n.slice(1),t))),t.defines.forEach(((t,n)=>i.set(e+n.charAt(0).toUpperCase()+n.slice(1),t))),Bpe(e,d,i),Bpe(e,d,s);let m=t.blendMode;if(r.set(m.blendFunction,m),l){let t=`${e}MainImage(color0, UV, `;!!(a&xpe)&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(s.get("fragment"))&&(t+="depth, ",p=!0),t+="color1);\n\t";let r=e+"BlendOpacity";o.set(r,m.opacity),t+=`color0 = blend${m.blendFunction}(color0, color1, ${r});\n\n\t`,n.set(f.FRAGMENT_MAIN_IMAGE,n.get(f.FRAGMENT_MAIN_IMAGE)+t),t=`uniform float ${r};\n\n`,n.set(f.FRAGMENT_HEAD,n.get(f.FRAGMENT_HEAD)+t)}n.set(f.FRAGMENT_HEAD,n.get(f.FRAGMENT_HEAD)+s.get("fragment")+"\n"),null!==s.get("vertex")&&n.set(f.VERTEX_HEAD,n.get(f.VERTEX_HEAD)+s.get("vertex")+"\n")}else;return{varyings:u,transformedUv:h,readDepth:p}}var Epe=class extends spe{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Zhe(null,null,null,e),this.effects=t.sort(((e,t)=>t.attributes-e.attributes)),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount,t=e.maxVaryings,this.varyingCount}updateMaterial(){let e=Zhe.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),n=new Map,r=new Map,i=new Map,o=new Set,a=0,s=0,l=0,c=!1,u=!1;for(let h of this.effects)if(h.blendMode.blendFunction===vpe.SKIP)l|=h.getAttributes()&xpe;else if(l&h.getAttributes()&Cpe);else{l|=h.getAttributes();let e=_pe("e"+a++,h,t,n,r,i,l);if(s+=e.varyings.length,c=c||e.transformedUv,u=u||e.readDepth,null!==h.extensions)for(let t of h.extensions)o.add(t)}let d=/\bblend\b/g;for(let h of n.values()){let n=h.getShaderCode().replace(d,`blend${h.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+n+"\n")}if(l&xpe){if(u){let n="float depth = readDepth(UV);\n\n\t";t.set(e.FRAGMENT_MAIN_IMAGE,n+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=null===this.getDepthTexture()}else this.needsDepthTexture=!1;if(c){let n="vec2 transformedUv = vUv;\n";t.set(e.FRAGMENT_MAIN_UV,n+t.get(e.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")}else r.set("UV","vUv");t.forEach(((e,t,n)=>n.set(t,e.trim().replace(/^#/,"\n#")))),this.uniformCount=i.size,this.varyingCount=s,this.skipRendering=0===a,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(o).setUniforms(i).setDefines(r)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=jW){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,i){for(let o of this.effects)o.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=r,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(let r of this.effects)r.initialize(e,t,n),r.addEventListener("change",(e=>this.handleEvent(e)));this.updateMaterial(),this.verifyResources(),void 0!==n&&n!==IV&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){if("change"===e.type)this.recompile()}},Mpe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ppe=class extends spe{constructor({resolutionScale:e=.5,width:t=ppe.AUTO_SIZE,height:n=ppe.AUTO_SIZE,kernelSize:r=Ope.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new RG(1,1,{minFilter:TV,magFilter:TV,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let i=this.resolution=new ppe(this,t,n,e);i.addEventListener("change",(e=>this.setSize(i.baseWidth,i.baseHeight))),this.blurMaterial=new Ghe,this.ditheredBlurMaterial=new Ghe,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){let o,a,s=this.scene,l=this.camera,c=this.renderTargetA,u=this.renderTargetB,d=Mpe[this.kernelSize],h=this.blurMaterial,p=t;for(this.fullscreenMaterial=h,o=0,a=d.length-1;o<a;++o){let t=1&o?u:c;h.kernel=d[o],h.inputBuffer=p.texture,e.setRenderTarget(t),e.render(s,l),p=t}this.dithering&&(h=this.ditheredBlurMaterial,this.fullscreenMaterial=h),h.kernel=d[o],h.inputBuffer=p.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(s,l)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(r,i),this.ditheredBlurMaterial.setSize(r,i)}initialize(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==IV?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===NW&&(this.renderTargetA.texture.encoding=NW,this.renderTargetB.texture.encoding=NW))}static get AUTO_SIZE(){return ppe.AUTO_SIZE}},Tpe=class extends spe{constructor({width:e=ppe.AUTO_SIZE,height:t=ppe.AUTO_SIZE,renderTarget:n,luminanceRange:r,colorOutput:i}={}){super("LuminancePass"),this.fullscreenMaterial=new epe(i,r),this.needsSwap=!1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new RG(1,1,{minFilter:TV,magFilter:TV,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let o=this.resolution=new ppe(this,e,t);o.addEventListener("change",(e=>this.setSize(o.baseWidth,o.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){void 0!==n&&n!==IV&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Dpe=class extends spe{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new dpe(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,i){let o=e.getContext(),a=e.state.buffers,s=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,d=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,u,4294967295),a.stencil.setClear(d),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(n),e.render(s,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},Fpe=class extends spe{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,null!==this.fullscreenMaterial){let t=this.fullscreenMaterial.uniforms;void 0!==t&&void 0!==t[e]&&(this.inputBufferUniform=t[e])}}render(e,t,n,r,i){null!==this.inputBufferUniform&&null!==t&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}initialize(e,t,n){void 0!==n&&n!==IV&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Ipe=.001,kpe=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*Ipe}getFixedDelta(){return this.fixedDelta*Ipe}setFixedDelta(e){return this.fixedDelta=1e3*e,this}getElapsed(){return this.elapsed*Ipe}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==e?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Ope={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Lpe=class extends Spe{constructor({blendFunction:e=vpe.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,resolutionScale:r=.5,intensity:i=1,width:o=ppe.AUTO_SIZE,height:a=ppe.AUTO_SIZE,kernelSize:s=Ope.LARGE}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",{blendFunction:e,uniforms:new Map([["map",new y0(null)],["intensity",new y0(i)]])}),this.renderTarget=new RG(1,1,{minFilter:TV,magFilter:TV,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new Tpe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=n,this.blurPass=new Ppe({resolutionScale:r,width:o,height:a,kernelSize:s});let l=this.blurPass.getResolution();l.addEventListener("change",(e=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return 1}set distinction(e){}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){let r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.luminancePass.resolution.copy(n)}initialize(e,t,n){this.blurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,e.outputEncoding===NW&&(this.renderTarget.texture.encoding=NW))}},Rpe=class extends Spe{constructor({blendFunction:e=vpe.NORMAL,brightness:t=0,contrast:n=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new y0(t)],["contrast",new y0(n)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},Upe=class extends Spe{constructor(e=vpe.NORMAL){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:e})}},zpe=class extends Spe{constructor({blendFunction:e=vpe.NORMAL,offset:t=new hG(.001,5e-4)}={}){super("ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",blendFunction:e,attributes:Cpe,uniforms:new Map([["offset",new y0(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},Npe=class extends Spe{constructor(e,{blendFunction:t=vpe.NORMAL,worldFocusDistance:n,worldFocusRange:r,focusDistance:i=0,focalLength:o=.1,focusRange:a=o,bokehScale:s=1,width:l=ppe.AUTO_SIZE,height:c=ppe.AUTO_SIZE}={}){super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:t,attributes:xpe,uniforms:new Map([["nearColorBuffer",new y0(null)],["farColorBuffer",new y0(null)],["nearCoCBuffer",new y0(null)],["scale",new y0(1)]])}),this.camera=e,this.renderTarget=new RG(1,1,{minFilter:TV,magFilter:TV,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Fpe(new Whe(e));let u=this.cocMaterial;u.focusDistance=i,u.focusRange=a,void 0!==n&&(u.worldFocusDistance=n),void 0!==r&&(u.worldFocusRange=r),this.blurPass=new Ppe({kernelSize:Ope.MEDIUM,width:l,height:c});let d=this.blurPass.getResolution();d.addEventListener("change",(e=>this.setSize(d.getBaseWidth(),d.getBaseHeight()))),this.maskPass=new Fpe(new rpe(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=npe,h.colorChannel=Nhe,this.bokehNearBasePass=new Fpe(new Hhe(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Fpe(new Hhe(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Fpe(new Hhe(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Fpe(new Hhe(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=s}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let n of t)n.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera;return Vhe(-t.position.distanceTo(e),t.near,t.far)}setDepthTexture(e,t=jW){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,n){let r=this.renderTarget,i=this.renderTargetCoC,o=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(null!==this.target){let e=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=e}this.cocPass.render(e,null,i),this.blurPass.render(e,i,o),this.maskPass.render(e,t,a),this.bokehFarBasePass.render(e,a,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let r=n.width,i=n.height,o=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];o.push(this.renderTargetCoC,this.renderTargetMasked),o.forEach((n=>n.setSize(e,t))),o=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],o.forEach((e=>e.setSize(r,i))),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((e=>e.fullscreenMaterial.setSize(r,i)))}initialize(e,t,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((r=>r.initialize(e,t,n))),this.blurPass.initialize(e,t,IV),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,e.outputEncoding===NW&&(this.renderTarget.texture.encoding=NW,this.renderTargetNear.texture.encoding=NW,this.renderTargetFar.texture.encoding=NW,this.renderTargetMasked.texture.encoding=NW))}};new jG,new gq;var jpe=class extends Spe{constructor({blendFunction:e=vpe.NORMAL,hue:t=0,saturation:n=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new y0(new jG)],["saturation",new y0(n)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)}set hue(e){let t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new PG;var Hpe=class extends Spe{constructor({blendFunction:e=vpe.SCREEN,premultiply:t=!1}={}){super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},Qpe=class extends Spe{constructor(e=30){super("PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new y0(!1)],["d",new y0(new hG)]])}),this.resolution=new hG,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new jG,new jG;var Vpe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",Wpe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",Gpe=0,qpe=1,Kpe=2,Ype=3,Xpe=class extends Spe{constructor({preset:e=qpe,edgeDetectionMode:t=Khe,predicationMode:n=Yhe}={}){let r,i;super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:vpe.NORMAL,attributes:Cpe|xpe,uniforms:new Map([["weightMap",new y0(null)]])}),arguments.length>1&&(r=arguments[0],i=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new RG(1,1,{minFilter:TV,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new dpe(!0,!1,!1),this.clearPass.overrideClearColor=new PG(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Fpe(new Xhe),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new Fpe(new ipe);let o=new DZ;o.onLoad=()=>{let e=new OG(r);e.name="SMAA.Search",e.magFilter=EV,e.minFilter=EV,e.generateMipmaps=!1,e.needsUpdate=!0,e.flipY=!0,this.weightsMaterial.searchTexture=e;let t=new OG(i);t.name="SMAA.Area",t.magFilter=TV,t.minFilter=TV,t.generateMipmaps=!1,t.needsUpdate=!0,t.flipY=!1,this.weightsMaterial.areaTexture=t,this.dispatchEvent({type:"load"})},o.itemStart("search"),o.itemStart("area"),void 0!==r&&void 0!==i?(o.itemEnd("search"),o.itemEnd("area")):typeof Image<"u"&&(r=new Image,i=new Image,r.addEventListener("load",(()=>o.itemEnd("search"))),i.addEventListener("load",(()=>o.itemEnd("area"))),r.src=Vpe,i.src=Wpe),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(e){case Gpe:t.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case qpe:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case Kpe:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case Ype:t.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0}}setDepthTexture(e,t=jW){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,n){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;null!==e&&null!==t&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return Vpe}static get areaImageDataURL(){return Wpe}},$pe=0,Jpe=1,Zpe=class extends Spe{constructor({blendFunction:e=vpe.NORMAL,technique:t=$pe,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new y0(r)],["darkness",new y0(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Jpe}set eskil(e){this.technique=e?Jpe:$pe}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},eAe=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(e){this.effect.blendMode.opacity.value=e},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(e){this.effect.blendMode.setBlendFunction(Number(e))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=vpe.NORMAL}},tAe=class extends eAe{constructor(){super(Lpe),this.blendFunction=vpe.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},nAe=class extends eAe{constructor(){super(Rpe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},rAe=class extends eAe{constructor(){super(zpe),this.effect.offset=new hG(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]}},iAe=class extends eAe{constructor(){super(Upe)}},oAe=class extends eAe{constructor(){super(jpe),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},aAe=class extends eAe{constructor(){super(Hpe),this.blendFunction=vpe.OVERLAY}},sAe=class extends eAe{constructor(){super(Zpe)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},lAe=class extends eAe{constructor(e){super(Npe)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&!1===this.isPerspectiveCamera||!e.isPerspectiveCamera&&!0===this.isPerspectiveCamera)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},cAe=class extends eAe{constructor(){super(Qpe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},uAe=class extends RK{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new y0(null)},blending:kQ,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}",fragmentShader:"#define GLSLIFY 1\nlayout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},dAe=class extends spe{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new uAe,this.resolutionVector=new hG,this.resolveMaterial=new RK({name:"TAAResolveMaterial",uniforms:{inputBuffer:new y0(null),historyBuffer:new y0(null),velocityBuffer:new y0(null),depthBuffer:new y0(null),resolution:new y0(new hG)},blending:kQ,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\n#include <common>\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;\n#define USE_YCOCG\n#define USE_CATMULL_ROM\nconst float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){\n#ifdef USE_YCOCG\nvec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);\n#else\nreturn texture(tex,uv);\n#endif\n}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){\n#ifdef CHOOSE_LONGEST_MOTION_VECTOR\nfloat longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;\n#else\nfloat closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;\n#endif\n}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);\n#ifdef USE_CATMULL_ROM\nvec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);\n#else\nvec4 previousColor=sample_color(historyBuffer,previousPixelPos);\n#endif\n#ifdef USE_YCOCG\npreviousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);\n#endif\nvec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);\n#ifdef USE_YCOCG\nvec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;\n#endif\nvec4 previousColorClipped=clamp(previousColor,cmin,cmax);\n#ifdef LUMINANCE_DIFFERENCES\n#ifdef USE_YCOCG\nfloat lum0=currentColor.r;float lum1=previousColorClipped.r;\n#else\nfloat lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);\n#endif\nfloat unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));\n#else\nconst float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);\n#endif\n#ifdef USE_YCOCG\ngl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);\n#else\ngl_FragColor=result;\n#endif\n}"}),this.historyRenderTarget=new RG(1024,1024,{minFilter:TV,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new RG(1024,1024,{minFilter:TV,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let n=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(n),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},hAe=class extends spe{constructor(e,t,n){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new gpe(e,t,{renderTarget:n.transmissionDepthTarget}),this.passThroughMaterial=new uAe,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new uAe,this.depthPass=new gpe(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,n){let r=this.camera.layers.mask,i=e;i.setRenderTarget(i.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],i.clear(),i.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,n),i.shadowMap.needsUpdate=!1,i.shadowMap.autoUpdate=!1;let o=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(o),e.render(this.splineScene,this.camera),this.camera.layers.mask=r}},pAe=new I$,AAe=new RK({transparent:!0,vertexShader:"\n        void main() {\n            gl_Position = vec4(0.0);\n        }\n    ",fragmentShader:"\n        layout(location = 1) out vec4 gVelocity;\n\n        void main() {\n            gl_FragColor = vec4(0.0);\n\t\t\tgVelocity = vec4(0.0);\n        }\n    "}),fAe=class extends spe{constructor(e,t,n){super("OpaquePass",t??pAe,n),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??pAe}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse((e=>{e.layers.isEnabled(3)&&e instanceof Use&&(this.originalMaterials.set(e.id,e.material),e.material=AAe)})),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let n=this.renderToScreen?null:t;e.setRenderTarget(n),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach(((e,t)=>{let n=this.scene.getObjectById(t);n&&(n.material=e)}))}},mAe=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new lpe,this.depthTexture=null,this.timer=new kpe,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,n,i,r,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,n,i,r,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,n,i,r,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,null!==e){let n=e.getSize(new hG),r=(null==(t=e.getContext().getContextAttributes())?void 0:t.alpha)??!1,i=this.inputBuffer.texture[0].type;i===IV&&e.outputEncoding===NW&&(this.inputBuffer.texture[0].encoding=NW,this.outputBuffer.texture[0].encoding=NW,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(n.width,n.height,!1);for(let t of this.passes)t.initialize(e,r,i)}}replaceRenderer(e,t=!0){let n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){let e=this.depthTexture=new E$(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=YV,e.type=QV):e.type=UV,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,r,i,o){let a,s=this.renderer,l=null===s?new hG:s.getDrawingBufferSize(new hG),c={minFilter:TV,magFilter:TV,wrapS:BV,wrapT:BV,stencilBuffer:t,depthBuffer:e};return r>0?(a=new RG(l.width,l.height,c),a.samples=r):(i?(a=new zG(l.width,l.height,2,c),a.texture[1].type=NV):a=new RG(l.width,l.height,c),a.depthTexture=new E$(2048,2048),a.depthTexture.type=zV),n===IV&&null!==s&&s.outputEncoding===NW&&(Array.isArray(a.texture)?a.texture.forEach((e=>e.encoding=NW)):a.texture.encoding=NW),Array.isArray(a.texture)?a.texture.forEach(((e,t)=>{e.name=`EffectComposer.Buffer ${i} ${t}`,e.generateMipmaps=!1})):(a.texture.name=`EffectComposer.Buffer ${i}`,a.texture.generateMipmaps=!1),a.name=o,a}addPass(e,t){var n;let r,i=this.passes,o=this.renderer,a=o.getDrawingBufferSize(new hG),s=(null==(n=o.getContext().getContextAttributes())?void 0:n.alpha)??!1;if(e.MRTCompatible&&(r=this.inputBuffer.texture[0].type),e.MRTCompatible||(r=this.inputBuffer.texture.type),e.setRenderer(o),e.setSize(a.width,a.height),e.initialize(o,s,r),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){let t=this.createDepthTexture();for(e of i)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){let n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t,n,r,i,o=this.renderer,a=this.copyPass,s=this.inputBuffer,l=this.outputBuffer,c=this.inputBufferSingle,u=this.outputBufferSingle,d=!1;void 0===e&&(e=this.timer.update().getDelta());for(let h of this.passes)h.enabled&&(h.MRTCompatible?h.render(o,s,l,e,d):h.render(o,c,u,e,d),h.needsSwap&&(d&&(a.renderToScreen=h.renderToScreen,t=o.getContext(),n=o.state.buffers.stencil,n.setFunc(t.NOTEQUAL,1,4294967295),a.render(o,s,l,e,d),n.setFunc(t.EQUAL,1,4294967295)),r=s,i=c,s=l,c=u,l=r,u=i),h instanceof Dpe?d=!0:h instanceof cpe&&(d=!1))}setSize(e,t,n){let r=this.renderer;if(this._width=e,this._height=t,void 0===e||void 0===t){let n=r.getSize(new hG);e=n.width,t=n.height}r.setSize(e,t,n);let i=r.getDrawingBufferSize(new hG);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height),this.inputBufferSingle.setSize(i.width,i.height),this.outputBufferSingle.setSize(i.width,i.height);for(let o of this.passes)o.setSize(i.width,i.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),null!==this.inputBufferSingle&&this.inputBufferSingle.dispose(),null!==this.outputBufferSingle&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},gAe=new RK({name:"CombineMaterial",uniforms:{inputBufferA:new y0(null),inputBufferB:new y0(null)},blending:kQ,depthWrite:!1,depthTest:!1,vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    gl_Position = vec4(position.xy, 1.0, 1.0);\n    vUv = position.xy * 0.5 + 0.5;\n}\n",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D inputBufferA;\n    uniform sampler2D inputBufferB;\n\n    // TODO: Why do we need these when postpro of framemode is enabled???\n    layout(location = 1) out vec4 gVelocity;\n\n    void main() {\n\tvec4 resA = texture2D(inputBufferA, vUv);\n\tvec4 resB = texture2D(inputBufferB, vUv);\n    float a = resA.a + resB.a * ( 1.0 - resA.a );\n\n\tvec4 res;\n\tres.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));\n\tres.a = resA.a + resB.a * (1.0 - resA.a);\n\tgl_FragColor = res;\n    gVelocity = vec4(0.0);\n    }\n"}),vAe=class extends spe{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=gAe,this.helperPass=new fAe(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new fAe(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new Xpe({preset:Gpe,edgeDetectionMode:Khe});this.effectPass=new Epe(this.camera,t),this.rt=new RG(10,10,{minFilter:TV,magFilter:TV,wrapS:BV,wrapT:BV,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,n){super.initialize(e,t,n),this.effectPass.initialize(e,t,n)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,n){this.rt.depthTexture=t.depthTexture;let r=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,n),this.fullscreenMaterial.uniforms.inputBufferA.value=n.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(r),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},yAe=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],bAe=new RK({vertexShader:"#define GLSLIFY 1\n#include <skinning_pars_vertex>\nout vec3 n;void main(){\n#include <beginnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <skinning_vertex>\nvec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}",fragmentShader:"#define GLSLIFY 1\nin vec3 n;void main(){gl_FragColor=vec4(n,1.0);}"}),wAe=new RK({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){\n#ifdef DEBUG\nfloat d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);\n#else\nvec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;\n#endif\n}",uniforms:{texture_ao_lrez:new y0(null),texture_depth_lrez:new y0(null),texture_depth_hrez:new y0(null),near:new y0(null),far:new y0(null)}}),xAe=class extends spe{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let n=1024,r=1024;this.gBuffer=new RG(n,r,{type:L6?NV:zV,depthTexture:new E$(n,r),minFilter:TV,magFilter:TV}),this.depthBufferHighRes=new RG(n,r,{depthTexture:new E$(n,r)}),this.aoBuffer=new RG(n,r,{minFilter:TV,magFilter:TV}),this.splineScene=e,this.splineCamera=t;let i=new Float32Array(2*yAe.length);for(let a=0;a<yAe.length;a++){let e=2*a;i[e+0]=yAe[a][0],i[e+1]=yAe[a][1]}this.blueNoiseInDiskTexture=new U$(i,yAe.length,1,JV,zV),this.blueNoiseInDiskTexture.wrapS=SV,this.blueNoiseInDiskTexture.wrapT=SV,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new RK({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}\n#define USE_GBUFFER_NORMALS\nvoid main(){vec3 view_space_p=get_view_position(v_uv);\n#ifdef USE_GBUFFER_NORMALS\nvec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;\n#else\nvec3 view_space_n=-rebuild_normal(v_uv,view_space_p);\n#endif\nfloat radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}",uniforms:{near:new y0(null),far:new y0(null),fov:new y0(null),proj_info:new y0(new LG),is_ortho:new y0(!1),resolution:new y0(new hG),radius_of_influence:new y0(8),radius_in_screen_space:new y0(1),exponent:new y0(1),ao_color:new y0(new jG),bias:new y0(.5),texture_depth:new y0(null),texture_normals:new y0(null),texture_blue_noise:new y0(null),texture_blue_noise_in_disk:new y0(this.blueNoiseInDiskTexture),frame_index:new y0(0),fog_enabled:new y0(!1),fog_near:new y0(1),fog_far:new y0(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new RG(n,r,{minFilter:TV,magFilter:TV,wrapS:BV,wrapT:BV,depthBuffer:!1,type:zV});let o=new Xpe({preset:Ype,edgeDetectionMode:Khe});this.effectPass=new Epe(this.camera,o)}initialize(e,t,n){super.initialize(e,t,n),this.effectPass.initialize(e,t,n)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let n=this._runHalfRes?.5:1,r=e*n,i=t*n;this.gBuffer.setSize(r,i),this.aoBuffer.setSize(r,i),this.hbaoMaterial.uniforms.resolution.value.set(r,i),this.aaBuffer.setSize(r,i),this.effectPass.setSize(r,i)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,wAe.uniforms.texture_depth_hrez.value=e,wAe.needsUpdate=!0}render(e,t,n){this.splineScene.overrideMaterial=bAe;let r=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=r,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let e=this.splineCamera.perspCamera.projectionMatrix.elements,t=2/e[0],n=2/e[5],r=-(1-e[8])/e[0],i=-(1+e[9])/e[5];this.hbaoMaterial.uniforms.proj_info.value.set(t,n,r,i);let o=this.splineCamera.perspCamera.fov*(Math.PI/180),a=this.hbaoMaterial.uniforms.resolution.value.y/(2*Math.tan(.5*o)),s=.5*this.hbaoMaterial.uniforms.radius_of_influence.value*a;this.hbaoMaterial.uniforms.radius_in_screen_space.value=s,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let e=this.splineCamera.orthoCamera.projectionMatrix.elements,t=2/e[0],n=2/e[5],r=-(1+e[12])/e[0],i=-(1-e[13])/e[5];this.hbaoMaterial.uniforms.proj_info.value.set(t,n,r,i);let o=this.hbaoMaterial.uniforms.resolution.value.y/n*.5,a=this.hbaoMaterial.uniforms.radius_of_influence.value*o;this.hbaoMaterial.uniforms.radius_in_screen_space.value=a,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=wAe,wAe.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,wAe.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,wAe.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},CAe=class extends Fpe{constructor(){super(new RK({vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tInput;\nuniform sampler2D tMap;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform vec2 uResolution;\nuniform vec2 uCoords;\n\n// Draws a rectangle at center <st> with size <size>\nfloat rectangle(vec2 st, vec2 size) {\n    size = vec2(0.5) - size * 0.5;\n    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));\n    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));\n\n    return uv.x * uv.y;\n}\n\nuniform vec2 uSize;\nuniform float uScale;\nuniform float uDPR;\nuniform float uCurrent;\nuniform vec3 uSceneColor;\n\nvoid main() {\n    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n    screenUv *= 1.0 / uDPR;\n\n    vec2 center = vec2(0.5, -0.5);\n    vec2 outsideUv = screenUv;\n    outsideUv += center;\n    outsideUv -= uCoords.xy / uResolution.xy;\n    outsideUv = (outsideUv - 0.5) + 0.5;\n    outsideUv -= center;\n    vec2 s = (uSize / uResolution) * uScale;\n    float isOutside = 1.0 - rectangle(outsideUv, s);\n    \n    vec2 mid = vec2(0.5);\n    vec2 insideUv = (screenUv - mid + s * mid) / s;\n    vec4 background = texture2D(tInput, screenUv);\n    vec4 image = texture2D(tMap, insideUv);\n    gl_FragColor = mix(image, background, isOutside);\n}\n",uniforms:{tInput:new y0(null),tMap:new y0(null),uResolution:new y0(new hG),uSize:new y0(new hG),uCoords:new y0(new hG),uScale:new y0(1),uSceneColor:new y0(new PG(16711680)),uDPR:new y0(1),uCurrent:new y0(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},SAe=[],BAe=class extends Fpe{constructor(){super(new RK({vertexShader:"\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D toScene;\nuniform sampler2D fromScene;\nuniform vec2 resolution;\n\nuniform vec2 uResolution;\nuniform float uDPR;\n\nuniform float mixRatio;\nuniform sampler2D tMixTexture;\nuniform int useTexture;\nuniform float threshold;\n\nvoid main() {\n\tvec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n\tscreenUv *= 1.0 / uDPR;\n\n\tvec4 texel1 = texture2D( fromScene, screenUv );\n\tvec4 texel2 = texture2D( toScene, screenUv );\n\n\tif (useTexture==1) {\n\t\t\n\t\tvec4 transitionTexel = texture2D( tMixTexture, screenUv );\n\t\tfloat r = mixRatio * (1.0 + threshold * 2.0) - threshold;\n\t\tfloat mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixf );\n\t} else {\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixRatio );\n\t\t\n\t}\n}\n",uniforms:{toScene:new y0(null),fromScene:new y0(null),uResolution:new y0(new hG),uDPR:new y0(1),mixRatio:new y0(0),threshold:new y0(.1),useTexture:new y0(0),tMixTexture:{value:SAe[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},_Ae=class extends Fpe{constructor(){super(new RK({vertexShader:"\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D inputBuffer;\nuniform sampler2D blurredInputBuffer;\nuniform sampler2D overlay;\nuniform float blurIntensity;\n\nuniform vec2 uResolution;\nuniform float uDPR;\n\nvoid main() {\n\tvec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n\tscreenUv *= 1.0 / uDPR;\n\n\tvec4 texel1 = texture2D( overlay, screenUv );\n\tvec4 texel2 = texture2D( inputBuffer, screenUv );\n\tvec4 texel3 = texture2D( blurredInputBuffer, screenUv );\n\n\tfloat blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;\n    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );\n}\n",uniforms:{inputBuffer:new y0(null),blurredInputBuffer:new y0(null),overlay:new y0(null),uResolution:new y0(new hG),uDPR:new y0(1),blurIntensity:new y0(0)}})),this._blurEnabled=!1,this.blurTarget=new RG(1,1,{minFilter:TV,magFilter:TV,wrapS:BV,wrapT:BV}),this.blurPass=new Ppe({width:window.innerWidth,height:window.innerHeight,kernelSize:Ope.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t,n=1){this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=n,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let e=t.data.backgroundBlur,n=e.radius;this._blurEnabled=e.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=n/3}}render(e,t,n,r,i){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,r,i)),super.render(e,t,n,r,i)}};function EAe(e,t){return t&&t.enabled&&e.push(t.effect),e}var MAe=e=>Object.values(vpe).includes(e)?e:vpe.NORMAL,PAe=class extends $W{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=Vee.defaultData,this._scene=new I$,this._camera=new xhe,this.effects=new Map,this.blueNoiseTexture=new U$,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new n0,this.renderer=e,this.debug=!1,this.effects.set("bloom",new tAe),this.effects.set("chromaticAberration",new rAe),this.effects.set("vignette",new sAe),this.effects.set("noise",new aAe),this.effects.set("colorAverage",new iAe),this.effects.set("hueSaturation",new oAe),this.effects.set("brightnessContrast",new nAe),this.effects.set("depthOfField",new lAe),this.effects.set("pixelation",new cAe),this.effectComposer=new mAe(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new fAe(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new hAe(this.scene,this.camera,this.renderer),this.aoPass=new xAe(this.scene,this.camera),this.taaPass=new dAe,this.taaPass.renderToScreen=!1,this.helperPass=new vAe(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new CAe,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new _Ae,this.uiOverlayPass.enabled=!1,this.sceneTransitionPass=new BAe,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){void 0!==e?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let n=this.effectComposer.passes[t];!0!==n.enabled||e||!this._renderToScreen?n.renderToScreen=!1:(n.renderToScreen=!0,e=!0)}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new U$(e,128,128),this.blueNoiseTexture.wrapS=SV,this.blueNoiseTexture.wrapT=SV,this.blueNoiseTexture.minFilter=EV,this.blueNoiseTexture.magFilter=EV,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,n,r,i,o,a,s){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=n,this.aoPass.aoColor=r,this.aoPass.fogEnabled=i,this.aoPass.fogNear=o,this.aoPass.fogFar=a,this.aoPass.runHalfRes!==!s&&(this.aoPass.runHalfRes=!s)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t,n;if(null==(e=this.uvEffectPass)||e.dispose(),null==(t=this.effectPass)||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let e=[this.effects.get("pixelation")].reduce(EAe,[]);e.length>0&&(this.uvEffectPass=new Epe(this.camera,...e),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let t=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(EAe,[]);if(t.length>0&&(this.effectPass=new Epe(this.camera,...t),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&(null==(n=this.effects.get("depthOfField"))?void 0:n.enabled)&&void 0!==window)){let e=this.renderer.viewportWidth,t=this.renderer.viewportHeight;this.renderer.setSize(e-1,t-1),this.renderer.setSize(e,t)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new hG;this.renderer.getDrawingBufferSize(e),this._rt=new RG(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:SV,wrapT:SV}),this._rt.samples=0,this._savePass=new lpe(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new lpe(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(!0===e?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(null!==e?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...n}=e,r=!1;t!==this.postprocessingState.enabled&&(r=!0);for(let i of Object.entries(n)){let e=i[1],t=this.effects.get(i[0]);if(t){t.enabled!==e.enabled&&(r=!0),t.enabled=e.enabled;for(let[n,r]of Object.entries(e))"blendFunction"===n?t.blendFunction=MAe(r):t[n]=r}}this.postprocessingState=e,r&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,n,r){e instanceof LG?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,n,r),this.effectComposer.outputBuffer.scissor.set(e,t,n,r));let i=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(i),this.effectComposer.outputBuffer.scissor.multiplyScalar(i),this.renderer.setScissor(e,t,n,r)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,n,r){e instanceof LG?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,n,r),this.effectComposer.outputBuffer.viewport.set(e,t,n,r))}resize(e,t,n){if(this.effectComposer.setSize(e,t,n),this._rt){let n=this.renderer.getPixelRatio();this._rt.setSize(e*n,t*n)}}dispose(){var e,t;null==(e=this.uvEffectPass)||e.dispose(),null==(t=this.effectPass)||t.dispose(),this.effectComposer.dispose()}},TAe=eY.lights_fragment_begin,DAe=eY.shadowmask_pars_fragment,FAe=null,IAe=new RK({vertexShader:"\nattribute vec3 randomColor;\nvarying vec3 vNormal;\nflat out vec3 vColor;\n#include <skinning_pars_vertex>\n\nvoid main()\n{\n#include <beginnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\nvec3 transformed = vec3(position);\n#include <skinning_vertex>\n\nvNormal = normal;\nvColor = randomColor;\ngl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));\n}\n",fragmentShader:"\nuniform float depthContrast;\nvarying vec3 vNormal;\nflat in vec3 vColor;\nvoid main()\n{\nvec3 normal = (normalize(vNormal)).rgb;\n\nfloat contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;\n\nvec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);\ngl_FragColor = vec4(resultColor, vColor.r);\ngl_FragColor = vec4(resultColor, vColor.r);\n}\n",uniforms:{depthContrast:{value:1}}}),kAe=new OG,OAe=new hG,LAe=class extends D${constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new hG,this.dummyCamera=new xhe,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(e=!0,t=!0,n=!0)=>{let r=this.getContext(),i=0;e&&(i|=r.COLOR_BUFFER_BIT),t&&(i|=r.DEPTH_BUFFER_BIT),n&&(i|=r.STENCIL_BUFFER_BIT),r.clear(i),r.clearBufferfv(r.COLOR,1,[0,0,0,1])},this.pipeline=new PAe(this,(null==e?void 0:e.needsDOFResize)??!1),this.autoClear=!1;let t=this.setPixelRatio.bind(this),n=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=MQ,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let r=this.getContext();if(r&&"drawingBufferColorSpace"in r)try{r.drawingBufferColorSpace="display-p3"}catch(R9){}this.setPixelRatio=e=>{this._pixelRatio!==e&&(this._pixelRatio=e,t(e))},this.setSize=(e,t,r=!0)=>{var i,o;(this.viewportWidth!==e||this.viewportHeight!==t)&&(this.viewportWidth=e,this.viewportHeight=t,n(e,t,r),null==(i=this.normalRenderTarget)||i.setSize(e*this._pixelRatio,t*this._pixelRatio),this._resizeTransmission(e,t),null==(o=this.transmissionDepthTarget)||o.setSize(e*this._pixelRatio/2,t*this._pixelRatio/2),this.pipeline.resize(e,t,r))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){void 0===this.aoRenderTarget&&(this.aoRenderTarget=new RG(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:TV,magFilter:TV,wrapS:BV,wrapT:BV,depthBuffer:!1}))}_resizeTransmission(e,t){var n,r;null==(n=this.transmissionRenderTarget)||n.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),null==(r=this.aoRenderTarget)||r.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return 1===yce.transmissionLod.value}set hdTransmission(e){yce.transmissionLod.value=!0===e?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){void 0===this.transmissionRenderTarget&&(this.transmissionRenderTarget=new RG(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:FV,magFilter:TV,wrapS:BV,wrapT:BV,depthBuffer:!1}),this.transmissionDepthTarget=new RG(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:EV,magFilter:EV,depthBuffer:!1}))}createNormalRenderTarget(){void 0===this.normalRenderTarget&&(this.normalRenderTarget=new RG(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:EV,magFilter:EV,type:zV,depthTexture:new E$(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,n){this.normalRenderTarget&&(this.setClearColor(0),n.layers.enable(8),n.layers.disable(0),n.layers.disable(3),t.traverseEntity((e=>{e.layers.isEnabled(8)&&(e.copyPreviousMatrix=!1)})),this.setRenderTarget(this.normalRenderTarget),this.clear(),IAe.uniforms.depthContrast.value=n instanceof xhe?(n.far-n.near)/1e4:1,t.overrideMaterial=IAe,this.render(t,n),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?Vme:null,n.layers.enable(0),n.layers.enable(3),t.traverseEntity((e=>{e.layers.isEnabled(8)&&(e.copyPreviousMatrix=!0)})))}renderSplineSceneWithDummyCamera(e,t,n=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let r=t.height,i=t.width,o=this.viewportWidth/this.viewportHeight;i<r?i=r*o:r=i/o,this.dummyCamera.setViewplaneSize(i,r);for(let a=0;a<n;a++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:n=this.sceneHelpers,sceneHelpersOnTop:r=this.sceneHelpersOnTop,overrideTransmission:i,overrideNormal:o}={}){var a;let s=e instanceof Gme?e.activePage:e,l=s.visible;s.visible=!0;let c=s.scene;this.xr.enabled&&(!1===this.isXRCopyPassSet&&null!==this.getRenderTarget()&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(s.bgColor,s.bgColor.a),s.penumbraSizeArray.forEach(((e,t)=>{yce.penumbraSize.value[t]=e})),yce.pixelRatioNode.value=this.getPixelRatio(),0!==this.resolution.x&&0!==this.resolution.y?yce.resolution.value.set(this.resolution.x,this.resolution.y):yce.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),void 0!==o?(yce.normalRenderTarget.value=o,yce.normalRenderTargetDepth.value=kAe):c.needsNormal()&&(this.createNormalRenderTarget(),yce.normalRenderTarget.value=this.normalRenderTarget.texture,yce.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(c,s,t));let u=s.data.ao,d=u.occlusion;if(d&&(this.createAORenderTarget(),yce.aoRenderTarget.value=this.aoRenderTarget.texture),yce.aoEnabled.value=d,this.pipeline.setAmbientOcclusionParams(u.occlusion,u.radius,u.bias,s.aoColor,null!==s.fog,s.backupFog.near,s.backupFog.far,u.aoFullRes&&!L6),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&(null==(a=s.uiCanvas)?void 0:a.enabled)&&s.uiCanvas.texture&&s.uiCanvas.texture.image.width>0){let e=this.getSize(OAe),t=this.getPixelRatio();(s.uiCanvas.width!==this.viewportWidth||s.uiCanvas.height!==this.viewportHeight||s.uiCanvas.dpr!==t)&&s.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},t),s.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=s.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(e.x,e.y,t),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();let h=!1;if(void 0!==i)yce.transmissionRenderTarget.value=i,yce.transmissionRenderTargetDepth.value=kAe,this.pipeline.setTransmissionPassEnabled(!1);else{let e=c.needsTransmission();e&&(void 0===this.transmissionRenderTarget&&(h=!0),this.createTransmissionRenderTarget(),yce.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,yce.aspectRatio.value=function(e,t){return e>=t?new hG(t/e,1):new hG(1,e/t)}(this.viewportWidth,this.viewportHeight),yce.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(e)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=n,this.pipeline.sceneHelpersOnTop=r,this.pipeline.scene=s,this.pipeline.camera=t,h&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==s.postprocessing&&(this.pipeline.updatePostprocessing(s.postprocessing),!n&&!r&&this.pipeline.disableHelpers()),void 0!==this.clearAlphaOverride&&this.setClearAlpha(this.clearAlphaOverride),s.overrideMaterial=c.wireframeState?Vme:null,this.pipeline.render(),yce.frameIndex.value=(yce.frameIndex.value+1)%16,t instanceof xhe&&t.copyHistory(),s.visible=l}renderFromSceneForSceneTransitionPass(e,t,n){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=n,this.sceneTransitionTimeRemaining=n,this.pipeline.renderToScreen=!0;let r=this.pipeline.sceneTransitionPass.uniforms;r.uDPR.value=window.devicePixelRatio,r.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,n,r,i,o;this._superDispose(),this.pipeline.dispose(),null==(e=this.aoRenderTarget)||e.dispose(),null==(t=this.transmissionRenderTarget)||t.dispose(),null==(n=this.transmissionDepthTarget)||n.dispose(),null==(r=this.normalRenderTarget)||r.dispose(),null==(o=null==(i=this.normalRenderTarget)?void 0:i.depthTexture)||o.dispose()}},RAe=class extends(ihe(O0)){constructor(e,t=15,n=10066329){super(e,t,n),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){lhe(this.object,RAe.geometryHelper,e,t)}},UAe=class extends(ihe(D0)){constructor(e,t=15,n=6710886){super(e,t,n),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){lhe(this.object,UAe.geometryHelper,e,t)}},zAe=class extends(ihe(T0)){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){lhe(this.object,zAe.geometryHelper,e,t)}update(){if(void 0!==this.object){let e=zAe._vector,t=this.object.distance?this.object.distance:1e3,n=t*Math.tan(this.object.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(let i=0,o=this.cone.material.length;i<o;i++)this.cone.material[i].color.set(r);else this.cone.material.color.set(r)}}},NAe=zAe;NAe._vector=new jG;var jAe=class extends S${constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new TK(new ZK(1,1),new nK({transparent:!0,opacity:0,side:IQ})),this.add(this.caretMesh),this.selectionMesh=new TK(new ZK(1,1),new nK({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:IQ})),this.add(this.selectionMesh),this.hide()}get caretHeight(){var e;return(null==(e=this.object)?void 0:e.AD)??0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=.5*-this.caretHeight,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(void 0===this.object)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(void 0===this.object)return;let e=this.object,t=e.parent;null!==t&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),null!==t?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let n of this.children)n.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let n=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,n&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e,t={}){if(void 0===this.object)return;this.caretIndex=e;let n=this.object.wrappedText,[r,i]=QAe(n,e),[o,a]=e>0?QAe(n,e-1):[null,null];"\n"===(e>0&&n.length?n[o].charAt(a):null)&&(r++,i=0),this.current.start=e,this.current.end=void 0;let[s,l]=HAe(this.object,r,i),{AD:c,descender:u}=this.object,d=u+.5*c,{width:h,height:p,depth:A}=this.object.geometry.userData.parameters,f="string"==typeof h?0:h,m="string"==typeof p?0:p;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(s-.5*f,l+d+.5*m,A),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(void 0===this.object)return;let n=this.object.wrappedText;this.current.start=e,this.current.end=t;let r=[],i=[],o=function(e,t,n){let[r,i]=QAe(e,t),[o,a]=QAe(e,n),s=[];i>=e[r].length&&(r++,i=0);for(let l=r;l<=o;l++){let t=e[l],n=l===r?i:0,c=l===o?a:t.length;s.push([l,n,c])}return s}(n,e,t),{lineHeight:a,AD:s,descender:l}=this.object,c=l+.5*s-.5*a;for(let[m,g,v]of o)if(g!==v){let[e,t]=HAe(this.object,m,g),[n,o]=HAe(this.object,m,v);t+=c,o+=c,o+=a;let s=r.length/3;r.push(e,t,0),r.push(n,t,0),r.push(n,o,0),r.push(e,o,0),i.push(s+0,s+1,s+2),i.push(s+2,s+3,s+0)}let u=new mK;u.setIndex(i),u.setAttribute("position",new lK(r,3));let{width:d,height:h,depth:p}=this.object.geometry.userData.parameters,A="string"==typeof d?0:d,f="string"==typeof h?0:h;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=u,this.selectionMesh.position.x=.5*-A,this.selectionMesh.position.y=.5*f,this.selectionMesh.position.z=p,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t,n="previous"){if(void 0===this.object||void 0===this.object.font)return;let r=this.object.wrappedText,i=r.length,o=this.object.lineHeight,a=i*o,{height:s,verticalAlign:l}=this.object.geometry.userData.parameters,c="string"==typeof s?0:s,u=0;3===l?u=c-a:2===l&&(u=.5*c-.5*a);let d=Math.min(Math.floor(Math.max(Math.min(-t-u,a),0)/o),i-1),h=this.object.charCoords[d],p=this.object.charWidths[d],A=0,f=!1;if("previous"===n){for(let m=0;m<h.length;m++)if(h[m][0]+.5*p[m]-e>0){A=m,f=!0;break}}else if("closest"===n){let t=1/0;for(let n=0;n<h.length;n++){let r=h[n][0]+.5*p[n],i=Math.abs(r-e);i<t&&(t=i,A=n,f=!0)}}else for(let m=0;m<h.length;m++){let t=h[m][0],n=h[m][0]+p[m];if(e>=t&&e<n){A=m,f=!0;break}}return f||(A=h.length),{index:this.getGlobalIndexFromLineAndCharIndexes(r,d,A),lineIndex:d,characterIndex:A}}getGlobalIndexFromLineAndCharIndexes(e,t,n){return e.slice(0,t).reduce(((e,t)=>e+t.length),0)+n}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function HAe(e,t,n){let{charCoords:r,charWidths:i,initialOffsetY:o,lineHeight:a}=e;if(r[t]&&0===r[t].length||0===r.length){let n=0,{horizontalAlign:r}=e.data.geometry,i=e.wrappedText,{width:s}=e.geometry.userData.parameters;return 1===i.length&&0===i[0].length&&(3===r?n=.5*s:2===r&&(n=s)),[n,o-a*t]}let s=r[t];if(void 0===s||0===s.length)return[0,0];let[l,c]=s[Math.min(n,s.length-1)];return n>=s.length&&(l+=i[t][n-1]),[l,c]}function QAe(e,t){var n;let r=0;for(let i=0;i<e.length;i++){let n=e[i],o=t-r;if(o<=n.length)return[i,o];r+=n.length}return[Math.max(0,e.length-1),(null==(n=e[e.length-1])?void 0:n.length)??0]}function VAe(e,t){return"string"==typeof e?t.data.colors[e]:e}function WAe(e){return e.colors[0]}var GAe,qAe=class extends(Mhe(ZZ,RAe)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.top=1250,r.bottom=-1250,r.right=1250,r.left=-1250,r.near=-1e4,r.far=2500;let i=new U0(this.shadow.camera);i.visible=!1,this.gizmos.shadowmap=i}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof U0&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let n=void 0!==e.depth&&e.depth!==this.shadow.camera.far||void 0!==e.size&&e.size/2!==this.shadow.camera.right;void 0!==e.size&&function(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}(this,e.size),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),n&&this.update()}},KAe=new jG,YAe=new jG,XAe=new NG,$Ae=class extends(Mhe(GZ,NAe)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=2*dG.RAD2DEG*this.angle,r.aspect=1,r.near=100,r.far=2500;let i=new U0(this.shadow.camera);i.visible=!1,this.gizmos.shadowmap=i,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof U0&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),YAe.setFromMatrixPosition(this.matrixWorld),XAe.setFromRotationMatrix(this.matrixWorld),KAe.copy(this.up).applyQuaternion(XAe).negate().multiplyScalar(this.distance),this.target.position.copy(YAe).add(KAe),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.angle&&(this.angle=e.angle),void 0!==e.penumbra&&(this.penumbra=e.penumbra),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function JAe(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function ZAe(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}function efe(e){let[t,n,r]=function(e){let t=(e[0][0]+e[1][1])/2,n=(e[0][0]-e[1][1])/2,r=(e[1][0]+e[0][1])/2,i=(e[1][0]-e[0][1])/2,o=Math.sqrt(t*t+i*i),a=Math.sqrt(n*n+r*r),s=o+a,l=o-a,c=Math.atan2(r,n),u=Math.atan2(i,t),d=(u-c)/2,h=(u+c)/2,p=[[Math.cos(h),Math.sin(h)],[-Math.sin(h),Math.cos(h)]],A=[[s,0],[0,l]],f=[[Math.cos(d),Math.sin(d)],[-Math.sin(d),Math.cos(d)]];return p[0][0]*=-1,p[0][1]*=-1,f[0][0]*=-1,f[1][0]*=-1,[p,A,f]}(e),i=JAe(t,ZAe(r)),o=JAe(JAe(r,n),ZAe(r));return{rotation:Math.atan2(i[1][0],i[0][0]),scale:[o[0][0],o[1][1]],shear:[o[0][1]/o[1][1],o[1][0]/o[0][0]]}}(e=>{function t(e){return[e[0],e[3],e[1],e[4],e[2],e[5]]}e.identity=function(){return[1,0,0,0,1,0,0,0,1]},e.copy=function(t,n=e.identity()){for(let e=0,r=t.length;e<r;e++)n[e]=t[e];return n},e.create=function(t,n,r,i,o,a){return e.setAbcdef(e.identity(),t,n,r,i,o,a)},e.setAbcdef=function(e,t,n,r,i,o,a){return e[0]=t,e[1]=r,e[2]=o,e[3]=n,e[4]=i,e[5]=a,e},e.append=function(n,r){let[i,o,a,s,l,c]=t(n),[u,d,h,p,A,f]=t(r),m=u*i+d*a,g=u*o+d*s,v=h*i+p*a,y=h*o+p*s,b=A*i+f*a+l,w=A*o+f*s+c;return e.create(m,g,v,y,b,w)},e.prepend=function(n,r){let[i,o,a,s,l,c]=t(n),[u,d,h,p,A,f]=t(r),m=i,g=o,v=a,y=s;(1!==u||0!==d||0!==h||1!==p)&&(m=i*u+o*h,g=i*d+o*p,v=a*u+s*h,y=a*d+s*p);let b=l*u+c*h+A,w=l*d+c*p+f;return e.create(m,g,v,y,b,w)},e.getAbcdef=t,e.invert=function(t){let[n,r,i,o,a,s]=e.getAbcdef(t),l=n*o-r*i,c=o/l,u=-r/l,d=-i/l,h=n/l,p=(i*s-o*a)/l,A=-(n*s-r*a)/l;return e.create(c,u,d,h,p,A)},e.apply=function([t,n],r){let[i,o,a,s,l,c]=e.getAbcdef(r);return[i*t+a*n+l,o*t+s*n+c]},e.applyInverse=function(t,n){let[r,i,o,a,s,l]=e.getAbcdef(n),c=1/(r*a+o*-i),[u,d]=t;return[a*c*u+-o*c*d+(l*o-s*a)*c,r*c*d+-i*c*u+(-l*r+s*i)*c]},e.scale=function(t,n,r=n){let[i,o,a,s,l,c]=e.getAbcdef(t);return e.setAbcdef(t,i*n,o*r,a*n,s*r,l*n,c*r),t},e.rotate=function(t,n){let r=Math.cos(n),i=Math.sin(n),[o,a,s,l,c,u]=e.getAbcdef(t);return e.setAbcdef(t,o*r-a*i,o*i+a*r,s*r-l*i,s*i+l*r,c*r-u*i,c*i+u*r),t},e.rotateAround=function(t,n,r){let[i,o]=r,a=e.translate(t,-i,-o);return a=e.rotate(a,n),a=e.translate(a,i,o),a},e.translate=function(t,n,r){let[i,o,a,s,l,c]=e.getAbcdef(t);return e.setAbcdef(t,i,o,a,s,l+n,c+r),t},e.setTranslate=function(t,n,r){let[i,o,a,s]=e.getAbcdef(t);return e.setAbcdef(t,i,o,a,s,n,r),t},e.setPosition=function(t,n,r){let[i,o,a,s]=e.getAbcdef(t);return e.setAbcdef(t,i,o,a,s,n,r),t},e.getScale=function(t){let[n,r,i,o]=e.getAbcdef(t);return[Math.sqrt(n*n+r*r),Math.sqrt(i*i+o*o)]},e.getPosition=function(t){let[,,,,n,r]=e.getAbcdef(t);return[n,r]},e.getRotation=function(t,n){return e.decompose(t,n).rotation},e.decompose=function(t,n){let[r,i,o,a,s,l]=e.getAbcdef(t),{rotation:c,scale:u,shear:d}=efe([[r,o],[i,a]]);return{position:[s+(n[0]*r+n[1]*o)-n[0],l+(n[0]*i+n[1]*a)-n[1]],scale:u,rotation:c,shear:d,pivot:n}},e.compose=function(t,n,r,i,o=[0,0]){let[a,s]=t,[l,c]=i,[u,d,h,p]=function({rotation:e,scale:t,shear:n}){let r=Math.cos(e),i=Math.sin(e),o=JAe([[r,-i],[i,r]],[[t[0],n[0]*t[1]],[n[1]*t[0],t[1]]]);return[o[0][0],o[1][0],o[0][1],o[1][1]]}({rotation:r,scale:n,shear:o}),A=a-(l*u+c*h)+l,f=s-(l*d+c*p)+c;return e.create(u,d,h,p,A,f)}})(GAe||(GAe={}));var tfe=Math.PI/180;var nfe=class{constructor(e,t,n){this.uuid=e,this.data=t,this.localMatrix=GAe.identity(),this.worldMatrix=GAe.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new hfe,this._recursiveBBox=new hfe,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=$ue(),this.dpr=n.dpr??1,this.dataPatched=t}project(e,t){let n=this.worldMatrix;return t&&(n=GAe.append(t.worldMatrix,n)),GAe.applyInverse(e,n)}intersects(e,t,n,r=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],n),r)}intersectsInLocalSpace(e,t,n=!1){let{min:r,max:i}=n?this.recursiveBBox:this.singleBBox;return e>=r[0]&&e<=i[0]&&t>=r[1]&&t<=i[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=GAe.compose(this.position,this.scale,function(e){return e*tfe}(this.rotation),pne.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,n){let r=this.parent;t&&null!=r&&r.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=GAe.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=GAe.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return pne.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors((e=>{e.resetBBoxNeedsUpdateSelf()}))}updateTransformState(e){let t=!1;void 0!==e.position&&(t=!0,this.position=e.position),void 0!==e.rotation&&(t=!0,this.rotation=e.rotation),void 0!==e.scale&&(t=!0,this.scale=e.scale),void 0!==e.shear&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,n){0===e.type&&void 0!==e.props.visible&&(this.visible=e.props.visible),this.data=t,this.data=t;let r=e,i=J8(e.path,["states","*"]);if(null!==i){if(0===e.type){let[t]=i;if((null==this?void 0:this.stateSelection)===t){let t={...e.props};if(delete t.name,Object.values(e.props).some((e=>void 0===e))){let n=this.data;if(void 0!==n){let r=G8.zoom(n,e.path.slice(2));if(r)for(let n in e.props)void 0===e.props[n]&&n in r&&(t[n]=r[n])}}r={...e,props:t,path:e.path.slice(2)}}}}else if(0===e.type){let t=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(void 0!==t){if(void 0!==e.props.name&&t.name){let{name:e,...n}=t;t=n}let n=G8.removeOverridden(e.path,e.props,t);r={...e,props:n}}}this.updateByPatchedOpBase(r,nne.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),n)}changeSelectedState(e,t,n=!1){if(0!==this.data.states.length||n){for(let e of this.data.states)nne.toOps(this.data,e.data).forEach((e=>{let n=x8.replaceProps(e,this.data);this.dataPatched=this.data,this.updateByPatchedOp(n,this.data,t)}));if(null!==e){let n=this.data.states.data(e);n&&(this.dataPatched=nne.patch(this.data,n),nne.toOps(this.data,n).forEach((e=>{this.updateByPatchedOp(e,this.dataPatched,t)})))}n&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){void 0!==e.name&&(this.name=e.name),void 0!==e.visible&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,n){this.dataPatched=t,this.updateByPatchedOp(e,t,n)}updateByPatchedOp(e,t,n){0===e.path.length&&0===e.type&&this.updateState(e.props,n),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors((t=>{"frame2d"===t.data.type&&e(t)}))}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors((e=>{e.requestRender()}))}clone(e){let t=new nfe(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let n=t.indexOf(this)+1;return t[n]?t[n]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof nfe&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},rfe=class extends nfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.context=n,this.children=[]}add(e){e.parent&&e.parent instanceof rfe&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(!0!==t)for(let n of this.children)n instanceof rfe?n.traverse(e):t=e(n)}intersectsChildrenHelper(e,t,n,r,i){for(let o of this.children)if(o.intersects(e,t,n,!1)&&(i.push(o),r)||o instanceof rfe&&o.intersectsChildrenHelper(e,t,n,r,i))return!0;return!1}intersectsChildren(e,t,n,r=!1,i=[],o=!1){return this.intersectsChildrenHelper(e,t,n,r,i),i}intersectsChildrenHelperReverse(e,t,n,r,i){for(let o of this.children)if(o instanceof rfe&&o.intersectsChildrenHelperReverse(e,t,n,r,i)||o.intersects(e,t,n,!1)&&(i.push(o),r))return!0;return!1}intersectsChildrenReverse(e,t,n,r=!1,i=[],o=!1){return this.intersectsChildrenHelperReverse(e,t,n,r,i),i}updateWorldMatrix(e,t,n){if(super.updateWorldMatrix(e,t,n),n&&this.children)for(let r of this.children)r.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse((n=>{n.uuid===e&&(t=n)})),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse((e=>{e.resetBBoxNeedsUpdateSelf()}))}clone(e){let t=new rfe(this.uuid,this.data,e);t.parent=void 0;for(let n of this.children)t.add(n.clone(e));return t}},ife=class extends rfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.updateState(t,n)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new ife(this.uuid,this.data,e);t.parent=void 0;for(let n of this.children)t.add(n.clone(e));return t}};function ofe(e,t){let[[n,r],[i,o]]=e,[[a,s],[l,c]]=t,u=(n-i)*(s-c)-(r-o)*(a-l);if(0===u)return!1;let d=((n-a)*(s-c)-(r-s)*(a-l))/u,h=-((n-i)*(r-s)-(r-o)*(n-a))/u;return d>=0&&d<=1&&h>=0&&h<=1}var afe,sfe,lfe,cfe,ufe=[[-1,1],[-1,-1],[1,-1],[1,1]],dfe=(e,t,n)=>{let r=e.getCenter(),i=e.getHalfSize(),o=GAe.append(t,e.worldMatrix);0===i[0]&&0===i[1]?n.push(GAe.apply(r,o)):ufe.forEach((e=>{let t=[e[0]*i[0]+r[0],e[1]*i[1]+r[1]];n.push(GAe.apply(t,o))}))},hfe=class{constructor(){this.matrix=GAe.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,t=!1){e.updateWorldMatrix(),this.makeEmpty(),GAe.copy(e.worldMatrix,this.matrix);let n=GAe.invert(e.worldMatrix);this.expandByObjectSize(e,n,t)}expandByObjectSize(e,t,n=!1){let r=[];!0===n&&e instanceof rfe?e.traverse((e=>{e.visible&&dfe(e,t,r)})):dfe(e,t,r),this.setFromPoints(r)}setFromSize(e,t,n){this.makeEmpty(),GAe.copy(n,this.matrix),this.expandBySize(e,t,n)}expandBySize(e,t,n){[GAe.apply([0,0],n),GAe.apply([0,t],n),GAe.apply([e,t],n),GAe.apply([e,0],n)].forEach((e=>this.expandByPoint(e)))}getCenter(){let[e,t]=this.min,[n,r]=this.getHalfSize();return GAe.apply([e+n,t+r],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[.5*(this.max[0]-this.min[0]),.5*(this.max[1]-this.min[1])]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),n=this.getCenter(),[r,i,o,a]=GAe.getAbcdef(this.matrix),s=GAe.create(r,i,o,a,n[0],n[1]);this.vertices=ufe.map((([n,r])=>GAe.apply([n*e,r*t],s)))}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let n=this.matrix;return t&&(n=GAe.append(t.worldMatrix,n)),GAe.applyInverse(e,n)}intersects(e,t,n){return this.intersectsInLocalSpace(...this.project([e,t],n))}intersectsInLocalSpace(e,t){let{min:n,max:r}=this;return e>=n[0]&&e<=r[0]&&t>=n[1]&&t<=r[1]}containsPoint(e){let[t,n]=e,[r,i]=this.min,[o,a]=this.max;return t>=r&&t<=o&&n>=i&&n<=a}intersectsBBox2D(e){for(let t=0,n=this.edges.length;t<n;t++){let n=this.edges[t];for(let t=0,r=e.edges.length;t<r;t++){if(ofe(n,e.edges[t]))return!0}}for(let t=0,n=e.vertices.length;t<n;t++){let n=e.vertices[t];if(this.containsPoint(n))return!0}return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],GAe.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new hfe;return e.copy(this),e}},pfe=new Promise((e=>{afe=e})),Afe=!1;function ffe(){if(!Afe)return sfe||(sfe=async function(){let e=await nF((()=>import("./ui-BmGrGjp3.js")),[]);afe(e.default??e),Afe=!0}(),sfe)}function mfe(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{("Mesh"===n.type&&"UIGeometry"===n.geometry.type||"Page"===n.type&&void 0!==n.uiFrame)&&(t=!0)})),t}var gfe=GAe.identity(),vfe=class{constructor(e,t=1){this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=$9.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=$9.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let n=e.getBoundingClientRect();e.width=n.width*t,e.height=n.height*t}catch{}this._currentM3Transform=gfe,this._currentTransform=new Float32Array(gfe)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}async init(){var e,t;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await async function(e){let t=await pfe;lfe||(cfe||(cfe=t({locateFile:()=>e})),lfe=await cfe)}(this.wasmURL),this._surface=lfe.MakeWebGLCanvasSurface(this.canvas),this.ctx=null==(e=this._surface)?void 0:e.getCanvas(),this._paint=new lfe.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(lfe.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(lfe.PaintStyle.Stroke),null==(t=this.ctx)||t.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,t){let n=await(await fetch(e)).arrayBuffer();this.registerFont(n,t)}registerFont(e,t){if(this._fonts.has(t))return;let n=lfe.FontMgr.FromData(e);if(!n)throw new Error("Invalid font data for "+t);this._fonts.set(t,n)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(bfe(e),lfe.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(bfe(e),lfe.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth("center"===this._strokeMode?e:2*e)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;null==(e=this.ctx)||e.clear(lfe.TRANSPARENT)}save(){var e;null==(e=this.ctx)||e.save()}restore(){var e;null==(e=this.ctx)||e.restore()}beginPath(){var e;null==(e=this._currentPath)||e.delete(),this._currentPath=new lfe.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,n,r,i=0,o=0,a=0,s=0){var l,c;let u=lfe.XYWHRect(e,t,n,r);if(0===i&&0===o&&0===s&&0===a)null==(l=this.ctx)||l.clipRect(u,lfe.ClipOp.Intersect,!0);else{let e=lfe.RRectXY(u,i,i);e[4]=e[5]=i,e[6]=e[7]=o,e[8]=e[9]=a,e[10]=e[11]=s,null==(c=this.ctx)||c.clipRRect(e,lfe.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=GAe.invert(this.currentTransform);this.ctx.concat(e);let t=GAe.translate(GAe.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t,n=!0){var r,i,o,a;if(this.ctx&&this._currentPath){let s,l=!1;if(n&&this._hasDropShadow()){let n,i=e.copy();i.setColor(bfe(this._dropShadowColor)),this._dropShadowBlur>0&&(n=lfe.MaskFilter.MakeBlur(lfe.BlurStyle.Normal,this._dropShadowBlur*this.dpr*((null==(r=this.camera)?void 0:r.scale)??1),!1),i.setMaskFilter(n)),this.ctx.save(),this.ctx.clipPath(this._currentPath,lfe.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(i),this.ctx.restore(),i.delete(),null==n||n.delete()}if(this._backgroundBlur>0&&n){this.ctx.save(),this.ctx.clipPath(this._currentPath,lfe.ClipOp.Intersect,!0);let t=lfe.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,lfe.TileMode.Clamp,null),n=e.copy();n.setImageFilter(t),n.setAlphaf(1);let r=this._currentPath.computeTightBounds();this.ctx.saveLayer(n,r,null,lfe.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),n.delete(),t.delete(),l=!0}if(this._layerBlur>0){let n=e.copy();s=lfe.MaskFilter.MakeBlur(lfe.BlurStyle.Normal,this._layerBlur*this.dpr*((null==(i=this.camera)?void 0:i.scale)??1),!1),n.setMaskFilter(s),t(n),n.delete(),s.delete(),l=!0}if(l||t(e),n&&this._hasInnerShadow()){let e,t=new lfe.Paint;t.setAntiAlias(!0),t.setStyle(lfe.PaintStyle.Fill),t.setColor(bfe(this._innerShadowColor)),this._innerShadowBlur>0&&(e=lfe.MaskFilter.MakeBlur(lfe.BlurStyle.Normal,this._innerShadowBlur*this.dpr*((null==(o=this.camera)?void 0:o.scale)??1),!1),t.setMaskFilter(e));let n=this._currentPath.computeTightBounds(),[r,i,s,l]=n,c=s-r,u=l-i;this.ctx.save(),this.ctx.clipPath(this._currentPath,lfe.ClipOp.Intersect,!0),this.ctx.saveLayer(t,n,null,lfe.SaveLayerInitWithPrevious),null==(a=this.ctx)||a.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(lfe.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+c+Math.abs(2*this._innerShadowOffsetX),2e3+u+Math.abs(2*this._innerShadowOffsetY)),t),t.setBlendMode(lfe.BlendMode.Clear),this.ctx.drawPath(this._currentPath,t),this.ctx.restore(),this.ctx.restore(),t.delete(),null==e||e.delete()}}}_paintInner(e,t=!0){if(this.ctx&&this._currentPath&&e){let n=this.ctx,r=this._currentPath;this._applyEffectsToPaint(e,(e=>{let i=!1;!t&&"center"!==this._strokeMode&&(n.save(),n.clipPath(r,"outside"===this._strokeMode?lfe.ClipOp.Difference:lfe.ClipOp.Intersect,!0),i=!0),n.drawPath(r,e),i&&n.restore()}),t)}}_hasDropShadow(){var e;return(null==(e=this._dropShadowColor)?void 0:e.a)>0}_hasInnerShadow(){var e;return(null==(e=this._innerShadowColor)?void 0:e.a)>0}path(e){var t;null==(t=this._currentPath)||t.addPath(lfe.Path.MakeFromSVGString(e))}ellipse(e,t,n,r,i,o,a,s){var l;if(!yfe([e,t,n,r])||!this._currentPath)return;if(n<0||r<0)throw Error("radii cannot be negative");let c=lfe.XYWHRect(e-n,t-r,2*n,2*r);null==(l=this._currentPath)||l.addOval(c)}rect(e,t,n,r,i=0,o=0,a=0,s=0){var l,c;let u=lfe.XYWHRect(e,t,n,r);if(yfe(u))if(0===i&&0===o&&0===s&&0===a)null==(l=this._currentPath)||l.addRect(u);else{let e=lfe.RRectXY(u,i,i);e[4]=e[5]=i,e[6]=e[7]=o,e[8]=e[9]=a,e[10]=e[11]=s,null==(c=this._currentPath)||c.addRRect(e)}}getHorizontalAlign(e){switch(e){case 2:return lfe.TextAlign.Right;case 3:return lfe.TextAlign.Center;case 4:return lfe.TextAlign.Justify;default:return lfe.TextAlign.Left}}drawTextInner(e,t,n,[r,i,o,a],s,l,c=!0){let u=0,{ctx:d}=this;if(!d)return u;let h=l.copy(),p=l.copy();return p.setAlphaf(0),this._applyEffectsToPaint(h,(l=>{t.pushPaintStyle(n,l,p),t.addText(e);let c=t.build();c.layout(o);let h=i;2===s?h+=(a-c.getHeight())/2:3===s&&(h+=a-c.getHeight()),d.drawParagraph(c,r,h),u=c.getHeight(),t.reset(),c.delete()}),c),h.delete(),p.delete(),u}drawText(e,t){let n=0,r=this._fonts.get(t.font),{ctx:i,_paintFill:o,_paintStroke:a}=this;if(r&&i){let i=new lfe.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),s=new lfe.ParagraphStyle({textStyle:i,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),l=lfe.XYWHRect(t.x,t.y,t.width,t.height),c=lfe.ParagraphBuilder.Make(s,r);o&&(n=this.drawTextInner(e,c,i,l,t.verticalAlign,o,!0)),a&&(n=this.drawTextInner(e,c,i,l,t.verticalAlign,a,!1)),c.delete()}return{height:n}}render(){var e;null==(e=this._surface)||e.flush()}moveTo(e,t){var n;null==(n=this._currentPath)||n.moveTo(e,t)}lineTo(e,t){var n;null==(n=this._currentPath)||n.lineTo(e,t)}bezierCurveTo(e,t,n,r,i,o){var a;null==(a=this._currentPath)||a.cubicTo(e,t,n,r,i,o)}quadraticCurveTo(e,t,n,r){var i;null==(i=this._currentPath)||i.quadTo(e,t,n,r)}setTransform(e,t=!1){var n,r,i,o,a;if(!this.ctx)return;let s=this.ctx.getTotalMatrix(),l=GAe.invert(s);if(l&&this.ctx.concat(l),null==(n=this.ctx)||n.scale(this.dpr,this.dpr),(null==(r=this.camera)?void 0:r.enabled)&&(null==(i=this.ctx)||i.concat(this.camera.worldMatrix),t)){let e=GAe.getScale(this.camera.worldMatrix);null==(o=this.ctx)||o.scale(1/e[0],1/e[1])}null==(a=this.ctx)||a.concat(e),this.currentTransform=e}transform(e){var t;null==(t=this.ctx)||t.concat(e)}setSize(e,t){var n;!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=lfe.MakeWebGLCanvasSurface(this.canvas),this.ctx=null==(n=this._surface)?void 0:n.getCanvas()))}};function yfe(e){for(let t=0;t<e.length;t++)if(void 0!==e[t]&&!Number.isFinite(e[t]))return!1;return!0}function bfe({r:e,g:t,b:n,a:r}){return lfe.Color4f(e,t,n,r)}var wfe,xfe,Cfe,Sfe=class{constructor(e,t,n){this.uuid=e,this.data=t,this.enabled=!1,this.color=$9.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){void 0!==e.color&&(this.color=e.color),void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.blurRadius&&(this.blurRadius=e.blurRadius),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.spread&&(this.spread=e.spread)}},Bfe=class{constructor(e,t,n){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.radius&&(this.radius=e.radius)}},_fe=class{constructor(e,t,n){this.uuid=e,this.data=t,this.enabled=!1,this.color=$9.transparent,this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.color&&(this.color=e.color)}},Efe=class{constructor(e,t,n){this.uuid=e,this.data=t,this.enabled=!1,this.color=$9.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.color&&(this.color=e.color),void 0!==e.thickness&&(this.thickness=e.thickness),void 0!==e.mode&&(this.mode=e.mode)}},Mfe=class extends nfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.autoClose=!0,this.fill=new _fe(e+"-fill",t.fill,n),this.stroke=new Efe(e+"-stroke",t.stroke,n),this.dropShadow=new Sfe(e+"-dropShadow",t.dropShadow,n),this.innerShadow=new Sfe(e+"-innerShadow",t.innerShadow,n),this.backgroundBlur=new Bfe(e+"-backgroundBlur",t.backgroundBlur,n),this.layerBlur=new Bfe(e+"-layerBlur",t.layerBlur,n)}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:$9.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:$9.transparent,e.strokeMode=this.stroke.mode,e.lineWidth=this.stroke.thickness}applyFilters(e){this.layerBlur.enabled?e.layerBlur=5*this.layerBlur.radius:e.layerBlur=0,this.backgroundBlur.enabled?e.backgroundBlur=5*this.backgroundBlur.radius:e.backgroundBlur=0,this.dropShadow.enabled?(e.dropShadowBlur=5*this.dropShadow.blurRadius,e.dropShadowColor=this.dropShadow.color,e.dropShadowOffsetX=this.dropShadow.offset[0],e.dropShadowOffsetY=this.dropShadow.offset[1]):e.dropShadowColor=$9.transparent,this.innerShadow.enabled?(e.innerShadowSpread=this.innerShadow.spread,e.innerShadowBlur=5*this.innerShadow.blurRadius,e.innerShadowColor=this.innerShadow.color,e.innerShadowOffsetX=this.innerShadow.offset[0],e.innerShadowOffsetY=this.innerShadow.offset[1]):e.innerShadowColor=$9.transparent}innerDraw(e){}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.applyFilters(e),this.applyFillStroke(e),e.beginPath(),this.innerDraw(e),this.autoClose&&e.closePath(),this.fill.enabled&&e.fill(),this.stroke.enabled&&e.stroke(),e.restore())}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),0===e.type&&(J8(e.path,["fill"])?this.fill.update(e.props):J8(e.path,["stroke"])?this.stroke.update(e.props):J8(e.path,["dropShadow"])?this.dropShadow.update(e.props):J8(e.path,["innerShadow"])?this.innerShadow.update(e.props):J8(e.path,["layerBlur"])?this.layerBlur.update(e.props):J8(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}updateState(e,t){super.updateState(e,t),void 0!==e.fill&&this.fill.update(e.fill),void 0!==e.stroke&&this.stroke.update(e.stroke),void 0!==e.dropShadow&&this.dropShadow.update(e.dropShadow),void 0!==e.innerShadow&&this.innerShadow.update(e.innerShadow),void 0!==e.layerBlur&&this.layerBlur.update(e.layerBlur),void 0!==e.backgroundBlur&&this.backgroundBlur.update(e.backgroundBlur)}clone(e){let t=new Mfe(this.uuid,this.data,e);return t.parent=void 0,t}},Pfe=class extends Mfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,n)}innerDraw(e){e.ellipse(.5*this.width,.5*this.height,.5*this.width,.5*this.height,0,0,2*Math.PI)}intersectsInLocalSpace(e,t){return function(e,t,n,r,i,o){let a=e-n,s=t-r;return a*a/(i*i)+s*s/(o*o)<=1}(e,t,.5*this.width,.5*this.height,.5*this.width,.5*this.height)}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new Pfe(this.uuid,this.data,e);return t.parent=void 0,t}},Tfe=class extends Mfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,n)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateCornerState(e){void 0!==e.cornerRadius&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new Tfe(this.uuid,this.data,e);return t.parent=void 0,t}},Dfe=class extends Mfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,n)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:$9.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:$9.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var t;(null==(t=this._fontHolder)?void 0:t.arrayBuffer)&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let n=this.data.textTransform,r=this.data.text.textValue.toString(),i=2===n?r.toUpperCase():3===n?r.toLowerCase():r,{height:o}=e.drawText(i,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=o}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:t}){void 0!==e.font&&(this._fontHolder=t.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then((()=>{this.requestRender()})))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new Dfe(this.uuid,this.data,e);return t.parent=void 0,t}},Ffe=class extends Mfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,n)}computeExtremas(){0===this.curves.length&&this.computeCurves();let e=this.curves.map((e=>wfe.extremas(e))),t=[1/0,1/0],n=[-1/0,-1/0];for(let r=0,i=e.length;r<i;r++){let i=e[r];i[0][0]<t[0]&&(t[0]=i[0][0]),i[0][1]<t[1]&&(t[1]=i[0][1]),i[1][0]>n[0]&&(n[0]=i[1][0]),i[1][1]>n[1]&&(n[1]=i[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[n[0],n[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let n=1,r=this.data.points.length;n<r;n++){let e=this.data.points[n].data,t=this.data.points[n-1].data,r={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(r)}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let n={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(n)}}getCenter(){let[e,t]=this.extremasBBox.min,[n,r]=this.getHalfSize();return[e+n,t+r]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[.5*(t[0]-e[0]),.5*(t[1]-e[1])]}innerDraw(e){for(let r=0,i=this.data.points.length;r<i;r++){let t=this.data.points[r].data;if(0===r){let[n,r]=t.position;e.moveTo(n,r)}else{let n=this.data.points[r-1].data,[i,o]=n.controlNext.position,[a,s]=t.controlPrevious.position,[l,c]=t.position,u={start:n.position,cp1:n.controlNext.position,cp2:t.controlPrevious.position,end:t.position};wfe.derive(u),e.bezierCurveTo(i,o,a,s,l,c)}}let t=this.data.points[0].data,n=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[r,i]=n.controlNext.position,[o,a]=t.controlPrevious.position,[s,l]=t.position;e.bezierCurveTo(r,i,o,a,s,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new Ffe(this.uuid,this.data,e);return t.parent=void 0,t}};(e=>{function t(e,t,n,r=!1){let i=e-2*t+n;if(0!==i){let r=-Math.sqrt(Math.abs(t*t-e*n)),o=-e+t;return[-(r+o)/i,-(-r+o)/i]}return t!==n&&0===i?[(2*t-n)/(2*(t-n))]:[]}e.derive=function(e){let t=e.start,n=e.cp1,r=e.cp2,i=e.end,o={start:[3*(n[0]-t[0]),3*(n[1]-t[1])],cp:[3*(r[0]-n[0]),3*(r[1]-n[1])],end:[3*(i[0]-r[0]),3*(i[1]-r[1])]};return e.derivative=o,o.derivative=xfe.derive(o),o},e.droot=function(n){let r=n.derivative??e.derive(n),i=r.start,o=r.cp,a=r.end;return[t(i[0],o[0],a[0]),t(i[1],o[1],a[1])]},e.extremas=function(t){let[n,r]=e.droot(t),i=[t.start[0],t.end[0]],o=[t.start[1],t.end[1]];for(let a of n)i.push(e.compute(t,Math.min(1,Math.max(0,a)))[0]);for(let a of r)o.push(e.compute(t,Math.min(1,Math.max(0,a)))[1]);return i.sort(((e,t)=>e-t)),o.sort(((e,t)=>e-t)),[[i[0],o[0]],[i[i.length-1],o[o.length-1]]]},e.compute=function(e,t){if(0===t)return[...e.start];if(1===t)return[...e.end];let n=1-t,r=n*n,i=t*t,o=r*n,a=r*t*3,s=n*i*3,l=t*i;return[o*e.start[0]+a*e.cp1[0]+s*e.cp2[0]+l*e.end[0],o*e.start[1]+a*e.cp1[1]+s*e.cp2[1]+l*e.end[1]]}})(wfe||(wfe={})),(e=>{e.derive=function(e){let t=e.start,n=e.cp,r=e.end,i={start:[2*(n[0]-t[0]),2*(n[1]-t[1])],end:[2*(r[0]-n[0]),2*(r[1]-n[1])]};return i.derivative=Cfe.derive(i),e.derivative=i,i},e.droot=function(t){let n=t.derivative??e.derive(t),r=n.start,i=n.end;return[r[0]!==i[0]?r[0]/(r[0]-i[0]):0,r[1]!==i[1]?r[1]/(r[1]-i[1]):0]},e.compute=function(e,t){if(0===t)return[...e.start];if(1===t)return[...e.end];let n=1-t,r=n*n,i=n*t*2,o=t*t;return[r*e.start[0]+i*e.cp[0]+o*e.end[0],r*e.start[1]+i*e.cp[1]+o*e.end[1]]}})(xfe||(xfe={})),(e=>{e.derive=function(e){let t=e.start,n=e.end,r=[n[0]-t[0],n[1]-t[1]];return e.derivative=r,e.derivative},e.compute=function(e,t){if(0===t)return[...e.start];if(1===t)return[...e.end];let n=e.start,r=e.end;return[n[0]+(r[0]-n[0])*t,n[1]+(r[1]-n[1])*t]}})(Cfe||(Cfe={}));var Ife=class extends rfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new Tfe(e+"-background",sne.defaultData,n),this.background.parent=this,this.updateState(t,n)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),null==(e=this.background)||e.updateLocalMatrix()}updateWorldMatrix(e,t,n){var r;super.updateWorldMatrix(e,t,n),null==(r=this.background)||r.updateWorldMatrix(e,t,n)}draw(e){if(!this.visible)return;e.save();let t=this.width,n=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=n,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,n,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateCornerState(e){void 0!==e.cornerRadius&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),void 0!==e.fill&&this.fill.update(e.fill),void 0!==e.stroke&&this.stroke.update(e.stroke),void 0!==e.dropShadow&&this.dropShadow.update(e.dropShadow),void 0!==e.innerShadow&&this.innerShadow.update(e.innerShadow),void 0!==e.layerBlur&&this.layerBlur.update(e.layerBlur),void 0!==e.backgroundBlur&&this.backgroundBlur.update(e.backgroundBlur),void 0!==e.clipped&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),0===e.type&&(J8(e.path,["fill"])?this.fill.update(e.props):J8(e.path,["stroke"])?this.stroke.update(e.props):J8(e.path,["dropShadow"])?this.dropShadow.update(e.props):J8(e.path,["innerShadow"])?this.innerShadow.update(e.props):J8(e.path,["layerBlur"])?this.layerBlur.update(e.props):J8(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new Ife(this.uuid,this.data,e);t.parent=void 0;for(let n of this.children)t.add(n.clone(e));return t}},kfe=cQ(vQ(),1),Ofe=class extends Mfe{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,n),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),t.setAttribute("d",this.path),e.appendChild(t),this._pathBBox=t.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),void 0!==e.path&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new Ofe(this.uuid,this.data,e);return t.parent=void 0,t}};var Lfe=class{constructor(e,t,n){this.uuid=e,this.data=t,this.group=new ife(Lfe.GROUP_ID,{...dne.defaultData},n),this.createChildrenObjects(t.objects,this.group,n)}createObject(e,t,n,r,i,o){let a=function(e,t,n){switch(t.type){case"ellipse2d":return new Pfe(e,t,n);case"rectangle2d":return new Tfe(e,t,n);case"text2d":return new Dfe(e,t,n);case"vector2d":return new Ffe(e,t,n);case"path2d":return new Ofe(e,t,n);case"frame2d":return new Ife(e,t,n);default:return new ife(e,t,n)}}(e,t,o);a&&(r.add(a),r.children.splice(i,0,r.children.pop()),a.updateWorldMatrix(),n.length>0&&(a instanceof ife||a instanceof Ife)&&this.createChildrenObjects(n,a,o))}createChildrenObjects(e,t,n){let r=0;for(let i of e)this.createObject(i.id,i.data,i.children,t,r,n),r+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,n,r){let i=this.find(e);if(i)try{i.updateByOp(t,n,{shared:r})}catch(R9){}}updateTreeByOp(e,t){if(0===e.path.length&&7===e.type){let n=null===e.parent?this.group:this.find(e.parent);void 0!==n&&n instanceof rfe&&(this.createObject(e.id,e.data,e.children,n,e.localIndex,t),n.requestRender())}else if(0===e.path.length&&8===e.type){let t=this.find(e.id);if(void 0!==t&&void 0!==t.parent&&t.parent instanceof rfe){let e=t.parent;t.resetBBoxNeedsUpdate(),null==e||e.remove(t),null==e||e.requestRender()}}else if(0===e.path.length&&9===e.type){let t=this.find(e.id);if(void 0!==t){let n=t.parent,r=null===e.parent?this:this.find(e.parent);if(r instanceof rfe||r===this){r.add(t);let i=e.localIndex;r.children.splice(i,0,r.children.pop()),t.updateWorldMatrix(!0,!1,!0),null==n||n.requestRender(),t.requestRender()}t.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse((t=>{t!==this.group&&e(t)}))}intersectsChildren(e,t,n,r=!1,i=[]){return this.group.intersectsChildren(e,t,n,r,i,!0)}intersectsChildrenReverse(e,t,n,r=!1,i=[]){return this.group.intersectsChildrenReverse(e,t,n,r,i,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(void 0===t)return;let n=[],r=t;for(;r!==this.group;){let e=r;r=r.parent;let t=r.children.indexOf(e);n.splice(0,0,t)}return{entity:t,sortKey:n}}getAllSorted(e){let t=[];for(let n of e){let e=this.getWithSortKey(n.id);void 0!==e&&t.push(e)}return t.sort(((e,t)=>H6(e.sortKey,t.sortKey))),t.map((e=>e.entity))}},Rfe=Lfe;function Ufe({constraints:e,newParentWidth:t,newParentHeight:n,initialParentWidth:r,initialParentHeight:i,objectInitialWidth:o,objectInitialHeight:a,objectInitialPosition:s}){let{horizontalConstraint:l,verticalConstraint:c}=e,u=t-r,d=n-i,h=o,p=a,A=s[0],f=s[1];if(0!==l)if(1===l)A+=u;else if(3===l)A+=u/2;else if(2===l)h=Math.max(1,h+u);else if(4===l){let e=t/r;h*=e,A*=e}if(0!==c)if(1===c)f+=d;else if(3===c)f+=d/2;else if(2===c)p=Math.max(1,p+d);else if(4===c){let e=n/i;p*=e,f*=e}return{width:h,height:p,position:[A,f]}}Rfe.GROUP_ID="scene2d",cQ(vQ(),1);var zfe=new uY(-1,1,1,-1,0,1),Nfe=new class extends mK{constructor(){super(),this.setAttribute("position",new lK([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new lK([0,2,0,0,2,0],2))}},jfe=new RK({defines:{},uniforms:{tDiffuse:new y0(null)},vertexShader:"\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tvUv = uv;\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t}",fragmentShader:"\n\tuniform sampler2D tDiffuse;\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\tgl_FragColor = texel;\n\t}"}),Hfe=new class{constructor(e){this._mesh=new TK(Nfe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,zfe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}(jfe),Qfe=null,Vfe=null,Wfe=GAe.identity(),Gfe=class{constructor(e,t,n,r){this.uuid=e,this.width=t,this.height=n,this.context=r,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let e=this.width,t=this.height,n=this.dpr;this.renderer.dpr=this.isScreenSpace?n:Math.floor(2048/Math.max(e,t)),this.renderer.setSize(e,t)},this.onFrameOverrideObjectEvent=e=>{var t,n;if(void 0!==(null==(t=e.target)?void 0:t.uuid)){let t=null==(n=this.frameRoot)?void 0:n.find(e.target.uuid);t&&t.dispatchEvent({...e,target:t})}},this.scene2d=new Rfe(dG.generateUUID(),Ane.defaultData,{dpr:window.devicePixelRatio,shared:r.shared}),this.canvas=(null===Qfe&&(Qfe=document.createElement("canvas")),Qfe),this.renderer=(e=>(null===Vfe&&(Vfe=new vfe(e)),Vfe))(this.canvas),this.promise=this.init(),this.renderTarget=new RG(1,1,{type:NV,stencilBuffer:!1,depthBuffer:!1}),r.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=r.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new aJ(this.canvas)),this._canvasTexture}async init(){this.renderer instanceof vfe&&(this.renderer.wasmURL=wce.skiaWasmUrl),await this.renderer.init()}render(e){var t,n;if(this.isFrameDirty){this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),null==(t=this.frameOverride)||t.draw(this.renderer),this.renderer.render(),jfe.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),Hfe.render(e),e.setRenderTarget(r),null==(n=this.textureHolder)||n.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,n,r){this.scene2d.updateEntityByOp(e,t,n,r),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let t=(null==e?void 0:e.width)??this.width,n=(null==e?void 0:e.height)??this.height;this.frameOverride.width=t,this.frameOverride.height=n,this.frameOverride.localMatrix=Wfe,this.isScreenSpace&&(this.frameOverride.fill.color=$9.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:t,height:n},qfe({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e,t=window.devicePixelRatio){var n,r;let i=(null==e?void 0:e.width)??this.width,o=(null==e?void 0:e.height)??this.height;this.dpr=t,this.width=i,this.height=o,this._innerApplySize();let a=1;(i*t<512||o*t<512)&&(a=Math.max(512/(i*t),512/(o*t))),this.renderTarget.setSize(i*t*a,o*t*a),null==(n=this._canvasTexture)||n.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),null==(r=this.frameOverride)||r.requestRender()}applyFrame(e){var t,n;let r=this.context.scene.find2D(e);if(r&&r instanceof Ife)return this.disposeFrameOverride(),this.frameRoot=r,this.frameOverride=r.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),null==(t=this.frame)||t.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse((e=>{e.addEventListener("beginState",this.onFrameOverrideObjectEvent)})),this.frameOverride.traverse((e=>{e.addEventListener("completeState",this.onFrameOverrideObjectEvent)})),null==(n=this.frame)||n.requestRender(),r}get frame(){return this.frameOverride}get frameId(){var e;return null==(e=this.frame)?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return null==(e=this.textureHolder)?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,t,n;null==(e=this.frameOverride)||e.removeEventListener("render",this.onRenderRequestedDownstream),null==(t=this.frameOverride)||t.traverse((e=>{e.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)})),null==(n=this.frameOverride)||n.traverse((e=>{e.removeEventListener("completeState",this.onFrameOverrideObjectEvent)})),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function qfe({objectOverride:e,objectRoot:t,newParentWidth:n,newParentHeight:r,initialParentWidth:i,initialParentHeight:o}){if(e instanceof Ife&&t instanceof Ife||e instanceof ife&&t instanceof ife)for(let a=0,s=e.children.length;a<s;a++){let s=e.children[a],l=t.children[a];s&&l&&s.uuid===l.uuid&&Kfe({objectOverride:s,objectRoot:l,newParentWidth:n,newParentHeight:r,initialParentWidth:i,initialParentHeight:o})}}function Kfe({objectOverride:e,objectRoot:t,newParentWidth:n,newParentHeight:r,initialParentWidth:i,initialParentHeight:o}){let[a,s]=function(e){if(Xfe(e))return[e.width,e.height];if(e instanceof Ofe){let[t,n]=e.getHalfSize();return[2*t,2*n]}if(e instanceof ife){let[t,n]=e.recursiveBBox.getHalfSize();return[2*t,2*n]}return[0,0]}(t),{width:l,height:c,position:u}=Ufe({constraints:e.data,newParentWidth:n,newParentHeight:r,initialParentWidth:i,initialParentHeight:o,objectInitialWidth:a,objectInitialHeight:s,objectInitialPosition:t.position});if(e.position=u,e.data={...e.data,position:u},e.states)for(let d in e.states)Yfe({stateId:d,objectOverride:e,objectRoot:t,newParentWidth:n,newParentHeight:r,initialParentWidth:i,initialParentHeight:o});if(Xfe(e)||e instanceof ife)Xfe(e)&&(e.width=l,e.height=c,e.data={...e.data,width:l,height:c}),qfe({objectOverride:e,objectRoot:t,newParentWidth:l,newParentHeight:c,initialParentWidth:a,initialParentHeight:s});else if(e instanceof Ofe){let n=t,r=0!==a?l/a:1,i=0!==s?c/s:1;e.path=function(e,t=1,n=1){if(t<=0||n<=0)return e;let r=(0,kfe.parseSVG)(e).map((e=>{let r={...e};return"x"in r&&(r.x=r.x*t),"y"in r&&(r.y=r.y*n),"x1"in r&&(r.x1=r.x1*t),"x2"in r&&(r.x2=r.x2*t),"y1"in r&&(r.y1=r.y1*n),"y2"in r&&(r.y2=r.y2*n),"rx"in r&&(r.rx=r.rx*t),"ry"in r&&(r.ry=r.ry*n),r}));return function(e){let t,n=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"];return e.map((e=>{let r=[];n.forEach((t=>{if(t in e){let n=1*e[t];r.length&&n>=0&&r.push(","),r.push(n)}}));let i=(t===e.code?r[0]<0?"":",":e.code)+r.join("");return t=e.code,i})).join("")}(r)}(n.path,r,i),e.data={...e.data,path:e.path}}}function Yfe({stateId:e,objectOverride:t,objectRoot:n,newParentWidth:r,newParentHeight:i,initialParentWidth:o,initialParentHeight:a}){var s,l;let c=null==(s=t.states)?void 0:s[e],u=null==(l=n.states)?void 0:l[e];if(c&&u){let{width:n,height:s,position:l}=Ufe({constraints:t.data,newParentWidth:r,newParentHeight:i,initialParentWidth:o,initialParentHeight:a,objectInitialWidth:pne.isResizeable(u)?u.width:0,objectInitialHeight:pne.isResizeable(u)?u.height:0,objectInitialPosition:u.position});Object.assign(t.states[e],{position:l}),pne.isResizeable(c)&&Object.assign(t.states[e],{width:n,height:s})}}function Xfe(e){return e instanceof Tfe||e instanceof Ife||e instanceof Pfe||e instanceof Dfe}var $fe=class extends(Cie(I$)){constructor(e,t,n){super(),this.data=t,this.bgColor=new qse(1,1,1,1),this.fog=null,this.backupFog=new F$(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new PG,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new xhe(lee,{...ate.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new NZ(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),t.uiScene?this.uiScene=new Rfe((Array.isArray(e)?e[0]:e)+"-ui",t.uiScene,{dpr:window.devicePixelRatio,shared:n.shared}):t.uiFrame&&this.createUICanvas(t.uiFrame,n)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return null==(e=this.uiCanvas)?void 0:e.frame}createUICanvas(e,t){this.uiCanvas=new Gfe(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,t),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then((()=>{var t,n;null==(t=this.uiCanvas)||t.applyFrame(e),null==(n=this.uiCanvas)||n.applySize()}))}updateVisible(){}setBackgroundColor(e){this.bgColor=e,!0===this.fogUseBGColor&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,t){void 0!==e.color&&(this.ambientLight.color=oue(e.color,t)),void 0!==e.intensity&&(this.ambientLight.intensity=e.intensity),void 0!==e.enabled&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity((e=>{e instanceof Ehe&&e.recomputeBoolean()})),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity((e=>{if(e instanceof lde)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()}))}updateShadow(e){void 0!==e.softShadowQuality&&this.isActive&&((e="medium")=>{if(FAe===e)return!1;FAe=e;let t=(e=>{switch(e){case"low":return 8;case"medium":default:return 16;case"high":return 32}})(e);eY.shadowmap_pars_fragment=(e=>`\n\n// PCSS implementation based on:\n// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/\n// NOTE: This number affects how big the shadow blur can\n// possibly get. Bigger number == bigger blur, but less precise results\n\nconst float  gPenumbraFilterSize = 80.0;\nconst int   gPenumbraSamples = ${e};\nconst int gShadowSamples = ${e};\nconst float gShadowSamplesRpc = 1.0f / float(gShadowSamples);\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHT_SHADOWS > 0\n\n        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n        struct DirectionalLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_SPOT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n        struct SpotLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_POINT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n        struct PointLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n            float shadowCameraNear;\n            float shadowCameraFar;\n        };\n\n        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n    #endif\n\n    /*\n    #if NUM_RECT_AREA_LIGHTS > 0\n\n        // TODO (abelnation): create uniforms for area light shadows\n\n    #endif\n    */\n\nfloat computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)\n{\n    float penumbra = 1.0;\n    float blockerDepthAvg = 0.0;\n    float blockerCount = 0.0;\n\n    #pragma unroll_loop_start\n    for(int i = 0; i < gPenumbraSamples; i ++)\n    {\n        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;\n        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );\n\n        if(depth < compare + 0.0001)\n        {\n            blockerDepthAvg += depth;\n            blockerCount++;\n        }\n    }\n    #pragma unroll_loop_end\n\n    if (blockerCount > 0.0)\n    {\n        blockerDepthAvg /= blockerCount;\n\n        // Compute penumbra\n        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);\n        penumbra *= penumbra;\n        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows\n\n        return clamp(penumbra, 0.00, 1.0);\n    }\n    return 0.0;\n}\n\nfloat vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)\n{\n    float shadow         = 0.0f;\n\n    // NOTE: When using TAA, we should use screen space interleaved gradient noise\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);\n    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);\n    if (penumbra == -1.0) {\n        return 1.0;\n    }\n\n    #pragma unroll_loop_start\n    for (int i = 0; i < gShadowSamples; i++)\n    {\n        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n        // Overall blurring offset\n        vec2 offset = vogelSample * (shadowRadius * 2.);\n\n        // Penumbra offset\n        offset += vogelSample * (penumbra * texelScalar);\n\n        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n    }\n    #pragma unroll_loop_end\n\n    return shadow * gShadowSamplesRpc;\n}\n\n\n    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n    }\n\n    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n        return unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n    }\n\n    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n        float occlusion = 1.0;\n\n        vec2 distribution = texture2DDistribution( shadow, uv );\n\n        float hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n        if (hard_shadow != 1.0 ) {\n\n            float distance = compare - distribution.x ;\n            float variance = max( 0.00000, distribution.y * distribution.y );\n            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n        }\n        return occlusion;\n\n    }\n\n    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n        float shadow = 1.0;\n\n        shadowCoord.xyz /= shadowCoord.w;\n        shadowCoord.z += shadowBias;\n\n        // if ( something && something ) breaks ATI OpenGL shader compiler\n        // if ( all( something, something ) ) using this instead\n\n        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n        bool inFrustum = all( inFrustumVec );\n\n        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n        bool frustumTest = all( frustumTestVec );\n\n        if ( frustumTest ) {\n\n        #if defined( SHADOWMAP_TYPE_PCF )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            float dx = texelSize.x;\n            float dy = texelSize.y;\n\n            vec2 uv = shadowCoord.xy;\n            vec2 f = fract( uv * shadowMapSize + 0.5 );\n            uv -= f * texelSize;\n\n            shadow = (\n                texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n                          f.x ),\n                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n                          f.x ),\n                     f.y )\n            ) * ( 1.0 / 9.0 );\n\n        #elif defined( SHADOWMAP_TYPE_VSM )\n\n            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #else // no percentage-closer filtering:\n\n            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #endif\n\n        }\n\n        return shadow;\n\n    }\n\n    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n    // vector suitable for 2D texture mapping. This code uses the following layout for the\n    // 2D texture:\n    //\n    // xzXZ\n    //  y Y\n    //\n    // Y - Positive y direction\n    // y - Negative y direction\n    // X - Positive x direction\n    // x - Negative x direction\n    // Z - Positive z direction\n    // z - Negative z direction\n    //\n    // Source and test bed:\n    // https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n    vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n        // Number of texels to avoid at the edge of each square\n\n        vec3 absV = abs( v );\n\n        // Intersect unit cube\n\n        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n        absV *= scaleToCube;\n\n        // Apply scale to avoid seams\n\n        // two texels less per square (one texel will do for NEAREST)\n        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n        // Unwrap\n\n        // space: -1 ... 1 range for each square\n        //\n        // #X##         dim    := ( 4 , 2 )\n        //  # #         center := ( 1 , 1 )\n\n        vec2 planar = v.xy;\n\n        float almostATexel = 1.5 * texelSizeY;\n        float almostOne = 1.0 - almostATexel;\n\n        if ( absV.z >= almostOne ) {\n\n            if ( v.z > 0.0 )\n                planar.x = 4.0 - v.x;\n\n        } else if ( absV.x >= almostOne ) {\n\n            float signX = sign( v.x );\n            planar.x = v.z * signX + 2.0 * signX;\n\n        } else if ( absV.y >= almostOne ) {\n\n            float signY = sign( v.y );\n            planar.x = v.x + 2.0 * signY + 2.0;\n            planar.y = v.z * signY - 2.0;\n\n        }\n\n        // Transform to UV space\n\n        // scale := 0.5 / dim\n        // translate := ( center + 0.5 ) / dim\n        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n    }\n\n    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n        float shadow = 1.0;\n        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n        // for point lights, the uniform @vShadowCoord is re-purposed to hold\n        // the vector from the light to the world-space position of the fragment.\n        vec3 lightToPosition = shadowCoord.xyz;\n\n        // dp = normalized distance from light to fragment position\n        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n        compare += shadowBias;\n\n        // bd3D = base direction 3D\n        vec3 bd3D = normalize( lightToPosition );\n\n        vec2 halton = haltonSequence[frameIndex];\n        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n        float temporalAngle  = temporalOffset * PI2;\n\n        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )\n            for (int i = 0; i < gShadowSamples; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                // NOTE: Removed for now\n                // Penumbra offset\n                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * gShadowSamplesRpc;\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n            for (int i = 0; i < 16; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * (1.0 / 16.0);\n        #else // no percentage-closer filtering\n\n            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );\n\n        #endif\n\n    }\n\n#endif\n`)(t);let n=TAe.slice();n=n.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),n=n.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),eY.lights_fragment_begin=n;let r=DAe.slice();return r=r.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),eY.shadowmask_pars_fragment=r,!0})(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){this.scene.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=oue(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){void 0!==e.aoColor&&(this.aoColor=oue(e.aoColor,t))}updateByOp(e,t,n,r){let i=this.data.uiFrame;super.updateByOp(e,t,n,r);let o=t;J8(e.path,["fog"])?this.updateFog(o.fog,n.shared):J8(e.path,["ao"])?this.updateAo(o.ao,n.shared):J8(e.path,["ambient"])?this.updateAmbientLight(o.ambient,n.shared):J8(e.path,["shadow"])?this.updateShadow(o.shadow):0===e.type&&0===e.path.length&&(void 0!==e.props.uiFrame||i!==o.uiFrame)&&this.updateUIFrame(e.props.uiFrame,n)}updateUIFrame(e,t){e?(this.uiCanvas||this.createUICanvas(e,t),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,t){this.updateState_Entity(e,t),void 0!==e.backgroundColor&&this.setBackgroundColor(oue(e.backgroundColor,t.shared)),void 0!==e.fog&&this.updateFog(e.fog,t.shared),void 0!==e.ambient&&this.updateAmbientLight(e.ambient,t.shared),void 0!==e.ao&&this.updateAo(e.ao,t.shared),void 0!==e.shadow&&this.updateShadow(e.shadow)}createFrame(e,t){}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return(null==(e=this.scene)?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return null===this.penumbraSizeArrayCache&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity((n=>{if(!n.visible)return!0;n instanceof qAe&&n.visible&&e<3&&(this.penumbraSizeArrayCache[e]=n.data.penumbraSize??.5,e+=1),n instanceof $Ae&&n.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=n.data.penumbraSize??.5,t+=1)}))}raycastWithClones(e){let t=[],n=r=>{for(let i of r.children){let r=i.cloner;eie.is(i)&&(i.visible||(null==r?void 0:r.object.data.visible))&&((Phe(i)||Dhe(i)&&this.scene.enableHelpers&&i.objectHelper.visible)&&(e.intersectObject(i,!1,t),Mme(i,e,t,!0)),n(i))}};return n(this),t}updateEntity2DByOp(e,t,n,r){var i;null==(i=this.uiCanvas)||i.updateEntity2DByOp(e,t,n,r)}},Jfe=class extends(Mhe($Z,UAe)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=90,r.aspect=1,r.near=100,r.far=2500;let i=new jG(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),o=new jG(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z),a=new VG(i,o),s=new N0(a,new PG(16755200));s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof N0){let e=this.shadow.camera,n=new jG(-e.far+this.position.x,-e.far+this.position.y,-e.far+this.position.z),r=new jG(e.far+this.position.x,e.far+this.position.y,e.far+this.position.z);t.box.set(n,r),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Zfe=class extends Ade{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?Ose(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},eme=class extends Ade{constructor(e,t,n){super(e,t,n),this._shapeId=null,this._context=n}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){var e;let t,n={...this.data.geometry.extrusion.shape};for(let i in n)"string"==typeof n[i]&&(n[i]=this._context.shared.getVariable(n[i],[this.uuid,"geometry","extrusion","shape",i]));if("Custom"===n.type){let r=n.shapeId;if(r!==this._shapeId&&this.detachShape(),r){this._shapeId=r;let n=this._context.scene.find(r);(null==n?void 0:n.data)&&(n.attachedPaths.add(this),t=null==(e=n.geometry.userData)?void 0:e.shape),t||this._context.scene.addPendingCommand((()=>this.updateShape()))}}else{let e;switch(n.type){case"Rectangle":e=Eae;break;case"Ellipse":e=Goe;break;case"Polygon":e=xae;break;case"Star":e=Pae;break;default:throw new Error(`Unknown shape type: ${n.type}`)}t=e.create({parameters:n}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build(),this.attachedSurfaceCloners.forEach((e=>e.update())))}detachShape(){var e;null!==this._shapeId&&(null==(e=this._context.scene.find(this._shapeId))||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?Ose(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},tme=class extends Vde{constructor(e,t,n){super(e,t,n),this.data=t}},nme=class extends(fhe(S$,Lhe)){constructor(e,t,n){super(),"Instance"===t.type&&"string"==typeof e&&(t=this.transformAssignData(t,n)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return"Component"===this.data.type&&"string"==typeof this.identity}get isInstanceRoot(){return"Instance"===this.data.type&&"string"==typeof this.identity}transformAssignData(e,t){let n=Yte.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(n){let t,r;for(let i of cte.rootOverrideProps)void 0===e[i]?(void 0===t&&(t={...e}),t[i]=n.data[i]):(void 0===r&&(r={}),r[i]=e[i],void 0===t&&(t={...e}),t[i]=b8.apply(n.data[i],e[i]));return this.overrideData=r,t}return{...ete.defaultData,...e,...T6(ete.defaultData,cte.rootOverrideProps)}}updateByOp(e,t,n,r){let i;if(this.isInstanceRoot&&!r)if(t=this.transformAssignData(t,n),0===e.type&&0===e.path.length&&this.component)for(let o of cte.rootOverrideProps)o in e.props&&void 0===e.props[o]&&(void 0===i&&(i={...e,props:{...e.props}}),i.props[o]=this.component.data[o]);else if(0===e.type&&e.path.length>0&&cte.rootOverrideProps.includes(e.path[0])){let n=e.path[0];void 0===i&&(i={...e,path:[],props:{[n]:t[n]}})}super.updateByOp(i??e,t,n,r)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(void 0===this.component){let n=e.scene.find(t.component)??null,r=!1;if(n!==this.oldComponent){if(this.oldComponent){let t=0;for(let n of this.children){if(!eie.is(n))break;e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),rme(n),t+=1}this.children.splice(0,t)}r=!0}if(n){let i={};ome(e,[this.uuid],t.overrides,this,n,n,0,r,i);for(let t of this.children)if(eie.is(t)){let n=t.data;"Empty"===n.type&&n.animations&&t.traverseEntity((t=>{let n=t.dataPatched;if(t instanceof Ade&&n.bones&&n.boneInverses){let n=t.dataPatched;if(n.bones&&n.boneInverses){let r=n.bones.map((t=>e.scene.find(i[t]))),o=n.boneInverses.map((e=>(new gq).fromArray(e))),a=new j$(r,o);t.bind(a,t.bindMatrix)}}else t.matrixAutoUpdate=!0}))}}this.oldComponent=this.component}}};function rme(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let n of e.children)eie.is(n)&&rme(n)}}function ime(e,t,n,r){return e.component===t&&y6(e.identity,r)?e.overrideData===n?2:1:0}function ome(e,t,n,r,i,o,a,s,l){if(a>50)return!1;if(r.component!==i){if(r.component){let e=r.component.instances.indexOf(r);e>=0&&r.component.instances.splice(e,1)}i.instances.find((e=>e===r))||i.instances.push(r),r.component=i}i instanceof nme&&i.isInstanceRoot&&i.expandInstanceChildren(e);let c=0;for(let u of i.children)if(eie.is(u)){let i=[...t,..."string"==typeof u.identity?[u.identity]:u.identity],d=lte.resolve(n,i,1);null==d||d instanceof B8||Object.setPrototypeOf(d,B8.prototype);let h,p=null;if(!s){let t=r.children[c];if(p=eie.is(t)?t:null,null!==p){let e=ime(p,u,d,i);h=e>=1?p.stateSelection:void 0,2!==e&&(p=null)}if(null===p&&(p=e.scene.findInstance(i)??null,null!==p)){let t=ime(p,u,d,i);if(h=t>=1?p.stateSelection:void 0,2!==t)p=null;else{let t=p.parent.children.indexOf(p);p.parent.children.splice(t,1),r.children.splice(c,0,p),p.parent===r||(p.parent=r,p.matrixWorldNeedsUpdate=!0,p.resetBBoxNeedsUpdate(),p.updateVisible(),e.pendingDeletes.delete(p))}}}if(null===p){let t=d?b8.apply(u.data,d):u.data;iee.is(t.type)&&(t={...t,type:"Empty"}),p=hie.createEntity(i,t,e),p.overrideData=d,r.add(p),r.children.splice(r.children.length-1,1),r.children.splice(c,0,p),p.updateState(p.data,e),h&&p.changeSelectedState(h,e),e.scene.registerInstanceAndSetUuid(p)}if(p.isBone){l[p.identity[p.identity.length-1]]=p.uuid}c+=1,ome(e,t,n,p,u,o,a+1,s,l)}if(!s){let t=c;for(;;){let t=r.children[c];if(!eie.is(t))break;e.pendingDeletes.add(t),c+=1}r.children.splice(t,c-t)}return!0}var ame=class extends(fhe(R$,Lhe)){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},sme=class extends Ade{constructor(e,t,n){super(e,t,n),this.onBeforeRender=e=>{this.uiCanvas.render(e)},this.uiCanvas=new Gfe(e+"-canvas",t.geometry.width,t.geometry.height,n),this.uiCanvas.promise.then((()=>{this.applyFrame(this.dataPatched.geometry.frame,n.shared)}))}updateByPatchedOpGeometry(e,t,n){super.updateByPatchedOpGeometry(e,t,n),0===e.type&&(void 0!==e.props.frame&&this.applyFrame(e.props.frame,n.shared),(void 0!==e.props.width||void 0!==e.props.height)&&this.applySize(e.props,n.shared))}applySize(e,t){let n=(null==e?void 0:e.width)??this.dataPatched.geometry.width,r=(null==e?void 0:e.height)??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:n,height:r}),this.applyGeometryParametersFromFrame(t)}applyFrame(e,t){this.uiCanvas.applyFrame(e),this.applyGeometryParametersFromFrame(t),this.applyMaterialParametersFromFrame({shared:t})}applyGeometryParametersFromFrame(e){var t;let n=this.frame;n&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:n.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:n.cornerRadius,cornerType:0})}),null==(t=this.localGeometry)||t.dispose(),this.localGeometry=Jae(this.dataPatched.geometry,e,this.data.flatShading,this))}applyMaterialParametersFromFrame(e){let t=this.frame;if(t){let n=t.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:n.radius,alpha:n.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:n.radius,alpha:n.enabled?1:0}),this.material.reset(this.dataPatched.material,e,!0)}}updateEntity2DByOp(e,t,n,r){this.uiCanvas.updateEntity2DByOp(e,t,n,r),e===this.frameId&&0===t.type&&(void 0!==t.props.cornerRadius?this.applyGeometryParametersFromFrame(r):J8(t.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:r}))}get frame(){return this.uiCanvas.frame}get frameId(){var e;return null==(e=this.frame)?void 0:e.uuid}removeInteractionGeometry(e){super.removeInteractionGeometry(e),this.applySize({},e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.applySize({width:e.width,height:e.height},t)}},lme=class{constructor(e,t,n){this.variables=[],this.currentTextureIndex=0;let r=zV,i=new I$,o=new UK;o.position.z=1;let a={passThruTexture:{value:null}},s=u("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",a),l=new TK(new ZK(2,2),s);function c(n){n.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function u(e,t){let n=new RK({uniforms:t=t||{},vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:e});return c(n),n}i.add(l),this.setDataType=function(e){return r=e,this},this.addVariable=function(e,t,n){let r={name:e,initialValueTexture:n,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:EV,magFilter:EV};return this.variables.push(r),r},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!1===n.capabilities.isWebGL2&&!1===n.extensions.has("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(let n=0;n<this.variables.length;n++){let r=this.variables[n];r.renderTargets[0]=this.createRenderTarget(e,t,r.wrapS,r.wrapT,r.minFilter,r.magFilter),r.renderTargets[1]=this.createRenderTarget(e,t,r.wrapS,r.wrapT,r.minFilter,r.magFilter),this.renderTexture(r.initialValueTexture,r.renderTargets[0]),this.renderTexture(r.initialValueTexture,r.renderTargets[1]);let i=r.material,o=i.uniforms;if(null!==r.dependencies)for(let e=0;e<r.dependencies.length;e++){let t=r.dependencies[e];if(t.name!==r.name){let e=!1;for(let n=0;n<this.variables.length;n++)if(t.name===this.variables[n].name){e=!0;break}if(!e)return"Variable dependency not found. Variable="+r.name+", dependency="+t.name}o[t.name]={value:null},i.fragmentShader="\nuniform sampler2D "+t.name+";\n"+i.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0;for(let n=0,r=this.variables.length;n<r;n++){let r=this.variables[n];if(null!==r.dependencies){let t=r.material.uniforms;for(let n=0,i=r.dependencies.length;n<i;n++){let i=r.dependencies[n];t[i.name].value=i.renderTargets[e].texture}}this.doRenderTarget(r.material,r.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let e=this.variables;for(let t=0;t<e.length;t++){let n=e[t];n.initialValueTexture&&n.initialValueTexture.dispose();let r=n.renderTargets;for(let e=0;e<r.length;e++)r[e].dispose()}},this.addResolutionDefine=c,this.createShaderMaterial=u,this.createRenderTarget=function(n,i,o,a,s,l){return new RG(n=n||e,i=i||t,{wrapS:o=o||BV,wrapT:a=a||BV,minFilter:s=s||EV,magFilter:l=l||EV,format:WV,type:r,depthBuffer:!1})},this.createTexture=function(){let n=new Float32Array(e*t*4),r=new U$(n,e,t,WV,zV);return r.needsUpdate=!0,r},this.renderTexture=function(e,t){a.passThruTexture.value=e,this.doRenderTarget(s,t),a.passThruTexture.value=null},this.doRenderTarget=function(e,t){let r=n.getRenderTarget(),a=n.xr.enabled,c=n.shadowMap.autoUpdate,u=n.outputEncoding,d=n.toneMapping;n.xr.enabled=!1,n.shadowMap.autoUpdate=!1,n.outputEncoding=zW,n.toneMapping=pV,l.material=e,n.setRenderTarget(t),n.render(i,o),l.material=s,n.xr.enabled=a,n.shadowMap.autoUpdate=c,n.outputEncoding=u,n.toneMapping=d,n.setRenderTarget(r)}}},cme=new Zq,ume=new jG,dme=class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||3!==t.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,n=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let r=1;t&&(r=t.getX(i)+t.getX(i+1)+t.getX(i+2)),cme.a.fromBufferAttribute(e,i),cme.b.fromBufferAttribute(e,i+1),cme.c.fromBufferAttribute(e,i+2),r*=cme.getArea(),n[i/3]=r}this.distribution=new Float32Array(e.count/3);let r=0;for(let i=0;i<n.length;i++)r+=n[i],this.distribution[i]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,n){let r=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*r);return this.sampleFace(i,e,t,n)}binarySearch(e){let t=this.distribution,n=0,r=t.length-1,i=-1;for(;n<=r;){let o=Math.ceil((n+r)/2);if(0===o||t[o-1]<=e&&t[o]>e){i=o;break}e<t[o]?r=o-1:n=o+1}return i}sampleFace(e,t,n,r){let i=this.randomFunction(),o=this.randomFunction();return i+o>1&&(i=1-i,o=1-o),cme.a.fromBufferAttribute(this.positionAttribute,3*e),cme.b.fromBufferAttribute(this.positionAttribute,3*e+1),cme.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(cme.a,i).addScaledVector(cme.b,o).addScaledVector(cme.c,1-(i+o)),void 0!==n&&cme.getNormal(n),void 0!==r&&void 0!==this.colorAttribute&&(cme.a.fromBufferAttribute(this.colorAttribute,3*e),cme.b.fromBufferAttribute(this.colorAttribute,3*e+1),cme.c.fromBufferAttribute(this.colorAttribute,3*e+2),ume.set(0,0,0).addScaledVector(cme.a,i).addScaledVector(cme.b,o).addScaledVector(cme.c,1-(i+o)),r.r=ume.x,r.g=ume.y,r.b=ume.z),this}};function hme(e,t){let n=e,r=new Float32Array(4*t*t);for(let o=0;o<t*t;o++)r[4*o]=n[3*o],r[4*o+1]=n[3*o+1],r[4*o+2]=n[3*o+2],r[4*o+3]=0;let i=new U$(r,t,t,WV,zV);return i.needsUpdate=!0,i}var pme="\n\n  // Linear Fade In\n  float linearFadeIn(float t) {\n    return t;\n  }\n\n\n  // linear fade out\n  float linearFadeOut(float t) {\n    return 1.0 - t;\n  }\n  \n  float linearInOut(float t) {\n    return t < 0.5 ? t :  (1.0 - t);  \n  }\n\n    // lerp\n    float lerp(float a, float b, float t) {\n      return a + (b - a) * t;\n    }\n\n  // Ease In Out Quart\n  float exponentialInOut(float t) {\n    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :\n    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :\n    1.0;\n   }\n\n  // constant\n  float constant(float t) {\n    return 1.0;\n  } \n",Ame=`\n  uniform sampler2D uPosition;\n  uniform float uSize;\n  uniform float uSizeEnd;\n  uniform vec3 uWorldOffset;\n  uniform vec4 uWorldQuaternion;\n  // Billboard Behavior - Currently at Zero, but we can change that\n  uniform float uRotation;\n  uniform float uRotationEnd;\n  uniform vec2 center;\n\n  // Randomness\n  uniform float uRandScaleFactor;\n  uniform float uRandRotationFactor;\n\n  attribute vec2 ref;\n\n  varying float v_LifeLeft;    // normalized lifetime 1 to 0\n  varying vec2 vUv;\n  varying vec2 vRef;\n\n  \n\nfloat rand(vec3 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\nvec3 applyForce(vec3 force, float mass) {\n  vec3 acceleration = force / mass;\n    \n  return acceleration;\n}\n\n  ${pme}\n`,fme="\n  uniform vec4 uColor;                // start color\n  uniform vec4 uColor2;               // end color\n  uniform sampler2D uTexture;         // texture\n  varying float v_LifeLeft;   // normalized lifetime 1 to 0\n  varying vec2 vUv;\n  varying vec2 vRef;\n\n  float random(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n  }\n  "+pme+"  \n  \nvec3 rgb2xyz (in vec3 rgb) {\n    float r = rgb.r;\n\tfloat g = rgb.g;\n\tfloat b = rgb.b;\n\n\tr = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tfloat x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tfloat y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tfloat z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n    \n    vec3 xyz = vec3(\n        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,\n        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,\n        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0\n    );\n    return(xyz);\n}\n\nvec3 xyz2lab (in vec3 xyz) {\n\tfloat x = xyz.x / 95.047;\n\tfloat y = xyz.y / 100.0;\n\tfloat z = xyz.z / 108.883;\n\n\tx = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);\n\ty = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);\n\tz = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);\n\n    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));\n    return(lab);\n}\n\nvec3 rgb2lab(in vec3 rgb) {\n    vec3 xyz = rgb2xyz(rgb);\n    vec3 lab = xyz2lab(xyz);\n    return(lab);\n}\n\nvec3 xyz2rgb (in vec3 xyz) {\n\tfloat x = xyz.x / 100.0;\n\tfloat y = xyz.y / 100.0;\n\tfloat z = xyz.z / 100.0;\n\t\n    \n\tfloat r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);\n\tfloat g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);\n\tfloat b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);\n\n\tr = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;\n\tg = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;\n\tb = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;\n\n\tr = min(max(0.0, r), 1.0);\n\tg = min(max(0.0, g), 1.0);\n\tb = min(max(0.0, b), 1.0);\n\n\treturn(vec3(r, g, b));\n}\n\nvec3 lab2xyz (in vec3 lab) {\n    float l = lab.x;\n\tfloat a = lab.y;\n\tfloat b = lab.z;\n\n  \tfloat y = (l + 16.0) / 116.0;\n\tfloat x = a / 500.0 + y;\n\tfloat z = y - b / 200.0;\n\n\tfloat y2 = pow(y, 3.0);\n\tfloat x2 = pow(x, 3.0);\n\tfloat z2 = pow(z, 3.0);\n\n  \ty = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100.0;\n\tz *= 108.883;\n\n\treturn(vec3(x, y, z));\n}\nvec3 lab2rgb (in vec3 lab) {\n    vec3 xyz = lab2xyz(lab);\n    vec3 rgb = xyz2rgb(xyz);\n    return(rgb);\n}\n\n\n\n",mme=class extends RK{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],Nse.startContext(Nse.globalContext),this.lightLayer=new yue(0,"",{...Pee.defaultData("light","phong"),visible:!1},new xce,{},t.shared),Nse.endContext(Nse.globalContext),this.build()}updateState(e){void 0!==e.coloring&&(this.isColoringRandom="random"===e.coloring),void 0!==e.color&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),void 0!==e.color2&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),void 0!==e.size&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),void 0!==e.ease&&(this.easeOpacity=e.ease,this.build()),void 0!==e.easeSize&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new Ple;return e.needsJitter=this.needsJitter,e.addFragmentParsCode("\nlayout(location = 1) out vec4 gVelocity;\n"),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode("\n    // Discard fully transparent pixels \n    if (gl_FragColor.a <= 0.0) discard;\n\n    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);\n"),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(Ame),e.addFragmentParsCode(fme),e.addVertexFinalCode((({easeSize:e="linearFadeOut"})=>`\n  vUv = uv;  \n  vRef = ref;\n  // Normalized LifeTime 1 to 0\n  float lifeLeft = texture2D(uPosition, ref).w;\n  v_LifeLeft = lifeLeft;\n  // Position From DataTexture Simulation\n  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;\n  // Apply World Quaternion\n  pos = applyQuaternionToVector(uWorldQuaternion, pos);  \n            \n  #ifdef  USE_SIZE_END\n    // Scaled Over Time\n    float t = 1. - lifeLeft;\n    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd\n    vec3 scaledPosition = position * vec3(currentSize);\n  #else\n    // Change Size Behavior over LifeTime\n    float easeSize = ${e}(1. - lifeLeft);\n    // Scaled Over Time\n    vec3 scaledPosition = position * vec3(uSize * easeSize);\n  #endif\n\n  // Billboard Behavior\n  vec2 scale;\n  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    \n  // Randomness \n  float randRef = rand(ref);\n  scale *= (1.0 - (uRandScaleFactor * randRef));\n  // Rotation\n  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);\n  float originalRotation = (1.0 - uRotation) * 2.0 * PI;\n  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;\n  // OverTime\n  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);\n\n  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;\n  vec2 rotatedPosition;\n  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;\n  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;\n  \n  mat4 instanceMatrix = mat4(\n    vec4(1.0, 0.0, 0.0, 0.0),\n    vec4(0.0, 1.0, 0.0, 0.0),\n    vec4(0.0, 0.0, 1.0, 0.0),\n    vec4(pos.x, pos.y, pos.z, 1.0)\n  );  \n\n  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n  mvPosition.xy += rotatedPosition;\n  gl_Position = projectionMatrix  * mvPosition;   \n`)({easeSize:this.easeSize})),e.addFragmentFinalCode((({easeOpacity:e="linearFadeOut"})=>`  \n  // if Particle is dead, hide it\n  if (v_LifeLeft <= 0.005 ) {\n    discard;\n  }\n\n  #ifdef USE_RANDOM_COLORING\n    float randVal = random(vRef); // Generate a random value based on the reference\n    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors\n  #else\n    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);\n  #endif\n\n  // Opacity over Life Time\n  float finalAlpha = ${e}(1. - v_LifeLeft);  \n  vec4 textureColor = texture2D(uTexture, vUv).rgba; \n  finalColor = textureColor.rgb * color.rgb;\n  finalAlpha = color.a * textureColor.a * finalAlpha;\n  \n  gl_FragColor = vec4(finalColor, finalAlpha);     \n\n`)({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach((e=>e.dispose())),super.dispose()}},gme=class{constructor(e,t,n,r){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=n,this.textureSize=function(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}(t);this.targetMesh="Mesh"===(null==r?void 0:r.type)&&r?r:this.getMesh(n,1);let{positions:i,dataTexture:o,dataTextureNormals:a}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(n,1));this.positionsTexture=o,this.positionsAttribute=i,this.directionsTexture=a}createPositions(e,t){let{positions:n,normals:r}=function(e,t){let n=new TK(e.geometry,e.material),r=[],i=[],o=new jG,a=new jG;null!==n.geometry.index&&(n.geometry=n.geometry.toNonIndexed());let s=new dme(n).build();for(let l=0;l<t;l++)s.sample(o,a),r.push(o.x,o.y,o.z),i.push(a.x,a.y,a.z);return{positions:new Float32Array(r),normals:new Float32Array(i)}}(t,e*e);return{dataTexture:hme(n,e),positions:n,dataTextureNormals:hme(r,e)}}getMesh(e,t){let n=null;switch(e){case"SphereEmitterShape":n=new sZ(.5*t,32,32);break;case"TorusEmitterShape":n=new lZ(.5*t,.3,15,40);break;case"ConeEmitterShape":n=new MJ(t,t,15);break;case"BoxEmitterShape":n=new FK(t,t,t);break;case"PlaneEmitterShape":n=new ZK(t,t),n.rotateX(-Math.PI/2);break;default:n=new sZ(t,32,32)}return new TK(n,new nK({color:16711680}))}applyToShader(e,t){this.size=(new jG).fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function vme(e){let t={...e},n=Aee.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let r={...n.shape,...t.shape},i={...n.renderMaterial,...t.renderMaterial};return{...n,...t,shape:r,renderMaterial:i}}var yme=class extends Hq{constructor(e,t){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new UZ,this.currentWorldPosition=new jG,this.systemQuaternion=new NG,this.worldGravity=new jG(0,0,0),this.directionAxis=new jG(0,0,0),this.colliderV3=new jG(0,0,0),this.colliderQuaternion=new NG(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let n=t.data;this.material=new mme(n.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:n.renderMaterial.color},uColor2:{value:n.renderMaterial.color2},uPosition:{value:new jG(0,0,0)},uEmissionData:{value:new jG(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new jG(0,0,0)},uWorldQuaternion:{value:new LG(0,0,0,1)},uRandScaleFactor:{value:n.randomScale??0},uRandRotationFactor:{value:n.randomRotation??0},uRotation:{value:n.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:n.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,n.renderMaterial.texture),this.init(n)}setTexture(e,t){let n=t.data;if("string"==typeof t){let n=this.shared.image(t),r=new OG(n.img);return r.needsUpdate=!0,void(e.uTexture.value=r)}if("string"!=typeof n){let t=new Image;t.onload=()=>{let n=new OG(t);n.needsUpdate=!0,e.uTexture.value=n};let r=new Blob([n],{type:"image/*"}),i=URL.createObjectURL(r);t.src=i}}updateGeometryAttributes(e,t){var n;let r=function(e){let t=new Float32Array(e*e*2);for(let n=0;n<e;n++)for(let r=0;r<e;r++){let i=n*e+r;t[2*i+0]=n/(e-1),t[2*i+1]=r/(e-1)}return t}(t);!(null==(n=this.emitterShape)?void 0:n.positionsAttribute)||e.geometry.setAttribute("ref",new H$(r,2))}applyWorldSpace(){if(!(this.system.started&&this.worldSpace&&this.positionSimRT&&this.velocitySimRT))return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){var n;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset)return void this.reset();this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let r=1e3/t,i=this.targetFPS/r,o=this.previousRatio+(i-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=o,this.previousRatio=o;let a=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=a,this.material.uniforms.uPosition.value=null==(n=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))?void 0:n.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0],t=this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX;if(e.destroyedInAction&&t&&this.init(vme({...this.system.data,colliderEntityId:null})),!e||e.destroyedInAction)return;e.getWorldPosition(this.colliderV3),0===this.colliderV3.y&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let n=e.data.size;this.colliderV3.fromArray(n),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;"size"===t[2]&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),"sizeEnd"===t[2]&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let n=(e,t)=>{let n=[...this.system.data.shape.size];n[e]=t,this.updateParticleState({shape:{...this.system.data.shape,size:n}})};"shape_size_0"===t[2]&&n(0,e),"shape_size_1"===t[2]&&n(1,e),"shape_size_2"===t[2]&&n(2,e),"speed"===t[2]&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/10),"gravity"===t[2]&&this.worldGravity.set(0,e/100,0),"noiseStrength"===t[2]&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),"noiseScale"===t[2]&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),"direction_x"===t[2]&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),"direction_y"===t[2]&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),"direction_z"===t[2]&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var t,n,r;if(this.positionSimRT&&this.velocitySimRT){if(this.shouldReInitGPUCompute(e)&&this.init(vme(this.system.data)),void 0!==e.life&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),void 0!==e.speed&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/10),void 0!==e.collisionBounce&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),void 0!==e.noiseStrength&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),void 0!==e.noiseScale&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),void 0!==e.noiseSeed&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),void 0!==e.randomMass&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),void 0!==(null==(t=e.renderMaterial)?void 0:t.size)){let t=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(t)}if(void 0!==(null==(n=e.renderMaterial)?void 0:n.spriteRotation)&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),void 0!==e.shape){let t=e.shape.size??this.system.data.shape.size,n=[Number(this.shared.getVariable(t[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(t[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(t[2],[this.uuid,"particles","shape_size_2"]))],i={...vme(this.system.data).shape,size:n};null==(r=this.emitterShape)||r.applyToShader(this.positionSimRT.material.uniforms,i)}if(void 0!==e.gravity&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),void 0!==e.direction){let t=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(t),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}void 0!==e.randomRotation&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),void 0!==e.randomScale&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(void 0!==e.forceIntensity&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),void 0!==e.forceDambing&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*dG.DEG2RAD,Number(e[1])*dG.DEG2RAD,Number(e[2])*dG.DEG2RAD],n=new Eq(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(n).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:n,colliderEntityId:r,shape:i,emitTimeDuration:o,emitTimeCycle:a,life:s,directionMode:l,noiseType:c}=e;return void 0!==t||void 0!==n||r||null===r||void 0!==a||void 0!==i||void 0!==s||void 0!==o||void 0!==l||void 0!==c}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:"infinity"===e.emitTimeCycle?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval((()=>{if(this.emitterShape){if(isNaN(this.emitterShape.positionsTexture.source.data.data[0]))return void this.init(e);clearInterval(t)}}),100);if(!this.emitterShape)return;let n=new lme(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),r=this.updateSimulationDefinition(e),i=n.addVariable("uCurrentPosition",r+"\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\nuniform sampler2D uOriginalPosition;\nuniform float uTime;\nuniform float uSpeed;     // update speed of the particles\nuniform vec3 uWorldOffset;    \nuniform vec4 uWorldQuaternion;\nuniform float uMaxLifeTime;\nuniform vec3 uEmitterSize;\nuniform float uFPSRatio;     // 1  for 60 FPS\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n        vec2(12.9898,78.233)))*\n        43758.5453123);\n}\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\nvec3 applyForce(vec3 force, float mass) {\n    vec3 acceleration = force / mass;\n    \n    return acceleration;\n  }\n  \n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;\n    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0\n    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active\n    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted\n    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);\n    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;\n    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided\n    float lifeTime = uMaxLifeTime;\n\n    // Calculate the position adjustment based on collision\n    //     if (collisionFlag > .5) {  \n    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0\n    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise\n    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);\n\n    // Update position based on collision or normal movement\n    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);\n    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);\n\n    // EMISSION RATE - BIRTH\n    // if (isSpawning == 1.0) {\n    // Better Approach to avoid If statement\n    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;\n    originalPosition = mix(originalPosition, newPosition, isSpawning);\n    position = mix(position, originalPosition, isSpawning);;\n    timeStart = mix(timeStart, uTime, isSpawning);\n\n    // Calculate timeLeft for life normalization\n    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);\n    float life_Normalize = timeLeft / lifeTime;\n\n    // Use isActive to blend between the calculated color and black\n    vec4 activeColor = vec4(position, life_Normalize);\n    // if (isActive == 1.0) {\n    gl_FragColor = mix(vec4(0.0), activeColor, isActive);\n\n}\n",this.emitterShape.positionsTexture),o=n.addVariable("uCurrentVelocity",r+"\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\nuniform sampler2D uOriginalPosition;\nuniform sampler2D uDirections;     \nuniform vec3 uDirectionsAxis;\nuniform vec4 uWorldQuaternion;\nuniform vec3 uGravity;        \nuniform float uNoiseStrength;     // Variation of the noise\nuniform float uNoiseScale;        // Scale of the noise\nuniform float uNoiseSeed;         // Seed of the noise\nuniform float particleSize;\nuniform float uSpeed;     // update speed of the particles\nuniform float uRandomMassFactor;\n\n// COLLIDER\nuniform vec3 uColliderPos;                // Collider Position\nuniform vec3 uColliderSize;               // Collider Dimension\nuniform vec4 uColliderQuaternion;         // Collider Rotation\nuniform vec4 uColliderQuaternionInvert;   // Collider Rotation\nuniform float uBounce;                    // Bounce factor\nuniform float uForceDamping;\nuniform float uForceIntensity;\n\n\n\n\n    vec3 mod289(vec3 x) {\n      return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec4 mod289(vec4 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec4 permute(vec4 x) {\n        return mod289(((x*34.0)+1.0)*x);\n    }\n    \n    vec4 taylorInvSqrt(vec4 r)\n    {\n    return 1.79284291400159 - 0.85373472095314 * r;\n    }\n    \n    vec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n    float snoise(vec3 v)\n    {\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n    \n    // Permutations\n    i = mod289(i);\n    vec4 p = permute( permute( permute(\n                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n    \n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857; // 1.0/7.0\n    vec3  ns = n_ * D.wyz - D.xzx;\n    \n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n    \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n    \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n    \n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n    \n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n    \n    //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    \n    // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n    }\n    \n    vec3 snoiseVec3( vec3 x ){\n    \n      float s  = snoise(vec3( x ));\n      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n      vec3 c = vec3( s , s1 , s2 );\n      return c;\n    \n    }\n    \n      \n    vec3 curlNoise( vec3 p, float seed){\n      p += seed;\n      const float e = .1;\n      vec3 dx = vec3( e   , 0.0 , 0.0 );\n      vec3 dy = vec3( 0.0 , e   , 0.0 );\n      vec3 dz = vec3( 0.0 , 0.0 , e   );\n    \n      vec3 p_x0 = snoiseVec3( p - dx );\n      vec3 p_x1 = snoiseVec3( p + dx );\n      vec3 p_y0 = snoiseVec3( p - dy );\n      vec3 p_y1 = snoiseVec3( p + dy );\n      vec3 p_z0 = snoiseVec3( p - dz );\n      vec3 p_z1 = snoiseVec3( p + dz );\n    \n      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n    \n      const float divisor = 1.0 / ( 2.0 * e );\n      return normalize( vec3( x , y , z ) * divisor );\n    \n    }\n\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n\nvec3 fbm_vec3(vec3 p, float frequency, float offset)\n{\n  return vec3(\n    cnoise((p+vec3(offset))*frequency),\n    cnoise((p+vec3(offset+20.0))*frequency),\n    cnoise((p+vec3(offset-30.0))*frequency)\n  );\n}\n\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n } \nvec3 applyForce(vec3 force, float mass) {\n  vec3 acceleration = force / mass;\n  \n  return acceleration;\n}\n\nvec4 conjugate(vec4 q) {\n  return vec4(q.w, -q.x, -q.y, -q.z);\n}\n\n// Function to compute the normal of the ellipsoid at a given point\nvec3 ellipsoidNormal(vec3 p, vec3 radii) {\n  return normalize(p / (radii * radii));\n}\n\nfloat friction = .3;\n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;\n    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;\n    float timeLeft = texture2D( uCurrentPosition, vUv ).w;\n    vec3 directions = texture2D( uDirections, vUv ).xyz;    \n    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;\n    float mass = rand(originalPosition.xy) * 0.5 + 0.5;\n    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active\n    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision\n\n    // Randomness Mass\n    mass = (1.0 - (uRandomMassFactor * mass));\n    \n    if (isActive == 1.0) {\n      // **************************************************************\n      // FORCES NOISES\n      // **************************************************************\n      #ifdef USE_CURL_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {\n          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;\n        }\n      #endif\n      // **************************************************************\n      #ifdef USE_SIMPLEX_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);\n          velocity *= uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {\n          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);\n        }\n      #endif\n      // ************************************************************** \n      #ifdef USE_FBM_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);\n          velocity *= uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      \n          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;\n        }\n      #endif\n\n      // COLLIDER\n      \n  #ifdef USE_COLLIDER\n    float restitution = max(uBounce * 2., .01); // Energy Loss\n    // SPHERE COLLIDER\n    // **************************************************************\n    #ifdef USE_SPHERE_COLLIDER       \n      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)\n      vec3 radii = uColliderSize;\n      // Adjust position relative to collider\n      vec3 relPos = position - uColliderPos;\n      // Apply rotation of the collider to the relative position\n      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n      // Scale relative position by radii (for ellipsoid collision detection)\n      vec3 scaledPos = relPos / radii;\n      // Calculate ellipsoidal distance\n      float dist = length(scaledPos); // Distance in terms of ellipsoid\n      \n      // Check for collision\n      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {\n          // Compute the normal at the collision point, accounting for particle size\n        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          \n        // Compute the normal at the collision point\n        vec3 normal = ellipsoidNormal(adjustedPos, radii);\n        // Rotate the normal back to world space\n        normal = applyQuaternionToVector(uColliderQuaternion, normal);\n        // Reflect the velocity vector off the normal\n        velocity = reflect(velocity, normal) * restitution;\n\n        collisionFlag = 1.0;\n      } else {\n        collisionFlag = 0.0;\n      }\n    #endif\n\n    // BOX COLLIDER or PLANE COLLIDER \n    // **************************************************************\n    #ifdef USE_BOX_COLLIDER\n      // Box dimensions and repulsion variables\n      vec3 boxHalfSize = uColliderSize / 2.0;\n      // Convert world position to box's local space\n      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n      // Collision detection\n      vec3 localDistance = abs(localPos) - boxHalfSize;\n      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    \n\n      // Collision Detected\n      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      \n        // Find the nearest face normal for bounce direction\n        vec3 normal;\n        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {\n            normal = vec3(sign(localPos.x), 0.0, 0.0);\n        } else if (localDistance.y > localDistance.z) {\n            normal = vec3(0.0, sign(localPos.y), 0.0);\n        } else {\n            normal = vec3(0.0, 0.0, sign(localPos.z));\n        }            \n        // Rotate normal back to world space\n        normal = applyQuaternionToVector(uColliderQuaternion, normal);      \n        // Reflect velocity and apply repulsion force\n        velocity = reflect(velocity, normal) * restitution;\n        \n        collisionFlag = 1.0;\n      } else {\n        collisionFlag = 0.0;\n      }\n    #endif      \n  #endif      \n  // END COLLIDER    \n\n      // ATTRACTION\n      \n  #ifdef USE_ATTRACTOR\n\n      #ifdef USE_SPHERE_COLLIDER      \n        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)\n        vec3 radii = uColliderSize;\n        // Adjust position relative to collider\n        vec3 relPos = position - uColliderPos;\n        // Apply rotation of the collider to the relative position\n        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n        // Scale relative position by radii (for ellipsoid collision detection)\n        vec3 scaledPos = relPos / radii;\n        // Calculate ellipsoidal distance\n        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid\n        float insideCheck = 1.0;\n\n      #endif\n\n\n      #ifdef USE_BOX_COLLIDER\n        // Box dimensions\n        vec3 boxHalfSize = uColliderSize / 2.0;\n        // Convert world position to box's local space\n        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n        vec3 localDistance = abs(localPos) - boxHalfSize;\n        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));\n        float insideCheck = particleSize;\n      #endif      \n  \n      // Apply vortex force inside the Helper\n      #ifdef USE_FORCE_LOCAL_SPACE\n        if (distToSurface <= insideCheck ) {    \n            // Define parameters for the attractor field\n            #ifdef USE_SPHERE_COLLIDER      \n              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed\n            #endif\n\n            #ifdef USE_BOX_COLLIDER\n              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed\n              #endif\n\n            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)\n          \n            // Use the same radii calculation code as for the collider\n            vec3 attractorRadii = uColliderSize;\n            // Adjust position relative to attractor center\n            vec3 relPos = position - uColliderPos;\n            // Apply rotation of the collider to the relative position\n            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n            // Scale relative position by radii (for ellipsoid attraction)\n            vec3 scaledPos = relPos / attractorRadii;\n\n            // Calculate ellipsoidal distance as attractor radius\n            float attractorRadius = length(scaledPos);\n            // Calculate the distance from the attractor center\n            vec3 relativePosition = position - uColliderPos;\n            // Calculate the force vector towards the attractor center\n            vec3 attractorForce = normalize(relativePosition) * attractorStrength;\n            // Apply the attractor force to the particle\n            velocity -= attractorForce;\n            // Attenuate the particle's velocity\n            velocity *= attractorDamping;\n        }\n      #else \n            // Calculate the distance from the attractor center\n            vec3 relativePosition = position - uColliderPos;\n            // Calculate the force vector towards the attractor center\n            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;\n            // Apply the attractor force to the particle\n            velocity -= attractorForce;\n            // Attenuate the particle's velocity\n            velocity *= uForceDamping;\n      #endif    \n  #endif      \n  \n      // VORTEX\n      \n  #ifdef USE_VORTEX\n    // Box dimensions\n    vec3 boxHalfSize = uColliderSize / 2.0;\n    // Convert world position to box's local space\n    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n    vec3 localDistance = abs(localPos) - boxHalfSize;\n    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));\n\n    // Apply vortex force inside the box\n    if (distToSurface <= particleSize) {\n      float vortexStrength = uForceIntensity;\n      vec3 localTopCenter = vec3(0.0, 0., 0.0);\n\n      // Transform the local top center to the world space\n      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);\n      // Calculate the vector from particle to vortex center\n      vec3 vortexVector = vortexCenter - position;\n\n      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector\n      // Note: important to add a tiny z component to the up vector to avoid instability\n      vec3 upVector = vec3(0.0, 1.0, 0.01);\n      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));\n      rotationAxis = normalize(rotationAxis);\n\n      // Add rotational component to velocity\n      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; \n\n      vec3 rotationVelocity = rotationAxis * rotationSpeed;\n      // velocity += rotationVelocity * 0.005 ;\n      velocity = rotationVelocity * 0.005 ;\n\n      // Calculate vortex force\n      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;\n      // Apply the vortex force to the particle\n      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);\n      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);\n    }\n  #endif      \n\n    } \n    // End isActive\n\n    // SPAWN BIRTH \n    // **************************************************************\n    // if (isSpawning == 1.)\n    #ifdef USE_NORMALS\n      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);\n    #else\n      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    \n    #endif\n    \n    // if (collisionFlag == 0.0)\n    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);\n\n    gl_FragColor = vec4(velocity, collisionFlag);\n}\n",this.emitterShape.directionsTexture),a=n.addVariable("uCurrentEmissionRate","\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\n\nuniform sampler2D uIndex; // Texture with corresponding index\nuniform float uLastIndexEmitted; // Last emitted index\nuniform float uParticlesToEmit; // Number of particles to emit on that frame\nuniform float uTime;\n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    float particleIndex = texture(uIndex, vUv).x;\n    float timeLeft = texture2D( uCurrentPosition, vUv ).w;\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active\n    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;\n\n\n    // ********** Detect Colision to Create a flag and use it in position **********\n    // We are doing this here, so\n\n    // ********** Emit Particles **********\n    // X = isSpawning 0.0 or 1.0\n    // Y = isActive 0.0 or 1.0\n    // Check if the vertex index is between the first value and the last value\n    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {\n    //     // Emit a particle by writing 1 to the red channel of the color output\n    //     // r: 1. == emit the particle\n    //     // g: 1. == particle is now active\n    //     timeStart = uTime;\n    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);\n    // } else {\n    //     // The Particle is either already emitted or not in the range of the particles to emit\n    //     // Do not emit a particle by writing 0 to the red channel of the color output        \n    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);\n    // }\n    // Determine if the particle is within the emission range\n    float emitLowerBound = step(uLastIndexEmitted, particleIndex);\n    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);\n    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise\n\n    // Set timeStart and color\n    timeStart = mix(timeStart, uTime, emitParticle);\n    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);\n\n\n}\n",function(e){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=0,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let n=new U$(t,e,e,WV,zV);return n.needsUpdate=!0,n}(this.emitterShape.textureSize));n.setVariableDependencies(i,[i,o,a]),n.setVariableDependencies(o,[i,o,a]),n.setVariableDependencies(a,[i,o,a]);let s=function({size:e}){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=r,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let n=new U$(t,e,e,WV,zV);return n.needsUpdate=!0,n}({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new jG(0,0,0)},uWorldQuaternion:{value:new LG(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new jG(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};i.material.uniforms=l;let c=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(c),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let u=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),d={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new LG(0,0,0,1)},uColliderPos:{value:new jG(0,0,0)},uColliderSize:{value:new jG(0,0,0)},uForceIntensity:{value:u?u.forceIntensity:0},uForceDamping:{value:u?u.forceDambing:0},uColliderQuaternion:{value:new LG(0,0,0,1)},uColliderQuaternionInvert:{value:new LG(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/10}};o.material.uniforms=d;let h={uIndex:{value:s},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};a.material.uniforms=h;let p=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],A={...vme(this.system.data).shape,size:p};this.emitterShape.applyToShader(i.material.uniforms,A),n.init(),this.gpuCompute=n,this.positionSimRT=i,this.velocitySimRT=o,this.emissionRateSimRT=a,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){return[Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]))]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let t=this.system.getColliderData(e.colliderEntityId);switch(null==t?void 0:t.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0}let n=null==t?void 0:t.colliderType;"sphere"===n&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),"box"===n&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),"helper"===(null==t?void 0:t.forceRange)&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}"normals"===e.directionMode&&(this.simFeaturesDefinition.USE_NORMALS=!0),"curl"===e.noiseType&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),"simplex"===e.noiseType&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),"fbm"===e.noiseType&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[n,r]of Object.entries(this.simFeaturesDefinition))r&&(t+=`#define ${n}\n`);return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let n=new jG(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if("MeshEmitterShape"===e.type){let r=null;return this.system.context.scene.traverseEntity((t=>{t.uuid===e.fromMeshId&&(r=t)})),r?new gme(n,t,e.type,r):new gme(n,t,"SphereEmitterShape")}return new gme(n,t,e.type)}createPrimaryEmitter(e){let t,n=e*e;return t=new K$(new ZK(1,1,1),this.material,n),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:t,loopDuration:n=0}){return Math.ceil(e*(t+n))}dispose(){var e,t,n;!this.gpuCompute||(null==(t=null==(e=this.rootObject)?void 0:e.parent)||t.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),null==(n=this.emitterShape)||n.dispose())}GoEmitSomeParticles(e,t){let n=e-this.lastEmitTime,r=1/t;if(n>=r){let t=Math.max(1,Math.floor(n/r));return this.lastEmitTime=e,this.emittedParticlesAmount+t>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=t,t}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(vme(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},bme=class extends Use{constructor(e,t,n){super(e,t),this.type="ParticleSystem",this.geometry=new mK,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=e=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(e))},this.context=n,this.data={...t,...vme(t)},this.geometry.setAttribute("position",new lK([],3)),this.material=new nK({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new yme(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t="one_time"===this.data.emitTimeCycle;if(("loop"===this.data.emitTimeCycle||t)&&this.currentLoopTime>1e3*this.data.emitTimeDuration&&(this.stopped||(this.stop(),t||this.start(1e3*this.data.emitTimeDelay))),this.emitter&&this.started){let t=this.actualTime/1e3;this.emitter.update(t,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some((t=>t.identity===e))}getColliderData(e){let t=this.colliderEntities.find((t=>t.identity===e));return t?t.data:null}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),J8(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...C8.drop(e,1).props}}),J8(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...C8.drop(e,1).props}})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(void 0!==e.colliderEntityId&&null!==e.colliderEntityId){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}null===e.colliderEntityId&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var t;this.currentLoopTime=0,e?this.timeoutId=window.setTimeout((()=>{this.start(0)}),e):(this.started=!0,this.stopped=!1,this.isFrozen=!1,null==(t=this.emitter)||t.startEmitting(this.actualTime/1e3))}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,null==(e=this.emitter)||e.stopEmitting(),clearTimeout(this.timeoutId)}reset(){var e;this.started=!1,this.stopped=!1,null==(e=this.emitter)||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};var wme=function(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch{}}();function xme(e,t,n){return"Mesh"===t.type?function(e,t,n){var r;let i;return void 0!==wme&&((null==(r=null==t?void 0:t.geometry)?void 0:r.subdivisions)??0)>wme&&(t.geometry.subdivisions=wme),"TextGeometry"===t.geometry.type?new Vde(e,t,n):"InputGeometry"===t.geometry.type?new tme(e,t,n):(i="SubdivGeometry"===t.geometry.type?new bde(e,t,n):"PathGeometry"===t.geometry.type?new eme(e,t,n):"VectorGeometry"===t.geometry.type?new Zfe(e,t,n):"BooleanGeometry"===t.geometry.type?new Ehe(e,t,n):"UIGeometry"===t.geometry.type?new sme(e,t,n):new Ade(e,t,n),i)}(e,t,n):"Empty"===t.type?new Rhe(e,t):"Particle"===t.type?new bme(e,t,n):"ParticleCollider"===t.type?new Uhe(e,t,n):"Splat"===t.type?new Rhe(e,t):"Bone"===t.type?new ame(e,t):"Page"===t.type?new $fe(e,t,n):"PointLight"===t.type?new Jfe(e,t,n):"SpotLight"===t.type?new $Ae(e,t,n):"DirectionalLight"===t.type?new qAe(e,t,n):"Component"===t.type||"Instance"===t.type?new nme(e,t,n):iee.is(t.type)?new xhe(e,t):new Rhe(e,t)}function Cme(e,t){let n=!1,r=t.getLayersOfType("transmission"),i=t.getLayersOfType("outline");return i.length>0&&(e.layers.set(8),r.length>0&&e.layers.enable(3),n=!0,mde(e),fde(e)),0===r.length&&0===i.length&&e.layers.set(0),e instanceof lde&&e.needsAO&&e.layers.enable(5),n}function Sme(e,t){if(!t.layers)return!1;let n=!1,r=t.getLayersOfType("transmission").filter((e=>e.data.visible)),i=t.getLayersOfType("outline").filter((e=>e.data.visible));return r.length>0&&(e.layers.set(3),i.length>0&&e.layers.enable(8),n=!0),0===r.length&&0===i.length&&e.layers.set(0),e.needsAO&&e.layers.enable(5),n}hie.createEntity=xme,hie.changeEntityProptotype=function(e,t,n){let r=xme(e.identity,t,n),i=e.children,o=e.attachedPaths,a=e.parent,s=e.component,l=e.instances,c=e.overrideData,u=e.uuid,d=e.stateSelection;e.dispose();for(let h of Object.keys(e))delete e[h];Object.setPrototypeOf(e,Object.getPrototypeOf(r));for(let h of Object.keys(r))e[h]=r[h];e.children=[...e.children,...i],e.attachedPaths=o,e.parent=a,e.component=s,e.instances=l,e.uuid=u,e.overrideData=c,e.updateState(e.data,n),d&&e.changeSelectedState(d,n),e.resetBBoxNeedsUpdate()},hie.Cloner=rhe;var Bme=new b0,_me=new gq,Eme=new mq;function Mme(e,t,n,r=!1){let i=e.cloner;if(i)for(let o of i.children){let i=_me.copy(o.matrixWorld).invert(),a=Eme.copy(t.ray).applyMatrix4(i),s=e.matrixWorld;a.applyMatrix4(s);let l=Bme;l.set(a.origin,a.direction),l.near=t.near,l.far=t.far;let c=l.intersectObject(e,!1);c.length>0&&n.push({...c[0],object:r?o:e})}}var Pme=class{constructor(){this._constraints=new Map}setConstraint(e,t){null===t?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach(((n,r)=>{let i=[r,n],o=n;for(;this._constraints.has(o)&&(o=this._constraints.get(o),!i.includes(o));)t.has(o)||i.push(o);for(let a=i.length-2;a>=0;a--)if(!t.has(i[a])){let n=e.find(i[a]);n&&n.applyPathSnapping(e),t.add(i[a])}}))}findDependency(e,t){let n=e;for(;this._constraints.has(n);)if(n=this._constraints.get(n),n===t)return!0;return!1}},Tme=class{};function Dme(e){let t,n,r,i,o,a,s,l,c,u,d,h,p,A,f,m;function g(e,t,a){let s=new Float32Array(u,o,3*n);r=0;let l=new Uint32Array(u,i,n);for(let n=0;n<a.length-1;n++){let i=t[n],o=e[n].elements,c=i.filter((e=>e.enabled&&"Include"===e.mode)).map((e=>"Box"===e.type?y(e):w(e))),u=i.filter((e=>e.enabled&&"Exclude"===e.mode)).map((e=>"Box"===e.type?y(e):w(e)));for(let e=a[n];e<a[n+1];e++){let t=p[3*e],n=p[3*e+1],i=p[3*e+2];if((0===c.length||v(t,n,i,c))&&(0===u.length||!v(t,n,i,u))){let a=1/(o[3]*t+o[7]*n+o[11]*i+o[15]);s[3*r]=(o[0]*t+o[4]*n+o[8]*i+o[12])*a,s[3*r+1]=(o[1]*t+o[5]*n+o[9]*i+o[13])*a,s[3*r+2]=(o[2]*t+o[6]*n+o[10]*i+o[14])*a,l[r]=e,r++}}}}function v(e,t,n,r,i){return r.some((r=>{let i=function(e,t,n,r,i){let o=e-i[0],a=t-i[1],s=n-i[2],l=1/(r[3]*o+r[7]*a+r[11]*s+r[15]);return{x:(r[0]*o+r[4]*a+r[8]*s+r[12])*l+i[0],y:(r[1]*o+r[5]*a+r[9]*s+r[13])*l+i[1],z:(r[2]*o+r[6]*a+r[10]*s+r[14])*l+i[2]}}(e,t,n,r.invRotationMatrix,r.cropCenter);return Array.isArray(r)?function(e,t,n,r){return e>=r[0]&&e<=r[3]&&t>=r[1]&&t<=r[4]&&n>=r[2]&&n<=r[5]}(i.x,i.y,i.z,r):function(e,t,n,r){let i=(e-r.cropCenter[0])*r.invRadiusX,o=(t-r.cropCenter[1])*r.invRadiusY,a=(n-r.cropCenter[2])*r.invRadiusZ;return i*i+o*o+a*a<=1}(i.x,i.y,i.z,r)}))}function y(e){let t=e.cropSize[0]/2,n=e.cropSize[1]/2,r=e.cropSize[2]/2,i=[e.cropCenter[0]-t,e.cropCenter[1]-n,e.cropCenter[2]-r,e.cropCenter[0]+t,e.cropCenter[1]+n,e.cropCenter[2]+r],o=b(e.cropRotation);return Object.assign(i,{invRotationMatrix:o,cropCenter:e.cropCenter})}function b(e){let t=[],n=e[0]*Math.PI/180,r=e[1]*Math.PI/180,i=e[2]*Math.PI/180,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i),d=o*c,h=o*u,p=a*c,A=a*u;return t[0]=s*c,t[1]=-s*u,t[2]=l,t[4]=h+p*l,t[5]=d-A*l,t[6]=-a*s,t[8]=A-d*l,t[9]=p+h*l,t[10]=o*s,t[12]=0,t[13]=0,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,t}function w(e){let t=2/e.cropSize[0],n=2/e.cropSize[1],r=2/e.cropSize[2],i=b(e.cropRotation);return{invRadiusX:t,invRadiusY:n,invRadiusZ:r,cropCenter:e.cropCenter,invRotationMatrix:i}}e.onmessage=b=>{if(b.data.getCroppedIndexes){let t=new Uint32Array(function(e,t){let n=[],r=t.filter((e=>e.enabled&&"Include"===e.mode)).map((e=>"Box"===e.type?y(e):w(e))),i=t.filter((e=>e.enabled&&"Exclude"===e.mode)).map((e=>"Box"===e.type?y(e):w(e))),o=e.length;for(let a=0;a<o;a+=3){let t=e[a],o=e[a+1],s=e[a+2];(0===r.length||v(t,o,s,r))&&(0===i.length||!v(t,o,s,i))||n.push(a/3)}return n}(new Float32Array(b.data.positions),b.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:t},[t])}else if(b.data.positions)d=b.data.positions,p=new Float32Array(d),f=b.data.meshMatrixWorlds,m=b.data.cropsArray,A=b.data.meshIndexIntervals,g(f,m,A),e.postMessage({sortSetupComplete:!0});else if(b.data.sort||b.data.newMatrixWorlds||b.data.newCropsArray)(b.data.newMatrixWorlds||b.data.newCropsArray)&&(m=b.data.newCropsArray||m,f=b.data.newMatrixWorlds||f,g(f,m,A)),function(d){let p,A=new Float64Array(u,a,16);for(let e=0;e<16;e++)A[e]=d[e];if(r>1){t.exports.sortIndexes(i,o,c,a,s,l,h.DepthMapRange,r);let e=new Uint32Array(r);p=e.buffer,e.set(new Uint32Array(u,l,r))}else if(1===r){let e=new Uint32Array(r);e[0]=new Uint32Array(u,i,n)[0],p=e.buffer}else p=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:p},[p])}(b.data.sort.view,b.data.sort.cameraPosition);else if(b.data.init){h=b.data.init.Constants,n=b.data.init.splatCount;let r=h.BytesPerInt,d=3*h.BytesPerFloat,p=new Uint8Array(b.data.init.sorterWasmBytes),A=n*(r+d)+(n*h.BytesPerInt*2+h.DepthMapRange*h.BytesPerInt*2)+32*h.MemoryPageSize,f=Math.floor(A/h.MemoryPageSize)+1,m={module:{},env:{memory:new WebAssembly.Memory({initial:2*f,maximum:3*f,shared:!0})}};WebAssembly.compile(p).then((e=>WebAssembly.instantiate(e,m))).then((p=>{t=p,i=0,o=n*r,a=o+n*d,c=a+16*h.BytesPerFloat*2,s=c+n*h.BytesPerInt,l=s+h.DepthMapRange*h.BytesPerInt,u=m.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})}))}}}uQ(Tme,"DepthMapRange",65536),uQ(Tme,"MemoryPageSize",65536),uQ(Tme,"BytesPerFloat",4),uQ(Tme,"BytesPerInt",4);var Fme=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(n){return e[0]=n,t[0]}}(),Ime=function(e,t,n,r){return e+(t<<8)+(n<<16)+(r<<24)},kme=new hG;function Ome(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{if(!1===n.visible)return!0;"Splat"===n.type&&(t=!0)})),t}var Lme,Rme,Ume,zme=class extends TK{constructor(e,t,n,r,i=!1,o=1,a,s){super(n,r),this.splatCount=t,this.meshIndexIntervals=a,this.meshMatrixWorlds=s,this.splatBuffers=e,this.geometry=n,this.material=r,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=i,this.devicePixelRatio=o,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,n=!1,r=1,i,o){let a=zme.buildGeomtery(t),s=zme.buildMaterial(i);return new zme(e,t,a,s,n,r,i,o)}static buildMaterial(e){let t={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new hG},viewport:{type:"v2",value:new hG},basisViewport:{type:"v2",value:new hG},debugColor:{type:"v3",value:new PG},covariancesTextureSize:{type:"v2",value:new hG(1024,1024)},centersColorsTextureSize:{type:"v2",value:new hG(1024,1024)},orthoZoom:{type:"f",value:-1}};return new RK({uniforms:t,vertexShader:"\n            precision highp float;\n            #include <common>\n\n            attribute uint splatIndex;\n\n            uniform highp sampler2D covariancesTexture;\n            uniform highp usampler2D centersColorsTexture;\n            uniform vec2 focal;\n            uniform vec2 viewport;\n            uniform vec2 basisViewport;\n            uniform vec2 covariancesTextureSize;\n            uniform vec2 centersColorsTextureSize;\n\t\t\t\t\t\tuniform highp sampler2D meshMatrixWorldsTexture;\n\t\t\t\t\t\tuniform uint meshIndexIntervals[257];\n\t\t\t\t\t\tuniform float orthoZoom;\n\n            varying vec4 vColor;\n            varying vec2 vUv;\n\n            varying vec2 vPosition;\n\n            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\n            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));\n            const uvec4 shift4 = uvec4(0, 8, 16, 24);\n            vec4 uintToRGBAVec (uint u) {\n               uvec4 urgba = mask4 & u;\n               urgba = urgba >> shift4;\n               vec4 rgba = vec4(urgba) * encodeNorm4;\n               return rgba;\n            }\n\n            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {\n                vec2 samplerUV = vec2(0.0, 0.0);\n                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;\n                samplerUV.y = float(floor(d)) / dimensions.y;\n                samplerUV.x = fract(d);\n                return samplerUV;\n            }\n\n            void main () {\n                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));\n                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));\n                vColor = uintToRGBAVec(sampledCenterColor.r);\n\n                vPosition = position.xy * 2.0;\n\n\t\t\t\t\t\t\t\tuint meshIndex;\n\t\t\t\t\t\t\t\tfor (int i = 1; i < 257; i++) {\n\t\t\t\t\t\t\t\t\tif (splatIndex < meshIndexIntervals[i]) {\n\t\t\t\t\t\t\t\t\t\tmeshIndex = uint(i - 1);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfloat strideMulmeshIndex = float(4u*meshIndex);\n\t\t\t\t\t\t\t\tfloat meshMatrixWorldsTextureLength = float(256*4);\n\n\t\t\t\t\t\t\t\tmat4 modelMat = mat4(\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmat4 modelViewMat = viewMatrix * modelMat;\n\t\t\t\t\t\t\t\tvec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); \n                vec4 clipCenter = projectionMatrix * viewCenter;\n\n                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;\n                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;\n                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;\n\n                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);\n                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);\n\n                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix\n                mat3 Vrk = mat3(\n                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,\n                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,\n                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z\n                );\n                float s = 1.0 / (viewCenter.z * viewCenter.z);\n\n                mat3 W = transpose(mat3(modelViewMat));\n                mat3 T = orthoZoom > 0.0 ? W : W * mat3(\n\t\t\t\t\t\t\t\t\tfocal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,\n\t\t\t\t\t\t\t\t\t0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,\n\t\t\t\t\t\t\t\t\t0., 0., 0.\n\t\t\t\t\t\t\t\t);\n                mat3 cov2Dm = transpose(T) * Vrk * T;\n                cov2Dm[0][0] += 0.3;\n                cov2Dm[1][1] += 0.3;\n\n                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because\n                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],\n                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't\n                // need cov2Dm[1][0] because it is a symetric matrix.\n                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);\n\n                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;\n\n                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix\n                // so that we can determine the 2D basis for the splat. This is done using the method described\n                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html\n                //\n                // This is a different approach than in the original work at INRIA. In that work they compute the\n                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle\n                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance\n                // matrix (called 'conic') to determine fragment opacity.\n                float a = cov2Dv.x;\n                float d = cov2Dv.z;\n                float b = cov2Dv.y;\n                float D = a * d - b * b;\n                float trace = a + d;\n                float traceOver2 = 0.5 * trace;\n                float term2 = sqrt(trace * trace / 4.0 - D);\n                float eigenValue1 = traceOver2 + term2;\n\t\t\t\t\t\t\t\tfloat eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value\n\n                const float maxSplatSize = 1024.0;\n                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));\n                // since the eigen vectors are orthogonal, we derive the second one from the first\n                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);\n                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);\n                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);\n\n                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;\n\n\t\t\t\t\t\t\t\tif (orthoZoom > 0.0) {\n\t\t\t\t\t\t\t\t\tndcOffset *= orthoZoom;\n\t\t\t\t\t\t\t\t}\n\n                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);\n            }",fragmentShader:"\n            precision highp float;\n            #include <common>\n\n            uniform vec3 debugColor;\n\n            varying vec4 vColor;\n            varying vec2 vUv;\n\n            varying vec2 vPosition;\n\t\t\t\t\t\tlayout(location = 1) out vec4 gVelocity; \n\n            void main () {\n                // compute the negative squared distance from the center of the splat to the\n                // current fragment in the splat's local space.\n                float A = -dot(vPosition, vPosition);\n                if (A < -4.0) discard;\n                vec3 color = vColor.rgb;\n                A = exp(A) * vColor.a;\n                gl_FragColor = vec4(color.rgb, A);\n\t\t\t\t\t\t\t\tgVelocity = vec4(0.0); // so it is ignored by TAA\n            }",transparent:!0,alphaTest:1,blending:OQ,depthTest:!0,depthWrite:!1,side:IQ})}static buildGeomtery(e){let t=new mK;t.setIndex([0,1,2,0,2,3]);let n=new Float32Array(12),r=new oK(n,3);t.setAttribute("position",r),r.setXYZ(0,-1,-1,0),r.setXYZ(1,-1,1,0),r.setXYZ(2,1,1,0),r.setXYZ(3,1,-1,0),r.needsUpdate=!0;let i=(new e0).copy(t),o=new Uint32Array(e),a=new H$(o,1,!1);return a.setUsage(35048),i.setAttribute("splatIndex",a),i.instanceCount=e,i}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach((e=>e.buildPreComputedBuffers())),this.covariances=new Float32Array(6*this.splatCount),this.colors=new Uint8Array(4*this.splatCount),this.centers=new Float32Array(3*this.splatCount);let e=0,t=0,n=0;for(let r of this.splatBuffers){let i=r.nsplats;this.colors.subarray(e,e+4*i).set(r.colorsA),e+=4*i,this.centers.subarray(t,t+3*i).set(r.decoded.xyz.denormDequant().data),t+=3*i,this.covariances.subarray(n,n+6*i).set(new Float32Array(r.precomputedCovarianceBufferData)),n+=6*i}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new hG(4096,1024);for(;t.x*t.y*2<6*e;)t.y*=2;let n,r,i=new hG(4096,1024);for(;i.x*i.y*4<4*e;)i.y*=2;if(this.halfPrecisionCovariancesOnGPU){r=new Uint16Array(t.x*t.y*2);for(let e=0;e<this.covariances.length;e++)r[e]=Q0.toHalfFloat(this.covariances[e]);n=new U$(r,t.x,t.y,JV,NV)}else r=new Float32Array(t.x*t.y*2),r.set(this.covariances),n=new U$(r,t.x,t.y,JV,zV);n.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=n,this.material.uniforms.covariancesTextureSize.value.copy(t);let o=new Uint32Array(i.x*i.y*4);for(let c=0;c<e;c++){let e=4*c,t=3*c,n=4*c;o[n]=Ime(this.colors[e],this.colors[e+1],this.colors[e+2],this.colors[e+3]),o[n+1]=Fme(this.centers[t]),o[n+2]=Fme(this.centers[t+1]),o[n+3]=Fme(this.centers[t+2])}let a=new U$(o,i.x,i.y,eW,UV);a.internalFormat="RGBA32UI",a.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=a,this.material.uniforms.centersColorsTextureSize.value.copy(i);let s=new Float32Array(4096);for(let c=0;c<this.meshMatrixWorlds.length;c++)s.set(this.meshMatrixWorlds[c].elements,16*c);let l=new U$(s,1024,1,WV,zV);l.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=l,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:r,texture:n,size:t},centerColors:{data:o,texture:a,size:i},meshMatrixWorlds:{data:s,texture:l}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,n,r){this.splatCount>0&&(kme.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(kme),this.material.uniforms.basisViewport.value.set(2/kme.x,2/kme.y),this.material.uniforms.focal.value.set(t,n),this.material.uniforms.orthoZoom.value=r,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},Nme=new Promise((e=>{Lme=e})),jme=!1;function Hme(){if(!jme)return Rme||(Rme=async function(){let e=await nF((()=>import("./gaussian-splat-compression-BPhgiFDC.js")),[]);Lme(e),jme=!0}(),Rme)}Nme.then((e=>Ume=e));var Qme=class{constructor(e={}){uQ(this,"updateView",function(){let e=new gq,t=[],n=new jG(0,0,-1),r=new jG(0,0,-1),i=new jG,o=new jG;return function(a=!1,s){let l=this.updateMatrixWorldsInWorkerIfNeeded(),c=this.cropsChanged();if(!a){r.set(0,0,-1).applyQuaternion(s.quaternion);let e=!1,t=!1;if(r.dot(n)<=.95&&(e=!0),o.copy(s.position).sub(i).length()>=1&&(t=!0),!(e||t||l||c||this.needsInitialRender))return}this.needsInitialRender=!1,i.copy(s.position),n.copy(r),e.copy(s.matrixWorld).invert(),e.premultiply(this.dummyPerspectiveMatrix),t[0]=s.position.x,t[1]=s.position.y,t[2]=s.position.z;let u={sort:{view:e.elements,cameraPosition:t,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...l?{newMatrixWorlds:this.meshMatrixWorlds}:{},...c?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=u:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(u))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=(new gq).makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let n=new hG;null!==this.splatMesh&&this.splatMesh.getSplatCount()>0&&(e.getSize(n),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*n.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*n.y*.45,this.splatMesh.updateUniforms(n,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=(new jG).fromArray(e.position)),e.orientation&&(e.orientation=(new NG).fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity((e=>{"Splat"===e.data.type&&t.push(e)})),this.splatMesh&&this.splatMesh.dispose(),0===t.length)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map((e=>e.matrixWorld)),this.meshMatrixWorldsOld=t.map((e=>e.matrixWorld.clone())),this.cropsArray=t.map((e=>e.data.crops.map((e=>e.data))));let n=t.map((e=>new Ume.GSplineBuffer(new Uint8Array(e.data.buffer).buffer))),r=0,i=[0];for(let o of n)r+=o.getSplatCount(),i.push(r);return this.setupSplatMesh(n,r,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,i,this.meshMatrixWorlds),this.setupSortWorker(r),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,16*t);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,!this.meshMatrixWorlds.every(((e,t)=>e.equals(this.meshMatrixWorldsOld[t])))&&(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map((e=>e.clone())),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach(((t,n)=>{var r;t.data.crops.forEach(((t,r)=>{void 0===this.cropsArray[n][r]?(e=!0,this.cropsArray[n][r]=t.data):Object.entries(t.data).forEach((([t,i])=>{var o;(Array.isArray(i)&&i.some(((e,i)=>e!==this.cropsArray[n][r][t][i]))||i!==(null==(o=this.cropsArray[n][r])?void 0:o[t]))&&(e=!0,this.cropsArray[n][r][t]=i)}))})),t.data.crops.length!==(null==(r=this.cropsArray[n])?void 0:r.length)&&(this.cropsArray[n].length=t.data.crops.length,e=!0)})),e}setupSplatMesh(e,t,n=new jG,r=new NG,i=!1,o=1,a,s){this.splatMesh=zme.buildMesh(e,t,i,o,a,s),this.splatMesh.position.copy(n),this.splatMesh.quaternion.copy(r),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(e,t,n)=>this.update(e,n)}setupSortWorker(e){this.sortWorker=function(e){let t=new Worker(URL.createObjectURL(new Blob(["(",Dme.toString(),")(self)"],{type:"application/javascript"}))),n=atob("AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL"),r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return t.postMessage({init:{sorterWasmBytes:r.buffer,splatCount:e,Constants:{BytesPerFloat:Tme.BytesPerFloat,BytesPerInt:Tme.BytesPerInt,DepthMapRange:Tme.DepthMapRange,MemoryPageSize:Tme.MemoryPageSize}}}),t}(e),this.sortWorker.onmessage=e=>{var t;e.data.sortDone?(this.sortRunning=!1,null==(t=this.splatMesh)||t.updateIndexes(new Uint32Array(e.data.indexesBuffer)),this.lastSortTime=e.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):e.data.sortCanceled?this.sortRunning=!1:e.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):e.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){null!==this.splatMesh&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}},Vme=new nK;Vme.wireframe=!0;var Wme=new jG,Gme=class extends I${constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new Pme,this.invisibleObjects=new Rhe("jflkdsafjasdifjaslk",{...tte.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new $fe("fdasfa",{...ute.defaultData,name:""},{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=function(e){let t=!1;return e.traverseEntity((e=>{if(e instanceof lde)if(Array.isArray(e.material))for(let n=0;n<e.material.length;n++)Sme(e,e.material[n])&&(t=!0);else Sme(e,e.material)&&(t=!0)})),t}(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=function(e){let t=!1;return e.traverseEntity((e=>{if(e instanceof lde)if(Array.isArray(e.material))for(let n=0;n<e.material.length;n++)Cme(e,e.material[n])&&(t=!0);else Cme(e,e.material)&&(t=!0)})),t}(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),n=this.entityIdentityToEntity[t];n&&(e.uuid=n.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof $fe&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(void 0===t)return;let n=[],r=t;for(;r!==this;){let e=r;r=r.parent;let t=r.children.indexOf(e);n.splice(0,0,t)}return{entity:t,sortKey:n}}getAllSorted(e){let t=[];for(let n of e){let e=this.getWithSortKey(n.id);void 0!==e&&t.push(e)}return t.sort(((e,t)=>H6(e.sortKey,t.sortKey))),t.map((e=>e.entity))}nonExistOrDescendantOf(e,t){let n=this.find(e);if(void 0===n)return!0;for(;n;){if(n.uuid===t)return!0;n=n.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if("f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera"===e)return this.activePage.personalCamera;if(e===lee)return this.activePage.personalCamera}if(""===e||void 0===e)return;let t=this.entityByUuid[e];return void 0===t?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof $fe&&t.uiScene){let n=t.uiScene.find(e);if(n)return n}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof $fe&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity((n=>{void 0===t&&n instanceof sme&&(t=n.uiCanvas.find(e))})),t}traverse2D(e){for(let t of this.children)t instanceof $fe&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);t&&Array.isArray(t.identity)&&this.findInstance(t.identity)}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors((e=>{this.toExpandCloner.add(e)}))}doPendingExpandCloner(){this.toExpandCloner.forEach((e=>{e.expandCloner(this)})),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach((e=>{var t;null==(t=e.cloner)||t.update()})),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach((e=>e())),this.pendingCommands.length=0}updateByLibOp(e,t){1===e.path.length&&"components"===e.path[0]&&1===e.type&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var n;if(0===e.path.length&&7===e.type){let n=null===e.parent?this:this.find(e.parent);if(void 0===n)throw new Error("unexpected");let r=this.createObject(e.id,e.data,e.children,n,e.localIndex,t);r.updateVisible(this),r.resetBBoxNeedsUpdate(),Phe(r)&&The(r.parent)&&(r.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(r),this.markToExpandCloner(r),this.markPenumbraSizeDirty(),r.updatePathSnapping()}else if(0===e.path.length&&8===e.type){let t=this.find(e.id);if(void 0===t)throw new Error("unexpected");this.markToExpandCloner(t),t.resetBBoxNeedsUpdate(),this.unregisterObject(t);let n=t.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(t),this.markPenumbraSizeDirty(),t.parent.remove(t),The(t.parent)&&(t.parent.invalidateUpstreamBooleanData(),t.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Phe(t)&&(t.freeBooleanPointer(),n instanceof Ehe&&n.invalidateDownstreamBooleanData().recomputeBoolean()),t instanceof eme&&t.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(t),this.pathConstraints.removeDependencies(t.uuid),t.updatePathSnapping()}else if(0===e.path.length&&9===e.type){let t=this.find(e.id);if(void 0===t)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(t);let r=t.parent;this.markNeedsRecomputeInstancesForAncessors(r),null==(n=t.cloner)||n.resetOnMove(),this.markToExpandCloner(t);let i=null===e.parent?this:this.find(e.parent);if(void 0===i)throw new Error("unexpected");i.add(t),this.markNeedsRecomputeInstancesForAncessors(i),this.markToExpandCloner(t),t.invalidateClonerTransform(t),t.updateVisible(this),t.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let o=e.localIndex;i.children.splice(o,0,i.children.pop()),Phe(t)&&(t.invalidateUpstreamBooleanData(),The(t.parent)?t.parent.invalidateDownstreamBooleanData().recomputeBoolean():r instanceof Ehe&&r.invalidateDownstreamBooleanData().recomputeBoolean()),t.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let n of this.children)n instanceof $fe&&(n.visible=n.uuid===e,n.visible&&(this.activePage=n,this.activePage.onActive(this)));this.activePage!==(null==(t=this.splatViewer)?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,n,r){if(0===t.type){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:e}=t.props;t={...t,props:e},this.markNeedsRecomputeInstances()}"pathSnapping"===t.path[0]&&void 0!==t.props.pathId&&this.pathConstraints.setConstraint(e,t.props.pathId)}let i=this.find(e);if(i)try{(function(e,t,n,r){e.updateByOp(t,n,r,!1)})(i,t,n,{scene:this,shared:r}),i instanceof Ade&&i.updateGeometryGroupsIfNeeded()}catch(V9){}}updateEntity2DByOp(e,t,n,r,i,o=[]){e.updateEntityByOp(t,n,r,i),this.traverseEntity((e=>{(e instanceof sme||e instanceof $fe)&&(o.includes(e.frameId??"")||e.frameId===t)&&e.updateEntity2DByOp(t,n,r,i)}))}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let n=Object.entries(t.data.lib.components).map(((e,t)=>({data:e[1].asset.data,children:e[1].asset.children,id:e[0],fi:t})));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(n,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity((e=>{e instanceof xhe&&e.updateUp()})),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity((e=>{("Component"===e.data.type||"Instance"===e.data.type)&&this.markNeedsRecomputeInstances()}))}markNeedsRecomputeInstancesForAncessors(e){eie.is(e)&&("Component"===e.data.type&&this.markNeedsRecomputeInstances(),e.traverseAncestors((e=>{eie.is(e)&&"Component"===e.data.type&&this.markNeedsRecomputeInstances()})))}relativeizeInner(e,t,n,r,i,o,a){if(e){let s=r.find(e);s&&s!==r&&i.forInstancesRec((r=>{r.data=X8(r.data,(i=>{let s=i.events.data(a.id),l=r.goUp(o);if(l){let r=[...j6(l.identity),e].join("-"),i=this.entityIdentityToEntity[r];if(i){let e=i.uuid;G8.zoom(s,t)[n]=e}}})).data}))}}rewriteActions(e,t,n,r,i,o){e.forEach((e=>{"Transition"===e.data.type||"Animation"===e.data.type?this.relativeizeInner(e.data.object,[...t,e.id],"object",n,r,i,o):"Conditional"===e.data.type&&(this.rewriteActions(e.data.ifActions,[...t,e.id,"ifActions"],n,r,i,o),this.rewriteActions(e.data.elseActions,[...t,e.id,"elseActions"],n,r,i,o))}))}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity((e=>{if(e instanceof nme&&"string"==typeof e.identity&&"Component"===e.data.type)return e.traverseEntity(((t,n)=>{t.data.events.forEach((r=>{if("GameControl"===r.data.type){let i=!1;if(t.forInstancesRec((e=>{e.data=X8(e.data,(t=>{e.isInstanceRoot||(t.events.delete(r.id),i=!0)})).data})),!1===i)for(let o of Pte.list)this.rewriteActions(r.data.gameActions[o],["gameActions",o],e,t,n,r)}else"Conditional"===r.data.type?("Distance"===r.data.condition.type?(this.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",e,t,n,r),this.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",e,t,n,r)):"State"===r.data.condition.type?this.relativeizeInner(r.data.condition.object,["condition"],"object",e,t,n,r):"Comparison"===r.data.condition.type&&("Property"===r.data.condition.lOperand.type&&this.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,n,r),"Property"===r.data.condition.rOperand.type&&this.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,n,r)),this.rewriteActions(r.data.inActions,["inActions"],e,t,n,r),this.rewriteActions(r.data.outActions,["outActions"],e,t,n,r)):"actions"in r.data&&this.rewriteActions(r.data.actions,["actions"],e,t,n,r)}))})),!0}))}expandInstances(e,t,n){let r=new Set;this.traverseEntity((i=>{if(i instanceof nme&&i.isInstanceRoot)return i.expandInstanceChildren({scene:this,shared:e,pendingDeletes:r}),t||i.resetBBoxNeedsUpdate(),n&&i.traverseEntity((e=>{n.addClip(e)})),!0}));for(let i of r)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),rme(i)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity((e=>{e instanceof nme&&e.isInstanceRoot&&(e.component=void 0)})),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity((e=>{let t="string"==typeof e.identity?e.identity:e.identity.join("-");this.entityIdentityToEntity[t]===e&&(delete this.entityByUuid[e.uuid],delete this.entityIdentityToEntity[t]),e.dispose()}))}clearScene(){for(let e of this.children)eie.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let n=[],r=i=>{for(let o of i.children){let i=o.cloner;if(eie.is(o)&&!o.raycastLock&&(o.visible||(null==i?void 0:i.object.data.visible)))if(!0===t&&o.isInstanceRoot){let t=[];if(e.intersectObject(o,!0,t),t.length){let e=t[0];e.object=o,e.point.applyMatrix4(e.object.matrixWorld);let r=o.matrixWorld.clone().invert();e.point.applyMatrix4(r),n.push(e)}}else(Phe(o)||Dhe(o)&&this.enableHelpers&&o.objectHelper.visible)&&(e.intersectObject(o,!1,n),Mme(o,e,n)),r(o)}};return r(this.activePage),n}raycastWithClones(e){let t=[],n=r=>{for(let i of r.children){let r=i.cloner;eie.is(i)&&(i.visible||(null==r?void 0:r.object.data.visible))&&((Phe(i)||Dhe(i)&&this.enableHelpers&&i.objectHelper.visible)&&(e.intersectObject(i,!1,t),Mme(i,e,t,!0)),n(i))}};return n(this),t}forEachEntity(e){for(let t of this.children)eie.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)eie.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)eie.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity((n=>{if(n instanceof Ade&&"Mesh"===n.data.type&&("TextGeometry"===n.data.geometry.type||"InputGeometry"===n.data.geometry.type)&&n.data.geometry.font===e){let r=n.geometry,i=n.data.geometry;r.updateFont(e,t).then((()=>{r.update(i);let e=n.invalidateDownstreamBooleanData();The(e)&&e.recomputeBoolean()}))}}))}traverseObject(e){for(let t of this.children)qre.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)eie.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,n){let r=0;for(let i of e)this.createObject(i.id,i.data,i.children,t,r,n),r+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,n,r,i,o){var a;let s={scene:this,shared:o},l=xme(e,t,s);return l&&(this.entityByUuid[e]=l,r.add(l),r.children.splice(i,0,r.children.pop()),n.length>0&&(l.isInstanceRoot||this.createChildrenObjects(n,l,o)),l.updateState(t,s),l instanceof Ade&&l.updateGeometryGroupsIfNeeded(),l.updateVisible(this),l.cloner&&this.toExpandCloner.add(l),(null==(a=t.pathSnapping)?void 0:a.pathId)&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),"Empty"===t.type&&t.animations&&l.traverseEntity((e=>{let t=e.dataPatched;if(e instanceof Ade&&t.bones&&t.boneInverses){let n=t.bones.map((e=>this.find(e))),r=t.boneInverses.map((e=>(new gq).fromArray(e))),i=new j$(n,r);e.bind(i,e.bindMatrix)}else e.matrixAutoUpdate=!0})),l}getCenter(e){let t=[];for(let r=0,i=e.length;r<i;++r){let{id:n,recursive:i}=e[r],o=this.find(n),a=i?o.recursiveBBox:o.singleBBox;t.push(...a.vertices)}let n=new VG;return n.setFromPoints(t),n.getCenter(Wme),Wme}copyMatrixWorld(e,t){if(null===e)return void t.identity();let n=this.find(e);n?t.copy(n.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var n;if(null===e)return void t.identity();let r=null==(n=this.find(e))?void 0:n.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity((t=>{if(t instanceof Use)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)t.material[n]instanceof Cue&&e(t.material[n]);else t.material instanceof Cue&&e(t.material)}))}updateViewPlaneSize(e,t,n=!1){this.traverseConcreteEntity((r=>{r instanceof xhe&&r.setViewplaneSize(e,t,n)}))}initializeSplatViewer(){this.splatViewer=new Qme({scene:this}),this.reloadSplats()}reloadSplats(){var e;null==(e=this.splatViewer)||e.loadSplat()}},qme=(e,t)=>{let n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},Kme=e=>e*(Math.PI/180),Yme=e=>e*(180/Math.PI),Xme=new Map,$me=e=>{Xme.has(e)&&clearTimeout(Xme.get(e)),Xme.set(e,setTimeout(e,100))},Jme=(e,t,n)=>{let r,i=t.split(/[ ,]+/g);for(let o=0;o<i.length;o+=1)r=i[o],e.addEventListener?e.addEventListener(r,n,!1):e.attachEvent&&e.attachEvent(r,n)},Zme=(e,t,n)=>{let r,i=t.split(/[ ,]+/g);for(let o=0;o<i.length;o+=1)r=i[o],e.removeEventListener?e.removeEventListener(r,n):e.detachEvent&&e.detachEvent(r,n)},ege=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),tge=()=>{if(typeof window>"u")return;return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},nge=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},rge=(e,t,n)=>{let r=ige(e);for(let i in r)if(r.hasOwnProperty(i))if("string"==typeof t)r[i]=t+" "+n;else{let e="";for(let r=0,i=t.length;r<i;r+=1)e+=t[r]+" "+n+", ";r[i]=e.slice(0,-2)}return r},ige=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach((function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""})),t},oge=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},age=(e,t)=>{if(e.length)for(let n=0,r=e.length;n<r;n+=1)t(e[n]);else t(e)};typeof window<"u"&&(sge="ontouchstart"in window,lge=!!window.PointerEvent,cge=!!window.MSPointerEvent);var sge,lge,cge,uge,dge={start:"mousedown",move:"mousemove",end:"mouseup"},hge={};function pge(){}lge?uge={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:cge?uge={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:sge?(uge={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},hge=dge):uge=dge,pge.prototype.on=function(e,t){var n,r=this,i=e.split(/[ ,]+/g);r._handlers_=r._handlers_||{};for(var o=0;o<i.length;o+=1)n=i[o],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r},pge.prototype.off=function(e,t){var n=this;return n._handlers_=n._handlers_||{},void 0===e?n._handlers_={}:void 0===t?n._handlers_[e]=null:n._handlers_[e]&&n._handlers_[e].indexOf(t)>=0&&n._handlers_[e].splice(n._handlers_[e].indexOf(t),1),n},pge.prototype.trigger=function(e,t){var n,r=this,i=e.split(/[ ,]+/g);r._handlers_=r._handlers_||{};for(var o=0;o<i.length;o+=1)n=i[o],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach((function(e){e.call(r,{type:n,target:r},t)}))},pge.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=((e,t)=>{let n={};for(let r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?n[r]=t[r]:e.hasOwnProperty(r)&&(n[r]=e[r]);return n})(t.options,e))},pge.prototype.bindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]&&n["on"+t].apply(n,arguments)},Jme(e,uge[t],n._domHandlers_[t]),hge[t]&&Jme(e,hge[t],n._domHandlers_[t]),n},pge.prototype.unbindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},Zme(e,uge[t],n._domHandlers_[t]),hge[t]&&Zme(e,hge[t],n._domHandlers_[t]),delete n._domHandlers_[t],this};var Age=pge;function fge(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=fge.id,fge.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}fge.prototype=new Age,fge.constructor=fge,fge.id=0,fge.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},fge.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=((e,t)=>{let n=ige(e);for(let r in n)n.hasOwnProperty(r)&&(n[r]=t);return n})("borderRadius","50%"),n=rge("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},oge(r.el,n),"circle"===this.options.shape&&oge(r.back,t),oge(r.front,t),this.applyStyles(r),this},fge.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},fge.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},fge.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},fge.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},fge.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout((function(){t.ui.el.style.opacity=1}),0),t.showTimeout=setTimeout((function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)}),t.options.fadeTime)),t},fge.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout((function(){var n="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=n,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)}),t.options.fadeTime),t.options.restJoystick){let n=t.options.restJoystick,r={};r.x=!0===n||!1!==n.x?0:t.instance.frontPosition.x,r.y=!0===n||!1!==n.y?0:t.instance.frontPosition.y,t.setPosition(e,r)}return t},fge.prototype.setPosition=function(e,t){var n=this;n.frontPosition={x:t.x,y:t.y};var r=n.options.fadeTime+"ms",i={};i.front=rge("transition",["top","left"],r);var o={front:{}};o.front={left:n.frontPosition.x+"px",top:n.frontPosition.y+"px"},n.applyStyles(i),n.applyStyles(o),n.restTimeout=setTimeout((function(){"function"==typeof e&&e.call(n),n.restCallback()}),n.options.fadeTime)},fge.prototype.restCallback=function(){var e=this,t={};t.front=rge("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},fge.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},fge.prototype.computeDirection=function(e){var t,n,r,i=e.angle.radian,o=Math.PI/4,a=Math.PI/2;if(i>o&&i<3*o&&!e.lockX?t="up":i>-o&&i<=o&&!e.lockY?t="left":i>3*-o&&i<=-o&&!e.lockX?t="down":e.lockY||(t="right"),e.lockY||(n=i>-a&&i<a?"left":"right"),e.lockX||(r=i>0?"up":"down"),e.force>this.options.threshold){var s,l={};for(s in this.direction)this.direction.hasOwnProperty(s)&&(l[s]=this.direction[s]);var c={};for(s in this.direction={x:n,y:r,angle:t},e.direction=this.direction,l)l[s]===this.direction[s]&&(c[s]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+n,e),c.y||this.trigger("plain:"+r,e),c.angle||this.trigger("dir dir:"+t,e)}else this.resetDirection();return e};var mge=fge;function gge(e,t){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=e,n.id=gge.id,gge.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(t),("static"===n.options.mode||"semi"===n.options.mode)&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);let r=getComputedStyle(n.options.zone.parentElement);return r&&"flex"===r.display&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}gge.prototype=new Age,gge.constructor=gge,gge.id=0,gge.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(e){if(void 0===e)return t[0];for(var n=0,r=t.length;n<r;n+=1)if(t[n].identifier===e)return t[n];return!1}},gge.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},gge.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var n=e.createNipple(t.position,e.manager.getIdentifier());n.add(),e.idles.push(n)}},gge.prototype.createNipple=function(e,t){var n=this,r=n.manager.scroll,i={},o=n.options,a=n.parentIsFlex?r.x:r.x+n.box.left,s=n.parentIsFlex?r.y:r.y+n.box.top;if(e.x&&e.y)i={x:e.x-a,y:e.y-s};else if(e.top||e.right||e.bottom||e.left){var l=document.createElement("DIV");l.style.display="hidden",l.style.top=e.top,l.style.right=e.right,l.style.bottom=e.bottom,l.style.left=e.left,l.style.position="absolute",o.zone.appendChild(l);var c=l.getBoundingClientRect();o.zone.removeChild(l),i=e,e={x:c.left+r.x,y:c.top+r.y}}var u=new mge(n,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:t,position:e,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(nge(u.ui.el,i),nge(u.ui.front,u.frontPosition)),n.nipples.push(u),n.trigger("added "+u.identifier+":added",u),n.manager.trigger("added "+u.identifier+":added",u),n.bindNipple(u),u},gge.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},gge.prototype.bindNipple=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},gge.prototype.pressureFn=function(e,t,n){var r=this,i=0;clearInterval(r.pressureIntervals[n]),r.pressureIntervals[n]=setInterval(function(){var n=e.force||e.pressure||e.webkitForce||0;n!==i&&(t.trigger("pressure",n),r.trigger("pressure "+t.identifier+":pressure",n),i=n)}.bind(r),100)},gge.prototype.onstart=function(e){var t=this,n=t.options,r=e;e=ege(e),t.updateBox();return age(e,(function(i){t.actives.length<n.maxNumberOfNipples?t.processOnStart(i):r.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach((function(n){if(Object.values(r.touches).findIndex((function(e){return e.identifier===n}))<0){var i=[e[0]];i.identifier=n,t.processOnEnd(i)}})),t.actives.length<n.maxNumberOfNipples&&t.processOnStart(i))})),t.manager.bindDocument(),!1},gge.prototype.processOnStart=function(e){var t,n=this,r=n.options,i=n.manager.getIdentifier(e),o=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},s=n.getOrCreate(i,a);s.identifier!==i&&n.manager.removeIdentifier(s.identifier),s.identifier=i;var l=function(t){t.trigger("start",t),n.trigger("start "+t.id+":start",t),t.show(),o>0&&n.pressureFn(e,t,t.identifier),n.processOnMove(e)};if((t=n.idles.indexOf(s))>=0&&n.idles.splice(t,1),n.actives.push(s),n.ids.push(s.identifier),"semi"!==r.mode)l(s);else{if(!(qme(a,s.position)<=r.catchDistance))return s.destroy(),void n.processOnStart(e);l(s)}return s},gge.prototype.getOrCreate=function(e,t){var n,r=this,i=r.options;return/(semi|static)/.test(i.mode)?(n=r.idles[0])?(r.idles.splice(0,1),n):"semi"===i.mode&&r.createNipple(t,e):n=r.createNipple(t,e)},gge.prototype.processOnMove=function(e){var t=this,n=t.options,r=t.manager.getIdentifier(e),i=t.nipples.get(r),o=t.manager.scroll;if((e=>isNaN(e.buttons)?0!==e.pressure:0!==e.buttons)(e))if(i){if(n.dynamicPage){var a=i.el.getBoundingClientRect();i.position={x:o.x+a.left,y:o.y+a.top}}i.identifier=r;var s=i.options.size/2,l={x:e.pageX,y:e.pageY};n.lockX&&(l.y=i.position.y),n.lockY&&(l.x=i.position.x);var c,u,d=qme(l,i.position),h=((e,t)=>{let n=t.x-e.x,r=t.y-e.y;return Yme(Math.atan2(r,n))})(l,i.position),p=Kme(h),A=d/s,f={distance:d,position:l};if("circle"===i.options.shape?(c=Math.min(d,s),u=((e,t,n)=>{let r={x:0,y:0};return n=Kme(n),r.x=e.x-t*Math.cos(n),r.y=e.y-t*Math.sin(n),r})(i.position,c,h)):(u=((e,t,n)=>({x:Math.min(Math.max(e.x,t.x-n),t.x+n),y:Math.min(Math.max(e.y,t.y-n),t.y+n)}))(l,i.position,s),c=qme(u,i.position)),n.follow){if(d>s){let e=l.x-u.x,n=l.y-u.y;i.position.x+=e,i.position.y+=n,i.el.style.top=i.position.y-(t.box.top+o.y)+"px",i.el.style.left=i.position.x-(t.box.left+o.x)+"px",d=qme(l,i.position)}}else l=u,d=c;var m=l.x-i.position.x,g=l.y-i.position.y;i.frontPosition={x:m,y:g},n.dataOnly||nge(i.ui.front,i.frontPosition);var v={identifier:i.identifier,position:l,force:A,pressure:e.force||e.pressure||e.webkitForce||0,distance:d,angle:{radian:p,degree:h},vector:{x:m/s,y:-g/s},raw:f,instance:i,lockX:n.lockX,lockY:n.lockY};(v=i.computeDirection(v)).angle={radian:Kme(180-h),degree:180-h},i.trigger("move",v),t.trigger("move "+i.id+":move",v)}else t.manager.removeIdentifier(r);else this.processOnEnd(e)},gge.prototype.processOnEnd=function(e){var t=this,n=t.options,r=t.manager.getIdentifier(e),i=t.nipples.get(r),o=t.manager.removeIdentifier(i.identifier);!i||(n.dataOnly||i.hide((function(){"dynamic"===n.mode&&(i.trigger("removed",i),t.trigger("removed "+i.id+":removed",i),t.manager.trigger("removed "+i.id+":removed",i),i.destroy())})),clearInterval(t.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),t.trigger("end "+i.id+":end",i),t.ids.indexOf(i.identifier)>=0&&t.ids.splice(t.ids.indexOf(i.identifier),1),t.actives.indexOf(i)>=0&&t.actives.splice(t.actives.indexOf(i),1),/(semi|static)/.test(n.mode)?t.idles.push(i):t.nipples.indexOf(i)>=0&&t.nipples.splice(t.nipples.indexOf(i),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[o.id]=o.identifier))},gge.prototype.onDestroyed=function(e,t){var n=this;n.nipples.indexOf(t)>=0&&n.nipples.splice(n.nipples.indexOf(t),1),n.actives.indexOf(t)>=0&&n.actives.splice(n.actives.indexOf(t),1),n.idles.indexOf(t)>=0&&n.idles.splice(n.idles.indexOf(t),1),n.ids.indexOf(t.identifier)>=0&&n.ids.splice(n.ids.indexOf(t.identifier),1),n.manager.removeIdentifier(t.identifier),n.manager.unbindDocument()},gge.prototype.destroy=function(){var e=this;for(var t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach((function(e){e.destroy()})),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var vge=gge;function yge(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=tge(),t.config(e),t.prepareCollections();var n=function(){var e;t.collections.forEach((function(n){n.forEach((function(n){e=n.el.getBoundingClientRect(),n.position={x:t.scroll.x+e.left,y:t.scroll.y+e.top}}))}))};if(typeof window>"u")return t.collections;Jme(window,"resize",(function(){$me(n)}));var r=function(){t.scroll=tge()};return Jme(window,"scroll",(function(){$me(r)})),t.collections}yge.prototype=new Age,yge.constructor=yge,yge.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every((function(e){return!(n=e.get(t))})),n}},yge.prototype.create=function(e){return this.createCollection(e)},yge.prototype.createCollection=function(e){var t=this,n=new vge(t,e);return t.bindCollection(n),t.collections.push(n),n},yge.prototype.bindCollection=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},yge.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},yge.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||!0===e)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},yge.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},yge.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},yge.prototype.onmove=function(e){return this.onAny("move",e),!1},yge.prototype.onend=function(e){return this.onAny("end",e),!1},yge.prototype.oncancel=function(e){return this.onAny("end",e),!1},yge.prototype.onAny=function(e,t){var n,r=this,i="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=ege(t);var o=function(e,t,n){n.ids.indexOf(t)>=0&&(n[i](e),e._found_=!0)};return age(t,(function(e){n=r.getIdentifier(e),age(r.collections,o.bind(null,e,n)),e._found_||r.removeIdentifier(n)})),!1},yge.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach((function(e){e.destroy()})),e.off()},yge.prototype.onDestroyed=function(e,t){var n=this;if(n.collections.indexOf(t)<0)return!1;n.collections.splice(n.collections.indexOf(t),1)};var bge=new yge,wge=function(e){return bge.create(e)},xge=new Map,Cge=new Map,Sge=class{constructor(e,t,n,r){this.data=t;let{audio:i,volume:o,delay:a,loop:s}=t;if(!i)throw new Error("Missing property");let l="string"==typeof i?r.getAudio(i).src:i.data;this.audioPlayer=new Uue({src:l,volume:o,delay:a,loop:s}),Cge.has(n.uuid)?Cge.get(n.uuid).push(this):Cge.set(n.uuid,[this]),xge.set(e,this)}playByToggle(){"stop"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):"pause"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},Bge=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=xge.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()}),this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=Cge.get(e);!(null==t?void 0:t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{t.forEach((e=>e.audioPlayer[this.data.interaction]())),this.disposeDelay()}),this.data.delay)):t.forEach((e=>e.audioPlayer[this.data.interaction]())))}pauseAllAudios(){let e=[...Cge.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{e.forEach((e=>{e.forEach((e=>{e.audioPlayer[this.data.interaction]()}))})),this.disposeDelay()}),this.data.delay)):e.forEach((e=>{e.forEach((e=>{e.audioPlayer[this.data.interaction]()}))})))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},_ge=class{constructor(e,t,n,r,i){if(this.data=t,this.shared=r,this.condition=i,"play"===t.interaction)this.interaction=new Sge(e,t,n,r);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new Bge(t)}}dispatchBasic(){if(!1===Fye(this.shared,this.condition))return!1;this.interaction instanceof Sge?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(!1===Fye(this.shared,this.condition))return!1;this.interaction instanceof Sge?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(!1===Fye(this.shared,this.condition))return!1;this.interaction instanceof Sge&&("start"===e?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},Ege=class{constructor(e,t,n,r){this.data=e,this.page=t,this.shared=n,this.condition=r,this.delay=0,this.emission=e.emission,void 0!==e.delay&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(e=0){e?this.delayTimerId=window.setTimeout((()=>{this.start(0),this.clearDelay()}),e):this.particleSystem.start()}stop(e=0){e?this.delayTimerId=window.setTimeout((()=>{this.stop(0),this.clearDelay()}),e):this.particleSystem.stop()}freeze(e=0){e?this.delayTimerId=window.setTimeout((()=>{this.freeze(0),this.clearDelay()}),e):this.particleSystem.froze()}unFreeze(e=0){e?this.delayTimerId=window.setTimeout((()=>{this.unFreeze(0),this.clearDelay()}),e):this.particleSystem.unFroze()}reset(e=0){e?this.delayTimerId=window.setTimeout((()=>{this.reset(0),this.clearDelay()}),e):this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze()}}dispatchBasic(){if(!1===Fye(this.shared,this.condition)||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay)}}dispatchConditional(){if(!1===Fye(this.shared,this.condition)||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay)}}dispatchGameControl(e){if(!1===Fye(this.shared,this.condition)||!this.particleSystem)return!1;"start"===e?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},Mge=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e));function Pge(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!n)throw new Error(`Invalid URL: ${e}`);let{type:r,data:i,hash:o}=n.groups,a=r.split(";");o=t?"":o;let s=!1;"base64"===a[a.length-1]&&(a.pop(),s=!0);let l=(a.shift()||"").toLowerCase(),c=[...a.map((e=>{let[t,n=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(n=n.toLowerCase(),"us-ascii"===n)?"":`${t}${n?`=${n}`:""}`})).filter(Boolean)];return s&&c.push("base64"),(c.length>0||l&&"text/plain"!==l)&&c.unshift(l),`data:${c.join(";")},${s?i.trim():i}${o?`#${o}`:""}`})(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===r.protocol&&(r.protocol="http:"),t.forceHttps&&"http:"===r.protocol&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){let e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,t=0,n="";for(;;){let i=e.exec(r.pathname);if(!i)break;let o=i[0],a=i.index;n+=r.pathname.slice(t,a).replace(/\/{2,}/g,"/"),n+=o,t=a+o.length}n+=r.pathname.slice(t,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=n}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=r.pathname.split("/"),n=e[e.length-1];Mge(n,t.removeDirectoryIndex)&&(e=e.slice(0,-1),r.pathname=e.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let o of[...r.searchParams.keys()])Mge(o,t.removeQueryParameters)&&r.searchParams.delete(o);if(!0===t.removeQueryParameters&&(r.search=""),t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));let i=e;return e=r.toString(),!t.removeSingleSlash&&"/"===r.pathname&&!i.endsWith("/")&&""===r.hash&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===r.pathname)&&""===r.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var Tge=class{constructor({url:e,context:t},n,r,i){if(this.controlsManager=n,this.shared=r,this.condition=i,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:Pge(e,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=t??"tab"}dispatch(){var e;if(!1===Fye(this.shared,this.condition))return!1;L6?window.location.assign(this.url):("tab"===this.context||k6&&"none"===this.context?window.open(this.url,"_blank"):"window"===this.context?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),null==(e=this.controlsManager.orbitControls)||e.onPointerUp(V6[0]),V6.splice(0,V6.length))}},Dge=class{constructor(e,t,n,r,i){this.data=e,this.page=t,this.controlsManager=n,this.shared=r,this.condition=i,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=e=>{var t,n;this.timeoutIdQueue.shift();let r=this.page.scene.find(e);if(void 0===r)return;let i=this.controlsManager.sharedGameControlGlobals.rapierWorld,o=!i||(null==(t=r.dataPatched.physics)?void 0:t.fusedBody);if(r.cloner){for(let e of r.cloner.children)o?(e.playModeVisible=!1,e.rigidBody&&"positioned"===(null==(n=r.dataPatched.physics)?void 0:n.rigidBody)&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(e.rigidBody.collider(0).handle),i.removeRigidBody(e.rigidBody),e.rigidBody=void 0),e.bvhGeometry&&(e.bvhGeometry=void 0)):void 0===this.clone||this.clone===e?(e.playModeVisible=!1,e.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(e.rigidBody.collider(0).handle),i.removeRigidBody(e.rigidBody),e.rigidBody=void 0)):void 0===e.playModeVisible&&(e.playModeVisible=!0);(o||void 0===this.clone||!1===this.clone)&&(r.visible=!1,r.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(r.rigidBody.collider(0).handle),i.removeRigidBody(r.rigidBody),r.rigidBody=void 0),r.bvhGeometry&&(r.bvhGeometry=void 0))}else r.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(r.rigidBody.collider(0).handle),i.removeRigidBody(r.rigidBody),r.rigidBody=void 0),r.bvhGeometry&&(r.bvhGeometry=void 0),r.visible=!1;this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=void 0===i?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter((e=>void 0!==e.bvhGeometry)):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter((e=>void 0!==e.rigidBody)),r.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(!1===Fye(this.shared,this.condition))return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()}dispatchFromStart(){if(!1===Fye(this.shared,this.condition))return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))}dispose(){this.timeoutIdQueue.forEach((e=>window.clearTimeout(e)))}},Fge=class{constructor(e,t,n,r,i){this.data=e,this.page=t,this.shared=n,this.eventManager=r,this.condition=i,this.shared=n}dispatch(){if(!1===Fye(this.shared,this.condition))return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout((()=>{var e;this.shared.reset(this.shared.data,!0),dye(this.page,this.shared,!0),this.eventManager.reset(),null==(e=this.eventManager.controlsManager.gameControl)||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId}),1e3*(this.data.delay??0))}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Ige={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},kge={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},Oge=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Lge={CSS:{},springs:{}};function Rge(e,t,n){return Math.min(Math.max(e,t),n)}function Uge(e,t){return e.indexOf(t)>-1}function zge(e,t){return e.apply(null,t)}var Nge={arr:function(e){return Array.isArray(e)},obj:function(e){return Uge(Object.prototype.toString.call(e),"Object")},pth:function(e){return Nge.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||Nge.svg(e))},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Nge.hex(e)||Nge.rgb(e)||Nge.hsl(e)},key:function(e){return!Ige.hasOwnProperty(e)&&!kge.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function jge(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function Hge(e,t){var n=jge(e),r=Rge(Nge.und(n[0])?1:n[0],.1,100),i=Rge(Nge.und(n[1])?100:n[1],.1,100),o=Rge(Nge.und(n[2])?10:n[2],.1,100),a=Rge(Nge.und(n[3])?0:n[3],.1,100),s=Math.sqrt(i/r),l=o/(2*Math.sqrt(i*r)),c=l<1?s*Math.sqrt(1-l*l):0,u=1,d=l<1?(l*s-a)/c:-a+s;function h(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*s)*(u*Math.cos(c*n)+d*Math.sin(c*n)):(u+d*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?h:function(){var t=Lge.springs[e];if(t)return t;for(var n=1/6,r=0,i=0;;)if(1===h(r+=n)){if(++i>=16)break}else i=0;var o=r*n*1e3;return Lge.springs[e]=o,o}}function Qge(e){return void 0===e&&(e=10),function(t){return Math.ceil(Rge(t,1e-6,1)*e)*(1/e)}}var Vge=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,i,o){return((t(i,o)*e+n(i,o))*e+r(i))*e}function o(e,i,o){return 3*t(i,o)*e*e+2*n(i,o)*e+r(i)}return function(t,n,r,a){if(0<=t&&t<=1&&0<=r&&r<=1){var s=new Float32Array(11);if(t!==n||r!==a)for(var l=0;l<11;++l)s[l]=i(l*e,t,r);return function(e){return t===n&&r===a||0===e||1===e?e:i(c(e),n,a)}}function c(n){for(var a=0,l=1;10!==l&&s[l]<=n;++l)a+=e;--l;var c=a+(n-s[l])/(s[l+1]-s[l])*e,u=o(c,t,r);return u>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var s=o(t,n,r);if(0===s)return t;t-=(i(t,n,r)-e)/s}return t}(n,c,t,r):0===u?c:function(e,t,n,r,o){var a,s,l=0;do{(a=i(s=t+(n-t)/2,r,o)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++l<10);return s}(n,a,a+e,t,r)}}}(),Wge=function(){var e={linear:function(){return function(e){return e}}},t={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=Rge(e,1,10),r=Rge(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,n){t[e]=function(){return function(e){return Math.pow(e,n+2)}}})),Object.keys(t).forEach((function(n){var r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(e,t){return function(n){return 1-r(e,t)(1-n)}},e["easeInOut"+n]=function(e,t){return function(n){return n<.5?r(e,t)(2*n)/2:1-r(e,t)(-2*n+2)/2}}})),e}();function Gge(e,t){if(Nge.fnc(e))return e;var n=e.split("(")[0],r=Wge[n],i=jge(e);switch(n){case"spring":return Hge(e,t);case"cubicBezier":return zge(Vge,i);case"steps":return zge(Qge,i);default:return zge(r,i)}}function qge(e){try{return document.querySelectorAll(e)}catch{return}}function Kge(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<n;o++)if(o in e){var a=e[o];t.call(r,a,o,e)&&i.push(a)}return i}function Yge(e){return e.reduce((function(e,t){return e.concat(Nge.arr(t)?Yge(t):t)}),[])}function Xge(e){return Nge.arr(e)?e:(Nge.str(e)&&(e=qge(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function $ge(e,t){return e.some((function(e){return e===t}))}function Jge(e){var t={};for(var n in e)t[n]=e[n];return t}function Zge(e,t){var n=Jge(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function eve(e,t){var n=Jge(e);for(var r in t)n[r]=Nge.und(e[r])?t[r]:e[r];return n}function tve(e){return Nge.rgb(e)?function(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):Nge.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):Nge.hsl(e)?function(e){var t,n,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),o=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,l=i[4]||1;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=s;else{var u=s<.5?s*(1+a):s+a-s*a,d=2*s-u;t=c(d,u,o+1/3),n=c(d,u,o),r=c(d,u,o-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+l+")"}(e):void 0}function nve(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function rve(e,t){return Nge.fnc(e)?e(t.target,t.id,t.total):e}function ive(e,t){return e.getAttribute(t)}function ove(e,t,n){if($ge([n,"deg","rad","turn"],nve(t)))return t;var r=Lge.CSS[t+n];if(!Nge.und(r))return r;var i=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(i),i.style.position="absolute",i.style.width=100+n;var a=100/i.offsetWidth;o.removeChild(i);var s=a*parseFloat(t);return Lge.CSS[t+n]=s,s}function ave(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?ove(e,i,n):i}}function sve(e,t){return Nge.dom(e)&&!Nge.inp(e)&&(ive(e,t)||Nge.svg(e)&&e[t])?"attribute":Nge.dom(e)&&$ge(Oge,t)?"transform":Nge.dom(e)&&"transform"!==t&&ave(e,t)?"css":null!=e[t]?"object":void 0}function lve(e){if(Nge.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map;t=r.exec(n);)i.set(t[1],t[2]);return i}}function cve(e,t,n,r){var i=Uge(t,"scale")?1:0+function(e){return Uge(e,"translate")||"perspective"===e?"px":Uge(e,"rotate")||Uge(e,"skew")?"deg":void 0}(t),o=lve(e).get(t)||i;return n&&(n.transforms.list.set(t,o),n.transforms.last=t),r?ove(e,o,r):o}function uve(e,t,n,r){switch(sve(e,t)){case"transform":return cve(e,t,r,n);case"css":return ave(e,t,n);case"attribute":return ive(e,t);default:return e[t]||0}}function dve(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=nve(e)||0,i=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return i+o+r;case"-":return i-o+r;case"*":return i*o+r}}function hve(e,t){if(Nge.col(e))return tve(e);if(/\s/g.test(e))return e;var n=nve(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function pve(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ave(e){for(var t,n=e.points,r=0,i=0;i<n.numberOfItems;i++){var o=n.getItem(i);i>0&&(r+=pve(t,o)),t=o}return r}function fve(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*ive(e,"r")}(e);case"rect":return function(e){return 2*ive(e,"width")+2*ive(e,"height")}(e);case"line":return function(e){return pve({x:ive(e,"x1"),y:ive(e,"y1")},{x:ive(e,"x2"),y:ive(e,"y2")})}(e);case"polyline":return Ave(e);case"polygon":return function(e){var t=e.points;return Ave(e)+pve(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function mve(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;Nge.svg(t)&&Nge.svg(t.parentNode);)t=t.parentNode;return t}(e),i=r.getBoundingClientRect(),o=ive(r,"viewBox"),a=i.width,s=i.height,l=n.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:s/l[3]}}function gve(e,t){function n(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var r=mve(e.el,e.svg),i=n(),o=n(-1),a=n(1);switch(e.property){case"x":return(i.x-r.x)*r.w;case"y":return(i.y-r.y)*r.h;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function vve(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=hve(Nge.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:Nge.str(e)||t?r.split(n):[]}}function yve(e){return Kge(e?Yge(Nge.arr(e)?e.map(Xge):Xge(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function bve(e){var t=yve(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:lve(e)}}}))}function wve(e,t){var n=Jge(t);if(/^spring/.test(n.easing)&&(n.duration=Hge(n.easing)),Nge.arr(e)){var r=e.length;2===r&&!Nge.obj(e[0])?e={value:e}:Nge.fnc(t.duration)||(n.duration=t.duration/r)}var i=Nge.arr(e)?e:[e];return i.map((function(e,n){var r=Nge.obj(e)&&!Nge.pth(e)?e:{value:e};return Nge.und(r.delay)&&(r.delay=n?0:t.delay),Nge.und(r.endDelay)&&(r.endDelay=n===i.length-1?t.endDelay:0),r})).map((function(e){return eve(e,n)}))}function xve(e,t){var n=[],r=t.keyframes;for(var i in r&&(t=eve(function(e){for(var t=Kge(Yge(e.map((function(e){return Object.keys(e)}))),(function(e){return Nge.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var i=t[r];n[i]=e.map((function(e){var t={};for(var n in e)Nge.key(n)?n==i&&(t.value=e[n]):t[n]=e[n];return t}))},i=0;i<t.length;i++)r(i);return n}(r),t)),t)Nge.key(i)&&n.push({name:i,tweens:wve(t[i],e)});return n}function Cve(e,t){var n;return e.tweens.map((function(r){var i=function(e,t){var n={};for(var r in e){var i=rve(e[r],t);Nge.arr(i)&&(i=i.map((function(e){return rve(e,t)})),1===i.length&&(i=i[0])),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,t),o=i.value,a=Nge.arr(o)?o[1]:o,s=nve(a),l=uve(t.target,e.name,s,t),c=n?n.to.original:l,u=Nge.arr(o)?o[0]:c,d=nve(u)||nve(l),h=s||d;return Nge.und(a)&&(a=c),i.from=vve(u,h),i.to=vve(dve(a,u),h),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=Gge(i.easing,i.duration),i.isPath=Nge.pth(o),i.isColor=Nge.col(i.from.original),i.isColor&&(i.round=1),n=i,i}))}var Sve={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,i){if(r.list.set(t,n),t===r.last||i){var o="";r.list.forEach((function(e,t){o+=t+"("+e+") "})),e.style.transform=o}}};function Bve(e,t){bve(e).forEach((function(e){for(var n in t){var r=rve(t[n],e),i=e.target,o=nve(r),a=uve(i,n,o,e),s=dve(hve(r,o||nve(a)),a),l=sve(i,n);Sve[l](i,n,s,e.transforms,!0)}}))}function _ve(e,t){return Kge(Yge(e.map((function(e){return t.map((function(t){return function(e,t){var n=sve(e.target,t.name);if(n){var r=Cve(t,e),i=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}(e,t)}))}))),(function(e){return!Nge.und(e)}))}function Eve(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=n?Math.max.apply(Math,e.map((function(e){let t=e.startOnceDelay??0,n=e.pingPongDelayCorrection??0,i=e.pingPongEndDelayCorrection??0;return r(e)+t+n+i+e.duration*(e.loop??1)}))):t.duration,i.delay=n?Math.min.apply(Math,e.map((function(e){let t=e.startOnceDelay??0,n=e.pingPongDelayCorrection??0;return r(e)+t+n+e.delay}))):t.delay,i.endDelay=n?i.duration-Math.max.apply(Math,e.map((function(e){let t=e.startOnceDelay??0,n=e.pingPongDelayCorrection??0,i=e.pingPongEndDelayCorrection??0;return r(e)+t+n+e.duration*(e.loop??1)-e.endDelay-i}))):t.endDelay,i}var Mve=0;var Pve,Tve=[],Dve=[],Fve=function(){function e(){Pve=requestAnimationFrame(t)}function t(t){var n=Tve.length;if(n){for(var r=0;r<n;){var i=Tve[r];i.paused?(Tve.splice(r,1),n-=1):(i.tick(t),r++)}e()}else Pve=cancelAnimationFrame(Pve)}return e}();function Ive(e){void 0===e&&(e={});var t,n,r=0,i=0,o=0,a=0,s=null;function l(e){var t=window.Promise&&new Promise((function(e){return s=e}));return e.finished=t,t}var c=function(e){var t=Zge(Ige,e),n=Zge(kge,e),r=xve(n,e),i=bve(e.targets),o=_ve(i,r),a=Eve(o,n),s=Mve;return Mve++,eve(t,{id:s,children:[],animatables:i,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay,startOnceDelay:n.startOnceDelay,pingPongDelayCorrection:n.pingPongDelayCorrection,pingPongEndDelayCorrection:n.pingPongEndDelayCorrection})}(e);function u(){var e=c.direction;"alternate"!==e&&(c.direction="normal"!==e?"normal":"reverse"),c.reversed=!c.reversed,n.forEach((function(e){(1===e.loop||e.loop%2==0)&&(e.reversed=c.reversed)}))}function d(e){return c.reversed?c.duration-e:e}function h(e,t,n=!1){t&&(c.reversed?t.seek(t.duration*t.loop-(e-t.timelineOffset-t.pingPongDelayCorrection),n):t.seek(e-t.timelineOffset-t.startOnceDelay-t.pingPongDelayCorrection,n))}function p(e){var t,n,r,i,o,a,s,l,u,d,h=0,p=c.animations,A=p.length;for("alternate"!==c.direction&&"alternate"===(null==(t=c.parent)?void 0:t.direction)?!1===(null==(n=c.parent)?void 0:n.rewind)&&!0===c.reversePlayback&&!1===c.rewind&&(e=(null==(r=c.parent)?void 0:r.reversed)&&"alternate"===c.direction?c.duration-c.delay+c.endDelay-e:c.duration+c.delay-c.endDelay-e):m(!1,null==(i=c.parent)?void 0:i.rewind,c.rewind,null==(o=c.parent)?void 0:o.reversePlayback,c.reversePlayback)&&(e=(null==(a=c.parent)?void 0:a.reversed)&&"alternate"===c.direction?c.duration-c.delay+c.endDelay-e:c.duration+c.delay-c.endDelay-e);h<A;){var f=p[h],g=f.animatable,v=f.tweens,y=v.length-1,b=v[y];let t;y&&(b=Kge(v,(function(t){return e<t.end}))[0]||b),t=(null==(s=c.parent)?void 0:s.reversed)&&"alternate"===c.direction?Rge(e-b.start-b.endDelay,0,b.duration)/b.duration:Rge(e-b.start-b.delay,0,b.duration)/b.duration;for(var w=isNaN(t)?1:b.easing(t),x=b.to.strings,C=b.round,S=[],B=b.to.numbers.length,_=void 0,E=0;E<B;E++){var M=void 0;let e,t;"alternate"!==c.direction?!1===(null==(l=c.parent)?void 0:l.rewind)&&!0===c.reversePlayback&&!1===c.rewind?(e=b.to.numbers[E],t=b.from.numbers[E]||0):(t=b.to.numbers[E],e=b.from.numbers[E]||0):m(!0,null==(u=c.parent)?void 0:u.rewind,c.rewind,null==(d=c.parent)?void 0:d.reversePlayback,c.reversePlayback)?(e=b.to.numbers[E],t=b.from.numbers[E]||0):(t=b.to.numbers[E],e=b.from.numbers[E]||0),M=b.isPath?gve(b.value,w*t):e+w*(t-e),C&&(b.isColor&&E>2||(M=Math.round(M*C)/C)),S.push(M)}var P=x.length;if(P){_=x[0];for(var T=0;T<P;T++){x[T];var D=x[T+1],F=S[T];isNaN(F)||(_+=D?F+D:F+" ")}}else _=S[0];Sve[f.type](g.target,f.property,_,g.transforms),f.currentValue=_,h++}}function A(e){c[e]&&!c.passThrough&&c[e](c)}l(c);let f={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function m(e,t,n,r,i){return f[e<<4|t<<3|n<<2|r<<1|i]}function g(e,t=!1){var i,o=c.duration;let f=c.delay,m=o-c.endDelay;(null==(i=c.parent)?void 0:i.reversed)&&"alternate"===c.direction&&(f=c.endDelay,m=o-c.delay);var g=d(e);if(c.progress=Rge(g/o*100,0,100),t||(c.reversePlayback=g<c.currentTime),a&&function(e,t=!1){if(c.reversed)for(var r=a;r--;)h(e,n[r],t);else for(var i=0;i<a;i++)h(e,n[i],t)}(g,t),!c.began&&c.currentTime>=0&&(c.began=!0,A("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,A("loopBegin")),(c.reversed||g>=0)&&g<=f&&0!==c.currentTime&&(p(0),A("change")),(g>=m&&c.currentTime!==o+c.pingPongDelayCorrection||!o)&&(p(o),A("change")),g>f&&g<m?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,A("changeBegin")),p(g),A("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,A("change"),a&&A("timelineChangeComplete")):c.began&&g>m&&A("changeComplete"),c.currentTime=Rge(g,0,o+c.pingPongDelayCorrection),c.began&&A("update"),e>=o)if(c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining){r+=a?c.duration/Ive.speed:c.duration;for(let e of n)e.setStartTime(0),e.remaining=e.loop;A("loopComplete"),c.loopBegan=!1,"alternate"===c.direction?u():a&&(c.direction="normal",c.reversed=!1,n.forEach((function(e){return e.reversed=!1})))}else c.paused=!0,c.completed||(c.completed=!0,A("loopComplete"),A("complete"),!c.passThrough&&"Promise"in window&&(s(),l(c)))}return c.reset=function(){var e=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===e,c.remaining=c.loop,n=c.children;for(var t=a=n.length;t--;)c.children[t].reset();p(c.reversed?c.duration:0)},c.setStartTime=function(e){r=e},c.set=function(e,t){return Bve(e,t),c},c.tick=function(e){o=e,r||(r=o),g((o+(i-r))*Ive.speed)},c.seek=function(e,t=!1){g(e-r,t)},c.pause=function(e){c.paused=!0,a&&(t=e??performance.now())},c.play=function(e){!c.paused||(c.completed&&c.reset(),c.paused=!1,Tve.push(c),a&&void 0!==t&&(r+=(e??performance.now())-t),Pve||Fve())},c.reverse=function(){u(),c.completed=!c.reversed,r=0,i=d(c.currentTime)*(1/Ive.speed)},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function kve(e,t){for(var n=t.length;n--;)$ge(e,t[n].animatable.target)&&t.splice(n,1)}typeof document<"u"&&document.addEventListener("visibilitychange",(function(e){document.hidden?(Tve.forEach((function(t){return t.pause(e.timeStamp)})),Dve=Tve.slice(0),Ive.running=Tve=[]):Dve.forEach((function(t){return t.play(e.timeStamp)}))})),Ive.version="3.2.0",Ive.speed=1,Ive.running=Tve,Ive.remove=function(e){for(var t=yve(e),n=Tve.length;n--;){var r=Tve[n],i=r.animations,o=r.children;kve(t,i);for(var a=o.length;a--;){var s=o[a],l=s.animations;kve(t,l),!l.length&&!s.children.length&&o.splice(a,1)}!i.length&&!o.length&&r.pause()}},Ive.get=uve,Ive.set=Bve,Ive.convertPx=ove,Ive.path=function(e,t){var n=Nge.str(e)?qge(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:mve(n),totalLength:fve(n)*(r/100)}}},Ive.setDashoffset=function(e){var t=fve(e);return e.setAttribute("stroke-dasharray",t),t},Ive.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?Gge(t.easing):null,i=t.grid,o=t.axis,a=t.from||0,s="first"===a,l="center"===a,c="last"===a,u=Nge.arr(e),d=parseFloat(u?e[0]:e),h=u?parseFloat(e[1]):0,p=nve(u?e[1]:e)||0,A=t.start||0+(u?d:0),f=[],m=0;return function(e,t,g){if(s&&(a=0),l&&(a=(g-1)/2),c&&(a=g-1),!f.length){for(var v=0;v<g;v++){if(i){var y=l?(i[0]-1)/2:a%i[0],b=l?(i[1]-1)/2:Math.floor(a/i[0]),w=y-v%i[0],x=b-Math.floor(v/i[0]),C=Math.sqrt(w*w+x*x);"x"===o&&(C=-w),"y"===o&&(C=-x),f.push(C)}else f.push(Math.abs(a-v));m=Math.max.apply(Math,f)}r&&(f=f.map((function(e){return r(e/m)*m}))),"reverse"===n&&(f=f.map((function(e){return o?e<0?-1*e:-e:Math.abs(m-e)})))}return A+(u?(h-d)/m:d)*(Math.round(100*f[t])/100)+p}},Ive.timeline=function(e){void 0===e&&(e={});var t=Ive(e);return t.duration=0,t.add=function(n,r){var i=Tve.indexOf(t),o=t.children;function a(e){e.passThrough=!0}i>-1&&Tve.splice(i,1);for(var s=0;s<o.length;s++)a(o[s]);var l=eve(n,Zge(kge,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.timelineOffset=Nge.und(r)?c:dve(r,c),a(t);var u=Ive(l);a(u),o.push(u),u.parent=t;var d=Eve(o,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,!0===u.loop&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},Ive.easing=Gge,Ive.penner=Wge,Ive.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var Ove=Ive,Lve=new jG,Rve=new jG,Uve=new NG;function zve(e,t,n,r,i,o){let a=void 0!==n[e]?n[e]:void 0,s=r[e];if(null==s)return;let l=null!=a?"string"==typeof a?Number(i.getVariable(a)??0):a:t[e],c="string"==typeof s?Number(i.getVariable(s)??0):s;return l!==c?{update:n=>{let r=dG.lerp(l,c,n);t[e]=o?Math.trunc(r):r},start:()=>{t[e]=l},end:()=>{t[e]=c}}:void 0}function Nve(e,t,n,r,i,o){let a=n[e]?n[e]:void 0,s=r[e];if(!s)return;let l=t[e],c=[...a??l].map((e=>"string"==typeof e?Number(i.getVariable(e)??0):e)),u=[...s].map((e=>"string"==typeof e?Number(i.getVariable(e)??0):e));return c.length!==u.length||y6(c,u)?void 0:{update:n=>{c.forEach(((r,i)=>{let a=dG.lerp(r,u[i],n);t[e][i]=o?Math.trunc(a):a}))},start:()=>{Object.assign(t[e],c)},end:()=>{Object.assign(t[e],u)}}}function jve(e,t,n){return t.forEach(((t,r)=>{e.setComponent(r,"string"==typeof t?Number(n.getVariable(t)??0):t)})),e}function Hve(e,t,n,r,i){let o=n[e]?n[e]:void 0,a=r[e];if(!a)return;let s=t[e],l=o?jve(new jG,o,i):s.clone(),c=jve(new jG,a,i);return l.equals(c)?void 0:{update:e=>{s.lerpVectors(l,c,e)},start:()=>{s.copy(l)},end:()=>{s.copy(c)}}}function Qve(e,t,n){return t.forEach(((t,r)=>{e.setComponent(r,"string"==typeof t?Number(n.getVariable(t)??0):t)})),e}function Vve(e,t,n,r,i){let o=n[e]?n[e]:void 0,a=r[e];if(!a)return;let s=t[e],l=!(s instanceof hG),c=s instanceof hG?s:(new hG).fromArray(s),u=o?Qve(new hG,o,i):c.clone(),d=Qve(new hG,a,i);return u.equals(d)?void 0:{update:n=>{c.lerpVectors(u,d,n),l&&(t[e]=c.toArray())},start:()=>{c.copy(u),l&&(t[e]=c.toArray())},end:()=>{c.copy(d),l&&(t[e]=c.toArray())}}}function Wve(e,t,n,r,i){let o=n[e]?n[e]:void 0,a=r[e];if(!a)return;let s=t[e],l=new qse(s.r,s.g,s.b,s.a),c=o?"string"==typeof o?i.getColor(o).clone():new qse(o.r,o.g,o.b,o.a):l.clone(),u="string"==typeof a?i.getColor(a).clone():new qse(a.r,a.g,a.b,a.a);return c.equals(u)?void 0:{update:n=>{l.lerpColors(c,u,n);let r=dG.lerp(c.a,u.a,n);l.a=r,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(c)},end:()=>{l.copy(u)}}}function Gve(e,t,n,r,i){return"number"==typeof t[e]?zve(e,t,n??{},r,i):Array.isArray(t[e])?Nve(e,t,n??{},r,i):void 0}function qve(e,t,n,r){let i=[];if(!("geometry"in n))return i;let o=e.geometry.userData.parameters,a="geometry"in t?t.geometry:{},s=n.geometry;if(e instanceof bde){let t=function(e,t,n,r){if(void 0===n.scaleBaked)return;let i=(t.scaleBaked??e.data.geometry.scaleBaked).map((e=>"string"==typeof e?Number(r.getVariable(e)??0):e)),o=n.scaleBaked.map((e=>"string"==typeof e?Number(r.getVariable(e)??0):e));if(Q9.isEqual(i,o))return;let a=[];return a.push({update:t=>{e.updateGeometryInteractions({scaleBaked:[dG.lerp(i[0],o[0],t),dG.lerp(i[1],o[1],t),dG.lerp(i[2],o[2],t)]},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:i},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:o},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),a}(e,a,s,r);t&&i.push(...t)}else{let t={};if(Object.assign(t,T6(o,Dte)),Dte.forEach((e=>{let n=Gve(e,t,a,s,r);n&&i.push(n)})),e instanceof eme){Object.assign(t,{extrusion:{...o.extrusion}});let e=function(e,t,n,r){if(!n.extrusion)return;let i=e.extrusion,o=t.extrusion??{},a=n.extrusion,s=[];return Hee.forEach((e=>{let t=Gve(e,i,o,a,r);t&&s.push(t)})),s}(t,a,s,r);e&&i.push(...e)}i.length&&i.push({update:n=>{e.updateGeometryInteractions(t,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:n=>{e.updateGeometryInteractions(t,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:n=>{e.updateGeometryInteractions(t,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return i}function Kve(e,t,n,r){let i=[];if(void 0!==n.intensity){let o=zve("intensity",e,t,n,r);o&&i.push(o)}if(void 0!==n.color){let o=function(e,t,n,r,i){let o=n[e]?n[e]:void 0,a=r[e];if(!a)return;let s=t[e],l=o?"string"==typeof o?i.getColor(o).clone():(new PG).setRGB(o.r,o.g,o.b):s.clone(),c="string"==typeof a?i.getColor(a).clone():(new PG).setRGB(a.r,a.g,a.b);if(l.equals(c))return;let u=s.clone();return t[e]=u,{update:e=>{u.lerpColors(l,c,e)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}("color",e,t,n,r);o&&i.push(o)}return i}function Yve(e,t,n,r){var i;let o=[],a=xue(n,r)||!!t.layers&&xue(t,r);o.push(function(e,t){return{update:()=>{e.transparent=t}}}(e,a));for(let s of e.layers){let e=null==(i=t.layers)?void 0:i.data(s.uuid),a=n.layers.data(s.uuid);if(!a||"light"!==s.type&&(!(s.visible??1)||!(a.visible??1)))continue;let l=s.getNames().filter((e=>!Iee.some((t=>e.includes(t)))));for(let t of l)try{let n,i=s.getValue(t);if("colors"===t)n=nye(s,e,a,t);else if(Array.isArray(i))"steps"===t&&(n=tye(s,e,a,t));else if("number"==typeof i)n=Xve(s,e,a,t,r);else{if("boolean"==typeof i)continue;i instanceof hG?n=$ve(s,e,a,t):i instanceof jG?n=Jve(s,e,a,t,r):i instanceof qse?n=eye(s,e,a,t,r):i instanceof PG?n=Zve(s,e,a,t,r):"isTexture"in i&&(n=rye(s,e,a,t))}n&&(Array.isArray(n)?o.push(...n):o.push(n))}catch(X9){}}return o}function Xve(e,t,n,r,i){if(!e.hasValue(r)||!(r in n))return;let o=t?t[r]:e.getValue(r),a=n[r],s="string"==typeof o?Number(i.getVariable(o)??0):o,l="string"==typeof a?Number(i.getVariable(a)??0):a;return s!==l?{update:t=>{e.setValue(r,dG.lerp(s,l,t))},start:()=>{e.setValue(r,s)},end:()=>{e.setValue(r,l)}}:void 0}function $ve(e,t,n,r){if(!e.hasValue(r)||!(r in n))return;let i=e.getValue(r),o=t?(new hG).fromArray(t[r]):i.clone(),a=(new hG).fromArray(n[r]);return o.equals(a)?void 0:{update:e=>{i.lerpVectors(o,a,e)},start:()=>{i.copy(o)},end:()=>{i.copy(a)}}}function Jve(e,t,n,r,i){if(!e.hasValue(r)||!(r in n))return;let o=e.getValue(r),a=t?t[r]:void 0,s=n[r],l=a?jve(new jG,a,i):o.clone(),c=jve(new jG,s,i);return l.equals(c)?void 0:{update:e=>{o.lerpVectors(l,c,e)},start:()=>{o.copy(l)},end:()=>{o.copy(c)}}}function Zve(e,t,n,r,i){if(!e.hasValue(r)||!(r in n))return;let o=t?t[r]:void 0,a=n[r],s=e.getValue(r),l=o?"string"==typeof o?i.getColor(o).clone():(new PG).setRGB(o.r,o.g,o.b):s.clone(),c="string"==typeof a?i.getColor(a).clone():(new PG).setRGB(a.r,a.g,a.b);if(l.equals(c))return;let u=s.clone();return{update:t=>{e.getValue(r)!==u&&e.setValue(r,u),u.lerpColors(l,c,t)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function eye(e,t,n,r,i){if(!e.hasValue(r)||!(r in n))return;let o=t?t[r]:void 0,a=n[r],s=e.getValue(r),l=o?"string"==typeof o?i.getColor(o).clone():(new PG).setRGB(o.r,o.g,o.b):s.clone(),c="string"==typeof a?i.getColor(a).clone():new qse(a.r,a.g,a.b,a.a);if(l.equals(c))return;let u=s.clone();return{update:t=>{e.getValue(r)!==u&&e.setValue(r,u),u.lerpColors(l,c,t)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function tye(e,t,n,r="steps"){if(!e.hasValue(r)||!(r in n))return;let i=[],o=e.getValue(r),a=t?t[r]:o,s=n[r];return y6(a,s)||i.push({update:t=>{let n=[...o];for(let e=0;e<o.length;++e){let r=a[e],i=s[e];n[e]=dG.lerp(r,i,t)}e.setValue(r,n)},start:()=>{e.setValue(r,a)},end:()=>{e.setValue(r,s)}}),i.length?i:void 0}function nye(e,t,n,r="colors"){if(!e.hasValue(r)||!(r in n))return;let i=[],o=e.getValue(r),a=t?t[r]:o.map((e=>e.toArray())),s=n[r];for(let l=0;l<o.length;++l){let e=[...a[l]],t=[...s[l]];W9.isEqual(e,t)||i.push({update:n=>{o[l].fromArray(W9.lerp(e,t,n))},start:()=>{o[l].fromArray(e)},end:()=>{o[l].fromArray(t)}})}return i.length?i:void 0}function rye(e,t,n,r="texture"){var i,o;if(!e.hasValue(r)||!(r in n))return;let a=e.getNode("rotation"),s=(null==(i=null==t?void 0:t[r])?void 0:i.rotation)??0,l=(null==(o=n[r])?void 0:o.rotation)??0;if(a&&s!==l)return{update:e=>{a.value=dG.lerp(s,l,e)*dG.DEG2RAD},start:()=>{a.value=s*dG.DEG2RAD},end:()=>{a.value=l*dG.DEG2RAD}};let c=e.getNode("mat");if(!c)return;let u=t?t[r]:c,d=n[r],h=[...u.repeat],p=[...u.offset],A=[...d.repeat],f=[...d.offset],m=u.rotation??0,g=d.rotation??0;return H9.isEqual(h,A)&&H9.isEqual(p,f)&&m===g?void 0:{update:e=>{c.repeat=H9.lerp(h,A,e),c.offset=H9.lerp(p,f,e),c.rotation=dG.lerp(m,g,e),c.updateMatrix()},start:()=>{c.repeat=[...h],c.offset=[...p],c.rotation=m,c.updateMatrix()},end:()=>{c.repeat=[...A],c.offset=[...f],c.rotation=g,c.updateMatrix()}}}var iye=new jG,oye=new Eq;function aye(e,t,n,r,i){var o,a,s,l,c,u;let d,h,p,A,f,m,g,v,y=[];if(e instanceof nfe?(d=Vve("position",e,t,n,i),d&&y.push(d),p=zve("rotation",e,t,n,i),p&&y.push(p),A=Vve("shear",e,t,n,i),A&&y.push(A)):(v={slide:(null==(o=t.pathSnapping)?void 0:o.slide)??(null==(a=e.updatedPathSnapping)?void 0:a.slide)??(null==(s=e.dataPatched.pathSnapping)?void 0:s.slide)??0,offset:(null==(l=t.pathSnapping)?void 0:l.offset)??(null==(c=e.updatedPathSnapping)?void 0:c.offset)??(null==(u=e.dataPatched.pathSnapping)?void 0:u.offset)??0},m=zve("slide",v,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,n.pathSnapping??e.dataPatched.pathSnapping,i),m&&y.push(m),g=zve("offset",v,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,n.pathSnapping??e.dataPatched.pathSnapping,i),g&&y.push(g),!m&&!g&&(d=Hve("position",e,t,n,i),d&&y.push(d),h=Hve("scale",e,t,n,i),h&&y.push(h),p=function(e,t,n,r,i){var o;let a=(null==t?void 0:t.rotation)?t.rotation.map((e=>("string"==typeof e?Number(i.getVariable(e)??0):e)*dG.DEG2RAD)):void 0,s=null==(o=n.rotation)?void 0:o.map((e=>("string"==typeof e?Number(i.getVariable(e)??0):e)*dG.DEG2RAD));if(!s)return;let l=a?(new jG).fromArray(a):(new jG).setFromEuler(e.rotation),c=(new jG).fromArray(s);if(l.equals(c))return;let u=iye.subVectors(c,l);if(r&&u.toArray().every((e=>Math.abs(e)<2*Math.PI))){let t=(new NG).setFromEuler(oye.setFromVector3(l)),n=(new NG).setFromEuler(oye.setFromVector3(c));return{update:r=>{!function(e,t,n,r){if(0===r)return n.copy(e);if(1===r)return n.copy(t);let i=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(i>=1)return n.copy(e);let o=1-i*i;if(o<=Number.EPSILON){let i=1-r;return n.w=i*e.w+r*t.w,n.x=i*e.x+r*t.x,n.y=i*e.y+r*t.y,n.z=i*e.z+r*t.z,n.normalize(),n}let a=Math.sqrt(o),s=Math.atan2(a,i),l=Math.sin((1-r)*s)/a,c=Math.sin(r*s)/a;n.w=e.w*l+t.w*c,n.x=e.x*l+t.x*c,n.y=e.y*l+t.y*c,n.z=e.z*l+t.z*c}(t,n,e.quaternion,r)},start:()=>{e.rotation.setFromVector3(l)},end:()=>{e.rotation.setFromVector3(c)}}}return{update:t=>{iye.lerpVectors(l,c,t),e.rotation.setFromVector3(iye)},start:()=>{e.rotation.setFromVector3(l)},end:()=>{e.rotation.setFromVector3(c)}}}(e,t,n,r,i),p&&y.push(p),f=function(e,t,n,r){let i=n[e]?n[e]:void 0,o=r[e];if(!o)return;let a=t[e],s=i?(new gq).fromArray(i):a.clone(),l=new jG,c=new NG,u=new jG;s.decompose(l,c,u);let d=(new gq).fromArray(o),h=new jG,p=new NG,A=new jG;return d.decompose(h,p,A),s.equals(d)?void 0:{update:e=>{Uve.slerpQuaternions(c,p,e),Lve.lerpVectors(l,h,e),Rve.lerpVectors(u,A,e),a.compose(Lve,Uve,Rve)},start:()=>{a.compose(l,c,u)},end:()=>{a.compose(h,p,A)}}}("hiddenMatrix",e,t,n),f&&y.push(f))),d||h||p||f||m||g){let n=e instanceof nfe?()=>{e.updateWorldMatrix(!0)}:()=>{var n;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(null==(n=e.parent)?void 0:n.matrixWorldFusedFalse)&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),Phe(e)&&The(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,v))};y.push({update:n,start:n,end:n})}return y}function sye(e,t,n,r){let i=[];if(!("cloner"in n)||!e.cloner)return i;let o=e.cloner,a="cloner"in t?t.cloner:{},s=n.cloner;Cee.forEach((e=>{let t;t="count"===e?zve("count",o.parameters,a,s,r,!0):Gve(e,o.parameters,a??{},s,r),t&&i.push(t)}));let l=function(e,t,n,r){if("radial"!==e.parameters.type)return;let i=t.radial,o=n.radial;if(!o)return;let a=e.parameters.radial,s=[];return See.forEach((e=>{let t=Gve(e,a,i??{},o,r);t&&s.push(t)})),s}(o,a,s,r);(null==l?void 0:l.length)&&i.push(...l);let c=function(e,t,n,r){if("linear"!==e.parameters.type)return;let i=t.linear,o=n.linear;if(!o)return;let a=[],s=e.parameters.linear;return Bee.forEach((e=>{let t=Gve(e,s,i??{},o,r);t&&a.push(t)})),a}(o,a,s,r);(null==c?void 0:c.length)&&i.push(...c);let u=function(e,t,n,r){if("grid"!==e.parameters.type)return;let i=t.grid,o=n.grid;if(!o)return;let a=[],s=e.parameters.grid;return _ee.forEach((e=>{let t;t="count"===e?Nve(e,s,i??{},o,r,!0):Gve(e,s,i??{},o,r),t&&a.push(t)})),a}(o,a,s,r);(null==u?void 0:u.length)&&i.push(...u);let d=function(e,t,n,r){if("toObject"!==e.parameters.type)return;let i=t.toObject,o=n.toObject;if(!o)return;let a=[],s=e.parameters.toObject;return Eee.forEach((e=>{let t;t="count"===e?zve(e,s,i??{},o,r,!0):Gve(e,s,i??{},o,r),t&&a.push(t)})),a}(o,a,s,r);(null==d?void 0:d.length)&&i.push(...d);let h=function(e,t,n,r){if(!e.parameters.randomness)return;let i=t.randomnessObject,o=n.randomnessObject;if(!o)return;let a=[],s=e.parameters.randomnessObject;return Mee.forEach((e=>{let t=Gve(e,s,i??{},o,r);t&&a.push(t)})),a}(o,a,s,r);return(null==h?void 0:h.length)&&i.push(...h),i.length&&i.push({update:()=>{o.update()}}),i}function lye(e,t,n,r,i){let o,a,s,l,c,u,d,h,p,A,f,m,g,v,y,b=[];if("width"in e&&(o=zve("width",e,t,n,i),o&&b.push(o)),"height"in e&&(a=zve("height",e,t,n,i),a&&b.push(a)),e instanceof Mfe||e instanceof Ife){let r={...t.fill},o={...n.fill};void 0!==r.enabled&&r.enabled!==o.enabled&&(b.push(function(e,t){return{update:()=>{e instanceof Mfe&&(e.fill.enabled=t)}}}(e,!0)),r.enabled||Object.assign(r,{enabled:!0,color:{...r.color,a:0}}),o.enabled||Object.assign(o,{enabled:!0,color:{...o.color,a:0}})),s=Wve("color",e.fill,r,o,i),s&&b.push(s)}if(e instanceof Mfe){let r={...t.stroke},o={...n.stroke};(r.enabled||o.enabled)&&(b.push(function(e,t){return{update:()=>{e instanceof Mfe&&(e.stroke.enabled=t)}}}(e,!0)),r.enabled||Object.assign(r,{enabled:!0,color:{...r.color,a:0}}),o.enabled||Object.assign(o,{enabled:!0,color:{...o.color,a:0}})),l=Wve("color",e.stroke,r,o,i),l&&b.push(l),c=zve("thickness",e.stroke,r,o,i),c&&b.push(c)}if(e instanceof Mfe){let r={...t.dropShadow},o={...n.dropShadow};(r.enabled||o.enabled)&&(b.push(function(e,t){return{update:()=>{e instanceof Mfe&&(e.dropShadow.enabled=t)}}}(e,!0)),r.enabled||Object.assign(r,{enabled:!0,color:{...r.color,a:0}}),o.enabled||Object.assign(o,{enabled:!0,color:{...o.color,a:0}})),u=Wve("color",e.dropShadow,r,o,i),u&&b.push(u),d=zve("blurRadius",e.dropShadow,r,o,i),d&&b.push(d),p=zve("spread",e.dropShadow,r,o,i),p&&b.push(p),h=Vve("offset",e.dropShadow,r,o,i),h&&b.push(h)}if(e instanceof Mfe){let r={...t.innerShadow},o={...n.innerShadow};(r.enabled||o.enabled)&&(b.push(function(e,t){return{update:()=>{e instanceof Mfe&&(e.innerShadow.enabled=t)}}}(e,!0)),r.enabled||Object.assign(r,{enabled:!0,color:{...r.color,a:0}}),o.enabled||Object.assign(o,{enabled:!0,color:{...o.color,a:0}})),A=Wve("color",e.innerShadow,r,o,i),A&&b.push(A),f=zve("blurRadius",e.innerShadow,r,o,i),f&&b.push(f),g=zve("spread",e.innerShadow,r,o,i),g&&b.push(g),m=Vve("offset",e.innerShadow,r,o,i),m&&b.push(m)}if(e instanceof Mfe||e instanceof Ife){let r={...t.backgroundBlur},o={...n.backgroundBlur};(r.enabled||o.enabled)&&(b.push(function(e,t){return{update:()=>{e instanceof Mfe&&(e.backgroundBlur.enabled=t)}}}(e,!0)),r.enabled||Object.assign(r,{enabled:!0,radius:0}),o.enabled||Object.assign(o,{enabled:!0,radius:0})),v=zve("radius",e.backgroundBlur,r,o,i),v&&b.push(v)}if(e instanceof Mfe){let r={...t.layerBlur},o={...n.layerBlur};(r.enabled||o.enabled)&&(b.push(function(e,t){return{update:()=>{e instanceof Mfe&&(e.layerBlur.enabled=t)}}}(e,!0)),r.enabled||Object.assign(r,{enabled:!0,radius:0}),o.enabled||Object.assign(o,{enabled:!0,radius:0})),y=zve("radius",e.layerBlur,r,o,i),y&&b.push(y)}if(e instanceof Ife||e instanceof Tfe){let r=Nve("cornerRadius",e,t,n,i);r&&b.push(r)}return b}function cye(e,t,n,r,i){let o=[];return e.data.visible&&o.push(...aye(e,t,n,i,r)),e instanceof nfe?o.push(...lye(e,t,n,0,r)):(e.data.visible&&o.push(...sye(e,t,n,r)),Phe(e)?(e instanceof Ade&&e.data.visible&&o.push(...qve(e,t,n,r)),e.data.visible&&o.push(...function(e,t,n,r){let i=[];if(Array.isArray(e.material)){if(!("materials"in n)||!n.materials)return i;let o="materials"in t&&t.materials?t.materials:[],a=n.materials;e.material.forEach(((e,t)=>{if(!a[t])return;let n=o[t]??{},s=a[t];"string"==typeof n||"string"==typeof s||i.push(...Yve(e,n,s,r))}))}else{if(!("material"in n)||!n.material)return i;let o="material"in t&&t.material?t.material:{},a=n.material;if("string"==typeof o||"string"==typeof a)return i;i.push(...Yve(e.material,o,a,r))}return i}(e,t,n,r))):(e=>_he.is(e))(e)?e.data.visible&&o.push(...Kve(e,t,n,r)):(e=>e instanceof xhe)(e)&&o.push(...function(e,t,n,r){var i,o,a,s;let l=[],c="OrthographicCamera"===e.cameraType?null==(i=t.orthographic)?void 0:i.zoom:null==(o=t.perspective)?void 0:o.zoom,u="OrthographicCamera"===e.cameraType?null==(a=n.orthographic)?void 0:a.zoom:null==(s=n.perspective)?void 0:s.zoom;if(void 0!==u){let t=c??e.zoom,n=u;t!==n&&l.push({update:r=>{e.zoom=dG.lerp(t,n,r),e.updateProjectionMatrix()},start:()=>{e.zoom=t,e.updateProjectionMatrix()},end:()=>{e.zoom=n,e.updateProjectionMatrix()}})}if(void 0!==n.targetOffset){let i=zve("targetOffset",e,t,n,r);i&&l.push(i)}return l}(e,t,n,r))),o.length?{update:e=>{o.forEach((t=>t.update(e)))},start:e=>{o.forEach((t=>{var n;return null==(n=t.start)?void 0:n.call(t,e)}))},end:e=>{o.forEach((t=>{var n;return null==(n=t.end)?void 0:n.call(t,e)}))}}:void 0}var uye=new jG;function dye(e,t,n=!1){var r;let i=[],o=n=>{let r=n.data;delete n.states,n.currentState=null,n.reversibleToState=null,n.currentTransitionEvent=null;for(let e of r.states){let t={...e.data};n.states||(n.states={}),n.states[e.id]=nne.patch(r,t)}pye(e.scene,n,null,t,void 0!==r.events.find((e=>"Follow"===e.data.type||"LookAt"===e.data.type))),hye(e)};e.scene.traverse2D(o),e.traverseChildren((r=>{var a,s,l,c,u,d;if(n&&(null==(a=r.rigidBody)||a.setTranslation(r.position0,!0),null==(s=r.rigidBody)||s.setRotation(r.rotation0,!0),null==(l=r.rigidBody)||l.setLinvel(uye,!0),null==(c=r.rigidBody)||c.setAngvel(uye,!0)),!eie.is(r))return;let h=r.uuid,p=r.data;if(delete r.states,r.uuid===lee)return;let A=!1;i.some((t=>{var n;return null==(n=e.scene.find(h))?void 0:n.isDescendantOf(t)}))?A=!0:!0===(null==(u=p.physics)?void 0:u.fusedBody)&&"dynamic"===p.physics.rigidBody&&i.push(h),r.data=p,r.currentState=null,r.reversibleToState=null,r.currentTransitionEvent=null;for(let t of p.states){let n={...t.data};!0===e.data.globalPhysics.usePhysics&&p.physics&&("dynamic"===p.physics.rigidBody||A)&&(void 0!==t.data.position&&delete n.position,void 0!==t.data.rotation&&delete n.rotation,void 0!==t.data.hiddenMatrix&&delete n.hiddenMatrix),r.states||(r.states={}),r.states[t.id]=hte.patch(p,n)}pye(e.scene,r,null,t,void 0!==p.events.find((e=>"Follow"===e.data.type||"LookAt"===e.data.type))),hye(e),r instanceof sme&&r.frame&&(r.frame.traverse((e=>o(e))),null==(d=r.uiCanvas)||d.applySize())})),e.frame&&(e.frame.traverse((e=>o(e))),null==(r=e.uiCanvas)||r.applySize())}function hye(e){e.traverseEntity((t=>{for(let n of t.data.events){let t=[];switch(n.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":t.push(...n.data.actions);break;case"GameControl":for(let e of Object.values(n.data.gameActions))t.push(...e);break;case"DragDrop":t.push(...n.data.dragDropActions.drag,...n.data.dragDropActions.drop);break;case"Conditional":t.push(...n.data.inActions,...n.data.outActions)}for(let n of t)if("Create"===n.data.type&&"Yes"===n.data.hideBase){let t=e.scene.find(n.data.object);t&&(t.visible=!1)}}}))}function pye(e,t,n,r,i=!1){if(t instanceof Ade&&t.removeInteractionGeometry(r),t instanceof nfe?t.changeSelectedState(n,{shared:r},i):t.changeSelectedState(n,{scene:e,shared:r},i),t instanceof Ade&&t.updateGeometryGroupsIfNeeded(),t instanceof xhe&&t.updateCameraState(t.dataPatched,{scene:e,shared:r}),!(t instanceof nfe)){if(t.cloner)for(let e of t.cloner.children)e.playModeVisible=void 0;t.updateVisible()}}function Aye(e){let t;if(5===e.easing){let{control1:n,control2:r}=e;t=`cubicBezier(\n\t\t\t${n[0]}, ${n[1]}, ${r[0]}, ${r[1]}\n\t\t)`}else if(6===e.easing){let{mass:n,stiffness:r,damping:i,velocity:o}=e;t=`spring( ${n}, ${r}, ${i}, ${o} )`}else{let n;switch(e.easing){case 0:default:n=nee.linear;break;case 1:n=nee.ease;break;case 2:n=nee.easeIn;break;case 3:n=nee.easeOut;break;case 4:n=nee.easeInOut}let[r,i,o,a]=n;t=`cubicBezier( ${r}, ${i}, ${o}, ${a} )`}return{duration:Math.max(e.duration,1e-4),easing:t}}function fye(e){let t={delay:0,loop:-1===e.repeat||e.repeat+1};if(0===e.repeat)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay}return"alternate"===t.direction&&(t.delay/=2,t.endDelay/=2,"start"===e.delayDirection?(t.pingPongDelayCorrection=t.delay,"number"==typeof t.loop&&t.loop%2==0&&(t.pingPongEndDelayCorrection=t.delay)):"end"===e.delayDirection?"number"==typeof t.loop&&t.loop%2!=0&&(t.pingPongEndDelayCorrection=t.endDelay):"start-end"===e.delayDirection&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var mye={type:"beginState"},gye={type:"completeState",isfromEntity:!1},vye=class{constructor(e,t,n,r,i,o){if(this.object=e,this.data=r,this.sharedAssets=i,this.allowSlerp=o,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),0===this.targets.t||1===this.targets.t?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let e=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=e,this.object.dispatchEvent({type:"beginState",state:e}),this.object instanceof nfe||this.object.traverseEntity((e=>{e!==this.object&&e instanceof xhe&&e.dispatchEvent(mye)}))},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let e=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=e,this.object.dispatchEvent({type:"completeState",state:e}),this.object instanceof nfe||this.object.traverseEntity((e=>{e!==this.object&&e instanceof xhe&&e.dispatchEvent(gye)}))},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=cye(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},void 0===t){let e=bye(this.object,this.object.currentState===n?this.object.prevState:this.object.currentState);if(!e)throw new Error("Missing property");this.from=e}else{let e=bye(this.object,t);if(!e)throw new Error("Missing property");this.from=e}if(void 0===n)throw new Error("Missing property");{let e=bye(this.object,n);if(!e)throw new Error("Missing property");this.to=e}this.useCurrentState=void 0===t||void 0===n,this.params={targets:this.targets,t:1,autoplay:!1,...fye(r),...Aye(r),change:this.onChange},this.callback=cye(this.object,void 0===t?{}:this.from.data,void 0===n?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},yye=class extends $W{constructor(e,t,n,r,i){var o;if(super(),this.eventType=e,this.data=t,this.page=n,this.shared=r,this.condition=i,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{var e;"normal"!==this.data.tweens[0].data.direction&&(this.toggleIsForward=!this.toggleIsForward),!1!==this.timelineNeedsRebuild&&(null==(e=this.timeline)||e.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let a=this.page.scene.find(t.object)??(null==(o=this.page.uiCanvas)?void 0:o.find(t.object))??this.page.scene.find2DInUIObjects(t.object);if(!a)throw new Error("Missing property");if(!a.states)throw new Error("Missing property");if(this.object=a,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay="start-once"===t.tweens[0].data.delayDirection?t.tweens[0].data.delay:0,this.init()}get playing(){var e;return!1===(null==(e=this.timeline)?void 0:e.paused)}get changeBegan(){return this.tweens.some((e=>e.changeBegan))??!1}init(){this.initialCurrentState=bye(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return"Toggle"===this.data.runMode&&x9(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:n=!1}={}){var r,i,o,a;try{let a=fye(this.data.tweens[0].data);n&&"number"==typeof a.loop&&a.loop--,null==(r=this.timeline)||r.pause(),this.timeline=Ove.timeline({autoplay:!1,...a,...!0===a.loop||a.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let s=this.tweens.findIndex((e=>null==e?void 0:e.changeBegan));if(!0===t&&(this.timelineNeedsRebuild=!0),e){let e=-1===s?0:s;for(let t=e;t<this.data.tweens.length-1;t++){let n,r=this.data.tweens[t],o=this.data.tweens[t+1];t!==e||!0!==this.object.wasMovedByUser&&!0!==(null==(i=this.object.previousAction)?void 0:i.changeBegan)?n=void 0===r.data.state?this.currentState:r.data.state:(n=void 0,this.object instanceof xhe&&(this.object.wasMovedByUser=!1));let l=new vye(this.object,n,void 0===o.data.state?this.currentState:o.data.state,o.data,this.shared,this.data.allowSlerp??!1);-1!==s&&t===e&&Object.assign(l.params,{startOnceDelay:0}),this.tweens[t]=l,this.timeline.add(l.params,this.timeline.duration+(t===e?a.delay:0))}this.timeline.duration+=a.endDelay}else{let e=-1===s?this.data.tweens.length-1:s+1;for(let t=e;t>0;t--){let n,r=this.data.tweens[t],i=this.data.tweens[t-1];t!==e||!0!==this.object.wasMovedByUser&&!0!==(null==(o=this.object.previousAction)?void 0:o.changeBegan)?n=void 0===r.data.state?this.currentState:r.data.state:(n=void 0,this.object instanceof xhe&&(this.object.wasMovedByUser=!1));let l=new vye(this.object,n,void 0===i.data.state?this.currentState:i.data.state,r.data,this.shared,this.data.allowSlerp??!1);-1!==s&&t===e&&Object.assign(l.params,{startOnceDelay:0}),this.tweens[t-1]=l,this.timeline.add(l.params,this.timeline.duration+(t===e?a.endDelay:0))}this.timeline.duration+=a.delay}}catch(ree){Error}!0===(null==(a=this.object.previousAction)?void 0:a.playing)&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(!1===Fye(this.shared,this.condition)||x9(this.eventType)&&"Once"===this.data.runMode&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;clearTimeout(this.timeoutId);let e=fye(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout((()=>{try{this.buildTimeline(),this.timeline.play()}catch(w8){Error}}),this.startOnceDelay+e)}pause(){var e;null==(e=this.timeline)||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=void 0===this.data.tweens[0].data.state?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof nfe?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;if(!1===Fye(this.shared,this.condition))return!1;void 0===this.timeline&&this.buildTimeline(),null==(t=this.timeline)||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(!1===Fye(this.shared,this.condition))return!1;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?(null==(t=this.timeline)||t.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout((()=>{var e;null==(e=this.timeline)||e.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()}),this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function bye(e,t){var n;let r,i;if("string"==typeof t?(r=t,i=null==(n=e.states)?void 0:n[r]):null===t&&(r=null,i=e.data),void 0!==r&&void 0!==i)return{id:r,data:i}}var wye={type:"beginState"},xye={type:"completeState",isfromEntity:!1},Cye={type:"requestRender"},Sye=class extends $W{constructor(e,t,n,r){super(),this.data=e,this.page=t,this.shared=n,this.condition=r,this.toggleIsForward=!1,this.posStart=new jG,this.posEnd=new jG,this.qStart=new NG,this.qEnd=new NG,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let n={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=Ove({targets:n,t:1,...Aye(this.data),update:()=>{0===n.t&&("Toggle"!==this.data.runMode||this.toggleIsForward?(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)):this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)),this.page.activeCamera.dispatchEvent(wye));let e=this.page.activeCamera;e.position.lerpVectors(this.posStart,this.posEnd,n.t),e.quaternion.slerpQuaternions(this.qStart,this.qEnd,n.t),e.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*n.t,e.wasMovedBySwitchCameraAction=!0,e.updateMatrix(),e.updateMatrixWorld(),e.updateProjectionMatrix(),e.dispatchEvent(Cye),1===n.t&&e.dispatchEvent(xye)}})}switchCamera(e){let t=this.page.activeCamera,n=this.page.scene.find(e);if(!n||!n.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(n),t.dispatchEvent({type:"cameraChange",camera:n})}play(){if(!1===Fye(this.shared,this.condition))return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),null==(e=this.animation)||e.play()):this.switchCamera(this.data.targetCamera)}),1e3*this.data.delay)}catch{}}pause(){var e;null==(e=this.animation)||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,n;if(!1===Fye(this.shared,this.condition))return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{this.playing?(null==(t=this.animation)||t.pause(),this.toggleIsForward=e??!this.toggleIsForward,this.buildAnimation(!0),null==(n=this.animation)||n.play()):this.timeoutId=window.setTimeout((()=>{var t,n;this.toggleIsForward=e??!this.toggleIsForward,this.data.animate?(null==(t=this.animation)||t.pause(),this.buildAnimation(),null==(n=this.animation)||n.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(xye),this.page.activeCamera.dispatchEvent(Cye))}),1e3*this.data.delay)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function Bye(e){let t=null==e?void 0:e.tracks.filter((e=>"vector"===e.ValueTypeName||"quaternion"===e.ValueTypeName)).map((e=>e.times.length));if(null==t?void 0:t.length){let e=w6(t);return e&&e>2?e:2}return 2}var _ye=class extends $W{constructor(e,t,n,r,i){var o,a,s;super(),this.data=e,this.page=t,this.animationControls=n,this.shared=r,this.condition=i,this.startOnceDelay=0,this.toggleIsForward=!1;let l=e.object,c=t.scene.find(e.object);c&&Array.isArray(c.identity)&&(l=c.identity[0]),this.data={...e,object:l};let u=this.animationControls.clipIdToAction[e.clipId+"/"+l];if(this.duration=(null==(o=null==u?void 0:u.getClip())?void 0:o.duration)??1,this.data.crop2){let e=Bye(null==u?void 0:u.getClip());this.leftFrameTime=this.data.crop2[0]/(e-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(e-1)*this.duration}else{let e=null==(s=null==(a=null==u?void 0:u.getClip())?void 0:a.tracks[0])?void 0:s.times.length;e&&e>1?(this.leftFrameTime=this.data.crop[0]/e*this.duration,this.rightFrameTime=this.data.crop[1]/e*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){var e;return(null==(e=this.threeAnimAction)?void 0:e.isRunning())??!1}play(e=!1){if(!1===Fye(this.shared,this.condition))return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((()=>{var t;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let n=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach((([t,r])=>{let i=t.split("/")[1];this.threeAnimAction!==r&&i===n&&r.isRunning()&&(e?r.fadeOut(.2):r.stop())})),e&&(null==(t=this.threeAnimAction)||t.fadeIn(.2))}),this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;null==(e=this.threeAnimAction)||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=dG.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(!1===Fye(this.shared,this.condition))return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout((()=>{var e;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let n=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach((([e,r])=>{let i=e.split("/")[1];this.threeAnimAction!==r&&i===n&&r.isRunning()&&(t?r.fadeOut(.2):r.stop())})),t&&(null==(e=this.threeAnimAction)||e.fadeIn(.2))}}),this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var e;let t=null==(e=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])?void 0:e.getClip();t&&(t.duration=this.duration),this.pause()}},Eye=class{constructor(e,t,n,r,i){this.data=e,this.page=t,this.eventManager=n,this.shared=r,this.condition=i,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(!1===Fye(this.shared,this.condition))return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout((()=>{this.play()}),1e3*this.data.delay))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every((e=>e.uuid!==this.data.target)))return;"fade"===this.data.transition&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,1e3*this.data.duration),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity((e=>{"ParticleSystem"===e.type&&(e.sleep(),e.wakeUp(),e.data.autoPlay?e.start():e.stop())})),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),dye(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},Mye=class{constructor(e,t,n,r){this.data=e,this.page=t,this.shared=n,this.condition=r,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Fye(this.shared,this.condition)}dispatch(){if(!1===this.evaluatedCondition)return!1;let e=this.shared.getVariable(this.data.variableId),t=Uae(this.data.expression,this.shared,Cte.typeOfVariable(e));void 0!==t&&this.shared.updateVariable(this.data.variableId,"string"==typeof t?{textValue:t}:t)}dispose(){}},Pye=class{constructor(e,t,n,r){this.data=e,this.page=t,this.shared=n,this.condition=r,this.timeoutId=null}dispatchInner(){if(!1===Fye(this.shared,this.condition))return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if("PlayPause"===this.data.mode)void 0===this.shared.getDynamicVariableToggleIsForward(this.data.variableId)&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"===e?"Paused":"Playing");else if("Play"===this.data.mode&&"Playing"!==e)void 0===this.shared.getDynamicVariableToggleIsForward(this.data.variableId)&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if("Stop"===this.data.mode&&"Stopped"!==e)this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if("Pause"===this.data.mode&&"Paused"!==e)this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if("Restart"===this.data.mode)this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if("Toggle"===this.data.mode){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);"Playing"===e?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,void 0!==t&&!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);"PlayPause"===this.data.mode&&"Playing"===t&&(e=this.data.pauseDelay),0!==e?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((()=>{this.timeoutId=null,this.dispatchInner()}),e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},Tye=class{constructor(e,t,n,r){this.data=e,this.page=t,this.shared=n,this.condition=r}dispatch(){if(!1===Fye(this.shared,this.condition))return!1;("single"===this.data.target?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach((e=>{var t;this.shared.getVariable(e);let n=null==(t=this.shared.data.variables.data(e))?void 0:t.value;void 0!==n&&this.shared.updateVariable(e,n),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(ode(e))}))}dispose(){}},Dye=class{constructor(e,t,n,r){this.data=e,this.page=t,this.shared=n,this.condition=r}dispatch(){var e;if(!1===Fye(this.shared,this.condition))return!1;this.data.userAPIId&&(null==(e=this.shared.getUserAPI(this.data.userAPIId))||e.callUserAPI(this.shared))}dispose(){}};function Fye(e,t){if(void 0===t)return!0;if(0===t.expression.length)return!1;let n=Uae(t.expression,e,"boolean");return t.negate?!n:!!n}function Iye(e,t,n,r,i,o){let a={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},s=t=>({id:l,data:c})=>{try{"Audio"===c.type?j9[e.type].includes("Audio")&&a.Audio.push(new _ge(l,c,o,r,t)):"Video"!==c.type||o instanceof nfe?"Particles"===c.type?j9[e.type].includes("Particles")&&a.Particles.push(new Ege(c,n,r,t)):"Link"===c.type?j9[e.type].includes("Link")&&a.Link.push(new Tge(c,i.controlsManager,r,t)):"Create"===c.type?j9[e.type].includes("Create")&&a.Create.push(new Wye(c,n,i.controlsManager,r,t)):"Destroy"===c.type?j9[e.type].includes("Destroy")&&a.Destroy.push(new Dge(c,n,i.controlsManager,r,t)):"Reset"===c.type?j9[e.type].includes("Reset")&&a.Reset.push(new Fge(c,n,r,i,t)):"Transition"===c.type?j9[e.type].includes("Transition")&&a.Transition.push(new yye(e.type,c,n,r,t)):"SwitchCamera"===c.type?j9[e.type].includes("SwitchCamera")&&a.SwitchCamera.push(new Sye(c,n,r,t)):"SceneTransition"===c.type?j9[e.type].includes("SceneTransition")&&a.SceneTransition.push(new Eye(c,n,i,r,t)):"Animation"===c.type?j9[e.type].includes("Animation")&&a.Animation.push(new _ye(c,n,i.animationControls,r,t)):"SetVariable"===c.type?j9[e.type].includes("SetVariable")&&a.SetVariable.push(new Mye(c,n,r,t)):"DynamicVariablePlay"===c.type?j9[e.type].includes("DynamicVariablePlay")&&a.DynamicVariablePlay.push(new Pye(c,n,r,t)):"Conditional"===c.type?j9[e.type].includes("Conditional")&&(c.ifActions.forEach(s({expression:c.condition,negate:!1})),c.elseActions.forEach(s({expression:c.condition,negate:!0}))):"ClearLocalStorage"===c.type?j9[e.type].includes("ClearLocalStorage")&&a.ClearLocalStorage.push(new Tye(c,n,r,t)):"UserAPI"===c.type&&j9[e.type].includes("UserAPI")&&a.UserAPI.push(new Dye(c,n,r,t)):j9[e.type].includes("Video")&&a.Video.push(new zye(l,c,o,r,t))}catch(X9){}};return t.forEach(s()),a}function kye(e){Object.values(e).forEach((e=>{e.forEach((e=>{(e instanceof _ge||e instanceof zye||e instanceof Ege||e instanceof _ye||e instanceof yye||e instanceof Wye||e instanceof Dge||e instanceof Sye||e instanceof Eye||e instanceof Fge||e instanceof Mye||e instanceof Pye)&&e.dispose()}))}))}var Oye=new Map,Lye=new Map,Rye=class{constructor(e,t,n){this.data=t,this.delay=0,this.status="stopped";let{layerId:r,loop:i,volume:o,delay:a}=t;if(this.object=n,void 0===r)throw new Error("Missing property");let s=function(e,t){let n;if("material"in e){let r=e.material;n=Array.isArray(r)?e.material[0].layers.find((e=>e.uuid===t)):e.material.layers.find((e=>e.uuid===t))}if(n)return n.color.texture.image.img instanceof HTMLVideoElement?n.color.texture.image.img:void 0}(n,r);s&&(this.videoElement=s,this.videoElement.loop=i===1/0,L6&&(this.videoElement.autoplay=!0),void 0!==o&&(this.videoElement.volume=o)),void 0!==a&&(this.delay=a),Lye.has(n.uuid)?Lye.get(n.uuid).push(this):Lye.set(n.uuid,[this]),Oye.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout((()=>{this.unMute()}),100)):this.unMute(),this.delayTimerId=window.setTimeout((()=>{if(!this.videoElement)return;let e=this.videoElement.play();void 0!==e&&e.then((e=>{})).catch((e=>{this.play()})),this.clearDelay()}),this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){"stop"===this.data.toggle?"playing"===this.status?this.stop():(this.stop(),this.play()):"pause"===this.data.toggle?"playing"===this.status?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},Uye=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=Oye.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{t[this.data.interaction](),this.disposeDelay()}),this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=Lye.get(e);!(null==t?void 0:t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{t.forEach((e=>e[this.data.interaction]())),this.disposeDelay()}),this.data.delay)):t.forEach((e=>e[this.data.interaction]())))}pauseAllVideos(){let e=[...Lye.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{e.forEach((e=>{e.forEach((e=>{e[this.data.interaction]()}))})),this.disposeDelay()}),this.data.delay)):e.forEach((e=>{e.forEach((e=>{e[this.data.interaction]()}))})))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},zye=class{constructor(e,t,n,r,i){if(this.data=t,this.shared=r,this.condition=i,"play"===t.interaction)this.interaction=new Rye(e,t,n);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new Uye(t)}}dispatchBasic(){if(!1===Fye(this.shared,this.condition))return!1;this.interaction instanceof Rye?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(!1===Fye(this.shared,this.condition))return!1;this.interaction instanceof Rye?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},Nye=(()=>{let e,t,n,r;function i(n){!e&&!jye()&&(null==t?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(o)),n&&(t=n,r=n.requestRender)}function o(i){let a=n?i-n:0,s=t.sharedGameControlGlobals.createdObjects,l=t.sharedGameControlGlobals.nCreatedPerAction,c=s.length,u=0;for(;u<c;){let e=s[u];void 0===e.userData.createdTime&&(e.userData.createdTime=i),void 0===e.userData.lifetime&&void 0===e.userData.quantity||e.userData.lifetime&&i-e.userData.createdTime<e.userData.lifetime||e.userData.quantity&&l[e.userData.actionId]<=e.userData.quantity?(e.userData.velocity&&(e.position.addScaledVector(e.userData.velocity,a/1e3),e.updateMatrix(),r()),u++):(l[e.userData.actionId]>e.userData.quantity&&l[e.userData.actionId]--,s.splice(u,1),e.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&e.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(e.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(e.rigidBody)):(e.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter((e=>void 0!==e.bvhGeometry))),c--,r())}e=u>0?requestAnimationFrame(o):void 0,n=u>0?i:void 0}return typeof document<"u"&&document.addEventListener("visibilitychange",(function(){jye()?e&&(cancelAnimationFrame(e),e=void 0,n=void 0):i()})),i})();function jye(){return!!document&&document.hidden}var Hye=new NG,Qye=new jG,Vye=new jG,Wye=class{constructor(e,t,n,r,i){this.data=e,this.page=t,this.controlsManager=n,this.shared=r,this.condition=i,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=dG.generateUUID(),this.dispatch=()=>{if(!1===Fye(this.shared,this.condition))return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()},this.dispatchFromStart=()=>{if(!1===Fye(this.shared,this.condition))return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))},this.dispatchThrottled=D6(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{null===this.intervalId&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let e=new rie(this.object);if(e.playModeVisible=!0,e.expand(),"world"!==this.data.coordinateSystem){let t=this.data.coordinateSystem,n=this.page.scene.find(t);n&&(n.updateMatrixWorldSVD(),e.hiddenMatrix.copy(n.matrixWorldRigid))}e.scale.copy(this.object.scale),e.position.fromArray(this.data.position),e.rotation.fromArray(this.data.rotation),e.updateMatrix(),this.page.add(e);let t=this.controlsManager.sharedGameControlGlobals;t.createdObjects.push(e),void 0===t.nCreatedPerAction[this.uniqueId]?t.nCreatedPerAction[this.uniqueId]=1:t.nCreatedPerAction[this.uniqueId]++,e.updateWorldMatrix(!0,!0),e.traverseObject(this.traverseObjectCB),Nye(),this.controlsManager.requestRender()},this.traverseObjectCB=e=>{var t,n,r,i;let o;if(e.hasNonUniformScale&&e.updateMatrixWorldSVD(),this.controlsManager.sharedGameControlGlobals.rapierWorld){if(e instanceof rhe){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;o=e.object}else if(e instanceof rie)o=e.object;else if(o=e,null==(t=o.dataPatched.cloner)?void 0:t.hideBase)return!0}else{if(e instanceof rhe)return;o=e instanceof rie?e.object:e}"Time"===this.data.destroy?e.userData.lifetime=1e3*this.data.lifetime:"Quantity"===this.data.destroy&&(e.userData.quantity=this.data.destroyAfterQuantity,e.userData.actionId=this.uniqueId);let a=(new jG).fromArray(this.data.velocity),s=o.dataPatched;if(!("visibility"===s.physics.enabled?!s.visible:!s.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(e,o,{fromCreate:!0,dynamic:this.data.dynamic}),"Collision"===this.data.destroy&&(null==(n=e.rigidBody)||n.collider(0).setActiveEvents(1),e.userData.hasCollisionDestroy=!0),e.matrixWorld.decompose(Qye,Hye,Vye),a.applyQuaternion(Hye),this.data.velocity.some((e=>0!==e))&&this.data.dynamic&&(null==(r=e.rigidBody)||r.setLinvel(a.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in e.object&&this.controlsManager.addBoundsTree(e),this.data.velocity.some((e=>0!==e))&&this.data.dynamic&&(e.userData.velocity=a)),!0===(null==(i=o.dataPatched.physics)?void 0:i.fusedBody)))return!0};let o=this.page.scene.find(this.data.object);if(!o)throw new Error("Missing Property");if(this.object=o,"world"!==this.data.coordinateSystem&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");Nye(n)}dispose(){null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach((e=>window.clearTimeout(e))),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},Gye=.02;new jG;var qye=new jG,Kye=new jG,Yye=new jG,Xye=new jG,$ye=new jG,Jye=new jG,Zye=new gq,ebe=new gq,tbe=new gq;new gq;var nbe=new NG,rbe=new NG,ibe=new Eq(0,0,0,"YXZ"),obe=new jG(1,0,0),abe=new jG(0,1,0),sbe=new jG(0,0,1),lbe=new jG(1,1,1);new lq;var cbe=new M0,ube=new VG,dbe={type:"requestRender"},hbe={type:"updateMatrix"},pbe=Math.PI/6,Abe=class extends $W{constructor(e,t,n,r,i,o,a,s,l){var c;super(),this.object=e,this.domElement=t,this.data=n,this.gloabalPhysics=r,this.controlsManager=i,this.cameraFollow=o,this.camera=a,this.page=s,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new gq,this.target0=new jG,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=200,this.euler0=new Eq(0,0,0,"YXZ"),this.position0Cam=new jG,this.quat0Cam=new NG,this.scale0Cam=new jG,this.hiddenMatrix0Cam=new gq,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new M0(new jG(0,-40,0),new jG(0,40,0)),matrix:new gq,position:new jG,rotation:new NG},this.euler=new Eq(0,0,0,"YXZ"),this.eulerDelta=new jG,this.lastPosition=new jG,this.lastCameraQuaternion=new NG,this.lastCameraPosition=new jG,this.PI_2=Math.PI/2,this.prevMouse=new hG,this.velocityTarget=new jG,this.velocity=new jG,this.directionXZ=new jG,this.rotVelocityStick=new jG,this.rotVelocityTarget=new jG,this.rotVelocity=new jG,this.rotDirection=new jG,this.nonColliderRotOffset=new gq,this.nonColliderPosOffset=new gq,this.firstPointerId=-1,this.rot=new jG,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new gq,this.objectToTarget=new jG,this.objectToTarget0=new jG,this.objectToCamXZ=new jG,this.objectToCamXZ0=new jG,this.targetToCamera=new jG,this.targetToCamera0=new jG,this.cameraPolarAxis0=new jG,this.targetPos=new jG,this.targetQuat=new NG,this.lerpFactorPos=(new jG).setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new NG,this.objXZQuatInv=new NG,this.objXZRotMat=new gq,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new jG,this.pushedVelocity=new jG,this.groundYRotation=0,this.objectRealQuat=new NG,this.colliderWorldQuat=new NG,this.groundNormal=new jG,this.groundTilt=new NG,this.groundTiltInv=new NG,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new jG,this.quaternion=new NG,this.scale=new jG,this.initialAction=!0,this.onPointerDown=e=>{var t;!(e.target===this.domElement||e.target instanceof HTMLElement&&"SPLINE-VIEWER"===e.target.tagName&&(null==(t=e.target.shadowRoot)?void 0:t.contains(this.domElement)))||-1!==this.firstPointerId||(this.firstPointerId=e.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),"keys"!==this.rotBy&&!U6&&!z6&&this.domElement.requestPointerLock(),this.prevMouse.set(e.clientX,e.clientY))},this.onPointerUp=e=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),"mouse"===e.pointerType&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=e=>{if(e.pointerId!==this.firstPointerId)return;let t=e.clientX-this.prevMouse.x,n=e.clientY-this.prevMouse.y;this.prevMouse.set(e.clientX,e.clientY),"mouse"===e.pointerType&&"keys"!==this.rotBy&&(z6&&N6<15.5&&!U6?(this.eulerDelta.y=-t*this.mouseOrbitSensitivity,this.eulerDelta.x=-n*this.mouseOrbitSensitivity):(this.eulerDelta.y=-e.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-e.movementY*this.mouseOrbitSensitivity)),"mouse"!==e.pointerType&&"drag"===this.rotByTouch&&(this.eulerDelta.y=-t*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-n*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=e=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?Abe.isLocked=!0:Abe.isLocked=!1},this.onPointerlockError=()=>{},this.handleVisibilityChange=()=>{if(null==document?void 0:document.hidden)for(let e in this.movementState)this.movementState[e]=0},this.onKeyDown=e=>{!(e.target instanceof HTMLInputElement)&&("ArrowLeft"===e.code||"ArrowUp"===e.code||"ArrowRight"===e.code||"ArrowDown"===e.code||"Space"===e.code)&&e.preventDefault();for(let t of this.keyAssignments)if(e.key.toUpperCase()===t[1]||e.key===t[1]){this.movementState[t[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=e=>{for(let t of this.keyAssignments)if(e.key.toUpperCase()===t[1]||e.key===t[1]||e.code.slice(3,e.code.length).toUpperCase()===t[1]){this.movementState[t[0]]=0;break}},this.copyVRGamePadValues=(e,t)=>{for(let n=2;n<4;n++){let r=e.axes[n];0===t?2===n?this.movementState.movePosX=r:this.movementState.movePosZ=r:(e.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,2===n?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(r)>=.3&&(this.vrEulerYOffset+=r<0?1:-1),this.movementState.rotPosY=r):"fly"===this.moveMode&&(this.movementState.moveNegY=r))}},this.sharedGameControlGlobals=i.sharedGameControlGlobals,e===a&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let u=this.euler0.clone(),d=u.y;if(this.objectRealQuat.copy(this.quaternion),u.y=0,this.quaternion.setFromEuler(u),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),u.set(0,d,0),this.quaternion.setFromEuler(u),this.rot.setFromEuler(u),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||!0===this.cameraFollow)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),!0===this.cameraFollow){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy(null==(c=this.camera)?void 0:c.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let e,t,n=new jG(0,0,-1).applyQuaternion(this.camera.quaternion),r=(new jG).subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(r),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ),Math.abs(n.y)<1e-6?(r.y=0,n.y=0,t=r.projectOnVector(n)):t=r.y/n.y>0?n.multiplyScalar(r.y/n.y):n.multiplyScalar(r.length()),this.targetToCamera0.copy(t).negate(),e=this.camera.position.clone().add(t),this.objectToTarget0.subVectors(e,this.position);let i=(new Eq).setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-i.x,i.x=0,i.z=0,i.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(i)}if(this.object instanceof xhe&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=n.rotByTouch??"joystick",this.rotBy=n.rotBy??"keys",this.rotationMode=n.rotationMode??"normal",this.moveMode=n.moveMode??"walk",this.collisionEnabled=n.collisionEnabled,this.speedTranslate=1*(n.speedTranslate??250),this.speedOrbit=.025*(n.speedRotate??100),this.mouseOrbitSensitivity=16e-6*(n.speedRotate??100),this.keyAssignments=n.keyAssignments.map((e=>{let t=[e[0],e[1]];return"▲"===t[1]?t[1]="ArrowUp":"◀"===t[1]?t[1]="ArrowLeft":"▼"===t[1]?t[1]="ArrowDown":"▶"===t[1]?t[1]="ArrowRight":"⇧"===t[1]?t[1]="Shift":"↵"===t[1]?t[1]="Enter":"Space"===t[1]?t[1]=" ":"⌘"===t[1]?t[1]="Meta":"Ctrl"===t[1]?t[1]="Control":"Esc"===t[1]&&(t[1]="Escape"),t})),"mouse"===n.rotBy){let e;e=this.keyAssignments.findIndex((e=>"rotNegX"===e[0])),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex((e=>"rotPosX"===e[0])),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex((e=>"rotPosY"===e[0])),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex((e=>"rotNegY"===e[0])),-1!==e&&(this.keyAssignments[e][1]="")}this.lerpFactorPosStart=1-.02**(1/(60*(n.delayPos[0]??.3))),this.lerpFactorPosEnd=1-.02**(1/(60*(n.delayPos[1]??.3))),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/(60*(n.delayRot[0]??.3))),this.lerpFactorRotEnd=1-.02**(1/(60*(n.delayRot[1]??.3))),this.lerpFactorPosCamera=1-.02**(1/(60*(n.delayPosCamera??.3))),this.lerpFactorRotCamera=1-.02**(1/(60*(n.delayRotCamera??.3))),this.gravity=12*(this.gloabalPhysics.gravity??Kee.defaultData.gravity),this.usePhysics=this.gloabalPhysics.usePhysics??Kee.defaultData.usePhysics,this.jumpPower=20*n.jumpPower,this.resetYPosition=this.position.y+Math.abs(n.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=n.alignToGround??!1,this.orientMode=n.autoOrientMove?n.orientMode:"none",this.orientWith=n.orientWith??Tte.defaultDataThirdPerson.orientWith,this.slopeThresh=65*Math.PI/180,"capsule"===n.collider.type?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=n.collider.height/2-n.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=n.collider.height*Gye/this.pixelsPerMeter,this.stepThresh=.3*n.collider.height/this.pixelsPerMeter,this.colliderHeight=n.collider.height):"sphere"===n.collider.type?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*n.collider.radius*Gye/this.pixelsPerMeter,this.stepThresh=2*n.collider.radius*.3/this.pixelsPerMeter,this.colliderHeight=2*n.collider.radius):(this.offset=n.collider.height*Gye/this.pixelsPerMeter,this.stepThresh=.3*n.collider.height/this.pixelsPerMeter,this.colliderHeight=n.collider.height),this.collider.type=n.collider.type;let h=(new jG).fromArray(n.collider.position),p=(new NG).setFromEuler((new Eq).fromArray([...n.collider.rotation,"XYZ"]));this.collider.position.copy(h).multiply(this.scale),this.collider.rotation.copy(p),this.collider.matrix.compose(h,p,lbe),void 0!==n.cameraXAxis&&(this.cameraXAxis=n.cameraXAxis,this.cameraYAxis=n.cameraYAxis,this.minPolarAngle=n.cameraRotXLimits[0],this.maxPolarAngle=n.cameraRotXLimits[1],this.minAzimuthAngleRel=n.cameraRotYLimits[0],this.maxAzimuthAngleRel=n.cameraRotYLimits[1]),this.forwardDir=n.forwardDirection??"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=n.runMultiplier??2;let A=2*n.navmesh.destinationHelperRadius;if(A>0){let e=new v8;e.push({fi:0,data:{...Pee.defaultData("light","phong"),alpha:0},id:"layer1"}),e.push({fi:0,data:{...Pee.defaultData("color"),color:n.navmesh.destinationHelperColor,alpha:n.navmesh.destinationHelperColor.a},id:"layer2"});let t=new Bue({layers:e},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new TK(Sie.create({parameters:{width:A,height:A/10,hollow:.7}}),t),this.navMeshPathDest.material.userData.opacity0=n.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let e=(new Eq).setFromQuaternion(this.quaternion,"YXZ"),t=e.y;this.objectRealQuat.copy(this.quaternion),e.y=0,this.quaternion.setFromEuler(e),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),e.set(0,t,0),this.quaternion.setFromEuler(e),this.rot.setFromEuler(e),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof xhe?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();!0===this.cameraFollow&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(null==(e=this.navMeshPathDest)?void 0:e.parent)&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;void 0!==e.gameActions&&(this.actions={},Pte.list.forEach((n=>{this.actions[n]=Iye({...e,disabled:!1,type:"GameControl"},e.gameActions[n],this.page,t,this.controlsManager.eventManager,this.object)}))),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),kye(this.actions.idle),kye(this.actions.move),kye(this.actions.run),kye(this.actions.jump)}dispatchStartEvent(e){void 0!==this.actions[e]&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach((e=>{e.play()})),this.actions[e].Animation.forEach((e=>{e.play(!1===this.initialAction)})),this.actions[e].Create.forEach((e=>{e.dispatchStart()})),this.actions[e].Audio.forEach((e=>{e.dispatchGameControl("start")})),this.actions[e].Particles.forEach((e=>{e.dispatchGameControl("start")}))))}dispatchStopEvent(e){void 0!==this.actions[e]&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach((e=>{e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})})),this.actions[e].Create.forEach((e=>{e.dispatchStop()})),this.actions[e].Audio.forEach((e=>{e.dispatchGameControl("stop")})),this.actions[e].Particles.forEach((e=>{e.dispatchGameControl("stop")}))))}get colliderWorldPosition(){return Xye.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,n){var r,i,o,a,s,l,c,u,d;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let h=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let p=60*h,A=!1;if(this.usePhysics&&this.collisionEnabled){let e=$ye.set(0,(0===this.velocity.y?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/120,1)*(this.gravity>0?1:-1):this.velocity.y)*h,0).divideScalar(this.pixelsPerMeter),t=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,e,null==(r=this.object.rigidBody)?void 0:r.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(t){this.onObject=!0,this.groundNormal.set(t.normal2.x,t.normal2.y,t.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(A=!0),0===(null==(i=t.collider.parent())?void 0:i.bodyType())&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let e=t.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(t.rigidBody===e&&t.userData.isFollowingObj!==this.object.uuid){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(Xye,rbe,$ye),this.groundVelocity.subVectors(Xye,t.prevT),this.object.getWorldPosition($ye).add(this.collider.position).sub(Xye),this.groundYRotation=ibe.setFromQuaternion(rbe).y-t.prevR.y,Jye.copy($ye).applyAxisAngle(abe,this.groundYRotation),this.groundVelocity.add(Jye.sub($ye)).divideScalar(h);break}}else this.onObject=!1}if("walk"===this.moveMode&&this.collisionEnabled&&(1===this.movementState.jump&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*p),"fly"===this.moveMode&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,"+z"===this.forwardDir&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let e=this.navMeshPathDest.material;if("walk"===this.moveMode&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let t=Xye.subVectors(this.path[1],this.position),n=$ye.subVectors(this.path[1],this.path[0]);t.dot(n)<0?this.path.shift():(this.directionXZ.x=n.x,this.directionXZ.z=n.z),e.opacity=e.userData.opacity0}else e.opacity-=.05*e.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,("walk"===this.moveMode?this.velocityTarget.x+this.velocityTarget.z===0:0===this.velocityTarget.manhattanLength())?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),"walk"===this.moveMode&&(this.lerpFactorPos.y=1),!1===this.didHit&&0===this.pushedVelocity.manhattanLength()||!1===this.usePhysics?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**p),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**p),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**p)):this.velocity.copy(this.velocityTarget),("walk"===this.moveMode?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let f=Yye.copy(this.velocity);if("none"!==this.orientMode&&!1===this.isFirstPerson){let e=$ye.copy(f);e.y=0,f.set(0,f.y,e.length()*("+z"===this.forwardDir?1:-1))}if(this.directionXZ.manhattanLength()>0&&"none"!==this.orientMode&&!1===this.isFirstPerson)if("camera"===this.orientWith&&this.path.length<=1){let e=Xye;this.camera.getWorldDirection(e);let t=Jye.copy(abe).multiplyScalar(e.dot(abe));e.sub(t);let n=$ye.copy(this.directionXZ);n.x*=-1,this.rot.y=e.angleTo(n)*(e.cross(n).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*("+z"===this.forwardDir?1:-1);if(ibe.setFromVector3(this.rot),"walk"===this.moveMode&&(ibe.x=0),f.applyEuler(ibe),A&&(rbe.setFromUnitVectors(abe,this.groundNormal),f.applyQuaternion(rbe)),n){let e=ibe.set(0,this.vrEulerYOffset*pbe,0);n.applyEuler(e),f.x+=n.x,f.z+=n.z,this.nonColliderPosOffset.elements[13]+=n.y*h}if(!0===this.usePhysics){let e=$ye;this.pushedVelocity.set(0,0,0);for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){let n=Jye.setFromMatrixPosition(t.matrixWorld).sub(t.prevT).divideScalar(h).divideScalar(this.pixelsPerMeter),r=t.rigidBody.collider(0).castCollider(n,this.object.rigidBody.collider(0),Xye.copy(f).divideScalar(this.pixelsPerMeter),h,!1);n.multiplyScalar(this.pixelsPerMeter);let i=eie.is(t)?t:t.object;if(null!==r&&this.lastHitObj!==i){let e;t instanceof rie&&(e=t);let n=this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid];if(n)for(let t of n)"character"===t.data.target&&(t.dispatch(e),i.dispatchEvent(Rxe));this.lastHitObj=i}if(null!==r){this.pushedVelocity.copy(n),e.copy(r.normal1).applyQuaternion(t.quaternion);break}}if(0!==this.pushedVelocity.manhattanLength()){let t=e.dot(f);t<0&&f.addScaledVector(e,-t),f.add(this.pushedVelocity)}else f.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),"normal"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)||"steer"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||"walk"===this.moveMode)?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,"normal"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)||"steer"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(h),this.rotVelocityStick),0===this.rotVelocityTarget.manhattanLength()?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**p):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**p),this.euler.x+=this.rotVelocity.x*h,this.euler.y+=this.rotVelocity.y*h+this.groundYRotation,0===this.rotVelocityTarget.y&&0===this.directionXZ.manhattanLength()?this.rotationAccumWhenOrientWithCamera=0:(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*h),!1===this.isFirstPerson&&"none"!==this.orientMode&&this.directionXZ.manhattanLength()>0){if("radial"===this.orientMode){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(abe,this.euler.y-this.euler0.y);let e=$ye.copy(this.objectToCamXZ).normalize(),t=Jye.copy(f).multiplyScalar(h);t.y=0;let n=t.sub(Xye.copy(e).multiplyScalar(t.dot(e))).cross(e).y;this.euler.y-=Math.atan2(n,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*h+this.groundYRotation,0!==this.rotVelocityTarget.y&&(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.euler.y=this.rot.y);if(!0===this.cameraFollow&&("walk"===this.moveMode?"Limit"===this.cameraXAxis?this.euler.x=dG.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=dG.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):"Limit"===this.cameraXAxis&&(this.euler.x=dG.clamp(this.euler.x,-this.PI_2,this.PI_2))),"fly"===this.moveMode?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(ibe.copy(t),ibe.y=0):(ibe.copy(this.euler),ibe.y=0),this.nonColliderRotOffset.makeRotationFromEuler(ibe)),t&&("walk"===this.moveMode?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*pbe),nbe.setFromAxisAngle(obe,this.rot.x),rbe.setFromAxisAngle(abe,this.rot.y),rbe.multiply(nbe),nbe.setFromAxisAngle(sbe,this.rot.z),rbe.multiply(nbe),this.quaternion.copy(rbe),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let e=$ye.copy(f).multiplyScalar(h/this.pixelsPerMeter),t=null;this.didHit=!1;let n=new jG;for(let r=0;r<5;r++){let i=e.length(),l=Jye.copy(e).normalize();if(t=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(n),this.colliderWorldQuat,l,null==(o=this.object.rigidBody)?void 0:o.collider(0).shape,i,!1,24,void 0,void 0,this.object.rigidBody),null===t){0===r&&0!==this.directionXZ.manhattanLength()&&(this.lastHitObj=null),n.add(e);break}{this.didHit=!0;let o=this.sharedGameControlGlobals.colliderToEntity.get(t.collider.handle);if(o!==this.lastHitObj&&0===r){this.lastHitObj=o;let e=this.sharedGameControlGlobals.entityToCollisionEvents[null==o?void 0:o.uuid];if(e)for(let n of e)if("character"===n.data.target){let e,r=(null==(a=this.sharedGameControlGlobals.rapierWorld)?void 0:a.getCollider(t.collider.handle))._parent;if(o.cloner)for(let t of o.cloner.children)if(t.rigidBody===r){e=t;break}n.dispatch(e),o.dispatchEvent(Rxe)}}let c=qye.set(t.normal2.x,t.normal2.y,t.normal2.z).applyQuaternion(this.colliderWorldQuat),u=Kye.copy(l).multiplyScalar(t.toi).dot(c),d=t.toi;if(0===d&&(this.position.y+=this.offset*this.pixelsPerMeter),u>this.offset&&(d=t.toi*(u-this.offset)/u,n.addScaledVector(l,d)),e.copy(l).multiplyScalar(i-d),Math.acos(-c.y)>this.slopeThresh){let r=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(n),i=Jye.copy(t.witness2).applyQuaternion(this.colliderWorldQuat);i.y=0;let o=r.add(i);o.y+=this.stepThresh;let a=this.sharedGameControlGlobals.rapierWorld.castShape(o,this.colliderWorldQuat,e,null==(s=this.object.rigidBody)?void 0:s.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);null!==a&&0===a.toi&&(c.y=0,c.normalize())}e.addScaledVector(c,-e.dot(c))}}this.position.addScaledVector(n,this.pixelsPerMeter),null==(l=this.object.rigidBody)||l.setTranslation(Xye.copy(this.position).divideScalar(this.pixelsPerMeter),!0),null==(c=this.object.rigidBody)||c.setRotation(nbe.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let e=this.onObject?1:5,t=f.multiplyScalar(h/e);for(let n=0;n<e;n++)this.position.add(t),this.collisionAdjustment(h/e)}else this.position.addScaledVector(f,h);if("walk"===this.moveMode&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),!0===this.cameraFollow){this.updateFollowArms();let e=this.objectToTarget.add(this.position),t=this.targetToCamera.add(e);Zye.lookAt(t,e,abe).setPosition(t),Zye.decompose(this.targetPos,this.targetQuat,Xye),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**p),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**p),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),"Limit"===this.cameraYAxis&&"cartesian"===this.orientMode&&(this.euler.y=dG.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=dG.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(hbe),(!(this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(void 0===this.camera||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate))||"fly"!==this.moveMode&&!0!==this.onObject&&!1!==this.collisionEnabled||!(null===this.navMeshPathDest||this.navMeshPathDest.material.opacity<-.04*(null==(d=null==(u=this.navMeshPathDest)?void 0:u.material)?void 0:d.userData.opacity0)))&&(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(dbe),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e,t=nbe.setFromAxisAngle(abe,"Limit"===this.cameraYAxis&&"radial"!==this.orientMode?dG.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&this.objectToTarget.applyQuaternion(t),e="Limit"===this.cameraXAxis?dG.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):dG.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let n=Xye.copy(this.cameraPolarAxis0);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&n.applyQuaternion(t);let r=rbe.setFromAxisAngle(n,e);"Locked"!==this.cameraYAxis&&this.targetToCamera.applyQuaternion(t),"Locked"!==this.cameraXAxis&&this.targetToCamera.applyQuaternion(r)}groundTiltAdjustment(e){180*abe.angleTo(e)/Math.PI<15||180*abe.angleTo(e)/Math.PI>85?nbe.identity():nbe.setFromUnitVectors(abe,e),this.groundTilt.slerp(nbe,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var t;let n=Kye.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=Zye.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Xye,nbe,$ye).compose(Xye,nbe,lbe);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach((e=>{if(e===this.object||e.isDescendantOf(this.object))return;ube.makeEmpty(),e.updateMatrixWorldSVD();let t=e.matrixWorldRigid,i=ebe.copy(t).invert(),o=tbe.copy(ebe).multiply(r);cbe.copy(this.collider.segment),cbe.start.applyMatrix4(o),cbe.end.applyMatrix4(o);let a=qye.copy(this.position).applyMatrix4(i);ube.expandByPoint(cbe.start),ube.expandByPoint(cbe.end),ube.min.addScalar(-this.collider.radius),ube.max.addScalar(this.collider.radius),e.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder:e=>e.distanceToPoint(cbe.end),intersectsBounds:e=>e.intersectsBox(ube),intersectsTriangle:e=>{let r=Xye,i=$ye,o=e.closestPointToSegment(cbe,r,i);if(o<this.collider.radius){let e=this.collider.radius-o,s=i.sub(r).normalize(),l=Jye.copy(a);l.addScaledVector(s,e);let c=l.applyMatrix4(t).sub(this.position);n.add(c),cbe.start.addScaledVector(s,e),cbe.end.addScaledVector(s,e)}}})})),ube.makeEmpty(),cbe.copy(this.collider.segment),cbe.start.applyMatrix4(r),cbe.end.applyMatrix4(r),ube.expandByPoint(cbe.start),ube.expandByPoint(cbe.end),ube.min.addScalar(-this.collider.radius),ube.max.addScalar(this.collider.radius),null==(t=this.sharedGameControlGlobals.staticMeshBVH)||t.shapecast({traverseBoundsOrder:e=>e.distanceToPoint(cbe.end),intersectsBounds:e=>e.intersectsBox(ube),intersectsTriangle:e=>{let t=Xye,r=$ye,i=e.closestPointToSegment(cbe,t,r);if(i<this.collider.radius){let e=this.collider.radius-i,o=r.sub(t).normalize();this.alignToGround&&this.groundTiltAdjustment(o),n.addScaledVector(o,e),cbe.start.addScaledVector(o,e),cbe.end.addScaledVector(o,e)}}}),this.onObject=Math.abs(n.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,n.length()-1e-5);n.normalize().multiplyScalar(i),this.position.add(n)}},fbe=Abe;fbe.isLocked=!1;var mbe=cQ(hQ());function gbe(e,t){let n=new mK;if(!e.getAttribute("position"))return n.setAttribute("position",new lK([],3)),n.setIndex([]),n;let{positions:r,triIndices:i}=cse(e.getAttribute("position"),e.getIndex());return n.setAttribute("position",new lK(r,3)),n.setIndex(i),t&&n.applyMatrix4(t),n}var vbe=new gq,ybe=new gq,bbe=[[0,0,0],[0,0,0],[0,0,0]];function wbe(e){let t=e.elements;bbe[0][0]=t[0],bbe[0][1]=t[4],bbe[0][2]=t[8],bbe[1][0]=t[1],bbe[1][1]=t[5],bbe[1][2]=t[9],bbe[2][0]=t[2],bbe[2][1]=t[6],bbe[2][2]=t[10];let{u:n,v:r}=(0,mbe.SVD)(bbe),i=vbe.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),o=ybe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1);return i.multiply(o.transpose())}var xbe=class extends b0{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera&&(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t)}intersectVisibleObjects(e,t=!0,n=[]){return e.forEach((e=>{e.visible&&this.intersectObject(e,t,n)})),n}createRaycastLineHelper(){let e=new Y$({color:65280,linewidth:10}),t=new jG(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),n=new jG(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),r=this.camera.far-this.camera.near,i=(new jG).addVectors(t,n.multiplyScalar(r)),o=new mK;return o.setFromPoints([t,i]),new tJ(o,e)}},Cbe=e=>e instanceof Rhe||e instanceof nme;function Sbe(e,t){return e.distance-t.distance}function Bbe(e,t,n){if(vie(t)&&t.visible){Phe(t)&&t.raycast(e,n);for(let r of t.children)Bbe(e,r,n)}}function _be(e,t,n,r=!1){if(!r&&!n.some((t=>void 0!==Pbe(e,t))))return[];let i=[];return t.children.forEach((t=>Bbe(e,t,i))),i.sort(Sbe),i}function Ebe(e){let t=[];if(e.length){let n=e[0].object;vie(n)&&t.push(n);let r=n.parent;for(;r;)Cbe(r)&&t.push(r),r=r.parent}return t}function Mbe(e,t,n,r){let i=e.frame;if(i){let e=t[0]*i.width,o=(1-t[1])*i.height;for(let t of n){let n=t===i.uuid?i:i.find(t);if(null==n?void 0:n.intersects(e,o))return r(n),!0}}return!1}function Pbe(e,t){if(Phe(t)){if(t.visible){let n=[];return t.raycast(e,n),n.length?n[0]:void 0}}else if(Cbe(t))return Tbe(e,t)}function Tbe(e,t){if(vie(t)&&t.visible){if(Phe(t)){let n=[];if(t.raycast(e,n),n.length)return n[0]}for(let n of t.children){let t=Tbe(e,n);if(t)return t}}}var Dbe=class{constructor(e,t,n,r,i,o,a,s){this.renderer=e,this.publish=t,this.scene=n,this.getCamera=r,this.sharedAssets=i,this.requestRender=o,this.isExport=a,this.frame=s,this.raycaster=new xbe,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents="window"===t.mouseEventTarget,this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var t;let{pageX:n,pageY:r}=(null==(t=e.touches)?void 0:t.length)>0?e.touches[0]:e;this.pointerWorld=function(e,t,n){return{x:(e-(n.left+window.scrollX))/n.width*2-1,y:-(t-(n.top+window.scrollY))/n.height*2+1}}(n,r,this._domRect),this.pointerScreen=function(e,t,n){return{x:(e-(n.left+window.scrollX))/n.width,y:1-(t-(n.top+window.scrollY))/n.height}}(n,r,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},Fbe=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},Ibe=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],kbe=e=>{var t;return null==(t=Ibe.find((([t,n])=>n===e)))?void 0:t[0]},Obe=e=>{var t;return null==(t=Ibe.find((([t])=>t===e)))?void 0:t[1]},Lbe=(e,t)=>{let n=kbe(e);if(n){let e=new CustomEvent(n,{bubbles:!0});return Object.defineProperty(e,"target",{writable:!1,value:t}),e}},Rbe=class extends Fbe{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{var t;if(!e.eventName||!e.target||"Scroll"===e.eventName)return;let n=null==(t=this.splineEvents[kbe(e.eventName)])?void 0:t[e.target.uuid];if(!n)return;"Scroll"===e.eventName&&void 0!==e.deltaY&&Object.assign(n,{deltaY:e.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(n)}}connect(){let{page:e}=this.eventContext;e.traverseEntity((e=>{var t,n;if(null==(t=e.data)?void 0:t.events.length)for(let[r,i]of Ibe)if(e.data.events.some((e=>e.data.type===i&&!e.data.disabled))){this.objectsPerEvents.has(r)?null==(n=this.objectsPerEvents.get(r))||n.push(e):this.objectsPerEvents.set(r,[e]);let t={id:e.uuid,name:e.name},o=Lbe(i,t),a=this.splineEvents[r];a?a[e.uuid]=o:this.splineEvents[r]={[e.uuid]:o}}})),this.objectsPerEvents.forEach((e=>{e.forEach((e=>{e.addEventListener("beginEvent",this.onBeginEvent)}))}))}disconnect(){this.objectsPerEvents.forEach((e=>{e.forEach((e=>{e.removeEventListener("beginEvent",this.onBeginEvent)}))}))}},Ube=class{constructor(e,t,n,r,i,o){if(this.id=e,this.data=t,this.object=n,this.entered=!1,("KeyDown"===t.type||"KeyUp"===t.type||"KeyPress"===t.type)&&!t.key)throw new Error("Missing property");this.actions=Iye(t,t.actions,r,i,o,n)}disconnect(){kye(this.actions)}dispatchHeld(e){this.actions.Create.forEach((t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()}))}dispatch(e=!1){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),"MousePress"===this.data.type||"KeyPress"===this.data.type?this.entered||(this.entered=!0,this.actions.Transition.forEach((e=>e.playFromCurrent())),this.actions.Animation.forEach((e=>e.playFromCurrent())),this.actions.SwitchCamera.forEach((e=>e.playFromCurrent())),this.actions.Create.forEach((e=>e.dispatchStart()))):(this.actions.Transition.some((e=>e.playing&&"Toggle"!==e.data.runMode))||this.actions.Transition.forEach((e=>{"Toggle"===e.data.runMode?e.toggle():e.play()})),this.actions.SwitchCamera.some((e=>e.playing&&"Toggle"!==e.data.runMode))||this.actions.SwitchCamera.forEach((e=>{"Toggle"===e.data.runMode?e.toggle():e.play()})),this.actions.Animation.forEach((e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}))),this.actions.Link.forEach((e=>{e.dispatch()})),this.actions.SceneTransition.forEach((e=>{e.dispatch()})),!1===e&&this.actions.Create.forEach((e=>{e.dispatch()})),this.actions.Destroy.forEach((e=>{e.dispatch()})),this.actions.Reset.forEach((e=>{e.dispatch()})),this.actions.Audio.forEach((e=>{e.dispatchBasic()})),this.actions.Video.forEach((e=>{e.dispatchBasic()})),this.actions.Particles.forEach((e=>{e.dispatchBasic()})),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch()))}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach((e=>e.reverseFromCurrent())),this.actions.Particles.forEach((e=>e.reverseFromCurrent())),this.actions.Animation.forEach((e=>e.reverseFromCurrent())),this.actions.SwitchCamera.forEach((e=>e.reverseFromCurrent())),this.actions.Create.forEach((e=>e.dispatchStop())))}dispatchUserEvent(e){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),e?(this.actions.Transition.forEach((e=>e.reverseFromCurrent())),this.actions.Animation.forEach((e=>e.reverseFromCurrent())),this.actions.SwitchCamera.forEach((e=>e.reverseFromCurrent()))):(this.actions.Transition.forEach((e=>e.playFromCurrent())),this.actions.Animation.forEach((e=>e.playFromCurrent())),this.actions.SwitchCamera.forEach((e=>e.playFromCurrent()))),this.actions.Link.forEach((e=>{e.dispatch()})),this.actions.SceneTransition.forEach((e=>{e.dispatch()})),this.actions.Create.forEach((e=>{e.dispatch()})),this.actions.Destroy.forEach((e=>{e.dispatch()})),this.actions.Reset.forEach((e=>{e.dispatch()})),this.actions.Audio.forEach((e=>{e.dispatchBasic()})),this.actions.Video.forEach((e=>{e.dispatchBasic()})),this.actions.Particles.forEach((e=>{e.dispatchBasic()})),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch()))}},zbe=class extends Fbe{constructor(e,t,n){super(e),this.eventManager=t,this.useForRaycastProperty=n,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=e=>{if(!0===this.useForRaycastProperty&&null===this.sceneInterects){this.eventContext.updateRaycaster(e);let{raycaster:t,page:n}=this.eventContext,r=_be(t,n,[],!0);this.sceneInterects=r,r.length&&(this.eventContext.sharedAssets.raycastProperty={x:r[0].point.x,y:r[0].point.y,z:r[0].point.z,objX:r[0].object.matrixWorld.elements[12],objY:r[0].object.matrixWorld.elements[13],objZ:r[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=e=>{(e.target===this.eventContext.domElement||"SPLINE-VIEWER"===e.target.tagName)&&this.canvasMouseEvents.forEach((t=>{("MouseDown"===t.data.type||"MousePress"===t.data.type)&&(this.onCanvasRaycast(e),t.dispatch())}))},this.onCanvasMouseUp=e=>{(e.target===this.eventContext.domElement||"SPLINE-VIEWER"===e.target.tagName)&&this.canvasMouseEvents.forEach((t=>{"MouseUp"===t.data.type?(this.onCanvasRaycast(e),t.dispatch()):"MousePress"===t.data.type&&t.dispatchRelease()}))},this.onMouseDown=e=>{V6.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseEvent("MouseDown"))},this.onMouseUp=e=>{V6.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=e=>{V6.length>1||(this.eventContext.updateRaycaster(e),this.handleMousePressEvent())},this.onMousePressRelease=e=>{V6.length>1||(this.eventContext.updateRaycaster(e),this.handleMousePressEvent(!0))},this.onKeyDown=e=>{this.heldKeys[e.key]||(this.handleKeyEvent(e,"KeyDown"),this.handleKeyEventHeld(e,"KeyDown",!0)),this.heldKeys[e.key]=!0},this.onKeyUp=e=>{this.handleKeyEvent(e,"KeyUp"),this.handleKeyEventHeld(e,"KeyUp",!0)},this.onKeyPressDown=e=>{this.heldKeysPress[e.key]?this.handleKeyEventHeld(e,"KeyPress"):(this.handleKeyEvent(e,"KeyPress"),this.handleKeyEventHeld(e,"KeyPress",!0)),this.heldKeysPress[e.key]=!0},this.onKeyPressUp=e=>{this.handleKeyEvent(e,"KeyPress",!0)},this.releaseHeldKey=e=>{delete this.heldKeys[e.key]},this.releaseHeldKeyPress=e=>{delete this.heldKeysPress[e.key]},this._onUserEvent=({eventName:e,target:t,reverse:n})=>{var r,i,o,a;if(!e||!t)return;let s=Obe(e);s&&("MouseDown"===s||"MouseUp"===s||"MousePress"===s?(t.dispatchEvent({type:"beginEvent",eventName:s}),null==(i=null==(r=this.eventsPerObjects[s])?void 0:r[t.uuid])||i.forEach((e=>{e.dispatchUserEvent(n)}))):("KeyDown"===s||"KeyUp"===s||"KeyPress"===s)&&(t.dispatchEvent({type:"beginEvent",eventName:s}),null==(a=null==(o=this.eventsPerObjects[s])?void 0:o[t.uuid])||a.forEach((e=>{e.dispatchUserEvent()}))))}}connect(){var e,t,n,r,i,o;let{page:a,sharedAssets:s,domElement:l}=this.eventContext,c=(e,t)=>{var n,r;if(!(null==(n=e.data)?void 0:n.events.length))return;let i=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let o of i){let n=this.eventsPerObjects[o];e.data.events.filter((({data:e})=>e.type===o&&!0!==e.disabled)).forEach((({id:t,data:r})=>{try{let i=new Ube(t,r,e,a,s,this.eventManager);i.actions.Video.length&&(this.hasVideoAction=!0),"MouseDown"!==r.type&&"MouseUp"!==r.type&&"MousePress"!==r.type||"Canvas"!==r.mode&&"Window"!==r.mode?n[e.uuid]?n[e.uuid].some((e=>e.id===i.id))||n[e.uuid].push(i):n[e.uuid]=[i]:this.canvasMouseEvents.push(i)}catch(i){}})),(null==(r=n[e.uuid])?void 0:r.length)&&this.objectsPerTypes[o].push(e instanceof nfe&&("MouseDown"===o||"MouseUp"===o||"MousePress"===o)?t:e)}};a.traverseEntity((e=>{var t;(e instanceof sme||e instanceof $fe)&&(null==(t=e.frame)||t.traverse((t=>{c(t,e)}))),c(e)})),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),l.addEventListener("pointerdown",this.onCanvasMouseDown),l.addEventListener("pointerup",this.onCanvasMouseUp),((null==(e=this.objectsPerTypes.MouseDown)?void 0:e.length)||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),l.addEventListener("pointerdown",this.onMouseDown)),(null==(t=this.objectsPerTypes.MouseUp)?void 0:t.length)&&(this.domEventsNeeded.add("pointerup"),l.addEventListener("pointerup",this.onMouseUp)),(null==(n=this.objectsPerTypes.MousePress)?void 0:n.length)&&(this.domEventsNeeded.add("pointerdown"),l.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),l.addEventListener("pointerup",this.onMousePressRelease)),(null==(r=this.objectsPerTypes.KeyDown)?void 0:r.length)&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(null==(i=this.objectsPerTypes.KeyUp)?void 0:i.length)&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(null==(o=this.objectsPerTypes.KeyPress)?void 0:o.length)&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach((([e,t])=>{t.forEach((e=>{e.addEventListener("userEvent",this._onUserEvent)}))}))}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach((e=>{Object.values(e).forEach((e=>{e.forEach((e=>{e.disconnect()}))}))})),this.canvasMouseEvents.forEach((e=>{e.disconnect()})),Object.entries(this.objectsPerTypes).forEach((([e,t])=>{t.forEach((e=>{e.removeEventListener("userEvent",this._onUserEvent)}))}))}handleMouseEvent(e){var t,n,r,i;let{stopRaycast:o,raycaster:a,page:s,pointerScreen:l}=this.eventContext,c=this.objectsPerTypes[e],u=c.filter((e=>!(e instanceof nfe)));if((c.length||this.useForRaycastProperty)&&(!s.uiCanvas||!Mbe(s,[l.x,l.y],Object.keys(this.eventsPerObjects[e]),(t=>{this.handleObjectMouseEventDispatch(t,e)})))){if(o||this.useForRaycastProperty){let l;if(null===this.sceneInterects?l=_be(a,s,u,this.useForRaycastProperty):(l=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&l.length&&(this.eventContext.sharedAssets.raycastProperty={x:l[0].point.x,y:l[0].point.y,z:l[0].point.z,objX:l[0].object.matrixWorld.elements[12],objY:l[0].object.matrixWorld.elements[13],objZ:l[0].object.matrixWorld.elements[14]}),o){let o=[(null==(n=null==(t=l[0])?void 0:t.uv)?void 0:n.x)??0,(null==(i=null==(r=l[0])?void 0:r.uv)?void 0:i.y)??0];Ebe(l).forEach((t=>{t instanceof sme&&Mbe(t,o,Object.keys(this.eventsPerObjects[e]),(t=>{this.handleObjectMouseEventDispatch(t,e)})),this.eventsPerObjects[e][t.uuid]&&this.handleObjectMouseEventDispatch(t,e)}))}}o||u.forEach((t=>{var n,r;let i=Pbe(a,t);i&&(this.handleObjectMouseEventDispatch(t,e),t instanceof sme&&Mbe(t,[(null==(n=null==i?void 0:i.uv)?void 0:n.x)??0,(null==(r=null==i?void 0:i.uv)?void 0:r.y)??0],Object.keys(this.eventsPerObjects[e]),(t=>{this.handleObjectMouseEventDispatch(t,e)})))}))}}handleMousePressEvent(e=!1){let t="MousePress",n=this.objectsPerTypes[t],r=n.filter((e=>!(e instanceof nfe))),i=[];if(n.length){if(!e){let{stopRaycast:e,raycaster:n,page:o,pointerScreen:a}=this.eventContext,s=!1;if(o.uiCanvas&&(s=Mbe(o,[a.x,a.y],Object.keys(this.eventsPerObjects[t]),(e=>{i.push(e)}))),e&&!s){let e=_be(n,o,r);i=Ebe(e),e.forEach((e=>{var n,r;e.object instanceof sme&&Mbe(e.object,[(null==(n=null==e?void 0:e.uv)?void 0:n.x)??0,(null==(r=null==e?void 0:e.uv)?void 0:r.y)??0],Object.keys(this.eventsPerObjects[t]),(e=>{i.push(e)}))}))}else r.forEach((e=>{var r,o;let a=Pbe(n,e);a&&(i.push(e),e instanceof sme&&Mbe(e,[(null==(r=null==a?void 0:a.uv)?void 0:r.x)??0,(null==(o=null==a?void 0:a.uv)?void 0:o.y)??0],Object.keys(this.eventsPerObjects[t]),(e=>{i.push(e)})))}))}this._prevObjects.length&&this._prevObjects.forEach((e=>{i.includes(e)||this.handleObjectMouseEventDispatchRelease(e,t)})),i.length&&i.forEach((e=>{this.handleObjectMouseEventDispatch(e,t)})),this._prevObjects=i}}handleObjectMouseEventDispatch(e,t){var n,r;e.dispatchEvent({type:"beginEvent",eventName:t}),null==(r=null==(n=this.eventsPerObjects[t])?void 0:n[e.uuid])||r.forEach((e=>{e.dispatch()}))}handleObjectMouseEventDispatchRelease(e,t){var n,r;e.dispatchEvent({type:"beginEvent",eventName:t}),null==(r=null==(n=this.eventsPerObjects[t])?void 0:n[e.uuid])||r.forEach((e=>{e.dispatchRelease()}))}handleKeyEvent(e,t,n=!1){this.objectsPerTypes[t].forEach((r=>{let i=this.eventsPerObjects[t][r.uuid];i.some((({data:t})=>"key"in t&&t.key===e.key))&&r.dispatchEvent({type:"beginEvent",eventName:t}),i.forEach((t=>{"key"in t.data&&t.data.key===e.key&&(n?t.dispatchRelease():t.dispatch(!0))}))}))}handleKeyEventHeld(e,t,n=!1){this.objectsPerTypes[t].forEach((r=>{this.eventsPerObjects[t][r.uuid].forEach((t=>{"key"in t.data&&t.data.key===e.key&&t.dispatchHeld(n)}))}))}},Nbe=new jG,jbe=new jG,Hbe=class{constructor(e,t,n,r,i){this.actionsIn=Iye(e,e.inActions,n,r,i,t),this.actionsOut=Iye(e,e.outActions,n,r,i,t)}disconnect(){kye(this.actionsIn),kye(this.actionsOut)}},Qbe=class extends Hbe{constructor(e,t,n,r,i,o){super(t,n,r,i,o),this.id=e,this.data=t,this.object=n,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let r of this.objects)if(!r.visible)return;let e=Nbe.setFromMatrixPosition(this.objects[0].matrixWorld),t=jbe.setFromMatrixPosition(this.objects[1].matrixWorld),n=e.distanceTo(t)<=this.distance?"in":"out";if(this.stage!==n){this.stage=n;let e="in"===n?this.actionsIn:this.actionsOut;e.Audio.forEach((e=>e.dispatchConditional())),e.Particles.forEach((e=>e.dispatchConditional())),e.Video.forEach((e=>e.dispatchConditional())),e.Link.forEach((e=>e.dispatch())),e.Create.forEach((e=>e.dispatch())),e.Destroy.forEach((e=>e.dispatch())),e.Reset.forEach((e=>e.dispatch())),e.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()})),e.Transition.forEach((e=>e.play())),e.Animation.forEach((e=>e.play())),e.SwitchCamera.forEach((e=>e.play())),e.SceneTransition.forEach((e=>e.dispatch())),e.SetVariable.forEach((e=>e.checkConditions())),e.SetVariable.forEach((e=>e.dispatch())),e.DynamicVariablePlay.forEach((e=>e.dispatch())),e.ClearLocalStorage.forEach((e=>e.dispatch())),e.UserAPI.forEach((e=>e.dispatch()))}};let{distance:a,fromObject:s,toObject:l}=t.condition;this.distance=a;for(let c of[s,l]){if(!c)throw new Error("Missing property");let e=r.find(c);if(!e)throw new Error("Missing property");this.objects.push(e)}}connect(){window.setTimeout((()=>{this.objects.forEach((e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})),this.onUpdateMatrixWorld()}),0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach((e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}))}},Vbe=class extends Hbe{constructor(e,t,n,r,i,o){var a;super(t,n,r,i,o),this.id=e,this.data=t,this.object=n,this.onBegin=({target:e,state:t})=>{this.toState!==t&&(this.actionsOut.Audio.forEach((e=>e.dispatchConditional())),this.actionsOut.Particles.forEach((e=>e.dispatchConditional())),this.actionsOut.Video.forEach((e=>e.dispatchConditional())),this.actionsOut.Link.forEach((e=>e.dispatch())),this.actionsOut.Create.forEach((e=>e.dispatch())),this.actionsOut.Destroy.forEach((e=>e.dispatch())),this.actionsOut.Reset.forEach((e=>e.dispatch())),this.actionsIn.Transition.forEach((e=>e.pause())),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach((e=>e.play())),this.actionsOut.Animation.forEach((e=>e.play())),this.actionsIn.SwitchCamera.forEach((e=>e.pause())),this.actionsOut.SwitchCamera.forEach((e=>e.play())),this.actionsOut.SceneTransition.forEach((e=>e.dispatch())),this.actionsOut.SetVariable.forEach((e=>e.checkConditions())),this.actionsOut.SetVariable.forEach((e=>e.dispatch())),this.actionsOut.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actionsOut.ClearLocalStorage.forEach((e=>e.dispatch())),this.actionsOut.UserAPI.forEach((e=>e.dispatch())))},this.onComplete=({target:e,state:t})=>{this.toState===t&&(this.actionsIn.Audio.forEach((e=>e.dispatchConditional())),this.actionsIn.Particles.forEach((e=>e.dispatchConditional())),this.actionsIn.Video.forEach((e=>e.dispatchConditional())),this.actionsIn.Link.forEach((e=>e.dispatch())),this.actionsIn.Create.forEach((e=>e.dispatch())),this.actionsIn.Destroy.forEach((e=>e.dispatch())),this.actionsIn.Reset.forEach((e=>e.dispatch())),this.actionsOut.Transition.forEach((e=>e.pause())),this.actionsOut.Transition.forEach((e=>e.pause())),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach((e=>e.play())),this.actionsIn.Animation.forEach((e=>e.play())),this.actionsOut.SwitchCamera.forEach((e=>e.pause())),this.actionsIn.SwitchCamera.forEach((e=>e.play())),this.actionsIn.SceneTransition.forEach((e=>e.dispatch())),this.actionsIn.SetVariable.forEach((e=>e.checkConditions())),this.actionsIn.SetVariable.forEach((e=>e.dispatch())),this.actionsIn.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actionsOut.ClearLocalStorage.forEach((e=>e.dispatch())),this.actionsOut.UserAPI.forEach((e=>e.dispatch())))};let{condition:s}=t;if(!s.object)throw new Error("Missing property");let l=r.find(s.object)??r.scene.find2D(s.object);if(!l)throw new Error("Missing property");if(this.toObject=l,s.state&&!(null==(a=this.toObject.states)?void 0:a[s.state]))throw new Error("Missing property");this.toState=s.state}connect(){B3(this.actionsOut).forEach((e=>{var t;(null==(t=this.actionsOut[e])?void 0:t.length)&&this.toObject.addEventListener("beginState",this.onBegin)})),B3(this.actionsIn).forEach((e=>{var t;(null==(t=this.actionsIn[e])?void 0:t.length)&&this.toObject.addEventListener("completeState",this.onComplete)}))}disconnect(){super.disconnect(),B3(this.actionsOut).forEach((e=>{var t;(null==(t=this.actionsIn[e])?void 0:t.length)&&this.toObject.removeEventListener("beginState",this.onBegin)})),B3(this.actionsIn).forEach((e=>{var t;(null==(t=this.actionsIn[e])?void 0:t.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}))}},Wbe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity((n=>{var r;if(null==(r=n.data)?void 0:r.events.length)for(let{id:i,data:o}of n.data.events)if(!o.disabled&&"Conditional"===o.type)try{let r;"Comparison"===o.condition.type||("Distance"===o.condition.type?r=new Qbe(i,o,n,e,t,this.eventManager):"State"===o.condition.type&&(r=new Vbe(i,o,n,e,t,this.eventManager))),r&&(this.eventsPerConditions[o.condition.type].push(r),(r.actionsIn.Video.length||r.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch(V9){}})),Object.values(this.eventsPerConditions).forEach((e=>e.forEach((e=>e.connect()))))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach((e=>e.forEach((e=>e.disconnect()))))}},Gbe=new jG,qbe=new jG,Kbe=new jG,Ybe=new qK,Xbe=new jG,$be=new jG,Jbe=new jG,Zbe=new NG,ewe=new Eq,twe=new gq,nwe=new pG,rwe=new jG,iwe=new jG,owe=.2;function awe(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var swe=function(){let e=new gq;return(t,n,r)=>{let i=t.obj;e.copy(i.hiddenMatrix),null!==i.parent&&e.premultiply(i.parent.matrixWorld),e.invert(),i.position.copy(n),"global"===t.reference&&awe(i.position,t.limits),i.position.applyMatrix4(e),"parent"===t.reference?awe(i.position,t.limits):"local"===t.reference&&(Zbe.copy(t.quat0).invert(),i.position.sub(t.position0),i.position.applyQuaternion(Zbe),awe(i.position,t.limits),Zbe.invert(),i.position.applyQuaternion(Zbe),i.position.add(t.position0)),e.multiply(r??i.matrixWorld).decompose(Xbe,i.quaternion,$be),i.updateMatrix(),i.hasNonUniformScale&&(i.updateMatrixWorld(),i.updateMatrixWorldSVD()),i instanceof Use&&The(i.parent)&&i.invalidateDownstreamBooleanData(!0)}}(),lwe=class{constructor(e,t,n,r,i,o,a){this.object=e,this.id=t,this.data=n,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=0===this.data.resetSpeed?1:8/this.data.resetSpeed+1,this.snapDampingFactor=0===this.data.snapSpeed?1:8/this.data.snapSpeed+1,this.actionsDrag=Iye(n,n.dragDropActions.drag,r,i,o,this.object),this.actionsDrop=Iye(n,n.dragDropActions.drop,r,i,o,this.object);let s=[];this.data.objects.forEach((e=>{let t=r.find(e);!t||!1!==t.data.visible&&(s.push(t),a[t.uuid]&&a[t.uuid].forEach((e=>{let t=r.find(e);!t||!1!==t.data.visible&&s.push(t)})))})),this.data.dropDestinations.forEach((e=>{let t=r.find(e);!t||!1!==t.data.visible&&(this.dropDestIds.push(t.uuid),a[t.uuid]&&a[t.uuid].forEach((e=>{let t=r.find(e);!t||!1!==t.data.visible&&this.dropDestIds.push(t.uuid)})))})),this.dragItems=s.map((e=>("locked"===this.data.planeMode&&(e.userData.lockedPlane=!0),e.userData.worldPosition0=(new jG).setFromMatrixPosition(e.matrixWorld),{obj:e,fromPosition:(new jG).setFromMatrixPosition(e.matrixWorld),pointStart:new jG,pointEnd:new jG,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:(new jG).copy(e.position),quat0:(new NG).copy(e.quaternion),snapped:!1,orientationMatrix:new gq,limits:this.data.limits,reference:this.data.referenceFrame})))}get activeDragItem(){return null!==this.activeIdx?this.dragItems[this.activeIdx]:null}dispose(){kye(this.actionsDrag),kye(this.actionsDrop),this.dragItems.forEach((e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()}))}},cwe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=e=>{var t;if(V6.length>1)return;this.eventContext.updateRaycaster(e);let{raycaster:n,page:r}=this.eventContext,i=r.raycastWithClones(n);if(this.lastDropDestination=null,0!==i.length){for(let e of this.events){let n=0;for(let{obj:r,pointEnd:o,pointStart:a}of e.dragItems){if(r===i[0].object||r===i[0].object.object||eie.is(r)&&r.isAncestorOf(i[0].object.uuid)){if(e.activeIdx=n,e.activeDragItem.reset=!1,e.activeDragItem.currentDampingFactor=e.data.dampingFactor,e.activeDragItem.snapped=!1,"hand"===e.data.cursor&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){e.activeDragItem.obj.rigidBody&&e.activeDragItem.obj.rigidBody.setBodyType(2,!0);let t=e.activeDragItem.obj;r.hasNonUniformScale&&r.updateMatrixWorldSVD(),(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(Xbe,Zbe,$be),ewe.setFromQuaternion(Zbe),void 0===t.prevR?(t.prevR=ewe.clone(),t.prevT=Xbe.clone()):(t.prevR.copy(ewe),t.prevT.copy(Xbe)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(e.activeDragItem.obj)}return this.calcPlaneIntersectPos(r,a,e.data.plane,e.data.referenceFrame),o.copy(a),(this.eventManager.controlsManager.usePhysics&&"dynamic"===(null==(t=r.data.physics)?void 0:t.rigidBody)||!1===e.data.drop||!1===e.data.resetOnSnapFail)&&e.activeDragItem.fromPosition.setFromMatrixPosition(e.activeDragItem.obj.matrixWorld),this.activeEvent=e,void(this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1))}n++}}this.activeEvent=null}else this.activeEvent=null},this.onPointerMove=e=>{var t,n,r,i;if(V6.length>1)return;this.eventContext.updateRaycaster(e);let{raycaster:o,page:a}=this.eventContext,s=a.raycastWithClones(o);if(0!==V6.length){if(this.activeEvent&&this.activeEvent.activeDragItem){let e,t=this.activeEvent.activeDragItem;if(t.snapped=!1,this.activeEvent.data.drop&&(e=s.filter((e=>t.obj!==e.object&&!t.obj.isAncestorOf(e.object.uuid)&&!(e.object instanceof Rhe)&&("all"===this.activeEvent.data.dropOn||this.activeEvent.dropDestIds.some((t=>t===e.object.uuid||a.scene.find(t).isAncestorOf(e.object.uuid))))))[0]),e){let n=Jbe.copy(e.face.normal).applyMatrix3(nwe.getNormalMatrix(e.object.matrixWorld));if("center"===this.activeEvent.data.snapTo)t.fromPosition.setFromMatrixPosition(e.object.matrixWorld);else if("surface"===this.activeEvent.data.snapTo){if(t.fromPosition.copy(e.point),"bbox"===this.activeEvent.data.snapSurfaceMode){Xbe.copy(n).applyMatrix3(nwe.setFromMatrix4(t.obj.matrixWorld).transpose());let e=t.obj;Xbe.x>owe?$be.x=-e.recursiveBBox.min.x:Xbe.x<-owe&&($be.x=-e.recursiveBBox.max.x),Xbe.y>owe?$be.y=-e.recursiveBBox.min.y:Xbe.y<-owe&&($be.y=-e.recursiveBBox.max.y),Xbe.z>owe?$be.z=-e.recursiveBBox.min.z:Xbe.z<-owe&&($be.z=-e.recursiveBBox.max.z),$be.applyMatrix3(nwe.invert())}else $be.copy(n).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);t.fromPosition.add($be)}this.activeEvent.data.autoOrient&&(Xbe.set(0,1,0).cross(n),Xbe.length()<1e-4&&Xbe.set(-1,0,0).cross(n),$be.crossVectors(Jbe,Xbe),t.orientationMatrix.makeBasis(Xbe,$be,n)),t.pointStart.copy(t.fromPosition),t.pointEnd.copy(t.pointStart),t.currentDampingFactor=this.activeEvent.snapDampingFactor,t.snapped=!0,this.lastDropDestination!==e.object&&(this.lastDropDestination=e.object,this.activeEvent.actionsDrop.Transition.forEach((e=>{e.play()})),this.activeEvent.actionsDrop.Animation.forEach((e=>{e.play()})),this.activeEvent.actionsDrop.Audio.forEach((e=>{e.dispatchGameControl("start")})),this.activeEvent.actionsDrop.Particles.forEach((e=>{e.dispatchGameControl("start")})),this.activeEvent.actionsDrop.Create.forEach((e=>{e.dispatchThrottled()})))}else t.orientationMatrix.makeRotationFromQuaternion(t.quat0),this.lastDropDestination=null,t.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(t.obj,t.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach((e=>{e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})})),this.activeEvent.actionsDrop.Animation.forEach((e=>{e.stop()})),this.activeEvent.actionsDrop.Audio.forEach((e=>{e.dispatchGameControl("stop")})),this.activeEvent.actionsDrop.Particles.forEach((e=>{e.dispatchGameControl("stop")}));this.activeEvent.actionsDrag.Create.forEach((e=>{e.dispatchThrottled()})),this.activeEvent.actionsDrag.SetVariable.forEach((e=>e.checkConditions())),this.activeEvent.actionsDrag.SetVariable.forEach((e=>e.dispatch())),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach((e=>e.dispatch())),this.activeEvent.actionsDrag.ClearLocalStorage.forEach((e=>e.dispatch())),this.activeEvent.actionsDrag.UserAPI.forEach((e=>e.dispatch())),!1===this.activeEvent.wasDragEventTriggered&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach((e=>{e.play()})),this.activeEvent.actionsDrag.Animation.forEach((e=>{e.play()})),this.activeEvent.actionsDrag.Audio.forEach((e=>{e.dispatchGameControl("start")})),this.activeEvent.actionsDrag.Particles.forEach((e=>{e.dispatchGameControl("start")}))),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout((()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach((e=>{e.dispatchGameControl("stop")})),this.activeEvent.actionsDrag.Particles.forEach((e=>{e.dispatchGameControl("stop")})),this.activeEvent.actionsDrag.Transition.forEach((e=>{e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})})),this.activeEvent.actionsDrag.Animation.forEach((e=>{e.stop()})))}),500),this.updateDragItem(t),t.obj.dispatchEvent({type:"requestRender"})}}else{let e=!1;for(let o of this.events){for(let{obj:a}of o.dragItems)if(a===(null==(t=s[0])?void 0:t.object)||a===(null==(r=null==(n=s[0])?void 0:n.object)?void 0:r.object)||eie.is(a)&&a.isAncestorOf(null==(i=s[0])?void 0:i.object.uuid)){switch(e=!0,o.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move")}break}if(e)break}e||this.setCursor("default")}},this.onPointerUp=e=>{var t;if(this.activeEvent&&this.activeEvent.activeDragItem){"hand"===this.activeEvent.data.cursor&&this.setCursor("grab");let e="dynamic"===(null==(t=this.activeEvent.activeDragItem.obj.data.physics)?void 0:t.rigidBody);!1===this.activeEvent.activeDragItem.snapped&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(!1===this.eventManager.controlsManager.usePhysics||!e)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&e&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),!0===this.activeEvent.wasDragEventTriggered&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach((e=>{e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})})),this.activeEvent.actionsDrag.Animation.forEach((e=>{e.stop()})),this.activeEvent.actionsDrag.Audio.forEach((e=>{e.dispatchGameControl("stop")})),this.activeEvent.actionsDrag.Particles.forEach((e=>{e.dispatchGameControl("stop")})),this.activeEvent.actionsDrop.SetVariable.forEach((e=>e.checkConditions())),this.activeEvent.actionsDrop.SetVariable.forEach((e=>e.dispatch())),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach((e=>e.dispatch())),this.activeEvent.actionsDrop.ClearLocalStorage.forEach((e=>e.dispatch())),this.activeEvent.actionsDrop.UserAPI.forEach((e=>e.dispatch()))),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity((t=>{t.component&&(e[t.component.uuid]?e[t.component.uuid].push(t.uuid):e[t.component.uuid]=[t.uuid])})),this.eventContext.page.traverseEntity((t=>{var n;null==(n=t.data)||n.events.filter((e=>"DragDrop"===e.data.type&&!e.data.disabled)).forEach((n=>{this.events.push(new lwe(t,n.id,n.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))}))})),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach((e=>e.dispose()))}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,n,r){let{getCamera:i,raycaster:o}=this.eventContext;i().getWorldDirection(qbe),qbe.negate();let a=Zbe.identity();switch("parent"===r?twe.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(Xbe,a,$be):"local"===r&&e.matrixWorld.decompose(Xbe,a,$be),n){case"x":Xbe.set(1,0,0).applyQuaternion(a),rwe.copy(qbe).cross(Xbe),iwe.copy(Xbe).cross(rwe);break;case"y":Xbe.set(0,1,0).applyQuaternion(a),rwe.copy(qbe).cross(Xbe),iwe.copy(Xbe).cross(rwe);break;case"z":Xbe.set(0,0,1).applyQuaternion(a),rwe.copy(qbe).cross(Xbe),iwe.copy(Xbe).cross(rwe);break;case"xy":iwe.set(0,0,1).applyQuaternion(a);break;case"yz":iwe.set(1,0,0).applyQuaternion(a);break;case"xz":iwe.set(0,1,0).applyQuaternion(a);break;case"adaptive":qbe.angleTo($be.set(0,1,0))>Math.PI/6?(Xbe.crossVectors($be.set(0,1,0),qbe),iwe.crossVectors(Xbe,$be)):iwe.set(0,1,0);break;default:iwe.copy(qbe)}Kbe.setFromMatrixPosition(e.matrixWorld);let s=e.userData.lockedPlane?e.userData.worldPosition0:Kbe;if(Ybe.setFromNormalAndCoplanarPoint(iwe,s),o.ray.intersectPlane(Ybe,t)&&("x"===n||"y"===n||"z"===n)){let e=$be.subVectors(t,s).dot(Xbe);t.copy(s).addScaledVector(Xbe,e)}}updateDragItem(e,t=!1){var n,r;Kbe.setFromMatrixPosition(e.obj.matrixWorld),"current"===e.reset?Gbe.subVectors(e.fromPosition,Kbe).divideScalar(e.currentDampingFactor):"original"===e.reset?(Gbe.subVectors(e.obj.userData.worldPosition0,Kbe).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):Gbe.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(Kbe).divideScalar(e.currentDampingFactor),e.paused=!(e.currentDampingFactor>1)||Gbe.length()<.01,(this.activeEvent&&1===this.activeEvent.data.dampingFactor||t)&&swe(e,Gbe.add(Kbe),(null==(n=this.activeEvent)?void 0:n.data.drop)&&(null==(r=this.activeEvent)?void 0:r.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},uwe=new jG,dwe=new jG,hwe=new jG,pwe=new jG,Awe=new qK,fwe={type:"requestRender"},mwe=function(){let e=new jG,t=new jG;return(n,r,i)=>i>0?(e.subVectors(n,r),e.length()<=i?n:t.copy(r).add(e.normalize().multiplyScalar(i))):r}(),gwe=function(){let e=new gq;return(t,n)=>{t.position.copy(n),null!==t.parent&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Use&&The(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),vwe=class{constructor(e,t,n,r,i,o){this.data=e,this.id=t,this.object=n,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new jG,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...P9.defaultData,...e,...void 0===e.resetOnPointerLeave&&{resetOnPointerLeave:!1}},void 0===e.target||"cursor"===e.target||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Iye(e,e.actions,r,i,o,n)}},ywe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=e=>{if(!(V6.length>1)){this.eventContext.updateRaycaster(e);for(let e of this.events)void 0===e.target&&this.updateSingleEvent(e)}},this.onMouseEnter=e=>{for(let t of this.events)void 0===t.target&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)void 0===t.target&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity((t=>{var n,r;let i=null==(n=t.data)?void 0:n.events.find((e=>"Follow"===e.data.type&&!e.data.disabled));i&&(!e.data.globalPhysics.usePhysics||"dynamic"!==(null==(r=t.dataPatched.physics)?void 0:r.rigidBody))&&this.events.push(new vwe(i.data,i.id,t,e,this.eventContext.sharedAssets,this.eventManager))})),!this.events.length)return;let{domElement:t,eventElement:n}=this.eventContext;this.domEventsNeeded.clear(),U6&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),n.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(void 0!==r.target){let e=r.target,t=this.onTargetChange(r);this.pairOfEventListeners.push([e,t]),e.addEventListener("requestRender",t)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),U6&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[n,r]of this.pairOfEventListeners)n.removeEventListener("requestRender",r);for(let n of this.events)n.paused=!0,n.isReset=!1,kye(n.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var n;this.events.forEach((e=>{e.actions.Create.forEach((e=>{e.dispatchThrottled()}))}));let{plane:r,limitDistance:i,limitDistanceEnabled:o}=e.data;if(e.object.getWorldPosition(hwe),e.isReset)pwe.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(pwe);else{let{getCamera:e,raycaster:t}=this.eventContext;if("custom"===r?(e().getWorldDirection(dwe),dwe.negate(),uwe.copy(dwe)):"xy"===r?uwe.set(0,0,1):"xz"===r?uwe.set(0,1,0):"yz"===r&&uwe.set(1,0,0),Awe.setFromNormalAndCoplanarPoint(uwe,hwe),!t.ray.intersectPlane(Awe,pwe))return}if(!e.isReset)if(pwe.distanceTo(e.worldPosition0)>i&&o&&e.target){if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;pwe.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor}else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout((()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)}),1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;!1===e.data.enabledTranslation[0]&&(pwe.x=hwe.x),!1===e.data.enabledTranslation[1]&&(pwe.y=hwe.y),!1===e.data.enabledTranslation[2]&&(pwe.z=hwe.z);let a=mwe(hwe,pwe,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let n=uwe.subVectors(a,hwe).divideScalar(e.currentDampingFactor);hwe.add(n),t&&gwe(e.object,hwe),e.paused=n.length()<.01}else gwe(e.object,a),e.paused=!0;null==(n=e.object)||n.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(fwe)}},bwe=new jG,wwe=new jG,xwe=new gq,Cwe=new NG,Swe=new NG,Bwe=new jG,_we=new jG,Ewe=new jG,Mwe=new jG,Pwe=new qK,Twe={type:"requestRender"},Dwe={type:"changeRotation"},Fwe=function(){let e=new gq;return function(t,n){null!==t.parent?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),n.premultiply(wbe(e).invert()),t.rotation.setFromRotationMatrix(n),t.updateMatrix(),t instanceof Use&&The(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),Iwe=class{constructor(e,t,n,r){this.id=t,this.object=n,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new NG,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...T9.defaultData,...e,...void 0===e.resetOnPointerLeave&&{resetOnPointerLeave:!1}},void 0===e.target||"cursor"===e.target||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},kwe=class extends Fbe{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(V6.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let e of this.events)void 0===e.target&&this.updateSingleEvent(e)}},this.onMouseEnter=e=>{for(let t of this.events)void 0===t.target&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)void 0===t.target&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let e=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(e)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>({eventName:t,target:n})=>{if(!t||!n)return;let r=Obe(t);r&&"LookAt"===r&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity((t=>{var n,r;let i=null==(n=t.data)?void 0:n.events.find((e=>"LookAt"===e.data.type&&!e.data.disabled));i&&(!e.data.globalPhysics.usePhysics||"dynamic"!==(null==(r=t.dataPatched.physics)?void 0:r.rigidBody))&&this.events.push(new Iwe(i.data,i.id,t,e))})),!this.events.length)return;let{domElement:t,eventElement:n}=this.eventContext;this.domEventsNeeded.clear(),U6&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),n.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?n.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(void 0!==r.target){let e=this.onTargetChange(r),t=r.target;this.pairOfEventListeners.push([t,e]),t.addEventListener("requestRender",e)}let e=this.createUserEventListener(r),t=r.object;this.pairOfUserEventListeners.push([t,e]),t.addEventListener("userEvent",e)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),U6&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[n,r]of this.pairOfEventListeners)n.removeEventListener("requestRender",r);for(let[n,r]of this.pairOfUserEventListeners)n.removeEventListener("userEvent",r);for(let n of this.events)n.paused=!0,n.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var t;let{tilt:n,axis:r,distance:i,plane:o,limitDistance:a,enabledRotation:s,limitDistanceEnabled:l}=e.data,{getCamera:c,raycaster:u}=this.eventContext,{object:d,target:h}=e;if(d.getWorldPosition(Bwe),!e.isReset)if(e.target)e.target.getWorldPosition(_we);else{if("custom"===o?(c().getWorldDirection(wwe),wwe.negate(),Pwe.setFromNormalAndCoplanarPoint(wwe,Bwe)):("xy"===o?bwe.set(0,0,1):"xz"===o?bwe.set(0,1,0):"yz"===o&&bwe.set(1,0,0),Pwe.setFromNormalAndCoplanarPoint(bwe,Bwe)),!u.ray.intersectPlane(Pwe,_we))return;i>0&&("custom"===o||void 0===o)&&_we.addScaledVector(wwe,i)}if(e.isReset||(h?"target"===n?Ewe.copy(h.up).applyMatrix4(xwe.extractRotation(h.matrixWorld)).normalize():s.some((e=>!1===e))?("x"===r?(Mwe.set(0,0,1),!1===s[2]&&Mwe.set(0,1,0)):"y"===r?(Mwe.set(1,0,0),!1===s[0]&&Mwe.set(0,0,1)):(Mwe.set(0,1,0),!1===s[1]&&Mwe.set(1,0,0)),Ewe.copy(Mwe).applyQuaternion(e.worldQuaternion0).normalize()):Ewe.set(0,1,0):"custom"===o?Ewe.set(0,1,0):Ewe.copy(bwe)),e.isReset)Swe.copy(e.worldQuaternion0);else if(Bwe.distanceTo(_we)>a&&l&&h){if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;Swe.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor}else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout((()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)}),1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;(function(e,t,n,r,i,o){let a=e.elements;Rwe.subVectors(t,n),0===Rwe.lengthSq()&&(Rwe.z=1),Rwe.normalize(),Lwe.crossVectors(r,Rwe),0===Lwe.lengthSq()&&(1===Math.abs(r.z)?Rwe.x+=1e-4:Rwe.z+=1e-4,Rwe.normalize(),Lwe.crossVectors(r,Rwe)),Lwe.normalize(),Owe.crossVectors(Rwe,Lwe),"x"===i?1===o.z?[Lwe,Owe,Rwe]=[Rwe,Lwe,Owe]:(Lwe.negate(),[Lwe,Rwe]=[Rwe,Lwe]):"y"===i?1===o.x?[Lwe,Owe,Rwe]=[Owe,Rwe,Lwe]:(Lwe.negate(),[Owe,Rwe]=[Rwe,Owe]):1===o.x&&(Lwe.negate(),[Lwe,Owe]=[Owe,Lwe]),a[0]=Lwe.x,a[4]=Owe.x,a[8]=Rwe.x,a[1]=Lwe.y,a[5]=Owe.y,a[9]=Rwe.y,a[2]=Lwe.z,a[6]=Owe.z,a[10]=Rwe.z})(xwe,_we,Bwe,Ewe,r,Mwe),Swe.setFromRotationMatrix(xwe),Cwe.setFromUnitVectors(Mwe.applyQuaternion(Swe),Ewe),s.some((e=>!1===e))&&"target"!==n&&Swe.premultiply(Cwe).normalize()}e.currentDampingFactor>1?(d.updateWorldMatrix(!0,!1),Cwe.setFromRotationMatrix(wbe(d.matrixWorld)),Cwe.slerp(Swe,1/e.currentDampingFactor),Fwe(d,xwe.makeRotationFromQuaternion(Cwe)),e.paused=8*(1-Cwe.dot(Swe))<1e-6):(Fwe(d,xwe.makeRotationFromQuaternion(Swe)),e.paused=!0),null==(t=e.object)||t.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),d.dispatchEvent(Twe),d.dispatchEvent(Dwe)}},Owe=new jG,Lwe=new jG,Rwe=new jG;var Uwe=class{constructor(e,t,n,r,i,o){this.id=e,this.data=t,this.object=n,this.entered=!1,this.actions=Iye(t,t.actions,r,i,o,n)}disconnect(){kye(this.actions)}dispatchEnter(){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),this.entered||(this.entered=!0,this.actions.Transition.forEach((e=>e.playFromCurrent())),this.actions.Animation.forEach((e=>e.play())),this.actions.Create.forEach((e=>e.dispatchStart())),this.actions.Particles.forEach((e=>e.dispatchBasic())),this.actions.Destroy.forEach((e=>e.dispatch())),this.actions.SwitchCamera.forEach((e=>e.playFromCurrent())),this.actions.SceneTransition.forEach((e=>e.dispatch())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch())))}dispatchLeave(){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),this.entered&&(this.entered=!1,this.actions.Create.forEach((e=>e.dispatchStop())),this.actions.Transition.forEach((e=>e.reverseFromCurrent())),this.actions.Particles.forEach((e=>e.reverseFromCurrent())),this.actions.SwitchCamera.forEach((e=>e.reverseFromCurrent())))}dispatchUserEvent(e){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),e?(this.actions.Transition.forEach((e=>e.reverseFromCurrent())),this.actions.Particles.forEach((e=>e.reverseFromCurrent())),this.actions.Animation.forEach((e=>e.reverseFromCurrent())),this.actions.SwitchCamera.forEach((e=>e.reverseFromCurrent()))):(this.actions.Transition.forEach((e=>e.playFromCurrent())),this.actions.Animation.forEach((e=>e.playFromCurrent())),this.actions.Create.forEach((e=>e.dispatch())),this.actions.Particles.forEach((e=>e.dispatchBasic())),this.actions.Destroy.forEach((e=>e.dispatch())),this.actions.SwitchCamera.forEach((e=>e.playFromCurrent()))),this.actions.SceneTransition.forEach((e=>e.dispatch())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch()))}},zwe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=e=>{V6.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseHoverEvent())},this.onMouseUp=e=>{V6.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=e=>{V6.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:e,target:t,reverse:n})=>{var r;if(!e||!t)return;let i=Obe(e);i&&"MouseHover"===i&&(t.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null==(r=this.eventsPerObjects[t.uuid])||r.forEach((e=>e.dispatchUserEvent(n))))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,n=(n,r)=>{var i,o;if(n.visible&&(null==(i=n.data)?void 0:i.events.length)){for(let{id:r,data:i}of n.data.events)if(!i.disabled&&"MouseHover"===i.type)try{let o=new Uwe(r,i,n,e,t,this.eventManager);this.eventsPerObjects[n.uuid]?this.eventsPerObjects[n.uuid].push(o):this.eventsPerObjects[n.uuid]=[o]}catch(a){}(null==(o=this.eventsPerObjects[n.uuid])?void 0:o.length)&&this.objects.push(n instanceof nfe?r:n)}};if(e.traverseEntity((e=>{var t;(e instanceof sme||e instanceof $fe)&&(null==(t=e.frame)||t.traverse((t=>{n(t,e)}))),n(e)})),!this.objects.length)return;let{domElement:r}=this.eventContext;this.domEventsNeeded.clear(),U6&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.objects.forEach((e=>{e.addEventListener("userEvent",this.onUserEvent)}))}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),U6&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach((e=>{e.forEach((e=>{e.disconnect()}))})),this.objects.forEach((e=>{e.removeEventListener("userEvent",this.onUserEvent)}))}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:e,raycaster:n,page:r,pointerScreen:i}=this.eventContext,o=!1;if(r.uiCanvas&&(o=Mbe(r,[i.x,i.y],Object.keys(this.eventsPerObjects),(e=>{t.push(e)}))),e&&!o){let e=_be(n,r,this.objects);t=Ebe(e),e.forEach((e=>{var n,r;e.object instanceof sme&&Mbe(e.object,[(null==(n=null==e?void 0:e.uv)?void 0:n.x)??0,(null==(r=null==e?void 0:e.uv)?void 0:r.y)??0],Object.keys(this.eventsPerObjects),(e=>{t.push(e)}))}))}else this.objects.forEach((e=>{var r,i;let o=Pbe(n,e);o&&(t.push(e),e instanceof sme&&Mbe(e,[(null==(r=null==o?void 0:o.uv)?void 0:r.x)??0,(null==(i=null==o?void 0:o.uv)?void 0:i.y)??0],Object.keys(this.eventsPerObjects),(e=>{t.push(e)})))}))}this._prevObjects.length&&this._prevObjects.forEach((e=>{var n;t.includes(e)||(e.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null==(n=this.eventsPerObjects[e.uuid])||n.forEach((e=>e.dispatchLeave())))})),t.length&&t.forEach((e=>{var t;e.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null==(t=this.eventsPerObjects[e.uuid])||t.forEach((e=>e.dispatchEnter()))})),this._prevObjects=t}},Nwe=class{constructor(e,t,n,r,i,o){this.id=e,this.data=t,this.object=n,this.scrollCounter=0,this.actions=Iye(t,t.actions,r,i,o,n)}connect(){this.scrollCounter=0}disconnect(){kye(this.actions)}dispatch(e){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}));let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let n=this.scrollCounter/this.data.steps;this.actions.Transition.forEach((e=>e.seek(n))),this.actions.Animation.forEach((e=>e.seek(t))),this.actions.Create.forEach((e=>e.dispatchThrottled())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch()))}dispatchUserEvent(e){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),e?(this.actions.Transition.forEach((e=>e.reverseFromCurrent())),this.actions.Animation.forEach((e=>e.reverseFromCurrent()))):(this.actions.Transition.forEach((e=>{e.playFromCurrent()})),this.actions.Animation.forEach((e=>{e.playFromCurrent()}))),this.actions.Create.forEach((e=>e.dispatchThrottled())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch()))}},jwe=class{constructor(e,t,n,r,i,o,a){this.id=e,this.data=t,this.object=n,this.domElement=o,this.eventManager=a,this.scrollStart=0,this.scrollEnd=0,this.actions=Iye(t,t.actions,r,i,a,n)}getStickyParentElement(){let e=this.domElement;for(;e;){if("sticky"===window.getComputedStyle(e).position)return e;e=e.parentElement}return null}computeScrollBounds(){let e=this.getStickyParentElement(),t=null==e?void 0:e.parentElement,n=this.domElement.getBoundingClientRect(),r={top:n.top,bottom:n.bottom,left:n.left,right:n.right,width:n.width,height:n.height};if(t){let i=t.getBoundingClientRect(),o=window.getComputedStyle(e),a=parseFloat(o.marginTop)+parseFloat(o.marginBottom),s=parseFloat(o.top),l=parseFloat(o.bottom),c=i.height-a;if(isNaN(s)){if(!isNaN(l)){let e=document.body.clientHeight??window.innerHeight,t=window.innerWidth-(document.documentElement.clientWidth??window.innerWidth);n.bottom===e-l?(r.top+=i.top-n.height+l+t,r.bottom+=i.top-n.height+l+t):n.bottom<e-l&&(r.top-=c-n.height,r.bottom-=c-n.height)}}else n.top===s?(r.top+=i.top-s,r.bottom+=i.top-s):n.top<0&&(r.top-=c-n.height,r.bottom-=c-n.height)}let i=document.body,o=document.documentElement,a=window.pageYOffset||o.scrollTop||i.scrollTop,s=o.clientTop||i.clientTop||0,l=Math.round(r.top+a-s);if("enter"===this.data.startFrom){let e=window.innerHeight,t=r.height,n=this.data.enterAnchor,i="top"===n?e:"bottom"===n?e-t:e-.5*t;this.scrollStart=l-i}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=r,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){kye(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return void 0===this.box||0===this.box.width&&0===this.box.height&&0===this.box.top&&0===this.box.bottom}computeScroll({x:e,y:t}){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}));let n=this.scrollEnd-this.scrollStart,r=Math.min(1,Math.max(0,(t-this.scrollStart)/n));this.actions.Transition.forEach((e=>e.seek(r))),this.actions.Animation.forEach((e=>e.seek(r))),this.actions.Create.forEach((e=>e.dispatchThrottled())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch()))}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),e?(this.actions.Transition.forEach((e=>e.reverseFromCurrent())),this.actions.Animation.forEach((e=>e.reverseFromCurrent()))):(this.actions.Transition.forEach((e=>{e.playFromCurrent()})),this.actions.Animation.forEach((e=>{e.playFromCurrent()}))),this.actions.Create.forEach((e=>e.dispatchThrottled())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch()))}},Hwe=class extends Fbe{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach((([e,t])=>{t.forEach((e=>e.handleResize()))}))},this.onScroll=e=>{if(!this.isInview)return;let t={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach((([e,n])=>{e.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:t}),n.forEach((e=>e.dispatch(t)))}))},this.onWheel=e=>{!this.isInview||e.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach((([t,n])=>{t.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:e.deltaY}),n.forEach((t=>t.dispatch(e.deltaY)))}))},this.onUserEvent=({eventName:e,target:t,reverse:n})=>{var r;if(!e||!t)return;let i=Obe(e);i&&"Scroll"===i&&(t.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),null==(r=this.wheelEventsPerObject.get(t))||r.forEach((e=>{e.dispatchUserEvent(n)})))}}connect(){let{page:e,sharedAssets:t,domElement:n,isExport:r}=this.eventContext,i=i=>{var o,a,s;if(null==(o=i.data)?void 0:o.events.length)for(let{id:l,data:c}of i.data.events)if(!c.disabled&&"Scroll"===c.type)if("load"!==c.trigger&&r){let r=new jwe(l,c,i,e,t,n,this.managers);this.scrollEventsPerObject.has(i)?null==(s=this.scrollEventsPerObject.get(i))||s.push(r):this.scrollEventsPerObject.set(i,[r])}else{let n=new Nwe(l,c,i,e,t,this.managers);this.wheelEventsPerObject.has(i)?null==(a=this.wheelEventsPerObject.get(i))||a.push(n):this.wheelEventsPerObject.set(i,[n])}};e.traverseEntity((e=>{var t;(e instanceof sme||e instanceof $fe)&&(null==(t=e.frame)||t.traverse((e=>{i(e)}))),i(e)})),this.intersectionObserver=new IntersectionObserver((e=>{let t=e[0];t&&(this.isInview=t.isIntersecting)}),{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach((([e,t])=>{t.forEach((e=>e.connect())),e.addEventListener("userEvent",this.onUserEvent)})),[...this.scrollEventsPerObject.entries()].forEach((([e,t])=>{t.forEach((e=>e.connect())),e.addEventListener("userEvent",this.onUserEvent)})),[...this.wheelEventsPerObject.values()].some((e=>e.length))&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some((e=>e.length))&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach((([e,t])=>{t.forEach((e=>e.disconnect())),e.removeEventListener("userEvent",this.onUserEvent)})),[...this.scrollEventsPerObject.entries()].forEach((([e,t])=>{t.forEach((e=>e.disconnect())),e.removeEventListener("userEvent",this.onUserEvent)}))}},Qwe=class{constructor(e,t,n,r,i,o){this.id=e,this.data=t,this.object=n,this.actions=Iye(t,t.actions,r,i,o,n)}disconnect(){kye(this.actions)}dispatch(){this.actions.Transition.forEach((e=>{e.play()})),this.actions.Animation.forEach((e=>{e.play()})),this.actions.SwitchCamera.forEach((e=>{e.play()})),this.actions.SceneTransition.forEach((e=>{e.dispatch()})),this.actions.Reset.forEach((e=>e.dispatch())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch())),this.actions.Create.forEach((e=>{e.dispatchFromStart()})),this.actions.Destroy.forEach((e=>{e.dispatchFromStart()}))}dispatchAfter(e){this.actions.Audio.forEach((t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof Sge?t.interaction.audioPlayer.play():t.interaction instanceof Bge&&t.interaction.dispatch())})),this.actions.Video.forEach((t=>{let n=t.interaction.data.triggerAfter??"autoplay";n===e&&(t.interaction instanceof Rye?t.interaction.play("autoplay"===n):t.interaction instanceof Uye&&t.interaction.dispatch())})),this.actions.Particles.forEach((t=>{(t.data.triggerAfter??"any")===e&&t.dispatchBasic()}))}dispatchUserEvent(e){this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),e?(this.actions.Transition.forEach((e=>e.reverseFromCurrent())),this.actions.Animation.forEach((e=>e.reverseFromCurrent())),this.actions.SwitchCamera.forEach((e=>e.reverseFromCurrent()))):(this.actions.Transition.forEach((e=>e.playFromCurrent())),this.actions.Animation.forEach((e=>e.playFromCurrent())),this.actions.SwitchCamera.forEach((e=>e.playFromCurrent()))),this.actions.SceneTransition.forEach((e=>e.dispatch())),this.actions.Reset.forEach((e=>e.dispatch())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch())),this.actions.Create.forEach((e=>{e.dispatch()})),this.actions.Destroy.forEach((e=>{e.dispatch()})),this.actions.Audio.forEach((e=>{e.interaction instanceof Sge?e.interaction.audioPlayer.play():e.interaction instanceof Bge&&e.interaction.dispatch()})),this.actions.Video.forEach((e=>{e.interaction instanceof Rye?e.interaction.play():e.interaction instanceof Uye&&e.interaction.dispatch()})),this.actions.Particles.forEach((e=>{e.dispatchBasic()}))}},Vwe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach((([e,t])=>{e.dispatchEvent({type:"beginEvent",eventName:"Start"}),t.forEach((e=>{e.dispatchAfter("mouseDown")}))}))},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach((([e,t])=>{e.dispatchEvent({type:"beginEvent",eventName:"Start"}),t.forEach((e=>{e.dispatchAfter("keyDown")}))}))},this.onAny=()=>{let{domElement:e,isExport:t}=this.eventContext,n=t?document:e;n.removeEventListener("pointerdown",this.onAny),n.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach((([e,t])=>{e.dispatchEvent({type:"beginEvent",eventName:"Start"}),t.forEach((e=>{e.dispatchAfter("any")}))}))},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach((([e,t])=>{e.dispatchEvent({type:"beginEvent",eventName:"Start"}),t.forEach((e=>{e.actions.Audio.forEach((e=>{e.interaction instanceof Sge&&e.interaction.audioPlayer.play()})),e.actions.Video.forEach((e=>{let t=e.interaction.data.triggerAfter??"autoplay";e.interaction instanceof Rye&&e.interaction.play("autoplay"===t)})),e.actions.Particles.forEach((e=>{e.dispatchBasic()}))}))}))},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach((([e,t])=>{e.dispatchEvent({type:"beginEvent",eventName:"Start"}),t.forEach((e=>{e.dispatchAfter("autoplay")}))}))},this.onUserEvent=({eventName:e,target:t,reverse:n})=>{var r,i;if(!e||!t)return;let o=Obe(e);o&&"Start"===o&&(t instanceof nfe||t.dispatchEvent({type:"beginEvent",eventName:"Start"}),null==(r=this.eventsPerObject.get(t))||r.forEach((e=>{e.dispatchUserEvent(n)})),null==(i=this.eventsAfterPerObject.get(t))||i.forEach((e=>{e.dispatchUserEvent(n)})))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,n=n=>{var r,i,o,a,s;if(null==(r=n.data)?void 0:r.events.length)for(let{id:l,data:c}of n.data.events){if(c.disabled||"Start"!==c.type)continue;let r=new Qwe(l,c,n,t,e,this.eventManager);(r.actions.Transition.length||r.actions.Animation.length||r.actions.SwitchCamera.length||r.actions.Create.length||r.actions.Destroy.length||r.actions.SceneTransition.length||r.actions.Reset.length||r.actions.SetVariable.length||r.actions.DynamicVariablePlay.length||r.actions.ClearLocalStorage.length||r.actions.UserAPI.length)&&(this.eventsPerObject.has(n)?null==(i=this.eventsPerObject.get(n))||i.push(r):this.eventsPerObject.set(n,[r])),r.actions.Audio.length&&(this.eventsAfterPerObject.has(n)?null==(o=this.eventsAfterPerObject.get(n))||o.push(r):this.eventsAfterPerObject.set(n,[r])),r.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(n)?null==(a=this.eventsAfterPerObject.get(n))||a.push(r):this.eventsAfterPerObject.set(n,[r])),r.actions.Particles.length&&(this.eventsAfterPerObject.has(n)?null==(s=this.eventsAfterPerObject.get(n))||s.push(r):this.eventsAfterPerObject.set(n,[r]))}};if(t.traverseEntity((e=>{var t;(e instanceof sme||e instanceof $fe)&&(null==(t=e.frame)||t.traverse((e=>{n(e)}))),n(e)})),[...this.eventsAfterPerObject.values()].some((e=>e.length))){if(0===this.eventManager.activateCount){let{domElement:e,isExport:t}=this.eventContext,n=t?document:e;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),n.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),n.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach((([e,t])=>{e.addEventListener("userEvent",this.onUserEvent)}))}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach((([e,t])=>{e.dispatchEvent({type:"beginEvent",eventName:"Start"}),t.forEach((e=>e.dispatch())),e.addEventListener("userEvent",this.onUserEvent)}))}disconnect(){if([...this.eventsAfterPerObject.values()].some((e=>e.length))){let{domElement:e,isExport:t}=this.eventContext,n=t?document:e;n.removeEventListener("pointerdown",this.onMouseDown),n.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),n.removeEventListener("pointerdown",this.onAny),n.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach((([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach((e=>e.disconnect()))}))}[...this.eventsPerObject.entries()].forEach((([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach((e=>e.disconnect()))})),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},Wwe=class{constructor(e,t,n,r,i,o){this.id=e,this.data=t,this.object=n,this.initialDisabled=!1,this.actions=Iye(t,t.actions,r,i,o,n),this.target=t.target}disconnect(){kye(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach((e=>{"Toggle"===e.data.runMode?e.toggle():e.play()})),this.actions.Animation.forEach((e=>{"Toggle"===e.data.runMode?e.toggle():e.play()})),this.actions.Reset.forEach((e=>{e.dispatch()})),this.actions.Link.forEach((e=>{e.dispatch()})),this.actions.Reset.forEach((e=>{e.dispatch()})),this.actions.Create.forEach((e=>{e.dispatch()})),this.actions.Destroy.forEach((t=>{t.dispatch(e??!1)})),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.Audio.forEach((e=>{e.dispatchBasic()})),this.actions.Particles.forEach((e=>{e.dispatchBasic()})),this.actions.Video.forEach((e=>{e.dispatchBasic()})),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch())))}},Gwe=class extends Fbe{constructor(e,t,n,r,i){super(e),this.sharedVariables=t,this.eventManager=n,this.needsMouse=r,this.needsRaycast=i,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=e=>{let t=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let n=new Date,r=[],i=[];for(let s=0;s<this.propertiesToWatch.length;s++){let{objectId:e,property:t,prevValue:n}=this.propertiesToWatch[s],r=this.eventContext.scene.find(e),o=U9.propertyPaths[t];if("width"===o[0]||"height"===o[0]||"depth"===o[0])r=r.geometry.userData.parameters[o[0]];else for(let i=0;i<o.length;i++)r=r[o[i]];null===n?this.propertiesToWatch[s].prevValue=r instanceof jG?r.clone():r:(r instanceof jG?!r.equals(n):n!==r)&&(i.push({objId:e,property:t}),r instanceof jG?this.propertiesToWatch[s].prevValue.copy(r):this.propertiesToWatch[s].prevValue=r)}for(let s=0;s<this.variablesToWatch.length;s++){let{id:e,prevValue:n}=this.variablesToWatch[s],i=t.getVariable(e);i!==n&&(r.push(e),this.variablesToWatch[s].prevValue=i)}for(let s=0;s<this.dynamicVars.length;s++){let{id:i,expectedTime:o,last:a,data:l,timerSeconds:c,startValue:u}=this.dynamicVars[s],d=1e3;if("timer"!==l.dynamicVariableType&&"stopwatch"!==l.dynamicVariableType||"number3decimal"!==l.format?"counter"===l.dynamicVariableType?d=l.updateInterval:"random"===l.dynamicVariableType&&(d=l.isStatic?1/0:l.updateInterval):d=1,-1!==o){if("Stopped"!==t.getDynamicVariablePlayState(i)&&"Restarted"!==t.getDynamicVariablePlayState(i)||(this.dynamicVars[s].last=e,this.dynamicVars[s].expectedTime=e+d,"counter"===l.dynamicVariableType&&t.getVariable(i)!==u&&(t.updateVariable(i,u),this.eventManager.requestRender()),("timer"===l.dynamicVariableType||"stopwatch"===l.dynamicVariableType)&&this.dynamicVars[s].timerSeconds!==u&&(this.dynamicVars[s].timerSeconds=u,t.updateVariable(i,Mte.getFormattedTimerTime(u,l)),this.eventManager.requestRender()),"Restarted"===t.getDynamicVariablePlayState(i)&&t.setDynamicVariablePlayState(i,"Playing"),"Stopped"!==t.getDynamicVariablePlayState(i))){if("Paused"===t.getDynamicVariablePlayState(i)){void 0===this.dynamicVars[s].deltaToExpectedTime&&(this.dynamicVars[s].deltaToExpectedTime=Math.max(this.dynamicVars[s].expectedTime-e,0)),this.dynamicVars[s].last=e-(d-this.dynamicVars[s].deltaToExpectedTime),this.dynamicVars[s].expectedTime=e+this.dynamicVars[s].deltaToExpectedTime;continue}if(this.dynamicVars[s].deltaToExpectedTime=void 0,e>=o)if(this.dynamicVars[s].last=e,this.dynamicVars[s].expectedTime+=d,"random"===l.dynamicVariableType){let e=l.min+Math.random()*(l.max-l.min),n=l.decimals;e=Math.round(e*Math.pow(10,n))/Math.pow(10,n),t.updateVariable(i,e),r.push(i),this.eventManager.requestRender()}else if("counter"===l.dynamicVariableType){let e=t.getVariable(i),n=t.getDynamicVariableToggleIsForward(i)??!0,o=t.getVariable(i)+l.increment*(n?1:-1);l.hasEnd&&(o=l.increment>0?dG.clamp(o,u,l.endValue):dG.clamp(o,l.endValue,u),o===u&&t.setDynamicVariableToggleIsForward(i,void 0),l.repeat?o===l.endValue&&(o=u):(o===u||o===l.endValue)&&t.setDynamicVariablePlayState(i,"Paused")),o!==e&&(r.push(i),t.updateVariable(i,o),this.eventManager.requestRender())}else if("time"===l.dynamicVariableType){let e=t.getVariable(i),o=aue(n,l);if("object"==typeof e&&"textValue"in e&&"object"==typeof o&&"textValue"in o){if(Array.isArray(e.textValue)&&Array.isArray(o.textValue)){if(e.textValue.every(((e,t)=>e===o.textValue[t])))continue}else if(e.textValue===o.textValue)continue}else if(e===o)continue;t.updateVariable(i,o),r.push(i),this.eventManager.requestRender()}else{let n=Cte.isTextValue(l.endValue)?Kwe(l.endValue.textValue):l.endValue,o=t.getDynamicVariableToggleIsForward(i)??!0,d=c+(e-a)/1e3*("timer"===l.dynamicVariableType?-1:1)*(o?1:-1);d=Math.max(d,0),l.hasEnd&&(d="stopwatch"===l.dynamicVariableType?dG.clamp(d,u,n):dG.clamp(d,n,u),d===u&&t.setDynamicVariableToggleIsForward(i,void 0),l.repeat?Math.abs(d-n)<("number3decimal"===l.format?1e-4:.1)&&(d=u):(Math.abs(d-u)<("number3decimal"===l.format?1e-4:.1)||Math.abs(d-n)<("number3decimal"===l.format?1e-4:.1))&&t.setDynamicVariablePlayState(i,"Paused")),d!==c&&(r.push(i),this.dynamicVars[s].timerSeconds=d,t.updateVariable(i,Mte.getFormattedTimerTime(d,l)),this.eventManager.requestRender())}}}else this.dynamicVars[s].last=e,this.dynamicVars[s].expectedTime=e+d}let o=!1;t.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=t.mouseProperty,o=!0);let a=!1;t.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=t.raycastProperty,a=!0),this.events.forEach((e=>{(r.includes(e.data.variableId)||i.find((t=>t.objId===e.data.objectId&&t.property===e.data.property))||"mouseProperty"===e.data.variableId&&o||"raycastProperty"===e.data.variableId&&a)&&(e.dispatch(),this.eventManager.requestRender())}))},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity((e=>{var t;null==(t=e.data)||t.events.filter((e=>"VariableChange"===e.data.type&&!e.data.disabled)).forEach((t=>{this.events.push(new qwe(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))}))})),this.propertiesToWatch=this.events.filter((e=>"objectProperty"===e.data.variableId&&null!==e.data.objectId)).map((e=>({objectId:e.data.objectId,property:e.data.property,prevValue:null})));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach((({id:t,data:n})=>{if(!("dynamicVariableType"in n))return void(this.events.find((e=>e.data.variableId===t))&&this.variablesToWatch.push({id:t,prevValue:e.getVariable(t)}));let r;if("timer"===n.dynamicVariableType||"stopwatch"===n.dynamicVariableType){let e;if(Cte.isTextValue(n.value)&&Array.isArray(n.value.textValue)){let t=n.value.textValue;e=3===t.length?t[2]+60*t[1]+3600*t[0]:t[1]+60*t[0]}else e=n.value;r=e,this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:n,timerSeconds:e,startValue:r})}else"time"===n.dynamicVariableType&&e.updateVariable(t,aue(new Date,n)),"counter"===n.dynamicVariableType&&(r=Cte.isTextValue(n.value)?Kwe(n.value.textValue):n.value),this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:n,startValue:r})})),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach((e=>e.dispose()))}},qwe=class{constructor(e,t,n,r,i,o){this.id=e,this.data=t,this.object=n,this.actions=Iye(t,t.actions,r,i,o,n)}dispatch(){let e=this.actions;e.Audio.forEach((e=>e.dispatchConditional())),e.Particles.forEach((e=>e.dispatchConditional())),e.Video.forEach((e=>e.dispatchConditional())),e.Create.forEach((e=>e.dispatch())),e.Destroy.forEach((e=>e.dispatch())),e.Reset.forEach((e=>e.dispatch())),e.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()})),e.Transition.forEach((e=>e.play())),e.Animation.forEach((e=>e.play())),e.SwitchCamera.forEach((e=>e.play())),e.SceneTransition.forEach((e=>e.dispatch())),e.SetVariable.forEach((e=>e.checkConditions())),e.SetVariable.forEach((e=>e.dispatch())),e.DynamicVariablePlay.forEach((e=>e.dispatch())),e.ClearLocalStorage.forEach((e=>e.dispatch())),e.UserAPI.forEach((e=>e.dispatch()))}dispose(){kye(this.actions)}};function Kwe(e){return 3===e.length?e[2]+60*e[1]+3600*e[0]:e[1]+60*e[0]}var Ywe,Xwe,$we,Jwe={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1};n8.then((e=>{Ywe=e,Xwe=new e.Vec3,$we=new e.Vec3}));var Zwe=new jG,exe=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=e=>{if(1!==V6.length)return;let{raycaster:t,page:n}=this.eventContext;this.eventContext.updateRaycaster(e);let r=n.raycastWithClones(t);if(0!==r.length){if(this.gameControl){let e=Zwe.copy(this.gameControl.colliderWorldPosition);e.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(e,r[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(e,t)=>n=>{var r,i,o,a,s,l,c;let u;if(n instanceof rhe){if(!n.objectForSample)return!0===n.object.dataPatched.physics.fusedBody&&"dynamic"===n.object.dataPatched.physics.rigidBody||void 0;if(n.objectForSample.dataPatched.physics.fusedBody)return;u=n.object}else if(n instanceof rie)u=n.object;else if(u=n,!1===(null==(r=u.dataPatched.cloner)?void 0:r.disabled)&&(null==(i=u.dataPatched.cloner)?void 0:i.hideBase)&&!0!==(null==(o=u.dataPatched.physics)?void 0:o.fusedBody))return!0;if(t&&!u.userData.navmesh)return;let d=u.dataPatched;if(!d.visible&&!0!==(null==(a=d.physics)?void 0:a.enabled))return!0;n.updateMatrixWorldSVD();let h=zxe(d),p=u.userData.hasDestroy,A=u.userData.hasDrag,f=!1,m=!1;for(let e of d.events)!0!==e.data.disabled&&("GameControl"===e.data.type?f=!0:"Follow"===e.data.type&&(m=!0));if(f||h||m||p||A)return!0;if(this.usePhysics&&"dynamic"===(null==(s=d.physics)?void 0:s.rigidBody)){if(this.usePhysics&&(null==(l=d.physics)?void 0:l.fusedBody))return!0}else if("geometry"in n&&n.geometry&&e.push(gbe(n.geometry,n.matrixWorld)),this.usePhysics&&(null==(c=d.physics)?void 0:c.fusedBody))return n.traverseObject(((t,n)=>{var r,i;if(0===n)return;let o;if(t instanceof rhe){if(!t.objectForSample)return!0===t.object.dataPatched.physics.fusedBody&&"dynamic"===t.object.dataPatched.physics.rigidBody||void 0;if(t.objectForSample.dataPatched.physics.fusedBody)return;o=t.object}else if(t instanceof rie)o=t.object;else if(o=t,null==(r=t.dataPatched.cloner)?void 0:r.hideBase)return!0;let a=o.dataPatched;if(!a.visible&&!0!==(null==(i=a.physics)?void 0:i.enabled))return!0;"geometry"in t&&t.geometry&&e.push(gbe(t.geometry,t.matrixWorld))})),!0},this.traverseNoPhysics=(e,t)=>n=>{let r;if(n instanceof rhe)return;r=n instanceof rie?n.object:n;let i=r.dataPatched;if("visibility"===i.physics.enabled?!i.visible:!i.physics.enabled)return!0;if(t&&!r.userData.navmesh)return;let o=n.geometry,a=!0===r.userData.hasDestroy,s=!0===r.userData.hasDrag;if(zxe(i)||a||s||r.dataPatched.events.some((e=>!0!==e.data.disabled&&"GameControl"===e.data.type)))return!0;o&&e.push(gbe(o,n.matrixWorld))},this.navmeshWasm=Ywe,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?"\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport('https://unpkg.com/@splinetool/runtime@1.9.21/build/' + 'navmesh.js'),\n\t\tfetch('https://unpkg.com/@splinetool/navmesh-wasm@1.9.21/build/' + 'navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n":"\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport(self.location.origin + '/_libraries/navmesh.js'),\n\t\tfetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n")+"\n\nonmessage = function(messageEvent) {\n\tconst meshData = messageEvent.data;\n\tconst positions = meshData[0];\n\tconst offset = meshData[1];\n\tconst indices = meshData[2];\n\tconst indicesLength = meshData[3];\n\tconst parameters = meshData[4];\n\n\tconst module = self.module;\n\tconst rc = new module.rcConfig();\n\trc.cs = parameters.cs;\n\trc.ch = parameters.ch;\n\trc.borderSize = parameters.borderSize ? parameters.borderSize : 0;\n\trc.tileSize = parameters.tileSize ? parameters.tileSize : 0;\n\trc.walkableSlopeAngle = parameters.walkableSlopeAngle;\n\trc.walkableHeight = parameters.walkableHeight;\n\trc.walkableClimb = parameters.walkableClimb;\n\trc.walkableRadius = parameters.walkableRadius;\n\trc.maxEdgeLen = parameters.maxEdgeLen;\n\trc.maxSimplificationError = parameters.maxSimplificationError;\n\trc.minRegionArea = parameters.minRegionArea;\n\trc.mergeRegionArea = parameters.mergeRegionArea;\n\trc.maxVertsPerPoly = parameters.maxVertsPerPoly;\n\trc.detailSampleDist = parameters.detailSampleDist;\n\trc.detailSampleMaxError = parameters.detailSampleMaxError;\n\n\tif (!self.navMesh) {\n\t\tself.navMesh = new module.NavMesh();\n\t}\n\tself.navMesh.build(positions, offset, indices, indicesLength, rc);\n\n\tconst navmeshData = navMesh.getNavmeshData();\n\tconst arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);\n\tconst ret = new Uint8Array(navmeshData.size);\n\tret.set(arrView);\n\tnavMesh.freeNavmeshData(navmeshData);\n\n\tpostMessage(ret);\n}\n"])),this._worker=new Worker(this._workerURL)}init(e,t,n){this.gameControl=t,this.eventContext=n,this.setDefaultQueryExtent((new jG).setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(n.page,e,(e=>{this.buildFromNavmeshData(e.data)}))},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,n){t.objects.forEach((t=>{var n;let r=e.scene.find(t);r.traverseEntity((e=>{e.userData.navmesh=!0})),null==(n=r.cloner)||n.traverseObject((e=>{e.userData.navmesh=!0}))}));let r=[],i=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(r,"custom"===t.zones);if(e.traverseChildren(i),t.objects.forEach((t=>{var n;let r=e.scene.find(t);r.traverseEntity((e=>{e.userData.navmesh=void 0})),null==(n=r.cloner)||n.traverseObject((e=>{e.userData.navmesh=void 0}))})),0===r.length)return!1;let o=yne(r),{positions:a,triIndices:s}=cse(o.getAttribute("position"),o.getIndex());return this._worker.postMessage([a,a.length/3,s,s.length,{...Jwe,...t}]),this._worker.onmessage=n,!0}createDebugNavGeometry(){let e,t,n=this.navMesh.getDebugNavMesh(),r=n.getTriangleCount(),i=new Uint32Array(3*r),o=new Float32Array(3*r*3);for(e=0;e<3*r;e++)i[e]=e;for(e=0;e<r;e++)for(t=0;t<3;t++){let r=n.getTriangle(e).getPoint(t);o[9*e+3*t+0]=r.x,o[9*e+3*t+1]=r.y,o[9*e+3*t+2]=r.z}let a=new mK;return a.setIndex(new oK(i,1)),a.setAttribute("position",new oK(o,3)),a}getClosestPoint(e){return Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z,this.navMesh.getClosestPoint(Xwe)}getClosestPointToRef(e,t){Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z;let n=this.navMesh.getClosestPoint(Xwe);t.set(n.x,n.y,n.z)}getRandomPointAround(e,t){return Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z,this.navMesh.getRandomPointAround(Xwe,t)}getRandomPointAroundToRef(e,t,n){Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z;let r=this.navMesh.getRandomPointAround(Xwe,t);n.set(r.x,r.y,r.z)}moveAlong(e,t){return Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z,$we.x=t.x,$we.y=t.y,$we.z=t.z,this.navMesh.moveAlong(Xwe,$we)}moveAlongToRef(e,t,n){return Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z,$we.x=t.x,$we.y=t.y,$we.z=t.z,this.navMesh.moveAlong(Xwe,$we)}computePath(e,t){let n=this.getClosestPoint(t);if($we.x=n.x,$we.y=n.y,$we.z=n.z,Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)+Math.pow(t.z-n.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let r=this.navMesh.computePath(Xwe,$we),i=r.getPointCount(),o=[];for(let a=0;a<i;a++){let e=r.getPoint(a);o.push(new jG(e.x,e.y,e.z))}return o}createCrowd(e,t){return new txe(this,e,t)}setDefaultQueryExtent(e){Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z,this.navMesh.setDefaultQueryExtent(Xwe)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,n=this.navmeshWasm._malloc(t),r=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,n,t);r.set(e);let i=new this.navmeshWasm.NavmeshData;i.dataPointer=r.byteOffset,i.size=e.length,this.navMesh.buildFromNavmeshData(i),this.navmeshWasm._free(r.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),n=new Uint8Array(e.size);return n.set(t),this.navMesh.freeNavmeshData(e),n}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),null==(e=this.eventContext)||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,n){return Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z,this.navMesh.addCylinderObstacle(Xwe,t,n)}addBoxObstacle(e,t,n){return Xwe.x=e.x,Xwe.y=e.y,Xwe.z=e.z,$we.x=t.x,$we.y=t.y,$we.z=t.z,this.navMesh.addBoxObstacle(Xwe,$we,n)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return void 0!==this.navmeshWasm}},txe=class{constructor(e,t,n){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,n,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,n){let r=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;r.radius=t.radius,r.height=t.height,r.maxAcceleration=t.maxAcceleration,r.maxSpeed=t.maxSpeed,r.collisionQueryRange=t.collisionQueryRange,r.pathOptimizationRange=t.pathOptimizationRange,r.separationWeight=t.separationWeight,r.updateFlags=7,r.obstacleAvoidanceType=0,r.queryFilterType=0,r.userData=0;let i=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),r);return this.transforms.push(n),this.agents.push(i),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new jG(0,0,0)),i}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let n=this.crowd.getAgentPosition(e);t.set(n.x,n.y,n.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let n=this.crowd.getAgentVelocity(e);t.set(n.x,n.y,n.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let n=this.crowd.getAgentNextTargetPath(e);t.set(n.x,n.y,n.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let n=this.agents.indexOf(e);n>-1&&(this._agentDestinationArmed[n]=!0,this._agentDestination[n].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let n=this.crowd.getAgentParameters(e);void 0!==t.radius&&(n.radius=t.radius),void 0!==t.height&&(n.height=t.height),void 0!==t.maxAcceleration&&(n.maxAcceleration=t.maxAcceleration),void 0!==t.maxSpeed&&(n.maxSpeed=t.maxSpeed),void 0!==t.collisionQueryRange&&(n.collisionQueryRange=t.collisionQueryRange),void 0!==t.pathOptimizationRange&&(n.pathOptimizationRange=t.pathOptimizationRange),void 0!==t.separationWeight&&(n.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,n)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=.001)return;let t=1/60;{let n=Math.floor(e/t);n>10&&(n=10),n<1&&(n=1);let r=e/n;for(let e=0;e<n;e++)this.crowd.update(r)}for(let n=0;n<this.agents.length;n++){let e=this.agents[n],t=this.getAgentPosition(e);if(this.transforms[n].copy(t),this._agentDestinationArmed[n]){let r=t.x-this._agentDestination[n].x,i=t.z-this._agentDestination[n].z,o=this.reachRadii[n],a=this._agentDestination[n].y-this.reachRadii[n],s=this._agentDestination[n].y+this.reachRadii[n],l=r*r+i*i;t.y>a&&t.y<s&&l<o*o&&(this.onReachTarget(e,this._agentDestination[n]),this._agentDestinationArmed[n]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,n=this.crowd.getCorners(e),r=n.getPointCount(),i=[];for(t=0;t<r;t++){let e=n.getPoint(t);i.push(new jG(e.x,e.y,e.z))}return i}dispose(){this.crowd.destroy()}};function nxe(e){let t=!1;return e.scene.objects.forEach((n=>{"Page"===n.data.type&&!t&&n.data.publish.gameControlObject&&vte.traverseModuleInstances(e,n.id,((e,n,r)=>{for(let i of r)"GameControl"===i.data.type&&i.data.navmesh.enabled&&(t=!0)}))})),t}var rxe={type:"change"},ixe={type:"changeZoom"},oxe={type:"changePan"},axe={type:"start"},sxe={type:"end",changed:!0},lxe={type:"end",changed:!1},cxe=new NG,uxe=new hG,dxe=2*Math.PI,hxe=new jG,pxe=new hG,Axe=new jG,fxe=new NG,mxe=new gq,gxe={type:"requestRender"},vxe=class extends $W{constructor(e,t,n={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=n,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,SQ,xQ],this.offset=new jG,this.eye=new jG,this.lastPosition=new jG,this.lastQuaternion=new NG,this.current=new hG,this.overShoot=new hG,this.overRatio=new hG,this.spherical=new C0,this.sphericalDelta=new C0,this.panOffset=new jG,this.panLeftV=new jG,this.panUpV=new jG,this.panV=new jG,this.rotateStart=new hG,this.rotateEnd=new hG,this.rotateDelta=new hG,this.panStart=new hG,this.panEnd=new hG,this.panDelta=new hG,this.dollyStart=new hG,this.dollyEnd=new hG,this.dollyDelta=new hG,this.rotationRangeFactor=new hG,this.panRangeFactor=new hG,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=e=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=e.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(Axe,fxe,hxe),this.offset.copy(Axe).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&-1===this.state&&this.rotateLeft((!0===this.autoRotateClockwise?1:-1)*this.getAutoRotationAngle()),0!==this.rotationLimitsMode&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),2!==this.rotationLimitsMode&&(this.spherical.phi+=this.sphericalDelta.phi),(1!==this.rotationLimitsMode||!0===this.autoRotate)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),0!==this.panLimitsMode&&(this.target.applyQuaternion(cxe.copy(fxe).invert()),this.panOffset.applyQuaternion(cxe),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(fxe),this.panOffset.applyQuaternion(fxe)),2===this.panLimitsMode&&(this.panOffset.y=0),1===this.panLimitsMode&&(this.panOffset.x=0),-1!==this.state||this.gesture?(this.target.add(this.panOffset),this.panOffset.set(0,0,0)):(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)),this.offset.setFromSpherical(this.spherical),Axe.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(mxe.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(mxe));let e=this.spherical.phi%dxe;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(Hq.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),e>0&&e>Math.PI||e<0&&e>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),-1===this.state||!0===this.enableDamping){let e=1===this.hoverRotatePanMode?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-e,this.sphericalDelta.phi*=1-e}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>.01||8*(1-this.lastQuaternion.dot(this.object.quaternion))>1e-8?(this.dispatchEvent(rxe),this.object.dispatchEvent(gxe),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=e=>{!1!==this.enabled&&("touch"===e.pointerType||"pen"===e.pointerType&&U6?this.onPointerDownTouch(e):this.onPointerDownMouse(e),-1!==this.state&&(this.isPointerDown=!0,this.dispatchEvent(axe),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),e.stopPropagation(),"touch"===e.pointerType||"pen"===e.pointerType&&U6||this.domElement.setPointerCapture(e.pointerId)))},this.onPointerLeave=e=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(1===this.hoverRotatePanMode?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,hxe.subVectors(this.position0,this.target0),this.spherical.setFromVector3(hxe),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):2===this.hoverRotatePanMode&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=e},this.onPointerEnter=e=>{this.resetHoverEffectOnPointerLeave||void 0===this.pointerLeaveEvent?pxe.set(e.clientX-this.domElement.clientWidth/2,e.clientY-this.domElement.clientHeight/2):pxe.set(e.clientX-this.pointerLeaveEvent.clientX,e.clientY-this.pointerLeaveEvent.clientY),1===this.hoverRotatePanMode?(this.rotateDelta.copy(pxe).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(uxe,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(e.clientX,e.clientY)):2===this.hoverRotatePanMode&&(this.panDelta.copy(pxe).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(e.clientX,e.clientY)),this.update()},this.onPointerMove=e=>{!1!==this.enabled&&(this.checkRaycastLock()||("touch"===e.pointerType||"pen"===e.pointerType&&U6?this.onPointerMoveTouch(e):this.onPointerMoveMouse(e),e.stopPropagation()))},this.onPointerUp=e=>{this.isPointerDown=!1,0===V6.length&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),V6.length>1&&e.preventDefault(),this.hasChange?this.dispatchEvent(sxe):this.dispatchEvent(lxe),this.state=-1,e&&(e.stopPropagation(),"touch"===e.pointerType||"pen"===e.pointerType&&U6||this.domElement.releasePointerCapture(e.pointerId))},this.onPointerDownMouse=e=>{let t;switch(t=this.useKeyEvents?this.mouseButtons[e.button]:this.mouseButtonsPlay[e.button],t){case 0:if(!0!==e.altKey||e.shiftKey||Q6(e)){if(" "===this.key){if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}break;case 4:if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2;break;case 3:if(Q6(e)||e.shiftKey){if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}break;case 5:if(Q6(e)||e.shiftKey){if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}else{if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=e=>{switch(this.state){case 0:if(!1===this.enableRotate)return;this.handleMouseMoveRotate(e);break;case 1:if(!1===this.enableZoom)return;this.handleMouseMoveDolly(e);break;case 2:if(!1===this.enablePan)return;this.handleMouseMovePan(e)}this.object.wasMovedByUser=!0},this.onPointerDownTouch=e=>{switch(V6.length>1&&e.preventDefault(),this.touches[V6.length-1]){case wQ:if(!1===this.enableRotate)return void(this.state=-1);this.handleTouchStartRotate(),this.state=3;break;case xQ:if(!1===this.enablePan)return void(this.state=-1);this.handleTouchStartPan(),this.state=4;break;case CQ:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchStartDollyPan(),this.state=5;break;case SQ:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=e=>{switch(V6.length>1&&e.preventDefault(),this.state){case 3:if(!1===this.enableRotate)return;this.handleTouchMoveRotate(e),this.update();break;case 4:if(!1===this.enablePan)return;this.handleTouchMovePan(e),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchMoveDollyPan(e),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchMoveDollyRotate(e),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=f6((()=>this.dispatchEvent(sxe)),33),this.onMouseWheel=e=>{!1===this.enabled||!1===this.enableZoom&&!1===this.enablePan||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&e.preventDefault(),this.dispatchEvent(axe),this.handleMouseWheel(e),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=e=>{if(e.preventDefault(),!1!==this.enabled&&!this.checkRaycastLock()&&!L6)if("gesturechange"===e.type){if(!1===this.enableZoom||!1===this.isTouchZoom)return;this.dispatchEvent(axe),e.scale>this.prevScale?this.dollyIn(this.getZoomScale()):e.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=e.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(sxe)},this.onContextMenu=e=>{e.preventDefault()},this.onTouchEnd=e=>{e.preventDefault()},this.onKeyDown=e=>{!1!==this.enabled&&(this.key=e.key," "===e.key&&this.dispatchEvent(axe))},this.onKeyUp=e=>{!1!==this.enabled&&(this.key=void 0,-1!==this.state&&"Alt"===e.key&&this.onPointerUp(V6[0])," "===e.key&&this.dispatchEvent(sxe))},this.onPointerHover=e=>{"mouse"!==e.pointerType||!1===this.enabled||-1!==this.state||2===this.hoverRotatePanMode&&this.isPanOverShoot||1===this.hoverRotatePanMode&&this.isRotateOverShoot||(this.isPointerDown=!0,2===this.hoverRotatePanMode?this.handleMouseMovePan(e,this.hoverRotatePanStrength):1===this.hoverRotatePanMode&&this.handleMouseMoveRotate(e,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=e=>{e.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){"start"===e.type?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),0!==this.hoverRotatePanMode&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents="window"===t,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let n=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=n**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let r=this.object.getTarget().applyQuaternion(cxe.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+r.y,this.maxV=e.panVerticalOffset.max+r.y,this.minH=-e.panHorizontalOffset.min+r.x,this.maxH=e.panHorizontalOffset.max+r.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=yxe(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=yxe(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=yxe(yxe(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=yxe(yxe(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,1===e.orbitTouches&&(this.touches[0]=wQ),1===e.panTouches&&(this.touches[0]=xQ),2===e.orbitTouches&&(this.touches[1]=SQ),2===e.panTouches&&(this.touches[1]=CQ),3===e.orbitTouches&&(this.touches[2]=wQ),3===e.panTouches&&(this.touches[2]=xQ),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),0!==this.hoverRotatePanMode&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,n,r,i,o,a,s){let l,c,u;this.overShoot.set(0,0),e instanceof jG?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),u=!0):(l=e.theta,c=e.phi,this.current.set(yxe(this.spherical.theta),yxe(this.spherical.phi)),u=!1),0===n&&(this.current.x+=l,this.current.y+=c),(3===t||2===t)&&(!u&&this.isThetaFlipped?this.current.x>r&&this.current.x<0?this.overShoot.x=r-this.current.x:this.current.x<i&&this.current.x>0&&(this.overShoot.x=i-this.current.x):this.current.x>r?this.overShoot.x=r-this.current.x:this.current.x<i&&(this.overShoot.x=i-this.current.x)),(3===t||1===t)&&(this.current.y>o?this.overShoot.y=o-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y)),u||(this.overShoot.x=yxe(this.overShoot.x),this.overShoot.y=yxe(this.overShoot.y)),0!==n?(this.overRatio.copy(this.overShoot).divide(s),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),1===n&&(this.overRatio.x=bxe(Math.abs(this.overRatio.x)),this.overRatio.y=bxe(Math.abs(this.overRatio.y))),this.isPointerDown||1===n?2===n&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):2===n&&(!u&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||u&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=.05*this.overShoot.x),this.phiIsFree||(c=.05*this.overShoot.y),u?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):u?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof jG?(e.x=l,e.y=c):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=c))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=!0===e?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let n=this.domElement;if(n&&this.object.isPerspectiveCamera){let r=this.object.position;this.panV.copy(r).sub(this.target);let i=this.panV.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*i/n.clientHeight,this.object.matrixWorld),this.panUp(2*t*i/n.clientHeight,this.object.matrixWorld)}else n&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrixWorld));this.dispatchEvent(oxe)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(ixe)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(ixe)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(axe),this.dollyOut(e),this.dispatchEvent(sxe)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(axe),this.dollyIn(e),this.dispatchEvent(sxe)}setZoom(e){if(this.dispatchEvent(axe),this.object.isPerspectiveCamera){let t=this.initialSphericalRadius/e/this.spherical.radius;this.scale=t}else this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0);this.dispatchEvent(sxe)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){void 0!==e.movementX?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(uxe,-this.object.angleOffsetFromUp);let n=this.domElement,r=this.useWindowEvents?window.innerHeight:n.clientHeight,i=2*Math.PI*this.rotateDelta.x/r,o=2*Math.PI*this.rotateDelta.y/r;this.rotateLeft(i),this.rotateUp(o),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){void 0!==e.movementX?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(!1===R6&&!1===Q6(e)&&!0===function(e){return 0===e.wheelDeltaY||0===e.deltaY?!(O6&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120)&&(e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:0===e.deltaMode):e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:0===e.deltaMode}(e)){if(!1===this.enablePan)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout((()=>{this.gesture=!1,this.isPointerDown=!1}),30)}else{if(!1===this.enableZoom||this.gesture)return;0===e.deltaY?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(2===V6.length){let e=.5*(V6[0].pageX+V6[1].pageX),t=.5*(V6[0].pageY+V6[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(V6[0].pageX,V6[0].pageY)}handleTouchStartPan(){if(2===V6.length){let e=.5*(V6[0].pageX+V6[1].pageX),t=.5*(V6[0].pageY+V6[1].pageY);this.panStart.set(e,t)}else this.panStart.set(V6[0].pageX,V6[0].pageY)}handleTouchStartDolly(){let e=V6[0].pageX-V6[1].pageX,t=V6[0].pageY-V6[1].pageY,n=Math.sqrt(e*e+t*t);this.dollyStart.set(0,n)}handleTouchStartDollyPan(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(2===V6.length){let t=$6(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.rotateEnd.set(n,r)}else{if(e.pointerId!==V6[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(2===V6.length){let t=$6(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.panEnd.set(n,r)}else{if(e.pointerId!==V6[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=$6(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);this.dollyEnd.set(0,i),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=null==(e=this.options)?void 0:e.showCameraLock;return t&&t(),!0}}return!1}};function yxe(e){let t=2*Math.PI;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function bxe(e){return 1-Math.pow(1-e,4)}var wxe,xxe=class{constructor(e,t,n,r,i,o){this.id=e,this.data=t,this.object=n,this.page=r,this.currentIntersectedObjects=[],this.actions=Iye(t,t.actions,r,i,o,n),this.target=t.target,this.triggeringObjects=[];for(let a of t.triggeringObjects){let e=r.scene.find(a);e&&this.triggeringObjects.push(e)}}isValidTriggeringObject(e){return"all"===this.target||this.triggeringObjects.some((t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid)))}disconnect(){kye(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach((e=>{"Toggle"===e.data.runMode?e.toggle():e.play()})),this.actions.SwitchCamera.forEach((e=>{"Toggle"===e.data.runMode?e.toggle():e.play()})),this.actions.Link.forEach((e=>{e.dispatch()})),this.actions.Reset.forEach((e=>{e.dispatch()})),this.actions.Create.forEach((e=>{e.dispatch()})),this.actions.Destroy.forEach((e=>{e.dispatch(!1)})),this.actions.Audio.forEach((e=>{e.dispatchBasic()})),this.actions.Particles.forEach((e=>{e.dispatchBasic()})),this.actions.Video.forEach((e=>{e.dispatchBasic()})),this.actions.SceneTransition.forEach((e=>{e.dispatch()})),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch())))}};a8.then((e=>wxe=e));var Cxe=new jG,Sxe=new NG,Bxe=new jG,_xe=new Eq(0,0,0,"YXZ"),Exe=new Eq(0,0,0,"XYZ"),Mxe=new jG,Pxe=new jG,Txe=new jG(1,1,1),Dxe=new NG,Fxe=new gq,Ixe=new gq,kxe={type:"updateMatrix"},Oxe=new NG,Lxe=new lq,Rxe={type:"beginEvent",eventName:"Collision"},Uxe={type:"beginEvent",eventName:"Trigger"};var zxe=e=>e.states.some((e=>void 0!==e.data.position||void 0!==e.data.rotation||void 0!==e.data.hiddenMatrix||void 0!==e.data.cloner||void 0!==e.data.pathSnapping)),Nxe=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=e=>{if(e.bodyType()!==wxe.RigidBodyType.Dynamic)return;e.isSleeping()||this.nActiveRigidBodies++;let[t,n,r]=this.rigidBodyToMesh.get(e.handle);if(Cxe.copy(e.translation()).multiplyScalar(this.pixelsPerMeter),Sxe.copy(e.rotation()),t.matrixWorld.compose(Cxe,Sxe,n),t.hasNonUniformScale&&t.matrixWorld.multiply(t.shearScale),t.dispatchEvent(kxe),r){let e=t.cloner;if(e&&void 0===e.objectForSample){e.matrixWorld.copy(t.matrixWorld);for(let t of e.children)t.updateMatrixWorld(!0)}for(let n of t.children)n.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(e,t,n)=>{var r,i,o,a;if(!1===n)return;let s,l;if(this.sensorToTriggerEvent[e]?(s=this.sensorToTriggerEvent[e],l=this.sharedGameControlGlobals.colliderToEntity.get(t)):this.sensorToTriggerEvent[t]&&(s=this.sensorToTriggerEvent[t],l=this.sharedGameControlGlobals.colliderToEntity.get(e)),s&&l&&s.isValidTriggeringObject(l))s.dispatch();else{for(let n=this.sharedGameControlGlobals.createdObjects.length-1;n>=0;n--){let o=this.sharedGameControlGlobals.createdObjects[n];if(o.userData.hasCollisionDestroy&&((null==(r=o.rigidBody)?void 0:r.collider(0).handle)===e||(null==(i=o.rigidBody)?void 0:i.collider(0).handle)===t)){this.sharedGameControlGlobals.createdObjects.splice(n,1),o.removeFromParent(),requestAnimationFrame((()=>{var e;return null==(e=this.sharedGameControlGlobals.rapierWorld)?void 0:e.removeRigidBody(o.rigidBody)}));break}}if(void 0!==(null==(o=this.gameControl)?void 0:o.object)&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(e)){let e=this.sharedGameControlGlobals.colliderToEntity.get(t),n=this.sharedGameControlGlobals.entityToCollisionEvents[e.uuid];if(void 0===n)return;for(let r of n)"character"===r.data.target&&this.dispatchCollisionEvent(r,e,t)}else if(void 0!==(null==(a=this.gameControl)?void 0:a.object)&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let t=this.sharedGameControlGlobals.colliderToEntity.get(e),n=this.sharedGameControlGlobals.entityToCollisionEvents[t.uuid];if(void 0===n)return;for(let r of n)"character"===r.data.target&&this.dispatchCollisionEvent(r,t,e)}else{let n=this.sharedGameControlGlobals.colliderToEntity.get(e),r=this.sharedGameControlGlobals.entityToCollisionEvents[n.uuid];if(void 0!==r)for(let t of r)"scene"===t.data.target&&this.dispatchCollisionEvent(t,n,e);let i=this.sharedGameControlGlobals.colliderToEntity.get(t),o=this.sharedGameControlGlobals.entityToCollisionEvents[null==i?void 0:i.uuid];if(void 0!==o)for(let e of o)"scene"===e.data.target&&this.dispatchCollisionEvent(e,i,t)}}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=200,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach((e=>{e.addEventListener("connected",(e=>{"gamepad"in e.data&&"axes"in e.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(e.data.gamepad)}))}))}markIsDestroyTarget(){this.page.traverseVisibleEntity((e=>{var t,n;let r=e.dataPatched;for(let i of r.events){if(!0===i.data.disabled)continue;let e=null==(n=null==(t=i.data.actions)?void 0:t.find((e=>"Destroy"===e.data.type)))?void 0:n.data;if(e)for(let t of e.objects){let e=this.page.scene.find(t);e&&(e.userData.hasDestroy=!0)}}}))}markIsDragObject(){this.page.traverseVisibleEntity((e=>{let t=e.dataPatched;for(let n of t.events)if(!0!==n.data.disabled&&"DragDrop"===n.data.type)for(let e of n.data.objects){let t=this.page.scene.find(e);t&&(t.userData.hasDrag=!0)}}))}initBVH(){let e=[];if(this.page.traverseChildren((t=>{var n,r;let i;if(t instanceof rhe||t instanceof Uhe||t instanceof bme)return;i=t instanceof rie?t.object:t;let o=i.dataPatched;if("visibility"===(null==(n=o.physics)?void 0:n.enabled)?!o.visible:!(null==(r=o.physics)?void 0:r.enabled))return!0;let a=t.geometry,s=!0===i.userData.hasDestroy,l=!0===i.userData.hasDrag;if(zxe(o)||s||l||i.dataPatched.events.some((e=>!0!==e.data.disabled&&"GameControl"===e.data.type)))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;a&&e.push(gbe(a,t.matrixWorld))})),e.length>0){let t=yne(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Lre(t)}}addRigidBody(e,t,n){let r=[],i="geometry"in e?e.geometry:void 0,o=t.dataPatched;if(void 0!==(null==i?void 0:i.getAttribute("position"))&&r.push(gbe(i,e.shearScale)),o.physics.fusedBody){let t=this.gatherChildrenGeom(e,r);e.traverseObject(t),e.children.forEach((e=>e.updateMatrixWorld(!0)));let n=e.cloner;n&&void 0===n.objectForSample&&"dynamic"===o.physics.rigidBody&&(n.traverseObject(t),n.children.forEach((e=>e.updateMatrixWorld(!0))))}if(r.length>0){let s,l=!n.fromCreate&&"dynamic"===o.physics.rigidBody||n.fromCreate&&n.dynamic;l?(s=wxe.RigidBodyDesc.dynamic(),s.setLinearDamping(o.physics.damping).setAngularDamping(o.physics.damping).setAdditionalMass(1e-9).setGravityScale(o.physics.gravityScale).enabledRotations(...o.physics.enabledRotation).enabledTranslations(...o.physics.enabledTranslation)):(n.hasTransformAnim||n.hasFollow||n.hasDrag)&&!n.fromCreate?(s=wxe.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):s=wxe.RigidBodyDesc.fixed();let c=yne(r);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Cxe,Sxe,Bxe),e.position0=Cxe.clone().divideScalar(this.pixelsPerMeter),e.rotation0=Sxe.clone(),Cxe.divideScalar(this.pixelsPerMeter),s.setTranslation(Cxe.x,Cxe.y,Cxe.z).setRotation(Sxe),i?null==c||c.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):null==c||c.scale(Bxe.x/this.pixelsPerMeter,Bxe.y/this.pixelsPerMeter,Bxe.z/this.pixelsPerMeter);let u=this.sharedGameControlGlobals.rapierWorld.createRigidBody(s);l&&this.rigidBodyToMesh.set(u.handle,[e,Bxe.clone(),o.physics.fusedBody]);let d=!(void 0===o.geometry||"SubdivGeometry"===o.geometry.type||"NonParametricGeometry"===o.geometry.type||"BooleanGeometry"===o.geometry.type||"VectorGeometry"===o.geometry.type||"StarGeometry"===o.geometry.type||"RectangleGeometry"===o.geometry.type||"EllipseGeometry"===o.geometry.type||"TriangleGeometry"===o.geometry.type||"TorusGeometry"===o.geometry.type||"HelixGeometry"===o.geometry.type);try{this.addCollider(u,o.physics,c,t,d)}catch{try{this.addCollider(u,o.physics,c,t,!1)}catch(a){}}e.rigidBody=u}}addBoundsTree(e){var t,n;let r=[];if(void 0!==(null==(t=e.geometry)?void 0:t.getAttribute("position"))&&(null==(n=e.geometry)?void 0:n.getAttribute("position").count)>0&&r.push(gbe(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,r)),e.children.forEach((e=>e.updateMatrixWorld(!0))),r.length>0){let t=yne(r,!1);e.bvhGeometry=t,t.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new Lre(t),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,n,r,i=!0){var o,a;if(0===(null==n?void 0:n.getAttribute("position").count)||0===(null==(o=null==n?void 0:n.getIndex())?void 0:o.count))return;let s;n&&(s="trimesh"===t.colliderType?wxe.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array):wxe.ColliderDesc.convexMesh(n.getAttribute("position").array,i?n.getIndex().array:void 0)),s.setFrictionCombineRule(wxe.CoefficientCombineRule.Average).setRestitutionCombineRule(wxe.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let l=this.sharedGameControlGlobals.rapierWorld.createCollider(s,e);this.sharedGameControlGlobals.colliderToEntity.set(l.handle,r),(null==(a=this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid])?void 0:a.some((e=>"scene"===e.target)))&&l.setActiveEvents(wxe.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(n,r)=>{var i;if(0===r)return;let o;if(n instanceof rhe){if(!n.objectForSample)return!0===n.object.dataPatched.physics.fusedBody&&"dynamic"===n.object.dataPatched.physics.rigidBody||void 0;if(n.objectForSample.dataPatched.physics.fusedBody)return;o=n.object}else if(n instanceof rie)o=n.object;else if(o=n,null==(i=o.dataPatched.cloner)?void 0:i.hideBase)return!0;let a=o.dataPatched;if("visibility"===a.physics.enabled?!a.visible:!a.physics.enabled)return!0;1===r?e.hasNonUniformScale?n.matrixWorld.multiplyMatrices(e.shearScale,n.hiddenMatrix):n.matrixWorld.copy(n.hiddenMatrix):n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.hiddenMatrix),n.matrixWorld.multiply(n.matrix);let s=n.geometry;void 0!==(null==s?void 0:s.getAttribute("position"))&&t.push(gbe(s,n.matrixWorld))}}activate(e){var t,n;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let r=this.page.playCamera,i=!1,o=5,a=8,s=9,l="drag",c=this.page.data.publish.gameControlObject,u=null!==c?this.page.find(c):null,d=null;if(u)for(let A of u.data.events){if(A.data.disabled||"GameControl"!==A.data.type)continue;let e=u;for(;this.usePhysics&&null!==(null==(t=e=e.parent)?void 0:t.parent);)null==(n=e.data.physics)||n.fusedBody;A.data.collisionEnabled&&(this.needsCollisionDetection=!0),null===d&&(d=A.data)}if(this.page.traverseEntity((e=>{for(let t of e.dataPatched.events)if(!1===t.data.disabled&&"Trigger"===t.data.type)return this.needsCollisionDetection=!0,!0})),u&&d&&(!0===u.data.visible||!0===u.data.physics.enabled)){i=i||d.camera===r.uuid||u.uuid===r.uuid;let e=new fbe(u,this.renderer.domElement,d,this.eventContext.page.data.globalPhysics,this,u.uuid!==r.uuid&&d.camera===r.uuid,r,this.page,this.sharedAssets);this.gameControl=e,o=d.joystickPosLoc,a=d.joystickRotLoc,s=d.jumpTouchButtonLoc,l=d.rotByTouch,U6&&d.touchControl&&(this.joystickToGameControls[o]="pos","walk"===d.moveMode&&(this.joystickToGameControls[s]="jmp"),"joystick"===l&&(this.joystickToGameControls[a]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let e=this.gameControl.data;if(!this.navigationMeshWrapper){let t;this.navigationMeshWrapper=new exe(this.usePhysics,this.isExport),t="sphere"===e.collider.type?2*e.collider.radius:e.collider.height,t=Math.floor(t/e.navmesh.ch-1),this.navigationMeshWrapper.init({...e.navmesh,walkableHeight:t},this.gameControl,this.eventContext)}}if(!1===i){let{enableRotate:e,enablePan:t,enableZoom:n,autoRotate:i,hoverRotatePanMode:o}=this.eventManager.publish.orbitControls;(e||t||n||i||0!==o)&&(this.orbitControls=new vxe(r,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let h=this.renderer.domElement.width/this.renderer.getPixelRatio(),p=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach(((e,t)=>{let n=document.body.appendChild(document.createElement("div")),[r,i,o]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[t],a=(h-5*r)/4+r,s={},l="jmp"===e,c=l?0:r;t<10?(t<5?s.top=c/2:s.bottom=c/2,s.left=c/2+t%5*a):10===t?(s.left=c/2,s.top=p/2):(s.right=c/2,s.top=p/2),s.top?s.top-=i[1]:s.bottom+=i[1],s.left?s.left+=i[0]:s.right-=i[0];for(let h in s)s[h]+="px";if(l){let e=n.appendChild(document.createElement("div"));Object.assign(e.style,s,{position:"absolute",width:r+"px",height:r+"px",backgroundColor:`rgba(255,255,255,${"show"===o?.4:0})`,zIndex:"9999",borderRadius:r+"px",border:"show"===o?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let i=r/16*16*.4;return"show"===o&&(e.innerHTML=`\n\t\t\t\t\t\t<svg width="${i}" height="${.4*r}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t`),e.addEventListener("pointerdown",(()=>{this.gameControl.movementState.jump=1,this.requestRender()})),e.addEventListener("touchend",(e=>e.preventDefault())),void(this.joysticks[t]=[void 0,n])}let u={zone:n,mode:"static",position:s,size:r};"hide"===o&&(u.restOpacity=0);let d=wge(u);d.on("move",((t,n)=>{let r=this.gameControl;"pos"===e?n.force<.2?r.moveForce=0:(r.movementState.movePosZ=Math.sin(-n.angle.radian),r.movementState.movePosX=Math.cos(-n.angle.radian),n.force>1.2?r.movementState.run=1:r.movementState.run=0,n.force<.3?r.moveForce=(n.force-.2)/.1:r.moveForce=1):"rot"===e&&(n.force<.2?r.rotForce=0:(r.movementState.rotPosX=n.vector.y,r.movementState.rotPosY=-n.vector.x,n.force<.3?r.rotForce=(n.force-.2)/.1:r.rotForce=1)),this.requestRender()})),d.on("end",((t,n)=>{let r=this.gameControl;"pos"===e?(r.movementState.movePosZ=0,r.movementState.movePosX=0,r.moveForce=1):"rot"===e&&(r.movementState.rotPosX=0,r.movementState.rotPosY=0,r.rotForce=1)})),this.joysticks[t]=[d,n]})),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout((()=>{this.collisionEvents.forEach((e=>e.initialDisabled=!1))}),80)}initPhysics(){var e;null==(e=this.sharedGameControlGlobals.rapierWorld)||e.free(),this.sharedGameControlGlobals.rapierWorld=new wxe.World(new wxe.Vector3(0,this.gravity,0)),this.events=new wxe.EventQueue(!0);let t=[],n=[];if(this.page.traverseChildren((e=>{var r,i,o,a;let s;if(e instanceof rhe){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;s=e.object}else if(e instanceof rie)s=e.object;else{if(e instanceof bme||e instanceof Uhe)return;if(s=e,!1===(null==(r=s.dataPatched.cloner)?void 0:r.disabled)&&(null==(i=s.dataPatched.cloner)?void 0:i.hideBase)&&!0!==(null==(o=s.dataPatched.physics)?void 0:o.fusedBody))return!0}let l,c=s.dataPatched;for(let t of c.events)!0!==t.data.disabled&&"GameControl"===t.data.type&&(l=t.data);if(!c.physics||("visibility"===c.physics.enabled?!c.visible:!c.physics.enabled))return!0;e.updateMatrixWorldSVD();let u=zxe(c),d=!1,h=s.userData.hasDestroy,p=s.userData.hasDrag,A=!1;for(let t of c.events)if(!0!==t.data.disabled)if("Collision"===t.data.type){d=!0;let e=new Wwe(t.id,t.data,s,this.page,this.sharedAssets,this.eventManager);e.initialDisabled=!0,this.collisionEvents.push(e),this.sharedGameControlGlobals.entityToCollisionEvents[s.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[s.uuid].every((e=>e.id!==t.id))?this.sharedGameControlGlobals.entityToCollisionEvents[s.uuid].push(e):this.sharedGameControlGlobals.entityToCollisionEvents[s.uuid]=[e]}else if("Follow"===t.data.type){A=!0;let n=t.data.target;e.traverseVisible((e=>{e.userData.isFollowingObj=n}))}"dynamic"===c.physics.rigidBody&&!1===c.physics.fusedBody&&(e.matrixWorldFusedFalse=e.matrixWorld.clone());let f=e.geometry;if(void 0!==l){let t=wxe.RigidBodyDesc.kinematicPositionBased();(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Cxe,Sxe,Bxe),e.position0=Cxe.clone().divideScalar(this.pixelsPerMeter),e.rotation0=Sxe.clone(),Cxe.divideScalar(this.pixelsPerMeter),t.setTranslation(Cxe.x,Cxe.y,Cxe.z).setRotation(Sxe);let n,r=this.sharedGameControlGlobals.rapierWorld.createRigidBody(t);e.rigidBody=r,n="sphere"===l.collider.type?wxe.ColliderDesc.ball(l.collider.radius/this.pixelsPerMeter):"capsule"===l.collider.type?wxe.ColliderDesc.capsule((l.collider.height/2-l.collider.radius)/this.pixelsPerMeter,l.collider.radius/this.pixelsPerMeter):wxe.ColliderDesc.cuboid(l.collider.width/this.pixelsPerMeter/2,l.collider.height/this.pixelsPerMeter/2,l.collider.depth/this.pixelsPerMeter/2),n.setFrictionCombineRule(wxe.CoefficientCombineRule.Average).setRestitutionCombineRule(wxe.CoefficientCombineRule.Average).setDensity(c.physics.density).setFriction(c.physics.friction).setRestitution(c.physics.restitution);let i=this.sharedGameControlGlobals.rapierWorld.createCollider(n,r);this.sharedGameControlGlobals.colliderToEntity.set(i.handle,s),Cxe.fromArray(l.collider.position).multiply(Bxe.setFromMatrixScale(s.matrixWorld)).divideScalar(this.pixelsPerMeter),i.setTranslationWrtParent(Cxe);let o=(new NG).setFromEuler((new Eq).setFromVector3((new jG).fromArray(l.collider.rotation)));i.setRotationWrtParent(o),i.setActiveEvents(wxe.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(s,!0)}else"dynamic"===c.physics.rigidBody||u||A||h||p||d?(this.addRigidBody(e,s,{hasFollow:A,hasTransformAnim:u,hasDrag:p}),this.generateSensorColliderDescs(s,c.physics.fusedBody)):(f&&t.push(gbe(f,e.matrixWorld)),c.physics.fusedBody&&e.traverseObject(((e,n)=>{var r;if(0===n)return;let i;if(e instanceof rhe){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;i=e.object}else{if(e instanceof bme||e instanceof Uhe)return;if(e instanceof rie)i=e.object;else if(i=e,null==(r=i.dataPatched.cloner)?void 0:r.hideBase)return!0}let o=i.dataPatched;if("visibility"===o.physics.enabled?!o.visible:!o.physics.enabled)return!0;let a=e.geometry;void 0!==(null==a?void 0:a.getAttribute("position"))&&t.push(gbe(a,e.matrixWorld))})),this.generateSensorColliderDescs(s,c.physics.fusedBody,n));return!(!0!==(null==(a=c.physics)?void 0:a.fusedBody)&&!l)||void 0})),0===t.length)return;let r=yne(t);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=wxe.RigidBodyDesc.fixed(),o=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),a=wxe.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(wxe.CoefficientCombineRule.Multiply).setRestitutionCombineRule(wxe.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(a,o);for(let[s,l]of n){let e=this.sharedGameControlGlobals.rapierWorld.createCollider(s,o);this.sensorToTriggerEvent[e.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity((e=>{for(let t of e.dataPatched.events)if("Trigger"===t.data.type&&!0!==t.data.disabled){let n=new xxe(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),r=(new gq).compose(Mxe.fromArray(t.data.position),Dxe.setFromEuler(Exe.fromArray(t.data.rotation)),Txe);if("box"===t.data.triggerZone){let i=new VG;i.min.fromArray(t.data.size).multiplyScalar(-.5),i.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([i,r,e,n])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,r,e,n])}})),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach((e=>e.disconnect())),this.sharedGameControlGlobals.triggers.forEach((e=>e[3].disconnect())),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,n,r;if(this.isEnabled){this.isEnabled=!1,this.page.traverse((e=>{let t=e;t.matrixWorldFusedFalse&&(t.matrixWorldFusedFalse=void 0),t.rigidBody&&(t.rigidBody=void 0),t.position0&&(t.position0=void 0),t.rotation0&&(t.rotation0=void 0)})),null==(e=this.sharedGameControlGlobals.rapierWorld)||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),null==(t=this.gameControl)||t.reset(),null==(n=this.gameControl)||n.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach((([e,t])=>{null==e||e.destroy(),t.remove()})),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),null==(r=this.navigationMeshWrapper)||r.dispose(),this.navigationMeshWrapper=void 0;for(let e of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))e.forEach((e=>e.disconnect()));this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,n){if(!this.isEnabled)return!0;let r=!0;if(void 0!==this.orbitControls&&this.orbitControls.needsUpdate&&(r=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,r=!1):2===this.initializationCounter&&this.gameControl&&(r=!this.gameControl.update(e,t,n)&&r),!1===this.usePhysics&&this.checkTrigger(),this.usePhysics){let t=.016666666666666666;if(0===e)r=this.stepPhysics()&&r;else{let n=e/1e3;n<t&&n>.55*t&&(n=t),this.accumulator+=n;let i=performance.now(),o=0,a=6;for(;this.accumulator>=t&&o<a&&(r=this.stepPhysics()&&r,this.accumulator-=t,o++,!(performance.now()-i>1e3*t)););this.accumulator=this.accumulator%t}}return r}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(Cxe,Sxe,Bxe),_xe.setFromQuaternion(Sxe);let e=t;void 0===e.prevR?(e.prevR=_xe.clone(),e.prevT=Cxe.clone()):(e.prevR.copy(_xe),e.prevT.copy(Cxe)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(Cxe.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(Sxe))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),null==(e=this.events)||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,n){var r;let i,o=(null==(r=this.sharedGameControlGlobals.rapierWorld)?void 0:r.getCollider(n))._parent;if(t.cloner)for(let a of t.cloner.children)if(a.rigidBody===o){i=a;break}e.dispatch(i),t.dispatchEvent(Rxe)}updateUseWindowEvents(e){var t;null==(t=this.orbitControls)||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,n){let r=Ixe.copy(e.matrixWorld).invert();e.traverseEntity(((i,o)=>{if(!1===t&&1===o)return!0;for(let t of i.dataPatched.events)if("Trigger"===t.data.type&&!0!==t.data.disabled){let o,a=new xxe(t.id,t.data,i,this.page,this.sharedAssets,this.eventManager);if(o="box"===t.data.triggerZone?wxe.ColliderDesc.cuboid(...t.data.size.map((e=>e/(2*this.pixelsPerMeter)))):wxe.ColliderDesc.ball(t.data.radius/this.pixelsPerMeter),o.setDensity(0).setSensor(!0).setActiveEvents(wxe.ActiveEvents.COLLISION_EVENTS),Mxe.fromArray(t.data.position),Dxe.setFromEuler(Exe.fromArray(t.data.rotation)),Fxe.compose(Mxe,Dxe,Txe).premultiply(i.matrixWorld),n?(Fxe.decompose(Mxe,Dxe,Pxe),o.setActiveCollisionTypes(wxe.ActiveCollisionTypes.KINEMATIC_FIXED|wxe.ActiveCollisionTypes.DYNAMIC_FIXED)):(Fxe.premultiply(r).decompose(Mxe,Dxe,Pxe),e.rigidBody.bodyType()===wxe.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===wxe.RigidBodyType.Fixed?o.setActiveCollisionTypes(wxe.ActiveCollisionTypes.KINEMATIC_FIXED|wxe.ActiveCollisionTypes.DYNAMIC_FIXED):o.setActiveCollisionTypes(wxe.ActiveCollisionTypes.KINEMATIC_KINEMATIC|wxe.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),Mxe.divideScalar(this.pixelsPerMeter),o.setTranslation(Mxe.x,Mxe.y,Mxe.z),o.setRotation(Dxe),n)n.push([o,a]);else{let t=this.sharedGameControlGlobals.rapierWorld.createCollider(o,e.rigidBody);this.sensorToTriggerEvent[t.handle]=a}}}))}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[n,r,i,o]=this.sharedGameControlGlobals.triggers[t];for(let t=0;t<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;t++){let a=this.sharedGameControlGlobals.entitiesWithTransformAnim[t];if(i===a||!1===o.isValidTriggeringObject(eie.is(a)?a:a.object))continue;let s=Ixe.copy(i.matrixWorld).decompose(Mxe,Oxe,Pxe).compose(Mxe,Oxe,Txe).multiply(r),l=Fxe.copy(a.matrixWorld).invert().multiply(s);n instanceof VG?e=a.bvhGeometry.boundsTree.intersectsBox(n,l):(Lxe.radius=n,Lxe.center.setFromMatrixPosition(l),e=a.bvhGeometry.boundsTree.intersectsSphere(Lxe)),e?-1===o.currentIntersectedObjects.indexOf(a)&&(o.currentIntersectedObjects.push(a),o.dispatch(),i.dispatchEvent(Uxe)):o.currentIntersectedObjects=o.currentIntersectedObjects.filter((e=>e!==a))}}}};function jxe(e){let t=this._clip.duration,n=this._clip.start??0,r=this.loop,i=this.time+e,o=this._loopCount,a=r===DW;if(0===e)return-1===o||!a||1&~o?i:t-(i-n);if(2200===r){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===o&&(e>=0?(o=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<n){let r=Math.floor((i-n)/(t-n));i-=(t-n)*r,o+=Math.abs(r);let s=this.repetitions-o;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a||(i=e>0?t:n,1===this.repetitions&&(i=t)),this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){let t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r})}}else this.time=i;if(a&&!(1&~o))return t-(i-n)}return i}var Hxe,Qxe=!1,Vxe=class{constructor(e,t,n,r){this.scene=e,this.requestRender=t,this.updateDisplayProgress=n,this.animationInspectorState=r,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=e=>{"Empty"===e.data.type&&e.data.animations&&e.data.animations.forEach(((t,n)=>{let r=t[0]+"/";if(Array.isArray(e.identity)?r+=e.identity[0]:r+=e.uuid,this.clipIdToAction[r])return;let i=MZ.parse(JSON.parse(t[2]));e.animations[n]=i;let o=this.mixer.clipAction(i,e);!1===Qxe&&(Object.getPrototypeOf(o)._updateTime=jxe,Qxe=!0),o.clampWhenFinished=!0,this.clipIdToAction[r]=o}))},this.mixer=new v0(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let n=this.scene.find(t);if(!n)return;let r=n.animations.find((t=>t.uuid===e));if(!r)return;let i=this.clipIdToAction[e];!i||(i.stop(),this.mixer.uncacheClip(r),delete this.clipIdToAction[e],n.animations=n.animations.filter((t=>t.uuid!==e)))}get isPlaying(){return Object.values(this.clipIdToAction).some((e=>e.isRunning()))}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach((e=>{e.repetitions=1/0,e.loop=2201})),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,n=this.clipIdToAction[t];if(n)return e&&(e.repeat>=0&&(n.repetitions=e.repeat+1),"pingpong"===e.direction&&0!==e.repeat&&(n.loop=DW)),n.play(),n.paused=!1,this.requestRender(),n}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(!1===this.isPlaying||(null==(t=this.animationInspectorState)?void 0:t.isScrubbing))return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){return Bye(this.activeClip??void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let n=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),n&&(this.clipIdToAction[t].paused=!0)}},Wxe=new WeakMap,Gxe=class extends IZ{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){let i=new LZ(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{this.decodeDracoFile(e,t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){let i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){let n=JSON.stringify(t);if(Wxe.has(e)){let t=Wxe.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,i=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(i,o).then((n=>(r=n,new Promise(((n,o)=>{r._callbacks[i]={resolve:n,reject:o},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),Wxe.set(e,{key:n,promise:a}),a}_createGeometry(e){let t=new mK;e.index&&t.setIndex(new oK(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n],i=r.name,o=r.array,a=r.itemSize;t.setAttribute(i,new oK(o,a))}return t}_loadLibrary(e,t){let n=new LZ(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{let n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let r=qxe.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n)}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}};function qxe(){let e,t;function n(e,t,n,r,i,o){let a=o.num_components(),s=n.num_points()*a,l=s*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,c,l,u);let d=new i(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:r,array:d,itemSize:a}}onmessage=function(r){let i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":let r=i.buffer,o=i.taskConfig;t.then((e=>{let t=e.draco,a=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(r),r.byteLength);try{let e=function(e,t,r,i){let o,a,s=i.attributeIDs,l=i.attributeTypes,c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,a=t.DecodeBufferToMesh(r,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,a=t.DecodeBufferToPointCloud(r,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());let u={index:null,attributes:[]};for(let d in s){let r,a,c=self[l[d]];if(i.useUniqueIDs)a=s[d],r=t.GetAttributeByUniqueId(o,a);else{if(a=t.GetAttributeId(o,e[s[d]]),-1===a)continue;r=t.GetAttribute(o,a)}u.attributes.push(n(e,t,o,d,c,r))}return c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){let r=3*n.num_faces(),i=4*r,o=e._malloc(i);t.GetTrianglesUInt32Array(n,i,o);let a=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:a,itemSize:1}}(e,t,o)),e.destroy(o),u}(t,a,s,o),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(l){self.postMessage({type:"error",id:i.id,error:l.message})}finally{t.destroy(s),t.destroy(a)}}))}}}async function Kxe(e){if(Hxe){let t,n={attributeIDs:Hxe.defaultAttributeIDs,attributeTypes:Hxe.defaultAttributeTypes,useUniqueIDs:!1};try{t=await Hxe.decodeGeometry(new Int8Array(e).buffer,n)}catch(w8){}if(t)return{index:t.index?{array:t.index.array}:void 0,attributes:Object.entries(t.attributes).map((([e,t])=>({name:e,itemSize:t.itemSize,array:t.array})))}}return null}var Yxe=class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],n=(new Date).getTime();if(this._clickCount>0){let e=t[0]-this._lastPosition[0],n=t[1]-this._lastPosition[1];Math.sqrt(e*e+n*n)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=n-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=n},this._onMouseUp=e=>{}}start(e,t=500,n=2){this._target&&this.stop(),this.reset(),this._delay=t,this._distance=n,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},Xxe=class{constructor(e,t,n,r,i,o,a,s){this.eventId=e,this.id=t,this.data=n,this.dataEvent=r,this.object=i,this.stage=!1,this.actions=Iye(r,n.actions,o,a,s,i)}disconnect(){kye(this.actions)}dispatchIn(){this.actions.Audio.forEach((e=>e.dispatchBasic())),this.actions.Particles.forEach((e=>e.dispatchBasic())),this.actions.Video.forEach((e=>e.dispatchBasic())),this.actions.Create.forEach((e=>e.dispatch())),this.actions.Destroy.forEach((e=>e.dispatch())),this.actions.Reset.forEach((e=>e.dispatch())),this.actions.Link.forEach((e=>e.dispatch())),this.actions.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())})),this.actions.Transition.forEach((e=>e.toggle())),this.actions.Animation.forEach((e=>e.play())),this.actions.SwitchCamera.forEach((e=>e.play())),this.actions.SceneTransition.forEach((e=>e.dispatch())),this.actions.SetVariable.forEach((e=>e.checkConditions())),this.actions.SetVariable.forEach((e=>e.dispatch())),this.actions.DynamicVariablePlay.forEach((e=>e.dispatch())),this.actions.ClearLocalStorage.forEach((e=>e.dispatch())),this.actions.UserAPI.forEach((e=>e.dispatch()))}dispatchOut(){this.actions.Transition.forEach((e=>{e.toggle()}))}},$xe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(e,t)=>{this.breakpoints.forEach((n=>{let r,i=L9.deviceToSize(n.data.size),o="horizontal"===n.dataEvent.orientation?e:t;switch(n.data.operator){case"<":r=o<i[0];break;case">":r=o>i[0];break;case"<>":r=o>i[0]&&o<i[1]}n.stage!==r&&(n.stage=r,n.stage?n.dispatchIn():n.dispatchOut())}))},this.onResizeObserver=new ResizeObserver((e=>{for(let t of e){let{width:e,height:n}=t.contentRect;this.resize(e,n)}}))}connect(){let{page:e,sharedAssets:t,domElement:n}=this.eventContext;this.onResizeObserver.observe(n);let r=n=>{var r;if(n.visible&&(null==(r=n.data)?void 0:r.events.length))for(let{data:i,id:o}of n.data.events)i.disabled||"Resize"===i.type&&i.breakpoints.forEach((({data:r,id:a})=>{try{let s=new Xxe(o,a,r,i,n,e,t,this.eventManager);this.breakpoints.push(s)}catch(X9){}}))};e.traverseEntity((e=>{var t;(e instanceof sme||e instanceof $fe)&&(null==(t=e.frame)||t.traverse((e=>{r(e)}))),r(e)}))}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach((e=>{e.disconnect()})),this.breakpoints=[]}},Jxe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=({userAPIId:e})=>{this.events.forEach((t=>{t.data.userAPIId===e&&t.dispatchSuccess()}))},this.onError=({userAPIId:e})=>{this.events.forEach((t=>{t.data.userAPIId===e&&t.dispatchError()}))},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity((e=>{var t;null==(t=e.data)||t.events.filter((e=>"API"===e.data.type&&!e.data.disabled)).forEach((t=>{this.events.push(new Zxe(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))}))})),Object.entries(this.userAPIs).forEach((([e,t])=>{t.on("success",this.onSuccess),t.on("error",this.onError),t.autostart&&t.callUserAPI(this.eventContext.sharedAssets)}))}disconnect(){Object.entries(this.userAPIs).forEach((([e,t])=>{t.off("success",this.onSuccess),t.off("error",this.onError)}))}},Zxe=class{constructor(e,t,n,r,i,o){this.id=e,this.data=t,this.object=n,this.successActions=Iye(t,t.successActions,r,i,o,n),this.errorActions=Iye(t,t.errorActions,r,i,o,n)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach((e=>e.dispatchConditional())),e.Particles.forEach((e=>e.dispatchConditional())),e.Video.forEach((e=>e.dispatchConditional())),e.Create.forEach((e=>e.dispatch())),e.Destroy.forEach((e=>e.dispatch())),e.Reset.forEach((e=>e.dispatch())),e.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()})),e.Transition.forEach((e=>e.play())),e.Animation.forEach((e=>e.play())),e.SwitchCamera.forEach((e=>e.play())),e.SceneTransition.forEach((e=>e.dispatch())),e.SetVariable.forEach((e=>e.checkConditions())),e.SetVariable.forEach((e=>e.dispatch())),e.DynamicVariablePlay.forEach((e=>e.dispatch())),e.ClearLocalStorage.forEach((e=>e.dispatch())),e.UserAPI.forEach((e=>e.dispatch()))}},eCe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=({userWebhookId:e})=>{this.events.forEach((t=>{t.data.userWebhookId===e&&t.dispatch()}))},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity((e=>{var t;null==(t=e.data)||t.events.filter((e=>"WEBHOOK"===e.data.type&&!e.data.disabled)).forEach((t=>{this.events.push(new tCe(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))}))})),Object.entries(this.userWebhooks).forEach((([e,t])=>{t.connect(),t.on("message",this.onMessage)}))}disconnect(){Object.entries(this.userWebhooks).forEach((([e,t])=>{t.off("message",this.onMessage),t.disconnect()}))}},tCe=class{constructor(e,t,n,r,i,o){this.id=e,this.data=t,this.object=n,this.actions=Iye(t,t.actions,r,i,o,n)}dispatch(){let e=this.actions;e.Audio.forEach((e=>e.dispatchConditional())),e.Particles.forEach((e=>e.dispatchConditional())),e.Video.forEach((e=>e.dispatchConditional())),e.Create.forEach((e=>e.dispatch())),e.Destroy.forEach((e=>e.dispatch())),e.Reset.forEach((e=>e.dispatch())),e.Transition.forEach((e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()})),e.Transition.forEach((e=>e.play())),e.Animation.forEach((e=>e.play())),e.SwitchCamera.forEach((e=>e.play())),e.SceneTransition.forEach((e=>e.dispatch())),e.SetVariable.forEach((e=>e.checkConditions())),e.SetVariable.forEach((e=>e.dispatch())),e.DynamicVariablePlay.forEach((e=>e.dispatch())),e.ClearLocalStorage.forEach((e=>e.dispatch())),e.UserAPI.forEach((e=>e.dispatch()))}};var nCe=new jG(0,0,1),rCe=new jG,iCe=new jG,oCe=new pG,aCe=class{constructor(e,t,n,r,i){this.containerScene=e,this.raycaster=t,this.sharedAssets=n,this.requestRender=r,this.onExit=i,this.htmlInput=null,this.virtualInput=null,this.helper=new jAe,this.doubleClickHandler=new Yxe,this.isDragging=!1,this.plane=new qK,this.caretInterval=0,this.planeIntersection=new jG,this.projected=new hG,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{var e;let t=null==(e=this.virtualInput)?void 0:e.data;if(void 0!==this.virtualInput&&t){let e=t.material,n=function(e,t){let n=Y9.fromHex(3223857),r=.8;for(let i of e.layers){if("light"===i.data.type||"displace"===i.data.type||"fresnel"===i.data.type||"matcap"===i.data.type||"texture"===i.data.type||"toon"===i.data.type||"outline"===i.data.type||"transmission"===i.data.type||"noise"===i.data.type)continue;let e="string"==typeof i.data.alpha?Number(t.getVariable(i.data.alpha)):i.data.alpha;if("color"===i.data.type&&e>.3){n=VAe(i.data.color,t),r=e;break}if(("depth"===i.data.type||"gradient"===i.data.type)&&e>.3){let e=WAe(i.data);n={r:e[0],g:e[1],b:e[2]},r="string"==typeof i.data.alpha?1:i.data.alpha;break}}return{...n,a:r}}("string"==typeof e?this.sharedAssets.data.materials[e]:e,this.sharedAssets);this.helper.setCaretColor(n)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval((()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()}),600))},this.handleCaretUpdate=e=>{if(!this.htmlInput||!this.virtualInput)return;let t=this.helper,n="ArrowLeft"===(null==e?void 0:e.key)||"ArrowRight"===(null==e?void 0:e.key),r="ArrowUp"===(null==e?void 0:e.key)||"ArrowDown"===(null==e?void 0:e.key);this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(t.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:n,verticalKeyMove:r}),this.startAnimateTextCursor()):t.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=function(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}(),this.htmlInput}connect(){}disconnect(){var e;this.stopAnimateTextCursor(),this.helper.hide(),null==(e=this.htmlInput)||e.remove(),this.doubleClickHandler.stop()}handleMouseDown(){var e;if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let t=this.doubleClickHandler.clickCount,{index:n,lineIndex:r,characterIndex:i}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,t>1?"inside":"previous")??{index:0,lineIndex:0,characterIndex:0};"\n"===(null==(e=this.virtualInput)?void 0:e.wrappedText[r][Math.max(0,i-1)])&&(n--,i--),this._lastIndex=n,this._isFirstDragMove=!0;let o=this.checkClickedObject();if(1===t){if(null===o)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=n,this.isDragging=!0,this.setInputSelection(n)}else o===this.virtualInput&&(2===t?this.selectClosestWord(r,i):t>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){var t;if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){let e=null==(t=this.data)?void 0:t.geometry.text;this.htmlInput.value="string"==typeof e?"":(null==e?void 0:e.textValue.toString())??""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){var e;if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let t=this.selectionOnDragStart,{index:n,lineIndex:r,characterIndex:i}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous")??{index:0};void 0!==r&&void 0!==i&&"\n"===(null==(e=this.virtualInput)?void 0:e.wrappedText[r][i-1])&&n--,this.htmlInput.setSelectionRange(Math.min(t,n),Math.max(t,n))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof tme)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let n=this.virtualInput.wrappedText,r=n[e],i=t+1,o=t;" "!==r[t]&&(i=this.findNextCharOccurence(r,t,"forward"," "),o=this.findNextCharOccurence(r,t,"backward"," "),o>0&&o++,i>=r.length-1&&e===n.length-1&&i++);let a=this.helper,s=a.getGlobalIndexFromLineAndCharIndexes(n,e,o),l=a.getGlobalIndexFromLineAndCharIndexes(n,e,i);this.setInputSelection(s,l)}findNextCharOccurence(e,t,n,r=" "){let i=Math.max(0,e.length-1),o="forward"===n?i:0,a="forward"===n?1:-1,s=Math.max(Math.min(t,i),0);for(;s!==o;)if(s+=a,e.charAt(s)===r)return s;return o}getPointOnPlane(){var e;let t=null==(e=this.virtualInput)?void 0:e.data;if(this.virtualInput&&t&&this.raycaster.ray.intersectsPlane(this.plane)){null===this.planeIntersection&&(this.planeIntersection=new jG);let e=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);if(e){this.planeIntersection.copy(this.virtualInput.worldToLocal(e));let n="number"==typeof t.geometry.width?t.geometry.width:1,r="number"==typeof t.geometry.height?t.geometry.height:1;this.projected.set(e.x+.5*n,e.y-.5*r)}}}updatePlane(){var e;let t=null==(e=this.virtualInput)?void 0:e.data;this.virtualInput&&t&&(oCe.getNormalMatrix(this.virtualInput.matrixWorld),rCe.copy(nCe).applyMatrix3(oCe).normalize(),this.virtualInput.localToWorld(iCe.set(0,0,t.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(rCe,iCe))}setInputSelection(e,t=e){var n;null==(n=this.htmlInput)||n.setSelectionRange(e,t),setTimeout((()=>{var e;null==(e=this.htmlInput)||e.focus()}))}updateTextInputStyles(){var e;let t=null==(e=this.virtualInput)?void 0:e.data;this.virtualInput&&t&&this.htmlInput&&(this.htmlInput.style.fontSize=t.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=t.geometry.letterSpacing*t.geometry.fontSize+"px",this.htmlInput.style.lineHeight=t.geometry.fontSize*t.geometry.lineHeight+"px",this.htmlInput.style.width=t.geometry.width+"px",this.htmlInput.style.height=t.geometry.height+"px",this.htmlInput.style.textAlign=function(e){return 4===e?"justify":2===e?"right":3===e?"center":"left"}(t.geometry.horizontalAlign))}};var sCe=(e,t)=>{if("string"==typeof e){let n=t.data(e);if(n)return sCe(n.value,t)}return Cte.getDisplayedValue(e)};function lCe(e,t){let n=e.text,r="";if("string"==typeof n){let e=t.variables.data(r);e&&(r=sCe(e.value,t.variables))}else r=n.textValue.toString();return r}var cCe=class extends Fbe{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new I$,this.helper=new jAe,this._onMouseDownFocusIn=e=>{if(V6.length>1)return;this.eventContext.updateRaycaster(e);let t=null;if(this.eventContext.raycaster)for(let n of this._textInputs)if(this.eventContext.raycaster.intersectObject(n,!0).length>0){t=n;break}this.focusOnTextInput(t),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(e),this._onMouseDown(e)},this.onExit=()=>{let{virtualInput:e}=this.textInputManager;if(null===e)return;let t=this.textInputManager.htmlInput;this.helper.hide(),null==t||t.setSelectionRange(t.value.length,t.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:n}=this.eventContext;n.removeEventListener("pointerdown",this._onMouseDown,!1),n.removeEventListener("pointerup",this._onMouseUp,!1),n.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),n.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=e=>{this.eventContext.updateRaycaster(e),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=e=>{this.eventContext.updateRaycaster(e),this.textInputManager.handleMouseMove()},this._onTextEdit=e=>{let{htmlInput:t,virtualInput:n,helper:r}=this.textInputManager;if(!t||!n)return;let i=t.value;n.textGeometry.setText(i).then((()=>{this.eventContext.requestRender()}));let o=n.data;r.update();let a=o.geometry.text;if("string"==typeof a){let e=a;this.eventContext.sharedAssets.updateVariable(e,{textValue:i})}this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=e=>{this.textInputManager.handleCaretUpdate(e)},this._onKeyPress=e=>{"Escape"===e.key&&this.onExit()},this.textInputManager=new aCe(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity((t=>{t instanceof tme&&e.push(t)})),this._textInputs=e,0===e.length)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let n=this.textInputManager.createInput();document.body.appendChild(n),n.style.display="none",n.addEventListener("keyup",this._onCaretUpdate),n.addEventListener("keydown",this._onCaretUpdate),n.addEventListener("beforeinput",this._onCaretUpdate),n.addEventListener("paste",this._onCaretUpdate),n.addEventListener("cut",this._onCaretUpdate),n.addEventListener("select",this._onCaretUpdate),n.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),null==e||e.removeEventListener("keyup",this._onCaretUpdate),null==e||e.removeEventListener("keydown",this._onCaretUpdate),null==e||e.removeEventListener("beforeinput",this._onCaretUpdate),null==e||e.removeEventListener("paste",this._onCaretUpdate),null==e||e.removeEventListener("cut",this._onCaretUpdate),null==e||e.removeEventListener("select",this._onCaretUpdate),null==e||e.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach((e=>{let t=lCe(e.data.geometry,this.eventContext.sharedAssets.data);e.textGeometry.setText(t)})),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||null===e)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let n=lCe(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=n,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:r}=this.eventContext;r.removeEventListener("pointerdown",this._onMouseDownFocusIn),r.addEventListener("pointerdown",this._onMouseDown,!1),r.addEventListener("pointerup",this._onMouseUp,!1),r.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},uCe=class{constructor(e,t,n,r,i){this.publish=e,this.controlsManager=t,this.animationControls=n,this.eventContext=r,this.sharedVariables=i,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=e=>{let t=window.parent!==window,n=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(e.touches.length>1||this.preventTouchScroll||!1===t&&!1===n)&&e.preventDefault()},this.onMouseWheelPreventScroll=e=>{this.preventScroll&&e.preventDefault()},this.onMouseMove=e=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(e),pressed:e.buttons>0}},this.onMouseDown=e=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(e),pressed:!0}},this.onMouseUp=e=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(e),pressed:!1}},this.getMousePosition=e=>{var t;let{domRect:n}=this.eventContext,{pageX:r,pageY:i}=(null==(t=e.touches)?void 0:t.length)>0?e.touches[0]:e;return{x:r-(n.left+window.scrollX),y:i-(n.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=r.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new Rbe(this.eventContext),VariableChange:new Gwe(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new Jxe(this.eventContext,this),WEBHOOK:new eCe(this.eventContext,this),Conditional:new Wbe(this.eventContext,this),Start:new Vwe(this.eventContext,this),Basic:new zbe(this.eventContext,this,this.needsRaycast),MouseHover:new zwe(this.eventContext,this),Scroll:new Hwe(this.eventContext,this),Follow:new ywe(this.eventContext,this),DragDrop:new cwe(this.eventContext,this),LookAt:new kwe(this.eventContext),Resize:new $xe(this.eventContext,this),Textfields:new cCe(this.eventContext,this)};let{page:e,domElement:t}=this.eventContext;this.hideCursor&&(t.style.cursor="none"),e.traverseEntity((e=>{e.addEventListener("requestRender",this.requestRender)})),Object.values(this.handlers).forEach((e=>e.connect())),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var e;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:n}=this.eventContext;n.style.cursor="",Object.values(this.handlers).forEach((e=>e.disconnect())),null==(e=this.controlsManager.gameControl)||e.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity((e=>{e.removeEventListener("requestRender",this.requestRender),e.destroyedInAction=!1})),n.removeEventListener("touchmove",this.onTouchMovePreventScroll),n.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=n=>{if("Conditional"===n.data.type&&(n.data.ifActions.forEach(t),n.data.elseActions.forEach(t)),"Conditional"===n.data.type||"SetVariable"===n.data.type)for(let e of"Conditional"===n.data.type?n.data.condition:n.data.expression)"id"in e&&Array.isArray(e.id)&&("mouse"===e.id[0]&&(this.needsMouse=!0),"raycast"===e.id[0]&&(this.needsRaycast=!0));"DynamicVariablePlay"===n.data.type&&""!==n.data.variableId&&("Play"===n.data.mode||"PlayPause"===n.data.mode||"Toggle"===n.data.mode)&&e.setDynamicVariablePlayState(n.data.variableId,"Stopped")};this.eventContext.page.traverseEntity((e=>{var n;if(null==(n=e.data)?void 0:n.events.length)for(let r of e.data.events)if("VariableChange"===r.data.type&&("mouseProperty"===r.data.variableId&&(this.needsMouse=!0),"raycastProperty"===r.data.variableId&&(this.needsRaycast=!0)),"Conditional"===r.data.type)for(let e of["inActions","outActions"])r.data[e].forEach(t);else if("DragDrop"===r.data.type)for(let e of["drag","drop"])r.data.dragDropActions[e].forEach(t);else if("GameControl"===r.data.type)for(let e of["idle","move","jump","run"])r.data.gameActions[e].forEach(t);else if("Resize"===r.data.type)for(let e of r.data.breakpoints)e.data.actions.forEach(t);else"LookAt"===r.data.type||"API"===r.data.type||r.data.actions.forEach(t)}))}},dCe=class{constructor(e,t,n,r,i){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=(new hG).copy(n),this._editorSize=(new hG).copy(r),this._aspect=t.aspect,this._fov=i??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||"PerspectiveCamera"!==this._camera.cameraType)return;let e=this._frameSize.x,t=this._frameSize.y,n=this._editorSize.y;this._aspect=e/t,t<=n&&(this._camera.zoom*=n/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if("PerspectiveCamera"===this._camera.cameraType){let t=this._frameSize.y,n=this._editorSize.y,r=this._fov;if(e&&t>n){let e=function(e,t,n,r,i){return(e-t)/(n-t)*(i-r)+r}(t,1080,2160,1,15)/100;r*=t/n,r*=1-e}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};var hCe=class{get sharedAssets(){return this.shared}constructor(e,t={},n=!0){this.shared=new sde(e.shared,t,!0,n),this.scene=new Gme(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof $fe&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity((e=>{e instanceof Ade&&e.markGeometryAsReachable(this.shared)})),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},pCe=class{constructor({x:e=10,y:t=10}){this._startTime=0;let n=document.getElementById("spe-perfs");n?this.element=n:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;null==(e=this.element.parentElement)||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function ACe(e){let t;if(e.index)for(let n=0;n<e.index.array.length;n+=3)t=e.index.array[n],e.index.array[n]=e.index.array[n+2],e.index.array[n+2]=t}function fCe(e){return e instanceof bde?"SubdivObject":"NonParametricGeometry"===e.geometry.type?"NonParametric":"Mesh"}function mCe(e,t){let n=function(e,t){let n={};return e.traverseEntity((e=>{var r;if(!e.visible||!(e instanceof Use)||"Mesh"!==e.type||Array.isArray(e.material)||e.states&&Object.keys(e.states).length)return;let i=e.parent;for(;i;){if(i instanceof Use&&e.states&&Object.keys(e.states).length)return;i=i.parent}let o=e.material.uuid,a=t.shared.materials[o];if(a){if(!Tee.isMergable(a))return}else{let n=null==(r=t.scene.objects.get(e.uuid))?void 0:r.data;if(n&&"material"in n&&"string"!=typeof n.material){if(!Tee.isMergable(n.material))return;o=Tee.getHash(n.material)}}n[o]||(n[o]={});let s=n[o][fCe(e)];if(s){if(s.push(e),e.cloner)for(let t of e.cloner.children)s.push(t)}else if(n[o][fCe(e)]=[e],e.cloner)for(let t of e.cloner.children)n[o][fCe(e)].push(t)})),n}(t,e),r=function(e){let t=0;return Object.values(e).forEach((e=>{Object.values(e).forEach((e=>{let n=e.length;n>t&&(t=n)}))})),t}(n),i=new Array(r),o=0,a=new Array(r),s=0,l=new Array(r),c=0,u=new Array(r),d=0;for(let[h,p]of Object.entries(n))for(let e of Object.values(p)){if(s=0,c=0,e.forEach((e=>{e instanceof Use&&(a[s++]=e.geometry.clone(),l[c++]=e)})),c<2)continue;for(let e=0;e<c;e++)l[e].updateWorldMatrix(!0,!1),a[e].applyMatrix4(l[e].matrixWorld),l[e].matrixWorld.determinant()<0&&ACe(a[e]);let r=yne(a.slice(0,s),!1);if(r){let e;e=new TK(r,l[0].material),e.castShadow=l[0].castShadow,e.receiveShadow=l[0].receiveShadow,t.add(e);let a=e=>{d=0;for(let t of e)t.children&&a(t.children),t instanceof Use&&(Array.isArray(t.material)||n[t.material.uuid]&&n[t.material.uuid][fCe(t)]&&n[t.material.uuid][fCe(t)].length>1||(u[d++]=t));for(let n=0;n<d;n++)t.attach(u[n])};for(let t=0;t<c;t++){let e=l[t];a(e.children),i[o++]=e}}}for(let h=0;h<o;h++)i[h].removeFromParent()}var gCe=cQ(yQ(),1),vCe=new hG;var yCe=class{constructor(e,{renderOnDemand:t,renderMode:n="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=e=>{var t,n,r,i,o,a,s,l,c,u,d,h,p;if(this.time=e,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,null==(t=this._perfs)||t.start(),this._renderer)if(this._isPaused||!("manual"===this.renderMode&&!this._renderRequested||"auto"===this.renderMode&&this._skipRender)){if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((null==(i=this._eventManager.handlers)?void 0:i.Start.hasVideoAction)||(null==(o=this._eventManager.handlers)?void 0:o.Basic.hasVideoAction)||(null==(a=this._eventManager.handlers)?void 0:a.Conditional.hasVideoAction))&&(this._skipRender=!1),null==(s=this._animationControls)||s.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,null==(l=this._scene)||l.traverseVisibleEntity((e=>{"ParticleSystem"===e.type&&(e.update(this.dt),this._skipRender=!1)})),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(null==(c=this._eventManager)?void 0:c.isEnabled)&&((null==(u=this._eventManager.handlers)?void 0:u.Follow).onAnimationFrameDamping(),(null==(d=this._eventManager.handlers)?void 0:d.LookAt).onAnimationFrameDamping(),(null==(h=this._eventManager.handlers)?void 0:h.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let e=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=e,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),null==(p=this._perfs)||p.end()}else null==(r=this._perfs)||r.end();else null==(n=this._perfs)||n.end()},this._resize=e=>{var t,n,r,i,o,a,s,l,c,u;if(this._renderer){if(1===this._viewportMode&&this._frameView&&(this._frameView.frameSize=vCe.set(this._viewportWidth,this._viewportHeight)),e){let e=this._viewportWidth,t=this._viewportHeight;this._renderer.setSize(e-1,t-1,!1),this._renderer.setSize(e,t,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=null==(t=this._scene)?void 0:t.activeCamera,null==(s=this._scene)||s.updateViewPlaneSize((null==(r=null==(n=this._frameView)?void 0:n.frameSize)?void 0:r.x)??this._viewportWidth,(null==(o=null==(i=this._frameView)?void 0:i.frameSize)?void 0:o.y)??this._viewportHeight,(null==(a=this._frameView)?void 0:a.enableResponsive)??!1),this._camera){let e=Object.values((null==(l=this._data)?void 0:l.frames)??{})[0].preset??"fullscreen";null==(c=this._frameView)||c.setCamera(this._camera),null==(u=this._frameView)||u.updateCamera("fullscreen"!==e),"PerspectiveCamera"===this._camera.cameraType&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=f6(this._resize,10),this._onScroll=e=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":n,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new pCe({x:10,y:10})),function(e){e.addEventListener("pointerdown",K6,!0),e.addEventListener("pointerdown",X6,!0),e.addEventListener("pointermove",X6,!0),e.addEventListener("pointerup",Y6,!0),e.addEventListener("pointercancel",Y6,!0),e.addEventListener("pointerleave",Y6,!0),window.addEventListener("keydown",J6,!0),window.addEventListener("keyup",Z6,!0)}(e)}async load(e,t,n){(function(e){e.endsWith(".spline")||e.endsWith(".splinecode")})(e),this.disposed=!1;let r=await(await fetch(e,n)).arrayBuffer();await this.start(r,{variables:t})}async start(e,{interactive:t=!0,variables:n}={}){var r,i,o,a;if(this.disposed)return;let s=await async function(e){let[t,n]=Y8(f9.deserialize(new Uint8Array(e)));return vne(t),n.result().data}(e);this._data=s;let l=function(e){let t=[];return e.scene.objects.traverse(((e,n)=>{"Mesh"===n.type&&"NonParametricGeometry"===n.geometry.type&&void 0!==n.geometry.data.draco&&t.push(n)})),t}(s);s.version&&(0,gCe.default)(s.version,"1.9.21"),await Promise.all([l.length&&(Hxe||(Hxe=new Gxe).setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload(),Hxe.decoderPending),Bhe(s)&&wse(),yde(s)&&Xae(),vte.physicsEnabled(s.scene.objects)&&s8(),zde(s)&&Que(),Ome(s)&&Hme(),Oue(s)&&kue(),mfe(s)&&ffe(),nxe(s)&&r8()].filter(Boolean)),l.length&&await async function(e){for(let t of e){let e=await Kxe(t.geometry.data.draco);if(e){let n=t.geometry.data;e.index&&(n.index={array:e.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let r={};e.attributes.forEach((({name:e,array:t,itemSize:n})=>{r[e]={array:t,itemSize:n,type:"Float32Array",normalized:!1}})),n.attributes=r,n.draco=void 0}}}(l),null==(r=this._eventManager)||r.deactivate(),null==(i=this._controls)||i.deactivate(),null==(o=this._scene)||o.dispose();let c=new hCe(s);if(c.resetPersonalCameraFromDocumentData(),this._scene=c.scene,this._sharedAssetsManager=c.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){performance.now();mCe(s,c.scene);performance.now()}Bhe(s)&&this._scene.traverse((e=>{The(e)&&e.recomputeBoolean()})),this._sharedAssetsManager.setRequestRender((()=>{var e;this._requestRenderAutoMode(),null==(e=this._scene)||e.traverse((e=>{e instanceof rhe&&e.pendingMediaLoad&&e.update()}))})),null==(a=this._scene)||a.traverse((e=>{"ParticleSystem"===e.type&&(e.wakeUp(),e.data.autoPlay?e.start():e.stop())}));let u=Object.keys(s.shared.fonts).map((e=>this._sharedAssetsManager.getFont(e).loadingPromise));if(Promise.all(u).then((()=>{c.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()})),zde(s)&&function(e){if(vte.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse(((e,n)=>{if(n.events)if(Array.isArray(n.events)){for(let r of n.events)if(!0!==r.data.disabled&&"GameControl"===r.data.type&&r.data.collisionEnabled){t=!0;break}}else for(let r of Object.values(n.events))if(!0!==r.disabled&&"GameControl"===r.type&&r.collisionEnabled){t=!0;break}})),t}(s)&&await Promise.all(u),mfe(s)){let e=[];this._scene.traverseEntity((t=>{(t instanceof sme||t instanceof $fe)&&t.uiCanvas&&e.push(t.uiCanvas)})),await Promise.all(e.map((e=>e.promise)))}this._scene.rewriteEventsBeforeGoToPlayMode(),dye(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new LAe({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=!0===s.scene.publish.hdTransmission,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),Ome(s)&&this._scene.initializeSplatViewer(),void 0!==s.scene.blueNoiseTextureData&&this._renderer.pipeline.updateBlueNoiseTexture(s.scene.blueNoiseTextureData);let d=Object.values(s.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):("fullscreen"===d.preset?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=d.size[0],this._viewportHeight=d.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new dCe(this._renderer,this._camera,new hG(this._viewportWidth,this._viewportHeight),new hG(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(d.allowResponsive??!1)&&"fullscreen"===d.preset),t){let e=new Dbe(this._renderer,this.data.scene.publish,this._scene,(()=>this._scene.activeCamera),this._sharedAssetsManager,this._requestRenderAutoMode,!0,d);this._scene.updateMatrixWorld(!0),this._controls=new Nxe(e),this._animationControls=new Vxe(this._scene,this._requestRenderAutoMode),this._eventManager=new uCe(s.scene.publish,this._controls,this._animationControls,e,s.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(this._sharedAssetsManager.getImageLoadPromises()).then((()=>{this._resize(!0)})),void 0!==n&&this.setVariables(n),0===this.dt&&(this.render(performance.now()),setTimeout((()=>{var e;null==(e=this._renderer)||e.setAnimationLoop(this.render)}),0)),this._resizeObserverTimeout=setTimeout((()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver((()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()})),this._resizeObserver.observe(this.canvas.parentElement))}),300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(void 0!==this._data){let t=Object.entries(e);for(let[e,n]of t)this.setVariable(e,n)}}setVariable(e,t){var n;let r=this._getVariableByName(e);if(r&&!("dynamicVariableType"in r.data)){let e=t;"number"==typeof r.data.value?e="number"==typeof t?t:"boolean"==typeof t?!0===t?1:0:parseFloat(t):"boolean"==typeof r.data.value?e="number"==typeof t?!!t:"boolean"==typeof t?t:"false"!==t.toLocaleLowerCase()&&!!t:"string"!=typeof r.data.value&&void 0!==r.data.value.textValue&&(e=t.toString());let i="string"==typeof e?{textValue:e}:e;null==(n=this._sharedAssetsManager)||n.updateVariable(r.id,i),this.requestRender(),this._requestRenderAutoMode()}else void 0===r||r.data}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach((t=>{void 0===e[t.data.name]&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))})),e}getVariable(e){let t=this._getVariableByName(e);if(t){let e=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(e)}}_getVariableValue(e){return"string"!=typeof e&&Cte.isTextValue(e)?Cte.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find((t=>t.data.name===e));return t&&this._variablesCache.set(e,t),t}}findObjectById(e){var t;let n=null==(t=this._scene)?void 0:t.getObjectByProperty("uuid",e);return this._createProxyObject(n)}findObjectByName(e){var t;let n=null==(t=this._scene)?void 0:t.getObjectByName(e);return this._createProxyObject(n)}getAllObjects(){var e;let t=[];return null==(e=this._scene)||e.traverseEntity((e=>{if(!(e.uuid===lee||this._scene.isInvisibleObjects(e)||e instanceof $fe)){let n=this._createProxyObject(e);n&&t.push(n)}})),t}getSplineEvents(){var e,t;return(null==(t=null==(e=this._eventManager)?void 0:e.handlers)?void 0:t.Spline).splineEvents}emitEvent(e,t){var n;null==(n=this.findObjectById(t)||this.findObjectByName(t))||n.emitEvent(e)}emitEventReverse(e,t){var n;null==(n=this.findObjectById(t)||this.findObjectByName(t))||n.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,n;(null==(t=this._controls)?void 0:t.orbitControls)instanceof vxe&&(null==(n=this._controls)||n.orbitControls.setZoom(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var t;let{r:n,g:r,b:i,a:o}={r:0,g:0,b:0,a:1},a=new qse(n,r,i,o);try{a.setStyle(e)}catch{}null==(t=this._scene)||t.activePage.setBackgroundColor(a),this._requestRenderAutoMode()}dispose(){var e,t,n,r,i,o,a;this.disposed=!0,null==(e=this._eventManager)||e.deactivate(),null==(t=this._scene)||t.dispose(),null==(n=this._sharedAssetsManager)||n.dispose(),this._proxyObjectCache.forEach((e=>{_1.unsubscribe(e)})),this._variablesCache.clear(),null==(r=this._renderer)||r.setAnimationLoop(null),null==(i=this._renderer)||i.dispose(),this._renderer=void 0,null==(o=this._sharedAssetsManager)||o.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),void 0!==this._resizeObserverTimeout&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),null==(a=this._controls)||a.deactivate(),this.dt=0,function(e){e.removeEventListener("pointerdown",K6,!0),e.removeEventListener("pointerdown",X6,!0),e.removeEventListener("pointermove",X6,!0),e.removeEventListener("pointerup",Y6,!0),e.removeEventListener("pointercancel",Y6,!0),e.removeEventListener("pointerleave",Y6,!0),window.removeEventListener("keydown",J6,!0),window.removeEventListener("keyup",Z6,!0)}(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,t,n;this._isPaused||(null==(e=this._renderer)||e.setAnimationLoop(null),this._isPaused=!0,null==(t=this._eventManager)||t.pause(),(null==(n=this._controls)?void 0:n.orbitControls)&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,n;!this._isPaused||(this._isPaused=!1,null==(e=this._eventManager)||e.resume(),(null==(t=this._controls)?void 0:t.orbitControls)&&(this._controls.orbitControls.enabled=!0),null==(n=this._renderer)||n.setAnimationLoop(this.render))}setGlobalEvents(e){var t;null==(t=this._eventManager)||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var t;if(null==e)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let n;e.traverseAncestors((e=>{e instanceof $fe&&(n=e.name)}));let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:n,parentUuid:e.parent instanceof $fe||e instanceof Gme||null==(t=e.parent)?void 0:t.uuid,emitEvent(t){e.dispatchEvent({type:"userEvent",eventName:t})},emitEventReverse(t){e.dispatchEvent({type:"userEvent",eventName:t,reverse:!0})}},i=_1(r,((t,n)=>{var r;"object"!=typeof e[t]&&(null==(r=Object.getOwnPropertyDescriptor(e,t))?void 0:r.writable)&&(e[t]=n),this._requestRenderAutoMode(),e.updateMatrix()}));return this._proxyObjectCache.set(e.uuid,i),i}setUIWasmUrl(e){wce.skiaWasmUrl=e}};const bCe={class:"w-full h-full"},wCe=Dn({__name:"Spline",props:{url:{type:String,default:""},class:{type:String,default:""}},setup(e,{emit:t}){const n=e,r=t,i=bt();return vn((async()=>{(()=>{const e=new yCe(i.value);e.load(n.url).then((()=>{r("loaded",e)}))})()})),(e,t)=>(gi(),wi("div",bCe,[Ei("canvas",{class:V(["canvas-3d",n.class]),ref_key:"ref3d",ref:i},null,2)]))}}),xCe={class:"main"},CCe={class:"container"},SCe={class:"content"},BCe=SR(Dn({__name:"WaterCard",props:{to:{type:String,default:"/"},header:{type:String,default:"01"},title:{type:String,default:"Read More"},color:{type:String,default:"#ff0f5b"},class:{type:String,default:""}},setup(e){const t=e;return(e,n)=>{const r=hn("RouterLink");return gi(),wi("div",xCe,[Ei("div",CCe,[Ei("div",{class:V(["drop size-72 3xl:size-96 shadow-fancy-1",t.class]),style:z(`--clr:${t.color};`)},[Ei("div",SCe,[Ei("h2",null,K(t.header),1),Ei("p",null,[In(e.$slots,"default",{},void 0,!0)]),Mi(r,{to:t.to},{default:sn((()=>[Ti(K(t.title),1)])),_:1},8,["to"])])],6)])])}}}),[["__scopeId","data-v-4236aaae"]]),_Ce={class:"flex flex-col py-16 md:flex-row inset-0 w-svw h-svh"},ECe={class:"flex flex-col flex-1"},MCe={class:"flex-1 flex justify-center items-center"},PCe={class:"flex-1 flex justify-center items-center"},TCe={class:"flex-1 hidden md:flex justify-center items-center"},DCe={class:"size-[32rem]"},FCe=Dn({__name:"HomeView",setup(e){const t=bt(!1),n=bt(""),r=()=>{n.value=zO()};vn((()=>{r(),window.addEventListener("resize",r)})),xn((()=>{window.removeEventListener("resize",r)}));const i=e=>{e._camera.zoom=1,setTimeout((()=>{t.value=!0}),500)};return(e,n)=>(gi(),wi("div",_Ce,[Ei("div",ECe,[Ei("div",MCe,[Mi(BCe,{to:"/annotator",title:"Annotator",class:V("rounded-fancy-1")},{default:sn((()=>[Ti(" Clinical Description Annotator ")])),_:1})]),Ei("div",PCe,[Mi(BCe,{to:"/login",header:"02",title:"DigitalTWINs",class:V("rounded-fancy-2"),color:"#01b4ff"},{default:sn((()=>[Ti(" DigitalTWINs on FHIR ")])),_:1})])]),Ei("div",TCe,[En(Ei("div",DCe,[Mi(wCe,{url:"https://prod.spline.design/82UMsxlOWfp8t2zQ/scene.splinecode",onLoaded:i,class:V("rounded-fancy-4 shadow-fancy-2 hover:rounded-full transition-all duration-500 ease-in-out")})],512),[[Mo,t.value]])])]))}}),ICe=Dn({__name:"WorkflowView",setup(e){var t;const n=bt(OI().query.name),{root:r}=ZD(XR()),i=bt("Annotate"),o=bt(0),a=bt(0),s=bt(),l=bt();l.value=null==(t=r.value)?void 0:t.children.filter((e=>e.name===n.value))[0];const c=l.value.children.filter((e=>{if("file"===e.kind&&e.name.endsWith(".cwl"))return e}));var u;(u=l.value.children[0],new Promise((async(e,t)=>{try{let t;const i=await u.getFile(),o=await i.text();try{t=JSON.parse(o)}catch(n){try{t=dH.load(o)}catch(r){throw new Error("Error parsing YAML file: "+r)}}e(t)}catch(i){throw t(`Error reading CWL file: ${i}`),new Error(`Error reading CWL file: ${i}`)}}))).then((e=>{s.value=e;const t=Object.keys(e.steps);a.value=t.length}));const d=e=>{"Annotate"===i.value?i.value="Submit":i.value="Annotate"};return(e,t)=>(gi(),xi(MU,{title:"Workflow Annotator",avatar:St(zR),annotator:i.value,subtitle:"Add descriptions for workflow",onUpdateAnnotator:d},{default:sn((()=>[Mi(St(JT),{label:"Number of workflows",value:St(c).length},null,8,["value"]),Mi(St(JT),{label:"Number of goals",value:o.value},null,8,["value"]),Mi(St(JT),{label:"Number of actions",value:a.value},null,8,["value"])])),_:1},8,["avatar","annotator"]))}}),kCe={class:"flex-1 flex flex-col justify-center items-center w-full"},OCe={class:"mt-5"},LCe=Dn({__name:"Login",setup:e=>(e,t)=>{const n=hn("router-link");return gi(),wi("div",kCe,[Mi(St(kM),{class:"w-full"},{default:sn((()=>[Mi(St(EP),{label:"Username"},{default:sn((()=>[Mi(St(ex))])),_:1}),Mi(St(EP),{label:"Password"},{default:sn((()=>[Mi(St(ex))])),_:1})])),_:1}),Mi(St(Bx),{type:"primary",block:"",secondary:"",strong:""},{default:sn((()=>[Ti(" Sign In ")])),_:1}),Ei("div",OCe,[Ti(" Don't have an account? "),Mi(n,{to:"#",class:"text-blue-700 hover:bg-blue-300 p-1 rounded-md"},{default:sn((()=>[Ti("Sign up")])),_:1})])])}}),RCe={class:"flex flex-col justify-evenly h-full gap-3"},UCe=["onKeyup","onUpdate:modelValue"],zCe={key:0,class:"text-red-500"},NCe=Dn({__name:"OTPPad",props:{length:{type:Number,default:4},errorMessage:{type:String,default:""}},emits:["entered"],setup(e,{emit:t}){const n=e,r=t,i=bt([]),o=bt();vn((()=>{const e=o.value.children;i.value=Array(n.length).fill(void 0),e[0].focus();for(let t=0;t<e.length;t++){e[t].addEventListener("focus",c)}}));const a=eo((()=>""!==n.errorMessage)),s=()=>{l();i.value.filter((e=>null!=e)).length===n.length&&r("entered",i.value.join(""))},l=()=>{const e=o.value.children;let t=0;for(let r=0;r<n.length;r++)u(i.value[r])?(e[r].classList.remove("border-red-500"),t++):e[r].classList.add("border-red-500");return t===n.length},c=e=>{e.target},u=e=>{const t=Number(e);return!isNaN(t)&&isFinite(t)};return xn((()=>{if(!o.value)return;const e=o.value.children;for(let t=0;t<e.length;t++){e[t].removeEventListener("focus",c)}})),(t,r)=>(gi(),wi("div",RCe,[Ei("div",{ref_key:"container",ref:o,class:"flex gap-4 items-center justify-center flex-wrap"},[(gi(!0),wi(di,null,Pn(e.length,(e=>En((gi(),wi("input",{key:e,onKeyup:t=>((e,t)=>{const r=o.value.children,a=e.key;if(t>0&&("Backspace"===a||"Delete"===a)&&!i.value[t]&&r[t-1])i.value[t]=void 0,r[t-1].focus();else{if(!a.match(/^[0-9]$/))return"Enter"===a?void s():void(i.value[t]=void 0);t<n.length-1?(r[t+1].focus(),i.value[t]=a):l()}})(t,e-1),"onUpdate:modelValue":t=>i.value[e-1]=t,type:"text",maxlength:"1",class:"border-4 border-gray-300 shadow-sm focus:border-zinc-400 focus:outline-none rounded-md size-14 xl:size-20 font-extrabold text-2xl p-2 text-center caret-transparent"},null,40,UCe)),[[oa,i.value[e-1]]]))),128))],512),Ei("div",null,[a.value?(gi(),wi("p",zCe,K(n.errorMessage),1)):Fi("",!0)]),Ei("div",null,[Mi(St(Bx),{type:"primary",block:"",strong:"",class:"rounded-lg",onClick:s},{default:sn((()=>[Ti(" Enter Admin Passkey ")])),_:1})])]))}});function jCe(e){return btoa(e)}function HCe(e){return atob(e)}const QCe={class:"flex-1 flex flex-col justify-evenly"},VCe=Ei("div",{class:"ml-10"},[Ei("h1",{class:"text-lg font-semibold"},"Admin Access Verification"),Ei("p",null,"To access the admin page, please enter the passkey.")],-1),WCe={class:"flex justify-center items-center md:h-1/2"},GCe=Dn({__name:"Admin",setup(e){const t="123456",n=bt(""),r="undefined"!=typeof window?window.localStorage.getItem("adminAccessKey"):null,i=bt(""),o=kI();if(r){const e=HCe(r),[t,i,o]=e.split("-");if("admin"===t){Date.now()-parseInt(o)<18e5?n.value=i:localStorage.removeItem("accessKey")}}Dr((()=>{if(n.value){HCe(n.value)===t&&o.push("/admin-fhir")}}));const a=e=>{e===t?(n.value=jCe(e),localStorage.setItem("adminAccessKey",jCe("admin-"+n.value+"-"+Date.now())),i.value=""):i.value="Invalid passkey, Please try again."};return(e,t)=>(gi(),wi("div",QCe,[VCe,Ei("div",WCe,[Mi(NCe,{length:6,"error-message":i.value,onEntered:a},null,8,["error-message"])])]))}}),qCe={class:"flex flex-col py-16 md:flex-row inset-0 w-svw h-svh"},KCe={class:"w-1/3 hidden md:flex justify-center items-center"},YCe={class:"size-[20rem]"},XCe={class:"w-full h-full md:w-2/3 flex items-center justify-center"},$Ce={class:"p-10 w-4/5 h-4/5 md:h-2/3 xl:h-3/4 overflow-y-auto form-container shadow-lg"},JCe=SR(Dn({__name:"LoginView",setup(e){const t=bt(!1),n=e=>{e._camera.zoom=.6,setTimeout((()=>{t.value=!0}),500)};return(e,r)=>(gi(),wi("div",qCe,[Ei("div",KCe,[En(Ei("div",YCe,[Mi(wCe,{url:"https://prod.spline.design/82UMsxlOWfp8t2zQ/scene.splinecode",onLoaded:n,class:V("rounded-fancy-3 shadow-fancy-1  hover:rounded-full transition-all duration-500 ease-in-out")})],512),[[Mo,t.value]])]),Ei("div",XCe,[Ei("div",$Ce,[Mi(St(pD),{"default-value":"signin",size:"large","justify-content":"space-evenly",class:"flex h-full"},{default:sn((()=>[Mi(St(uD),{name:"signin",tab:"Sign in",class:"flex h-full"},{default:sn((()=>[Mi(LCe)])),_:1}),Mi(St(uD),{name:"admin",tab:"Admin",class:"flex h-full"},{default:sn((()=>[Mi(GCe)])),_:1})])),_:1})])])]))}}),[["__scopeId","data-v-267e41f8"]]),ZCe={class:"fixed z-10 top-0 left-0 right-0 h-[8vh] pt-3 px-3 shadow-sm"},eSe={class:"fixed bg-fancy-gradient"},tSe=Dn({__name:"AppLayoutHome",setup:e=>(e,t)=>{const n=hn("router-view");return gi(),wi(di,null,[Ei("div",ZCe,[Mi(BR)]),Ei("div",eSe,[Mi(n)])],64)}}),nSe=Dn({__name:"Modal",props:{title:{}},setup(e){const t=bt(!1);return(e,n)=>(gi(),wi(di,null,[Mi(St(Bx),{tertiary:"",round:"",type:"info",onClick:n[0]||(n[0]=e=>t.value=!0)},{default:sn((()=>[Ti(" View More ")])),_:1}),Mi(St(sM),{show:t.value,"onUpdate:show":n[1]||(n[1]=e=>t.value=e),preset:"card",class:"mx-5 md:w-2/3 md:mx-auto",title:e.title},{default:sn((()=>[In(e.$slots,"default")])),_:3},8,["show","title"])],64))}}),rSe=e=>(on("data-v-94965b41"),e=e(),an(),e),iSe={class:"main"},oSe={class:"main border shadow-sm m-2 px-3 py-5 rounded-lg"},aSe={class:"my-1 md:my-2 tracking-wide"},sSe=rSe((()=>Ei("span",{class:"mx-2 font-semibold select-none"},"UUID:",-1))),lSe={class:"span-text"},cSe={class:"my-1 md:my-2 tracking-wide"},uSe=rSe((()=>Ei("span",{class:"mx-2 font-semibold select-none"},"Category:",-1))),dSe={class:"my-1 md:my-2 tracking-wide"},hSe=rSe((()=>Ei("span",{class:"mx-2 font-semibold select-none"},"Category System:",-1))),pSe={class:"span-text"},ASe={class:"my-1 md:my-2 tracking-wide"},fSe=rSe((()=>Ei("span",{class:"mx-2 font-semibold select-none"},"Category Description:",-1))),mSe={class:"my-1 md:my-2 tracking-wide"},gSe=rSe((()=>Ei("span",{class:"mx-2 font-semibold select-none"},"Scope:",-1))),vSe=SR(Dn({__name:"ConsentModal",props:{resource:{}},setup:e=>(e,t)=>(gi(),wi("div",iSe,[Mi(nSe,{title:e.resource.resourceType+" for patient: "+e.resource.patient.display},{default:sn((()=>[Ei("div",oSe,[Ei("div",aSe,[sSe,Ti(),Ei("span",lSe,K(e.resource.identifier[0].value),1)]),Ei("div",cSe,[uSe,Ti(" "+K(e.resource.category[0].coding[0].display),1)]),Ei("div",dSe,[hSe,Ti(),Ei("span",pSe,K(e.resource.category[0].coding[0].system),1)]),Ei("div",ASe,[fSe,Ti(),Ei("span",null,K(e.resource.category[0].text),1)]),Ei("div",mSe,[gSe,Ti(),Ei("span",null,K(e.resource.scope.coding[0].display+". "+e.resource.scope.text),1)])])])),_:1},8,["title"])]))}),[["__scopeId","data-v-94965b41"]]),ySe=e=>(on("data-v-1de9077e"),e=e(),an(),e),bSe={class:"n-step-description"},wSe={class:"content"},xSe={class:"n-step-description"},CSe=ySe((()=>Ei("p",null," Click to generate the report, you also can download the report. ",-1))),SSe=SR(Dn({__name:"PatientReportStep",props:{screenSize:{type:String,default:"md"},datasets:{type:Array,default:()=>[]}},emits:["onReportData"],setup(e,{emit:t}){const{workflowToolProcess:n}=ZD(UO()),{getWorkflowToolProcess:r}=UO(),i=e,o=t,a=bt(1),s=bt("process"),l=bt("Selecting..."),c=bt([]),u=bt("Selecting..."),d=i.datasets.map(((e,t)=>({label:`Dataste ${t+1}`,value:e.researchStudy.identifier[0].value}))),h=eo((()=>{if("Selecting..."===l.value)return[];{const e=i.datasets.find((e=>e.researchStudy.identifier[0].value===l.value));return null==e?void 0:e.relatedResources.measurements.map((e=>({label:"Observation"===e.resourceType?`${e.resourceType}: ${e.code.text}`:e.resourceType,value:e.identifier[0].value})))}})),p=eo((()=>{if(0===c.value.length)return[];{const e=i.datasets.find((e=>e.researchStudy.identifier[0].value===l.value));return null==e?void 0:e.relatedResources.workflow_tool_processes.map((e=>({label:e.description,value:e.identifier[0].value})))}})),A=bt([{title:"Select the dataset",value:l,options:d},{title:"Select primary measurements",value:c,options:h},{title:"Select the workflow tool process",value:u,options:p}]),f=eo((()=>"error"===s.value?"error":"success"));Dr((async()=>{"Selecting..."!==u.value&&await r(u.value)}));const m=()=>{(1===a.value&&"Selecting..."===l.value||2===a.value&&0===c.value.length?(s.value="error",0):(s.value="process",1))&&(a.value=a.value+1)},g=()=>{2===a.value?c.value=[]:3===a.value&&(u.value="Selecting...",n.value=null),s.value="process",a.value=a.value-1},v=()=>{const e=i.datasets.find((e=>e.researchStudy.identifier[0].value===l.value)),t=null==e?void 0:e.relatedResources.measurements.filter((e=>c.value.includes(e.identifier[0].value))),r={dataset:e,measurements:t,process:n.value};o("onReportData",r)};return(t,n)=>(gi(),xi(St(rD),{class:"main p-2",vertical:!["md","lg","xl","2xl","3xl"].includes(e.screenSize),current:a.value,status:s.value},{default:sn((()=>[(gi(!0),wi(di,null,Pn(A.value,((e,t)=>(gi(),xi(St(iD),{key:t,title:e.title},{default:sn((()=>[Ei("div",bSe,[Ei("div",wSe,[Mi(St(MC),{value:e.value,"onUpdate:value":t=>e.value=t,multiple:t+1===2,options:e.options,disabled:a.value!==t+1},null,8,["value","onUpdate:value","multiple","options","disabled"])]),a.value===t+1&&0!==t?(gi(),xi(St(Bx),{key:0,type:"info",size:"small",class:"btn",onClick:g},{default:sn((()=>[Ti(" Back ")])),_:1})):Fi("",!0),a.value===t+1?(gi(),xi(St(Bx),{key:1,type:f.value,size:"small",class:"btn",onClick:m},{default:sn((()=>[Ti(" Next ")])),_:1},8,["type"])):Fi("",!0)])])),_:2},1032,["title"])))),128)),Mi(St(iD),{title:"Generate Report"},{default:sn((()=>[Ei("div",xSe,[CSe,4===a.value?(gi(),xi(St(Bx),{key:0,type:"info",size:"small",class:"btn",onClick:g},{default:sn((()=>[Ti(" Back ")])),_:1})):Fi("",!0),4===a.value?(gi(),xi(St(Bx),{key:1,size:"small",color:"#ff69b4",class:"btn",onClick:v},{default:sn((()=>[Ti(" Generate ")])),_:1})):Fi("",!0)])])),_:1})])),_:1},8,["vertical","current","status"]))}}),[["__scopeId","data-v-1de9077e"]]);var BSe={exports:{}};function _Se(e){return(_Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ESe=Uint8Array,MSe=Uint16Array,PSe=Int32Array,TSe=new ESe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),DSe=new ESe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),FSe=new ESe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ISe=function(e,t){for(var n=new MSe(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new PSe(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},kSe=ISe(TSe,2),OSe=kSe.b,LSe=kSe.r;OSe[28]=258,LSe[258]=28;for(var RSe=ISe(DSe,0),USe=RSe.b,zSe=RSe.r,NSe=new MSe(32768),jSe=0;jSe<32768;++jSe){var HSe=(43690&jSe)>>1|(21845&jSe)<<1;HSe=(61680&(HSe=(52428&HSe)>>2|(13107&HSe)<<2))>>4|(3855&HSe)<<4,NSe[jSe]=((65280&HSe)>>8|(255&HSe)<<8)>>1}var QSe=function(e,t,n){for(var r=e.length,i=0,o=new MSe(t);i<r;++i)e[i]&&++o[e[i]-1];var a,s=new MSe(t);for(i=1;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new MSe(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],d=s[e[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[NSe[d]>>l]=c}else for(a=new MSe(r),i=0;i<r;++i)e[i]&&(a[i]=NSe[s[e[i]-1]++]>>15-e[i]);return a},VSe=new ESe(288);for(jSe=0;jSe<144;++jSe)VSe[jSe]=8;for(jSe=144;jSe<256;++jSe)VSe[jSe]=9;for(jSe=256;jSe<280;++jSe)VSe[jSe]=7;for(jSe=280;jSe<288;++jSe)VSe[jSe]=8;var WSe=new ESe(32);for(jSe=0;jSe<32;++jSe)WSe[jSe]=5;var GSe=QSe(VSe,9,0),qSe=QSe(VSe,9,1),KSe=QSe(WSe,5,0),YSe=QSe(WSe,5,1),XSe=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},$Se=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},JSe=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},ZSe=function(e){return(e+7)/8|0},eBe=function(e,t,n){return(null==n||n>e.length)&&(n=e.length),new ESe(e.subarray(t,n))},tBe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],nBe=function(e,t,n){var r=new Error(t||tBe[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,nBe),!n)throw r;return r},rBe=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},iBe=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},oBe=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:hBe,l:0};if(1==i){var a=new ESe(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=i-1;)s=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};var h=o[0].s;for(r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var p=new MSe(h+1),A=aBe(n[u-1],p,0);if(A>t){r=0;var f=0,m=A-t,g=1<<m;for(o.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<i;++r){var v=o[r].s;if(!(p[v]>t))break;f+=g-(1<<A-p[v]),p[v]=t}for(f>>=m;f>0;){var y=o[r].s;p[y]<t?f-=1<<t-p[y]++-1:++r}for(;r>=0&&f;--r){var b=o[r].s;p[b]==t&&(--p[b],++f)}A=t}return{t:new ESe(p),l:A}},aBe=function(e,t,n){return-1==e.s?Math.max(aBe(e.l,t,n+1),aBe(e.r,t,n+1)):t[e.s]=n},sBe=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new MSe(++t),r=0,i=e[0],o=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=e[s]}return{c:n.subarray(0,r),n:t}},lBe=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},cBe=function(e,t,n){var r=n.length,i=ZSe(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},uBe=function(e,t,n,r,i,o,a,s,l,c,u){rBe(t,u++,n),++i[256];for(var d=oBe(i,15),h=d.t,p=d.l,A=oBe(o,15),f=A.t,m=A.l,g=sBe(h),v=g.c,y=g.n,b=sBe(f),w=b.c,x=b.n,C=new MSe(19),S=0;S<v.length;++S)++C[31&v[S]];for(S=0;S<w.length;++S)++C[31&w[S]];for(var B=oBe(C,7),_=B.t,E=B.l,M=19;M>4&&!_[FSe[M-1]];--M);var P,T,D,F,I=c+5<<3,k=lBe(i,VSe)+lBe(o,WSe)+a,O=lBe(i,h)+lBe(o,f)+a+14+3*M+lBe(C,_)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&I<=k&&I<=O)return cBe(t,u,e.subarray(l,l+c));if(rBe(t,u,1+(O<k)),u+=2,O<k){P=QSe(h,p,0),T=h,D=QSe(f,m,0),F=f;var L=QSe(_,E,0);rBe(t,u,y-257),rBe(t,u+5,x-1),rBe(t,u+10,M-4),u+=14;for(S=0;S<M;++S)rBe(t,u+3*S,_[FSe[S]]);u+=3*M;for(var R=[v,w],U=0;U<2;++U){var z=R[U];for(S=0;S<z.length;++S){var N=31&z[S];rBe(t,u,L[N]),u+=_[N],N>15&&(rBe(t,u,z[S]>>5&127),u+=z[S]>>12)}}}else P=GSe,T=VSe,D=KSe,F=WSe;for(S=0;S<s;++S){var j=r[S];if(j>255){iBe(t,u,P[(N=j>>18&31)+257]),u+=T[N+257],N>7&&(rBe(t,u,j>>23&31),u+=TSe[N]);var H=31&j;iBe(t,u,D[H]),u+=F[H],H>3&&(iBe(t,u,j>>5&8191),u+=DSe[H])}else iBe(t,u,P[j]),u+=T[j]}return iBe(t,u,P[256]),u+T[256]},dBe=new PSe([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hBe=new ESe(0),pBe=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=0|n.length,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=r+=n[a];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},ABe=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new ESe(o.length+e.length);a.set(o),a.set(e,o.length),e=a,i.w=o.length}return function(e,t,n,r,i,o){var a=o.z||e.length,s=new ESe(r+a+5*(1+Math.ceil(a/7e3))+i),l=s.subarray(r,s.length-i),c=o.l,u=7&(o.r||0);if(t){u&&(l[0]=o.r>>3);for(var d=dBe[t-1],h=d>>13,p=8191&d,A=(1<<n)-1,f=o.p||new MSe(32768),m=o.h||new MSe(A+1),g=Math.ceil(n/3),v=2*g,y=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<v)&A},b=new PSe(25e3),w=new MSe(288),x=new MSe(32),C=0,S=0,B=o.i||0,_=0,E=o.w||0,M=0;B+2<a;++B){var P=y(B),T=32767&B,D=m[P];if(f[T]=D,m[P]=T,E<=B){var F=a-B;if((C>7e3||_>24576)&&(F>423||!c)){u=uBe(e,l,0,b,w,x,S,_,M,B-M,u),_=C=S=0,M=B;for(var I=0;I<286;++I)w[I]=0;for(I=0;I<30;++I)x[I]=0}var k=2,O=0,L=p,R=T-D&32767;if(F>2&&P==y(B-R))for(var U=Math.min(h,F)-1,z=Math.min(32767,B),N=Math.min(258,F);R<=z&&--L&&T!=D;){if(e[B+k]==e[B+k-R]){for(var j=0;j<N&&e[B+j]==e[B+j-R];++j);if(j>k){if(k=j,O=R,j>U)break;var H=Math.min(R,j-2),Q=0;for(I=0;I<H;++I){var V=B-R+I&32767,W=V-f[V]&32767;W>Q&&(Q=W,D=V)}}}R+=(T=D)-(D=f[T])&32767}if(O){b[_++]=268435456|LSe[k]<<18|zSe[O];var G=31&LSe[k],q=31&zSe[O];S+=TSe[G]+DSe[q],++w[257+G],++x[q],E=B+k,++C}else b[_++]=e[B],++w[e[B]]}}for(B=Math.max(B,E);B<a;++B)b[_++]=e[B],++w[e[B]];u=uBe(e,l,c,b,w,x,S,_,M,B-M,u),c||(o.r=7&u|l[u/8|0]<<3,u-=7,o.h=m,o.p=f,o.i=B,o.w=E)}else{for(B=o.w||0;B<a+c;B+=65535){var K=B+65535;K>=a&&(l[u/8|0]=c,K=a),u=cBe(l,u+1,e.subarray(B,K))}o.i=a}return eBe(s,0,r+ZSe(u)+i)}(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,i)},fBe=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function mBe(e,t){t||(t={});var n=pBe();n.p(e);var r=ABe(e,t,t.dictionary?6:2,4);return function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=pBe();i.p(t.dictionary),fBe(e,2,i.d())}}(r,t),fBe(r,r.length-4,n.d()),r}function gBe(e,t){return function(e,t,n,r){var i=e.length;if(!i||t.f&&!t.l)return n||new ESe(0);var o=!n,a=o||2!=t.i,s=t.i;o&&(n=new ESe(3*i));var l=function(e){var t=n.length;if(e>t){var r=new ESe(Math.max(2*t,e));r.set(n),n=r}},c=t.f||0,u=t.p||0,d=t.b||0,h=t.l,p=t.d,A=t.m,f=t.n,m=8*i;do{if(!h){c=$Se(e,u,1);var g=$Se(e,u+1,3);if(u+=3,!g){var v=e[(P=ZSe(u)+4)-4]|e[P-3]<<8,y=P+v;if(y>i){s&&nBe(0);break}a&&l(d+v),n.set(e.subarray(P,y),d),t.b=d+=v,t.p=u=8*y,t.f=c;continue}if(1==g)h=qSe,p=YSe,A=9,f=5;else if(2==g){var b=$Se(e,u,31)+257,w=$Se(e,u+10,15)+4,x=b+$Se(e,u+5,31)+1;u+=14;for(var C=new ESe(x),S=new ESe(19),B=0;B<w;++B)S[FSe[B]]=$Se(e,u+3*B,7);u+=3*w;var _=XSe(S),E=(1<<_)-1,M=QSe(S,_,1);for(B=0;B<x;){var P,T=M[$Se(e,u,E)];if(u+=15&T,(P=T>>4)<16)C[B++]=P;else{var D=0,F=0;for(16==P?(F=3+$Se(e,u,3),u+=2,D=C[B-1]):17==P?(F=3+$Se(e,u,7),u+=3):18==P&&(F=11+$Se(e,u,127),u+=7);F--;)C[B++]=D}}var I=C.subarray(0,b),k=C.subarray(b);A=XSe(I),f=XSe(k),h=QSe(I,A,1),p=QSe(k,f,1)}else nBe(1);if(u>m){s&&nBe(0);break}}a&&l(d+131072);for(var O=(1<<A)-1,L=(1<<f)-1,R=u;;R=u){var U=(D=h[JSe(e,u)&O])>>4;if((u+=15&D)>m){s&&nBe(0);break}if(D||nBe(2),U<256)n[d++]=U;else{if(256==U){R=u,h=null;break}var z=U-254;if(U>264){var N=TSe[B=U-257];z=$Se(e,u,(1<<N)-1)+OSe[B],u+=N}var j=p[JSe(e,u)&L],H=j>>4;if(j||nBe(3),u+=15&j,k=USe[H],H>3&&(N=DSe[H],k+=JSe(e,u)&(1<<N)-1,u+=N),u>m){s&&nBe(0);break}a&&l(d+131072);var Q=d+z;if(d<k){var V=0-k,W=Math.min(k,Q);for(V+d<0&&nBe(3);d<W;++d)n[d]=r[V+d]}for(;d<Q;++d)n[d]=n[d-k]}}t.l=h,t.p=R,t.b=d,t.f=c,h&&(c=1,t.m=A,t.d=p,t.n=f)}while(!c);return d!=n.length&&o?eBe(n,0,d):n.subarray(0,d)}(e.subarray((r=t,(8!=(15&(n=e)[0])||n[0]>>4>7||(n[0]<<8|n[1])%31)&&nBe(6,"invalid zlib data"),(n[1]>>5&1)==+!r&&nBe(6,"invalid zlib data: "+(32&n[1]?"need":"unexpected")+" dictionary"),2+(n[1]>>3&4)),-4),{i:2},t,t);var n,r}var vBe="undefined"!=typeof TextDecoder&&new TextDecoder;try{vBe.decode(hBe,{stream:!0}),1}catch(g9){}var yBe=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}();function bBe(){yBe.console&&"function"==typeof yBe.console.log&&yBe.console.log.apply(yBe.console,arguments)}var wBe={log:bBe,warn:function(e){yBe.console&&("function"==typeof yBe.console.warn?yBe.console.warn.apply(yBe.console,arguments):bBe.call(null,arguments))},error:function(e){yBe.console&&("function"==typeof yBe.console.error?yBe.console.error.apply(yBe.console,arguments):bBe(e))}};function xBe(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){EBe(r.response,t,n)},r.onerror=function(){wBe.error("could not download file")},r.send()}function CBe(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function SBe(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(w8){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var BBe,_Be,EBe=yBe.saveAs||("object"!==("undefined"==typeof window?"undefined":_Se(window))||window!==yBe?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=yBe.URL||yBe.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?CBe(i.href)?xBe(e,t,n):SBe(i,i.target="_blank"):SBe(i)):(i.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){SBe(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(CBe(e))xBe(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){SBe(r)}))}else navigator.msSaveOrOpenBlob((i=e,void 0===(o=n)?o={autoBom:!1}:"object"!==_Se(o)&&(wBe.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i),t);var i,o}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return xBe(e,t,n);var i="application/octet-stream"===e.type,o=/constructor/i.test(yBe.HTMLElement)||yBe.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&"object"===("undefined"==typeof FileReader?"undefined":_Se(FileReader))){var s=new FileReader;s.onloadend=function(){var e=s.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},s.readAsDataURL(e)}else{var l=yBe.URL||yBe.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout((function(){l.revokeObjectURL(c)}),4e4)}});
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function MBe(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(e);a&&(t=o(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}
/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function PBe(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];n=DBe(n,r,i,o,t[0],7,-680876936),o=DBe(o,n,r,i,t[1],12,-389564586),i=DBe(i,o,n,r,t[2],17,606105819),r=DBe(r,i,o,n,t[3],22,-1044525330),n=DBe(n,r,i,o,t[4],7,-176418897),o=DBe(o,n,r,i,t[5],12,1200080426),i=DBe(i,o,n,r,t[6],17,-1473231341),r=DBe(r,i,o,n,t[7],22,-45705983),n=DBe(n,r,i,o,t[8],7,1770035416),o=DBe(o,n,r,i,t[9],12,-1958414417),i=DBe(i,o,n,r,t[10],17,-42063),r=DBe(r,i,o,n,t[11],22,-1990404162),n=DBe(n,r,i,o,t[12],7,1804603682),o=DBe(o,n,r,i,t[13],12,-40341101),i=DBe(i,o,n,r,t[14],17,-1502002290),n=FBe(n,r=DBe(r,i,o,n,t[15],22,1236535329),i,o,t[1],5,-165796510),o=FBe(o,n,r,i,t[6],9,-1069501632),i=FBe(i,o,n,r,t[11],14,643717713),r=FBe(r,i,o,n,t[0],20,-373897302),n=FBe(n,r,i,o,t[5],5,-701558691),o=FBe(o,n,r,i,t[10],9,38016083),i=FBe(i,o,n,r,t[15],14,-660478335),r=FBe(r,i,o,n,t[4],20,-405537848),n=FBe(n,r,i,o,t[9],5,568446438),o=FBe(o,n,r,i,t[14],9,-1019803690),i=FBe(i,o,n,r,t[3],14,-187363961),r=FBe(r,i,o,n,t[8],20,1163531501),n=FBe(n,r,i,o,t[13],5,-1444681467),o=FBe(o,n,r,i,t[2],9,-51403784),i=FBe(i,o,n,r,t[7],14,1735328473),n=IBe(n,r=FBe(r,i,o,n,t[12],20,-1926607734),i,o,t[5],4,-378558),o=IBe(o,n,r,i,t[8],11,-2022574463),i=IBe(i,o,n,r,t[11],16,1839030562),r=IBe(r,i,o,n,t[14],23,-35309556),n=IBe(n,r,i,o,t[1],4,-1530992060),o=IBe(o,n,r,i,t[4],11,1272893353),i=IBe(i,o,n,r,t[7],16,-155497632),r=IBe(r,i,o,n,t[10],23,-1094730640),n=IBe(n,r,i,o,t[13],4,681279174),o=IBe(o,n,r,i,t[0],11,-358537222),i=IBe(i,o,n,r,t[3],16,-722521979),r=IBe(r,i,o,n,t[6],23,76029189),n=IBe(n,r,i,o,t[9],4,-640364487),o=IBe(o,n,r,i,t[12],11,-421815835),i=IBe(i,o,n,r,t[15],16,530742520),n=kBe(n,r=IBe(r,i,o,n,t[2],23,-995338651),i,o,t[0],6,-198630844),o=kBe(o,n,r,i,t[7],10,1126891415),i=kBe(i,o,n,r,t[14],15,-1416354905),r=kBe(r,i,o,n,t[5],21,-57434055),n=kBe(n,r,i,o,t[12],6,1700485571),o=kBe(o,n,r,i,t[3],10,-1894986606),i=kBe(i,o,n,r,t[10],15,-1051523),r=kBe(r,i,o,n,t[1],21,-2054922799),n=kBe(n,r,i,o,t[8],6,1873313359),o=kBe(o,n,r,i,t[15],10,-30611744),i=kBe(i,o,n,r,t[6],15,-1560198380),r=kBe(r,i,o,n,t[13],21,1309151649),n=kBe(n,r,i,o,t[4],6,-145523070),o=kBe(o,n,r,i,t[11],10,-1120210379),i=kBe(i,o,n,r,t[2],15,718787259),r=kBe(r,i,o,n,t[9],21,-343485551),e[0]=HBe(n,e[0]),e[1]=HBe(r,e[1]),e[2]=HBe(i,e[2]),e[3]=HBe(o,e[3])}function TBe(e,t,n,r,i,o){return t=HBe(HBe(t,e),HBe(r,o)),HBe(t<<i|t>>>32-i,n)}function DBe(e,t,n,r,i,o,a){return TBe(t&n|~t&r,e,t,i,o,a)}function FBe(e,t,n,r,i,o,a){return TBe(t&r|n&~r,e,t,i,o,a)}function IBe(e,t,n,r,i,o,a){return TBe(t^n^r,e,t,i,o,a)}function kBe(e,t,n,r,i,o,a){return TBe(n^(t|~r),e,t,i,o,a)}function OBe(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)PBe(r,LBe(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(PBe(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,PBe(r,i),r}function LBe(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}BBe=yBe.atob.bind(yBe),_Be=yBe.btoa.bind(yBe);var RBe="0123456789abcdef".split("");function UBe(e){for(var t="",n=0;n<4;n++)t+=RBe[e>>8*n+4&15]+RBe[e>>8*n&15];return t}function zBe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function NBe(e){return OBe(e).map(zBe).join("")}var jBe="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=UBe(e[t]);return e.join("")}(OBe("hello"));function HBe(e,t){if(jBe){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}
/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function QBe(e,t){var n,r,i,o;if(e!==n){for(var a=(i=e,o=1+(256/e.length|0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+a.charCodeAt(l))%256,s[l]=s[c],s[c]=u}n=e,r=s}else s=r;var d=t.length,h=0,p=0,A="";for(l=0;l<d;l++)p=(p+(u=s[h=(h+1)%256]))%256,s[h]=s[p],s[p]=u,a=s[(s[h]+s[p])%256],A+=String.fromCharCode(t.charCodeAt(l)^a);return A}
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var VBe={print:4,modify:8,copy:16,"annot-forms":32};function WBe(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach((function(e){if(void 0!==VBe.perm)throw new Error("Invalid permission: "+e);i+=VBe[e]})),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=NBe(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=QBe(this.encryptionKey,this.padding)}function GBe(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function qBe(e){if("object"!==_Se(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!r],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[n]){var a=t[n][o];try{a[0].apply(e,r)}catch(s){yBe.console&&wBe.error("jsPDF PubSub Error",s.message,s)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function KBe(e){if(!(this instanceof KBe))return new KBe(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function YBe(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function XBe(e,t,n,r,i){if(!(this instanceof XBe))return new XBe(e,t,n,r,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,YBe.call(this,r,i)}function $Be(e,t,n,r,i){if(!(this instanceof $Be))return new $Be(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,YBe.call(this,r,i)}function JBe(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,l=16,c="S",u=null;"object"===_Se(e=e||{})&&(n=e.orientation,r=e.unit||r,i=e.format||i,o=e.compress||e.compressPdf||o,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(!0===o?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=qBe;var A="1.3",f=p.__private__.getPdfVersion=function(){return A};p.__private__.setPdfVersion=function(e){A=e};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return m};var g=p.__private__.getPageFormat=function(e){return m[e]};i=i||"a4";var v="compat",y="advanced",b=v;function w(){this.saveGraphicsState(),$(new De(he,0,0,-he,0,cn()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),c="n",b=y}function x(){this.restoreGraphicsState(),c="S",b=v}var C=p.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};p.advancedAPI=function(e){var t=b===v;return t&&w.call(this),"function"!=typeof e||(e(this),t&&x.call(this)),this},p.compatAPI=function(e){var t=b===y;return t&&x.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},p.isAdvancedAPI=function(){return b===y};var S,B=function(e){if(b!==y)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_=p.roundToPrecision=p.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};S=p.hpf=p.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return _(e,16)};var E=p.f2=p.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return _(e,2)},M=p.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return _(e,3)},P=p.scale=p.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return b===v?e*he:b===y?e:void 0},T=function(e){return P(function(e){return b===v?cn()-e:b===y?e:void 0}(e))};p.__private__.setPrecision=p.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var D,F="00000000000000000000000000000000",I=p.__private__.getFileId=function(){return F},k=p.__private__.setFileId=function(e){return F=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():F.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==u&&(vt=new WBe(u.userPermissions,u.userPassword,u.ownerPassword,F)),F};p.setFileId=function(e){return k(e),this},p.getFileId=function(){return I()};var O=p.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),o=[n,N(r),"'",N(i),"'"].join("");return["D:",e.getFullYear(),N(e.getMonth()+1),N(e.getDate()),N(e.getHours()),N(e.getMinutes()),N(e.getSeconds()),o].join("")},L=p.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),a=parseInt(e.substr(14,2),10);return new Date(t,n,r,i,o,a,0)},R=p.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=O(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return D=t},U=p.__private__.getCreationDate=function(e){var t=D;return"jsDate"===e&&(t=L(D)),t};p.setCreationDate=function(e){return R(e),this},p.getCreationDate=function(e){return U(e)};var z,N=p.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},j=p.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,Q=[],V=[],W=0,G=[],q=[],K=!1,Y=V;p.__private__.setCustomOutputDestination=function(e){K=!0,Y=e};var X=function(e){K||(Y=e)};p.__private__.resetCustomOutputDestination=function(){K=!1,Y=V};var $=p.__private__.out=function(e){return e=e.toString(),W+=e.length+1,Y.push(e),Y},J=p.__private__.write=function(e){return $(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Z=p.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(e){return te=b===y?e/he:e,this};var ne,re=p.__private__.getFontSize=p.getFontSize=function(){return b===v?te:te*he},ie=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(e){return ie=e,this},p.__private__.getR2L=p.getR2L=function(){return ie};var oe,ae=p.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};p.__private__.getZoomMode=function(){return ne};var se,le=p.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');oe=e};p.__private__.getPageMode=function(){return oe};var ce=p.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');se=e};p.__private__.getLayoutMode=function(){return se},p.__private__.setDisplayMode=p.setDisplayMode=function(e,t,n){return ae(e),ce(t),le(n),this};var ue={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ue[e]},p.__private__.getDocumentProperties=function(){return ue},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(e){for(var t in ue)ue.hasOwnProperty(t)&&e[t]&&(ue[t]=e[t]);return this},p.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ue[e]=t};var de,he,pe,Ae,fe,me={},ge={},ve=[],ye={},be={},we={},xe={},Ce=null,Se=0,Be=[],_e=new qBe(p),Ee=e.hotfixes||[],Me={},Pe={},Te=[],De=function e(t,n,r,i,o,a){if(!(this instanceof e))return new e(t,n,r,i,o,a);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(o)&&(o=0),isNaN(a)&&(a=0),this._matrix=[t,n,r,i,o,a]};Object.defineProperty(De.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(De.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(De.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(De.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(De.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(De.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(De.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(De.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(De.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(De.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(De.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(De.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(De.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(De.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(De.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(De.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),De.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(e)},De.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,o=e.tx*this.sx+e.ty*this.shx+this.tx,a=e.tx*this.shy+e.ty*this.sy+this.ty;return new De(t,n,r,i,o,a)},De.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=Math.sqrt(e*e+t*t),s=(e/=a)*n+(t/=a)*r;n-=e*s,r-=t*s;var l=Math.sqrt(n*n+r*r);return s/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,s=-s,a=-a),{scale:new De(a,0,0,l,0,0),translate:new De(1,0,0,1,i,o),rotate:new De(e,t,-t,e,0,0),skew:new De(1,0,s,1,0,0)}},De.prototype.toString=function(e){return this.join(" ")},De.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=1/(e*r-t*n),s=r*a,l=-t*a,c=-n*a,u=e*a;return new De(s,l,c,u,-s*i-c*o,-l*i-u*o)},De.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new tn(t,n)},De.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new tn(e.x+e.w,e.y+e.h));return new nn(t.x,t.y,n.x-t.x,n.y-t.y)},De.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty;return new De(e,t,n,r,i,o)},p.Matrix=De;var Fe=p.matrixMult=function(e,t){return t.multiply(e)},Ie=new De(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ie;var ke=function(e,t){if(!be[e]){var n=(t instanceof XBe?"Sh":"P")+(Object.keys(ye).length+1).toString(10);t.id=n,be[e]=n,ye[n]=t,_e.publish("addPattern",t)}};p.ShadingPattern=XBe,p.TilingPattern=$Be,p.addShadingPattern=function(e,t){return B("addShadingPattern()"),ke(e,t),this},p.beginTilingPattern=function(e){B("beginTilingPattern()"),on(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},p.endTilingPattern=function(e,t){B("endTilingPattern()"),t.stream=q[z].join("\n"),ke(e,t),_e.publish("endTilingPattern",t),Te.pop().restore()};var Oe=p.__private__.newObject=function(){var e=Le();return Re(e,!0),e},Le=p.__private__.newObjectDeferred=function(){return H++,Q[H]=function(){return W},H},Re=function(e,t){return t="boolean"==typeof t&&t,Q[e]=W,t&&$(e+" 0 obj"),e},Ue=p.__private__.newAdditionalObject=function(){var e={objId:Le(),content:""};return G.push(e),e},ze=Le(),Ne=Le(),je=p.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return r},He=p.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,i=e.ch3,o=e.ch4,a="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new MBe(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,i=255&l}if(void 0===r||void 0===o&&n===r&&r===i)if("string"==typeof n)t=n+" "+a[0];else if(2===e.precision)t=E(n/255)+" "+a[0];else t=M(n/255)+" "+a[0];else if(void 0===o||"object"===_Se(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)t=[n,r,i,a[1]].join(" ");else if(2===e.precision)t=[E(n/255),E(r/255),E(i/255),a[1]].join(" ");else t=[M(n/255),M(r/255),M(i/255),a[1]].join(" ")}else if("string"==typeof n)t=[n,r,i,o,a[2]].join(" ");else if(2===e.precision)t=[E(n),E(r),E(i),E(o),a[2]].join(" ");else t=[M(n),M(r),M(i),M(o),a[2]].join(" ");return t},Qe=p.__private__.getFilters=function(){return a},Ve=p.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||Qe(),r=e.alreadyAppliedFilters||[],i=e.addLength1||!1,o=t.length,a=e.objectId,s=function(e){return e};if(null!==u&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(s=vt.encryptor(a,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],d=(l=void 0!==JBe.API.processDataByFilters?JBe.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===i&&c.push({key:"Length1",value:o})),0!=d.length)if(d.split("/").length-1==1)c.push({key:"Filter",value:d});else{c.push({key:"Filter",value:"["+d+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var p=[],A=0;A<l.reverseChain.split("/").length-1;A+=1)p.push("null");p.push(c[h].value),c[h].value="["+p.join(" ")+"]"}}$("<<");for(var f=0;f<c.length;f++)$("/"+c[f].key+" "+c[f].value);$(">>"),0!==l.data.length&&($("stream"),$(s(l.data)),$("endstream"))},We=p.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,i=e.contentsObjId;Re(r,!0),$("<</Type /Page"),$("/Parent "+e.rootDictionaryObjId+" 0 R"),$("/Resources "+e.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(S(e.mediaBox.bottomLeftX))+" "+parseFloat(S(e.mediaBox.bottomLeftY))+" "+S(e.mediaBox.topRightX)+" "+S(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&$("/CropBox ["+S(e.cropBox.bottomLeftX)+" "+S(e.cropBox.bottomLeftY)+" "+S(e.cropBox.topRightX)+" "+S(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&$("/BleedBox ["+S(e.bleedBox.bottomLeftX)+" "+S(e.bleedBox.bottomLeftY)+" "+S(e.bleedBox.topRightX)+" "+S(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&$("/TrimBox ["+S(e.trimBox.bottomLeftX)+" "+S(e.trimBox.bottomLeftY)+" "+S(e.trimBox.topRightX)+" "+S(e.trimBox.topRightY)+"]"),null!==e.artBox&&$("/ArtBox ["+S(e.artBox.bottomLeftX)+" "+S(e.artBox.bottomLeftY)+" "+S(e.artBox.topRightX)+" "+S(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&$("/UserUnit "+e.userUnit),_e.publish("putPage",{objId:r,pageContext:Be[t],pageNumber:t,page:n}),$("/Contents "+i+" 0 R"),$(">>"),$("endobj");var o=n.join("\n");return b===y&&(o+="\nQ"),Re(i,!0),Ve({data:o,filters:Qe(),objectId:i}),$("endobj"),r},Ge=p.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Se;e++)Be[e].objId=Le(),Be[e].contentsObjId=Le();for(e=1;e<=Se;e++)n.push(We({number:e,data:q[e],objId:Be[e].objId,contentsObjId:Be[e].contentsObjId,mediaBox:Be[e].mediaBox,cropBox:Be[e].cropBox,bleedBox:Be[e].bleedBox,trimBox:Be[e].trimBox,artBox:Be[e].artBox,userUnit:Be[e].userUnit,rootDictionaryObjId:ze,resourceDictionaryObjId:Ne}));Re(ze,!0),$("<</Type /Pages");var r="/Kids [";for(t=0;t<Se;t++)r+=n[t]+" 0 R ";$(r+"]"),$("/Count "+Se),$(">>"),$("endobj"),_e.publish("postPutPages")},qe=function(e){_e.publish("putFont",{font:e,out:$,newObject:Oe,putStream:Ve}),!0!==e.isAlreadyPutted&&(e.objectNumber=Oe(),$("<<"),$("/Type /Font"),$("/BaseFont /"+GBe(e.postScriptName)),$("/Subtype /Type1"),"string"==typeof e.encoding&&$("/Encoding /"+e.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},Ke=function(e){e.objectNumber=Oe();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[S(e.x),S(e.y),S(e.x+e.width),S(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ve({data:n,additionalKeyValues:t,objectId:e.objectNumber}),$("endobj")},Ye=function(e,t){t||(t=21);var n=Oe(),r=function(e,t){var n,r=[],i=1/(t-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=e[0].offset){var o={offset:0,color:e[0].color};e.unshift(o)}if(1!=e[e.length-1].offset){var a={offset:1,color:e[e.length-1].color};e.push(a)}for(var s="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var u=e[l].offset,d=(n-u)/(e[l+1].offset-u),h=e[l].color,p=e[l+1].color;s+=j(Math.round((1-d)*h[0]+d*p[0]).toString(16))+j(Math.round((1-d)*h[1]+d*p[1]).toString(16))+j(Math.round((1-d)*h[2]+d*p[2]).toString(16))}return s.trim()}(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),$("endobj"),e.objectNumber=Oe(),$("<< /ShadingType "+e.type),$("/ColorSpace /DeviceRGB");var o="/Coords ["+S(parseFloat(e.coords[0]))+" "+S(parseFloat(e.coords[1]))+" ";2===e.type?o+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3])):o+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3]))+" "+S(parseFloat(e.coords[4]))+" "+S(parseFloat(e.coords[5])),$(o+="]"),e.matrix&&$("/Matrix ["+e.matrix.toString()+"]"),$("/Function "+n+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},Xe=function(e,t){var n=Le(),r=Oe();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(S).join(" ")+"]"}),i.push({key:"XStep",value:S(e.xStep)}),i.push({key:"YStep",value:S(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ve({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),$("endobj")},$e=function(e){for(var t in e.objectNumber=Oe(),$("<<"),e)switch(t){case"opacity":$("/ca "+E(e[t]));break;case"stroke-opacity":$("/CA "+E(e[t]))}$(">>"),$("endobj")},Je=function(e){Re(e.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in $("/Font <<"),me)me.hasOwnProperty(e)&&(!1===d||!0===d&&h.hasOwnProperty(e))&&$("/"+e+" "+me[e].objectNumber+" 0 R");$(">>")}(),function(){if(Object.keys(ye).length>0){for(var e in $("/Shading <<"),ye)ye.hasOwnProperty(e)&&ye[e]instanceof XBe&&ye[e].objectNumber>=0&&$("/"+e+" "+ye[e].objectNumber+" 0 R");_e.publish("putShadingPatternDict"),$(">>")}}(),function(e){if(Object.keys(ye).length>0){for(var t in $("/Pattern <<"),ye)ye.hasOwnProperty(t)&&ye[t]instanceof p.TilingPattern&&ye[t].objectNumber>=0&&ye[t].objectNumber<e&&$("/"+t+" "+ye[t].objectNumber+" 0 R");_e.publish("putTilingPatternDict"),$(">>")}}(e.objectOid),function(){if(Object.keys(we).length>0){var e;for(e in $("/ExtGState <<"),we)we.hasOwnProperty(e)&&we[e].objectNumber>=0&&$("/"+e+" "+we[e].objectNumber+" 0 R");_e.publish("putGStateDict"),$(">>")}}(),function(){for(var e in $("/XObject <<"),Me)Me.hasOwnProperty(e)&&Me[e].objectNumber>=0&&$("/"+e+" "+Me[e].objectNumber+" 0 R");_e.publish("putXobjectDict"),$(">>")}(),$(">>"),$("endobj")},Ze=function(){var e=[];(function(){for(var e in me)me.hasOwnProperty(e)&&(!1===d||!0===d&&h.hasOwnProperty(e))&&qe(me[e])})(),function(){var e;for(e in we)we.hasOwnProperty(e)&&$e(we[e])}(),function(){for(var e in Me)Me.hasOwnProperty(e)&&Ke(Me[e])}(),function(e){var t;for(t in ye)ye.hasOwnProperty(t)&&(ye[t]instanceof XBe?Ye(ye[t]):ye[t]instanceof $Be&&Xe(ye[t],e))}(e),_e.publish("putResources"),e.forEach(Je),Je({resourcesOid:Ne,objectOid:Number.MAX_SAFE_INTEGER}),_e.publish("postPutResources")},et=function(e){ge[e.fontName]=ge[e.fontName]||{},ge[e.fontName][e.fontStyle]=e.id},tt=function(e,t,n,r,i){var o={id:"F"+(Object.keys(me).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return _e.publish("addFont",{font:o,instance:this}),me[o.id]=o,et(o),o.id},nt=p.__private__.pdfEscape=p.pdfEscape=function(e,t){return function(e,t){var n,r,i,o,a,s,l,c,u;if(i=(t=t||{}).sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&me[de].metadata&&me[de].metadata[i]&&me[de].metadata[i].encoding&&(o=me[de].metadata[i].encoding,!a&&me[de].encoding&&(a=me[de].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(l=!1,s=[],n=0,r=e.length;n<r;n++)(c=a[e.charCodeAt(n)])?s.push(String.fromCharCode(c)):s.push(e[n]),s[n].charCodeAt(0)>>8&&(l=!0);e=s.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(s=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(u),s.push(c-(u<<8))}return String.fromCharCode.apply(void 0,s)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=p.__private__.beginPage=function(e){q[++Se]=[],Be[Se]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},at(Se),X(q[z])},it=function(e,t){var r,o,a;switch(n=t||n,"string"==typeof e&&(r=g(e.toLowerCase()),Array.isArray(r)&&(o=r[0],a=r[1])),Array.isArray(e)&&(o=e[0]*he,a=e[1]*he),isNaN(o)&&(o=i[0],a=i[1]),(o>14400||a>14400)&&(wBe.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),a=Math.min(14400,a)),i=[o,a],n.substr(0,1)){case"l":a>o&&(i=[a,o]);break;case"p":o>a&&(i=[a,o])}rt(i),Ut(Lt),$(Gt),0!==Jt&&$(Jt+" J"),0!==Zt&&$(Zt+" j"),_e.publish("addPage",{pageNumber:Se})},ot=function(e){e>0&&e<=Se&&(q.splice(e,1),Be.splice(e,1),Se--,z>Se&&(z=Se),this.setPage(z))},at=function(e){e>0&&e<=Se&&(z=e)},st=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return q.length-1},lt=function(e,t,n){var r,i=void 0;return n=n||{},e=void 0!==e?e:me[de].fontName,t=void 0!==t?t:me[de].fontStyle,r=e.toLowerCase(),void 0!==ge[r]&&void 0!==ge[r][t]?i=ge[r][t]:void 0!==ge[e]&&void 0!==ge[e][t]?i=ge[e][t]:!1===n.disableWarning&&wBe.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=ge.times[t])&&(i=ge.times.normal),i},ct=p.__private__.putInfo=function(){var e=Oe(),t=function(e){return e};for(var n in null!==u&&(t=vt.encryptor(e,0)),$("<<"),$("/Producer ("+nt(t("jsPDF "+JBe.version))+")"),ue)ue.hasOwnProperty(n)&&ue[n]&&$("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+nt(t(ue[n]))+")");$("/CreationDate ("+nt(t(D))+")"),$(">>"),$("endobj")},ut=p.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||ze;switch(Oe(),$("<<"),$("/Type /Catalog"),$("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&$("/OpenAction [3 0 R /XYZ null null "+E(ne)+"]")}switch(se||(se="continuous"),se){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}oe&&$("/PageMode /"+oe),_e.publish("putCatalog"),$(">>"),$("endobj")},dt=p.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(H+1)),$("/Root "+H+" 0 R"),$("/Info "+(H-1)+" 0 R"),null!==u&&$("/Encrypt "+vt.oid+" 0 R"),$("/ID [ <"+F+"> <"+F+"> ]"),$(">>")},ht=p.__private__.putHeader=function(){$("%PDF-"+A),$("%ºß¬à")},pt=p.__private__.putXRef=function(){var e="0000000000";$("xref"),$("0 "+(H+1)),$("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof Q[t]?$((e+Q[t]()).slice(-10)+" 00000 n "):void 0!==Q[t]?$((e+Q[t]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},At=p.__private__.buildDocument=function(){H=0,W=0,V=[],Q=[],G=[],ze=Le(),Ne=Le(),X(V),_e.publish("buildDocument"),ht(),Ge(),function(){_e.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];Re(t.objId,!0),$(t.content),$("endobj")}_e.publish("postPutAdditionalObjects")}(),Ze(),null!==u&&(vt.oid=Oe(),$("<<"),$("/Filter /Standard"),$("/V "+vt.v),$("/R "+vt.r),$("/U <"+vt.toHexString(vt.U)+">"),$("/O <"+vt.toHexString(vt.O)+">"),$("/P "+vt.P),$(">>"),$("endobj")),ct(),ut();var e=W;return pt(),dt(),$("startxref"),$(""+e),$("%%EOF"),X(q[z]),V.join("\n")},ft=p.__private__.getBlob=function(e){return new Blob([Z(e)],{type:"application/pdf"})},mt=p.output=p.__private__.output=function(e){return e.foo=function(){try{return e.apply(this,arguments)}catch(r){var t=r.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var n="Error in function "+t.split("\n")[0].split("<")[0]+": "+r.message;if(!yBe.console)throw new Error(n);yBe.console.error(n,r),yBe.alert&&alert(n)}},e.foo.bar=e,e.foo}((function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return At();case"save":p.save(t.filename);break;case"arraybuffer":return Z(At());case"blob":return ft(At());case"bloburi":case"bloburl":if(void 0!==yBe.URL&&"function"==typeof yBe.URL.createObjectURL)return yBe.URL&&yBe.URL.createObjectURL(ft(At()))||void 0;wBe.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=At();try{n=_Be(r)}catch(A){n=_Be(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(yBe)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,o="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",s=yBe.open();return null!==s&&s.document.write(a),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(yBe)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=yBe.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(yBe))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=yBe.open();if(null!==h&&(h.document.write(d),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return yBe.document.location.href=this.output("datauristring",t);default:return null}})),gt=function(e){return!0===Array.isArray(Ee)&&Ee.indexOf(e)>-1};switch(r){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==gt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);he=r}var vt=null;R(),k();var yt=p.__private__.getPageInfo=p.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Be[e].objId,pageNumber:e,pageContext:Be[e]}},bt=p.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Be)if(Be[t].objId===e)break;return yt(t)},wt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Be[z].objId,pageNumber:z,pageContext:Be[z]}};p.addPage=function(){return it.apply(this,arguments),this},p.setPage=function(){return at.apply(this,arguments),X.call(this,q[z]),this},p.insertPage=function(e){return this.addPage(),this.movePage(z,e),this},p.movePage=function(e,t){var n,r;if(e>t){n=q[e],r=Be[e];for(var i=e;i>t;i--)q[i]=q[i-1],Be[i]=Be[i-1];q[t]=n,Be[t]=r,this.setPage(t)}else if(e<t){n=q[e],r=Be[e];for(var o=e;o<t;o++)q[o]=q[o+1],Be[o]=Be[o+1];q[t]=n,Be[t]=r,this.setPage(t)}return this},p.deletePage=function(){return ot.apply(this,arguments),this},p.__private__.text=p.text=function(e,t,n,r,i){var o,a,s,l,c,u,d,p,A,f=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var m=n;n=t,t=e,e=m}if(arguments[3]instanceof De==0?(s=arguments[4],l=arguments[5],"object"===_Se(d=arguments[3])&&null!==d||("string"==typeof s&&(l=s,s=null),"string"==typeof d&&(l=d,d=null),"number"==typeof d&&(s=d,d=null),r={flags:d,angle:s,align:l})):(B("The transform parameter of text() with a Matrix value"),A=i),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var g,v="",w="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Ot,x=f.internal.scaleFactor;function C(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),nt(e,d)}function _(e){for(var t,n=e.concat(),r=[],i=n.length;i--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function E(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,i,o=e.concat(),a=[],s=o.length;s--;)"string"==typeof(r=o.shift())?a.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=t(r[0],r[1],r[2]),a.push([i[0],i[1],i[2]]));n=a}return n}var M=!1,T=!0;if("string"==typeof e)M=!0;else if(Array.isArray(e)){var D=e.concat();a=[];for(var F,I=D.length;I--;)("string"!=typeof(F=D.shift())||Array.isArray(F)&&"string"!=typeof F[0])&&(T=!1);M=T}if(!1===M)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var k=te/f.internal.scaleFactor,O=k*(w-1);switch(r.baseline){case"bottom":n-=O;break;case"top":n+=k-O;break;case"hanging":n+=k-2*O;break;case"middle":n+=k/2-O}if((u=r.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(f.splitTextToSize(t,u))}),[]))),o={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:de,fonts:me,activeFontSize:te}},_e.publish("preProcessText",o),e=o.text,s=(r=o.options).angle,A instanceof De==0&&s&&"number"==typeof s){s*=Math.PI/180,0===r.rotationDirection&&(s=-s),b===y&&(s=-s);var L=Math.cos(s),R=Math.sin(s);A=new De(L,R,-R,L,0,0)}else s&&s instanceof De&&(A=s);b!==y||A||(A=Ie),void 0!==(c=r.charSpace||Xt)&&(v+=S(P(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=r.horizontalScale)&&(v+=S(100*p)+" Tz\n"),r.lang;var U=-1,z=void 0!==r.renderingMode?r.renderingMode:r.stroke,N=f.internal.getCurrentPageInfo().pageContext;switch(z){case 0:case!1:case"fill":U=0;break;case 1:case!0:case"stroke":U=1;break;case 2:case"fillThenStroke":U=2;break;case 3:case"invisible":U=3;break;case 4:case"fillAndAddForClipping":U=4;break;case 5:case"strokeAndAddPathForClipping":U=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":U=6;break;case 7:case"addToPathForClipping":U=7}var j=void 0!==N.usedRenderingMode?N.usedRenderingMode:-1;-1!==U?v+=U+" Tr\n":-1!==j&&(v+="0 Tr\n"),-1!==U&&(N.usedRenderingMode=U),l=r.align||"left";var H,Q=te*w,V=f.internal.pageSize.getWidth(),W=me[de];c=r.charSpace||Xt,u=r.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},r.flags);var G=[],q=function(e){return f.getStringUnitWidth(e,{font:W,charSpace:c,fontSize:te,doKerning:!1})*te/x};if("[object Array]"===Object.prototype.toString.call(e)){var K;a=_(e),"left"!==l&&(H=a.map(q));var Y,X=0;if("right"===l){t-=H[0],e=[],I=a.length;for(var J=0;J<I;J++)0===J?(Y=Ht(t),K=Qt(n)):(Y=P(X-H[J]),K=-Q),e.push([a[J],Y,K]),X=H[J]}else if("center"===l){t-=H[0]/2,e=[],I=a.length;for(var Z=0;Z<I;Z++)0===Z?(Y=Ht(t),K=Qt(n)):(Y=P((X-H[Z])/2),K=-Q),e.push([a[Z],Y,K]),X=H[Z]}else if("left"===l){e=[],I=a.length;for(var ee=0;ee<I;ee++)e.push(a[ee])}else if("justify"===l&&"Identity-H"===W.encoding){e=[],I=a.length,u=0!==u?u:V;for(var ne=0,re=0;re<I;re++)if(K=0===re?Qt(n):-Q,Y=0===re?Ht(t):ne,re<I-1){var oe=P((u-H[re])/(a[re].split(" ").length-1)),ae=a[re].split(" ");e.push([ae[0]+" ",Y,K]),ne=0;for(var se=1;se<ae.length;se++){var le=(q(ae[se-1]+" "+ae[se])-q(ae[se]))*x+oe;se==ae.length-1?e.push([ae[se],le,0]):e.push([ae[se]+" ",le,0]),ne-=le}}else e.push([a[re],Y,K]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],I=a.length,u=0!==u?u:V,re=0;re<I;re++)K=0===re?Qt(n):-Q,Y=0===re?Ht(t):0,re<I-1?G.push(S(P((u-H[re])/(a[re].split(" ").length-1)))):G.push(0),e.push([a[re],Y,K])}}!0===("boolean"==typeof r.R2L?r.R2L:ie)&&(e=E(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),o={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:de,fonts:me,activeFontSize:te}},_e.publish("postProcessText",o),e=o.text,g=o.mutex.isHex||!1;var ce=me[de].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=E(e,(function(e,t,n){return[C(e),t,n]}))),a=_(e),e=[];for(var ue,he,pe,Ae=Array.isArray(a[0])?1:0,fe="",ge=function(e,t,n){var i="";return n instanceof De?(n="number"==typeof r.angle?Fe(n,new De(1,0,0,1,e,t)):Fe(new De(1,0,0,1,e,t),n),b===y&&(n=Fe(new De(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=S(e)+" "+S(t)+" Td\n",i},ve=0;ve<a.length;ve++){switch(fe="",Ae){case 1:pe=(g?"<":"(")+a[ve][0]+(g?">":")"),ue=parseFloat(a[ve][1]),he=parseFloat(a[ve][2]);break;case 0:pe=(g?"<":"(")+a[ve]+(g?">":")"),ue=Ht(t),he=Qt(n)}void 0!==G&&void 0!==G[ve]&&(fe=G[ve]+" Tw\n"),0===ve?e.push(fe+ge(ue,he,A)+pe):0===Ae?e.push(fe+pe):1===Ae&&e.push(fe+ge(ue,he,A)+pe)}e=0===Ae?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ye="BT\n/";return ye+=de+" "+te+" Tf\n",ye+=S(te*w)+" TL\n",ye+=Kt+"\n",ye+=v,ye+=e,$(ye+="ET"),h[de]=!0,f};var xt=p.__private__.clip=p.clip=function(e){return $("evenodd"===e?"W*":"W"),this};p.clipEvenOdd=function(){return xt("evenodd")},p.__private__.discardPath=p.discardPath=function(){return $("n"),this};var Ct=p.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(e){return Ct(e)&&(c=e),this};var St=p.__private__.getStyle=p.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Bt=p.close=function(){return $("h"),this};p.stroke=function(){return $("S"),this},p.fill=function(e){return _t("f",e),this},p.fillEvenOdd=function(e){return _t("f*",e),this},p.fillStroke=function(e){return _t("B",e),this},p.fillStrokeEvenOdd=function(e){return _t("B*",e),this};var _t=function(e,t){"object"===_Se(t)?Pt(t,e):$(e)},Et=function(e){null===e||b===y&&void 0===e||(e=St(e),$(e))};function Mt(e,t,n,r,i){var o=new $Be(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);o.stream=this.stream;var a=e+"$$"+this.cloneIndex+++"$$";return ke(a,o),o}var Pt=function(e,t){var n=be[e.key],r=ye[n];if(r instanceof XBe)$("q"),$(Tt(t)),r.gState&&p.setGState(r.gState),$(e.matrix.toString()+" cm"),$("/"+n+" sh"),$("Q");else if(r instanceof $Be){var i=new De(1,0,0,-1,0,cn());e.matrix&&(i=i.multiply(e.matrix||Ie),n=Mt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,i).id),$("q"),$("/Pattern cs"),$("/"+n+" scn"),r.gState&&p.setGState(r.gState),$(t),$("Q")}},Tt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Dt=p.moveTo=function(e,t){return $(S(P(e))+" "+S(T(t))+" m"),this},Ft=p.lineTo=function(e,t){return $(S(P(e))+" "+S(T(t))+" l"),this},It=p.curveTo=function(e,t,n,r,i,o){return $([S(P(e)),S(T(t)),S(P(n)),S(T(r)),S(P(i)),S(T(o)),"c"].join(" ")),this};p.__private__.line=p.line=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ct(i))throw new Error("Invalid arguments passed to jsPDF.line");return b===v?this.lines([[n-e,r-t]],e,t,[1,1],i||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},p.__private__.lines=p.lines=function(e,t,n,r,i,o){var a,s,l,c,u,d,h,p,A,f,m,g;if("number"==typeof e&&(g=n,n=t,t=e,e=g),r=r||[1,1],o=o||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Ct(i)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(Dt(t,n),a=r[0],s=r[1],c=e.length,f=t,m=n,l=0;l<c;l++)2===(u=e[l]).length?(f=u[0]*a+f,m=u[1]*s+m,Ft(f,m)):(d=u[0]*a+f,h=u[1]*s+m,p=u[2]*a+f,A=u[3]*s+m,f=u[4]*a+f,m=u[5]*s+m,It(d,h,p,A,f,m));return o&&Bt(),Et(i),this},p.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Dt(r[0],r[1]);break;case"l":Ft(r[0],r[1]);break;case"c":It.apply(this,r);break;case"h":Bt()}}return this},p.__private__.rect=p.rect=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ct(i))throw new Error("Invalid arguments passed to jsPDF.rect");return b===v&&(r=-r),$([S(P(e)),S(T(t)),S(P(n)),S(P(r)),"re"].join(" ")),Et(i),this},p.__private__.triangle=p.triangle=function(e,t,n,r,i,o,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!Ct(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[i-n,o-r],[e-i,t-o]],e,t,[1,1],a,!0),this},p.__private__.roundedRect=p.roundedRect=function(e,t,n,r,i,o,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!Ct(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),o=Math.min(o,.5*r),this.lines([[n-2*i,0],[i*s,0,i,o-o*s,i,o],[0,r-2*o],[0,o*s,-i*s,o,-i,o],[2*i-n,0],[-i*s,0,-i,-o*s,-i,-o],[0,2*o-r],[0,-o*s,i*s,-o,i,-o]],e+i,t,[1,1],a,!0),this},p.__private__.ellipse=p.ellipse=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ct(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return Dt(e+n,t),It(e+n,t-a,e+o,t-r,e,t-r),It(e-o,t-r,e-n,t-a,e-n,t),It(e-n,t+a,e-o,t+r,e,t+r),It(e+o,t+r,e+n,t+a,e+n,t),Et(i),this},p.__private__.circle=p.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Ct(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},p.setFont=function(e,t,n){return n&&(t=C(t,n)),de=lt(e,t,{disableWarning:!1}),this};var kt=p.__private__.getFont=p.getFont=function(){return me[lt.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var e,t,n={};for(e in ge)if(ge.hasOwnProperty(e))for(t in n[e]=[],ge[e])ge[e].hasOwnProperty(t)&&n[e].push(t);return n},p.addFont=function(e,t,n,r,i){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(n=C(n,r)),tt.call(this,e,t,n,i=i||"Identity-H")};var Ot,Lt=e.lineWidth||.200025,Rt=p.__private__.getLineWidth=p.getLineWidth=function(){return Lt},Ut=p.__private__.setLineWidth=p.setLineWidth=function(e){return Lt=e,$(S(P(e))+" w"),this};p.__private__.setLineDash=JBe.API.setLineDash=JBe.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return S(P(e))})).join(" "),t=S(P(t)),$("["+e+"] "+t+" d"),this};var zt=p.__private__.getLineHeight=p.getLineHeight=function(){return te*Ot};p.__private__.getLineHeight=p.getLineHeight=function(){return te*Ot};var Nt=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Ot=e),this},jt=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ot};Nt(e.lineHeight);var Ht=p.__private__.getHorizontalCoordinate=function(e){return P(e)},Qt=p.__private__.getVerticalCoordinate=function(e){return b===y?e:Be[z].mediaBox.topRightY-Be[z].mediaBox.bottomLeftY-P(e)},Vt=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(e){return S(Ht(e))},Wt=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(e){return S(Qt(e))},Gt=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return je(Gt)},p.__private__.setStrokeColor=p.setDrawColor=function(e,t,n,r){return Gt=He({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),$(Gt),this};var qt=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return je(qt)},p.__private__.setFillColor=p.setFillColor=function(e,t,n,r){return qt=He({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),$(qt),this};var Kt=e.textColor||"0 g",Yt=p.__private__.getTextColor=p.getTextColor=function(){return je(Kt)};p.__private__.setTextColor=p.setTextColor=function(e,t,n,r){return Kt=He({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Xt=e.charSpace,$t=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Xt||0)};p.__private__.setCharSpace=p.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xt=e,this};var Jt=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Jt=t,$(t+" J"),this};var Zt=0;p.__private__.setLineJoin=p.setLineJoin=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,$(t+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(S(P(e))+" M"),this},p.GState=KBe,p.setGState=function(e){(e="string"==typeof e?we[xe[e]]:en(null,e)).equals(Ce)||($("/"+e.id+" gs"),Ce=e)};var en=function(e,t){if(!e||!xe[e]){var n=!1;for(var r in we)if(we.hasOwnProperty(r)&&we[r].equals(t)){n=!0;break}if(n)t=we[r];else{var i="GS"+(Object.keys(we).length+1).toString(10);we[i]=t,t.id=i}return e&&(xe[e]=t.id),_e.publish("addGState",t),t}};p.addGState=function(e,t){return en(e,t),this},p.saveGraphicsState=function(){return $("q"),ve.push({key:de,size:te,color:Kt}),this},p.restoreGraphicsState=function(){$("Q");var e=ve.pop();return de=e.key,te=e.size,Kt=e.color,Ce=null,this},p.setCurrentTransformationMatrix=function(e){return $(e.toString()+" cm"),this},p.comment=function(e){return $("#"+e),this};var tn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},nn=function(e,t,n,r){tn.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var o=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}}),this},rn=function(){this.page=Se,this.currentPage=z,this.pages=q.slice(0),this.pagesContext=Be.slice(0),this.x=pe,this.y=Ae,this.matrix=fe,this.width=sn(z),this.height=cn(z),this.outputDestination=Y,this.id="",this.objectNumber=-1};rn.prototype.restore=function(){Se=this.page,z=this.currentPage,Be=this.pagesContext,q=this.pages,pe=this.x,Ae=this.y,fe=this.matrix,ln(z,this.width),un(z,this.height),Y=this.outputDestination};var on=function(e,t,n,r,i){Te.push(new rn),Se=z=0,q=[],pe=e,Ae=t,fe=i,rt([n,r])};for(var an in p.beginFormObject=function(e,t,n,r,i){return on(e,t,n,r,i),this},p.endFormObject=function(e){return function(e){if(Pe[e])Te.pop().restore();else{var t=new rn,n="Xo"+(Object.keys(Me).length+1).toString(10);t.id=n,Pe[e]=n,Me[n]=t,_e.publish("addFormObject",t),Te.pop().restore()}}(e),this},p.doFormObject=function(e,t){var n=Me[Pe[e]];return $("q"),$(t.toString()+" cm"),$("/"+n.id+" Do"),$("Q"),this},p.getFormObject=function(e){var t=Me[Pe[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},p.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(EBe(ft(At()),e),"function"==typeof EBe.unload&&yBe.setTimeout&&setTimeout(EBe.unload,911),this):new Promise((function(t,n){try{var r=EBe(ft(At()),e);"function"==typeof EBe.unload&&yBe.setTimeout&&setTimeout(EBe.unload,911),t(r)}catch(i){n(i.message)}}))},JBe.API)JBe.API.hasOwnProperty(an)&&("events"===an&&JBe.API.events.length?function(e,t){var n,r,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],r=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(_e,JBe.API.events):p[an]=JBe.API[an]);var sn=p.getPageWidth=function(e){return(Be[e=e||z].mediaBox.topRightX-Be[e].mediaBox.bottomLeftX)/he},ln=p.setPageWidth=function(e,t){Be[e].mediaBox.topRightX=t*he+Be[e].mediaBox.bottomLeftX},cn=p.getPageHeight=function(e){return(Be[e=e||z].mediaBox.topRightY-Be[e].mediaBox.bottomLeftY)/he},un=p.setPageHeight=function(e,t){Be[e].mediaBox.topRightY=t*he+Be[e].mediaBox.bottomLeftY};return p.internal={pdfEscape:nt,getStyle:St,getFont:kt,getFontSize:re,getCharSpace:$t,getTextColor:Yt,getLineHeight:zt,getLineHeightFactor:jt,getLineWidth:Rt,write:J,getHorizontalCoordinate:Ht,getVerticalCoordinate:Qt,getCoordinateString:Vt,getVerticalCoordinateString:Wt,collections:{},newObject:Oe,newAdditionalObject:Ue,newObjectDeferred:Le,newObjectDeferredBegin:Re,getFilters:Qe,putStream:Ve,events:_e,scaleFactor:he,pageSize:{getWidth:function(){return sn(z)},setWidth:function(e){ln(z,e)},getHeight:function(){return cn(z)},setHeight:function(e){un(z,e)}},encryptionOptions:u,encryption:vt,getEncryptor:function(e){return null!==u?vt.encryptor(e,0):function(e){return e}},output:mt,getNumberOfPages:st,pages:q,out:$,f2:E,f3:M,getPageInfo:yt,getPageInfoByObjId:bt,getCurrentPageInfo:wt,getPDFVersion:f,Point:tn,Rectangle:nn,Matrix:De,hasHotfix:gt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return sn(z)},set:function(e){ln(z,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return cn(z)},set:function(e){un(z,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var r=tt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===d&&(h[r]=!0);var i=e[t][0].split("-");et({id:r,fontName:i[0],fontStyle:i[1]||""})}_e.publish("addFonts",{fonts:me,dictionary:ge})}.call(p,ee),de="F1",it(i,n),_e.publish("initialized"),p}WBe.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},WBe.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},WBe.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},WBe.prototype.processOwnerPassword=function(e,t){return QBe(NBe(t).substr(0,5),e)},WBe.prototype.encryptor=function(e,t){var n=NBe(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return QBe(n,e)}},KBe.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||_Se(e)!==_Se(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},JBe.API={events:[]},JBe.version="2.5.2";var ZBe=JBe.API,e_e=1,t_e=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},n_e=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},r_e=function(e){return e.toFixed(2)},i_e=function(e){return e.toFixed(5)};ZBe.__acroform__={};var o_e=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},a_e=function(e){return e*e_e},s_e=function(e){var t=new S_e,n=U_e.internal.getHeight(e)||0,r=U_e.internal.getWidth(e)||0;return t.BBox=[0,0,Number(r_e(r)),Number(r_e(n))],t},l_e=ZBe.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},c_e=ZBe.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},u_e=ZBe.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},d_e=ZBe.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return u_e(e,t-1)},h_e=ZBe.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return l_e(e,t-1)},p_e=ZBe.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return c_e(e,t-1)},A_e=ZBe.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],o=e[1],a=e[2],s=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+s)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(o)||0,[Number(r_e(l.lowerLeft_X)),Number(r_e(l.lowerLeft_Y)),Number(r_e(l.upperRight_X)),Number(r_e(l.upperRight_Y))]},f_e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=m_e(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+r_e(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=s_e(e);return o.scope=e.scope,o.stream=t.join("\n"),o}},m_e=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map((function(e){return e.split("\n")})):i.map((function(e){return[e]}));var o=n,a=U_e.internal.getHeight(e)||0;a=a<0?-a:a;var s=U_e.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(t,n,r){if(t+1<i.length){var o=n+" "+i[t+1][0];return g_e(o,e,r).width<=s-4}return!1};o++;e:for(;o>0;){t="",o--;var c,u,d=g_e("3",e,o).height,h=e.multiline?a-o:(a-d)/2,p=h+=2,A=0,f=0,m=0;if(o<=0){t="(...) Tj\n",t+="% Width of Text: "+g_e(t,e,o=12).width+", FieldWidth:"+s+"\n";break}for(var g="",v=0,y=0;y<i.length;y++)if(i.hasOwnProperty(y)){var b=!1;if(1!==i[y].length&&m!==i[y].length-1){if((d+2)*(v+2)+2>a)continue e;g+=i[y][m],b=!0,f=y,y--}else{g=" "==(g+=i[y][m]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var w=parseInt(y),x=l(w,g,o),C=y>=i.length-1;if(x&&!C){g+=" ",m=0;continue}if(x||C){if(C)f=w;else if(e.multiline&&(d+2)*(v+2)+2>a)continue e}else{if(!e.multiline)continue e;if((d+2)*(v+2)+2>a)continue e;f=w}}for(var S="",B=A;B<=f;B++){var _=i[B];if(e.multiline){if(B===f){S+=_[m]+" ",m=(m+1)%_.length;continue}if(B===A){S+=_[_.length-1]+" ";continue}}S+=_[0]+" "}switch(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,u=g_e(S,e,o).width,e.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;default:c=2}t+=r_e(c)+" "+r_e(p)+" Td\n",t+="("+t_e(S)+") Tj\n",t+=-r_e(c)+" 0 Td\n",p=-(o+2),u=0,A=b?f:f+1,v++,g=""}break}return r.text=t,r.fontSize=o,r},g_e=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},v_e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},y_e=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===n.type&&e.object===n.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},b_e=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(__e.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(v_e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");e_e=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new B_e,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){!function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}(e)})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&y_e(r,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var i=e[r],o=[],a=i.Rect;if(i.Rect&&(i.Rect=A_e(i.Rect,t)),t.internal.newObjectDeferredBegin(i.objId,!0),i.DA=U_e.createDefaultAppearanceStream(i),"object"===_Se(i)&&"function"==typeof i.getKeyValueListForStream&&(o=i.getKeyValueListForStream()),i.Rect=a,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=f_e(i);o.push({key:"AP",value:"<</N "+s+">>"}),t.internal.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){var l="";for(var c in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(c)){var u=i.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var r in u)if(u.hasOwnProperty(r)){var d=u[r];"function"==typeof d&&(d=d.call(t,i)),l+="/"+r+" "+d+" ",t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=u)&&(d=d.call(t,i)),l+="/"+r+" "+d,t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d);l+=">>"}o.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:o,objectId:i.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),"object"===_Se(i)&&"function"==typeof i.putStream&&i.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}},w_e=ZBe.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(0!==o&&(i+=" "),_Se(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":"/"!==e[o].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),i+="("+t_e(r(e[o].toString()))+")"):i+=e[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},x_e=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+t_e(r(e))+")"},C_e=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};C_e.prototype.toString=function(){return this.objId+" 0 R"},C_e.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},C_e.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:w_e(i,this.objId,this.scope)}):i instanceof C_e?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:r,value:i}))}return e};var S_e=function(){C_e.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};o_e(S_e,C_e);var B_e=function(){C_e.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+t_e(t(e))+")"}},set:function(t){e=t}})};o_e(B_e,C_e);var __e=function e(){C_e.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(t,3))},set:function(e){!0===Boolean(e)?this.F=h_e(t,3):this.F=p_e(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof k_e)return;o="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+t_e(t(o))+")"},set:function(e){o=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/e_e:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof k_e||this instanceof L_e))return x_e(d,this.objId,this.scope)},set:function(e){e=e.toString(),d=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof D_e==0?x_e(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof D_e==0?"("===e.substr(0,1)?n_e(e.substr(1,e.length-2)):n_e(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof D_e==1?n_e(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof D_e==1?"/"+e:e}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof D_e==0?x_e(p,this.objId,this.scope):p},set:function(e){e=e.toString(),p=this instanceof D_e==0?"("===e.substr(0,1)?n_e(e.substr(1,e.length-2)):n_e(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof D_e==1?n_e(p.substr(1,p.length-1)):p},set:function(e){e=e.toString(),p=this instanceof D_e==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(e){A=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,1):this.Ff=p_e(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,2):this.Ff=p_e(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,3):this.Ff=p_e(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');m=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(m){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};o_e(__e,C_e);var E_e=function(){__e.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return w_e(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,i=[];r=t.exec(e);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,18):this.Ff=p_e(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=h_e(this.Ff,19):this.Ff=p_e(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=h_e(this.Ff,20),t.sort()):this.Ff=p_e(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,22):this.Ff=p_e(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,23):this.Ff=p_e(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,27):this.Ff=p_e(this.Ff,27)}}),this.hasAppearanceStream=!1};o_e(E_e,__e);var M_e=function(){E_e.call(this),this.fontName="helvetica",this.combo=!1};o_e(M_e,E_e);var P_e=function(){M_e.call(this),this.combo=!0};o_e(P_e,M_e);var T_e=function(){P_e.call(this),this.edit=!0};o_e(T_e,P_e);var D_e=function(){__e.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,15):this.Ff=p_e(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,16):this.Ff=p_e(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,17):this.Ff=p_e(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,26):this.Ff=p_e(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+t_e(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===_Se(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};o_e(D_e,__e);var F_e=function(){D_e.call(this),this.pushButton=!0};o_e(F_e,D_e);var I_e=function(){D_e.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};o_e(I_e,D_e);var k_e=function(){var e,t;__e.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+t_e(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===_Se(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=U_e.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};o_e(k_e,__e),I_e.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},I_e.prototype.createOption=function(e){var t=new k_e;return t.Parent=this,t.optionName=e,this.Kids.push(t),z_e.call(this.scope,t),t};var O_e=function(){D_e.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=U_e.CheckBox.createAppearanceStream()};o_e(O_e,D_e);var L_e=function(){__e.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,13):this.Ff=p_e(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,21):this.Ff=p_e(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,23):this.Ff=p_e(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,24):this.Ff=p_e(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,25):this.Ff=p_e(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,26):this.Ff=p_e(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};o_e(L_e,__e);var R_e=function(){L_e.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(d_e(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=h_e(this.Ff,14):this.Ff=p_e(this.Ff,14)}}),this.password=!0};o_e(R_e,L_e);var U_e={CheckBox:{createAppearanceStream:function(){return{N:{On:U_e.CheckBox.YesNormal},D:{On:U_e.CheckBox.YesPushDown,Off:U_e.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=s_e(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=m_e(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+r_e(U_e.internal.getWidth(e))+" "+r_e(U_e.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+r_e(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=s_e(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],o=U_e.internal.getHeight(e),a=U_e.internal.getWidth(e),s=m_e(e,e.caption);return i.push("1 g"),i.push("0 0 "+r_e(a)+" "+r_e(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+r_e(a-1)+" "+r_e(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+r_e(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=s_e(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+r_e(U_e.internal.getWidth(e))+" "+r_e(U_e.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:U_e.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=U_e.RadioButton.Circle.YesNormal,t.D[e]=U_e.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=s_e(e);t.scope=e.scope;var n=[],r=U_e.internal.getWidth(e)<=U_e.internal.getHeight(e)?U_e.internal.getWidth(e)/4:U_e.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=U_e.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+i_e(U_e.internal.getWidth(e)/2)+" "+i_e(U_e.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=s_e(e);t.scope=e.scope;var n=[],r=U_e.internal.getWidth(e)<=U_e.internal.getHeight(e)?U_e.internal.getWidth(e)/4:U_e.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*U_e.internal.Bezier_C).toFixed(5)),a=Number((r*U_e.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+i_e(U_e.internal.getWidth(e)/2)+" "+i_e(U_e.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+i_e(U_e.internal.getWidth(e)/2)+" "+i_e(U_e.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=s_e(e);t.scope=e.scope;var n=[],r=U_e.internal.getWidth(e)<=U_e.internal.getHeight(e)?U_e.internal.getWidth(e)/4:U_e.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*U_e.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+i_e(U_e.internal.getWidth(e)/2)+" "+i_e(U_e.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:U_e.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=U_e.RadioButton.Cross.YesNormal,t.D[e]=U_e.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=s_e(e);t.scope=e.scope;var n=[],r=U_e.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+r_e(U_e.internal.getWidth(e)-2)+" "+r_e(U_e.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(r_e(r.x1.x)+" "+r_e(r.x1.y)+" m"),n.push(r_e(r.x2.x)+" "+r_e(r.x2.y)+" l"),n.push(r_e(r.x4.x)+" "+r_e(r.x4.y)+" m"),n.push(r_e(r.x3.x)+" "+r_e(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=s_e(e);t.scope=e.scope;var n=U_e.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+r_e(U_e.internal.getWidth(e))+" "+r_e(U_e.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+r_e(U_e.internal.getWidth(e)-2)+" "+r_e(U_e.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(r_e(n.x1.x)+" "+r_e(n.x1.y)+" m"),r.push(r_e(n.x2.x)+" "+r_e(n.x2.y)+" l"),r.push(r_e(n.x4.x)+" "+r_e(n.x4.y)+" m"),r.push(r_e(n.x3.x)+" "+r_e(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=s_e(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+r_e(U_e.internal.getWidth(e))+" "+r_e(U_e.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};U_e.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=U_e.internal.getWidth(e),n=U_e.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},U_e.internal.getWidth=function(e){var t=0;return"object"===_Se(e)&&(t=a_e(e.Rect[2])),t},U_e.internal.getHeight=function(e){var t=0;return"object"===_Se(e)&&(t=a_e(e.Rect[3])),t};var z_e=ZBe.addField=function(e){if(b_e(this,e),!(e instanceof __e))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ZBe.AcroFormChoiceField=E_e,ZBe.AcroFormListBox=M_e,ZBe.AcroFormComboBox=P_e,ZBe.AcroFormEditBox=T_e,ZBe.AcroFormButton=D_e,ZBe.AcroFormPushButton=F_e,ZBe.AcroFormRadioButton=I_e,ZBe.AcroFormCheckBox=O_e,ZBe.AcroFormTextField=L_e,ZBe.AcroFormPasswordField=R_e,ZBe.AcroFormAppearance=U_e,ZBe.AcroForm={ChoiceField:E_e,ListBox:M_e,ComboBox:P_e,EditBox:T_e,Button:D_e,PushButton:F_e,RadioButton:I_e,CheckBox:O_e,TextField:L_e,PasswordField:R_e,Appearance:U_e},JBe.AcroForm={ChoiceField:E_e,ListBox:M_e,ComboBox:P_e,EditBox:T_e,Button:D_e,PushButton:F_e,RadioButton:I_e,CheckBox:O_e,TextField:L_e,PasswordField:R_e,Appearance:U_e};var N_e=JBe.AcroForm;function j_e(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,r){var i,o,a,s,l,c=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(x(e))for(l in n)for(a=n[l],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==e[o]){s=!1;break}if(!0===s){c=l;break}}else for(l in n)for(a=n[l],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==e.charCodeAt(o)){s=!1;break}if(!0===s){c=l;break}}return c===t&&r!==t&&(c=r),c},i=function e(t){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:t.width}),o.push({key:"Height",value:t.height}),t.colorSpace===m.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===m.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var a="",s=0,l=t.transparency.length;s<l;s++)a+=t.transparency[s]+" "+t.transparency[s]+" ";o.push({key:"Mask",value:"["+a+"]"})}void 0!==t.sMask&&o.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:o,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,d={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(d.filter=t.filter),e.call(this,d)}if(t.colorSpace===m.INDEXED){var h=this.internal.newObject();r({data:S(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},o=function(){var e=this.internal.collections.addImage_images;for(var t in e)i.call(this,e[t])},a=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var e=this.internal.collections.addImage_images;return s.call(this),e},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===_Se(e)&&1===e.nodeType},h=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return BBe(unescape(r).split("base64,").pop());var i=e.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;default:o="image/jpeg"}return BBe(t.toDataURL(o,1).split("base64,").pop())}},p=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},A=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},f=function(e,t,n,r,i,o){var a=A.call(this,n,r,i),s=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=l.call(this);if(n=a[0],r=a[1],u[i.index]=i,o){o*=Math.PI/180;var d=Math.cos(o),h=Math.sin(o),p=function(e){return e.toFixed(4)},f=[p(d),p(h),p(-1*h),p(d),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,s(e),c(t+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([s(n),"0","0",s(r),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(r),s(e),c(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},m=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(x(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},y=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},b=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:t[1]})}return n},w=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return w()&&e instanceof ArrayBuffer};var x=e.__addimage__.isArrayBufferView=function(e){return w()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},C=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},S=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=x(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,r,i,o,a,l,c,u;if("number"==typeof arguments[1]?(n=t,r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],l=arguments[5],c=arguments[6],u=arguments[7]):(n=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],a=arguments[5],l=arguments[6],c=arguments[7],u=arguments[8]),"object"===_Se(e=arguments[0])&&!d(e)&&"imageData"in e){var h=e;e=h.imageData,n=h.format||n||t,r=h.x||r||0,i=h.y||i||0,o=h.w||h.width||o,a=h.h||h.height||a,l=h.alias||l,c=h.compression||c,u=h.rotation||h.angle||u}var p=this.internal.getFilters();if(void 0===c&&-1!==p.indexOf("FlateEncode")&&(c="SLOW"),isNaN(r)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var A=B.call(this,e,n,l,c);return f.call(this,r,i,o,a,A,u),this};var B=function(n,i,o,a){var s,l,A,f;if("string"==typeof n&&r(n)===t){n=unescape(n);var m=_(n,!1);(""!==m||void 0!==(m=e.loadFile(n,!0)))&&(n=m)}if(d(n)&&(n=h(n,i)),i=r(n,i),!u(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(A=o)||0===A.length)&&(o="string"==typeof(f=n)||x(f)?v(f):x(f.data)?v(f.data):null),(s=p.call(this,o))||(w()&&(n instanceof Uint8Array||"RGBA"===i||(l=n,n=C(n))),s=this["process"+i.toUpperCase()](n,c.call(this),o,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:g.NONE}(a),l)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},_=e.__addimage__.convertBase64ToBinaryString=function(e,t){var n;t="boolean"!=typeof t||t;var r,i="";if("string"==typeof e){r=null!==(n=b(e))?n.data:e;try{i=BBe(r)}catch(o){if(t)throw y(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+o.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};e.getImageProperties=function(n){var i,o,a="";if(d(n)&&(n=h(n)),"string"==typeof n&&r(n)===t&&(""===(a=_(n,!1))&&(a=e.loadFile(n)||""),n=a),o=r(n),!u(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!w()||n instanceof Uint8Array||(n=C(n)),!(i=this["process"+o.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=o,i}}(JBe.API),
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};JBe.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,i,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var d=0;d<l.length;d++){n=l[d];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(A.objId),g=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+h(m(n.contents))+")",i+=" /Popup "+f.objId+" 0 R",i+=" /P "+s.objId+" 0 R",i+=" /T ("+h(m(g))+") >>",A.content=i;var v=A.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(i+=" /Open true"),i+=" >>",f.content=i,this.internal.write(A.objId,"0 R",f.objId,"0 R");break;case"freetext":r="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var y=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+h(p(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+y+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var b=this.annotations._nameMap[n.options.name];n.options.pageNumber=b.page,n.options.top=b.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var w=a(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+w+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,i){var o=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:a(e),y:s(t),w:a(e+n),h:s(t+r)},options:i,type:"link"})},e.textWithLink=function(e,t,n,r){var i,o,a=this.getTextWidth(e),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){o=r.maxWidth;var l=this.splitTextToSize(e,o).length;i=Math.ceil(s*l)}else o=a,i=s;return this.text(e,t,n,r),n+=.2*s,"center"===r.align&&(t-=a/2),"right"===r.align&&(t-=a),this.link(t,n-s,o,i,r),a},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(JBe.API),
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},a=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},s=e.__arabicParser__.isArabicEndLetter=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return a(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return a(e)&&o(e)&&4==t[e.charCodeAt(0)].length},d=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,i="",o=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(o++,"number"==typeof(r=r[e.charCodeAt(t)])&&(i+=String.fromCharCode(r),r=n,o=0),t===e.length-1&&(r=n,i+=e.charAt(t-(o-1)),t-=o-1,o=0)):(r=n,i+=e.charAt(t-o),t-=o,o=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return a(e)?!1===o(e)?-1:!c(e)||!a(t)&&!a(n)||!a(n)&&s(t)||s(e)&&!a(t)||s(e)&&l(t)||s(e)&&s(t)?0:u(e)&&a(t)&&!s(t)&&a(n)&&c(n)?3:s(e)||!a(n)?1:2:-1},p=function(e){var n=0,r=0,i=0,o="",s="",l="",c=(e=e||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),r=0;r<c[n].length;r+=1)o=c[n][r],s=c[n][r-1],l=c[n][r+1],a(o)?(i=h(o,s,l),u[n]+=-1!==i?String.fromCharCode(t[o.charCodeAt(0)][i]):o):u[n]+=o;u[n]=d(u[n])}return u.join(" ")},A=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([p(t[r][0]),t[r][1],t[r][2]]):n.push([p(t[r])]);e=n}else e=p(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",A])}(JBe.API),JBe.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}));return this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(JBe.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(e){o=e}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(e){a=e}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),i=t.font||this.getFont(),o=t.scaleFactor||this.internal.scaleFactor,a=0,s=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(c.splitTextToSize(t,u))}),[])):e=Array.isArray(e)?e:[e];for(var d=0;d<e.length;d++)a<(l=this.getStringUnitWidth(e[d],{font:i})*n)&&(a=l);return 0!==a&&(s=e.length),{w:a/=o,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var e;e=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===e.lineNumber?(e.x=(i.x||0)+(i.width||0),e.y=i.y||0):i.y+i.height+e.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=s.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=i.y+i.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-a,e.y+a,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+a,{align:"center",baseline:"top",maxWidth:e.width-a-a}):this.text(e.text,e.x+a,e.y+a,{align:"left",baseline:"top",maxWidth:e.width-a-a})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,c,u){if(r.call(this),!l)throw new Error("No data for PDF table.");var d,h,p,A,f=[],m=[],g=[],v={},y={},b=[],w=[],x=(u=u||{}).autoSize||!1,C=!1!==u.printHeaders,S=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,B=u.margins||Object.assign({width:this.getPageWidth()},t),_="number"==typeof u.padding?u.padding:3,E=u.headerBackgroundColor||"#c8c8c8",M=u.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=S,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=M,this.setFontSize(S),null==c)m=f=Object.keys(l[0]),g=f.map((function(){return"left"}));else if(Array.isArray(c)&&"object"===_Se(c[0]))for(f=c.map((function(e){return e.name})),m=c.map((function(e){return e.prompt||e.name||""})),g=c.map((function(e){return e.align||"left"})),d=0;d<c.length;d+=1)y[c[d].name]=c[d].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(m=f=c,g=f.map((function(){return"left"})));if(x||Array.isArray(c)&&"string"==typeof c[0])for(d=0;d<f.length;d+=1){for(v[A=f[d]]=l.map((function(e){return e[A]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(m[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=v[A],this.setFont(void 0,"normal"),p=0;p<h.length;p+=1)b.push(this.getTextDimensions(h[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[A]=Math.max.apply(null,b)+_+_,b=[]}if(C){var P={};for(d=0;d<f.length;d+=1)P[f[d]]={},P[f[d]].text=m[d],P[f[d]].align=g[d];var T=s.call(this,P,y);w=f.map((function(t){return new o(e,n,y[t],T,P[t].text,void 0,P[t].align)})),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var D=c.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(d=0;d<l.length;d+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:d,data:l[d]},this);var F=s.call(this,l[d],y);for(p=0;p<f.length;p+=1){var I=l[d][f[p]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:d,col:p,data:I},this),a.call(this,new o(e,n,y[f[p]],F,I,d+2,D[f[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var s=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map((function(r){var i=e[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[r]-n-n)}),this).map((function(e){return this.getLineHeightFactor()*e.length*r/i+n+n}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){i=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,i),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(JBe.API);var H_e={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Q_e=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],V_e=j_e(Q_e),W_e=[100,200,300,400,500,600,700,800,900],G_e=j_e(W_e);function q_e(e){var t,n=e.family.replace(/"|'/g,"").toLowerCase(),r=(t=e.style,H_e[t=t||"normal"]?t:"normal"),i=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),o=function(e){return"number"==typeof V_e[e=e||"normal"]?e:"normal"}(e.stretch);return{family:n,style:r,weight:i,stretch:o,src:e.src||[],ref:e.ref||{name:n,style:[o,r,i].join(" ")}}}function K_e(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var Y_e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},X_e={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $_e(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function J_e(e){return e.trimLeft()}function Z_e(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function eEe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var tEe,nEe,rEe,iEe=["times"];!function(e){var t,n,r,i,o,a,s,l,c,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new a,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new a,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(e){isNaN(e)||(o=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(e){a=e}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof u&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var d=[];Object.defineProperty(this,"ctxStack",{get:function(){return d},set:function(e){d=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var p=null;var A=null;Object.defineProperty(this,"fontFaces",{get:function(){return A},set:function(e){p=null,A=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],r=(t[2],t[3]),i=t[4],o=(t[5],t[6]),a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===a?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(e){var t,n,r=[],i=e.trim();if(""===i)return iEe;if(i in X_e)return[X_e[i]];for(;""!==i;){switch(n=null,t=(i=J_e(i)).charAt(0)){case'"':case"'":n=Z_e(i.substring(1),t);break;default:n=eEe(i)}if(null===n)return iEe;if(r.push(n[0]),""!==(i=J_e(n[1]))&&","!==i.charAt(0))return iEe;i=i.replace(/^,/,"")}return r}(o);if(this.fontFaces){var l=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Y_e,n.genericFontFamilies||{}),o=null,a=null,s=0;s<t.length;++s)if(i[(o=q_e(t[s])).family]&&(o.family=i[o.family]),e.hasOwnProperty(o.family)){a=e[o.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+$_e(o)+"' and default family '"+r+"'.");if(a=function(e,t){if(t[e])return t[e];var n=V_e[e],r=n<=V_e.normal?-1:1,i=K_e(t,Q_e,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(o.stretch,a),a=function(e,t){if(t[e])return t[e];for(var n=H_e[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(o.style,a),!(a=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=G_e[e],r=K_e(t,W_e,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+$_e(o)+"'.");return a}(function(e,t){if(null===p){var n=(r=e.getFontList(),i=[],Object.keys(r).forEach((function(e){r[e].forEach((function(t){var n=null;switch(t){case"bold":n={family:e,weight:"bold"};break;case"italic":n={family:e,style:"italic"};break;case"bolditalic":n={family:e,weight:"bold",style:"italic"};break;case"":case"normal":n={family:e}}null!==n&&(n.ref={name:e,style:t},i.push(n))}))})),i);p=function(e){for(var t={},n=0;n<e.length;++n){var r=q_e(e[n]),i=r.family,o=r.stretch,a=r.style,s=r.weight;t[i]=t[i]||{},t[i][o]=t[i][o]||{},t[i][o][a]=t[i][o][a]||{},t[i][o][a][s]=r}return t}(n.concat(t))}var r,i;return p}(this.pdf,this.fontFaces),s.map((function(e){return{family:e,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var u="",d={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<s.length;h++){if(void 0!==this.pdf.internal.getFont(s[h],c,{noFallback:!0,disableWarning:!0})){u=s[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(s[h],"bold",{noFallback:!0,disableWarning:!0}))u=s[h],c="bold";else if(void 0!==this.pdf.internal.getFont(s[h],"normal",{noFallback:!0,disableWarning:!0})){u=s[h],c="normal";break}}if(""===u)for(var A=0;A<s.length;A++)if(d[s[A]]){u=d[s[A]];break}u=""===u?"Times":u,this.pdf.setFont(u,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,R.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,R.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};d.prototype.setLineDash=function(e){this.lineDash=e},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){b.call(this,"fill",!1)},d.prototype.stroke=function(){b.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw wBe.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(e,t)},d.prototype.closePath=function(){var e=new a(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===_Se(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new a(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(e.x,e.y)},d.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw wBe.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},d.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw wBe.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new a(n,r)),o=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"qct",x1:o.x,y1:o.y,x:i.x,y:i.y}),this.ctx.lastPoint=new a(i.x,i.y)},d.prototype.bezierCurveTo=function(e,t,n,r,i,o){if(isNaN(i)||isNaN(o)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw wBe.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new a(i,o)),l=this.ctx.transform.applyToPoint(new a(e,t)),c=this.ctx.transform.applyToPoint(new a(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:s.x,y:s.y}),this.ctx.lastPoint=new a(s.x,s.y)},d.prototype.arc=function(e,t,n,r,i,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw wBe.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new a(e,t));e=s.x,t=s.y;var l=this.ctx.transform.applyToPoint(new a(0,n)),c=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:i,counterclockwise:o})},d.prototype.arcTo=function(e,t,n,r,i){throw new Error("arcTo not implemented.")},d.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw wBe.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},d.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw wBe.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},d.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw wBe.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},d.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw wBe.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},d.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},d.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,n,r,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,i=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==o)t=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=parseFloat(o[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var a=new MBe(e);e=a.ok?a.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:i,style:e}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},A=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};d.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw wBe.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!p.call(this)){var i=k(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;M.call(this,{text:e,x:t,y:n,scale:o,angle:i,align:this.textAlign,maxWidth:r})}},d.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw wBe.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){r=isNaN(r)?void 0:r;var i=k(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;M.call(this,{text:e,x:t,y:n,scale:o,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},d.prototype.measureText=function(e){if("string"!=typeof e)throw wBe.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},d.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw wBe.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.rotate=function(e){if(isNaN(e))throw wBe.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},d.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw wBe.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.transform=function(e,t,n,r,i,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o))throw wBe.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new l(e,t,n,r,i,o);this.ctx.transform=this.ctx.transform.multiply(a)},d.prototype.setTransform=function(e,t,n,r,i,o){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,o=isNaN(o)?0:o,this.ctx.transform=new l(e,t,n,r,i,o)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(e,t,n,r,i,o,a,c,u){var d=this.pdf.getImageProperties(e),h=1,p=1,A=1,g=1;void 0!==r&&void 0!==c&&(A=c/r,g=u/i,h=d.width/r*c/r,p=d.height/i*u/i),void 0===o&&(o=t,a=n,t=0,n=0),void 0!==r&&void 0===c&&(c=r,u=i),void 0===r&&void 0===c&&(c=d.width,u=d.height);for(var b,x=this.ctx.transform.decompose(),C=k(x.rotate.shx),S=new l,B=(S=(S=(S=S.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new s(o-t*A,a-n*g,r*h,i*p)),_=m.call(this,B),E=[],M=0;M<_.length;M+=1)-1===E.indexOf(_[M])&&E.push(_[M]);if(y(E),this.autoPaging)for(var P=E[0],T=E[E.length-1],D=P;D<T+1;D++){this.pdf.setPage(D);var F=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===D?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],R=1===D?0:O+(D-2)*L;if(0!==this.ctx.clip_path.length){var U=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(b,this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=U}var z=JSON.parse(JSON.stringify(B));z=v([z],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0];var N=(D>P||D<T)&&f.call(this);N&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],F,L,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",z.x,z.y,z.w,z.h,null,null,C),N&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,C)};var m=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+i)/n)+1);break;case"arc":r.push(Math.floor((e.y+i-e.radius)/n)+1),r.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var o=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((o.y+i)/n)+1),r.push(Math.floor((o.y+o.h+i)/n)+1);break;case"bct":var a=L(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"rect":r.push(Math.floor((e.y+i)/n)+1),r.push(Math.floor((e.y+e.h+i)/n)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)g.call(this);return r},g=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=o},v=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},y=function(e){return e.sort((function(e,t){return e-t}))},b=function(e,t){for(var n,r,i=this.fillStyle,o=this.strokeStyle,a=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),d=JSON.parse(JSON.stringify(this.path)),h=[],p=0;p<d.length;p++)if(void 0!==d[p].x)for(var A=m.call(this,d[p]),b=0;b<A.length;b+=1)-1===h.indexOf(A[b])&&h.push(A[b]);for(var x=0;x<h.length;x++)for(;this.pdf.internal.getNumberOfPages()<h[x];)g.call(this);if(y(h),this.autoPaging)for(var C=h[0],S=h[h.length-1],B=C;B<S+1;B++){this.pdf.setPage(B),this.fillStyle=i,this.strokeStyle=o,this.lineCap=a,this.lineWidth=l,this.lineJoin=c;var _=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],E=1===B?this.posY+this.margin[0]:this.margin[0],M=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],T=1===B?0:M+(B-2)*P;if(0!==this.ctx.clip_path.length){var D=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-T+E+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=D}if(r=JSON.parse(JSON.stringify(u)),this.path=v(r,this.posX+this.margin[3],-T+E+this.ctx.prevPageLastElemOffset),!1===t||0===B){var F=(B>C||B<S)&&f.call(this);F&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_,P,null).clip().discardPath()),w.call(this,e,t),F&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=s;this.path=u},w=function(e,t){if(("stroke"!==e||t||!A.call(this))&&("stroke"===e||t||!p.call(this))){for(var n,r,i=[],o=this.path,a=0;a<o.length;a++){var s=o[a];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var l=i.length;if(o[a-1]&&!isNaN(o[a-1].x)&&(n=[s.x-o[a-1].x,s.y-o[a-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(s);break}break;case"bct":n=[s.x1-o[a-1].x,s.y1-o[a-1].y,s.x2-o[a-1].x,s.y2-o[a-1].y,s.x-o[a-1].x,s.y-o[a-1].y],i[i.length-1].deltas.push(n);break;case"qct":var c=o[a-1].x+2/3*(s.x1-o[a-1].x),u=o[a-1].y+2/3*(s.y1-o[a-1].y),d=s.x+2/3*(s.x1-s.x),h=s.y+2/3*(s.y1-s.y),f=s.x,m=s.y;n=[c-o[a-1].x,u-o[a-1].y,d-o[a-1].x,h-o[a-1].y,f-o[a-1].x,m-o[a-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}r=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,v=0;v<i.length;v++)if(i[v].arc)for(var y=i[v].abs,b=0;b<y.length;b++){var w=y[b];"arc"===w.type?S.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,t,!g):P.call(this,w.x,w.y),g=!0}else if(!0===i[v].close)this.pdf.internal.out("h"),g=!1;else if(!0!==i[v].begin){var x=i[v].start.x,C=i[v].start.y;T.call(this,i[v].deltas,x,C),g=!0}r&&B.call(this,r),t&&_.call(this)}},x=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},C=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(e,t,n,r,i,o,a,s,l){for(var c=F.call(this,n,r,i,o),u=0;u<c.length;u++){var d=c[u];0===u&&(l?E.call(this,d.x1+e,d.y1+t):P.call(this,d.x1+e,d.y1+t)),D.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}s?_.call(this):B.call(this,a)},B=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},M=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=x.call(this,e.y),i=C.call(this,r)-n.h,o=this.ctx.transform.applyToPoint(new a(e.x,r)),c=this.ctx.transform.decompose(),u=new l;u=(u=(u=u.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var d,h,p,A=this.ctx.transform.applyToRectangle(new s(e.x,r,n.w,n.h)),g=u.applyToRectangle(new s(e.x,i,n.w,n.h)),b=m.call(this,g),S=[],B=0;B<b.length;B+=1)-1===S.indexOf(b[B])&&S.push(b[B]);if(y(S),this.autoPaging)for(var _=S[0],E=S[S.length-1],M=_;M<E+1;M++){this.pdf.setPage(M);var P=1===M?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],D=this.pdf.internal.pageSize.height-this.margin[2],F=D-this.margin[0],I=this.pdf.internal.pageSize.width-this.margin[1],k=I-this.margin[3],O=1===M?0:T+(M-2)*F;if(0!==this.ctx.clip_path.length){var L=this.path;d=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(d,this.posX+this.margin[3],-1*O+P),w.call(this,"fill",!0),this.path=L}var R=v([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-O+P+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),p=this.lineWidth,this.lineWidth=p*e.scale);var U="text"!==this.autoPaging;if(U||R.y+R.h<=D){if(U||R.y>=P&&R.x<=I){var z=U?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||I-R.x)[0],N=v([JSON.parse(JSON.stringify(A))],this.posX+this.margin[3],-O+P+this.ctx.prevPageLastElemOffset)[0],j=U&&(M>_||M<E)&&f.call(this);j&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,F,null).clip().discardPath()),this.pdf.text(z,N.x,N.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),j&&this.pdf.restoreGraphicsState()}}else R.y<D&&(this.ctx.prevPageLastElemOffset+=D-R.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=p)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),p=this.lineWidth,this.lineWidth=p*e.scale),this.pdf.text(e.text,o.x+this.posX,o.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=p)},P=function(e,t,i,o){i=i||0,o=o||0,this.pdf.internal.out(n(e+i)+" "+r(t+o)+" l")},T=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},D=function(e,n,r,a,s,l,c,u){this.pdf.internal.out([t(i(r+e)),t(o(a+n)),t(i(s+e)),t(o(l+n)),t(i(c+e)),t(o(u+n)),"c"].join(" "))},F=function(e,t,n,r){for(var i=2*Math.PI,o=Math.PI/2;t>n;)t-=i;var a=Math.abs(n-t);a<i&&r&&(a=i-a);for(var s=[],l=r?-1:1,c=t;a>1e-5;){var u=c+l*Math.min(a,o);s.push(I.call(this,e,c,u)),a-=Math.abs(u-c),c=u}return s},I=function(e,t,n){var r=(n-t)/2,i=e*Math.cos(r),o=e*Math.sin(r),a=i,s=-o,l=a*a+s*s,c=l+a*i+s*o,u=4/3*(Math.sqrt(2*l*c)-c)/(a*o-s*i),d=a-u*s,h=s+u*a,p=d,A=-h,f=r+t,m=Math.cos(f),g=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:d*m-h*g,y2:d*g+h*m,x3:p*m-A*g,y3:p*g+A*m,x4:e*Math.cos(n),y4:e*Math.sin(n)}},k=function(e){return 180*e/Math.PI},O=function(e,t,n,r,i,o){var a=e+.5*(n-e),l=t+.5*(r-t),c=i+.5*(n-i),u=o+.5*(r-o),d=Math.min(e,i,a,c),h=Math.max(e,i,a,c),p=Math.min(t,o,l,u),A=Math.max(t,o,l,u);return new s(d,p,h-d,A-p)},L=function(e,t,n,r,i,o,a,l){var c,u,d,h,p,A,f,m,g,v,y,b,w,x,C=n-e,S=r-t,B=i-n,_=o-r,E=a-i,M=l-o;for(u=0;u<41;u++)g=(f=(d=e+(c=u/40)*C)+c*((p=n+c*B)-d))+c*(p+c*(i+c*E-p)-f),v=(m=(h=t+c*S)+c*((A=r+c*_)-h))+c*(A+c*(o+c*M-A)-m),0==u?(y=g,b=v,w=g,x=v):(y=Math.min(y,g),b=Math.min(b,v),w=Math.max(w,g),x=Math.max(x,v));return new s(Math.round(y),Math.round(b),Math.round(w-y),Math.round(x-b))},R=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(JBe.API),
/**
 * @license
 * jsPDF filters PlugIn
 * Copyright (c) 2014 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(e){var t,n,r,i,o,a,s,l,c,u;for(n=[],r=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>r;r+=4)0!==(o=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(a=(o=((o=((o=((o=(o-(u=o%85))/85)-(c=o%85))/85)-(l=o%85))/85)-(s=o%85))/85)%85,n.push(a+33,s+33,l+33,c+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,i,o,a=String,s="length",l=255,c="charCodeAt",u="slice",d="replace";for(e[u](-2),e=e[u](0,-2)[d](/\s/g,"")[d]("z","!!!!!"),r=[],i=0,o=(e+=t="uuuuu"[u](e[s]%5||5))[s];o>i;i+=5)n=52200625*(e[c](i)-33)+614125*(e[c](i+1)-33)+7225*(e[c](i+2)-33)+85*(e[c](i+3)-33)+(e[c](i+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[s]),a.fromCharCode.apply(a,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},i=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=mBe(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,o){var a=0,s=e||"",l=[];for("string"==typeof(o=o||[])&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=t(s),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=r(s),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:s,reverseChain:l.reverse().join(" ")}}}(JBe.API),
/**
 * @license
 * jsPDF fileloading PlugIn
 * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){e.loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,i=0,o=function(e){var t=e.length,n=[],r=String.fromCharCode;for(i=0;i<t;i+=1)n.push(r(255&e.charCodeAt(i)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(o(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return o(r.responseText)}(e,t,n)}catch(i){}return r}(e,t,n)},e.loadImageFile=e.loadFile}(JBe.API),function(e){function t(){return(yBe.html2canvas?Promise.resolve(yBe.html2canvas):nF((()=>import("./html2canvas-D_cdttkX.js").then((e=>e.h))),[])).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function n(){return(yBe.DOMPurify?Promise.resolve(yBe.DOMPurify):nF((()=>import("./purify.es-RVM9IHNE.js")),[])).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var r=function(e){var t=_Se(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(r(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(n).then((function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var o=0;o<n.length;++o){var a=n[o],s=a.src.find((function(e){return"truetype"===e.format}));s&&t.addFont(s.url,a.ref.name,a.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(e){if("object"!==r(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},o.prototype.get=function(e,t){return this.then((function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},o.prototype.setMargin=function(e){return this.then((function(){switch(r(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||JBe.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},o.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),i=n.call(r,e,t);return o.convert(i,this.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,JBe.getPageSize=function(e,t,n){if("object"===_Se(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i,o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+t}var s,l=0,c=0;if(a.hasOwnProperty(o))l=a[o][1]/i,c=a[o][0]/i;else try{l=n[1],c=n[0]}catch(Nee){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",c>l&&(s=c,c=l,l=s);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(s=c,c=l,l=s)}return{width:c,height:l,unit:t,k:i,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(q_e):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(JBe.API),JBe.API.addJS=function(e){return rEe=e,this.internal.events.subscribe("postPutResources",(function(){tEe=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(tEe+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),nEe=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+rEe+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==tEe&&void 0!==nEe&&this.internal.out("/Names <</JavaScript "+tEe+" 0 R>>")})),this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),i=0;i<r.length;i++){var o=r[i],a=n.exec(o);if(null!=a){var s=a[1];e.internal.newObjectDeferredBegin(s,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(i=0;i<l;i++){var u=e.internal.newObject();c.push(u);var d=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<c.length;i++)e.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var i=t.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var a=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<t.children.length;s++)this.renderItems(t.children[s])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(JBe.API),
/**
 * @license
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,i,o,a){var s,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(s=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,o={width:0,height:0,numcomponents:1},a=4;a<i;a+=2){if(a+=r,-1!==t.indexOf(e.charCodeAt(a+1))){n=256*e.charCodeAt(a+5)+e.charCodeAt(a+6),o={width:256*e.charCodeAt(a+7)+e.charCodeAt(a+8),height:n,numcomponents:e.charCodeAt(a+9)};break}r=256*e.charCodeAt(a+2)+e.charCodeAt(a+3)}return o}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:e,width:s.width,height:s.height,colorSpace:a,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(JBe.API);var oEe,aEe,sEe,lEe,cEe,uEe=function(){var e,t,n;function r(e){var t,n,r,i,o,a,s,l,c,u,d,h,p,A;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*o/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(p=0;0<=u?p<u:p>u;0<=u?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(d=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,d.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,d.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(A=this.colorType)||6===A,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,i=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function o(o,a,s,l){var c,u,d,h,p,A,f,m,g,v,y,b,w,x,C,S,B,_,E,M,P,T=Math.ceil((i.width-o)/s),D=Math.ceil((i.height-a)/l),F=i.width==T&&i.height==D;for(x=t*T,b=F?n:new Uint8Array(x*D),A=e.length,w=0,u=0;w<D&&r<A;){switch(e[r++]){case 0:for(h=B=0;B<x;h=B+=1)b[u++]=e[r++];break;case 1:for(h=_=0;_<x;h=_+=1)c=e[r++],p=h<t?0:b[u-t],b[u++]=(c+p)%256;break;case 2:for(h=E=0;E<x;h=E+=1)c=e[r++],d=(h-h%t)/t,C=w&&b[(w-1)*x+d*t+h%t],b[u++]=(C+c)%256;break;case 3:for(h=M=0;M<x;h=M+=1)c=e[r++],d=(h-h%t)/t,p=h<t?0:b[u-t],C=w&&b[(w-1)*x+d*t+h%t],b[u++]=(c+Math.floor((p+C)/2))%256;break;case 4:for(h=P=0;P<x;h=P+=1)c=e[r++],d=(h-h%t)/t,p=h<t?0:b[u-t],0===w?C=S=0:(C=b[(w-1)*x+d*t+h%t],S=d&&b[(w-1)*x+(d-1)*t+h%t]),f=p+C-S,m=Math.abs(f-p),v=Math.abs(f-C),y=Math.abs(f-S),g=m<=v&&m<=y?p:v<=y?C:S,b[u++]=(c+g)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!F){var I=((a+w*l)*i.width+o)*t,k=w*x;for(h=0;h<T;h+=1){for(var O=0;O<t;O+=1)n[I++]=b[k++];I+=(s-1)*t}}w++}}return e=gBe(e),1==i.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,i,o,a,s,l;for(n=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+n.length),r=0,e=0,t=a=0,s=n.length;a<s;t=a+=3)i[r++]=n[t],i[r++]=n[t+1],i[r++]=n[t+2],i[r++]=null!=(l=o[e++])?l:255;return i},r.prototype.copyToImageData=function(e,t){var n,r,i,o,a,s,l,c,u,d,h;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),r=4,n=!0),c=(i=e.data||e).length,a=u||t,o=s=0,1===r)for(;o<c;)l=u?4*t[o/4]:s,d=a[l++],i[o++]=d,i[o++]=d,i[o++]=d,i[o++]=n?a[l++]:255,s=l;else for(;o<c;)l=u?4*t[o/4]:s,i[o++]=a[l++],i[o++]=a[l++],i[o++]=a[l++],i[o++]=n?a[l++]:255,s=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var i=function(){if("[object Window]"===Object.prototype.toString.call(yBe)){try{t=yBe.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return i(),e=function(e){var r;if(!0===i())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,i,o,a,s,l,c;if(this.animation){for(c=[],r=a=0,s=(l=this.animation.frames).length;a<s;r=++a)n=l[r],i=t.createImageData(n.width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,o),n.imageData=i,c.push(n.image=e(i));return c}},r.prototype.renderFrame=function(e,t){var n,r,i;return n=(r=this.animation.frames)[t],i=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,i,o,a,s=this;return n=0,a=this.animation,i=a.numFrames,r=a.frames,o=a.numPlays,(t=function(){var a,l;if(a=n++%i,l=r[a],s.renderFrame(e,a),i>1&&n/i<o)return s.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
/**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function dEe(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,a=1<<1+(7&i);e[t++],e[t++];var s=null,l=null;o&&(s=t,l=a,t+=3*a);var c=!0,u=[],d=0,h=null,p=0,A=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,A=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],!(1&f)&&(h=null),p=f>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var m=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++],w=b>>6&1,x=1<<1+(7&b),C=s,S=l,B=!1;b>>7&&(B=!0,C=t,S=x,t+=3*x);var _=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(0===E)break;t+=E}u.push({x:m,y:g,width:v,height:y,has_local_palette:B,palette_offset:C,palette_size:S,data_offset:_,data_length:t-_,transparent_index:h,interlaced:!!w,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return A},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var i=this.frameInfo(t),o=i.width*i.height,a=new Uint8Array(o);hEe(e,i.data_offset,a,o);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,d=c,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),A=h,f=4*u;!0===i.interlaced&&(f+=4*n*7);for(var m=8,g=0,v=a.length;g<v;++g){var y=a[g];if(0===d&&(d=c,(A+=f)>=p&&(f=4*u+4*n*(m-1),A=h+(c+u)*(m<<1),m>>=1)),y===l)A+=4;else{var b=e[s+3*y],w=e[s+3*y+1],x=e[s+3*y+2];r[A++]=x,r[A++]=w,r[A++]=b,r[A++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,r){var i=this.frameInfo(t),o=i.width*i.height,a=new Uint8Array(o);hEe(e,i.data_offset,a,o);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,d=c,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),A=h,f=4*u;!0===i.interlaced&&(f+=4*n*7);for(var m=8,g=0,v=a.length;g<v;++g){var y=a[g];if(0===d&&(d=c,(A+=f)>=p&&(f=4*u+4*n*(m-1),A=h+(c+u)*(m<<1),m>>=1)),y===l)A+=4;else{var b=e[s+3*y],w=e[s+3*y+1],x=e[s+3*y+2];r[A++]=b,r[A++]=w,r[A++]=x,r[A++]=255}--d}}}function hEe(e,t,n,r){for(var i=e[t++],o=1<<i,a=o+1,s=a+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,p=e[t++],A=new Int32Array(4096),f=null;;){for(;u<16&&0!==p;)d|=e[t++]<<u,u+=8,1===p?p=e[t++]:--p;if(u<l)break;var m=d&c;if(d>>=l,u-=l,m!==o){if(m===a)break;for(var g=m<s?m:f,v=0,y=g;y>o;)y=A[y]>>8,++v;var b=y;if(h+v+(g!==m?1:0)>r)return void wBe.log("Warning, gif stream longer than expected.");n[h++]=b;var w=h+=v;for(g!==m&&(n[h++]=b),y=g;v--;)y=A[y],n[--w]=255&y,y>>=8;null!==f&&s<4096&&(A[s++]=f<<8|b,s>=c+1&&l<12&&(++l,c=c<<1|1)),f=m}else s=a+1,c=(1<<(l=i+1))-1,f=null}return h!==r&&wBe.log("Warning, gif stream shorter than expected."),n
/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/}function pEe(e){var t,n,r,i,o,a=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),p=new Array(64),A=new Array(64),f=[],m=0,g=7,v=new Array(64),y=new Array(64),b=new Array(64),w=new Array(256),x=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function F(e,t){for(var n=0,r=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=e[o];a++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=o,r++,n++;n*=2}return i}function I(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(m|=1<<g),n--,--g<0&&(255==m?(k(255),k(0)):k(m),g=7,m=0)}function k(e){f.push(e)}function O(e){k(e>>8&255),k(255&e)}function L(e,t,n,r,i){for(var o,a=i[0],s=i[240],l=function(e,t){var n,r,i,o,a,s,l,c,u,d,h=0;for(u=0;u<8;++u){n=e[h],r=e[h+1],i=e[h+2],o=e[h+3],a=e[h+4],s=e[h+5],l=e[h+6];var A=n+(c=e[h+7]),f=n-c,m=r+l,g=r-l,v=i+s,y=i-s,b=o+a,w=o-a,x=A+b,C=A-b,S=m+v,B=m-v;e[h]=x+S,e[h+4]=x-S;var _=.707106781*(B+C);e[h+2]=C+_,e[h+6]=C-_;var E=.382683433*((x=w+y)-(B=g+f)),M=.5411961*x+E,P=1.306562965*B+E,T=.707106781*(S=y+g),D=f+T,F=f-T;e[h+5]=F+M,e[h+3]=F-M,e[h+1]=D+P,e[h+7]=D-P,h+=8}for(h=0,u=0;u<8;++u){n=e[h],r=e[h+8],i=e[h+16],o=e[h+24],a=e[h+32],s=e[h+40],l=e[h+48];var I=n+(c=e[h+56]),k=n-c,O=r+l,L=r-l,R=i+s,U=i-s,z=o+a,N=o-a,j=I+z,H=I-z,Q=O+R,V=O-R;e[h]=j+Q,e[h+32]=j-Q;var W=.707106781*(V+H);e[h+16]=H+W,e[h+48]=H-W;var G=.382683433*((j=N+U)-(V=L+k)),q=.5411961*j+G,K=1.306562965*V+G,Y=.707106781*(Q=U+L),X=k+Y,$=k-Y;e[h+40]=$+q,e[h+24]=$-q,e[h+8]=X+K,e[h+56]=X-K,h++}for(u=0;u<64;++u)d=e[u]*t[u],p[u]=d>0?d+.5|0:d-.5|0;return p}(e,t),c=0;c<64;++c)A[C[c]]=l[c];var u=A[0]-n;n=A[0],0==u?I(r[0]):(I(r[h[o=32767+u]]),I(d[o]));for(var f=63;f>0&&0==A[f];)f--;if(0==f)return I(a),n;for(var m,g=1;g<=f;){for(var v=g;0==A[g]&&g<=f;)++g;var y=g-v;if(y>=16){m=y>>4;for(var b=1;b<=m;++b)I(s);y&=15}o=32767+A[g],I(i[(y<<4)+h[o]]),I(d[o]),g++}return 63!=f&&I(a),n}function R(e){e=Math.min(Math.max(e,1),100),o!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),s[C[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var d=a((i[o]*e+50)/100);d=Math.min(Math.max(d,1),255),l[C[o]]=d}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,A=0;A<8;A++)for(var f=0;f<8;f++)c[p]=1/(s[C[p]]*h[A]*h[f]*8),u[p]=1/(l[C[p]]*h[A]*h[f]*8),p++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),o=e)}this.encode=function(e,o){var a,d;o&&R(o),f=new Array,m=0,g=7,O(65496),O(65504),O(16),k(74),k(70),k(73),k(70),k(0),k(1),k(1),k(0),O(1),O(1),k(0),k(0),function(){O(65499),O(132),k(0);for(var e=0;e<64;e++)k(s[e]);k(1);for(var t=0;t<64;t++)k(l[t])}(),a=e.width,d=e.height,O(65472),O(17),k(8),O(d),O(a),k(3),k(1),k(17),k(0),k(2),k(17),k(1),k(3),k(17),k(1),function(){O(65476),O(418),k(0);for(var e=0;e<16;e++)k(S[e+1]);for(var t=0;t<=11;t++)k(B[t]);k(16);for(var n=0;n<16;n++)k(_[n+1]);for(var r=0;r<=161;r++)k(E[r]);k(1);for(var i=0;i<16;i++)k(M[i+1]);for(var o=0;o<=11;o++)k(P[o]);k(17);for(var a=0;a<16;a++)k(T[a+1]);for(var s=0;s<=161;s++)k(D[s])}(),O(65498),O(12),k(3),k(1),k(0),k(2),k(17),k(3),k(17),k(0),k(63),k(0);var h=0,p=0,A=0;m=0,g=7,this.encode.displayName="_encode_";for(var w,C,F,U,z,N,j,H,Q,V=e.data,W=e.width,G=e.height,q=4*W,K=0;K<G;){for(w=0;w<q;){for(z=q*K+w,j=-1,H=0,Q=0;Q<64;Q++)N=z+(H=Q>>3)*q+(j=4*(7&Q)),K+H>=G&&(N-=q*(K+1+H-G)),w+j>=q&&(N-=w+j-q+4),C=V[N++],F=V[N++],U=V[N++],v[Q]=(x[C]+x[F+256|0]+x[U+512|0]>>16)-128,y[Q]=(x[C+768|0]+x[F+1024|0]+x[U+1280|0]>>16)-128,b[Q]=(x[C+1280|0]+x[F+1536|0]+x[U+1792|0]>>16)-128;h=L(v,c,h,t,r),p=L(y,u,p,n,i),A=L(b,u,A,n,i),w+=32}K+=8}if(g>=0){var Y=[];Y[1]=g+1,Y[0]=(1<<g+1)-1,I(Y)}return O(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=F(S,B),n=F(M,P),r=F(_,E),i=F(T,D),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)h[32767+r]=n,d[32767+r]=[],d[32767+r][1]=n,d[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)h[32767+i]=n,d[32767+i]=[],d[32767+i][1]=n,d[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256|0]=38470*e,x[e+512|0]=7471*e+32768,x[e+768|0]=-11059*e,x[e+1024|0]=-21709*e,x[e+1280|0]=32768*e+8421375,x[e+1536|0]=-27439*e,x[e+1792|0]=-5329*e}(),R(e)}
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function AEe(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function fEe(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,i){for(var o=0;o<i;o++)e[t+o]=n[r+o]}function i(e,t,n,r){for(var i=0;i<r;i++)e[t+i]=n}function o(e){return new Int32Array(e)}function a(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function s(e,t){var n=[];return function e(n,r,i){for(var o=i[r],a=0;a<o&&(n.push(i.length>r+1?[]:new t),!(i.length<r+1));a++)e(n[a],r+1,i)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,i,o){t(!(i%r));do{e[n+(i-=r)]=o}while(0<i)}function u(e,n,r,i,a){if(t(2328>=a),512>=a)var s=o(512);else if(null==(s=o(a)))return 0;return function(e,n,r,i,a,s){var u,h,p=n,A=1<<r,f=o(16),m=o(16);for(t(0!=a),t(null!=i),t(null!=e),t(0<r),h=0;h<a;++h){if(15<i[h])return 0;++f[i[h]]}if(f[0]==a)return 0;for(m[1]=0,u=1;15>u;++u){if(f[u]>1<<u)return 0;m[u+1]=m[u]+f[u]}for(h=0;h<a;++h)u=i[h],0<i[h]&&(s[m[u]++]=h);if(1==m[15])return(i=new d).g=0,i.value=s[0],c(e,p,1,A,i),A;var g,v=-1,y=A-1,b=0,w=1,x=1,C=1<<r;for(h=0,u=1,a=2;u<=r;++u,a<<=1){if(w+=x<<=1,0>(x-=f[u]))return 0;for(;0<f[u];--f[u])(i=new d).g=u,i.value=s[h++],c(e,p+b,a,C,i),b=l(b,u)}for(u=r+1,a=2;15>=u;++u,a<<=1){if(w+=x<<=1,0>(x-=f[u]))return 0;for(;0<f[u];--f[u]){if(i=new d,(b&y)!=v){for(p+=C,g=1<<(v=u)-r;15>v&&!(0>=(g-=f[v]));)++v,g<<=1;A+=C=1<<(g=v-r),e[n+(v=b&y)].g=g+r,e[n+v].value=p-n-v}i.g=u-r,i.value=s[h++],c(e,p+(b>>r),a,C,i),b=l(b,u)}}return w!=2*m[15]-1?0:A}(e,n,r,i,a,s)}function d(){this.value=this.g=0}function h(){this.value=this.g=0}function p(){this.G=a(5,d),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Un,h)}function A(e,n,r,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+i,e.Zc=4<=i?r+i-4+1:r,_(e)}function f(e,t){for(var n=0;0<t--;)n|=M(e,128)<<t;return n}function m(e,t){var n=f(e,t);return E(e)?-n:n}function g(e,n,r,i){var o,a=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),o=0;o<i;++o)a+=n[r+o]<<8*o;e.Ra=a,e.bb=i,e.oa=n,e.pa=r}function v(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<jn-8>>>0,++e.bb,e.u-=8;C(e)&&(e.h=1,e.u=0)}function y(e,n){if(t(0<=n),!e.h&&n<=Nn){var r=x(e)&zn[n];return e.u+=n,v(e),r}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(e){return e.Ra>>>(e.u&jn-1)>>>0}function C(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>jn}function S(e,t){e.u=t,e.h=C(e)}function B(e){e.u>=Hn&&(t(e.u>=Hn),v(e))}function _(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function E(e){return f(e,1)}function M(e,t){var n=e.Ca;0>e.b&&_(e);var r=e.b,i=n*t>>>8,o=(e.I>>>r>i)+0;for(o?(n-=i,e.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+Qn[r],e.b-=r,e.Ca=(n<<r)-1,o}function P(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function T(e,t){return e[t+0]|e[t+1]<<8}function D(e,t){return T(e,t)|e[t+2]<<16}function F(e,t){return T(e,t)|T(e,t+2)<<16}function I(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=o(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function k(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function O(){this.X=[],this.Xa=this.Mb=0}function L(e,n,r,i){t(null!=r),t(null!=i);var o=r[0],a=i[0];return 0==o&&(o=(e*a+n/2)/n),0==a&&(a=(n*o+e/2)/e),0>=o||0>=a?0:(r[0]=o,i[0]=a,1)}function R(e,t){return e+(1<<t)-1>>>t}function U(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function z(t,n){e[n]=function(n,r,i,o,a,s,l){var c;for(c=0;c<a;++c){var u=e[t](s[l+c-1],i,o+c);s[l+c]=U(n[r+c],u)}}}function N(){this.ud=this.hd=this.jd=0}function j(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function H(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function Q(e,t){return H(e+(e-t+.5>>1))}function V(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function W(e,t,n,r,i,o,a){for(r=o[a-1],n=0;n<i;++n)o[a+n]=r=U(e[t+n],r)}function G(e,t,n,r,i){var o;for(o=0;o<n;++o){var a=e[t+o],s=a>>8&255,l=16711935&(l=(l=16711935&a)+((s<<16)+s));r[i+o]=(4278255360&a)+l>>>0}}function q(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function K(e,t,n,r,i,o){var a;for(a=0;a<r;++a){var s=t[n+a],l=s>>>8,c=s,u=255&(u=(u=s>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),i[o+a]=(4278255360&s)+(u<<16)+c}}function Y(t,n,r,i,o){e[n]=function(e,t,n,r,a,s,l,c,u){for(r=l;r<c;++r)for(l=0;l<u;++l)a[s++]=o(n[i(e[t++])])},e[t]=function(t,n,a,s,l,c,u){var d=8>>t.b,h=t.Ea,p=t.K[0],A=t.w;if(8>d)for(t=(1<<t.b)-1,A=(1<<d)-1;n<a;++n){var f,m=0;for(f=0;f<h;++f)f&t||(m=i(s[l++])),c[u++]=o(p[m&A]),m>>=d}else e["VP8LMapColor"+r](s,l,p,A,c,u,n,a,h)}}function X(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=255&o}}function $(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=255&o,r[i++]=o>>24&255}}function J(e,t,n,r,i){for(n=t+n;t<n;){var o=(a=e[t++])>>16&240|a>>12&15,a=240&a|a>>28&15;r[i++]=o,r[i++]=a}}function Z(e,t,n,r,i){for(n=t+n;t<n;){var o=(a=e[t++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[i++]=o,r[i++]=a}}function ee(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=255&o,r[i++]=o>>8&255,r[i++]=o>>16&255}}function te(e,t,n,i,o,a){if(0==a)for(n=t+n;t<n;)P(i,((a=e[t++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),o+=32;else r(i,o,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Hr||e==Qr||e==Vr||e==Wr}function ie(){this.eb=[],this.size=this.A=this.fb=0}function oe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ae(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new oe,this.sd=null}function se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,i=t.ba.f.RGBA,o=i.eb,a=i.fb+e.ka*i.A,s=mi[t.ba.S],l=e.y,c=e.O,u=e.f,d=e.N,h=e.ea,p=e.W,A=t.cc,f=t.dc,m=t.Mc,g=t.Nc,v=e.ka,y=e.ka+e.T,b=e.U,w=b+1>>1;for(0==v?s(l,c,null,null,u,d,h,p,u,d,h,p,o,a,null,null,b):(s(t.ec,t.fc,l,c,A,f,m,g,u,d,h,p,o,a-i.A,o,a,b),++n);v+2<y;v+=2)A=u,f=d,m=h,g=p,d+=e.Rc,p+=e.Rc,a+=2*i.A,s(l,(c+=2*e.fa)-e.fa,l,c,A,f,m,g,u,d,h,p,o,a-i.A,o,a,b);return c+=e.fa,e.j+y<e.o?(r(t.ec,t.fc,l,c,b),r(t.cc,t.dc,u,d,w),r(t.Mc,t.Nc,h,p,w),n--):1&y||s(l,c,null,null,u,d,h,p,u,d,h,p,o,a+i.A,null,null,b),n}function de(e,n,r){var i=e.F,o=[e.J];if(null!=i){var a=e.U,s=n.ba.S,l=s==zr||s==Vr;n=n.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,o[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var d=n.eb;u=n.fb+u*n.A,e=Sr(i,o[0],e.width,a,c,d,u+(l?0:3),n.A),t(r==c),e&&re(s)&&xr(d,u,l,a,c,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,r=11>n,i=n==Lr||n==Ur||n==zr||n==Nr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!On(t.Oa,e,i?11:12))return 0;if(i&&re(n)&&vn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=o(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,vn()}}else alert("todo:EmitYUV");i&&(t.Jb=de,r&&mn())}if(r&&!Ti){for(e=0;256>e;++e)Di[e]=89858*(e-128)+Bi>>Si,ki[e]=-22014*(e-128)+Bi,Ii[e]=-45773*(e-128),Fi[e]=113618*(e-128)+Bi>>Si;for(e=_i;e<Ei;++e)t=76283*(e-16)+Bi>>Si,Oi[e-_i]=We(t,255),Li[e-_i]=We(t+8>>4,15);Ti=1}return 1}function pe(e){var n=e.ma,r=e.U,i=e.T;return t(!(1&e.ka)),0>=r||0>=i?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function Ae(e){e.ma.memory=null}function fe(e,t,n,r){return 47!=y(e,8)?0:(t[0]=y(e,14)+1,n[0]=y(e,14)+1,r[0]=y(e,1),0!=y(e,3)?0:!e.h)}function me(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+y(t,n)+1}function ge(e,t){return 120<t?t-120:1<=(n=((n=$r[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ve(e,t,n){var r=x(n),i=e[t+=255&r].g-8;return 0<i&&(S(n,n.u+8),r=x(n),t+=e[t].value,t+=r&(1<<i)-1),S(n,n.u+e[t].g),e[t].value}function ye(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function be(e,n,r){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(r>>i)+(n>>i)])<e.Wb),e.Ya[n]}function we(e,n,i,o){var a=e.ab,s=e.c*n,l=e.C;n=l+n;var c=i,u=o;for(o=e.Ta,i=e.Ua;0<a--;){var d=e.gc[a],h=l,p=n,A=c,f=u,m=(u=o,c=i,d.Ea);switch(t(h<p),t(p<=d.nc),d.hc){case 2:Gn(A,f,(p-h)*m,u,c);break;case 0:var g=h,v=p,y=u,b=c,w=(_=d).Ea;0==g&&(Vn(A,f,null,null,1,y,b),W(A,f+1,0,0,w-1,y,b+1),f+=w,b+=w,++g);for(var x=1<<_.b,C=x-1,S=R(w,_.b),B=_.K,_=_.w+(g>>_.b)*S;g<v;){var E=B,M=_,P=1;for(Wn(A,f,y,b-w,1,y,b);P<w;){var T=(P&~C)+x;T>w&&(T=w),(0,$n[E[M++]>>8&15])(A,f+ +P,y,b+P-w,T-P,y,b+P),P=T}f+=w,b+=w,++g&C||(_+=S)}p!=d.nc&&r(u,c-m,u,c+(p-h-1)*m,m);break;case 1:for(m=A,v=f,w=(A=d.Ea)-(b=A&~(y=(f=1<<d.b)-1)),g=R(A,d.b),x=d.K,d=d.w+(h>>d.b)*g;h<p;){for(C=x,S=d,B=new N,_=v+b,E=v+A;v<_;)q(C[S++],B),Jn(B,m,v,f,u,c),v+=f,c+=f;v<E&&(q(C[S++],B),Jn(B,m,v,w,u,c),v+=w,c+=w),++h&y||(d+=g)}break;case 3:if(A==u&&f==c&&0<d.b){for(v=u,A=m=c+(p-h)*m-(b=(p-h)*R(d.Ea,d.b)),f=u,y=c,g=[],b=(w=b)-1;0<=b;--b)g[b]=f[y+b];for(b=w-1;0<=b;--b)v[A+b]=g[b];qn(d,h,p,u,m,u,c)}else qn(d,h,p,A,f,u,c)}c=o,u=i}u!=i&&r(o,i,c,u,s)}function xe(e,n){var r=e.V,i=e.Ba+e.c*e.C,o=n-e.C;if(t(n<=e.l.o),t(16>=o),0<o){var a=e.l,s=e.Ta,l=e.Ua,c=a.width;if(we(e,o,r,i),o=l=[l],t((r=e.C)<(i=n)),t(a.v<a.va),i>a.o&&(i=a.o),r<a.j){var u=a.j-r;r=a.j,o[0]+=u*c}if(r>=i?r=0:(o[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=i-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var d=r.f.RGBA,h=(i=r.S,o=a.U,a=a.T,u=d.eb,d.A),p=a;for(d=d.fb+e.Ma*d.A;0<p--;){var A=s,f=l,m=o,g=u,v=d;switch(i){case Or:Zn(A,f,m,g,v);break;case Lr:er(A,f,m,g,v);break;case Hr:er(A,f,m,g,v),xr(g,v,0,m,1,0);break;case Rr:rr(A,f,m,g,v);break;case Ur:te(A,f,m,g,v,1);break;case Qr:te(A,f,m,g,v,1),xr(g,v,0,m,1,0);break;case zr:te(A,f,m,g,v,0);break;case Vr:te(A,f,m,g,v,0),xr(g,v,1,m,1,0);break;case Nr:tr(A,f,m,g,v);break;case Wr:tr(A,f,m,g,v),Cr(g,v,m,1,0);break;case jr:nr(A,f,m,g,v);break;default:t(0)}l+=c,d+=h}e.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ce(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function Se(e,n,r,i,o,a){if(0!=e.Z){var s=e.qd,l=e.rd;for(t(null!=fi[e.Z]);n<r;++n)fi[e.Z](s,l,i,o,i,o,a),s=i,l=o,o+=a;e.qd=s,e.rd=l}}function Be(e,n){var r=e.l.ma,i=0==r.Z||1==r.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var o=e.l.width,a=r.ca,s=r.tb+o*i,l=e.V,c=e.Ba+e.c*i,u=e.gc;t(1==e.ab),t(3==u[0].hc),Yn(u[0],i,n,l,c,a,s),Se(r,i,n,a,s,o)}e.C=e.Ma=n}function _e(e,n,r,i,o,a,s){var l=e.$/i,c=e.$%i,u=e.m,d=e.s,h=r+e.$,p=h;o=r+i*o;var A=r+i*a,f=280+d.ua,m=e.Pb?l:16777216,g=0<d.ua?d.Wa:null,v=d.wc,y=h<A?be(d,c,l):null;t(e.C<a),t(A<=o);var b=!1;e:for(;;){for(;b||h<A;){var w=0;if(l>=m){var _=h-r;t((m=e).Pb),m.wd=m.m,m.xd=_,0<m.s.ua&&k(m.s.Wa,m.s.vb),m=l+Zr}if(c&v||(y=be(d,c,l)),t(null!=y),y.Qb&&(n[h]=y.qb,b=!0),!b)if(B(u),y.jc){w=u,_=n;var E=h,M=y.pd[x(w)&Un-1];t(y.jc),256>M.g?(S(w,w.u+M.g),_[E]=M.value,w=0):(S(w,w.u+M.g-256),t(256<=M.value),w=M.value),0==w&&(b=!0)}else w=ve(y.G[0],y.H[0],u);if(u.h)break;if(b||256>w){if(!b)if(y.nd)n[h]=(y.qb|w<<8)>>>0;else{if(B(u),b=ve(y.G[1],y.H[1],u),B(u),_=ve(y.G[2],y.H[2],u),E=ve(y.G[3],y.H[3],u),u.h)break;n[h]=(E<<24|b<<16|w<<8|_)>>>0}if(b=!1,++h,++c>=i&&(c=0,++l,null!=s&&l<=a&&!(l%16)&&s(e,l),null!=g))for(;p<h;)w=n[p++],g.X[(506832829*w&4294967295)>>>g.Mb]=w}else if(280>w){if(w=me(w-256,u),_=ve(y.G[4],y.H[4],u),B(u),_=ge(i,_=me(_,u)),u.h)break;if(h-r<_||o-h<w)break e;for(E=0;E<w;++E)n[h+E]=n[h+E-_];for(h+=w,c+=w;c>=i;)c-=i,++l,null!=s&&l<=a&&!(l%16)&&s(e,l);if(t(h<=o),c&v&&(y=be(d,c,l)),null!=g)for(;p<h;)w=n[p++],g.X[(506832829*w&4294967295)>>>g.Mb]=w}else{if(!(w<f))break e;for(b=w-280,t(null!=g);p<h;)w=n[p++],g.X[(506832829*w&4294967295)>>>g.Mb]=w;w=h,t(!(b>>>(_=g).Xa)),n[w]=_.X[b],b=!0}b||t(u.h==C(u))}if(e.Pb&&u.h&&h<o)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&k(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=s&&s(e,l>a?a:l),e.a=0,e.$=h-r}return 1}return e.a=3,0}function Ee(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Me(){var t=new an;return null==t?null:(t.a=0,t.xb=Ai,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Gn=G,Jn=K,Zn=X,er=$,tr=J,nr=Z,rr=ee,e.VP8LMapColor32b=Kn,e.VP8LMapColor8b=Xn,t)}function Pe(e,n,r,s,l){var c=1,h=[e],A=[n],f=s.m,m=s.s,g=null,v=0;e:for(;;){if(r)for(;c&&y(f,1);){var b=h,w=A,C=s,_=1,E=C.m,M=C.gc[C.ab],P=y(E,2);if(C.Oc&1<<P)c=0;else{switch(C.Oc|=1<<P,M.hc=P,M.Ea=b[0],M.nc=w[0],M.K=[null],++C.ab,t(4>=C.ab),P){case 0:case 1:M.b=y(E,3)+2,_=Pe(R(M.Ea,M.b),R(M.nc,M.b),0,C,M.K),M.K=M.K[0];break;case 3:var T,D=y(E,8)+1,F=16<D?0:4<D?1:2<D?2:3;if(b[0]=R(M.Ea,F),M.b=F,T=_=Pe(D,1,0,C,M.K)){var k,O=D,L=M,z=1<<(8>>L.b),N=o(z);if(null==N)T=0;else{var j=L.K[0],H=L.w;for(N[0]=L.K[0][0],k=1;k<1*O;++k)N[k]=U(j[H+k],N[k-1]);for(;k<4*z;++k)N[k]=0;L.K[0]=null,L.K[0]=N,T=1}}_=T;break;case 2:break;default:t(0)}c=_}}if(h=h[0],A=A[0],c&&y(f,1)&&!(c=1<=(v=y(f,4))&&11>=v)){s.a=3;break e}var Q;if(Q=c)t:{var V,W,G,q=s,K=h,Y=A,X=v,$=r,J=q.m,Z=q.s,ee=[null],te=1,ne=0,re=Jr[X];n:for(;;){if($&&y(J,1)){var ie=y(J,3)+2,oe=R(K,ie),ae=R(Y,ie),se=oe*ae;if(!Pe(oe,ae,0,q,ee))break n;for(ee=ee[0],Z.xc=ie,V=0;V<se;++V){var le=ee[V]>>8&65535;ee[V]=le,le>=te&&(te=le+1)}}if(J.h)break n;for(W=0;5>W;++W){var ce=Kr[W];!W&&0<X&&(ce+=1<<X),ne<ce&&(ne=ce)}var ue=a(te*re,d),de=te,he=a(de,p);if(null==he)var pe=null;else t(65536>=de),pe=he;var Ae=o(ne);if(null==pe||null==Ae||null==ue){q.a=1;break n}var fe=ue;for(V=G=0;V<te;++V){var me=pe[V],ge=me.G,ve=me.H,be=0,we=1,xe=0;for(W=0;5>W;++W){ce=Kr[W],ge[W]=fe,ve[W]=G,!W&&0<X&&(ce+=1<<X);r:{var Ce,Se=ce,Be=q,Me=Ae,Te=fe,De=G,Fe=0,Ie=Be.m,ke=y(Ie,1);if(i(Me,0,0,Se),ke){var Oe=y(Ie,1)+1,Le=y(Ie,1),Re=y(Ie,0==Le?1:8);Me[Re]=1,2==Oe&&(Me[Re=y(Ie,8)]=1);var Ue=1}else{var ze=o(19),Ne=y(Ie,4)+4;if(19<Ne){Be.a=3;var je=0;break r}for(Ce=0;Ce<Ne;++Ce)ze[Xr[Ce]]=y(Ie,3);var He=void 0,Qe=void 0,Ve=Be,We=ze,Ge=Se,qe=Me,Ke=0,Ye=Ve.m,Xe=8,$e=a(128,d);i:for(;u($e,0,7,We,19);){if(y(Ye,1)){var Je=2+2*y(Ye,3);if((He=2+y(Ye,Je))>Ge)break i}else He=Ge;for(Qe=0;Qe<Ge&&He--;){B(Ye);var Ze=$e[0+(127&x(Ye))];S(Ye,Ye.u+Ze.g);var et=Ze.value;if(16>et)qe[Qe++]=et,0!=et&&(Xe=et);else{var tt=16==et,nt=et-16,rt=qr[nt],it=y(Ye,Gr[nt])+rt;if(Qe+it>Ge)break i;for(var ot=tt?Xe:0;0<it--;)qe[Qe++]=ot}}Ke=1;break i}Ke||(Ve.a=3),Ue=Ke}(Ue=Ue&&!Ie.h)&&(Fe=u(Te,De,8,Me,Se)),Ue&&0!=Fe?je=Fe:(Be.a=3,je=0)}if(0==je)break n;if(we&&1==Yr[W]&&(we=0==fe[G].g),be+=fe[G].g,G+=je,3>=W){var at,st=Ae[0];for(at=1;at<ce;++at)Ae[at]>st&&(st=Ae[at]);xe+=st}}if(me.nd=we,me.Qb=0,we&&(me.qb=(ge[3][ve[3]+0].value<<24|ge[1][ve[1]+0].value<<16|ge[2][ve[2]+0].value)>>>0,0==be&&256>ge[0][ve[0]+0].value&&(me.Qb=1,me.qb+=ge[0][ve[0]+0].value<<8)),me.jc=!me.Qb&&6>xe,me.jc){var lt,ct=me;for(lt=0;lt<Un;++lt){var ut=lt,dt=ct.pd[ut],ht=ct.G[0][ct.H[0]+ut];256<=ht.value?(dt.g=ht.g+256,dt.value=ht.value):(dt.g=0,dt.value=0,ut>>=ye(ht,8,dt),ut>>=ye(ct.G[1][ct.H[1]+ut],16,dt),ut>>=ye(ct.G[2][ct.H[2]+ut],0,dt),ye(ct.G[3][ct.H[3]+ut],24,dt))}}}Z.vc=ee,Z.Wb=te,Z.Ya=pe,Z.yc=ue,Q=1;break t}Q=0}if(!(c=Q)){s.a=3;break e}if(0<v){if(m.ua=1<<v,!I(m.Wa,v)){s.a=1,c=0;break e}}else m.ua=0;var pt=s,At=h,ft=A,mt=pt.s,gt=mt.xc;if(pt.c=At,pt.i=ft,mt.md=R(At,gt),mt.wc=0==gt?-1:(1<<gt)-1,r){s.xb=pi;break e}if(null==(g=o(h*A))){s.a=1,c=0;break e}c=(c=_e(s,g,0,h,A,A,null))&&!f.h;break e}return c?(null!=l?l[0]=g:(t(null==g),t(r)),s.$=0,r||Ee(m)):Ee(m),c}function Te(e,n){var r=e.c*e.i,i=r+n+16*n;return t(e.c<=n),e.V=o(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function De(e,n){var r=e.C,i=n-r,o=e.V,a=e.Ba+e.c*r;for(t(n<=e.l.o);0<i;){var s=16<i?16:i,l=e.l.ma,c=e.l.width,u=c*s,d=l.ca,h=l.tb+c*r,p=e.Ta,A=e.Ua;we(e,s,o,a),Br(p,A,d,h,u),Se(l,r,r+s,d,h,c),i-=s,o+=s*e.c,r+=s}t(r==n),e.C=e.Ma=n}function Fe(){this.ub=this.yd=this.td=this.Rb=0}function Ie(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ke(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Oe(){var e;this.Yb=(function e(t,n,r){for(var i=r[n],o=0;o<i&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));o++)e(t[o],n+1,r)}(e=[],0,[3,11]),e)}function Le(){this.jb=o(3),this.Wc=s([4,8],Oe),this.Xc=s([4,17],Oe)}function Re(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ue(){this.ld=this.La=this.dd=this.tc=0}function ze(){this.Na=this.la=0}function Ne(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function je(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function He(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ue),this.Y=0,this.ya=Array(new je),this.aa=0,this.l=new Ge}function Qe(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ve(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new Fe,this.Kc=new Ie,this.ed=new Re,this.Qa=new ke,this.Ic=this.$c=this.Aa=0,this.D=new He,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,b),this.ia=0,this.pb=a(4,Ne),this.Pa=new Le,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qe),this.Hd=0,this.rb=Array(new ze),this.sb=0,this.wa=Array(new Ue),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new je),this.L=this.aa=0,this.gd=s([4,2],Ue),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function We(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function qe(){var e=new Ve;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ni||(ni=$e)),e}function Ke(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Ye(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Xe(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Ke(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,o=n.w,a=n.ha;if(4>a)return Ke(e,7,"Truncated header.");var s=r[o+0]|r[o+1]<<8|r[o+2]<<16,l=e.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return Ke(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ke(e,4,"Frame not displayable.");o+=3,a-=3;var c=e.Kc;if(l.Rb){if(7>a)return Ke(e,7,"cannot parse picture header");if(!Ye(r,o,a))return Ke(e,3,"Bad code word");c.c=16383&(r[o+4]<<8|r[o+3]),c.Td=r[o+4]>>6,c.i=16383&(r[o+6]<<8|r[o+5]),c.Ud=r[o+6]>>6,o+=7,a-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((s=e.Pa).jb,0,255,s.jb.length),t(null!=(s=e.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(l.ub>a)return Ke(e,7,"bad partition length");A(s=e.m,r,o,l.ub),o+=l.ub,a-=l.ub,l.Rb&&(c.Ld=E(s),c.Kd=E(s)),c=e.Qa;var u,d=e.Pa;if(t(null!=s),t(null!=c),c.Cb=E(s),c.Cb){if(c.Bb=E(s),E(s)){for(c.Fb=E(s),u=0;4>u;++u)c.Zb[u]=E(s)?m(s,7):0;for(u=0;4>u;++u)c.Lb[u]=E(s)?m(s,6):0}if(c.Bb)for(u=0;3>u;++u)d.jb[u]=E(s)?f(s,8):255}else c.Bb=0;if(s.Ka)return Ke(e,3,"cannot parse segment header");if((c=e.ed).zd=E(s),c.Tb=f(s,6),c.wb=f(s,3),c.Pc=E(s),c.Pc&&E(s)){for(d=0;4>d;++d)E(s)&&(c.vd[d]=m(s,6));for(d=0;4>d;++d)E(s)&&(c.od[d]=m(s,6))}if(e.L=0==c.Tb?0:c.zd?1:2,s.Ka)return Ke(e,3,"cannot parse filter header");var h=a;if(a=u=o,o=u+h,c=h,e.Xb=(1<<f(e.m,2))-1,h<3*(d=e.Xb))r=7;else{for(u+=3*d,c-=3*d,h=0;h<d;++h){var p=r[a+0]|r[a+1]<<8|r[a+2]<<16;p>c&&(p=c),A(e.Jc[+h],r,u,p),u+=p,c-=p,a+=3}A(e.Jc[+d],r,u,c),r=u<o?0:5}if(0!=r)return Ke(e,r,"cannot parse partitions");for(r=f(u=e.m,7),a=E(u)?m(u,4):0,o=E(u)?m(u,4):0,c=E(u)?m(u,4):0,d=E(u)?m(u,4):0,u=E(u)?m(u,4):0,h=e.Qa,p=0;4>p;++p){if(h.Cb){var g=h.Zb[p];h.Fb||(g+=r)}else{if(0<p){e.pb[p]=e.pb[0];continue}g=r}var v=e.pb[p];v.Sc[0]=ei[We(g+a,127)],v.Sc[1]=ti[We(g+0,127)],v.Eb[0]=2*ei[We(g+o,127)],v.Eb[1]=101581*ti[We(g+c,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=ei[We(g+d,117)],v.Qc[1]=ti[We(g+u,127)],v.lc=g+u}if(!l.Rb)return Ke(e,4,"Not a key frame.");for(E(s),l=e.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(o=0;3>o;++o)for(c=0;11>c;++c)d=M(s,li[r][a][o][c])?f(s,8):ai[r][a][o][c],l.Wc[r][a].Yb[o][c]=d;for(a=0;17>a;++a)l.Xc[r][a]=l.Wc[r][ci[a]]}return e.kc=E(s),e.kc&&(e.Bd=f(s,8)),e.cb=1}function $e(e,t,n,r,i,o,a){var s=t[i].Yb[n];for(n=0;16>i;++i){if(!M(e,s[n+0]))return i;for(;!M(e,s[n+1]);)if(s=t[++i].Yb[0],n=0,16==i)return 16;var l=t[i+1].Yb;if(M(e,s[n+2])){var c=e,u=0;if(M(c,(h=s)[(d=n)+3]))if(M(c,h[d+6])){for(s=0,d=2*(u=M(c,h[d+8]))+(h=M(c,h[d+9+u])),u=0,h=ri[d];h[s];++s)u+=u+M(c,h[s]);u+=3+(8<<d)}else M(c,h[d+7])?(u=7+2*M(c,165),u+=M(c,145)):u=5+M(c,159);else u=M(c,h[d+4])?3+M(c,h[d+5]):2;s=l[2]}else u=1,s=l[1];l=a+ii[i],0>(c=e).b&&_(c);var d,h=c.b,p=(d=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=p,c.Ca|=1,c.I-=(d+1&p)<<h,o[l]=((u^p)-p)*r[(0<i)+0]}return 16}function Je(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,t,n,r,i){i=e[t+n+32*r]+(i>>3),e[t+n+32*r]=-256&i?0>i?0:255:i}function et(e,t,n,r,i,o){Ze(e,t,0,n,r+i),Ze(e,t,1,n,r+o),Ze(e,t,2,n,r-o),Ze(e,t,3,n,r-i)}function tt(e){return(20091*e>>16)+e}function nt(e,t,n,r){var i,a=0,s=o(16);for(i=0;4>i;++i){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-tt(e[t+12]),d=tt(e[t+4])+(35468*e[t+12]>>16);s[a+0]=l+d,s[a+1]=c+u,s[a+2]=c-u,s[a+3]=l-d,a+=4,t++}for(i=a=0;4>i;++i)l=(e=s[a+0]+4)+s[a+8],c=e-s[a+8],u=(35468*s[a+4]>>16)-tt(s[a+12]),Ze(n,r,0,0,l+(d=tt(s[a+4])+(35468*s[a+12]>>16))),Ze(n,r,1,0,c+u),Ze(n,r,2,0,c-u),Ze(n,r,3,0,l-d),a++,r+=32}function rt(e,t,n,r){var i=e[t+0]+4,o=35468*e[t+4]>>16,a=tt(e[t+4]),s=35468*e[t+1]>>16;et(n,r,0,i+a,e=tt(e[t+1]),s),et(n,r,1,i+o,e,s),et(n,r,2,i-o,e,s),et(n,r,3,i-a,e,s)}function it(e,t,n,r,i){nt(e,t,n,r),i&&nt(e,t+16,n,r+4)}function ot(e,t,n,r){or(e,t+0,n,r,1),or(e,t+32,n,r+128,1)}function at(e,t,n,r){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)Ze(n,r,t,i,e)}function st(e,t,n,r){e[t+0]&&lr(e,t+0,n,r),e[t+16]&&lr(e,t+16,n,r+4),e[t+32]&&lr(e,t+32,n,r+128),e[t+48]&&lr(e,t+48,n,r+128+4)}function lt(e,t,n,r){var i,a=o(16);for(i=0;4>i;++i){var s=e[t+0+i]+e[t+12+i],l=e[t+4+i]+e[t+8+i],c=e[t+4+i]-e[t+8+i],u=e[t+0+i]-e[t+12+i];a[0+i]=s+l,a[8+i]=s-l,a[4+i]=u+c,a[12+i]=u-c}for(i=0;4>i;++i)s=(e=a[0+4*i]+3)+a[3+4*i],l=a[1+4*i]+a[2+4*i],c=a[1+4*i]-a[2+4*i],u=e-a[3+4*i],n[r+0]=s+l>>3,n[r+16]=u+c>>3,n[r+32]=s-l>>3,n[r+48]=u-c>>3,r+=64}function ct(e,t,n){var r,i=t-32,o=Ir,a=255-e[i-1];for(r=0;r<n;++r){var s,l=o,c=a+e[t-1];for(s=0;s<n;++s)e[t+s]=l[c+e[i+s]];t+=32}}function ut(e,t){ct(e,t,4)}function dt(e,t){ct(e,t,8)}function ht(e,t){ct(e,t,16)}function pt(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function At(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function ft(e,t,n){var r;for(r=0;16>r;++r)i(t,n+32*r,e,16)}function mt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];ft(r>>5,e,t)}function gt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];ft(r>>4,e,t)}function vt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];ft(r>>4,e,t)}function yt(e,t){ft(128,e,t)}function bt(e,t,n){return e+2*t+n+2>>2}function wt(e,t){var n,i=t-32;for(i=new Uint8Array([bt(e[i-1],e[i+0],e[i+1]),bt(e[i+0],e[i+1],e[i+2]),bt(e[i+1],e[i+2],e[i+3]),bt(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)r(e,t+32*n,i,0,i.length)}function xt(e,t){var n=e[t-1],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96];P(e,t+0,16843009*bt(e[t-1-32],n,r)),P(e,t+32,16843009*bt(n,r,i)),P(e,t+64,16843009*bt(r,i,o)),P(e,t+96,16843009*bt(i,o,o))}function Ct(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)i(e,t+32*n,r,4)}function St(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1-32],a=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=bt(r,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=bt(n,r,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=bt(o,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=bt(a,o,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=bt(s,a,o),e[t+3+32]=e[t+2+0]=bt(l,s,a),e[t+3+0]=bt(c,l,s)}function Bt(e,t){var n=e[t+1-32],r=e[t+2-32],i=e[t+3-32],o=e[t+4-32],a=e[t+5-32],s=e[t+6-32],l=e[t+7-32];e[t+0+0]=bt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=bt(n,r,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=bt(r,i,o),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=bt(i,o,a),e[t+3+32]=e[t+2+64]=e[t+1+96]=bt(o,a,s),e[t+3+64]=e[t+2+96]=bt(a,s,l),e[t+3+96]=bt(s,l,l)}function _t(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1-32],a=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=o+a+1>>1,e[t+1+0]=e[t+2+64]=a+s+1>>1,e[t+2+0]=e[t+3+64]=s+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=bt(i,r,n),e[t+0+64]=bt(r,n,o),e[t+0+32]=e[t+1+96]=bt(n,o,a),e[t+1+32]=e[t+2+96]=bt(o,a,s),e[t+2+32]=e[t+3+96]=bt(a,s,l),e[t+3+32]=bt(s,l,c)}function Et(e,t){var n=e[t+0-32],r=e[t+1-32],i=e[t+2-32],o=e[t+3-32],a=e[t+4-32],s=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+i+1>>1,e[t+2+0]=e[t+1+64]=i+o+1>>1,e[t+3+0]=e[t+2+64]=o+a+1>>1,e[t+0+32]=bt(n,r,i),e[t+1+32]=e[t+0+96]=bt(r,i,o),e[t+2+32]=e[t+1+96]=bt(i,o,a),e[t+3+32]=e[t+2+96]=bt(o,a,s),e[t+3+64]=bt(a,s,l),e[t+3+96]=bt(s,l,c)}function Mt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+i+1>>1,e[t+2+32]=e[t+0+64]=i+o+1>>1,e[t+1+0]=bt(n,r,i),e[t+3+0]=e[t+1+32]=bt(r,i,o),e[t+3+32]=e[t+1+64]=bt(i,o,o),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=o}function Pt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96],a=e[t-1-32],s=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+a+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=i+r+1>>1,e[t+0+96]=o+i+1>>1,e[t+3+0]=bt(s,l,c),e[t+2+0]=bt(a,s,l),e[t+1+0]=e[t+3+32]=bt(n,a,s),e[t+1+32]=e[t+3+64]=bt(r,n,a),e[t+1+64]=e[t+3+96]=bt(i,r,n),e[t+1+96]=bt(o,i,r)}function Tt(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Dt(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Ft(e,t,n){var r;for(r=0;8>r;++r)i(t,n+32*r,e,8)}function It(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Ft(r>>4,e,t)}function kt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Ft(r>>3,e,t)}function Ot(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Ft(r>>3,e,t)}function Lt(e,t){Ft(128,e,t)}function Rt(e,t,n){var r=e[t-n],i=e[t+0],o=3*(i-r)+Dr[1020+e[t-2*n]-e[t+n]],a=Fr[112+(o+4>>3)];e[t-n]=Ir[255+r+Fr[112+(o+3>>3)]],e[t+0]=Ir[255+i-a]}function Ut(e,t,n,r){var i=e[t+0],o=e[t+n];return kr[255+e[t-2*n]-e[t-n]]>r||kr[255+o-i]>r}function zt(e,t,n,r){return 4*kr[255+e[t-n]-e[t+0]]+kr[255+e[t-2*n]-e[t+n]]<=r}function Nt(e,t,n,r,i){var o=e[t-3*n],a=e[t-2*n],s=e[t-n],l=e[t+0],c=e[t+n],u=e[t+2*n],d=e[t+3*n];return 4*kr[255+s-l]+kr[255+a-c]>r?0:kr[255+e[t-4*n]-o]<=i&&kr[255+o-a]<=i&&kr[255+a-s]<=i&&kr[255+d-u]<=i&&kr[255+u-c]<=i&&kr[255+c-l]<=i}function jt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)zt(e,t+r,n,i)&&Rt(e,t+r,n)}function Ht(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)zt(e,t+r*n,1,i)&&Rt(e,t+r*n,1)}function Qt(e,t,n,r){var i;for(i=3;0<i;--i)jt(e,t+=4*n,n,r)}function Vt(e,t,n,r){var i;for(i=3;0<i;--i)Ht(e,t+=4,n,r)}function Wt(e,t,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Nt(e,t,n,o,a))if(Ut(e,t,n,s))Rt(e,t,n);else{var l=e,c=t,u=n,d=l[c-2*u],h=l[c-u],p=l[c+0],A=l[c+u],f=l[c+2*u],m=27*(v=Dr[1020+3*(p-h)+Dr[1020+d-A]])+63>>7,g=18*v+63>>7,v=9*v+63>>7;l[c-3*u]=Ir[255+l[c-3*u]+v],l[c-2*u]=Ir[255+d+g],l[c-u]=Ir[255+h+m],l[c+0]=Ir[255+p-m],l[c+u]=Ir[255+A-g],l[c+2*u]=Ir[255+f-v]}t+=r}}function Gt(e,t,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Nt(e,t,n,o,a))if(Ut(e,t,n,s))Rt(e,t,n);else{var l=e,c=t,u=n,d=l[c-u],h=l[c+0],p=l[c+u],A=Fr[112+(4+(f=3*(h-d))>>3)],f=Fr[112+(f+3>>3)],m=A+1>>1;l[c-2*u]=Ir[255+l[c-2*u]+m],l[c-u]=Ir[255+d+f],l[c+0]=Ir[255+h-A],l[c+u]=Ir[255+p-m]}t+=r}}function qt(e,t,n,r,i,o){Wt(e,t,n,1,16,r,i,o)}function Kt(e,t,n,r,i,o){Wt(e,t,1,n,16,r,i,o)}function Yt(e,t,n,r,i,o){var a;for(a=3;0<a;--a)Gt(e,t+=4*n,n,1,16,r,i,o)}function Xt(e,t,n,r,i,o){var a;for(a=3;0<a;--a)Gt(e,t+=4,1,n,16,r,i,o)}function $t(e,t,n,r,i,o,a,s){Wt(e,t,i,1,8,o,a,s),Wt(n,r,i,1,8,o,a,s)}function Jt(e,t,n,r,i,o,a,s){Wt(e,t,1,i,8,o,a,s),Wt(n,r,1,i,8,o,a,s)}function Zt(e,t,n,r,i,o,a,s){Gt(e,t+4*i,i,1,8,o,a,s),Gt(n,r+4*i,i,1,8,o,a,s)}function en(e,t,n,r,i,o,a,s){Gt(e,t+4,1,i,8,o,a,s),Gt(n,r+4,1,i,8,o,a,s)}function tn(){this.ba=new ae,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new O,this.vb=new O,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new d}function an(){this.xb=this.a=0,this.l=new Ge,this.ca=new ae,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=a(4,rn),this.Oc=0}function sn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,r,i,o,a){for(e=null==e?0:e[t+0],t=0;t<a;++t)i[o+t]=e+n[r+t]&255,e=i[o+t]}function cn(e,t,n,r,i,o,a){var s;if(null==e)ln(null,null,n,r,i,o,a);else for(s=0;s<a;++s)i[o+s]=e[t+s]+n[r+s]&255}function un(e,t,n,r,i,o,a){if(null==e)ln(null,null,n,r,i,o,a);else{var s,l=e[t+0],c=l,u=l;for(s=0;s<a;++s)c=u+(l=e[t+s])-c,u=n[r+s]+(-256&c?0>c?0:255:c)&255,c=l,i[o+s]=u}}function dn(e,n,i,a){var s=n.width,l=n.o;if(t(null!=e&&null!=n),0>i||0>=a||i+a>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new sn,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=o(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,d=e.P,h=e.qc,p=e.mb,A=e.nb,f=d+1,m=h-1,v=c.l;if(t(null!=u&&null!=p&&null!=n),fi[0]=null,fi[1]=ln,fi[2]=cn,fi[3]=un,c.ca=p,c.tb=A,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=h)n=0;else if(c.$a=3&u[d+0],c.Z=u[d+0]>>2&3,c.Lc=u[d+0]>>4&3,d=u[d+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||d)n=0;else if(v.put=pe,v.ac=he,v.bc=Ae,v.ma=c,v.width=n.width,v.height=n.height,v.Da=n.Da,v.v=n.v,v.va=n.va,v.j=n.j,v.o=n.o,c.$a)e:{t(1==c.$a),n=Me();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,g(n.m,u,f,m),!Pe(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ce(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Te(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=m>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:a=l-i}t(null!=e.ga),t(i+a<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(f=e.rc,m=e.Vc,v=e.Fa,d=e.P+1+i*n,h=e.mb,p=e.nb+i*n,t(d<=e.P+e.qc),0!=u.Z)for(t(null!=fi[u.Z]),c=0;c<a;++c)fi[u.Z](f,m,v,d,h,p,n),f=h,m=p,p+=n,d+=n;else for(c=0;c<a;++c)r(h,p,v,d,n),f=h,m=p,p+=n,d+=n;e.rc=f,e.Vc=m}else{if(t(null!=u.mc),n=i+a,t(null!=(c=u.mc)),t(n<=c.i),c.C>=n)n=1;else if(u.ic||mn(),u.ic){u=c.V,f=c.Ba,m=c.c;var y=c.i,b=(v=1,d=c.$/m,h=c.$%m,p=c.m,A=c.s,c.$),w=m*y,x=m*n,S=A.wc,_=b<x?be(A,h,d):null;t(b<=w),t(n<=y),t(Ce(A));t:for(;;){for(;!p.h&&b<x;){if(h&S||(_=be(A,h,d)),t(null!=_),B(p),256>(y=ve(_.G[0],_.H[0],p)))u[f+b]=y,++b,++h>=m&&(h=0,++d<=n&&!(d%16)&&Be(c,d));else{if(!(280>y)){v=0;break t}y=me(y-256,p);var E,M=ve(_.G[4],_.H[4],p);if(B(p),!(b>=(M=ge(m,M=me(M,p)))&&w-b>=y)){v=0;break t}for(E=0;E<y;++E)u[f+b+E]=u[f+b+E-M];for(b+=y,h+=y;h>=m;)h-=m,++d<=n&&!(d%16)&&Be(c,d);b<x&&h&S&&(_=be(A,h,d))}t(p.h==C(p))}Be(c,d>n?n:d);break t}!v||p.h&&b<w?(v=0,c.a=p.h?5:3):c.$=b,n=v}else n=_e(c,c.V,c.Ba,c.c,c.i,n,De);if(!n){a=0;break e}}i+a>=l&&(e.Cc=1),a=1}if(!a)return null;if(e.Cc&&(null!=(a=e.ga)&&(a.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*s}function hn(e,t,n,r,i,o){for(;0<i--;){var a,s=e,l=t+(n?1:0),c=e,u=t+(n?0:3);for(a=0;a<r;++a){var d=c[u+4*a];255!=d&&(d*=32897,s[l+4*a+0]=s[l+4*a+0]*d>>23,s[l+4*a+1]=s[l+4*a+1]*d>>23,s[l+4*a+2]=s[l+4*a+2]*d>>23)}t+=o}}function pn(e,t,n,r,i){for(;0<r--;){var o;for(o=0;o<n;++o){var a=e[t+2*o+0],s=15&(c=e[t+2*o+1]),l=4369*s,c=(240&c|c>>4)*l>>16;e[t+2*o+0]=(240&a|a>>4)*l>>16&240|(15&a|a<<4)*l>>16>>4&15,e[t+2*o+1]=240&c|s}t+=i}}function An(e,t,n,r,i,o,a,s){var l,c,u=255;for(c=0;c<i;++c){for(l=0;l<r;++l){var d=e[t+l];o[a+4*l]=d,u&=d}t+=n,a+=s}return 255!=u}function fn(e,t,n,r,i){var o;for(o=0;o<i;++o)n[r+o]=e[t+o]>>8}function mn(){xr=hn,Cr=pn,Sr=An,Br=fn}function gn(n,r,i){e[n]=function(e,n,o,a,s,l,c,u,d,h,p,A,f,m,g,v,y){var b,w=y-1>>1,x=s[l+0]|c[u+0]<<16,C=d[h+0]|p[A+0]<<16;t(null!=e);var S=3*x+C+131074>>2;for(r(e[n+0],255&S,S>>16,f,m),null!=o&&(S=3*C+x+131074>>2,r(o[a+0],255&S,S>>16,g,v)),b=1;b<=w;++b){var B=s[l+b]|c[u+b]<<16,_=d[h+b]|p[A+b]<<16,E=x+B+C+_+524296,M=E+2*(B+C)>>3;S=M+x>>1,x=(E=E+2*(x+_)>>3)+B>>1,r(e[n+2*b-1],255&S,S>>16,f,m+(2*b-1)*i),r(e[n+2*b-0],255&x,x>>16,f,m+(2*b-0)*i),null!=o&&(S=E+C>>1,x=M+_>>1,r(o[a+2*b-1],255&S,S>>16,g,v+(2*b-1)*i),r(o[a+2*b+0],255&x,x>>16,g,v+(2*b+0)*i)),x=B,C=_}1&y||(S=3*x+C+131074>>2,r(e[n+y-1],255&S,S>>16,f,m+(y-1)*i),null!=o&&(S=3*C+x+131074>>2,r(o[a+y-1],255&S,S>>16,g,v+(y-1)*i)))}}function vn(){mi[Or]=gi,mi[Lr]=yi,mi[Rr]=vi,mi[Ur]=bi,mi[zr]=wi,mi[Nr]=xi,mi[jr]=Ci,mi[Hr]=yi,mi[Qr]=bi,mi[Vr]=wi,mi[Wr]=xi}function yn(e){return e&~Pi?0>e?0:255:e>>Mi}function bn(e,t){return yn((19077*e>>8)+(26149*t>>8)-14234)}function wn(e,t,n){return yn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function xn(e,t){return yn((19077*e>>8)+(33050*t>>8)-17685)}function Cn(e,t,n,r,i){r[i+0]=bn(e,n),r[i+1]=wn(e,t,n),r[i+2]=xn(e,t)}function Sn(e,t,n,r,i){r[i+0]=xn(e,t),r[i+1]=wn(e,t,n),r[i+2]=bn(e,n)}function Bn(e,t,n,r,i){var o=wn(e,t,n);t=o<<3&224|xn(e,t)>>3,r[i+0]=248&bn(e,n)|o>>5,r[i+1]=t}function _n(e,t,n,r,i){var o=240&xn(e,t)|15;r[i+0]=240&bn(e,n)|wn(e,t,n)>>4,r[i+1]=o}function En(e,t,n,r,i){r[i+0]=255,Cn(e,t,n,r,i+1)}function Mn(e,t,n,r,i){Sn(e,t,n,r,i),r[i+3]=255}function Pn(e,t,n,r,i){Cn(e,t,n,r,i),r[i+3]=255}function We(e,t){return 0>e?0:e>t?t:e}function Tn(t,n,r){e[t]=function(e,t,i,o,a,s,l,c,u){for(var d=c+(-2&u)*r;c!=d;)n(e[t+0],i[o+0],a[s+0],l,c),n(e[t+1],i[o+0],a[s+0],l,c+r),t+=2,++o,++s,c+=2*r;1&u&&n(e[t+0],i[o+0],a[s+0],l,c)}}function Dn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Fn(e,t,n,r,i){switch(e>>>30){case 3:or(t,n,r,i,0);break;case 2:ar(t,n,r,i);break;case 1:lr(t,n,r,i)}}function In(e,t){var n,o,a=t.M,s=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,d=e.pc+584,h=e.oc,p=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[d+32*n-1]=129,h[p+32*n-1]=129;for(0<a?l[c-1-32]=u[d-1-32]=h[p-1-32]=129:(i(l,c-32-1,127,21),i(u,d-32-1,127,9),i(h,p-32-1,127,9)),o=0;o<e.za;++o){var A=t.ya[t.aa+o];if(0<o){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(u,d+32*n-4,u,d+32*n+4,4),r(h,p+32*n-4,h,p+32*n+4,4)}var f=e.Gd,m=e.Hd+o,g=A.ad,v=A.Hc;if(0<a&&(r(l,c-32,f[m].y,0,16),r(u,d-32,f[m].f,0,8),r(h,p-32,f[m].ea,0,8)),A.Za){var y=l,b=c-32+16;for(0<a&&(o>=e.za-1?i(y,b,f[m].y[15],4):r(y,b,f[m+1].y,0,4)),n=0;4>n;n++)y[b+128+n]=y[b+256+n]=y[b+384+n]=y[b+0+n];for(n=0;16>n;++n,v<<=2)y=l,b=c+Ri[n],di[A.Ob[n]](y,b),Fn(v,g,16*+n,y,b)}else if(y=Dn(o,a,A.Ob[0]),ui[y](l,c),0!=v)for(n=0;16>n;++n,v<<=2)Fn(v,g,16*+n,l,c+Ri[n]);for(n=A.Gc,y=Dn(o,a,A.Dd),hi[y](u,d),hi[y](h,p),v=g,y=u,b=d,255&(A=n|0)&&(170&A?sr(v,256,y,b):cr(v,256,y,b)),A=h,v=p,255&(n>>=8)&&(170&n?sr(g,320,A,v):cr(g,320,A,v)),a<e.Ub-1&&(r(f[m].y,0,l,c+480,16),r(f[m].f,0,u,d+224,8),r(f[m].ea,0,h,p+224,8)),n=8*s*e.B,f=e.sa,m=e.ta+16*o+16*s*e.R,g=e.qa,A=e.ra+8*o+n,v=e.Ha,y=e.Ia+8*o+n,n=0;16>n;++n)r(f,m+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(g,A+n*e.B,u,d+32*n,8),r(v,y+n*e.B,h,p+32*n,8)}}function kn(e,r,i,o,a,s,l,c,u){var d=[0],h=[0],p=0,A=null!=u?u.kd:0,f=null!=u?u:new nn;if(null==e||12>i)return 7;f.data=e,f.w=r,f.ha=i,r=[r],i=[i],f.gb=[f.gb];e:{var m=r,v=i,y=f.gb;if(t(null!=e),t(null!=v),t(null!=y),y[0]=0,12<=v[0]&&!n(e,m[0],"RIFF")){if(n(e,m[0]+8,"WEBP")){y=3;break e}var b=F(e,m[0]+4);if(12>b||4294967286<b){y=3;break e}if(A&&b>v[0]-8){y=7;break e}y[0]=b,m[0]+=12,v[0]-=12}y=0}if(0!=y)return y;for(b=0<f.gb[0],i=i[0];;){e:{var x=e;v=r,y=i;var C=d,S=h,B=m=[0];if((M=p=[p])[0]=0,8>y[0])y=7;else{if(!n(x,v[0],"VP8X")){if(10!=F(x,v[0]+4)){y=3;break e}if(18>y[0]){y=7;break e}var _=F(x,v[0]+8),E=1+D(x,v[0]+12);if(2147483648<=E*(x=1+D(x,v[0]+15))){y=3;break e}null!=B&&(B[0]=_),null!=C&&(C[0]=E),null!=S&&(S[0]=x),v[0]+=18,y[0]-=18,M[0]=1}y=0}}if(p=p[0],m=m[0],0!=y)return y;if(v=!!(2&m),!b&&p)return 3;if(null!=s&&(s[0]=!!(16&m)),null!=l&&(l[0]=v),null!=c&&(c[0]=0),l=d[0],m=h[0],p&&v&&null==u){y=0;break}if(4>i){y=7;break}if(b&&p||!b&&!p&&!n(e,r[0],"ALPH")){i=[i],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{_=e,y=r,b=i;var M=f.gb;C=f.na,S=f.P,B=f.Sa,E=22,t(null!=_),t(null!=b),x=y[0];var P=b[0];for(t(null!=C),t(null!=B),C[0]=null,S[0]=null,B[0]=0;;){if(y[0]=x,b[0]=P,8>P){y=7;break e}var T=F(_,x+4);if(4294967286<T){y=3;break e}var I=8+T+1&-2;if(E+=I,0<M&&E>M){y=3;break e}if(!n(_,x,"VP8 ")||!n(_,x,"VP8L")){y=0;break e}if(P[0]<I){y=7;break e}n(_,x,"ALPH")||(C[0]=_,S[0]=x+8,B[0]=T),x+=I,P-=I}}if(i=i[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=y)break}i=[i],f.Ja=[f.Ja],f.xa=[f.xa];e:if(M=e,y=r,b=i,C=f.gb[0],S=f.Ja,B=f.xa,_=y[0],x=!n(M,_,"VP8 "),E=!n(M,_,"VP8L"),t(null!=M),t(null!=b),t(null!=S),t(null!=B),8>b[0])y=7;else{if(x||E){if(M=F(M,_+4),12<=C&&M>C-12){y=3;break e}if(A&&M>b[0]-8){y=7;break e}S[0]=M,y[0]+=8,b[0]-=8,B[0]=E}else B[0]=5<=b[0]&&47==M[_+0]&&!(M[_+4]>>5),S[0]=b[0];y=0}if(i=i[0],f.Ja=f.Ja[0],f.xa=f.xa[0],r=r[0],0!=y)break;if(4294967286<f.Ja)return 3;if(null==c||v||(c[0]=f.xa?2:1),l=[l],m=[m],f.xa){if(5>i){y=7;break}c=l,A=m,v=s,null==e||5>i?e=0:5<=i&&47==e[r+0]&&!(e[r+4]>>5)?(b=[0],M=[0],C=[0],g(S=new w,e,r,i),fe(S,b,M,C)?(null!=c&&(c[0]=b[0]),null!=A&&(A[0]=M[0]),null!=v&&(v[0]=C[0]),e=1):e=0):e=0}else{if(10>i){y=7;break}c=m,null==e||10>i||!Ye(e,r+3,i-3)?e=0:(A=e[r+0]|e[r+1]<<8|e[r+2]<<16,v=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&A||3<(A>>1&7)||!(A>>4&1)||A>>5>=f.Ja||!v||!e?e=0:(l&&(l[0]=v),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],m=m[0],p&&(d[0]!=l||h[0]!=m))return 3;null!=u&&(u[0]=f,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-i));break}return 0==y||7==y&&p&&null==u?(null!=s&&(s[0]|=null!=f.na&&0<f.na.length),null!=o&&(o[0]=l),null!=a&&(a[0]=m),0):y}function On(e,t,n){var r=t.width,i=t.height,o=0,a=0,s=r,l=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(s=e.cd,l=e.bd,o=e.v,a=e.j,11>n||(o&=-2,a&=-2),0>o||0>a||0>=s||0>=l||o+s>r||a+l>i))return 0;if(t.v=o,t.j=a,t.va=o+s,t.o=a+l,t.U=s,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!L(s,l,n=[e.ib],o=[e.hb]))return 0;t.ib=n[0],t.hb=o[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*i/4,t.Kb=0),1}function Ln(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Rn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,a=n.bd,s=-2&n.v,l=-2&n.j;if(0>s||0>l||0>=i||0>=a||s+i>e||l+a>t)return 2;e=i,t=a}if(n.da){if(!L(e,t,i=[n.ib],a=[n.hb]))return 2;e=i[0],t=a[0]}}r.width=e,r.height=t;e:{var c=r.width,u=r.height;if(e=r.S,0>=c||0>=u||!(e>=Or&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){s=a=i=t=0;var d=(l=c*ji[e])*u;if(11>e||(a=(u+1)/2*(t=(c+1)/2),12==e&&(s=(i=c)*u)),null==(u=o(d+2*a+s))){e=1;break e}r.sd=u,11>e?((c=r.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=d):((c=r.f.kb).y=u,c.O=0,c.fa=l,c.Fd=d,c.f=u,c.N=0+d,c.Ab=t,c.Cd=a,c.ea=u,c.W=0+d+a,c.Db=t,c.Ed=a,12==e&&(c.F=u,c.J=0+d+2*a),c.Tc=s,c.lb=i)}if(t=1,i=r.S,a=r.width,s=r.height,i>=Or&&13>i)if(11>i)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(s-1)+a<=e.size,t&=l>=a*ji[i],t&=null!=e.eb;else{e=r.f.kb,l=(a+1)/2,d=(s+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var h=Math.abs(e.Db),p=Math.abs(e.lb),A=p*(s-1)+a;t&=c*(s-1)+a<=e.Fd,t&=u*(d-1)+l<=e.Cd,t=(t&=h*(d-1)+l<=e.Ed)&c>=a&u>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=p>=a,t&=A<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Ln(r)),e}var Un=64,zn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Nn=24,jn=32,Hn=8,Qn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];z("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return j(j(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return j(e,t[n-1])},e.Predictor7=function(e,t,n){return j(e,t[n+0])},e.Predictor8=function(e,t,n){return j(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return j(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return j(j(e,t[n-1]),j(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=V(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+V(r>>16&255,e>>16&255,t>>16&255)+V(r>>8&255,e>>8&255,t>>8&255)+V(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(H((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|H((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|H((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|H((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(Q((e=j(e,t[n+0]))>>24&255,r>>24&255)<<24|Q(e>>16&255,r>>16&255)<<16|Q(e>>8&255,r>>8&255)<<8|Q(255&e,255&r))>>>0};var Vn=e.PredictorAdd0;e.PredictorAdd1=W,z("Predictor2","PredictorAdd2"),z("Predictor3","PredictorAdd3"),z("Predictor4","PredictorAdd4"),z("Predictor5","PredictorAdd5"),z("Predictor6","PredictorAdd6"),z("Predictor7","PredictorAdd7"),z("Predictor8","PredictorAdd8"),z("Predictor9","PredictorAdd9"),z("Predictor10","PredictorAdd10"),z("Predictor11","PredictorAdd11"),z("Predictor12","PredictorAdd12"),z("Predictor13","PredictorAdd13");var Wn=e.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var Gn,qn=e.ColorIndexInverseTransform,Kn=e.MapARGB,Yn=e.VP8LColorIndexInverseTransformAlpha,Xn=e.MapAlpha,$n=e.VP8LPredictorsAdd=[];$n.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Jn,Zn,er,tr,nr,rr,ir,or,ar,sr,lr,cr,ur,dr,hr,pr,Ar,fr,mr,gr,vr,yr,br,wr,xr,Cr,Sr,Br,_r=o(511),Er=o(2041),Mr=o(225),Pr=o(767),Tr=0,Dr=Er,Fr=Mr,Ir=Pr,kr=_r,Or=0,Lr=1,Rr=2,Ur=3,zr=4,Nr=5,jr=6,Hr=7,Qr=8,Vr=9,Wr=10,Gr=[2,3,7],qr=[3,3,11],Kr=[280,256,256,256,40],Yr=[0,1,1,1,0],Xr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$r=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zr=8,ei=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ti=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ni=null,ri=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ii=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ai=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],si=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],li=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ci=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ui=[],di=[],hi=[],pi=1,Ai=2,fi=[],mi=[];gn("UpsampleRgbLinePair",Cn,3),gn("UpsampleBgrLinePair",Sn,3),gn("UpsampleRgbaLinePair",Pn,4),gn("UpsampleBgraLinePair",Mn,4),gn("UpsampleArgbLinePair",En,4),gn("UpsampleRgba4444LinePair",_n,2),gn("UpsampleRgb565LinePair",Bn,2);var gi=e.UpsampleRgbLinePair,vi=e.UpsampleBgrLinePair,yi=e.UpsampleRgbaLinePair,bi=e.UpsampleBgraLinePair,wi=e.UpsampleArgbLinePair,xi=e.UpsampleRgba4444LinePair,Ci=e.UpsampleRgb565LinePair,Si=16,Bi=1<<Si-1,_i=-227,Ei=482,Mi=6,Pi=(256<<Mi)-1,Ti=0,Di=o(256),Fi=o(256),Ii=o(256),ki=o(256),Oi=o(Ei-_i),Li=o(Ei-_i);Tn("YuvToRgbRow",Cn,3),Tn("YuvToBgrRow",Sn,3),Tn("YuvToRgbaRow",Pn,4),Tn("YuvToBgraRow",Mn,4),Tn("YuvToArgbRow",En,4),Tn("YuvToRgba4444Row",_n,2),Tn("YuvToRgb565Row",Bn,2);var Ri=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ui=[0,2,8],zi=[8,7,6,4,4,2,2,2,1,1,1,1],Ni=1;this.WebPDecodeRGBA=function(e,n,s,l,c){var u=Lr,d=new tn,h=new ae;d.ba=h,h.S=u,h.width=[h.width],h.height=[h.height];var p=h.width,A=h.height,f=new se;if(null==f||null==e)var m=2;else t(null!=f),m=kn(e,n,s,f.width,f.height,f.Pd,f.Qd,f.format,null);if(0!=m?p=0:(null!=p&&(p[0]=f.width[0]),null!=A&&(A[0]=f.height[0]),p=1),p){h.width=h.width[0],h.height=h.height[0],null!=l&&(l[0]=h.width),null!=c&&(c[0]=h.height);e:{if(l=new Ge,(c=new nn).data=e,c.w=n,c.ha=s,c.kd=1,n=[0],t(null!=c),(0==(e=kn(c.data,c.w,c.ha,null,null,null,n,null,c))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=d),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=pe,l.ac=he,l.bc=Ae,l.ma=d,c.xa){if(null==(e=Me())){d=1;break e}if(function(e,n){var r=[0],i=[0],o=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,g(e.m,n.data,n.w,n.ha),!fe(e.m,r,i,o)){e.a=3;break t}if(e.xb=Ai,n.width=r[0],n.height=i[0],!Pe(r[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(n=Rn(l.width,l.height,d.Oa,d.ba))){t:{l=e;n:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(s=l.l)),t(null!=(c=s.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!On(c.Oa,s,Ur)){l.a=2;break n}if(!Te(l,s.width))break n;if(s.da)break n;if((s.da||re(l.ca.S))&&mn(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&mn()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!I(l.s.vb,l.s.Wa.Xa)){l.a=1;break n}l.xb=0}if(!_e(l,l.V,l.Ba,l.c,l.i,s.o,xe))break n;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(n=e.a)}else n=e.a}else{if(null==(e=new qe)){d=1;break e}if(e.Fa=c.na,e.P=c.P,e.qc=c.Sa,Xe(e,l)){if(0==(n=Rn(l.width,l.height,d.Oa,d.ba))){if(e.Aa=0,s=d.Oa,t(null!=(c=e)),null!=s){if(0<(p=0>(p=s.Md)?0:100<p?255:255*p/100)){for(A=f=0;4>A;++A)12>(m=c.pb[A]).lc&&(m.ia=p*zi[0>m.lc?0:m.lc]>>3),f|=m.ia;f&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=s.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,n){if(null==e)return 0;if(null==n)return Ke(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Xe(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var s=Ui[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-s>>4,e.zb=n.j-s>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+s>>4,e.Hb=n.va+15+s>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(s=0;4>s;++s){var c;if(e.Qa.Cb){var u=e.Qa.Lb[s];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var d=e.gd[s][c],h=u;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var p=h;0<l.wb&&(p=4<l.wb?p>>2:p>>1)>9-l.wb&&(p=9-l.wb),1>p&&(p=1),d.dd=p,d.tc=2*h+p,d.ld=40<=h?2:15<=h?1:0}else d.tc=0;d.La=c}}}s=0}else Ke(e,6,"Frame setup failed"),s=e.a;if(s=0==s){if(s){e.$c=0,0<e.Aa||(e.Ic=Ni);t:{s=e.Ic,l=4*(p=e.za);var A=32*p,f=p+1,m=0<e.L?p*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*p;if((d=l+832+(c=3*(16*s+Ui[e.L])/2*A)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=d)s=0;else{if(d>e.Vb){if(e.Vb=0,e.Ec=o(d),e.Fc=0,null==e.Ec){s=Ke(e,1,"no memory during frame initialization.");break t}e.Vb=d}d=e.Ec,h=e.Fc,e.Ac=d,e.Bc=h,h+=l,e.Gd=a(A,Qe),e.Hd=0,e.rb=a(f+1,ze),e.sb=1,e.wa=m?a(m,Ue):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=p),t(!0),e.oc=d,e.pc=h,h+=832,e.ya=a(g,je),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=p),e.R=16*p,e.B=8*p,p=(A=Ui[e.L])*e.R,A=A/2*e.B,e.sa=d,e.ta=h+p,e.qa=e.sa,e.ra=e.ta+16*s*e.R+A,e.Ha=e.qa,e.Ia=e.ra+8*s*e.B+A,e.$c=0,h+=c,e.mb=u?d:null,e.nb=u?h:null,t(h+u<=e.Fc+e.Vb),Je(e),i(e.Ac,e.Bc,0,l),s=1}}if(s){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Tr){for(s=-255;255>=s;++s)_r[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Er[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Mr[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Pr[255+s]=0>s?0:255<s?255:s;Tr=1}ir=lt,or=it,sr=ot,lr=at,cr=st,ar=rt,ur=qt,dr=Kt,hr=$t,pr=Jt,Ar=Yt,fr=Xt,mr=Zt,gr=en,vr=jt,yr=Ht,br=Qt,wr=Vt,di[0]=Ct,di[1]=ut,di[2]=wt,di[3]=xt,di[4]=St,di[5]=_t,di[6]=Bt,di[7]=Et,di[8]=Pt,di[9]=Mt,ui[0]=mt,ui[1]=ht,ui[2]=pt,ui[3]=At,ui[4]=gt,ui[5]=vt,ui[6]=yt,hi[0]=It,hi[1]=dt,hi[2]=Tt,hi[3]=Dt,hi[4]=Ot,hi[5]=kt,hi[6]=Lt,s=1}else s=0}s&&(s=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var a,s=e.Jc[e.M&e.Xb],l=e.m,c=e;for(a=0;a<c.za;++a){var u=l,d=c,h=d.Ac,p=d.Bc+4*a,A=d.zc,f=d.ya[d.aa+a];if(d.Qa.Bb?f.$b=M(u,d.Pa.jb[0])?2+M(u,d.Pa.jb[2]):M(u,d.Pa.jb[1]):f.$b=0,d.kc&&(f.Ad=M(u,d.Bd)),f.Za=!M(u,145)+0,f.Za){var m=f.Ob,g=0;for(d=0;4>d;++d){var v,y=A[0+d];for(v=0;4>v;++v){y=si[h[p+v]][y];for(var b=oi[M(u,y[0])];0<b;)b=oi[2*b+M(u,y[b])];y=-b,h[p+v]=y}r(m,g,h,p,4),g+=4,A[0+d]=y}}else y=M(u,156)?M(u,128)?1:3:M(u,163)?2:0,f.Ob[0]=y,i(h,p,y,4),i(A,0,y,4);f.Dd=M(u,142)?M(u,114)?M(u,183)?1:3:2:0}if(c.m.Ka)return Ke(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=s,u=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],a=l.ya[l.aa+l.ja],p=l.kc?a.Ad:0)u.la=h.la=0,a.Za||(u.Na=h.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var w,x;if(u=h,h=c,p=l.Pa.Xc,A=l.ya[l.aa+l.ja],f=l.pb[A.$b],d=A.ad,m=0,g=l.rb[l.sb-1],y=v=0,i(d,m,0,384),A.Za)var C=0,S=p[3];else{b=o(16);var B=u.Na+g.Na;if(B=ni(h,p[1],B,f.Eb,0,b,0),u.Na=g.Na=(0<B)+0,1<B)ir(b,0,d,m);else{var _=b[0]+3>>3;for(b=0;256>b;b+=16)d[m+b]=_}C=1,S=p[0]}var E=15&u.la,P=15&g.la;for(b=0;4>b;++b){var T=1&P;for(_=x=0;4>_;++_)E=E>>1|(T=(B=ni(h,S,B=T+(1&E),f.Sc,C,d,m))>C)<<7,x=x<<2|(3<B?3:1<B?2:0!=d[m+0]),m+=16;E>>=4,P=P>>1|T<<7,v=(v<<8|x)>>>0}for(S=E,C=P>>4,w=0;4>w;w+=2){for(x=0,E=u.la>>4+w,P=g.la>>4+w,b=0;2>b;++b){for(T=1&P,_=0;2>_;++_)B=T+(1&E),E=E>>1|(T=0<(B=ni(h,p[2],B,f.Qc,0,d,m)))<<3,x=x<<2|(3<B?3:1<B?2:0!=d[m+0]),m+=16;E>>=2,P=P>>1|T<<5}y|=x<<4*w,S|=E<<4<<w,C|=(240&P)<<w}u.la=S,g.la=C,A.Hc=v,A.Gc=y,A.ia=43690&y?0:f.ia,p=!(v|y)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[a.$b][a.Za],l.wa[l.Y+l.ja].La|=!p),c.Ka)return Ke(e,7,"Premature end-of-file encountered.")}if(Je(e),l=n,c=1,a=(s=e).D,u=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)t:{if(a.M=s.M,a.uc=u,In(s,a),c=1,a=(x=s.D).Nb,u=(y=Ui[s.L])*s.R,h=y/2*s.B,b=16*a*s.R,_=8*a*s.B,p=s.sa,A=s.ta-u+b,f=s.qa,d=s.ra-h+_,m=s.Ha,g=s.Ia-h+_,P=0==(E=x.M),v=E>=s.Va-1,2==s.Aa&&In(s,x),x.uc)for(T=(B=s).D.M,t(B.D.uc),x=B.yb;x<B.Hb;++x){C=x,S=T;var D=(F=(j=B).D).Nb;w=j.R;var F=F.wa[F.Y+C],I=j.sa,k=j.ta+16*D*w+16*C,O=F.dd,L=F.tc;if(0!=L)if(t(3<=L),1==j.L)0<C&&yr(I,k,w,L+4),F.La&&wr(I,k,w,L),0<S&&vr(I,k,w,L+4),F.La&&br(I,k,w,L);else{var R=j.B,U=j.qa,z=j.ra+8*D*R+8*C,N=j.Ha,j=j.Ia+8*D*R+8*C;D=F.ld,0<C&&(dr(I,k,w,L+4,O,D),pr(U,z,N,j,R,L+4,O,D)),F.La&&(fr(I,k,w,L,O,D),gr(U,z,N,j,R,L,O,D)),0<S&&(ur(I,k,w,L+4,O,D),hr(U,z,N,j,R,L+4,O,D)),F.La&&(Ar(I,k,w,L,O,D),mr(U,z,N,j,R,L,O,D))}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(x=16*E,E=16*(E+1),P?(l.y=s.sa,l.O=s.ta+b,l.f=s.qa,l.N=s.ra+_,l.ea=s.Ha,l.W=s.Ia+_):(x-=y,l.y=p,l.O=A,l.f=f,l.N=d,l.ea=m,l.W=g),v||(E-=y),E>l.o&&(E=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&x<E&&(l.J=dn(s,l,x,E-x),l.F=s.mb,null==l.F&&0==l.F.length)){c=Ke(s,3,"Could not decode alpha data.");break t}x<l.j&&(y=l.j-x,x=l.j,t(!(1&y)),l.O+=s.R*y,l.N+=s.B*(y>>1),l.W+=s.B*(y>>1),null!=l.F&&(l.J+=l.width*y)),x<E&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=x-l.j,l.U=l.va-l.v,l.T=E-x,c=l.put(l))}a+1!=s.Ic||v||(r(s.sa,s.ta-u,p,A+16*s.R,u),r(s.qa,s.ra-h,f,d+8*s.B,h),r(s.Ha,s.Ia-h,m,g+8*s.B,h))}if(!c)return Ke(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),s&=1}return s?(e.cb=0,s):0})(e,l)||(n=e.a)}}else n=e.a}0==n&&null!=d.Oa&&d.Oa.fd&&(n=Ln(d.ba))}d=n}u=0!=d?null:11>u?h.f.RGBA.eb:h.f.kb.y}else u=null;return u};var ji=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],p=[0],A=[],f=new l,m=e,g=function(e,t){var n={},r=0,i=!1,o=0,a=0;if(n.frames=[],!
/** @license
       * Copyright (c) 2017 Dominik Homberger
      Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
      The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
      https://webpjs.appspot.com
      WebPRiffParser dominikhlbg@gmail.com
      */
function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){var s,l;for(d(e,t+=4),t+=8;t<e.length;){var h=c(e,t),p=d(e,t+=4);t+=4;var A=p+(1&p);switch(h){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(g=n.frames[r]).src_off=i?a:t-8,g.src_size=o+p+8,r++,i&&(i=!1,o=0,a=0);break;case"VP8X":(g=n.header={}).feature_flags=e[t];var f=t+4;g.canvas_width=1+u(e,f),f+=3,g.canvas_height=1+u(e,f),f+=3;break;case"ALPH":i=!0,o=A+8,a=t-8;break;case"ANIM":(g=n.header).bgcolor=d(e,t),f=t+4,g.loop_count=(s=e)[(l=f)+0]|s[l+1]<<8,f+=2;break;case"ANMF":var m,g;(g=n.frames[r]={}).offset_x=2*u(e,t),t+=3,g.offset_y=2*u(e,t),t+=3,g.width=1+u(e,t),t+=3,g.height=1+u(e,t),t+=3,g.duration=u(e,t),t+=3,m=e[t++],g.dispose=1&m,g.blend=m>>1&1}"ANMF"!=h&&(t+=A)}return n}}(m,0);g.response=m,g.rgbaoutput=!0,g.dataurl=!1;var v=g.header?g.header:null,y=g.frames?g.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],p=[v.canvas_width];for(var b=0;b<y.length&&0!=y[b].blend;b++);}var w=y[0],x=f.WebPDecodeRGBA(m,w.src_off,w.src_size,p,h);w.rgba=x,w.imgwidth=p[0],w.imgheight=h[0];for(var C=0;C<p[0]*h[0]*4;C++)A[C]=x[C];return this.width=p,this.height=h,this.data=A,this}!function(e){var t=function(t,r,l,c){var u=4,d=o;switch(c){case e.image_compression.FAST:u=1,d=i;break;case e.image_compression.MEDIUM:u=6,d=a;break;case e.image_compression.SLOW:u=9,d=s}var h=mBe(t=n(t,r,l,d),{level:u});return e.__addimage__.arrayBufferToBinaryString(h)},n=function(e,t,n,r){for(var i,o,a,s=e.length/t,l=new Uint8Array(e.length+s),d=c(),h=0;h<s;h+=1){if(a=h*t,i=e.subarray(a,a+t),r)l.set(r(i,n,o),a+h);else{for(var p,A=d.length,f=[];p<A;p+=1)f[p]=d[p](i,n,o);var m=u(f.concat());l.set(f[m],a+h)}o=i}return l},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},i=function(e,t){var n,r=[],i=e.length;r[0]=1;for(var o=0;o<i;o+=1)n=e[o-t]||0,r[o+1]=e[o]-n+256&255;return r},o=function(e,t,n){var r,i=[],o=e.length;i[0]=2;for(var a=0;a<o;a+=1)r=n&&n[a]||0,i[a+1]=e[a]-r+256&255;return i},a=function(e,t,n){var r,i,o=[],a=e.length;o[0]=3;for(var s=0;s<a;s+=1)r=e[s-t]||0,i=n&&n[s]||0,o[s+1]=e[s]+256-(r+i>>>1)&255;return o},s=function(e,t,n){var r,i,o,a,s=[],c=e.length;s[0]=4;for(var u=0;u<c;u+=1)r=e[u-t]||0,i=n&&n[u]||0,o=n&&n[u-t]||0,a=l(r,i,o),s[u+1]=e[u]-a+256&255;return s},l=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),o=Math.abs(e+t-n-n);return r<=i&&r<=o?e:i<=o?t:n},c=function(){return[r,i,o,a,s]},u=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,i,o){var a,s,l,c,u,d,h,p,A,f,m,g,v,y,b,w=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new uEe(n)).imgData,s=l.bits,a=l.colorSpace,u=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){A=(p=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,m=new Uint8Array(A*l.colors),f=new Uint8Array(A);var C,S=l.pixelBitlength-l.bits;for(y=0,b=0;y<A;y++){for(v=p[y],C=0;C<S;)m[b++]=v>>>C&255,C+=l.bits;f[y]=v>>>C&255}}if(16===l.bits){A=(p=new Uint32Array(l.decodePixels().buffer)).length,m=new Uint8Array(A*(32/l.pixelBitlength)*l.colors),f=new Uint8Array(A*(32/l.pixelBitlength)),g=l.colors>1,y=0,b=0;for(var B=0;y<A;)v=p[y++],m[b++]=v>>>0&255,g&&(m[b++]=v>>>16&255,v=p[y++],m[b++]=v>>>0&255),f[B++]=v>>>16&255;s=8}o!==e.image_compression.NONE?(n=t(m,l.width*l.colors,l.colors,o),h=t(f,l.width,1,o)):(n=m,h=f,w=void 0)}if(3===l.colorType&&(a=this.color_spaces.INDEXED,d=l.palette,l.transparency.indexed)){var _=l.transparency.indexed,E=0;for(y=0,A=_.length;y<A;++y)E+=_[y];if((E/=255)==A-1&&-1!==_.indexOf(0))c=[_.indexOf(0)];else if(E!==A){for(p=l.decodePixels(),f=new Uint8Array(p.length),y=0,A=p.length;y<A;y++)f[y]=_[p[y]];h=t(f,l.width,1)}}var M=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return w===this.decode.FLATE_DECODE&&(x="/Predictor "+M+" "),x+="/Colors "+u+" /BitsPerComponent "+s+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:i,data:n,index:r,filter:w,decodeParameters:x,transparency:c,palette:d,sMask:h,predictor:M,width:l.width,height:l.height,bitsPerComponent:s,colorSpace:a}}}}(JBe.API),function(e){e.processGIF89A=function(t,n,r,i){var o=new dEe(t),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:s},u=new pEe(100).encode(c,100);return e.processJPEG.call(this,u,n,r,i)},e.processGIF87A=e.processGIF89A}(JBe.API),AEe.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},AEe.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){wBe.log("bit decode error:"+n)}},AEe.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}0!==n&&(this.pos+=4-n)}},AEe.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,l=15&o,c=this.palette[s];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}0!==t&&(this.pos+=4-t)}},AEe.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==e&&(this.pos+=4-e)}},AEe.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,s=(o>>5&t)/t*255|0,l=(o>>10&t)/t*255|0,c=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},AEe.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=i*this.width*4+4*o;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=e}},AEe.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},AEe.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},AEe.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2018 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){e.processBMP=function(t,n,r,i){var o=new AEe(t,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new pEe(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(JBe.API),fEe.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2019 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){e.processWEBP=function(t,n,r,i){var o=new fEe(t),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new pEe(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(JBe.API),JBe.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var u=r[c],d=r[c+1],h=r[c+2],p=r[c+3];o[s++]=u,o[s++]=d,o[s++]=h,a[l++]=p}var A=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:A,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},JBe.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},oEe=JBe.API,aEe=oEe.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=!1!==t.doKerning,h=0,p=e.length,A=0,f=s[0]||l,m=[];for(n=0;n<p;n++)r=e.charCodeAt(n),"function"==typeof i.metadata.widthOfString?m.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(h=d&&"object"===_Se(c[r])&&!isNaN(parseInt(c[r][A],10))?c[r][A]/u:0,m.push((s[r]||f)/l+h)),A=r;return m},sEe=oEe.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return oEe.processArabic&&(e=oEe.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,i)/n:aEe.apply(this,arguments).reduce((function(e,t){return e+t}),0)},lEe=function(e,t,n,r){for(var i=[],o=0,a=e.length,s=0;o!==a&&s+t[o]<n;)s+=t[o],o++;i.push(e.slice(0,o));var l=o;for(s=0;o!==a;)s+t[o]>r&&(i.push(e.slice(l,o)),s=0,l=o),s+=t[o],o++;return l!==o&&i.push(e.slice(l,o)),i},cEe=function(e,t,n){n||(n={});var r,i,o,a,s,l,c,u=[],d=[u],h=n.textIndent||0,p=0,A=0,f=e.split(" "),m=aEe.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),v=[];f.map((function(e){(e=e.split(/\s*\n/)).length>1?v=v.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):v.push(e[0])})),f=v,l=sEe.apply(this,[g,n])}for(o=0,a=f.length;o<a;o++){var y=0;if(r=f[o],l&&"\n"==r[0]&&(r=r.substr(1),y=1),h+p+(A=(i=aEe.apply(this,[r,n])).reduce((function(e,t){return e+t}),0))>t||y){if(A>t){for(s=lEe.apply(this,[r,i,t-(h+p),t]),u.push(s.shift()),u=[s.pop()];s.length;)d.push([s.shift()]);A=i.slice(r.length-(u[0]?u[0].length:0)).reduce((function(e,t){return e+t}),0)}else u=[r];d.push(u),h=A+l,p=m}else u.push(r),h+=p+A,p=m}return c=l?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},d.map(c)},oEe.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=r.length;s<l;s++)c=c.concat(cEe.apply(this,[r[s],a,o]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<16;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var o=function(e){return"0x"+parseInt(e,10).toString(16)},a=e.__fontmetrics__.compress=function(e){var t,n,i,s,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=o(c).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof t)t<0?(i=o(t).slice(3),s="-"):(i=o(t).slice(2),s=""),i=s+i.slice(0,-1)+r[i.slice(-1)];else{if("object"!==_Se(t))throw new Error("Don't know what to do with value type "+_Se(t)+".");i=a(t)}l.push(n+i)}return l.push("}"),l.join("")},s=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,i,o,a={},s=1,l=a,c=[],u="",d="",h=e.length-1,p=1;p<h;p+=1)"'"==(o=e[p])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(o):"{"==o?(c.push([l,i]),l={},i=void 0):"}"==o?((r=c.pop())[0][r[1]]=l,i=void 0,l=r[0]):"-"==o?s=-1:void 0===i?n.hasOwnProperty(o)?(u+=n[o],i=parseInt(u,16)*s,s=1,u=""):u+=o:n.hasOwnProperty(o)?(d+=n[o],l[i]=parseInt(d,16)*s,s=1,i=void 0,d=""):d+=o;return a},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=u.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=c.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(JBe.API),
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r,i,o=void 0,a=n.font,s=n.instance;if(!a.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(o=!1===s.existsFileInVFS(a.postScriptName)?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");r=a,i=/^\x00\x01\x00\x00/.test(i=o)?t(i):t(BBe(i)),r.metadata=e.API.TTFFont.open(i),r.metadata.Unicode=r.metadata.Unicode||{encoding:{},kerning:{},widths:[]},r.metadata.glyIdsUsed=[0]}}])}(JBe),JBe.API.addSvgAsImage=function(e,t,n,r,i,o,a,s){if(isNaN(t)||isNaN(n))throw wBe.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw wBe.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(yBe.canvg?Promise.resolve(yBe.canvg):nF((()=>import("./index.es-42UXFcWY.js")),[])).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e})).then((function(t){return t.fromString(c,e,u)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(u)})).then((function(){d.addImage(l.toDataURL("image/jpeg",1),t,n,r,i,a,s)}))},JBe.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},JBe.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],c=0,u=0,d=0;function h(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=s.length;for(d=0;d<p;d+=1)n[s[d]].value=n[s[d]].defaultValue,n[s[d]].explicitSet=!1}if("object"===_Se(e))for(i in e)if(o=e[i],h(s,i)&&void 0!==o){if("boolean"===n[i].type&&"boolean"==typeof o)n[i].value=o;else if("name"===n[i].type&&h(n[i].valueSet,o))n[i].value=o;else if("integer"===n[i].type&&Number.isInteger(o))n[i].value=o;else if("array"===n[i].type){for(c=0;c<o.length;c+=1)if(r=!0,1===o[c].length&&"number"==typeof o[c][0])l.push(String(o[c]-1));else if(o[c].length>1){for(u=0;u<o[c].length;u+=1)"number"!=typeof o[c][u]&&(r=!1);!0===r&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},
/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+r.length+i.length+t.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+i+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(JBe.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,i=["","0","00","000","0000"],o=[""],a=0,s=e.length;a<s;++a){if(n=t.metadata.characterToGlyph(e.charCodeAt(a)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(a),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(i[4-n.length],n)}return o.join("")},r=function(e){var t,n,r,i,o,a,s;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,s=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;a<s;a++)t=n[a],r.length>=100&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+i+">"));return r.length&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,o=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var d=o();a({data:c,addLength1:!0,objectId:d}),i("endobj");var h=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var p=o();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+GBe(n.fontName)),i("/FontFile2 "+d+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var A=o();i("<<"),i("/Type /Font"),i("/BaseFont /"+GBe(n.fontName)),i("/FontDescriptor "+p+" 0 R"),i("/W "+e.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=o(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+h+" 0 R"),i("/BaseFont /"+GBe(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+A+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,o=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,l="",c=0;c<s.length;c++)l+=String.fromCharCode(s[c]);var u=o();a({data:l,addLength1:!0,objectId:u}),i("endobj");var d=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),i("endobj");var h=o();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+u+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+GBe(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=o();for(var p=0;p<n.metadata.hmtx.widths.length;p++)n.metadata.hmtx.widths[p]=parseInt(n.metadata.hmtx.widths[p]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+GBe(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,r=e.text||"",i=e.x,o=e.y,a=e.options||{},s=e.mutex||{},l=s.pdfEscape,c=s.activeFontKey,u=s.fonts,d=c,h="",p=0,A="",f=u[d].encoding;if("Identity-H"!==u[d].encoding)return{text:r,x:i,y:o,options:a,mutex:s};for(A=r,d=c,Array.isArray(r)&&(A=r[0]),p=0;p<A.length;p+=1)u[d].metadata.hasOwnProperty("cmap")&&(t=u[d].metadata.cmap.unicode.codeMap[A[p].charCodeAt(0)]),t||A[p].charCodeAt(0)<256&&u[d].metadata.hasOwnProperty("Unicode")?h+=A[p]:h+="";var m="";return parseInt(d.slice(1))<14||"WinAnsiEncoding"===f?m=l(h,d).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===f&&(m=n(h,u[d])),s.isHex=!0,{text:m,x:i,y:o,options:a,mutex:s}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var o=0;for(o=0;o<t.length;o+=1)Array.isArray(t[o])&&3===t[o].length?n.push([i(Object.assign({},r,{text:t[o][0]})).text,t[o][1],t[o][2]]):n.push(i(Object.assign({},r,{text:t[o]})).text);e.text=n}else e.text=i(Object.assign({},r,{text:t})).text}])}(JBe),
/**
 * @license
 * jsPDF virtual FileSystem functionality
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(JBe.API),
/**
 * @license
 * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
 * MIT License
 */
function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,i,o,a,s,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,g=0;this.__bidiEngine__={};var v=function(e){var t=e.charCodeAt(),n=t>>8,r=p[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},y=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=v(e.charAt(n))))return!1;if("R"===t)return!0}return!1},b=function(e,t,a,s){var l,c,u,d,h=t[s];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(h="AN");break;case"AL":m=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":s<1||s+1>=t.length||"EN"!==(l=a[s-1])&&"AN"!==l||"EN"!==(c=t[s+1])&&"AN"!==c?h="N":m&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=s>0?a[s-1]:"B")&&s+1<t.length&&"EN"===t[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===a[s-1]){h="EN";break}if(m){h="N";break}for(u=s+1,d=t.length;u<d&&"ET"===t[u];)u++;h=u<d&&"EN"===t[u]?"EN":"N";break;case"NSM":if(i&&!o){for(d=t.length,u=s+1;u<d&&"NSM"===t[u];)u++;if(u<d){var p=e[s],A=p>=1425&&p<=2303||64286===p;if(l=t[u],A&&("R"===l||"AL"===l)){h="R";break}}}h=s<1||"B"===(l=t[s-1])?"N":a[s-1];break;case"B":m=!1,n=!0,h=g;break;case"S":r=!0,h="N"}return h},w=function(e,t,n){var r=e.split("");return n&&x(r,n,{hiLevel:g}),r.reverse(),t&&t.reverse(),r.join("")},x=function(e,t,i){var o,a,s,l,c,p=-1,A=e.length,f=0,y=[],w=g?d:u,x=[];for(m=!1,n=!1,r=!1,a=0;a<A;a++)x[a]=v(e[a]);for(s=0;s<A;s++){if(c=f,y[s]=b(e,x,y,s),o=240&(f=w[c][h[y[s]]]),f&=15,t[s]=l=w[f][5],o>0)if(16===o){for(a=p;a<s;a++)t[a]=1;p=-1}else p=-1;if(w[f][6])-1===p&&(p=s);else if(p>-1){for(a=p;a<s;a++)t[a]=l;p=-1}"B"===x[s]&&(t[s]=0),i.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=g;for(var i=r-1;i>=0&&"WS"===e[i];i--)t[i]=g}}(x,t,A)},C=function(e,t,r,i,o){if(!(o.hiLevel<e)){if(1===e&&1===g&&!n)return t.reverse(),void(r&&r.reverse());for(var a,s,l,c,u=t.length,d=0;d<u;){if(i[d]>=e){for(l=d+1;l<u&&i[l]>=e;)l++;for(c=d,s=l-1;c<s;c++,s--)a=t[c],t[c]=t[s],t[s]=a,r&&(a=r[c],r[c]=r[s],r[s]=a);d=l}d++}}},S=function(e,t,n){var r=e.split(""),i={hiLevel:g};return n||(n=[]),x(r,n,i),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<e.length;i++)1===t[i]&&(r=A.indexOf(e[i]))>=0&&(e[i]=A[r+1])}(r,n,i),C(2,r,t,n,i),C(1,r,t,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===o&&(o=y(e)),void 0===s&&(s=y(e))}(e,t),i||!a||s)if(i&&a&&o^s)g=o?1:0,e=w(e,t,n);else if(!i&&a&&s)g=o?1:0,e=S(e,t,n),e=w(e,t);else if(!i||o||a||s){if(i&&!a&&o^s)e=w(e,t),o?(g=0,e=S(e,t,n)):(g=1,e=S(e,t,n),e=w(e,t));else if(i&&o&&!a&&s)g=1,e=S(e,t,n),e=w(e,t);else if(!i&&!a&&o^s){var r=l;o?(g=1,e=S(e,t,n),g=0,l=!1,e=S(e,t,n),l=r):(g=0,e=S(e,t,n),e=w(e,t),g=1,l=!1,e=S(e,t,n),l=r,e=w(e,t))}}else g=0,e=S(e,t,n);else g=o?1:0,e=S(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,a=e.isOutputVisual,o=e.isInputRtl,s=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,r=(e.x,e.y,e.options||{}),i=(e.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var o=0;for(i=[],o=0;o<t.length;o+=1)"[object Array]"===Object.prototype.toString.call(t[o])?i.push([n.doBidiReorder(t[o][0]),t[o][1],t[o][2]]):i.push([n.doBidiReorder(t[o])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(JBe),JBe.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new gEe(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new LEe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new vEe(this.contents),this.head=new wEe(this),this.name=new MEe(this),this.cmap=new CEe(this),this.toUnicode={},this.hhea=new SEe(this),this.maxp=new PEe(this),this.hmtx=new TEe(this),this.post=new _Ee(this),this.os2=new BEe(this),this.loca=new OEe(this),this.glyf=new FEe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,i;for(i=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),!!(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,i,o,a;for(o=0,i=0,a=(e=""+e).length;0<=a?i<a:i>a;i=0<=a?++i:--i)r=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var mEe,gEe=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,i,o,a,s;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^s)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*i+65536*o+256*a+s},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),vEe=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,i,o,a,s,l,c,u,d,h,p,A;for(A in h=Object.keys(t).length,s=Math.log(2),u=16*Math.floor(Math.log(h)/s),o=Math.floor(u/s),c=16*h-u,(r=new gEe).writeInt(this.scalarType),r.writeShort(h),r.writeShort(u),r.writeShort(o),r.writeShort(c),i=16*h,l=r.pos+i,a=null,p=[],t)for(d=t[A],r.writeString(A),r.writeInt(e(d)),r.writeInt(l),r.writeInt(d.length),p=p.concat(d),"head"===A&&(a=l),l+=d.length;l%4;)p.push(0),l++;return r.write(p),n=2981146554-e(r.data),r.pos=a+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,i;for(e=DEe.call(e);e.length%4;)e.push(0);for(r=new gEe(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),yEe={}.hasOwnProperty,bEe=function(e,t){for(var n in t)yEe.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};mEe=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var wEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new gEe).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),xEe=function(){function e(e,t){var n,r,i,o,a,s,l,c,u,d,h,p,A,f,m,g,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=e.readByte();break;case 4:for(h=e.readUInt16(),d=h/2,e.pos+=6,i=function(){var t,n;for(n=[],s=t=0;0<=d?t<d:t>d;s=0<=d?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,A=function(){var t,n;for(n=[],s=t=0;0<=d?t<d:t>d;s=0<=d?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],s=t=0;0<=d?t<d:t>d;s=0<=d?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],s=t=0;0<=d?t<d:t>d;s=0<=d?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,a=function(){var t,n;for(n=[],s=t=0;0<=r?t<r:t>r;s=0<=r?++t:--t)n.push(e.readUInt16());return n}(),s=m=0,v=i.length;m<v;s=++m)for(f=i[s],n=g=p=A[s];p<=f?g<=f:g>=f;n=p<=f?++g:--g)0===c[s]?o=n+l[s]:0!==(o=a[c[s]/2+(n-p)-(d-s)]||0)&&(o+=l[s]),this.codeMap[n]=65535&o}e.pos=u}return e.encode=function(e,t){var n,r,i,o,a,s,l,c,u,d,h,p,A,f,m,g,v,y,b,w,x,C,S,B,_,E,M,P,T,D,F,I,k,O,L,R,U,z,N,j,H,Q,V,W,G,q;switch(P=new gEe,o=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(A=0,f=function(){var e=[];for(p=0;p<256;++p)e.push(0);return e}(),g={0:0},i={},T=0,k=o.length;T<k;T++)null==g[V=e[r=o[T]]]&&(g[V]=++A),i[r]={old:e[r],new:g[e[r]]},f[r]=g[e[r]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(f),{charMap:i,subtable:P.data,maxGlyphID:A+1};case"unicode":for(E=[],u=[],v=0,g={},n={},m=l=null,D=0,O=o.length;D<O;D++)null==g[b=e[r=o[D]]]&&(g[b]=++v),n[r]={old:b,new:g[b]},a=g[b]-r,null!=m&&a===l||(m&&u.push(m),E.push(r),l=a),m=r;for(m&&u.push(m),u.push(65535),E.push(65535),B=2*(S=E.length),C=2*Math.pow(Math.log(S)/Math.LN2,2),d=Math.log(C/2)/Math.LN2,x=2*S-C,s=[],w=[],h=[],p=F=0,L=E.length;F<L;p=++F){if(_=E[p],c=u[p],65535===_){s.push(0),w.push(0);break}if(_-(M=n[_].new)>=32768)for(s.push(0),w.push(2*(h.length+S-p)),r=I=_;_<=c?I<=c:I>=c;r=_<=c?++I:--I)h.push(n[r].new);else s.push(M-_),w.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*S+2*h.length),P.writeUInt16(0),P.writeUInt16(B),P.writeUInt16(C),P.writeUInt16(d),P.writeUInt16(x),H=0,R=u.length;H<R;H++)r=u[H],P.writeUInt16(r);for(P.writeUInt16(0),Q=0,U=E.length;Q<U;Q++)r=E[Q],P.writeUInt16(r);for(W=0,z=s.length;W<z;W++)a=s[W],P.writeUInt16(a);for(G=0,N=w.length;G<N;G++)y=w[G],P.writeUInt16(y);for(q=0,j=h.length;q<j;q++)A=h[q],P.writeUInt16(A);return{charMap:n,subtable:P.data,maxGlyphID:v+1}}},e}(),CEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new xEe(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=xEe.encode(e,t),(r=new gEe).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),SEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),BEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),_Ee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),EEe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},MEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,i,o,a,s,l,c,u,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(s={},i=c=0,u=n.length;c<u;i=++c)r=n[i],e.pos=r.offset,l=e.readString(r.length),o=new EEe(l,r),null==s[d=r.nameID]&&(s[d]=[]),s[r.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(h){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),PEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),TEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,i,o,a,s;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],s=[],t=o=0;0<=r?o<r:o>r;t=0<=r?++o:--o)s.push(this.widths.push(n));return s},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),DEe=[].slice,FEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,i,o,a,s,l,c,u;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(r=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,o=(a=new gEe(t.read(r))).readShort(),l=a.readShort(),u=a.readShort(),s=a.readShort(),c=a.readShort(),this.cache[e]=-1===o?new kEe(a,l,u,s,c):new IEe(a,o,l,u,s,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,i,o,a,s;for(o=[],i=[],a=0,s=t.length;a<s;a++)r=e[t[a]],i.push(o.length),r&&(o=o.concat(r.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),IEe=function(){function e(e,t,n,r,i,o){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),kEe=function(){function e(e,t,n,r,i){var o,a;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new gEe(DEe.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),OEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bEe(e,mEe),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,o=0;o<n.length;++o)if(n[o]=r,i<t.length&&t[i]==o){++i,n[o]=r;var a=this.offsets[o],s=this.offsets[o+1]-a;s>0&&(r+=s)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),LEe=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,i,o,a,s;for(r={},o=0,a=e.length;o<a;o++)r[i=e[o]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(null!=(n=r[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in s=this.glyphsFor(t))n=s[i],r[i]=n;return r},e.prototype.encode=function(e,t){var n,r,i,o,a,s,l,c,u,d,h,p,A,f,m;for(r in n=CEe.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},m=n.charMap)h[(s=m[r]).old]=s.new;for(p in d=n.maxGlyphID,o)p in h||(h[p]=d++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),u=Object.keys(c).sort((function(e,t){return e-t})),A=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)a=u[e],n.push(c[a]);return n}(),i=this.font.glyf.encode(o,A,h),l=this.font.loca.encode(i.offsets,A),f={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();JBe.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,i,o,a;if(Array.isArray(n))return"["+function(){var e,i,o;for(o=[],e=0,i=n.length;e<i;e++)r=n[e],o.push(t.convert(r));return o}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in o=["<<"],n)a=n[i],o.push("/"+i+" "+t.convert(a));return o.push(">>"),o.join("\n")}return""+n},t}();const REe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:N_e,AcroFormAppearance:U_e,AcroFormButton:D_e,AcroFormCheckBox:O_e,AcroFormChoiceField:E_e,AcroFormComboBox:P_e,AcroFormEditBox:T_e,AcroFormListBox:M_e,AcroFormPasswordField:R_e,AcroFormPushButton:F_e,AcroFormRadioButton:I_e,AcroFormTextField:L_e,GState:KBe,ShadingPattern:XBe,TilingPattern:$Be,default:JBe,jsPDF:JBe},Symbol.toStringTag,{value:"Module"}));var UEe,zEe,NEe={exports:{}};
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */function jEe(){return UEe||(UEe=1,NEe.exports=function(){
/*! *****************************************************************************
      		    Copyright (c) Microsoft Corporation.
      
      		    Permission to use, copy, modify, and/or distribute this software for any
      		    purpose with or without fee is hereby granted.
      
      		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      		    PERFORMANCE OF THIS SOFTWARE.
      		    ***************************************************************************** */
var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function r(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(t,n){function o(e){try{s(r.next(e))}catch(t){n(t)}}function a(e){try{s(r.throw(e))}catch(t){n(t)}}function s(e){e.done?t(e.value):i(e.value).then(o,a)}s((r=r.apply(e,[])).next())}))}function i(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}for(var o=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,i){return new e(this.left+t,this.top+n,this.width+r,this.height+i)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find((function(e){return 0!==e.width}));return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),a=function(e,t){return o.fromClientRect(e,t.getBoundingClientRect())},s=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),i=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new o(0,0,r,i)},l=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=e[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="undefined"==typeof Uint8Array?[]:new Uint8Array(256),h=0;h<u.length;h++)d[u.charCodeAt(h)]=h;for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="undefined"==typeof Uint8Array?[]:new Uint8Array(256),f=0;f<p.length;f++)A[p.charCodeAt(f)]=f;for(var m=function(e){var t,n,r,i,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<s;t+=4)n=A[e.charCodeAt(t)],r=A[e.charCodeAt(t+1)],i=A[e.charCodeAt(t+2)],o=A[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c},g=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},v=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},y=5,b=11,w=2,x=65536>>y,C=(1<<y)-1,S=x+(1024>>y)+32,B=65536>>b,_=(1<<b-y)-1,E=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},M=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},P=function(e,t){var n=m(e),r=Array.isArray(n)?v(n):new Uint32Array(n),i=Array.isArray(n)?g(n):new Uint16Array(n),o=24,a=E(i,o/2,r[4]/2),s=2===r[5]?E(i,(o+r[4])/2):M(r,Math.ceil((o+r[4])/4));return new T(r[0],r[1],r[2],r[3],a,s)},T=function(){function e(e,t,n,r,i,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>y])<<w)+(e&C),this.data[t];if(e<=65535)return t=((t=this.index[x+(e-55296>>y)])<<w)+(e&C),this.data[t];if(e<this.highStart)return t=S-B+(e>>b),t=this.index[t],t+=e>>y&_,t=((t=this.index[t])<<w)+(e&C),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F="undefined"==typeof Uint8Array?[]:new Uint8Array(256),I=0;I<D.length;I++)F[D.charCodeAt(I)]=I;var k=50,O=1,L=2,R=3,U=4,z=5,N=7,j=8,H=9,Q=10,V=11,W=12,G=13,q=14,K=15,Y=16,X=17,$=18,J=19,Z=20,ee=21,te=22,ne=23,re=24,ie=25,oe=26,ae=27,se=28,le=29,ce=30,ue=31,de=32,he=33,pe=34,Ae=35,fe=36,me=37,ge=38,ve=39,ye=40,be=41,we=42,xe=43,Ce=[9001,65288],Se="!",Be="×",_e="÷",Ee=P("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Me=[ce,fe],Pe=[O,L,R,z],Te=[Q,j],De=[ae,oe],Fe=Pe.concat(Te),Ie=[ge,ve,ye,pe,Ae],ke=[K,G],Oe=function(e,t){void 0===t&&(t="strict");var n=[],r=[],i=[];return e.forEach((function(e,o){var a=Ee.get(e);if(a>k?(i.push(!0),a-=k):i.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(o),n.push(Y);if(a===U||a===V){if(0===o)return r.push(o),n.push(ce);var s=n[o-1];return-1===Fe.indexOf(s)?(r.push(r[o-1]),n.push(s)):(r.push(o),n.push(ce))}return r.push(o),a===ue?n.push("strict"===t?ee:me):a===we||a===le?n.push(ce):a===xe?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(me):n.push(ce):void n.push(a)})),[r,n,i]},Le=function(e,t,n,r){var i=r[n];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=n;o<=r.length;){if((l=r[++o])===t)return!0;if(l!==Q)break}if(i===Q)for(o=n;o>0;){var a=r[--o];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var s=n;s<=r.length;){var l;if((l=r[++s])===t)return!0;if(l!==Q)break}if(a!==Q)break}return!1},Re=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==Q)return r;n--}return 0},Ue=function(e,t,n,r,i){if(0===n[r])return Be;var o=r-1;if(Array.isArray(i)&&!0===i[o])return Be;var a=o-1,s=o+1,l=t[o],c=a>=0?t[a]:0,u=t[s];if(l===L&&u===R)return Be;if(-1!==Pe.indexOf(l))return Se;if(-1!==Pe.indexOf(u))return Be;if(-1!==Te.indexOf(u))return Be;if(Re(o,t)===j)return _e;if(Ee.get(e[o])===V)return Be;if((l===de||l===he)&&Ee.get(e[s])===V)return Be;if(l===N||u===N)return Be;if(l===H)return Be;if(-1===[Q,G,K].indexOf(l)&&u===H)return Be;if(-1!==[X,$,J,re,se].indexOf(u))return Be;if(Re(o,t)===te)return Be;if(Le(ne,te,o,t))return Be;if(Le([X,$],ee,o,t))return Be;if(Le(W,W,o,t))return Be;if(l===Q)return _e;if(l===ne||u===ne)return Be;if(u===Y||l===Y)return _e;if(-1!==[G,K,ee].indexOf(u)||l===q)return Be;if(c===fe&&-1!==ke.indexOf(l))return Be;if(l===se&&u===fe)return Be;if(u===Z)return Be;if(-1!==Me.indexOf(u)&&l===ie||-1!==Me.indexOf(l)&&u===ie)return Be;if(l===ae&&-1!==[me,de,he].indexOf(u)||-1!==[me,de,he].indexOf(l)&&u===oe)return Be;if(-1!==Me.indexOf(l)&&-1!==De.indexOf(u)||-1!==De.indexOf(l)&&-1!==Me.indexOf(u))return Be;if(-1!==[ae,oe].indexOf(l)&&(u===ie||-1!==[te,K].indexOf(u)&&t[s+1]===ie)||-1!==[te,K].indexOf(l)&&u===ie||l===ie&&-1!==[ie,se,re].indexOf(u))return Be;if(-1!==[ie,se,re,X,$].indexOf(u))for(var d=o;d>=0;){if((h=t[d])===ie)return Be;if(-1===[se,re].indexOf(h))break;d--}if(-1!==[ae,oe].indexOf(u))for(d=-1!==[X,$].indexOf(l)?a:o;d>=0;){var h;if((h=t[d])===ie)return Be;if(-1===[se,re].indexOf(h))break;d--}if(ge===l&&-1!==[ge,ve,pe,Ae].indexOf(u)||-1!==[ve,pe].indexOf(l)&&-1!==[ve,ye].indexOf(u)||-1!==[ye,Ae].indexOf(l)&&u===ye)return Be;if(-1!==Ie.indexOf(l)&&-1!==[Z,oe].indexOf(u)||-1!==Ie.indexOf(u)&&l===ae)return Be;if(-1!==Me.indexOf(l)&&-1!==Me.indexOf(u))return Be;if(l===re&&-1!==Me.indexOf(u))return Be;if(-1!==Me.concat(ie).indexOf(l)&&u===te&&-1===Ce.indexOf(e[s])||-1!==Me.concat(ie).indexOf(u)&&l===$)return Be;if(l===be&&u===be){for(var p=n[o],A=1;p>0&&t[--p]===be;)A++;if(A%2!=0)return Be}return l===de&&u===he?Be:_e},ze=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Oe(e,t.lineBreak),r=n[0],i=n[1],o=n[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(i=i.map((function(e){return-1!==[ie,ce,we].indexOf(e)?me:e}))),[r,i,"keep-all"===t.wordBreak?o.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):void 0]},Ne=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Se,this.start=n,this.end=r}return e.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),je=function(e,t){var n=l(e),r=ze(n,t),i=r[0],o=r[1],a=r[2],s=n.length,c=0,u=0;return{next:function(){if(u>=s)return{done:!0,value:null};for(var e=Be;u<s&&(e=Ue(n,o,i,++u,a))===Be;);if(e!==Be||u===s){var t=new Ne(n,e,c,u);return c=u,{value:t,done:!1}}return{done:!0,value:null}}}},He=1,Qe=2,Ve=4,We=8,Ge=10,qe=47,Ke=92,Ye=9,Xe=32,$e=34,Je=61,Ze=35,et=36,tt=37,nt=39,rt=40,it=41,ot=95,at=45,st=33,lt=60,ct=62,ut=64,dt=91,ht=93,pt=61,At=123,ft=63,mt=125,gt=124,vt=126,yt=128,bt=65533,wt=42,xt=43,Ct=44,St=58,Bt=59,_t=46,Et=0,Mt=8,Pt=11,Tt=14,Dt=31,Ft=127,It=-1,kt=48,Ot=97,Lt=101,Rt=102,Ut=117,zt=122,Nt=65,jt=69,Ht=70,Qt=85,Vt=90,Wt=function(e){return e>=kt&&e<=57},Gt=function(e){return e>=55296&&e<=57343},qt=function(e){return Wt(e)||e>=Nt&&e<=Ht||e>=Ot&&e<=Rt},Kt=function(e){return e>=Ot&&e<=zt},Yt=function(e){return e>=Nt&&e<=Vt},Xt=function(e){return Kt(e)||Yt(e)},$t=function(e){return e>=yt},Jt=function(e){return e===Ge||e===Ye||e===Xe},Zt=function(e){return Xt(e)||$t(e)||e===ot},en=function(e){return Zt(e)||Wt(e)||e===at},tn=function(e){return e>=Et&&e<=Mt||e===Pt||e>=Tt&&e<=Dt||e===Ft},nn=function(e,t){return e===Ke&&t!==Ge},rn=function(e,t,n){return e===at?Zt(t)||nn(t,n):!!Zt(e)||!(e!==Ke||!nn(e,t))},on=function(e,t,n){return e===xt||e===at?!!Wt(t)||t===_t&&Wt(n):Wt(e===_t?t:e)},an=function(e){var t=0,n=1;e[t]!==xt&&e[t]!==at||(e[t]===at&&(n=-1),t++);for(var r=[];Wt(e[t]);)r.push(e[t++]);var i=r.length?parseInt(c.apply(void 0,r),10):0;e[t]===_t&&t++;for(var o=[];Wt(e[t]);)o.push(e[t++]);var a=o.length,s=a?parseInt(c.apply(void 0,o),10):0;e[t]!==jt&&e[t]!==Lt||t++;var l=1;e[t]!==xt&&e[t]!==at||(e[t]===at&&(l=-1),t++);for(var u=[];Wt(e[t]);)u.push(e[t++]);var d=u.length?parseInt(c.apply(void 0,u),10):0;return n*(i+s*Math.pow(10,-a))*Math.pow(10,l*d)},sn={type:2},ln={type:3},cn={type:4},un={type:13},dn={type:8},hn={type:21},pn={type:9},An={type:10},fn={type:11},mn={type:12},gn={type:14},vn={type:23},yn={type:1},bn={type:25},wn={type:24},xn={type:26},Cn={type:27},Sn={type:28},Bn={type:29},_n={type:31},En={type:32},Mn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(l(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==En;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case $e:return this.consumeStringToken($e);case Ze:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(en(t)||nn(n,r)){var i=rn(t,n,r)?Qe:He;return{type:5,value:this.consumeName(),flags:i}}break;case et:if(this.peekCodePoint(0)===Je)return this.consumeCodePoint(),un;break;case nt:return this.consumeStringToken(nt);case rt:return sn;case it:return ln;case wt:if(this.peekCodePoint(0)===Je)return this.consumeCodePoint(),gn;break;case xt:if(on(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Ct:return cn;case at:var o=e,a=this.peekCodePoint(0),s=this.peekCodePoint(1);if(on(o,a,s))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(rn(o,a,s))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===at&&s===ct)return this.consumeCodePoint(),this.consumeCodePoint(),wn;break;case _t:if(on(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===wt)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===wt&&(l=this.consumeCodePoint())===qe)return this.consumeToken();if(l===It)return this.consumeToken()}break;case St:return xn;case Bt:return Cn;case lt:if(this.peekCodePoint(0)===st&&this.peekCodePoint(1)===at&&this.peekCodePoint(2)===at)return this.consumeCodePoint(),this.consumeCodePoint(),bn;break;case ut:var u=this.peekCodePoint(0),d=this.peekCodePoint(1),h=this.peekCodePoint(2);if(rn(u,d,h))return{type:7,value:this.consumeName()};break;case dt:return Sn;case Ke:if(nn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ht:return Bn;case pt:if(this.peekCodePoint(0)===Je)return this.consumeCodePoint(),dn;break;case At:return fn;case mt:return mn;case Ut:case Qt:var p=this.peekCodePoint(0),A=this.peekCodePoint(1);return p!==xt||!qt(A)&&A!==ft||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case gt:if(this.peekCodePoint(0)===Je)return this.consumeCodePoint(),pn;if(this.peekCodePoint(0)===gt)return this.consumeCodePoint(),hn;break;case vt:if(this.peekCodePoint(0)===Je)return this.consumeCodePoint(),An;break;case It:return En}return Jt(e)?(this.consumeWhiteSpace(),_n):Wt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Zt(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:c(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===ft&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(c.apply(void 0,e.map((function(e){return e===ft?kt:e}))),16),end:parseInt(c.apply(void 0,e.map((function(e){return e===ft?Ht:e}))),16)};var r=parseInt(c.apply(void 0,e),16);if(this.peekCodePoint(0)===at&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var i=[];qt(t)&&i.length<6;)i.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(c.apply(void 0,i),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===rt?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===rt?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===It)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===nt||t===$e){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===It||this.peekCodePoint(0)===it)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),vn)}for(;;){var r=this.consumeCodePoint();if(r===It||r===it)return{type:22,value:c.apply(void 0,e)};if(Jt(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===It||this.peekCodePoint(0)===it?(this.consumeCodePoint(),{type:22,value:c.apply(void 0,e)}):(this.consumeBadUrlRemnants(),vn);if(r===$e||r===nt||r===rt||tn(r))return this.consumeBadUrlRemnants(),vn;if(r===Ke){if(!nn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),vn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;Jt(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===it||e===It)return;nn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=c.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===It||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===Ge)return this._value.splice(0,n),yn;if(r===Ke){var i=this._value[n+1];i!==It&&void 0!==i&&(i===Ge?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):nn(r,i)&&(t+=this.consumeStringSlice(n),t+=c(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ve,n=this.peekCodePoint(0);for(n!==xt&&n!==at||e.push(this.consumeCodePoint());Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===_t&&Wt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=We;Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===jt||n===Lt)&&((r===xt||r===at)&&Wt(i)||Wt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=We;Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[an(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);return rn(r,i,o)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===tt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=c(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=c(this.consumeCodePoint());Jt(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||Gt(n)||n>1114111?bt:n}return e===It?bt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(en(t))e+=c(t);else{if(!nn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=c(this.consumeEscapedCodePoint())}}},e}(),Pn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Mn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Un(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?En:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),Tn=function(e){return 15===e.type},Dn=function(e){return 17===e.type},Fn=function(e){return 20===e.type},In=function(e){return 0===e.type},kn=function(e,t){return Fn(e)&&e.value===t},On=function(e){return 31!==e.type},Ln=function(e){return 31!==e.type&&4!==e.type},Rn=function(e){var t=[],n=[];return e.forEach((function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)})),n.length&&t.push(n),t},Un=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},zn=function(e){return 17===e.type||15===e.type},Nn=function(e){return 16===e.type||zn(e)},jn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Hn={type:17,number:0,flags:Ve},Qn={type:16,number:50,flags:Ve},Vn={type:16,number:100,flags:Ve},Wn=function(e,t,n){var r=e[0],i=e[1];return[Gn(r,t),Gn(void 0!==i?i:r,n)]},Gn=function(e,t){if(16===e.type)return e.number/100*t;if(Tn(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Kn="grad",Yn="rad",Xn="turn",$n={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Kn:return Math.PI/200*t.number;case Yn:return t.number;case Xn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},Jn=function(e){return 15===e.type&&(e.unit===qn||e.unit===Kn||e.unit===Yn||e.unit===Xn)},Zn=function(e){switch(e.filter(Fn).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Hn,Hn];case"to top":case"bottom":return er(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Hn,Vn];case"to right":case"left":return er(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Vn,Vn];case"to bottom":case"top":return er(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Vn,Hn];case"to left":case"right":return er(270)}return 0},er=function(e){return Math.PI*e/180},tr={name:"color",parse:function(e,t){if(18===t.type){var n=cr[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),i=t.value.substring(1,2),o=t.value.substring(2,3);return ir(parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16),1)}if(4===t.value.length){r=t.value.substring(0,1),i=t.value.substring(1,2),o=t.value.substring(2,3);var a=t.value.substring(3,4);return ir(parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16),parseInt(a+a,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),i=t.value.substring(2,4),o=t.value.substring(4,6),ir(parseInt(r,16),parseInt(i,16),parseInt(o,16),1);if(8===t.value.length)return r=t.value.substring(0,2),i=t.value.substring(2,4),o=t.value.substring(4,6),a=t.value.substring(6,8),ir(parseInt(r,16),parseInt(i,16),parseInt(o,16),parseInt(a,16)/255)}if(20===t.type){var s=dr[t.value.toUpperCase()];if(void 0!==s)return s}return dr.TRANSPARENT}},nr=function(e){return!(255&e)},rr=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,i=255&e>>24;return t<255?"rgba("+i+","+r+","+n+","+t/255+")":"rgb("+i+","+r+","+n+")"},ir=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},or=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},ar=function(e,t){var n=t.filter(Ln);if(3===n.length){var r=n.map(or),i=r[0],o=r[1],a=r[2];return ir(i,o,a,1)}if(4===n.length){var s=n.map(or),l=(i=s[0],o=s[1],a=s[2],s[3]);return ir(i,o,a,l)}return 0};function sr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var lr=function(e,t){var n=t.filter(Ln),r=n[0],i=n[1],o=n[2],a=n[3],s=(17===r.type?er(r.number):$n.parse(e,r))/(2*Math.PI),l=Nn(i)?i.number/100:0,c=Nn(o)?o.number/100:0,u=void 0!==a&&Nn(a)?Gn(a,1):1;if(0===l)return ir(255*c,255*c,255*c,1);var d=c<=.5?c*(l+1):c+l-c*l,h=2*c-d,p=sr(h,d,s+1/3),A=sr(h,d,s),f=sr(h,d,s-1/3);return ir(255*p,255*A,255*f,u)},cr={hsl:lr,hsla:lr,rgb:ar,rgba:ar},ur=function(e,t){return tr.parse(e,Pn.create(t).parseComponentValue())},dr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},hr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Fn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},pr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ar=function(e,t){var n=tr.parse(e,t[0]),r=t[1];return r&&Nn(r)?{color:n,stop:r}:{color:n,stop:null}},fr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=Hn),null===r.stop&&(r.stop=Vn);for(var i=[],o=0,a=0;a<e.length;a++){var s=e[a].stop;if(null!==s){var l=Gn(s,t);l>o?i.push(l):i.push(o),o=l}else i.push(null)}var c=null;for(a=0;a<i.length;a++){var u=i[a];if(null===u)null===c&&(c=a);else if(null!==c){for(var d=a-c,h=(u-i[c-1])/(d+1),p=1;p<=d;p++)i[c+p-1]=h*p;c=null}}return e.map((function(e,n){return{color:e.color,stop:Math.max(Math.min(1,i[n]/t),0)}}))},mr=function(e,t,n){var r=t/2,i=n/2,o=Gn(e[0],t)-r,a=i-Gn(e[1],n);return(Math.atan2(a,o)+2*Math.PI)%(2*Math.PI)},gr=function(e,t,n){var r="number"==typeof e?e:mr(e,t,n),i=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),o=t/2,a=n/2,s=i/2,l=Math.sin(r-Math.PI/2)*s,c=Math.cos(r-Math.PI/2)*s;return[i,o-c,o+c,a-l,a+l]},vr=function(e,t){return Math.sqrt(e*e+t*t)},yr=function(e,t,n,r,i){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var o=t[0],a=t[1],s=vr(n-o,r-a);return(i?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:t,optimumDistance:s}:e}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},br=function(e,t,n,r,i){var o=0,a=0;switch(e.size){case 0:0===e.shape?o=a=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):1===e.shape&&(o=Math.min(Math.abs(t),Math.abs(t-r)),a=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(0===e.shape)o=a=Math.min(vr(t,n),vr(t,n-i),vr(t-r,n),vr(t-r,n-i));else if(1===e.shape){var s=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(t),Math.abs(t-r)),l=yr(r,i,t,n,!0),c=l[0],u=l[1];a=s*(o=vr(c-t,(u-n)/s))}break;case 1:0===e.shape?o=a=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):1===e.shape&&(o=Math.max(Math.abs(t),Math.abs(t-r)),a=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(0===e.shape)o=a=Math.max(vr(t,n),vr(t,n-i),vr(t-r,n),vr(t-r,n-i));else if(1===e.shape){s=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(t),Math.abs(t-r));var d=yr(r,i,t,n,!1);c=d[0],u=d[1],a=s*(o=vr(c-t,(u-n)/s))}}return Array.isArray(e.size)&&(o=Gn(e.size[0],r),a=2===e.size.length?Gn(e.size[1],i):o),[o,a]},wr=function(e,t){var n=er(180),r=[];return Rn(t).forEach((function(t,i){if(0===i){var o=t[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(n=Zn(t));if(Jn(o))return void(n=($n.parse(e,o)+er(270))%er(360))}var a=Ar(e,t);r.push(a)})),{angle:n,stops:r,type:1}},xr="closest-side",Cr="farthest-side",Sr="closest-corner",Br="farthest-corner",_r="circle",Er="ellipse",Mr="cover",Pr="contain",Tr=function(e,t){var n=0,r=3,i=[],o=[];return Rn(t).forEach((function(t,a){var s=!0;if(0===a?s=t.reduce((function(e,t){if(Fn(t))switch(t.value){case"center":return o.push(Qn),!1;case"top":case"left":return o.push(Hn),!1;case"right":case"bottom":return o.push(Vn),!1}else if(Nn(t)||zn(t))return o.push(t),!1;return e}),s):1===a&&(s=t.reduce((function(e,t){if(Fn(t))switch(t.value){case _r:return n=0,!1;case Er:return n=1,!1;case Pr:case xr:return r=0,!1;case Cr:return r=1,!1;case Sr:return r=2,!1;case Mr:case Br:return r=3,!1}else if(zn(t)||Nn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)),s){var l=Ar(e,t);i.push(l)}})),{size:r,shape:n,stops:i,position:o,type:2}},Dr=function(e){return 1===e.type},Fr=function(e){return 2===e.type},Ir={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Rr[t.name];if(void 0===r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function kr(e){return!(20===e.type&&"none"===e.value||18===e.type&&!Rr[e.name])}var Or,Lr,Rr={"linear-gradient":function(e,t){var n=er(180),r=[];return Rn(t).forEach((function(t,i){if(0===i){var o=t[0];if(20===o.type&&"to"===o.value)return void(n=Zn(t));if(Jn(o))return void(n=$n.parse(e,o))}var a=Ar(e,t);r.push(a)})),{angle:n,stops:r,type:1}},"-moz-linear-gradient":wr,"-ms-linear-gradient":wr,"-o-linear-gradient":wr,"-webkit-linear-gradient":wr,"radial-gradient":function(e,t){var n=0,r=3,i=[],o=[];return Rn(t).forEach((function(t,a){var s=!0;if(0===a){var l=!1;s=t.reduce((function(e,t){if(l)if(Fn(t))switch(t.value){case"center":return o.push(Qn),e;case"top":case"left":return o.push(Hn),e;case"right":case"bottom":return o.push(Vn),e}else(Nn(t)||zn(t))&&o.push(t);else if(Fn(t))switch(t.value){case _r:return n=0,!1;case Er:return n=1,!1;case"at":return l=!0,!1;case xr:return r=0,!1;case Mr:case Cr:return r=1,!1;case Pr:case Sr:return r=2,!1;case Br:return r=3,!1}else if(zn(t)||Nn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)}if(s){var c=Ar(e,t);i.push(c)}})),{size:r,shape:n,stops:i,position:o,type:2}},"-moz-radial-gradient":Tr,"-ms-radial-gradient":Tr,"-o-radial-gradient":Tr,"-webkit-radial-gradient":Tr,"-webkit-gradient":function(e,t){var n=er(180),r=[],i=1,o=0,a=3,s=[];return Rn(t).forEach((function(t,n){var o=t[0];if(0===n){if(Fn(o)&&"linear"===o.value)return void(i=1);if(Fn(o)&&"radial"===o.value)return void(i=2)}if(18===o.type)if("from"===o.name){var a=tr.parse(e,o.values[0]);r.push({stop:Hn,color:a})}else if("to"===o.name)a=tr.parse(e,o.values[0]),r.push({stop:Vn,color:a});else if("color-stop"===o.name){var s=o.values.filter(Ln);if(2===s.length){a=tr.parse(e,s[1]);var l=s[0];Dn(l)&&r.push({stop:{type:16,number:100*l.number,flags:l.flags},color:a})}}})),1===i?{angle:(n+er(180))%er(360),stops:r,type:i}:{size:a,shape:o,stops:r,position:s,type:i}}},Ur={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter((function(e){return Ln(e)&&kr(e)})).map((function(t){return Ir.parse(e,t)}))}},zr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Fn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Nr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Rn(t).map((function(e){return e.filter(Nn)})).map(jn)}},jr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Rn(t).map((function(e){return e.filter(Fn).map((function(e){return e.value})).join(" ")})).map(Hr)}},Hr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(Lr=Or||(Or={})).AUTO="auto",Lr.CONTAIN="contain",Lr.COVER="cover";var Qr,Vr,Wr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Rn(t).map((function(e){return e.filter(Gr)}))}},Gr=function(e){return Fn(e)||Nn(e)},qr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Kr=qr("top"),Yr=qr("right"),Xr=qr("bottom"),$r=qr("left"),Jr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return jn(t.filter(Nn))}}},Zr=Jr("top-left"),ei=Jr("top-right"),ti=Jr("bottom-right"),ni=Jr("bottom-left"),ri=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ii=ri("top"),oi=ri("right"),ai=ri("bottom"),si=ri("left"),li=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:0}}},ci=li("top"),ui=li("right"),di=li("bottom"),hi=li("left"),pi={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ai={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},fi={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Fn).reduce((function(e,t){return e|mi(t.value)}),0)}},mi=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gi={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},vi={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};(Vr=Qr||(Qr={})).NORMAL="normal",Vr.STRICT="strict";var yi,bi,wi={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?Qr.STRICT:Qr.NORMAL}},xi={name:"line-height",initialValue:"normal",prefix:!1,type:4},Ci=function(e,t){return Fn(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Nn(e)?Gn(e,t):t},Si={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Ir.parse(e,t)}},Bi={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},_i={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Ei=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Mi=Ei("top"),Pi=Ei("right"),Ti=Ei("bottom"),Di=Ei("left"),Fi={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Fn).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Ii={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},ki=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Oi=ki("top"),Li=ki("right"),Ri=ki("bottom"),Ui=ki("left"),zi={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Ni={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},ji={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&kn(t[0],"none")?[]:Rn(t).map((function(t){for(var n={color:dr.TRANSPARENT,offsetX:Hn,offsetY:Hn,blur:Hn},r=0,i=0;i<t.length;i++){var o=t[i];zn(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:n.blur=o,r++):n.color=tr.parse(e,o)}return n}))}},Hi={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Qi={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Gi[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Vi=function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},Wi=function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),n=t[0],r=t[1];t[2],t[3];var i=t[4],o=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var a=t[12],s=t[13];return t[14],t[15],16===t.length?[n,r,i,o,a,s]:null},Gi={matrix:Vi,matrix3d:Wi},qi={type:16,number:50,flags:Ve},Ki=[qi,qi],Yi={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Nn);return 2!==n.length?Ki:[n[0],n[1]]}},Xi={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};(bi=yi||(yi={})).NORMAL="normal",bi.BREAK_ALL="break-all",bi.KEEP_ALL="keep-all";for(var $i={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return yi.BREAK_ALL;case"keep-all":return yi.KEEP_ALL;default:return yi.NORMAL}}},Ji={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(Dn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Zi={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},eo={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Dn(t)?t.number:1}},to={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},no={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Fn).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},ro={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach((function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}})),n.length&&r.push(n.join(" ")),r.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},io={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},oo={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return Dn(t)?t.number:Fn(t)&&"bold"===t.value?700:400}},ao={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Fn).map((function(e){return e.value}))}},so={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},lo=function(e,t){return!!(e&t)},co={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},uo={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],i=t.filter(On),o=0;o<i.length;o++){var a=i[o],s=i[o+1];if(20===a.type){var l=s&&Dn(s)?s.number:1;r.push({counter:a.value,increment:l})}}return r}},ho={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(On),i=0;i<r.length;i++){var o=r[i],a=r[i+1];if(Fn(o)&&"none"!==o.value){var s=a&&Dn(a)?a.number:0;n.push({counter:o.value,reset:s})}}return n}},po={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Tn).map((function(t){return Zi.parse(e,t)}))}},Ao={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],i=t.filter(In);if(i.length%2!=0)return null;for(var o=0;o<i.length;o+=2){var a=i[o].value,s=i[o+1].value;r.push({open:a,close:s})}return r}},fo=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},mo={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&kn(t[0],"none")?[]:Rn(t).map((function(t){for(var n={color:255,offsetX:Hn,offsetY:Hn,blur:Hn,spread:Hn,inset:!1},r=0,i=0;i<t.length;i++){var o=t[i];kn(o,"inset")?n.inset=!0:zn(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:2===r?n.blur=o:n.spread=o,r++):n.color=tr.parse(e,o)}return n}))}},go={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Fn).forEach((function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}})),n.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r}},vo={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},yo={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:0}},bo=function(){function e(e,t){var n,r;this.animationDuration=Co(e,po,t.animationDuration),this.backgroundClip=Co(e,hr,t.backgroundClip),this.backgroundColor=Co(e,pr,t.backgroundColor),this.backgroundImage=Co(e,Ur,t.backgroundImage),this.backgroundOrigin=Co(e,zr,t.backgroundOrigin),this.backgroundPosition=Co(e,Nr,t.backgroundPosition),this.backgroundRepeat=Co(e,jr,t.backgroundRepeat),this.backgroundSize=Co(e,Wr,t.backgroundSize),this.borderTopColor=Co(e,Kr,t.borderTopColor),this.borderRightColor=Co(e,Yr,t.borderRightColor),this.borderBottomColor=Co(e,Xr,t.borderBottomColor),this.borderLeftColor=Co(e,$r,t.borderLeftColor),this.borderTopLeftRadius=Co(e,Zr,t.borderTopLeftRadius),this.borderTopRightRadius=Co(e,ei,t.borderTopRightRadius),this.borderBottomRightRadius=Co(e,ti,t.borderBottomRightRadius),this.borderBottomLeftRadius=Co(e,ni,t.borderBottomLeftRadius),this.borderTopStyle=Co(e,ii,t.borderTopStyle),this.borderRightStyle=Co(e,oi,t.borderRightStyle),this.borderBottomStyle=Co(e,ai,t.borderBottomStyle),this.borderLeftStyle=Co(e,si,t.borderLeftStyle),this.borderTopWidth=Co(e,ci,t.borderTopWidth),this.borderRightWidth=Co(e,ui,t.borderRightWidth),this.borderBottomWidth=Co(e,di,t.borderBottomWidth),this.borderLeftWidth=Co(e,hi,t.borderLeftWidth),this.boxShadow=Co(e,mo,t.boxShadow),this.color=Co(e,pi,t.color),this.direction=Co(e,Ai,t.direction),this.display=Co(e,fi,t.display),this.float=Co(e,gi,t.cssFloat),this.fontFamily=Co(e,ro,t.fontFamily),this.fontSize=Co(e,io,t.fontSize),this.fontStyle=Co(e,so,t.fontStyle),this.fontVariant=Co(e,ao,t.fontVariant),this.fontWeight=Co(e,oo,t.fontWeight),this.letterSpacing=Co(e,vi,t.letterSpacing),this.lineBreak=Co(e,wi,t.lineBreak),this.lineHeight=Co(e,xi,t.lineHeight),this.listStyleImage=Co(e,Si,t.listStyleImage),this.listStylePosition=Co(e,Bi,t.listStylePosition),this.listStyleType=Co(e,_i,t.listStyleType),this.marginTop=Co(e,Mi,t.marginTop),this.marginRight=Co(e,Pi,t.marginRight),this.marginBottom=Co(e,Ti,t.marginBottom),this.marginLeft=Co(e,Di,t.marginLeft),this.opacity=Co(e,eo,t.opacity);var i=Co(e,Fi,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Co(e,Ii,t.overflowWrap),this.paddingTop=Co(e,Oi,t.paddingTop),this.paddingRight=Co(e,Li,t.paddingRight),this.paddingBottom=Co(e,Ri,t.paddingBottom),this.paddingLeft=Co(e,Ui,t.paddingLeft),this.paintOrder=Co(e,go,t.paintOrder),this.position=Co(e,Ni,t.position),this.textAlign=Co(e,zi,t.textAlign),this.textDecorationColor=Co(e,to,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=Co(e,no,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=Co(e,ji,t.textShadow),this.textTransform=Co(e,Hi,t.textTransform),this.transform=Co(e,Qi,t.transform),this.transformOrigin=Co(e,Yi,t.transformOrigin),this.visibility=Co(e,Xi,t.visibility),this.webkitTextStrokeColor=Co(e,vo,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Co(e,yo,t.webkitTextStrokeWidth),this.wordBreak=Co(e,$i,t.wordBreak),this.zIndex=Co(e,Ji,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return nr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return lo(this.display,4)||lo(this.display,33554432)||lo(this.display,268435456)||lo(this.display,536870912)||lo(this.display,67108864)||lo(this.display,134217728)},e}(),wo=function(){function e(e,t){this.content=Co(e,co,t.content),this.quotes=Co(e,Ao,t.quotes)}return e}(),xo=function(){function e(e,t){this.counterIncrement=Co(e,uo,t.counterIncrement),this.counterReset=Co(e,ho,t.counterReset)}return e}(),Co=function(e,t,n){var r=new Mn,i=null!=n?n.toString():t.initialValue;r.write(i);var o=new Pn(r.read());switch(t.type){case 2:var a=o.parseComponentValue();return t.parse(e,Fn(a)?a.value:t.initialValue);case 0:return t.parse(e,o.parseComponentValue());case 1:return t.parse(e,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(t.format){case"angle":return $n.parse(e,o.parseComponentValue());case"color":return tr.parse(e,o.parseComponentValue());case"image":return Ir.parse(e,o.parseComponentValue());case"length":var s=o.parseComponentValue();return zn(s)?s:Hn;case"length-percentage":var l=o.parseComponentValue();return Nn(l)?l:Hn;case"time":return Zi.parse(e,o.parseComponentValue())}}},So="data-html2canvas-debug",Bo=function(e){switch(e.getAttribute(So)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},_o=function(e,t){var n=Bo(e);return 1===n||t===n},Eo=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,_o(t,3),this.styles=new bo(e,window.getComputedStyle(t,null)),fs(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=a(this.context,t),_o(t,4)&&(this.flags|=16)}return e}(),Mo="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Po="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",To="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Do=0;Do<Po.length;Do++)To[Po.charCodeAt(Do)]=Do;for(var Fo=function(e){var t,n,r,i,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<s;t+=4)n=To[e.charCodeAt(t)],r=To[e.charCodeAt(t+1)],i=To[e.charCodeAt(t+2)],o=To[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c},Io=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},ko=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Oo=5,Lo=11,Ro=2,Uo=65536>>Oo,zo=(1<<Oo)-1,No=Uo+(1024>>Oo)+32,jo=65536>>Lo,Ho=(1<<Lo-Oo)-1,Qo=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Vo=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Wo=function(e,t){var n=Fo(e),r=Array.isArray(n)?ko(n):new Uint32Array(n),i=Array.isArray(n)?Io(n):new Uint16Array(n),o=24,a=Qo(i,o/2,r[4]/2),s=2===r[5]?Qo(i,(o+r[4])/2):Vo(r,Math.ceil((o+r[4])/4));return new Go(r[0],r[1],r[2],r[3],a,s)},Go=function(){function e(e,t,n,r,i,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Oo])<<Ro)+(e&zo),this.data[t];if(e<=65535)return t=((t=this.index[Uo+(e-55296>>Oo)])<<Ro)+(e&zo),this.data[t];if(e<this.highStart)return t=No-jo+(e>>Lo),t=this.index[t],t+=e>>Oo&Ho,t=((t=this.index[t])<<Ro)+(e&zo),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ko="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Yo=0;Yo<qo.length;Yo++)Ko[qo.charCodeAt(Yo)]=Yo;var Xo,$o,Jo=1,Zo=2,ea=3,ta=4,na=5,ra=7,ia=8,oa=9,aa=10,sa=11,la=12,ca=13,ua=14,da=15,ha=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t},pa=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=e[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},Aa=Wo(Mo),fa="×",ma="÷",ga=function(e){return Aa.get(e)},va=function(e,t,n){var r=n-2,i=t[r],o=t[n-1],a=t[n];if(o===Zo&&a===ea)return fa;if(o===Zo||o===ea||o===ta)return ma;if(a===Zo||a===ea||a===ta)return ma;if(o===ia&&-1!==[ia,oa,sa,la].indexOf(a))return fa;if(!(o!==sa&&o!==oa||a!==oa&&a!==aa))return fa;if((o===la||o===aa)&&a===aa)return fa;if(a===ca||a===na)return fa;if(a===ra)return fa;if(o===Jo)return fa;if(o===ca&&a===ua){for(;i===na;)i=t[--r];if(i===ua)return fa}if(o===da&&a===da){for(var s=0;i===da;)s++,i=t[--r];if(s%2==0)return fa}return ma},ya=function(e){var t=ha(e),n=t.length,r=0,i=0,o=t.map(ga);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=fa;r<n&&(e=va(t,o,++r))===fa;);if(e!==fa||r===n){var a=pa.apply(null,t.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},ba=function(e){for(var t,n=ya(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},wa=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var i=n.getBoundingClientRect(),o=Math.round(i.height);if(e.body.removeChild(r),o===t)return!0}}return!1},xa=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,i=l(r.data).map((function(e){return c(e)})),o=0,a={},s=i.every((function(e,t){n.setStart(r,o),n.setEnd(r,o+e.length);var i=n.getBoundingClientRect();o+=e.length;var s=i.x>a.x||i.y>a.y;return a=i,0===t||s}));return e.body.removeChild(t),s},Ca=function(){return void 0!==(new Image).crossOrigin},Sa=function(){return"string"==typeof(new XMLHttpRequest).responseType},Ba=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(i){return!1}return!0},_a=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},Ea=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,o=t.toDataURL();i.src=o;var a=Ma(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),Pa(a).then((function(t){r.drawImage(t,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var a=e.createElement("div");return a.style.backgroundImage="url("+o+")",a.style.height=n+"px",_a(i)?Pa(Ma(n,n,0,0,a)):Promise.reject(!1)})).then((function(e){return r.drawImage(e,0,0),_a(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))},Ma=function(e,t,n,r,i){var o="http://www.w3.org/2000/svg",a=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return a.setAttributeNS(null,"width",e.toString()),a.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(s),s.appendChild(i),a},Pa=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Ta={get SUPPORT_RANGE_BOUNDS(){var e=wa(document);return Object.defineProperty(Ta,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ta.SUPPORT_RANGE_BOUNDS&&xa(document);return Object.defineProperty(Ta,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Ba(document);return Object.defineProperty(Ta,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?Ea(document):Promise.resolve(!1);return Object.defineProperty(Ta,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Ca();return Object.defineProperty(Ta,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Sa();return Object.defineProperty(Ta,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ta,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Ta,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Da=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Fa=function(e,t,n,r){var i=Ra(t,n),a=[],s=0;return i.forEach((function(t){if(n.textDecorationLine.length||t.trim().length>0)if(Ta.SUPPORT_RANGE_BOUNDS){var i=ka(r,s,t.length).getClientRects();if(i.length>1){var l=Oa(t),c=0;l.forEach((function(t){a.push(new Da(t,o.fromDOMRectList(e,ka(r,c+s,t.length).getClientRects()))),c+=t.length}))}else a.push(new Da(t,o.fromDOMRectList(e,i)))}else{var u=r.splitText(t.length);a.push(new Da(t,Ia(e,r))),r=u}else Ta.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));s+=t.length})),a},Ia=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(r,t);var s=a(e,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return o.EMPTY},ka=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(e,t),i.setEnd(e,t+n),i},Oa=function(e){if(Ta.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return ba(e)},La=function(e,t){if(Ta.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map((function(e){return e.segment}))}return za(e,t)},Ra=function(e,t){return 0!==t.letterSpacing?Oa(e):La(e,t)},Ua=[32,160,4961,65792,65793,4153,4241],za=function(e,t){for(var n,r=je(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),i=[],o=function(){if(n.value){var e=n.value.slice(),t=l(e),r="";t.forEach((function(e){-1===Ua.indexOf(e)?r+=c(e):(r.length&&i.push(r),i.push(c(e)),r="")})),r.length&&i.push(r)}};!(n=r.next()).done;)o();return i},Na=function(){function e(e,t,n){this.text=ja(t.data,n.textTransform),this.textBounds=Fa(e,this.text,n,t)}return e}(),ja=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Ha,Qa);case 2:return e.toUpperCase();default:return e}},Ha=/(^|\s|:|-|\(|\))([a-z])/g,Qa=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Va=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(Eo),Wa=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(Eo),Ga=function(e){function n(t,n){var r=e.call(this,t,n)||this,i=new XMLSerializer,o=a(t,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(Eo),qa=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(Eo),Ka=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"==typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(Eo),Ya=[{type:15,flags:0,unit:"px",number:3}],Xa=[{type:16,flags:0,number:50}],$a=function(e){return e.width>e.height?new o(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new o(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Ja=function(e){var t=e.type===ts?new Array(e.value.length+1).join("•"):e.value;return 0===t.length?e.placeholder||"":t},Za="checkbox",es="radio",ts="password",ns=707406591,rs=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Ja(n),r.type!==Za&&r.type!==es||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=$a(r.bounds)),r.type){case Za:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Ya;break;case es:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Xa}return r}return t(n,e),n}(Eo),is=function(e){function n(t,n){var r=e.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||"",r}return t(n,e),n}(Eo),os=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(Eo),as=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=us(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?ur(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):dr.TRANSPARENT,o=n.contentWindow.document.body?ur(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):dr.TRANSPARENT;r.backgroundColor=nr(i)?nr(o)?r.styles.backgroundColor:o:i}}catch(a){}return r}return t(n,e),n}(Eo),ss=["OL","UL","MENU"],ls=function(e,t,n,r){for(var i=t.firstChild,o=void 0;i;i=o)if(o=i.nextSibling,ps(i)&&i.data.trim().length>0)n.textNodes.push(new Na(e,i,n.styles));else if(As(i))if(Ds(i)&&i.assignedNodes)i.assignedNodes().forEach((function(t){return ls(e,t,n,r)}));else{var a=cs(e,i);a.styles.isVisible()&&(ds(i,a,r)?a.flags|=4:hs(a.styles)&&(a.flags|=2),-1!==ss.indexOf(i.tagName)&&(a.flags|=8),n.elements.push(a),i.slot,i.shadowRoot?ls(e,i.shadowRoot,a,r):Ps(i)||ws(i)||Ts(i)||ls(e,i,a,r))}},cs=function(e,t){return Bs(t)?new Va(e,t):Cs(t)?new Wa(e,t):ws(t)?new Ga(e,t):gs(t)?new qa(e,t):vs(t)?new Ka(e,t):ys(t)?new rs(e,t):Ts(t)?new is(e,t):Ps(t)?new os(e,t):_s(t)?new as(e,t):new Eo(e,t)},us=function(e,t){var n=cs(e,t);return n.flags|=4,ls(e,t,n,n),n},ds=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||xs(e)&&n.styles.isTransparent()},hs=function(e){return e.isPositioned()||e.isFloating()},ps=function(e){return e.nodeType===Node.TEXT_NODE},As=function(e){return e.nodeType===Node.ELEMENT_NODE},fs=function(e){return As(e)&&void 0!==e.style&&!ms(e)},ms=function(e){return"object"==typeof e.className},gs=function(e){return"LI"===e.tagName},vs=function(e){return"OL"===e.tagName},ys=function(e){return"INPUT"===e.tagName},bs=function(e){return"HTML"===e.tagName},ws=function(e){return"svg"===e.tagName},xs=function(e){return"BODY"===e.tagName},Cs=function(e){return"CANVAS"===e.tagName},Ss=function(e){return"VIDEO"===e.tagName},Bs=function(e){return"IMG"===e.tagName},_s=function(e){return"IFRAME"===e.tagName},Es=function(e){return"STYLE"===e.tagName},Ms=function(e){return"SCRIPT"===e.tagName},Ps=function(e){return"TEXTAREA"===e.tagName},Ts=function(e){return"SELECT"===e.tagName},Ds=function(e){return"SLOT"===e.tagName},Fs=function(e){return e.tagName.indexOf("-")>0},Is=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,i=!0;null!==n&&n.forEach((function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(i=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)}));var o=[];return i&&r.forEach((function(e){var n=t.counters[e.counter];o.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)})),o},e}(),ks={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Os={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Ls={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Rs={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Us=function(e,t,n,r,i,o){return e<t||e>n?$s(e,i,o.length>0):r.integers.reduce((function(t,n,i){for(;e>=n;)e-=n,t+=r.values[i];return t}),"")+o},zs=function(e,t,n,r){var i="";do{n||e--,i=r(e)+i,e/=t}while(e*t>=t);return i},Ns=function(e,t,n,r,i){var o=n-t+1;return(e<0?"-":"")+(zs(Math.abs(e),o,r,(function(e){return c(Math.floor(e%o)+t)}))+i)},js=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return zs(Math.abs(e),r,!1,(function(e){return t[Math.floor(e%r)]}))+n},Hs=1,Qs=2,Vs=4,Ws=8,Gs=function(e,t,n,r,i,o){if(e<-9999||e>9999)return $s(e,4,i.length>0);var a=Math.abs(e),s=i;if(0===a)return t[0]+s;for(var l=0;a>0&&l<=4;l++){var c=a%10;0===c&&lo(o,Hs)&&""!==s?s=t[c]+s:c>1||1===c&&0===l||1===c&&1===l&&lo(o,Qs)||1===c&&1===l&&lo(o,Vs)&&e>100||1===c&&l>1&&lo(o,Ws)?s=t[c]+(l>0?n[l-1]:"")+s:1===c&&l>0&&(s=n[l-1]+s),a=Math.floor(a/10)}return(e<0?r:"")+s},qs="十百千萬",Ks="拾佰仟萬",Ys="マイナス",Xs="마이너스",$s=function(e,t,n){var r=n?". ":"",i=n?"、":"",o=n?", ":"",a=n?" ":"";switch(t){case 0:return"•"+a;case 1:return"◦"+a;case 2:return"◾"+a;case 5:var s=Ns(e,48,57,!0,r);return s.length<4?"0"+s:s;case 4:return js(e,"〇一二三四五六七八九",i);case 6:return Us(e,1,3999,ks,3,r).toLowerCase();case 7:return Us(e,1,3999,ks,3,r);case 8:return Ns(e,945,969,!1,r);case 9:return Ns(e,97,122,!1,r);case 10:return Ns(e,65,90,!1,r);case 11:return Ns(e,1632,1641,!0,r);case 12:case 49:return Us(e,1,9999,Os,3,r);case 35:return Us(e,1,9999,Os,3,r).toLowerCase();case 13:return Ns(e,2534,2543,!0,r);case 14:case 30:return Ns(e,6112,6121,!0,r);case 15:return js(e,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return js(e,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return Gs(e,"零一二三四五六七八九",qs,"負",i,Qs|Vs|Ws);case 47:return Gs(e,"零壹貳參肆伍陸柒捌玖",Ks,"負",i,Hs|Qs|Vs|Ws);case 42:return Gs(e,"零一二三四五六七八九",qs,"负",i,Qs|Vs|Ws);case 41:return Gs(e,"零壹贰叁肆伍陆柒捌玖",Ks,"负",i,Hs|Qs|Vs|Ws);case 26:return Gs(e,"〇一二三四五六七八九","十百千万",Ys,i,0);case 25:return Gs(e,"零壱弐参四伍六七八九","拾百千万",Ys,i,Hs|Qs|Vs);case 31:return Gs(e,"영일이삼사오육칠팔구","십백천만",Xs,o,Hs|Qs|Vs);case 33:return Gs(e,"零一二三四五六七八九","十百千萬",Xs,o,0);case 32:return Gs(e,"零壹貳參四五六七八九","拾百千",Xs,o,Hs|Qs|Vs);case 18:return Ns(e,2406,2415,!0,r);case 20:return Us(e,1,19999,Rs,3,r);case 21:return Ns(e,2790,2799,!0,r);case 22:return Ns(e,2662,2671,!0,r);case 22:return Us(e,1,10999,Ls,3,r);case 23:return js(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return js(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ns(e,3302,3311,!0,r);case 28:return js(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return js(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return Ns(e,3792,3801,!0,r);case 37:return Ns(e,6160,6169,!0,r);case 38:return Ns(e,4160,4169,!0,r);case 39:return Ns(e,2918,2927,!0,r);case 40:return Ns(e,1776,1785,!0,r);case 43:return Ns(e,3046,3055,!0,r);case 44:return Ns(e,3174,3183,!0,r);case 45:return Ns(e,3664,3673,!0,r);case 46:return Ns(e,3872,3881,!0,r);default:return Ns(e,48,57,!0,r)}},Js="data-html2canvas-ignore",Zs=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Is,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,o=nl(e,t);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,l=o.contentWindow,c=l.document,u=ol(o).then((function(){return r(n,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(ul),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-t.left,l.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,il(c)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(c,n)})).then((function(){return o}))]:[2,o]}}))}))}));return c.open(),c.write(ll(document.doctype)+"<html></html>"),cl(this.referenceElement.ownerDocument,a,s),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(e){if(_o(e,2),Cs(e))return this.createCanvasClone(e);if(Ss(e))return this.createVideoClone(e);if(Es(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Bs(t)&&(Bs(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Fs(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return sl(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),"SecurityError"!==i.name)throw i}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(l){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var i=e.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var a=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(a){var s=a.getContextAttributes();!1===(null==s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return r}catch(l){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(i){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){As(t)&&(Ms(t)||t.hasAttribute(Js)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&As(t)&&Es(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(As(i)&&Ds(i)&&"function"==typeof i.assignedNodes){var o=i.assignedNodes();o.length&&o.forEach((function(e){return r.appendChildNode(t,e,n)}))}else this.appendChildNode(t,i,n)},e.prototype.cloneNode=function(e,t){if(ps(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&As(e)&&(fs(e)||ms(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var i=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&fs(r)&&(this.clonedReferenceElement=r),xs(r)&&ml(r);var s=this.counters.parse(new xo(this.context,i)),l=this.resolvePseudoContent(e,r,o,Xo.BEFORE);Fs(e)&&(t=!0),Ss(e)||this.cloneChildNodes(e,r,t),l&&r.insertBefore(l,r.firstChild);var c=this.resolvePseudoContent(e,r,a,Xo.AFTER);return c&&r.appendChild(c),this.counters.pop(s),(i&&(this.options.copyStyles||ms(e))&&!_s(e)||t)&&sl(i,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Ps(e)||Ts(e))&&(Ps(r)||Ts(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var i=this;if(n){var o=n.content,a=t.ownerDocument;if(a&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==n.display){this.counters.parse(new xo(this.context,n));var s=new wo(this.context,n),l=a.createElement("html2canvaspseudoelement");sl(n,l),s.content.forEach((function(t){if(0===t.type)l.appendChild(a.createTextNode(t.value));else if(22===t.type){var n=a.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Fn);r.length&&l.appendChild(a.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var o=t.values.filter(Ln),c=o[0],u=o[1];if(c&&Fn(c)){var d=i.counters.getCounterValue(c.value),h=u&&Fn(u)?_i.parse(i.context,u.value):3;l.appendChild(a.createTextNode($s(d,h,!1)))}}else if("counters"===t.name){var p=t.values.filter(Ln),A=(c=p[0],p[1]);if(u=p[2],c&&Fn(c)){var f=i.counters.getCounterValues(c.value),m=u&&Fn(u)?_i.parse(i.context,u.value):3,g=A&&0===A.type?A.value:"",v=f.map((function(e){return $s(e,m,!1)})).join(g);l.appendChild(a.createTextNode(v))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(a.createTextNode(fo(s.quotes,i.quoteDepth++,!0)));break;case"close-quote":l.appendChild(a.createTextNode(fo(s.quotes,--i.quoteDepth,!1)));break;default:l.appendChild(a.createTextNode(t.value))}})),l.className=pl+" "+Al;var c=r===Xo.BEFORE?" "+pl:" "+Al;return ms(t)?t.className.baseValue+=c:t.className+=c,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();($o=Xo||(Xo={}))[$o.BEFORE=0]="BEFORE",$o[$o.AFTER=1]="AFTER";var el,tl,nl=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Js,"true"),e.body.appendChild(n),n},rl=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},il=function(e){return Promise.all([].slice.call(e.images,0).map(rl))},ol=function(e){return new Promise((function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),t(e))}),50)}}))},al=["all","d","content"],sl=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===al.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},ll=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},cl=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},ul=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},dl=":before",hl=":after",pl="___html2canvas___pseudoelement_before",Al="___html2canvas___pseudoelement_after",fl='{\n    content: "" !important;\n    display: none !important;\n}',ml=function(e){gl(e,"."+pl+dl+fl+"\n         ."+Al+hl+fl)},gl=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},vl=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),yl=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:_l(e)||Cl(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a=this;return i(this,(function(i){switch(i.label){case 0:return t=vl.isSameOrigin(e),n=!Sl(e)&&!0===this._options.useCORS&&Ta.SUPPORT_CORS_IMAGES&&!t,r=!Sl(e)&&!t&&!_l(e)&&"string"==typeof this._options.proxy&&Ta.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||Sl(e)||_l(e)||r||n?(o=e,r?[4,this.proxy(o)]:[3,2]):[2];case 1:o=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(Bl(o)||n)&&(r.crossOrigin="anonymous"),r.src=o,!0===r.complete&&setTimeout((function(){return e(r)}),500),a._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+a._options.imageTimeout+"ms) loading image")}),a._options.imageTimeout)}))];case 3:return[2,i.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise((function(i,o){var a=Ta.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===a)i(s.response);else{var e=new FileReader;e.addEventListener("load",(function(){return i(e.result)}),!1),e.addEventListener("error",(function(e){return o(e)}),!1),e.readAsDataURL(s.response)}else o("Failed to proxy resource "+r+" with status code "+s.status)},s.onerror=o;var l=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+a),"text"!==a&&s instanceof XMLHttpRequest&&(s.responseType=a),t._options.imageTimeout){var c=t._options.imageTimeout;s.timeout=c,s.ontimeout=function(){return o("Timed out ("+c+"ms) proxying "+r)}}s.send()}))},e}(),bl=/^data:image\/svg\+xml/i,wl=/^data:image\/.*;base64,/i,xl=/^data:image\/.*/i,Cl=function(e){return Ta.SUPPORT_SVG_DRAWING||!El(e)},Sl=function(e){return xl.test(e)},Bl=function(e){return wl.test(e)},_l=function(e){return"blob"===e.substr(0,4)},El=function(e){return"svg"===e.substr(-3).toLowerCase()||bl.test(e)},Ml=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Pl=function(e,t,n){return new Ml(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},Tl=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Pl(this.start,this.startControl,t),i=Pl(this.startControl,this.endControl,t),o=Pl(this.endControl,this.end,t),a=Pl(r,i,t),s=Pl(i,o,t),l=Pl(a,s,t);return n?new e(this.start,r,a,l):new e(l,s,o,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Dl=function(e){return 1===e.type},Fl=function(){function e(e){var t=e.styles,n=e.bounds,r=Wn(t.borderTopLeftRadius,n.width,n.height),i=r[0],o=r[1],a=Wn(t.borderTopRightRadius,n.width,n.height),s=a[0],l=a[1],c=Wn(t.borderBottomRightRadius,n.width,n.height),u=c[0],d=c[1],h=Wn(t.borderBottomLeftRadius,n.width,n.height),p=h[0],A=h[1],f=[];f.push((i+s)/n.width),f.push((p+u)/n.width),f.push((o+A)/n.height),f.push((l+d)/n.height);var m=Math.max.apply(Math,f);m>1&&(i/=m,o/=m,s/=m,l/=m,u/=m,d/=m,p/=m,A/=m);var g=n.width-s,v=n.height-d,y=n.width-u,b=n.height-A,w=t.borderTopWidth,x=t.borderRightWidth,C=t.borderBottomWidth,S=t.borderLeftWidth,B=Gn(t.paddingTop,e.bounds.width),_=Gn(t.paddingRight,e.bounds.width),E=Gn(t.paddingBottom,e.bounds.width),M=Gn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Il(n.left+S/3,n.top+w/3,i-S/3,o-w/3,el.TOP_LEFT):new Ml(n.left+S/3,n.top+w/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Il(n.left+g,n.top+w/3,s-x/3,l-w/3,el.TOP_RIGHT):new Ml(n.left+n.width-x/3,n.top+w/3),this.bottomRightBorderDoubleOuterBox=u>0||d>0?Il(n.left+y,n.top+v,u-x/3,d-C/3,el.BOTTOM_RIGHT):new Ml(n.left+n.width-x/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=p>0||A>0?Il(n.left+S/3,n.top+b,p-S/3,A-C/3,el.BOTTOM_LEFT):new Ml(n.left+S/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Il(n.left+2*S/3,n.top+2*w/3,i-2*S/3,o-2*w/3,el.TOP_LEFT):new Ml(n.left+2*S/3,n.top+2*w/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Il(n.left+g,n.top+2*w/3,s-2*x/3,l-2*w/3,el.TOP_RIGHT):new Ml(n.left+n.width-2*x/3,n.top+2*w/3),this.bottomRightBorderDoubleInnerBox=u>0||d>0?Il(n.left+y,n.top+v,u-2*x/3,d-2*C/3,el.BOTTOM_RIGHT):new Ml(n.left+n.width-2*x/3,n.top+n.height-2*C/3),this.bottomLeftBorderDoubleInnerBox=p>0||A>0?Il(n.left+2*S/3,n.top+b,p-2*S/3,A-2*C/3,el.BOTTOM_LEFT):new Ml(n.left+2*S/3,n.top+n.height-2*C/3),this.topLeftBorderStroke=i>0||o>0?Il(n.left+S/2,n.top+w/2,i-S/2,o-w/2,el.TOP_LEFT):new Ml(n.left+S/2,n.top+w/2),this.topRightBorderStroke=i>0||o>0?Il(n.left+g,n.top+w/2,s-x/2,l-w/2,el.TOP_RIGHT):new Ml(n.left+n.width-x/2,n.top+w/2),this.bottomRightBorderStroke=u>0||d>0?Il(n.left+y,n.top+v,u-x/2,d-C/2,el.BOTTOM_RIGHT):new Ml(n.left+n.width-x/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=p>0||A>0?Il(n.left+S/2,n.top+b,p-S/2,A-C/2,el.BOTTOM_LEFT):new Ml(n.left+S/2,n.top+n.height-C/2),this.topLeftBorderBox=i>0||o>0?Il(n.left,n.top,i,o,el.TOP_LEFT):new Ml(n.left,n.top),this.topRightBorderBox=s>0||l>0?Il(n.left+g,n.top,s,l,el.TOP_RIGHT):new Ml(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||d>0?Il(n.left+y,n.top+v,u,d,el.BOTTOM_RIGHT):new Ml(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=p>0||A>0?Il(n.left,n.top+b,p,A,el.BOTTOM_LEFT):new Ml(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||o>0?Il(n.left+S,n.top+w,Math.max(0,i-S),Math.max(0,o-w),el.TOP_LEFT):new Ml(n.left+S,n.top+w),this.topRightPaddingBox=s>0||l>0?Il(n.left+Math.min(g,n.width-x),n.top+w,g>n.width+x?0:Math.max(0,s-x),Math.max(0,l-w),el.TOP_RIGHT):new Ml(n.left+n.width-x,n.top+w),this.bottomRightPaddingBox=u>0||d>0?Il(n.left+Math.min(y,n.width-S),n.top+Math.min(v,n.height-C),Math.max(0,u-x),Math.max(0,d-C),el.BOTTOM_RIGHT):new Ml(n.left+n.width-x,n.top+n.height-C),this.bottomLeftPaddingBox=p>0||A>0?Il(n.left+S,n.top+Math.min(b,n.height-C),Math.max(0,p-S),Math.max(0,A-C),el.BOTTOM_LEFT):new Ml(n.left+S,n.top+n.height-C),this.topLeftContentBox=i>0||o>0?Il(n.left+S+M,n.top+w+B,Math.max(0,i-(S+M)),Math.max(0,o-(w+B)),el.TOP_LEFT):new Ml(n.left+S+M,n.top+w+B),this.topRightContentBox=s>0||l>0?Il(n.left+Math.min(g,n.width+S+M),n.top+w+B,g>n.width+S+M?0:s-S+M,l-(w+B),el.TOP_RIGHT):new Ml(n.left+n.width-(x+_),n.top+w+B),this.bottomRightContentBox=u>0||d>0?Il(n.left+Math.min(y,n.width-(S+M)),n.top+Math.min(v,n.height+w+B),Math.max(0,u-(x+_)),d-(C+E),el.BOTTOM_RIGHT):new Ml(n.left+n.width-(x+_),n.top+n.height-(C+E)),this.bottomLeftContentBox=p>0||A>0?Il(n.left+S+M,n.top+b,Math.max(0,p-(S+M)),A-(C+E),el.BOTTOM_LEFT):new Ml(n.left+S+M,n.top+n.height-(C+E))}return e}();(tl=el||(el={}))[tl.TOP_LEFT=0]="TOP_LEFT",tl[tl.TOP_RIGHT=1]="TOP_RIGHT",tl[tl.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",tl[tl.BOTTOM_LEFT=3]="BOTTOM_LEFT";var Il=function(e,t,n,r,i){var o=(Math.sqrt(2)-1)/3*4,a=n*o,s=r*o,l=e+n,c=t+r;switch(i){case el.TOP_LEFT:return new Tl(new Ml(e,c),new Ml(e,c-s),new Ml(l-a,t),new Ml(l,t));case el.TOP_RIGHT:return new Tl(new Ml(e,t),new Ml(e+a,t),new Ml(l,c-s),new Ml(l,c));case el.BOTTOM_RIGHT:return new Tl(new Ml(l,t),new Ml(l,t+s),new Ml(e+a,c),new Ml(e,c));case el.BOTTOM_LEFT:default:return new Tl(new Ml(l,c),new Ml(l-a,c),new Ml(e,t+s),new Ml(e,t))}},kl=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Ol=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Ll=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Rl=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Ul=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),zl=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Nl=function(e){return 0===e.type},jl=function(e){return 1===e.type},Hl=function(e){return 2===e.type},Ql=function(e,t){return e.length===t.length&&e.some((function(e,n){return e===t[n]}))},Vl=function(e,t,n,r,i){return e.map((function(e,o){switch(o){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+i);case 3:return e.add(t,n+i)}return e}))},Wl=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Gl=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Fl(this.container),this.container.styles.opacity<1&&this.effects.push(new zl(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Rl(n,r,i))}if(0!==this.container.styles.overflowX){var o=kl(this.curves),a=Ll(this.curves);Ql(o,a)?this.effects.push(new Ul(o,6)):(this.effects.push(new Ul(o,2)),this.effects.push(new Ul(a,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var i=n.effects.filter((function(e){return!jl(e)}));if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,i),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var o=kl(n.curves),a=Ll(n.curves);Ql(o,a)||r.unshift(new Ul(a,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter((function(t){return lo(t.target,e)}))},e}(),ql=function(e,t,n,r){e.container.elements.forEach((function(i){var o=lo(i.flags,4),a=lo(i.flags,2),s=new Gl(i,e);lo(i.styles.display,2048)&&r.push(s);var l=lo(i.flags,8)?[]:r;if(o||a){var c=o||i.styles.isPositioned()?n:t,u=new Wl(s);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var d=i.styles.zIndex.order;if(d<0){var h=0;c.negativeZIndex.some((function(e,t){return d>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),c.negativeZIndex.splice(h,0,u)}else if(d>0){var p=0;c.positiveZIndex.some((function(e,t){return d>=e.element.container.styles.zIndex.order?(p=t+1,!1):p>0})),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else i.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);ql(s,u,o?u:n,l)}else i.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),ql(s,t,n,l);lo(i.flags,8)&&Kl(i,l)}))},Kl=function(e,t){for(var n=e instanceof Ka?e.start:1,r=e instanceof Ka&&e.reversed,i=0;i<t.length;i++){var o=t[i];o.container instanceof qa&&"number"==typeof o.container.value&&0!==o.container.value&&(n=o.container.value),o.listValue=$s(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},Yl=function(e){var t=new Gl(e,null),n=new Wl(t),r=[];return ql(t,n,n,r),Kl(t.container,r),n},Xl=function(e,t){switch(t){case 0:return tc(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return tc(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return tc(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return tc(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},$l=function(e,t){switch(t){case 0:return tc(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return tc(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return tc(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return tc(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Jl=function(e,t){switch(t){case 0:return tc(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return tc(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return tc(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return tc(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Zl=function(e,t){switch(t){case 0:return ec(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return ec(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return ec(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return ec(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},ec=function(e,t){var n=[];return Dl(e)?n.push(e.subdivide(.5,!1)):n.push(e),Dl(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},tc=function(e,t,n,r){var i=[];return Dl(e)?i.push(e.subdivide(.5,!1)):i.push(e),Dl(n)?i.push(n.subdivide(.5,!0)):i.push(n),Dl(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Dl(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},nc=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},rc=function(e){var t=e.styles,n=e.bounds,r=Gn(t.paddingLeft,n.width),i=Gn(t.paddingRight,n.width),o=Gn(t.paddingTop,n.width),a=Gn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,o+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+i),-(t.borderTopWidth+t.borderBottomWidth+o+a))},ic=function(e,t){return 0===e?t.bounds:2===e?rc(t):nc(t)},oc=function(e,t){return 0===e?t.bounds:2===e?rc(t):nc(t)},ac=function(e,t,n){var r=ic(uc(e.styles.backgroundOrigin,t),e),i=oc(uc(e.styles.backgroundClip,t),e),o=cc(uc(e.styles.backgroundSize,t),n,r),a=o[0],s=o[1],l=Wn(uc(e.styles.backgroundPosition,t),r.width-a,r.height-s);return[dc(uc(e.styles.backgroundRepeat,t),l,o,r,i),Math.round(r.left+l[0]),Math.round(r.top+l[1]),a,s]},sc=function(e){return Fn(e)&&e.value===Or.AUTO},lc=function(e){return"number"==typeof e},cc=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1];if(!a)return[0,0];if(Nn(a)&&s&&Nn(s))return[Gn(a,n.width),Gn(s,n.height)];var l=lc(o);if(Fn(a)&&(a.value===Or.CONTAIN||a.value===Or.COVER))return lc(o)?n.width/n.height<o!=(a.value===Or.COVER)?[n.width,n.width/o]:[n.height*o,n.height]:[n.width,n.height];var c=lc(r),u=lc(i),d=c||u;if(sc(a)&&(!s||sc(s)))return c&&u?[r,i]:l||d?d&&l?[c?r:i*o,u?i:r/o]:[c?r:n.width,u?i:n.height]:[n.width,n.height];if(l){var h=0,p=0;return Nn(a)?h=Gn(a,n.width):Nn(s)&&(p=Gn(s,n.height)),sc(a)?h=p*o:s&&!sc(s)||(p=h/o),[h,p]}var A=null,f=null;if(Nn(a)?A=Gn(a,n.width):s&&Nn(s)&&(f=Gn(s,n.height)),null===A||s&&!sc(s)||(f=c&&u?A/r*i:n.height),null!==f&&sc(a)&&(A=c&&u?f/i*r:n.width),null!==A&&null!==f)return[A,f];throw new Error("Unable to calculate background-size for element")},uc=function(e,t){var n=e[t];return void 0===n?e[0]:n},dc=function(e,t,n,r,i){var o=t[0],a=t[1],s=n[0],l=n[1];switch(e){case 2:return[new Ml(Math.round(r.left),Math.round(r.top+a)),new Ml(Math.round(r.left+r.width),Math.round(r.top+a)),new Ml(Math.round(r.left+r.width),Math.round(l+r.top+a)),new Ml(Math.round(r.left),Math.round(l+r.top+a))];case 3:return[new Ml(Math.round(r.left+o),Math.round(r.top)),new Ml(Math.round(r.left+o+s),Math.round(r.top)),new Ml(Math.round(r.left+o+s),Math.round(r.height+r.top)),new Ml(Math.round(r.left+o),Math.round(r.height+r.top))];case 1:return[new Ml(Math.round(r.left+o),Math.round(r.top+a)),new Ml(Math.round(r.left+o+s),Math.round(r.top+a)),new Ml(Math.round(r.left+o+s),Math.round(r.top+a+l)),new Ml(Math.round(r.left+o),Math.round(r.top+a+l))];default:return[new Ml(Math.round(i.left),Math.round(i.top)),new Ml(Math.round(i.left+i.width),Math.round(i.top)),new Ml(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Ml(Math.round(i.left),Math.round(i.height+i.top))]}},hc="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",pc="Hidden Text",Ac=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),r.src=hc,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(pc)),n.appendChild(i),n.appendChild(r);var a=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(pc)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:a,middle:s}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),fc=function(){function e(e,t){this.context=e,this.options=t}return e}(),mc=1e4,gc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new Ac(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},n.prototype.applyEffect=function(e){this.ctx.save(),Hl(e)&&(this.ctx.globalAlpha=e.opacity),Nl(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),jl(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},n.prototype.renderNode=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return lo(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Oa(e.text).reduce((function(t,i){return r.ctx.fillText(i,t,e.bounds.top+n),t+r.ctx.measureText(i).width}),e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),n=xc(e.fontFamily).join(", "),r=Tn(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,(function(){var n,r,o,a,s,l,c,u,d=this;return i(this,(function(i){return n=this.createFontStyle(t),r=n[0],o=n[1],a=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(o,a),l=s.baseline,c=s.middle,u=t.paintOrder,e.textBounds.forEach((function(e){u.forEach((function(n){switch(n){case 0:d.ctx.fillStyle=rr(t.color),d.renderTextWithLetterSpacing(e,t.letterSpacing,l);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach((function(n){d.ctx.shadowColor=rr(n.color),d.ctx.shadowOffsetX=n.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=n.offsetY.number*d.options.scale,d.ctx.shadowBlur=n.blur.number,d.renderTextWithLetterSpacing(e,t.letterSpacing,l)})),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),t.textDecorationLine.length&&(d.ctx.fillStyle=rr(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:d.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+l),e.bounds.width,1);break;case 2:d.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:d.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(d.ctx.strokeStyle=rr(t.webkitTextStrokeColor),d.ctx.lineWidth=t.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+l)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter"}}))})),[2]}))}))},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=rc(e),i=Ll(t);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,(function(){var t,r,a,s,l,c,u,d,h,p,A,f,m,g,v,y,b,w;return i(this,(function(i){switch(i.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,a=t.styles,s=0,l=t.textNodes,i.label=1;case 1:return s<l.length?(c=l[s],[4,this.renderTextNode(c,a)]):[3,4];case 2:i.sent(),i.label=3;case 3:return s++,[3,1];case 4:if(!(t instanceof Va))return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return v=i.sent(),this.renderReplacedElement(t,r,v),[3,8];case 7:return i.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Wa&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Ga))return[3,12];i.label=9;case 9:return i.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return v=i.sent(),this.renderReplacedElement(t,r,v),[3,12];case 11:return i.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof as&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:u=i.sent(),t.width&&t.height&&this.ctx.drawImage(u,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),i.label=14;case 14:if(t instanceof rs&&(d=Math.min(t.bounds.width,t.bounds.height),t.type===Za?t.checked&&(this.ctx.save(),this.path([new Ml(t.bounds.left+.39363*d,t.bounds.top+.79*d),new Ml(t.bounds.left+.16*d,t.bounds.top+.5549*d),new Ml(t.bounds.left+.27347*d,t.bounds.top+.44071*d),new Ml(t.bounds.left+.39694*d,t.bounds.top+.5649*d),new Ml(t.bounds.left+.72983*d,t.bounds.top+.23*d),new Ml(t.bounds.left+.84*d,t.bounds.top+.34085*d),new Ml(t.bounds.left+.39363*d,t.bounds.top+.79*d)]),this.ctx.fillStyle=rr(ns),this.ctx.fill(),this.ctx.restore()):t.type===es&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+d/2,t.bounds.top+d/2,d/4,0,2*Math.PI,!0),this.ctx.fillStyle=rr(ns),this.ctx.fill(),this.ctx.restore())),vc(t)&&t.value.length){switch(h=this.createFontStyle(a),b=h[0],p=h[1],A=this.fontMetrics.getMetrics(b,p).baseline,this.ctx.font=b,this.ctx.fillStyle=rr(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=bc(t.styles.textAlign),w=rc(t),f=0,t.styles.textAlign){case 1:f+=w.width/2;break;case 2:f+=w.width}m=w.add(f,0,0,-w.height/2+1),this.ctx.save(),this.path([new Ml(w.left,w.top),new Ml(w.left+w.width,w.top),new Ml(w.left+w.width,w.top+w.height),new Ml(w.left,w.top+w.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Da(t.value,m),a.letterSpacing,A),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!lo(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];v=void 0,y=g.url,i.label=15;case 15:return i.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return v=i.sent(),this.ctx.drawImage(v,t.bounds.left-(v.width+10),t.bounds.top),[3,18];case 17:return i.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(b=this.createFontStyle(a)[0],this.ctx.font=b,this.ctx.fillStyle=rr(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",w=new o(t.bounds.left,t.bounds.top+Gn(t.styles.paddingTop,t.bounds.width),t.bounds.width,Ci(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Da(e.listValue,w),a.letterSpacing,Ci(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),i.label=20;case 20:return[2]}}))}))},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,s,l,c,u,d,h,p,A,f,m;return i(this,(function(i){switch(i.label){case 0:return lo(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:i.sent(),t=0,n=e.negativeZIndex,i.label=2;case 2:return t<n.length?(m=n[t],[4,this.renderStack(m)]):[3,5];case 3:i.sent(),i.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:i.sent(),r=0,o=e.nonInlineLevel,i.label=7;case 7:return r<o.length?(m=o[r],[4,this.renderNode(m)]):[3,10];case 8:i.sent(),i.label=9;case 9:return r++,[3,7];case 10:a=0,s=e.nonPositionedFloats,i.label=11;case 11:return a<s.length?(m=s[a],[4,this.renderStack(m)]):[3,14];case 12:i.sent(),i.label=13;case 13:return a++,[3,11];case 14:l=0,c=e.nonPositionedInlineLevel,i.label=15;case 15:return l<c.length?(m=c[l],[4,this.renderStack(m)]):[3,18];case 16:i.sent(),i.label=17;case 17:return l++,[3,15];case 18:u=0,d=e.inlineLevel,i.label=19;case 19:return u<d.length?(m=d[u],[4,this.renderNode(m)]):[3,22];case 20:i.sent(),i.label=21;case 21:return u++,[3,19];case 22:h=0,p=e.zeroOrAutoZIndexOrTransformedOrOpacity,i.label=23;case 23:return h<p.length?(m=p[h],[4,this.renderStack(m)]):[3,26];case 24:i.sent(),i.label=25;case 25:return h++,[3,23];case 26:A=0,f=e.positiveZIndex,i.label=27;case 27:return A<f.length?(m=f[A],[4,this.renderStack(m)]):[3,30];case 28:i.sent(),i.label=29;case 29:return A++,[3,27];case 30:return[2]}}))}))},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach((function(e,n){var r=Dl(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Dl(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var i=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return i.width=Math.max(1,t),i.height=Math.max(1,n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),i},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,s;return i(this,(function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var o,a,s,l,c,u,d,h,p,A,f,m,g,v,y,b,w,x,C,S,B,_,E,M,P,T,D,F,I,k,O;return i(this,(function(i){switch(i.label){case 0:if(0!==n.type)return[3,5];o=void 0,a=n.url,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.context.cache.match(a)];case 2:return o=i.sent(),[3,4];case 3:return i.sent(),r.context.logger.error("Error loading background-image "+a),[3,4];case 4:return o&&(s=ac(e,t,[o.width,o.height,o.width/o.height]),b=s[0],_=s[1],E=s[2],C=s[3],S=s[4],v=r.ctx.createPattern(r.resizeImage(o,C,S),"repeat"),r.renderRepeat(b,v,_,E)),[3,6];case 5:Dr(n)?(l=ac(e,t,[null,null,null]),b=l[0],_=l[1],E=l[2],C=l[3],S=l[4],c=gr(n.angle,C,S),u=c[0],d=c[1],h=c[2],p=c[3],A=c[4],(f=document.createElement("canvas")).width=C,f.height=S,m=f.getContext("2d"),g=m.createLinearGradient(d,p,h,A),fr(n.stops,u).forEach((function(e){return g.addColorStop(e.stop,rr(e.color))})),m.fillStyle=g,m.fillRect(0,0,C,S),C>0&&S>0&&(v=r.ctx.createPattern(f,"repeat"),r.renderRepeat(b,v,_,E))):Fr(n)&&(y=ac(e,t,[null,null,null]),b=y[0],w=y[1],x=y[2],C=y[3],S=y[4],B=0===n.position.length?[Qn]:n.position,_=Gn(B[0],C),E=Gn(B[B.length-1],S),M=br(n,_,E,C,S),P=M[0],T=M[1],P>0&&T>0&&(D=r.ctx.createRadialGradient(w+_,x+E,0,w+_,x+E,P),fr(n.stops,2*P).forEach((function(e){return D.addColorStop(e.stop,rr(e.color))})),r.path(b),r.ctx.fillStyle=D,P!==T?(F=e.bounds.left+.5*e.bounds.width,I=e.bounds.top+.5*e.bounds.height,O=1/(k=T/P),r.ctx.save(),r.ctx.translate(F,I),r.ctx.transform(1,0,0,k,0,0),r.ctx.translate(-F,-I),r.ctx.fillRect(w,O*(x-I)+I,C,S*O),r.ctx.restore()):r.ctx.fill())),i.label=6;case 6:return t--,[2]}}))},r=this,o=0,a=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return o<a.length?(s=a[o],[5,n(s)]):[3,4];case 2:l.sent(),l.label=3;case 3:return o++,[3,1];case 4:return[2]}}))}))},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){return this.path(Xl(n,t)),this.ctx.fillStyle=rr(e),this.ctx.fill(),[2]}))}))},n.prototype.renderDoubleBorder=function(e,t,n,o){return r(this,void 0,void 0,(function(){var r,a;return i(this,(function(i){switch(i.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,o)]:[3,2];case 1:return i.sent(),[2];case 2:return r=$l(o,n),this.path(r),this.ctx.fillStyle=rr(e),this.ctx.fill(),a=Jl(o,n),this.path(a),this.ctx.fill(),[2]}}))}))},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,s,l,c,u=this;return i(this,(function(i){switch(i.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!nr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],o=yc(uc(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),nr(t.backgroundColor)||(this.ctx.fillStyle=rr(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:i.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){u.ctx.save();var n=kl(e.curves),r=t.inset?0:mc,i=Vl(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(u.path(n),u.ctx.clip(),u.mask(i)):(u.mask(n),u.ctx.clip(),u.path(i)),u.ctx.shadowOffsetX=t.offsetX.number+r,u.ctx.shadowOffsetY=t.offsetY.number,u.ctx.shadowColor=rr(t.color),u.ctx.shadowBlur=t.blur.number,u.ctx.fillStyle=t.inset?rr(t.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()})),i.label=2;case 2:a=0,s=0,l=r,i.label=3;case 3:return s<l.length?0!==(c=l[s]).style&&!nr(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,e.curves,2)]:[3,11]:[3,13];case 4:return i.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,e.curves,3)];case 6:return i.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,e.curves)];case 8:return i.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,e.curves)];case 10:i.sent(),i.label=11;case 11:a++,i.label=12;case 12:return s++,[3,3];case 13:return[2]}}))}))},n.prototype.renderDashedDottedBorder=function(e,t,n,o,a){return r(this,void 0,void 0,(function(){var r,s,l,c,u,d,h,p,A,f,m,g,v,y,b,w;return i(this,(function(i){return this.ctx.save(),r=Zl(o,n),s=Xl(o,n),2===a&&(this.path(s),this.ctx.clip()),Dl(s[0])?(l=s[0].start.x,c=s[0].start.y):(l=s[0].x,c=s[0].y),Dl(s[1])?(u=s[1].end.x,d=s[1].end.y):(u=s[1].x,d=s[1].y),h=0===n||2===n?Math.abs(l-u):Math.abs(c-d),this.ctx.beginPath(),3===a?this.formatPath(r):this.formatPath(s.slice(0,2)),p=t<3?3*t:2*t,A=t<3?2*t:t,3===a&&(p=t,A=t),f=!0,h<=2*p?f=!1:h<=2*p+A?(p*=m=h/(2*p+A),A*=m):(g=Math.floor((h+A)/(p+A)),v=(h-g*p)/(g-1),A=(y=(h-(g+1)*p)/g)<=0||Math.abs(A-v)<Math.abs(A-y)?v:y),f&&(3===a?this.ctx.setLineDash([0,p+A]):this.ctx.setLineDash([p,A])),3===a?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=rr(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===a&&(Dl(s[0])&&(b=s[3],w=s[0],this.ctx.beginPath(),this.formatPath([new Ml(b.end.x,b.end.y),new Ml(w.start.x,w.start.y)]),this.ctx.stroke()),Dl(s[1])&&(b=s[1],w=s[2],this.ctx.beginPath(),this.formatPath([new Ml(b.end.x,b.end.y),new Ml(w.start.x,w.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=rr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=Yl(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},n}(fc),vc=function(e){return e instanceof os||e instanceof is||e instanceof rs&&e.type!==es&&e.type!==Za},yc=function(e,t){switch(e){case 0:return kl(t);case 2:return Ol(t);default:return Ll(t)}},bc=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},wc=["-apple-system","system-ui"],xc=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===wc.indexOf(e)})):e},Cc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=Ma(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Sc(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=rr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},n}(fc),Sc=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Bc=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug||this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&console.info},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn||this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error||this.info.apply(this,e))},e.instances={},e}(),_c=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new Bc({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new yl(this,t)}return e.instanceCount=1,e}(),Ec=function(e,t){return void 0===t&&(t={}),Mc(e,t)};"undefined"!=typeof window&&vl.setContext(window);var Mc=function(e,t){return r(void 0,void 0,void 0,(function(){var r,l,c,u,d,h,p,A,f,m,g,v,y,b,w,x,C,S,B,_,E,M,P,T,D,F,I,k,O,L,R,U,z,N,j,H,Q,V;return i(this,(function(i){switch(i.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(l=r.defaultView))throw new Error("Document is not attached to a Window");return c={allowTaint:null!==(M=t.allowTaint)&&void 0!==M&&M,imageTimeout:null!==(P=t.imageTimeout)&&void 0!==P?P:15e3,proxy:t.proxy,useCORS:null!==(T=t.useCORS)&&void 0!==T&&T},u=n({logging:null===(D=t.logging)||void 0===D||D,cache:t.cache},c),d={windowWidth:null!==(F=t.windowWidth)&&void 0!==F?F:l.innerWidth,windowHeight:null!==(I=t.windowHeight)&&void 0!==I?I:l.innerHeight,scrollX:null!==(k=t.scrollX)&&void 0!==k?k:l.pageXOffset,scrollY:null!==(O=t.scrollY)&&void 0!==O?O:l.pageYOffset},h=new o(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),p=new _c(u,h),A=null!==(L=t.foreignObjectRendering)&&void 0!==L&&L,f={allowTaint:null!==(R=t.allowTaint)&&void 0!==R&&R,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},p.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),m=new Zs(p,e,f),(g=m.clonedReferenceElement)?[4,m.toIFrame(r,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return v=i.sent(),y=xs(g)||bs(g)?s(g.ownerDocument):a(p,g),b=y.width,w=y.height,x=y.left,C=y.top,S=Pc(p,g,t.backgroundColor),B={canvas:t.canvas,backgroundColor:S,scale:null!==(z=null!==(U=t.scale)&&void 0!==U?U:l.devicePixelRatio)&&void 0!==z?z:1,x:(null!==(N=t.x)&&void 0!==N?N:0)+x,y:(null!==(j=t.y)&&void 0!==j?j:0)+C,width:null!==(H=t.width)&&void 0!==H?H:Math.ceil(b),height:null!==(Q=t.height)&&void 0!==Q?Q:Math.ceil(w)},A?(p.logger.debug("Document cloned, using foreign object rendering"),[4,new Cc(p,B).render(g)]):[3,3];case 2:return _=i.sent(),[3,5];case 3:return p.logger.debug("Document cloned, element located at "+x+","+C+" with size "+b+"x"+w+" using computed rendering"),p.logger.debug("Starting DOM parsing"),E=us(p,g),S===E.styles.backgroundColor&&(E.styles.backgroundColor=dr.TRANSPARENT),p.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),[4,new gc(p,B).render(E)];case 4:_=i.sent(),i.label=5;case 5:return(null===(V=t.removeContainer)||void 0===V||V)&&(Zs.destroy(v)||p.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),p.logger.debug("Finished rendering"),[2,_]}}))}))},Pc=function(e,t,n){var r=t.ownerDocument,i=r.documentElement?ur(e,getComputedStyle(r.documentElement).backgroundColor):dr.TRANSPARENT,o=r.body?ur(e,getComputedStyle(r.body).backgroundColor):dr.TRANSPARENT,a="string"==typeof n?ur(e,n):null===n?dr.TRANSPARENT:4294967295;return t===r.documentElement?nr(i)?nr(o)?a:o:i:a};return Ec}()),NEe.exports}
/*!
 * html2pdf.js v0.10.2
 * Copyright (c) 2024 Erik Koopmans
 * Released under the MIT License.
 */self,zEe=function(e,t){return function(){var n={"./src/plugin/hyperlinks.js":
/*!**********************************!*\
              !*** ./src/plugin/hyperlinks.js ***!
              \**********************************/function(e,t,n){n.r(t),n(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js"),n(
/*! core-js/modules/es.string.link.js */
"./node_modules/core-js/modules/es.string.link.js");var r=n(
/*! ../worker.js */
"./src/worker.js"),i=n(
/*! ../utils.js */
"./src/utils.js"),o=[],a={toContainer:r.default.prototype.toContainer,toPdf:r.default.prototype.toPdf};r.default.prototype.toContainer=function(){return a.toContainer.call(this).then((function(){if(this.opt.enableLinks){var e=this.prop.container,t=e.querySelectorAll("a"),n=(0,i.unitConvert)(e.getBoundingClientRect(),this.prop.pageSize.k);o=[],Array.prototype.forEach.call(t,(function(e){for(var t=e.getClientRects(),r=0;r<t.length;r++){var a=(0,i.unitConvert)(t[r],this.prop.pageSize.k);a.left-=n.left,a.top-=n.top;var s=Math.floor(a.top/this.prop.pageSize.inner.height)+1,l=this.opt.margin[0]+a.top%this.prop.pageSize.inner.height,c=this.opt.margin[1]+a.left;o.push({page:s,top:l,left:c,clientRect:a,link:e})}}),this)}}))},r.default.prototype.toPdf=function(){return a.toPdf.call(this).then((function(){if(this.opt.enableLinks){o.forEach((function(e){this.prop.pdf.setPage(e.page),this.prop.pdf.link(e.left,e.top,e.clientRect.width,e.clientRect.height,{url:e.link.href})}),this);var e=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(e)}}))}},"./src/plugin/jspdf-plugin.js":
/*!************************************!*\
              !*** ./src/plugin/jspdf-plugin.js ***!
              \************************************/function(e,t,n){n.r(t),n(
/*! core-js/modules/es.symbol.js */
"./node_modules/core-js/modules/es.symbol.js"),n(
/*! core-js/modules/es.symbol.description.js */
"./node_modules/core-js/modules/es.symbol.description.js"),n(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),n(
/*! core-js/modules/es.symbol.iterator.js */
"./node_modules/core-js/modules/es.symbol.iterator.js"),n(
/*! core-js/modules/es.array.iterator.js */
"./node_modules/core-js/modules/es.array.iterator.js"),n(
/*! core-js/modules/es.string.iterator.js */
"./node_modules/core-js/modules/es.string.iterator.js"),n(
/*! core-js/modules/web.dom-collections.iterator.js */
"./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n(
/*! jspdf */
"jspdf");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.jsPDF.getPageSize=function(e,t,n){if("object"===i(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":var s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":s=6;break;default:throw"Invalid unit: "+t}if(a.hasOwnProperty(o))var l=a[o][1]/s,c=a[o][0]/s;else try{l=n[1],c=n[0]}catch(d){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e){if(e="p",c>l){var u=c;c=l,l=u}}else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(u=c,c=l,l=u)}return{width:c,height:l,unit:t,k:s}},t.default=r.jsPDF},"./src/plugin/pagebreaks.js":
/*!**********************************!*\
              !*** ./src/plugin/pagebreaks.js ***!
              \**********************************/function(e,t,n){n.r(t),n(
/*! core-js/modules/es.array.concat.js */
"./node_modules/core-js/modules/es.array.concat.js"),n(
/*! core-js/modules/es.array.slice.js */
"./node_modules/core-js/modules/es.array.slice.js"),n(
/*! core-js/modules/es.array.join.js */
"./node_modules/core-js/modules/es.array.join.js"),n(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js"),n(
/*! core-js/modules/es.object.keys.js */
"./node_modules/core-js/modules/es.object.keys.js");var r=n(
/*! ../worker.js */
"./src/worker.js"),i=n(
/*! ../utils.js */
"./src/utils.js"),o={toContainer:r.default.prototype.toContainer};r.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},r.default.prototype.toContainer=function(){return o.toContainer.call(this).then((function(){var e=this.prop.container,t=this.prop.pageSize.inner.px.height,n=[].concat(this.opt.pagebreak.mode),r={avoidAll:-1!==n.indexOf("avoid-all"),css:-1!==n.indexOf("css"),legacy:-1!==n.indexOf("legacy")},o={},a=this;["before","after","avoid"].forEach((function(t){var n=r.avoidAll&&"avoid"===t;o[t]=n?[]:[].concat(a.opt.pagebreak[t]||[]),o[t].length>0&&(o[t]=Array.prototype.slice.call(e.querySelectorAll(o[t].join(", "))))}));var s=e.querySelectorAll(".html2pdf__page-break");s=Array.prototype.slice.call(s);var l=e.querySelectorAll("*");Array.prototype.forEach.call(l,(function(e){var n={before:!1,after:r.legacy&&-1!==s.indexOf(e),avoid:r.avoidAll};if(r.css){var a=window.getComputedStyle(e),l=["always","page","left","right"];n={before:n.before||-1!==l.indexOf(a.breakBefore||a.pageBreakBefore),after:n.after||-1!==l.indexOf(a.breakAfter||a.pageBreakAfter),avoid:n.avoid||-1!==["avoid","avoid-page"].indexOf(a.breakInside||a.pageBreakInside)}}Object.keys(n).forEach((function(t){n[t]=n[t]||-1!==o[t].indexOf(e)}));var c=e.getBoundingClientRect();if(n.avoid&&!n.before){var u=Math.floor(c.top/t),d=Math.floor(c.bottom/t),h=Math.abs(c.bottom-c.top)/t;d!==u&&h<=1&&(n.before=!0)}if(n.before){var p=(0,i.createElement)("div",{style:{display:"block",height:t-c.top%t+"px"}});e.parentNode.insertBefore(p,e)}n.after&&(p=(0,i.createElement)("div",{style:{display:"block",height:t-c.bottom%t+"px"}}),e.parentNode.insertBefore(p,e.nextSibling))}))}))}},"./src/utils.js":
/*!**********************!*\
              !*** ./src/utils.js ***!
              \**********************/function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,{objType:function(){return i},createElement:function(){return o},cloneNode:function(){return a},unitConvert:function(){return s},toPx:function(){return l}}),n(
/*! core-js/modules/es.number.constructor.js */
"./node_modules/core-js/modules/es.number.constructor.js"),n(
/*! core-js/modules/es.symbol.js */
"./node_modules/core-js/modules/es.symbol.js"),n(
/*! core-js/modules/es.symbol.description.js */
"./node_modules/core-js/modules/es.symbol.description.js"),n(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),n(
/*! core-js/modules/es.symbol.iterator.js */
"./node_modules/core-js/modules/es.symbol.iterator.js"),n(
/*! core-js/modules/es.array.iterator.js */
"./node_modules/core-js/modules/es.array.iterator.js"),n(
/*! core-js/modules/es.string.iterator.js */
"./node_modules/core-js/modules/es.string.iterator.js"),n(
/*! core-js/modules/web.dom-collections.iterator.js */
"./node_modules/core-js/modules/web.dom-collections.iterator.js");var i=function(e){var t=r(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},o=function(e,t){var n=document.createElement(e);if(t.className&&(n.className=t.className),t.innerHTML){n.innerHTML=t.innerHTML;for(var r=n.getElementsByTagName("script"),i=r.length;i-- >0;null)r[i].parentNode.removeChild(r[i])}for(var o in t.style)n.style[o]=t.style[o];return n},a=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r},s=function(e,t){if("number"===i(e))return 72*e/96/t;var n={};for(var r in e)n[r]=72*e[r]/96/t;return n},l=function(e,t){return Math.floor(e*t/72*96)}},"./src/worker.js":
/*!***********************!*\
              !*** ./src/worker.js ***!
              \***********************/function(e,t,n){n.r(t),n(
/*! core-js/modules/es.object.assign.js */
"./node_modules/core-js/modules/es.object.assign.js"),n(
/*! core-js/modules/es.array.map.js */
"./node_modules/core-js/modules/es.array.map.js"),n(
/*! core-js/modules/es.object.keys.js */
"./node_modules/core-js/modules/es.object.keys.js"),n(
/*! core-js/modules/es.array.concat.js */
"./node_modules/core-js/modules/es.array.concat.js"),n(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),n(
/*! core-js/modules/es.regexp.to-string.js */
"./node_modules/core-js/modules/es.regexp.to-string.js"),n(
/*! core-js/modules/es.function.name.js */
"./node_modules/core-js/modules/es.function.name.js"),n(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js");var r=n(
/*! jspdf */
"jspdf"),i=n(
/*! html2canvas */
"html2canvas"),o=n(
/*! ./utils.js */
"./src/utils.js"),a=n(
/*! es6-promise */
"./node_modules/es6-promise/dist/es6-promise.js"),s=n.n(a)().Promise,l=function e(t){var n=Object.assign(e.convert(s.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(s.resolve(),n);return r=(r=r.setProgress(1,e,1,[e])).set(t)};(l.prototype=Object.create(s.prototype)).constructor=l,l.convert=function(e,t){return e.__proto__=t||l.prototype,e},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},l.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch((0,o.objType)(e)){case"string":return"string";case"element":return e.nodeName.toLowerCase&&"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.set({src:(0,o.createElement)("div",{innerHTML:e})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},l.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},t={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};e.opacity=0;var n=(0,o.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,o.createElement)("div",{className:"html2pdf__overlay",style:e}),this.prop.container=(0,o.createElement)("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(n),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)}))},l.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then((function(){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,i(this.prop.container,e)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},l.prototype.toPdf=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e=this.prop.canvas,t=this.opt,n=e.height,i=Math.floor(e.width*this.prop.pageSize.inner.ratio),o=Math.ceil(n/i),a=this.prop.pageSize.inner.height,s=document.createElement("canvas"),l=s.getContext("2d");s.width=e.width,s.height=i,this.prop.pdf=this.prop.pdf||new r.jsPDF(t.jsPDF);for(var c=0;c<o;c++){c===o-1&&n%i!=0&&(s.height=n%i,a=s.height*this.prop.pageSize.inner.width/s.width);var u=s.width,d=s.height;l.fillStyle="white",l.fillRect(0,0,u,d),l.drawImage(e,0,c*i,u,d,0,0,u,d),c&&this.prop.pdf.addPage();var h=s.toDataURL("image/"+t.image.type,t.image.quality);this.prop.pdf.addImage(h,t.image.type,t.margin[1],t.margin[0],this.prop.pageSize.inner.width,a)}}))},l.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},l.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},l.prototype.outputImg=function(e,t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},l.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},l.prototype.set=function(e){if("object"!==(0,o.objType)(e))return this;var t=Object.keys(e||{}).map((function(t){switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return t in l.template.prop?function(){this.prop[t]=e[t]}:function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},l.prototype.get=function(e,t){return this.then((function(){var n=e in l.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},l.prototype.setMargin=function(e){return this.then((function(){switch((0,o.objType)(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},l.prototype.setPageSize=function(e){return this.then((function(){(e=e||r.jsPDF.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:(0,o.toPx)(e.inner.width,e.k),height:(0,o.toPx)(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},l.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},l.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),s.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},l.prototype.thenCore=function(e,t,n){n=n||s.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var i=-1!==s.toString().indexOf("[native code]")&&"Promise"===s.name?r:l.convert(Object.assign({},r),s.prototype),o=n.call(i,e,t);return l.convert(o,r.__proto__)},l.prototype.thenExternal=function(e,t){return s.prototype.then.call(this,e,t)},l.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},l.prototype.catch=function(e){e&&(e=e.bind(this));var t=s.prototype.catch.call(this,e);return l.convert(t,this)},l.prototype.catchExternal=function(e){return s.prototype.catch.call(this,e)},l.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,t.default=l},"./node_modules/core-js/internals/a-function.js":
/*!******************************************************!*\
              !*** ./node_modules/core-js/internals/a-function.js ***!
              \******************************************************/function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"./node_modules/core-js/internals/a-possible-prototype.js":
/*!****************************************************************!*\
              !*** ./node_modules/core-js/internals/a-possible-prototype.js ***!
              \****************************************************************/function(e,t,n){var r=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"./node_modules/core-js/internals/add-to-unscopables.js":
/*!**************************************************************!*\
              !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
              \**************************************************************/function(e,t,n){var r=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),i=n(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),o=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},"./node_modules/core-js/internals/an-object.js":
/*!*****************************************************!*\
              !*** ./node_modules/core-js/internals/an-object.js ***!
              \*****************************************************/function(e,t,n){var r=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"./node_modules/core-js/internals/array-for-each.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/internals/array-for-each.js ***!
              \**********************************************************/function(e,t,n){var r=n(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").forEach,i=n(
/*! ../internals/array-method-is-strict */
"./node_modules/core-js/internals/array-method-is-strict.js")("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/internals/array-includes.js ***!
              \**********************************************************/function(e,t,n){var r=n(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),i=n(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),o=n(
/*! ../internals/to-absolute-index */
"./node_modules/core-js/internals/to-absolute-index.js"),a=function(e){return function(t,n,a){var s,l=r(t),c=i(l.length),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"./node_modules/core-js/internals/array-iteration.js":
/*!***********************************************************!*\
              !*** ./node_modules/core-js/internals/array-iteration.js ***!
              \***********************************************************/function(e,t,n){var r=n(
/*! ../internals/function-bind-context */
"./node_modules/core-js/internals/function-bind-context.js"),i=n(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),o=n(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),a=n(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),s=n(
/*! ../internals/array-species-create */
"./node_modules/core-js/internals/array-species-create.js"),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(A,f,m,g){for(var v,y,b=o(A),w=i(b),x=r(f,m,3),C=a(w.length),S=0,B=g||s,_=t?B(A,C):n||h?B(A,0):void 0;C>S;S++)if((p||S in w)&&(y=x(v=w[S],S,b),e))if(t)_[S]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:l.call(_,v)}else switch(e){case 4:return!1;case 7:l.call(_,v)}return d?-1:c||u?u:_}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":
/*!****************************************************************************!*\
              !*** ./node_modules/core-js/internals/array-method-has-species-support.js ***!
              \****************************************************************************/function(e,t,n){var r=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),i=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),o=n(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"./node_modules/core-js/internals/array-method-is-strict.js":
/*!******************************************************************!*\
              !*** ./node_modules/core-js/internals/array-method-is-strict.js ***!
              \******************************************************************/function(e,t,n){var r=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},"./node_modules/core-js/internals/array-species-constructor.js":
/*!*********************************************************************!*\
              !*** ./node_modules/core-js/internals/array-species-constructor.js ***!
              \*********************************************************************/function(e,t,n){var r=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),i=n(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),o=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)?r(t)&&null===(t=t[o])&&(t=void 0):t=void 0),void 0===t?Array:t}},"./node_modules/core-js/internals/array-species-create.js":
/*!****************************************************************!*\
              !*** ./node_modules/core-js/internals/array-species-create.js ***!
              \****************************************************************/function(e,t,n){var r=n(
/*! ../internals/array-species-constructor */
"./node_modules/core-js/internals/array-species-constructor.js");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"./node_modules/core-js/internals/classof-raw.js":
/*!*******************************************************!*\
              !*** ./node_modules/core-js/internals/classof-raw.js ***!
              \*******************************************************/function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":
/*!***************************************************!*\
              !*** ./node_modules/core-js/internals/classof.js ***!
              \***************************************************/function(e,t,n){var r=n(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),i=n(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),o=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},"./node_modules/core-js/internals/copy-constructor-properties.js":
/*!***********************************************************************!*\
              !*** ./node_modules/core-js/internals/copy-constructor-properties.js ***!
              \***********************************************************************/function(e,t,n){var r=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),i=n(
/*! ../internals/own-keys */
"./node_modules/core-js/internals/own-keys.js"),o=n(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js"),a=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var n=i(t),s=a.f,l=o.f,c=0;c<n.length;c++){var u=n[c];r(e,u)||s(e,u,l(t,u))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":
/*!********************************************************************!*\
              !*** ./node_modules/core-js/internals/correct-prototype-getter.js ***!
              \********************************************************************/function(e,t,n){var r=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},"./node_modules/core-js/internals/create-html.js":
/*!*******************************************************!*\
              !*** ./node_modules/core-js/internals/create-html.js ***!
              \*******************************************************/function(e,t,n){var r=n(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),i=n(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),o=/"/g;e.exports=function(e,t,n,a){var s=i(r(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+i(a).replace(o,"&quot;")+'"'),l+">"+s+"</"+t+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":
/*!***********************************************************************!*\
              !*** ./node_modules/core-js/internals/create-iterator-constructor.js ***!
              \***********************************************************************/function(e,t,n){var r=n(
/*! ../internals/iterators-core */
"./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,i=n(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),o=n(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),a=n(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),s=n(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,c,!1,!0),s[c]=l,e}},"./node_modules/core-js/internals/create-non-enumerable-property.js":
/*!**************************************************************************!*\
              !*** ./node_modules/core-js/internals/create-non-enumerable-property.js ***!
              \**************************************************************************/function(e,t,n){var r=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),i=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),o=n(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js");e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},"./node_modules/core-js/internals/create-property-descriptor.js":
/*!**********************************************************************!*\
              !*** ./node_modules/core-js/internals/create-property-descriptor.js ***!
              \**********************************************************************/function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/internals/create-property.js":
/*!***********************************************************!*\
              !*** ./node_modules/core-js/internals/create-property.js ***!
              \***********************************************************/function(e,t,n){var r=n(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),i=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),o=n(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},"./node_modules/core-js/internals/define-iterator.js":
/*!***********************************************************!*\
              !*** ./node_modules/core-js/internals/define-iterator.js ***!
              \***********************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/create-iterator-constructor */
"./node_modules/core-js/internals/create-iterator-constructor.js"),o=n(
/*! ../internals/object-get-prototype-of */
"./node_modules/core-js/internals/object-get-prototype-of.js"),a=n(
/*! ../internals/object-set-prototype-of */
"./node_modules/core-js/internals/object-set-prototype-of.js"),s=n(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),l=n(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),c=n(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),u=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),d=n(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),h=n(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),p=n(
/*! ../internals/iterators-core */
"./node_modules/core-js/internals/iterators-core.js"),A=p.IteratorPrototype,f=p.BUGGY_SAFARI_ITERATORS,m=u("iterator"),g="keys",v="values",y="entries",b=function(){return this};e.exports=function(e,t,n,u,p,w,x){i(n,t,u);var C,S,B,_=function(e){if(e===p&&D)return D;if(!f&&e in P)return P[e];switch(e){case g:case v:case y:return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",M=!1,P=e.prototype,T=P[m]||P["@@iterator"]||p&&P[p],D=!f&&T||_(p),F="Array"==t&&P.entries||T;if(F&&(C=o(F.call(new e)),A!==Object.prototype&&C.next&&(d||o(C)===A||(a?a(C,A):"function"!=typeof C[m]&&l(C,m,b)),s(C,E,!0,!0),d&&(h[E]=b))),p==v&&T&&T.name!==v&&(M=!0,D=function(){return T.call(this)}),d&&!x||P[m]===D||l(P,m,D),h[t]=D,p)if(S={values:_(v),keys:w?D:_(g),entries:_(y)},x)for(B in S)(f||M||!(B in P))&&c(P,B,S[B]);else r({target:t,proto:!0,forced:f||M},S);return S}},"./node_modules/core-js/internals/define-well-known-symbol.js":
/*!********************************************************************!*\
              !*** ./node_modules/core-js/internals/define-well-known-symbol.js ***!
              \********************************************************************/function(e,t,n){var r=n(
/*! ../internals/path */
"./node_modules/core-js/internals/path.js"),i=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),o=n(
/*! ../internals/well-known-symbol-wrapped */
"./node_modules/core-js/internals/well-known-symbol-wrapped.js"),a=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},"./node_modules/core-js/internals/descriptors.js":
/*!*******************************************************!*\
              !*** ./node_modules/core-js/internals/descriptors.js ***!
              \*******************************************************/function(e,t,n){var r=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"./node_modules/core-js/internals/document-create-element.js":
/*!*******************************************************************!*\
              !*** ./node_modules/core-js/internals/document-create-element.js ***!
              \*******************************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),i=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},"./node_modules/core-js/internals/dom-iterables.js":
/*!*********************************************************!*\
              !*** ./node_modules/core-js/internals/dom-iterables.js ***!
              \*********************************************************/function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/internals/engine-user-agent.js ***!
              \*************************************************************/function(e,t,n){var r=n(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js");e.exports=r("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/internals/engine-v8-version.js ***!
              \*************************************************************/function(e,t,n){var r,i,o=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),a=n(
/*! ../internals/engine-user-agent */
"./node_modules/core-js/internals/engine-user-agent.js"),s=o.process,l=o.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u?i=(r=u.split("."))[0]<4?1:r[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},"./node_modules/core-js/internals/enum-bug-keys.js":
/*!*********************************************************!*\
              !*** ./node_modules/core-js/internals/enum-bug-keys.js ***!
              \*********************************************************/function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":
/*!**************************************************!*\
              !*** ./node_modules/core-js/internals/export.js ***!
              \**************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),i=n(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,o=n(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),a=n(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),s=n(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),l=n(
/*! ../internals/copy-constructor-properties */
"./node_modules/core-js/internals/copy-constructor-properties.js"),c=n(
/*! ../internals/is-forced */
"./node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var n,u,d,h,p,A=e.target,f=e.global,m=e.stat;if(n=f?r:m?r[A]||s(A,{}):(r[A]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=i(n,u))&&p.value:n[u],!c(f?u:A+(m?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),a(n,u,h,e)}}},"./node_modules/core-js/internals/fails.js":
/*!*************************************************!*\
              !*** ./node_modules/core-js/internals/fails.js ***!
              \*************************************************/function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"./node_modules/core-js/internals/function-bind-context.js":
/*!*****************************************************************!*\
              !*** ./node_modules/core-js/internals/function-bind-context.js ***!
              \*****************************************************************/function(e,t,n){var r=n(
/*! ../internals/a-function */
"./node_modules/core-js/internals/a-function.js");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":
/*!********************************************************!*\
              !*** ./node_modules/core-js/internals/get-built-in.js ***!
              \********************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");e.exports=function(e,t){return arguments.length<2?"function"==typeof(n=r[e])?n:void 0:r[e]&&r[e][t];var n}},"./node_modules/core-js/internals/global.js":
/*!**************************************************!*\
              !*** ./node_modules/core-js/internals/global.js ***!
              \**************************************************/function(e){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof fB&&fB)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":
/*!***********************************************!*\
              !*** ./node_modules/core-js/internals/has.js ***!
              \***********************************************/function(e,t,n){var r=n(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(r(e),t)}},"./node_modules/core-js/internals/hidden-keys.js":
/*!*******************************************************!*\
              !*** ./node_modules/core-js/internals/hidden-keys.js ***!
              \*******************************************************/function(e){e.exports={}},"./node_modules/core-js/internals/html.js":
/*!************************************************!*\
              !*** ./node_modules/core-js/internals/html.js ***!
              \************************************************/function(e,t,n){var r=n(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js");e.exports=r("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/internals/ie8-dom-define.js ***!
              \**********************************************************/function(e,t,n){var r=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),i=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),o=n(
/*! ../internals/document-create-element */
"./node_modules/core-js/internals/document-create-element.js");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/internals/indexed-object.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/internals/indexed-object.js ***!
              \**********************************************************/function(e,t,n){var r=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),i=n(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":
/*!***************************************************************!*\
              !*** ./node_modules/core-js/internals/inherit-if-required.js ***!
              \***************************************************************/function(e,t,n){var r=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),i=n(
/*! ../internals/object-set-prototype-of */
"./node_modules/core-js/internals/object-set-prototype-of.js");e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},"./node_modules/core-js/internals/inspect-source.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/internals/inspect-source.js ***!
              \**********************************************************/function(e,t,n){var r=n(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},"./node_modules/core-js/internals/internal-state.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/internals/internal-state.js ***!
              \**********************************************************/function(e,t,n){var r,i,o,a=n(
/*! ../internals/native-weak-map */
"./node_modules/core-js/internals/native-weak-map.js"),s=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),l=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),c=n(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),u=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),d=n(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js"),h=n(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),p=n(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),A="Object already initialized",f=s.WeakMap;if(a||d.state){var m=d.state||(d.state=new f),g=m.get,v=m.has,y=m.set;r=function(e,t){if(v.call(m,e))throw new TypeError(A);return t.facade=e,y.call(m,e,t),t},i=function(e){return g.call(m,e)||{}},o=function(e){return v.call(m,e)}}else{var b=h("state");p[b]=!0,r=function(e,t){if(u(e,b))throw new TypeError(A);return t.facade=e,c(e,b,t),t},i=function(e){return u(e,b)?e[b]:{}},o=function(e){return u(e,b)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},"./node_modules/core-js/internals/is-array.js":
/*!****************************************************!*\
              !*** ./node_modules/core-js/internals/is-array.js ***!
              \****************************************************/function(e,t,n){var r=n(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"./node_modules/core-js/internals/is-forced.js":
/*!*****************************************************!*\
              !*** ./node_modules/core-js/internals/is-forced.js ***!
              \*****************************************************/function(e,t,n){var r=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==c||n!=l&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},"./node_modules/core-js/internals/is-object.js":
/*!*****************************************************!*\
              !*** ./node_modules/core-js/internals/is-object.js ***!
              \*****************************************************/function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"./node_modules/core-js/internals/is-pure.js":
/*!***************************************************!*\
              !*** ./node_modules/core-js/internals/is-pure.js ***!
              \***************************************************/function(e){e.exports=!1},"./node_modules/core-js/internals/is-symbol.js":
/*!*****************************************************!*\
              !*** ./node_modules/core-js/internals/is-symbol.js ***!
              \*****************************************************/function(e,t,n){var r=n(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),i=n(
/*! ../internals/use-symbol-as-uid */
"./node_modules/core-js/internals/use-symbol-as-uid.js");e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return"function"==typeof t&&Object(e)instanceof t}},"./node_modules/core-js/internals/iterators-core.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/internals/iterators-core.js ***!
              \**********************************************************/function(e,t,n){var r,i,o,a=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),s=n(
/*! ../internals/object-get-prototype-of */
"./node_modules/core-js/internals/object-get-prototype-of.js"),l=n(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),c=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),u=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),d=n(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),h=u("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(r=i):p=!0);var A=null==r||a((function(){var e={};return r[h].call(e)!==e}));A&&(r={}),d&&!A||c(r,h)||l(r,h,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},"./node_modules/core-js/internals/iterators.js":
/*!*****************************************************!*\
              !*** ./node_modules/core-js/internals/iterators.js ***!
              \*****************************************************/function(e){e.exports={}},"./node_modules/core-js/internals/native-symbol.js":
/*!*********************************************************!*\
              !*** ./node_modules/core-js/internals/native-symbol.js ***!
              \*********************************************************/function(e,t,n){var r=n(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),i=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"./node_modules/core-js/internals/native-weak-map.js":
/*!***********************************************************!*\
              !*** ./node_modules/core-js/internals/native-weak-map.js ***!
              \***********************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),i=n(
/*! ../internals/inspect-source */
"./node_modules/core-js/internals/inspect-source.js"),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},"./node_modules/core-js/internals/object-assign.js":
/*!*********************************************************!*\
              !*** ./node_modules/core-js/internals/object-assign.js ***!
              \*********************************************************/function(e,t,n){var r=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),i=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),o=n(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js"),a=n(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),s=n(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),l=n(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),c=n(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),u=Object.assign,d=Object.defineProperty;e.exports=!u||i((function(){if(r&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||o(u({},t)).join("")!=i}))?function(e,t){for(var n=l(e),i=arguments.length,u=1,d=a.f,h=s.f;i>u;)for(var p,A=c(arguments[u++]),f=d?o(A).concat(d(A)):o(A),m=f.length,g=0;m>g;)p=f[g++],r&&!h.call(A,p)||(n[p]=A[p]);return n}:u},"./node_modules/core-js/internals/object-create.js":
/*!*********************************************************!*\
              !*** ./node_modules/core-js/internals/object-create.js ***!
              \*********************************************************/function(e,t,n){var r,i=n(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),o=n(
/*! ../internals/object-define-properties */
"./node_modules/core-js/internals/object-define-properties.js"),a=n(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js"),s=n(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),l=n(
/*! ../internals/html */
"./node_modules/core-js/internals/html.js"),c=n(
/*! ../internals/document-create-element */
"./node_modules/core-js/internals/document-create-element.js"),u=n(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),d="prototype",h="script",p=u("IE_PROTO"),A=function(){},f=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}g=document.domain&&r?m(r):function(){var e,t=c("iframe"),n="java"+h+":";if(t.style)return t.style.display="none",l.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F}()||m(r);for(var e=a.length;e--;)delete g[d][a[e]];return g()};s[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(A[d]=i(e),n=new A,A[d]=null,n[p]=e):n=g(),void 0===t?n:o(n,t)}},"./node_modules/core-js/internals/object-define-properties.js":
/*!********************************************************************!*\
              !*** ./node_modules/core-js/internals/object-define-properties.js ***!
              \********************************************************************/function(e,t,n){var r=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),i=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),o=n(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),a=n(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js");e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,l=0;s>l;)i.f(e,n=r[l++],t[n]);return e}},"./node_modules/core-js/internals/object-define-property.js":
/*!******************************************************************!*\
              !*** ./node_modules/core-js/internals/object-define-property.js ***!
              \******************************************************************/function(e,t,n){var r=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),i=n(
/*! ../internals/ie8-dom-define */
"./node_modules/core-js/internals/ie8-dom-define.js"),o=n(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),a=n(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t),o(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":
/*!******************************************************************************!*\
              !*** ./node_modules/core-js/internals/object-get-own-property-descriptor.js ***!
              \******************************************************************************/function(e,t,n){var r=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),i=n(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),o=n(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),a=n(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),s=n(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),l=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),c=n(
/*! ../internals/ie8-dom-define */
"./node_modules/core-js/internals/ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=s(t),c)try{return u(e,t)}catch(n){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":
/*!**********************************************************************************!*\
              !*** ./node_modules/core-js/internals/object-get-own-property-names-external.js ***!
              \**********************************************************************************/function(e,t,n){var r=n(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),i=n(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},"./node_modules/core-js/internals/object-get-own-property-names.js":
/*!*************************************************************************!*\
              !*** ./node_modules/core-js/internals/object-get-own-property-names.js ***!
              \*************************************************************************/function(e,t,n){var r=n(
/*! ../internals/object-keys-internal */
"./node_modules/core-js/internals/object-keys-internal.js"),i=n(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":
/*!***************************************************************************!*\
              !*** ./node_modules/core-js/internals/object-get-own-property-symbols.js ***!
              \***************************************************************************/function(e,t){t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":
/*!*******************************************************************!*\
              !*** ./node_modules/core-js/internals/object-get-prototype-of.js ***!
              \*******************************************************************/function(e,t,n){var r=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),i=n(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),o=n(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),a=n(
/*! ../internals/correct-prototype-getter */
"./node_modules/core-js/internals/correct-prototype-getter.js"),s=o("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},"./node_modules/core-js/internals/object-keys-internal.js":
/*!****************************************************************!*\
              !*** ./node_modules/core-js/internals/object-keys-internal.js ***!
              \****************************************************************/function(e,t,n){var r=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),i=n(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),o=n(
/*! ../internals/array-includes */
"./node_modules/core-js/internals/array-includes.js").indexOf,a=n(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},"./node_modules/core-js/internals/object-keys.js":
/*!*******************************************************!*\
              !*** ./node_modules/core-js/internals/object-keys.js ***!
              \*******************************************************/function(e,t,n){var r=n(
/*! ../internals/object-keys-internal */
"./node_modules/core-js/internals/object-keys-internal.js"),i=n(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return r(e,i)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":
/*!*************************************************************************!*\
              !*** ./node_modules/core-js/internals/object-property-is-enumerable.js ***!
              \*************************************************************************/function(e,t){var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},"./node_modules/core-js/internals/object-set-prototype-of.js":
/*!*******************************************************************!*\
              !*** ./node_modules/core-js/internals/object-set-prototype-of.js ***!
              \*******************************************************************/function(e,t,n){var r=n(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),i=n(
/*! ../internals/a-possible-prototype */
"./node_modules/core-js/internals/a-possible-prototype.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":
/*!************************************************************!*\
              !*** ./node_modules/core-js/internals/object-to-string.js ***!
              \************************************************************/function(e,t,n){var r=n(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),i=n(
/*! ../internals/classof */
"./node_modules/core-js/internals/classof.js");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":
/*!*****************************************************************!*\
              !*** ./node_modules/core-js/internals/ordinary-to-primitive.js ***!
              \*****************************************************************/function(e,t,n){var r=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");e.exports=function(e,t){var n,i;if("string"===t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if("string"!==t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":
/*!****************************************************!*\
              !*** ./node_modules/core-js/internals/own-keys.js ***!
              \****************************************************/function(e,t,n){var r=n(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),i=n(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js"),o=n(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),a=n(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js");e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},"./node_modules/core-js/internals/path.js":
/*!************************************************!*\
              !*** ./node_modules/core-js/internals/path.js ***!
              \************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");e.exports=r},"./node_modules/core-js/internals/redefine.js":
/*!****************************************************!*\
              !*** ./node_modules/core-js/internals/redefine.js ***!
              \****************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),i=n(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),o=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),a=n(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),s=n(
/*! ../internals/inspect-source */
"./node_modules/core-js/internals/inspect-source.js"),l=n(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var l,c=!!s&&!!s.unsafe,h=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),(l=u(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==r?(c?!p&&e[t]&&(h=!0):delete e[t],h?e[t]=n:i(e,t,n)):h?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},"./node_modules/core-js/internals/regexp-flags.js":
/*!********************************************************!*\
              !*** ./node_modules/core-js/internals/regexp-flags.js ***!
              \********************************************************/function(e,t,n){var r=n(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"./node_modules/core-js/internals/require-object-coercible.js":
/*!********************************************************************!*\
              !*** ./node_modules/core-js/internals/require-object-coercible.js ***!
              \********************************************************************/function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},"./node_modules/core-js/internals/set-global.js":
/*!******************************************************!*\
              !*** ./node_modules/core-js/internals/set-global.js ***!
              \******************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},"./node_modules/core-js/internals/set-to-string-tag.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/internals/set-to-string-tag.js ***!
              \*************************************************************/function(e,t,n){var r=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,i=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),o=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},"./node_modules/core-js/internals/shared-key.js":
/*!******************************************************!*\
              !*** ./node_modules/core-js/internals/shared-key.js ***!
              \******************************************************/function(e,t,n){var r=n(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),i=n(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},"./node_modules/core-js/internals/shared-store.js":
/*!********************************************************!*\
              !*** ./node_modules/core-js/internals/shared-store.js ***!
              \********************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),i=n(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},"./node_modules/core-js/internals/shared.js":
/*!**************************************************!*\
              !*** ./node_modules/core-js/internals/shared.js ***!
              \**************************************************/function(e,t,n){var r=n(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),i=n(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":
/*!**************************************************************!*\
              !*** ./node_modules/core-js/internals/string-html-forced.js ***!
              \**************************************************************/function(e,t,n){var r=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},"./node_modules/core-js/internals/string-multibyte.js":
/*!************************************************************!*\
              !*** ./node_modules/core-js/internals/string-multibyte.js ***!
              \************************************************************/function(e,t,n){var r=n(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),i=n(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),o=n(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),a=function(e){return function(t,n){var a,s,l=i(o(t)),c=r(n),u=l.length;return c<0||c>=u?e?"":void 0:(a=l.charCodeAt(c))<55296||a>56319||c+1===u||(s=l.charCodeAt(c+1))<56320||s>57343?e?l.charAt(c):a:e?l.slice(c,c+2):s-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},"./node_modules/core-js/internals/string-trim.js":
/*!*******************************************************!*\
              !*** ./node_modules/core-js/internals/string-trim.js ***!
              \*******************************************************/function(e,t,n){var r=n(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),i=n(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),o="["+n(
/*! ../internals/whitespaces */
"./node_modules/core-js/internals/whitespaces.js")+"]",a=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),l=function(e){return function(t){var n=i(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},"./node_modules/core-js/internals/to-absolute-index.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/internals/to-absolute-index.js ***!
              \*************************************************************/function(e,t,n){var r=n(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},"./node_modules/core-js/internals/to-indexed-object.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/internals/to-indexed-object.js ***!
              \*************************************************************/function(e,t,n){var r=n(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),i=n(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return r(i(e))}},"./node_modules/core-js/internals/to-integer.js":
/*!******************************************************!*\
              !*** ./node_modules/core-js/internals/to-integer.js ***!
              \******************************************************/function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},"./node_modules/core-js/internals/to-length.js":
/*!*****************************************************!*\
              !*** ./node_modules/core-js/internals/to-length.js ***!
              \*****************************************************/function(e,t,n){var r=n(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":
/*!*****************************************************!*\
              !*** ./node_modules/core-js/internals/to-object.js ***!
              \*****************************************************/function(e,t,n){var r=n(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(r(e))}},"./node_modules/core-js/internals/to-primitive.js":
/*!********************************************************!*\
              !*** ./node_modules/core-js/internals/to-primitive.js ***!
              \********************************************************/function(e,t,n){var r=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),i=n(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),o=n(
/*! ../internals/ordinary-to-primitive */
"./node_modules/core-js/internals/ordinary-to-primitive.js"),a=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toPrimitive");e.exports=function(e,t){if(!r(e)||i(e))return e;var n,s=e[a];if(void 0!==s){if(void 0===t&&(t="default"),n=s.call(e,t),!r(n)||i(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},"./node_modules/core-js/internals/to-property-key.js":
/*!***********************************************************!*\
              !*** ./node_modules/core-js/internals/to-property-key.js ***!
              \***********************************************************/function(e,t,n){var r=n(
/*! ../internals/to-primitive */
"./node_modules/core-js/internals/to-primitive.js"),i=n(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){var t=r(e,"string");return i(t)?t:String(t)}},"./node_modules/core-js/internals/to-string-tag-support.js":
/*!*****************************************************************!*\
              !*** ./node_modules/core-js/internals/to-string-tag-support.js ***!
              \*****************************************************************/function(e,t,n){var r={};r[n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",e.exports="[object z]"===String(r)},"./node_modules/core-js/internals/to-string.js":
/*!*****************************************************!*\
              !*** ./node_modules/core-js/internals/to-string.js ***!
              \*****************************************************/function(e,t,n){var r=n(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){if(r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},"./node_modules/core-js/internals/uid.js":
/*!***********************************************!*\
              !*** ./node_modules/core-js/internals/uid.js ***!
              \***********************************************/function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/internals/use-symbol-as-uid.js ***!
              \*************************************************************/function(e,t,n){var r=n(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":
/*!*********************************************************************!*\
              !*** ./node_modules/core-js/internals/well-known-symbol-wrapped.js ***!
              \*********************************************************************/function(e,t,n){var r=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js");t.f=r},"./node_modules/core-js/internals/well-known-symbol.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/internals/well-known-symbol.js ***!
              \*************************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),i=n(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),o=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),a=n(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),s=n(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js"),l=n(
/*! ../internals/use-symbol-as-uid */
"./node_modules/core-js/internals/use-symbol-as-uid.js"),c=i("wks"),u=r.Symbol,d=l?u:u&&u.withoutSetter||a;e.exports=function(e){return o(c,e)&&(s||"string"==typeof c[e])||(s&&o(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},"./node_modules/core-js/internals/whitespaces.js":
/*!*******************************************************!*\
              !*** ./node_modules/core-js/internals/whitespaces.js ***!
              \*******************************************************/function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"./node_modules/core-js/modules/es.array.concat.js":
/*!*********************************************************!*\
              !*** ./node_modules/core-js/modules/es.array.concat.js ***!
              \*********************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),o=n(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),a=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),s=n(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),l=n(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),c=n(
/*! ../internals/create-property */
"./node_modules/core-js/internals/create-property.js"),u=n(
/*! ../internals/array-species-create */
"./node_modules/core-js/internals/array-species-create.js"),d=n(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js"),h=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),p=n(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),A=h("isConcatSpreadable"),f=9007199254740991,m="Maximum allowed index exceeded",g=p>=51||!i((function(){var e=[];return e[A]=!1,e.concat()[0]!==e})),v=d("concat"),y=function(e){if(!a(e))return!1;var t=e[A];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!g||!v},{concat:function(e){var t,n,r,i,o,a=s(this),d=u(a,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(y(o=-1===t?a:arguments[t])){if(h+(i=l(o.length))>f)throw TypeError(m);for(n=0;n<i;n++,h++)n in o&&c(d,h,o[n])}else{if(h>=f)throw TypeError(m);c(d,h++,o)}return d.length=h,d}})},"./node_modules/core-js/modules/es.array.iterator.js":
/*!***********************************************************!*\
              !*** ./node_modules/core-js/modules/es.array.iterator.js ***!
              \***********************************************************/function(e,t,n){var r=n(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),i=n(
/*! ../internals/add-to-unscopables */
"./node_modules/core-js/internals/add-to-unscopables.js"),o=n(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),a=n(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),s=n(
/*! ../internals/define-iterator */
"./node_modules/core-js/internals/define-iterator.js"),l="Array Iterator",c=a.set,u=a.getterFor(l);e.exports=s(Array,"Array",(function(e,t){c(this,{type:l,target:r(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},"./node_modules/core-js/modules/es.array.join.js":
/*!*******************************************************!*\
              !*** ./node_modules/core-js/modules/es.array.join.js ***!
              \*******************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),o=n(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),a=n(
/*! ../internals/array-method-is-strict */
"./node_modules/core-js/internals/array-method-is-strict.js"),s=[].join,l=i!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},"./node_modules/core-js/modules/es.array.map.js":
/*!******************************************************!*\
              !*** ./node_modules/core-js/modules/es.array.map.js ***!
              \******************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").map;r({target:"Array",proto:!0,forced:!n(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js")("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":
/*!********************************************************!*\
              !*** ./node_modules/core-js/modules/es.array.slice.js ***!
              \********************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),o=n(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),a=n(
/*! ../internals/to-absolute-index */
"./node_modules/core-js/internals/to-absolute-index.js"),s=n(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),l=n(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),c=n(
/*! ../internals/create-property */
"./node_modules/core-js/internals/create-property.js"),u=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),d=n(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js")("slice"),h=u("species"),p=[].slice,A=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,r,u,d=l(this),f=s(d.length),m=a(e,f),g=a(void 0===t?f:t,f);if(o(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[h])&&(n=void 0):n=void 0,n===Array||void 0===n))return p.call(d,m,g);for(r=new(void 0===n?Array:n)(A(g-m,0)),u=0;m<g;m++,u++)m in d&&c(r,u,d[m]);return r.length=u,r}})},"./node_modules/core-js/modules/es.function.name.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/modules/es.function.name.js ***!
              \**********************************************************/function(e,t,n){var r=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),i=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,l="name";r&&!(l in o)&&i(o,l,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":
/*!***************************************************************!*\
              !*** ./node_modules/core-js/modules/es.number.constructor.js ***!
              \***************************************************************/function(e,t,n){var r=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),i=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),o=n(
/*! ../internals/is-forced */
"./node_modules/core-js/internals/is-forced.js"),a=n(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),s=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),l=n(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),c=n(
/*! ../internals/inherit-if-required */
"./node_modules/core-js/internals/inherit-if-required.js"),u=n(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),d=n(
/*! ../internals/to-primitive */
"./node_modules/core-js/internals/to-primitive.js"),h=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),p=n(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),A=n(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js").f,f=n(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,m=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,g=n(
/*! ../internals/string-trim */
"./node_modules/core-js/internals/string-trim.js").trim,v="Number",y=i[v],b=y.prototype,w=l(p(b))==v,x=function(e){if(u(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,r,i,o,a,s,l,c=d(e,"number");if("string"==typeof c&&c.length>2)if(43===(t=(c=g(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((l=o.charCodeAt(s))<48||l>i)return NaN;return parseInt(o,r)}return+c};if(o(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var C,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(w?h((function(){b.valueOf.call(n)})):l(n)!=v)?c(new y(x(t)),n,S):x(t)},B=r?A(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0;B.length>_;_++)s(y,C=B[_])&&!s(S,C)&&m(S,C,f(y,C));S.prototype=b,b.constructor=S,a(i,v,S)}},"./node_modules/core-js/modules/es.object.assign.js":
/*!**********************************************************!*\
              !*** ./node_modules/core-js/modules/es.object.assign.js ***!
              \**********************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/object-assign */
"./node_modules/core-js/internals/object-assign.js");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},"./node_modules/core-js/modules/es.object.keys.js":
/*!********************************************************!*\
              !*** ./node_modules/core-js/modules/es.object.keys.js ***!
              \********************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),o=n(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js");r({target:"Object",stat:!0,forced:n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js")((function(){o(1)}))},{keys:function(e){return o(i(e))}})},"./node_modules/core-js/modules/es.object.to-string.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/modules/es.object.to-string.js ***!
              \*************************************************************/function(e,t,n){var r=n(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),i=n(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),o=n(
/*! ../internals/object-to-string */
"./node_modules/core-js/internals/object-to-string.js");r||i(Object.prototype,"toString",o,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":
/*!*************************************************************!*\
              !*** ./node_modules/core-js/modules/es.regexp.to-string.js ***!
              \*************************************************************/function(e,t,n){var r=n(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),i=n(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),o=n(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),a=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),s=n(
/*! ../internals/regexp-flags */
"./node_modules/core-js/internals/regexp-flags.js"),l="toString",c=RegExp.prototype,u=c[l],d=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=u.name!=l;(d||h)&&r(RegExp.prototype,l,(function(){var e=i(this),t=o(e.source),n=e.flags;return"/"+t+"/"+o(void 0===n&&e instanceof RegExp&&!("flags"in c)?s.call(e):n)}),{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":
/*!************************************************************!*\
              !*** ./node_modules/core-js/modules/es.string.iterator.js ***!
              \************************************************************/function(e,t,n){var r=n(
/*! ../internals/string-multibyte */
"./node_modules/core-js/internals/string-multibyte.js").charAt,i=n(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),o=n(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),a=n(
/*! ../internals/define-iterator */
"./node_modules/core-js/internals/define-iterator.js"),s="String Iterator",l=o.set,c=o.getterFor(s);a(String,"String",(function(e){l(this,{type:s,string:i(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},"./node_modules/core-js/modules/es.string.link.js":
/*!********************************************************!*\
              !*** ./node_modules/core-js/modules/es.string.link.js ***!
              \********************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/create-html */
"./node_modules/core-js/internals/create-html.js");r({target:"String",proto:!0,forced:n(
/*! ../internals/string-html-forced */
"./node_modules/core-js/internals/string-html-forced.js")("link")},{link:function(e){return i(this,"a","href",e)}})},"./node_modules/core-js/modules/es.symbol.description.js":
/*!***************************************************************!*\
              !*** ./node_modules/core-js/modules/es.symbol.description.js ***!
              \***************************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),o=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),a=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),s=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),l=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,c=n(
/*! ../internals/copy-constructor-properties */
"./node_modules/core-js/internals/copy-constructor-properties.js"),u=o.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(h,u);var p=h.prototype=u.prototype;p.constructor=h;var A=p.toString,f="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=A.call(e);if(a(d,e))return"";var n=f?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},"./node_modules/core-js/modules/es.symbol.iterator.js":
/*!************************************************************!*\
              !*** ./node_modules/core-js/modules/es.symbol.iterator.js ***!
              \************************************************************/function(e,t,n){n(
/*! ../internals/define-well-known-symbol */
"./node_modules/core-js/internals/define-well-known-symbol.js")("iterator")},"./node_modules/core-js/modules/es.symbol.js":
/*!***************************************************!*\
              !*** ./node_modules/core-js/modules/es.symbol.js ***!
              \***************************************************/function(e,t,n){var r=n(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),i=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),o=n(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),a=n(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),s=n(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),l=n(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js"),c=n(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),u=n(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),d=n(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),h=n(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),p=n(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),A=n(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),f=n(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),m=n(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),g=n(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),v=n(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),y=n(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),b=n(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),w=n(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js"),x=n(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js"),C=n(
/*! ../internals/object-get-own-property-names-external */
"./node_modules/core-js/internals/object-get-own-property-names-external.js"),S=n(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),B=n(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js"),_=n(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),E=n(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),M=n(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),P=n(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),T=n(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),D=n(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),F=n(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),I=n(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),k=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),O=n(
/*! ../internals/well-known-symbol-wrapped */
"./node_modules/core-js/internals/well-known-symbol-wrapped.js"),L=n(
/*! ../internals/define-well-known-symbol */
"./node_modules/core-js/internals/define-well-known-symbol.js"),R=n(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),U=n(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),z=n(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").forEach,N=D("hidden"),j="Symbol",H="prototype",Q=k("toPrimitive"),V=U.set,W=U.getterFor(j),G=Object[H],q=i.Symbol,K=o("JSON","stringify"),Y=B.f,X=_.f,$=C.f,J=E.f,Z=T("symbols"),ee=T("op-symbols"),te=T("string-to-symbol-registry"),ne=T("symbol-to-string-registry"),re=T("wks"),ie=i.QObject,oe=!ie||!ie[H]||!ie[H].findChild,ae=s&&c((function(){return 7!=b(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Y(G,t);r&&delete G[t],X(e,t,n),r&&e!==G&&X(G,t,r)}:X,se=function(e,t){var n=Z[e]=b(q[H]);return V(n,{type:j,tag:e,description:t}),s||(n.description=t),n},le=function(e,t,n){e===G&&le(ee,t,n),A(e);var r=g(t);return A(n),u(Z,r)?(n.enumerable?(u(e,N)&&e[N][r]&&(e[N][r]=!1),n=b(n,{enumerable:y(0,!1)})):(u(e,N)||X(e,N,y(1,{})),e[N][r]=!0),ae(e,r,n)):X(e,r,n)},ce=function(e,t){A(e);var n=m(t),r=w(n).concat(pe(n));return z(r,(function(t){s&&!ue.call(n,t)||le(e,t,n[t])})),e},ue=function(e){var t=g(e),n=J.call(this,t);return!(this===G&&u(Z,t)&&!u(ee,t))&&(!(n||!u(this,t)||!u(Z,t)||u(this,N)&&this[N][t])||n)},de=function(e,t){var n=m(e),r=g(t);if(n!==G||!u(Z,r)||u(ee,r)){var i=Y(n,r);return!i||!u(Z,r)||u(n,N)&&n[N][r]||(i.enumerable=!0),i}},he=function(e){var t=$(m(e)),n=[];return z(t,(function(e){u(Z,e)||u(F,e)||n.push(e)})),n},pe=function(e){var t=e===G,n=$(t?ee:m(e)),r=[];return z(n,(function(e){!u(Z,e)||t&&!u(G,e)||r.push(Z[e])})),r};l||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,t=I(e),n=function(e){this===G&&n.call(ee,e),u(this,N)&&u(this[N],t)&&(this[N][t]=!1),ae(this,t,y(1,e))};return s&&oe&&ae(G,t,{configurable:!0,set:n}),se(t,e)},P(q[H],"toString",(function(){return W(this).tag})),P(q,"withoutSetter",(function(e){return se(I(e),e)})),E.f=ue,_.f=le,B.f=de,x.f=C.f=he,S.f=pe,O.f=function(e){return se(k(e),e)},s&&(X(q[H],"description",{configurable:!0,get:function(){return W(this).description}}),a||P(G,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:q}),z(w(re),(function(e){L(e)})),r({target:j,stat:!0,forced:!l},{for:function(e){var t=v(e);if(u(te,t))return te[t];var n=q(t);return te[t]=n,ne[n]=t,n},keyFor:function(e){if(!p(e))throw TypeError(e+" is not a symbol");if(u(ne,e))return ne[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!s},{create:function(e,t){return void 0===t?b(e):ce(b(e),t)},defineProperty:le,defineProperties:ce,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:he,getOwnPropertySymbols:pe}),r({target:"Object",stat:!0,forced:c((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(f(e))}}),K&&r({target:"JSON",stat:!0,forced:!l||c((function(){var e=q();return"[null]"!=K([e])||"{}"!=K({a:e})||"{}"!=K(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(h(t)||void 0!==e)&&!p(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!p(t))return t}),i[1]=t,K.apply(null,i)}}),q[H][Q]||M(q[H],Q,q[H].valueOf),R(q,j),F[N]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":
/*!**********************************************************************!*\
              !*** ./node_modules/core-js/modules/web.dom-collections.for-each.js ***!
              \**********************************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),i=n(
/*! ../internals/dom-iterables */
"./node_modules/core-js/internals/dom-iterables.js"),o=n(
/*! ../internals/array-for-each */
"./node_modules/core-js/internals/array-for-each.js"),a=n(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js");for(var s in i){var l=r[s],c=l&&l.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(u){c.forEach=o}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":
/*!**********************************************************************!*\
              !*** ./node_modules/core-js/modules/web.dom-collections.iterator.js ***!
              \**********************************************************************/function(e,t,n){var r=n(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),i=n(
/*! ../internals/dom-iterables */
"./node_modules/core-js/internals/dom-iterables.js"),o=n(
/*! ../modules/es.array.iterator */
"./node_modules/core-js/modules/es.array.iterator.js"),a=n(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),s=n(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),l=s("iterator"),c=s("toStringTag"),u=o.values;for(var d in i){var h=r[d],p=h&&h.prototype;if(p){if(p[l]!==u)try{a(p,l,u)}catch(f){p[l]=u}if(p[c]||a(p,c,d),i[d])for(var A in o)if(p[A]!==o[A])try{a(p,A,o[A])}catch(f){p[A]=o[A]}}}},"./node_modules/es6-promise/dist/es6-promise.js":
/*!******************************************************!*\
              !*** ./node_modules/es6-promise/dist/es6-promise.js ***!
              \******************************************************/function(e){
/*!
               * @overview es6-promise - a tiny implementation of Promises/A+.
               * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
               * @license   Licensed under MIT license
               *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
               * @version   v4.2.8+1e68dce6
               */
e.exports=function(){function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,i=void 0,o=void 0,a=function(e,t){y[r]=e,y[r+1]=t,2===(r+=2)&&(o?o(b):x())};function s(e){o=e}function l(e){a=e}var c="undefined"!=typeof window?window:void 0,u=c||{},d=u.MutationObserver||u.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function A(){return function(){return process.nextTick(b)}}function f(){return void 0!==i?function(){i(b)}:v()}function m(){var e=0,t=new d(b),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function g(){var e=new MessageChannel;return e.port1.onmessage=b,function(){return e.port2.postMessage(0)}}function v(){var e=setTimeout;return function(){return e(b,1)}}var y=new Array(1e3);function b(){for(var e=0;e<r;e+=2)(0,y[e])(y[e+1]),y[e]=void 0,y[e+1]=void 0;r=0}function w(){try{var e=Function("return this")().require("vertx");return i=e.runOnLoop||e.runOnContext,f()}catch(g9){return v()}}var x=void 0;function C(e,t){var n=this,r=new this.constructor(_);void 0===r[B]&&G(r);var i=n._state;if(i){var o=arguments[i-1];a((function(){return H(i,r,o,n._result)}))}else N(n,r,e,t);return r}function S(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(_);return L(n,e),n}x=h?A():d?m():p?g():void 0===c?w():v();var B=Math.random().toString(36).substring(2);function _(){}var E=void 0,M=1,P=2;function T(){return new TypeError("You cannot resolve a promise with itself")}function D(){return new TypeError("A promises callback cannot return that same promise.")}function F(e,t,n,r){try{e.call(t,n,r)}catch(g9){return g9}}function I(e,t,n){a((function(e){var r=!1,i=F(n,t,(function(n){r||(r=!0,t!==n?L(e,n):U(e,n))}),(function(t){r||(r=!0,z(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,z(e,i))}),e)}function k(e,t){t._state===M?U(e,t._result):t._state===P?z(e,t._result):N(t,void 0,(function(t){return L(e,t)}),(function(t){return z(e,t)}))}function O(e,n,r){n.constructor===e.constructor&&r===C&&n.constructor.resolve===S?k(e,n):void 0===r?U(e,n):t(r)?I(e,n,r):U(e,n)}function L(t,n){if(t===n)z(t,T());else if(e(n)){var r=void 0;try{r=n.then}catch(i){return void z(t,i)}O(t,n,r)}else U(t,n)}function R(e){e._onerror&&e._onerror(e._result),j(e)}function U(e,t){e._state===E&&(e._result=t,e._state=M,0!==e._subscribers.length&&a(j,e))}function z(e,t){e._state===E&&(e._state=P,e._result=t,a(R,e))}function N(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+M]=n,i[o+P]=r,0===o&&e._state&&a(j,e)}function j(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?H(n,r,i,o):i(o);e._subscribers.length=0}}function H(e,n,r,i){var o=t(r),a=void 0,s=void 0,l=!0;if(o){try{a=r(i)}catch(g9){l=!1,s=g9}if(n===a)return void z(n,D())}else a=i;n._state!==E||(o&&l?L(n,a):!1===l?z(n,s):e===M?U(n,a):e===P&&z(n,a))}function Q(e,t){try{t((function(t){L(e,t)}),(function(t){z(e,t)}))}catch(g9){z(e,g9)}}var V=0;function W(){return V++}function G(e){e[B]=V++,e._state=void 0,e._result=void 0,e._subscribers=[]}function q(){return new Error("Array Methods must be provided an Array")}var K=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[B]||G(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?U(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&U(this.promise,this._result))):z(this.promise,q())}return e.prototype._enumerate=function(e){for(var t=0;this._state===E&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===S){var i=void 0,o=void 0,a=!1;try{i=e.then}catch(g9){a=!0,o=g9}if(i===C&&e._state!==E)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===ee){var s=new n(_);a?z(s,o):O(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===E&&(this._remaining--,e===P?z(r,n):this._result[t]=n),0===this._remaining&&U(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,(function(e){return n._settledAt(M,t,e)}),(function(e){return n._settledAt(P,t,e)}))},e}();function Y(e){return new K(this,e).promise}function X(e){var t=this;return n(e)?new t((function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function $(e){var t=new this(_);return z(t,e),t}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ee=function(){function e(t){this[B]=W(),this._result=this._state=void 0,this._subscribers=[],_!==t&&("function"!=typeof t&&J(),this instanceof e?Q(this,t):Z())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();function te(){var e=void 0;if(void 0!==fB)e=fB;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(g9){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(g9){}if("[object Promise]"===n&&!t.cast)return}e.Promise=ee}return ee.prototype.then=C,ee.all=Y,ee.race=X,ee.resolve=S,ee.reject=$,ee._setScheduler=s,ee._setAsap=l,ee._asap=a,ee.polyfill=te,ee.Promise=ee,ee}()},html2canvas:
/*!******************************!*\
              !*** external "html2canvas" ***!
              \******************************/function(e){e.exports=t},jspdf:
/*!************************!*\
              !*** external "jspdf" ***!
              \************************/function(t){t.exports=e}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,i),o.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){
/*!**********************!*\
            !*** ./src/index.js ***!
            \**********************/
i.r(o);var e=i(
/*! ./worker.js */
"./src/worker.js");i(
/*! ./plugin/jspdf-plugin.js */
"./src/plugin/jspdf-plugin.js"),i(
/*! ./plugin/pagebreaks.js */
"./src/plugin/pagebreaks.js"),i(
/*! ./plugin/hyperlinks.js */
"./src/plugin/hyperlinks.js");var t=function e(t,n){var r=new e.Worker(n);return t?r.from(t).save():r};t.Worker=e.default,o.default=t}(),o=o.default}()};const HEe=mB(BSe.exports=zEe(gB(REe),jEe())),QEe={class:"relative border rounded-lg shadow-md p-2 mt-10 min-h-96"},VEe={class:"font-bold text-lg"},WEe={class:"w-full flex flex-col justify-start mt-10 px-10"},GEe={class:"flex flex-row"},qEe=Ei("h2",{class:"font-semibold text-md"},"Patient:",-1),KEe={class:"ml-3"},YEe={class:"ml-3"},XEe={class:"flex flex-row"},$Ee=Ei("h2",{class:"font-semibold text-md"},"Researcher:",-1),JEe={class:"ml-3"},ZEe={class:"ml-3"},eMe={class:"flex flex-col"},tMe={class:"flex flex-row"},nMe=Ei("h2",{class:"font-semibold text-md"},"Workflow:",-1),rMe={class:"ml-3"},iMe={class:"ml-3"},oMe={class:"ml-3"},aMe=Ei("h3",{class:"font-semibold"},"Workflow tools:",-1),sMe={class:"flex flex-row"},lMe=Ei("h2",{class:"font-semibold text-md"},"Dataset:",-1),cMe={class:"ml-3"},uMe={class:"ml-3"},dMe=Ei("h2",{class:"font-semibold text-md"},"Measurements:",-1),hMe={key:0},pMe={class:"flex flex-row"},AMe={class:"font-semibold"},fMe={class:"ml-3"},mMe={class:"ml-3"},gMe={class:"flex flex-row"},vMe=Ei("span",{class:"font-semibold"},"Code:",-1),yMe={class:"ml-3"},bMe={class:"flex flex-row"},wMe=Ei("span",{class:"font-semibold"},"Value:",-1),xMe={class:"ml-3"},CMe={class:"flex flex-row"},SMe=Ei("span",{class:"font-semibold"},"Unit:",-1),BMe={class:"ml-3"},_Me={key:1},EMe={class:"flex flex-row"},MMe={class:"font-semibold"},PMe={class:"ml-3"},TMe={class:"ml-3"},DMe={class:"flex flex-row"},FMe=Ei("span",{class:"font-semibold"},"Number Of Series:",-1),IMe={class:"ml-3"},kMe={class:"flex flex-row"},OMe=Ei("span",{class:"font-semibold"},"Number Of Instance:",-1),LMe={class:"ml-3"},RMe={class:"flex flex-row"},UMe=Ei("span",{class:"font-semibold"},"Modality",-1),zMe={class:"ml-3"},NMe={class:"flex flex-row"},jMe=Ei("span",{class:"font-semibold"},"Body site",-1),HMe={class:"ml-3"},QMe={class:"mt-5"},VMe=Ei("h2",{class:"text-md font-semibold"},"Results:",-1),WMe={class:"flex flex-row"},GMe=Ei("h3",null,"Executing time:",-1),qMe={class:"ml-3"},KMe={key:0,class:"flex flex-col"},YMe=Ei("h3",null,"Outputs:",-1),XMe={class:"flex flex-row"},$Me={class:"font-semibold"},JMe={class:"ml-3"},ZMe={class:"ml-3"},ePe={class:"flex flex-row"},tPe=Ei("span",{class:"font-semibold"},"Code:",-1),nPe={class:"ml-3"},rPe={class:"flex flex-row"},iPe=Ei("span",{class:"font-semibold"},"Value:",-1),oPe={class:"ml-3"},aPe={class:"flex flex-row"},sPe=Ei("span",{class:"font-semibold"},"Unit:",-1),lPe={class:"ml-3"},cPe={key:1,class:"my-1 text-red-300"},uPe={class:"text-red-500"},dPe=Ei("div",{class:"mt-20"}," This report is generated by Auckland Bioengineering Institute DigitalTWINs on FHIR project. ",-1),hPe={class:"w-full px-10 my-1"},pPe=Dn({__name:"PatientReport",props:{reportData:{type:Object,default:()=>{}},patientDetails:{type:Object,default:()=>{}}},setup(e){const t=bt(),n=()=>{const e=t.value;if(e){const t={margin:[.5,.5,.5,.5],filename:"report.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};HEe().from(e).set(t).save()}};return(r,i)=>{var o,a,s,l;return gi(),wi("div",QEe,[Mi(St(Bx),{type:"success",round:"",onClick:n,class:"absolute right-2 top-2"},{default:sn((()=>[Ti("Download Report")])),_:1}),Ei("div",{ref_key:"reportDisplayDiv",ref:t,class:"w-full flex flex-col justify-center items-center"},[Ei("h1",VEe,K((l=e.reportData.process.workflow.title,l.split(" ").map((e=>function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}(e))).join(" ")))+" Report",1),Ei("div",WEe,[Ei("div",GEe,[qEe,Ei("span",KEe,K(null==(o=e.patientDetails)?void 0:o.patient.name[0].text),1),Ei("span",YEe,K(null==(a=e.patientDetails)?void 0:a.patient.identifier[0].value),1)]),Ei("div",XEe,[$Ee,Ei("span",JEe,K(e.reportData.dataset.relatedResources.researcher.name[0].text),1),Ei("span",ZEe,K(e.reportData.dataset.relatedResources.researcher.identifier[0].value),1)]),Ei("div",eMe,[Ei("div",tMe,[nMe,Ei("span",rMe,K(e.reportData.process.workflow.title),1)]),Ei("div",null,[Ei("span",iMe,K(e.reportData.process.workflow.description),1),Ei("div",oMe,[aMe,(gi(!0),wi(di,null,Pn(e.reportData.process.workflow.action,((e,t)=>(gi(),wi("div",{class:"ml-3",key:t},K(e.title),1)))),128))])])]),Ei("div",sMe,[lMe,Ei("span",cMe,K(e.reportData.dataset.researchStudy.title),1),Ei("span",uMe,K(e.reportData.dataset.researchStudy.identifier[0].value),1)]),Ei("div",null,[dMe,(gi(!0),wi(di,null,Pn(e.reportData.measurements,((e,t)=>(gi(),wi("div",{class:"flex flex-col ml-3",key:t},["Observation"===e.resourceType?(gi(),wi("div",hMe,[Ei("div",pMe,[Ei("span",AMe,K(e.resourceType)+":",1),Ei("span",fMe,K(e.code.coding[0].display),1)]),Ei("div",mMe,[Ei("div",gMe,[vMe,Ei("span",yMe,K(e.code.coding[0].code),1)]),Ei("div",bMe,[wMe,Ei("span",xMe,K(e.valueQuantity.value),1)]),Ei("div",CMe,[SMe,Ei("span",BMe,K(e.valueQuantity.unit),1)])])])):"ImagingStudy"===e.resourceType?(gi(),wi("div",_Me,[Ei("div",EMe,[Ei("span",MMe,K(e.resourceType)+":",1),Ei("span",PMe,K(e.identifier[0].value),1)]),Ei("div",TMe,[Ei("div",DMe,[FMe,Ei("span",IMe,K(e.numberOfSeries),1)]),Ei("div",kMe,[OMe,Ei("span",LMe,K(e.numberOfInstances),1)]),Ei("div",RMe,[UMe,Ei("span",zMe,K(e.series[0].modality.display),1)]),Ei("div",NMe,[jMe,Ei("span",HMe,K(e.series[0].bodySite.display),1)])])])):Fi("",!0)])))),128))]),Ei("p",QMe,"After excuting workflow tools for the patient: "+K(null==(s=e.patientDetails)?void 0:s.patient.name[0].text)+", the results:",1),Ei("div",null,[VMe,Ei("div",WMe,[GMe,Ei("span",qMe,K(e.reportData.process.workflow_tool_process.lastModified),1)]),e.reportData.process.output.length>0?(gi(),wi("div",KMe,[YMe,(gi(!0),wi(di,null,Pn(e.reportData.process.output,((e,t)=>(gi(),wi("div",{class:"ml-3",key:t},[Ei("div",XMe,[Ei("span",$Me,K(e.resourceType)+":",1),Ei("span",JMe,K(e.code.coding[0].display),1)]),Ei("div",ZMe,[Ei("div",ePe,[tPe,Ei("span",nPe,K(e.code.coding[0].code),1)]),Ei("div",rPe,[iPe,Ei("span",oPe,K(e.valueQuantity.value),1)]),Ei("div",aPe,[sPe,Ei("span",lPe,K(e.valueQuantity.unit),1)])])])))),128))])):(gi(),wi("div",cPe,[Ti(" No output for selecting workflow tool process: "),Ei("span",uPe,K(e.reportData.process.workflow_tool_process.description),1),Ti(" , uuid: "),Ei("span",null,K(e.reportData.process.workflow_tool_process.identifier[0].value),1),Ti(". ")]))])]),dPe,Ei("div",hPe,[Mi(St(uM))])],512)])}}}),APe=e=>(on("data-v-89c10f00"),e=e(),an(),e),fPe={class:"border min-h-48 shadow-fancy-inner rounded-md flex flex-col items-center md:flex-row md:justify-start md:items-center p-3"},mPe={class:"md:mx-10 my-2"},gPe={class:"my-1 tracking-wide"},vPe={class:"font-semibold md:text-lg mx-2 select-none"},yPe={class:"my-1 tracking-wide"},bPe=APe((()=>Ei("span",{class:"font-medium mx-2 select-none"},"Name:",-1))),wPe={class:"my-1 tracking-wide"},xPe=APe((()=>Ei("span",{class:"font-medium mx-2 select-none"},"UUID:",-1))),CPe={class:"text-sm font-light bg-zinc-200 px-1 rounded-md cursor-copy"},SPe={class:"md:ml-auto my-3"},BPe={class:"ml-2 mt-5"},_Pe={class:"border shadow-sm m-2 p-1 rounded-lg"},EPe={class:"my-1 tracking-wide"},MPe=APe((()=>Ei("span",{class:"mx-2 select-none"},"Resource:",-1))),PPe={class:"my-1 tracking-wide"},TPe=APe((()=>Ei("span",{class:"mx-2 select-none"},"Title:",-1))),DPe={class:"my-1 tracking-wide"},FPe=APe((()=>Ei("span",{class:"mx-2 select-none"},"UUID:",-1))),IPe={class:"text-xs md:text-sm font-light break-words bg-zinc-100 px-1 rounded-md cursor-copy"},kPe={class:"border shadow-sm m-2 p-1 rounded-lg"},OPe={class:"my-1 tracking-wide"},LPe=APe((()=>Ei("span",{class:"mx-2 select-none"},"Resource:",-1))),RPe={class:"my-1 tracking-wide"},UPe=APe((()=>Ei("span",{class:"mx-2 select-none"},"Name:",-1))),zPe={class:"my-1 tracking-wide"},NPe=APe((()=>Ei("span",{class:"mx-2 select-none"},"UUID:",-1))),jPe={class:"text-xs md:text-sm font-light break-words bg-zinc-100 px-1 rounded-md cursor-copy"},HPe={class:"border shadow-sm m-2 p-1 rounded-lg flex flex-col md:flex-row md:items-center"},QPe={class:"my-1 tracking-wide"},VPe=APe((()=>Ei("span",{class:"mx-2 select-none"},"Resource:",-1))),WPe={class:"mx-auto md:ml-auto md:mx-0"},GPe={class:"border shadow-sm rounded-lg -ml-8 md:ml-0 m-2 p-1"},qPe={class:"border shadow-sm rounded-lg -ml-8 md:ml-0 m-2 p-1"},KPe=Dn({__name:"PatientDetail",props:{uuid:{}},setup(e){const t=e,{patientDetails:n}=ZD(RO()),{getpatientDetails:r}=RO(),i=bt(zO()),o=bt(!1),a=bt(null),s=bt(),l=bt(),c=bt(),u=()=>{i.value=zO()};gn((async()=>{await r(t.uuid)})),vn((()=>{u(),window.addEventListener("resize",u)})),xn((()=>{window.removeEventListener("resize",u)}));const d=e=>{c.value=e,setTimeout((()=>{var e;null==(e=l.value)||e.scrollIntoView({behavior:"smooth",block:"start"})}),100)},h=eo((()=>["md","lg","xl","2xl","3xl"].includes(i.value)?{measurement:{pagination:{pageSize:10},column:[{title:"Resource",key:"resource",defaultFilterOptionValues:[],filterOptions:[{label:"Observation",value:"Observation"},{label:"ImagingStudy",value:"ImagingStudy"}],filter:(e,t)=>!!~t.resource.indexOf(String(e))},{title:"Code",key:"code"},{title:"Display",key:"display"},{title:"Value",key:"value"},{title:"Unit",key:"unit"},{title:"Endpoint",key:"endpoint"},{title:"Action",key:"actions",render:e=>to(Bx,{tertiary:!0,round:!0,type:"info",size:"small",onClick:()=>f(e)},{default:()=>"View More"})}]},process:{pagination:{pageSize:10},column:[{title:"Resource",key:"resource"},{title:"Workflow",key:"workflow"},{title:"Workflow Tool",key:"tool"},{title:"lastModified",key:"time"},{title:"Action",key:"actions",render:e=>to(Bx,{tertiary:!0,round:!0,type:"info",size:"small",onClick:()=>f(e)},{default:()=>"View More"})}]}}:{measurement:{pagination:{pageSize:3},column:[{title:"Resource",key:"resource"},{title:"Action",key:"actions",render:e=>to(Bx,{tertiary:!0,round:!0,type:"info",size:"small",onClick:()=>f(e)},{default:()=>"View More"})}]},process:{pagination:{pageSize:3},column:[{title:"Resource",key:"resource"},{title:"Action",key:"actions",render:e=>to(Bx,{tertiary:!0,round:!0,type:"info",size:"small",onClick:()=>f(e)},{default:()=>"View More"})}]}}));function p(e){const t=[];return e.forEach(((e,n)=>{var r,i,o;t.push({key:n,resource:e.resourceType,uuid:e.identifier[0].value,code:"Observation"===e.resourceType?e.code.coding[0].code:"",display:"Observation"===e.resourceType?e.code.coding[0].display:"",value:"Observation"===e.resourceType?null==(r=e.valueQuantity)?void 0:r.value:"",unit:"Observation"===e.resourceType?null==(i=e.valueQuantity)?void 0:i.unit:"",endpoint:"ImagingStudy"===e.resourceType?null==(o=e.endpoint[0])?void 0:o.reference:""})})),t}function A(e){const t=[];return e.forEach(((e,n)=>{t.push({key:n,resource:e.resourceType,uuid:e.identifier[0].value,workflow:e.for.display,tool:e.focus.display,time:e.lastModified})})),t}const f=e=>{};return(e,t)=>{var r,u,f,m;return gi(),wi("div",{ref_key:"mainDiv",ref:a,class:"main p-1 md:px-5"},[Ei("div",fPe,[Ei("div",mPe,[Mi(St(hx),{round:"",class:"size-16 md:size-24 shadow-fancy-inner m-1",src:St(oR)},null,8,["src"])]),Ei("div",null,[Ei("div",gPe,[Ei("span",vPe,K(null==(r=St(n))?void 0:r.patient.resourceType),1)]),Ei("div",yPe,[bPe,Ti(),Ei("span",null,K(null==(u=St(n))?void 0:u.patient.name[0].text),1)]),Ei("div",wPe,[xPe,Ti(),Ei("span",CPe,K(null==(f=St(n))?void 0:f.patient.identifier[0].value),1)])]),Ei("div",SPe,[Mi(St(Bx),{tertiary:"",round:"",type:o.value?"error":"success",onClick:t[0]||(t[0]=e=>(()=>{var e;o.value=!o.value,o.value?setTimeout((()=>{var e;null==(e=s.value)||e.scrollIntoView({behavior:"smooth",block:"start"})}),100):null==(e=a.value)||e.scrollIntoView({behavior:"smooth"})})())},{default:sn((()=>[Ti(K(o.value?"Cancel":"Generate Report"),1)])),_:1},8,["type"])])]),Ei("div",BPe,[Mi(St(mC),{"display-directive":"show"},{default:sn((()=>{var e;return[(gi(!0),wi(di,null,Pn(null==(e=St(n))?void 0:e.datasets,((e,t)=>(gi(),xi(St(vC),{key:e.researchStudy.identifier[0].value,title:"Dataset "+(t+1),name:t},{default:sn((()=>[Ei("div",_Pe,[Ei("div",EPe,[MPe,Ti(" "+K(e.researchStudy.resourceType),1)]),Ei("div",PPe,[TPe,Ti(" "+K(e.researchStudy.title),1)]),Ei("div",DPe,[FPe,Ti(),Ei("span",IPe,K(e.researchStudy.identifier[0].value),1)])]),Mi(St(mC),null,{default:sn((()=>[Mi(St(vC),{title:"Researcher",name:"1"},{default:sn((()=>[Ei("div",kPe,[Ei("div",OPe,[LPe,Ti(" "+K(e.relatedResources.researcher.resourceType),1)]),Ei("div",RPe,[UPe,Ti(" "+K(e.relatedResources.researcher.name[0].text),1)]),Ei("div",zPe,[NPe,Ti(),Ei("span",jPe,K(e.relatedResources.researcher.identifier[0].value),1)])])])),_:2},1024),Mi(St(vC),{title:"Consent",name:"2"},{default:sn((()=>[Ei("div",HPe,[Ei("div",null,[Ei("div",QPe,[VPe,Ti(" "+K(e.relatedResources.consent.resourceType),1)])]),Ei("div",WPe,[Mi(vSe,{resource:e.relatedResources.consent},null,8,["resource"])])])])),_:2},1024),Mi(St(vC),{title:"Measurements",name:"3"},{default:sn((()=>[Ei("div",GPe,[Mi(St(cB),{columns:h.value.measurement.column,data:p(e.relatedResources.measurements),pagination:h.value.measurement.pagination,"single-line":!1},null,8,["columns","data","pagination"])])])),_:2},1024),Mi(St(vC),{title:"Workflow Tool Processes",name:"4"},{default:sn((()=>[Ei("div",qPe,[Mi(St(cB),{columns:h.value.process.column,data:A(e.relatedResources.workflow_tool_processes),pagination:h.value.process.pagination,"single-line":!1},null,8,["columns","data","pagination"])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["title","name"])))),128))]})),_:1})]),o.value?(gi(),wi("div",{key:0,ref_key:"reportStepDiv",ref:s,class:"mt-5"},[Mi(St(uM),{"title-placement":"left"},{default:sn((()=>{var e;return[Ti(" Generate Diagnostic Report for "+K(null==(e=St(n))?void 0:e.patient.name[0].text),1)]})),_:1}),Mi(SSe,{"screen-size":i.value,datasets:null==(m=St(n))?void 0:m.datasets,onOnReportData:d},null,8,["screen-size","datasets"])],512)):Fi("",!0),c.value?(gi(),wi("div",{key:1,ref_key:"reportDiv",ref:l},[Mi(pPe,{"report-data":c.value,"patient-details":St(n)},null,8,["report-data","patient-details"])],512)):Fi("",!0)],512)}}}),YPe=SR(KPe,[["__scopeId","data-v-89c10f00"]]),XPe={key:0},$Pe=Dn({__name:"index",setup(e){const t=OI();JSON.parse(decodeURIComponent(t.query.resource||"{}"));const n=t.query.uuid,r=t.query.resourceType;return(e,t)=>(gi(),wi("div",null,["Patient"===St(r)?(gi(),wi("div",XPe,[Mi(YPe,{uuid:St(n)},null,8,["uuid"])])):Fi("",!0)]))}}),JPe=function(e){const t=uI(e.routes,e),n=e.parseQuery||gI,r=e.stringifyQuery||vI,i=e.history,o=BI(),a=BI(),s=BI(),l=wt(kF);let c=kF;rF&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=oF.bind(null,(e=>""+e)),d=oF.bind(null,SF),h=oF.bind(null,BF);function p(e,o){if(o=iF({},o||l.value),"string"==typeof e){const r=MF(n,e,o.path),a=t.resolve({path:r.path},o),s=i.createHref(r.fullPath);return iF(r,a,{params:h(a.params),hash:BF(r.hash),redirectedFrom:void 0,href:s})}let a;if(null!=e.path)a=iF({},e,{path:MF(n,e.path,o.path).path});else{const t=iF({},e.params);for(const e in t)null==t[e]&&delete t[e];a=iF({},e,{params:d(t)}),o.params=d(o.params)}const s=t.resolve(a,o),c=e.hash||"";s.params=u(h(s.params));const p=function(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(r,iF({},e,{hash:(A=c,xF(A).replace(vF,"{").replace(bF,"}").replace(mF,"^")),path:s.path}));var A;const f=i.createHref(p);return iF({fullPath:p,hash:c,query:r===vI?yI(e.query):e.query||{}},s,{redirectedFrom:void 0,href:f})}function A(e){return"string"==typeof e?MF(n,e,l.value.path):iF({},e)}function f(e,t){if(c!==e)return ZF(8,{from:t,to:e})}function m(e){return v(e)}function g(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"==typeof n?n(e):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=A(r):{path:r},r.params={}),iF({query:e.query,hash:e.hash,params:null!=r.path?{}:e.params},r)}}function v(e,t){const n=c=p(e),i=l.value,o=e.state,a=e.force,s=!0===e.replace,u=g(n);if(u)return v(iF(A(u),{state:"object"==typeof u?iF({},o,u.state):o,force:a,replace:s}),t||n);const d=n;let h;return d.redirectedFrom=t,!a&&function(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&TF(t.matched[r],n.matched[i])&&DF(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(r,i,n)&&(h=ZF(16,{to:d,from:i}),D(i,i,!0,!1)),(h?Promise.resolve(h):w(d,i)).catch((e=>eI(e)?eI(e,2)?e:T(e):P(e,d,i))).then((e=>{if(e){if(eI(e,2))return v(iF({replace:s},A(e.to),{state:"object"==typeof e.to?iF({},o,e.to.state):o,force:a}),t||d)}else e=C(d,i,!0,s,o);return x(d,i,e),e}))}function y(e,t){const n=f(e,t);return n?Promise.reject(n):Promise.resolve()}function b(e){const t=k.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function w(e,t){let n;const[r,i,s]=function(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const o=t.matched[a];o&&(e.matched.find((e=>TF(e,o)))?r.push(o):n.push(o));const s=e.matched[a];s&&(t.matched.find((e=>TF(e,s)))||i.push(s))}return[n,r,i]}(e,t);n=EI(r.reverse(),"beforeRouteLeave",e,t);for(const o of r)o.leaveGuards.forEach((r=>{n.push(_I(r,e,t))}));const l=y.bind(null,e,t);return n.push(l),L(n).then((()=>{n=[];for(const r of o.list())n.push(_I(r,e,t));return n.push(l),L(n)})).then((()=>{n=EI(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach((r=>{n.push(_I(r,e,t))}));return n.push(l),L(n)})).then((()=>{n=[];for(const r of s)if(r.beforeEnter)if(sF(r.beforeEnter))for(const i of r.beforeEnter)n.push(_I(i,e,t));else n.push(_I(r.beforeEnter,e,t));return n.push(l),L(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=EI(s,"beforeRouteEnter",e,t,b),n.push(l),L(n)))).then((()=>{n=[];for(const r of a.list())n.push(_I(r,e,t));return n.push(l),L(n)})).catch((e=>eI(e,8)?e:Promise.reject(e)))}function x(e,t,n){s.list().forEach((r=>b((()=>r(e,t,n)))))}function C(e,t,n,r,o){const a=f(e,t);if(a)return a;const s=t===kF,c=rF?history.state:{};n&&(r||s?i.replace(e.fullPath,iF({scroll:s&&c&&c.scroll},o)):i.push(e.fullPath,o)),l.value=e,D(e,t,n,s),T()}let S;function B(){S||(S=i.listen(((e,t,n)=>{if(!O.listening)return;const r=p(e),o=g(r);if(o)return void v(iF(o,{replace:!0}),r).catch(aF);c=r;const a=l.value;var s,u;rF&&(s=QF(a.fullPath,n.delta),u=jF(),VF.set(s,u)),w(r,a).catch((e=>eI(e,12)?e:eI(e,2)?(v(e.to,r).then((e=>{eI(e,20)&&!n.delta&&n.type===OF.pop&&i.go(-1,!1)})).catch(aF),Promise.reject()):(n.delta&&i.go(-n.delta,!1),P(e,r,a)))).then((e=>{(e=e||C(r,a,!1))&&(n.delta&&!eI(e,8)?i.go(-n.delta,!1):n.type===OF.pop&&eI(e,20)&&i.go(-1,!1)),x(r,a,e)})).catch(aF)})))}let _,E=BI(),M=BI();function P(e,t,n){T(e);const r=M.list();return r.length&&r.forEach((r=>r(e,t,n))),Promise.reject(e)}function T(e){return _||(_=!e,B(),E.list().forEach((([t,n])=>e?n(e):t())),E.reset()),e}function D(t,n,r,i){const{scrollBehavior:o}=e;if(!rF||!o)return Promise.resolve();const a=!r&&function(e){const t=VF.get(e);return VF.delete(e),t}(QF(t.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return Vt().then((()=>o(t,n,a))).then((e=>e&&HF(e))).catch((e=>P(e,t,n)))}const F=e=>i.go(e);let I;const k=new Set,O={currentRoute:l,listening:!0,addRoute:function(e,n){let r,i;return YF(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},clearRoutes:t.clearRoutes,hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:p,options:e,push:m,replace:function(e){return m(iF(A(e),{replace:!0}))},go:F,back:()=>F(-1),forward:()=>F(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:M.add,isReady:function(){return _&&l.value!==kF?Promise.resolve():new Promise(((e,t)=>{E.add([e,t])}))},install(e){e.component("RouterLink",PI),e.component("RouterView",II),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>St(l)}),rF&&!I&&l.value===kF&&(I=!0,m(i.location).catch((e=>{})));const t={};for(const r in kF)Object.defineProperty(t,r,{get:()=>l.value[r],enumerable:!0});e.provide(xI,this),e.provide(CI,ot(t)),e.provide(SI,l);const n=e.unmount;k.add(e),e.unmount=function(){k.delete(e),k.size<1&&(c=kF,S&&S(),S=null,l.value=kF,I=!1,_=!1),n()}}};function L(e){return e.reduce(((e,t)=>e.then((()=>b(t)))),Promise.resolve())}return O}({history:(ZPe="/DigitalTWINonFHIRFrontend/",(ZPe=location.host?ZPe||location.pathname+location.search:"").includes("#")||(ZPe+="#"),KF(ZPe)),routes:[{path:"/",component:tSe,children:[{path:"/",name:"home",component:FCe},{path:"/login",name:"login",component:JCe}]},{path:"/annotator",name:"index-annotator",component:xU},{path:"/annotator",component:JR,children:[{path:"/annotator",name:"home-annotator",component:aU},{path:"/measurements",name:"measurements",component:eQ},{path:"/workflow",name:"workflow",component:ICe},{path:"/primary/test",name:"annotatortest",component:tQ}]},{path:"/admin-fhir",component:PR,meta:{requiresAuth:!0,requiresAdmin:!0},children:[{path:"/admin-fhir",name:"admin-home-fhir",component:bR},{path:"/fhir-details",name:"fhir-details",component:$Pe},{path:"/admin-fhir/measurements",name:"admin-fhir-measurements",component:WR,children:[{path:"/admin-fhir/measurements/patients",name:"admin-fhir-patients",component:YR}]}]},{path:"/error",name:"error",component:()=>nF((()=>import("./index-DU10YXhx.js")),[])}]});var ZPe;JPe.beforeEach(((e,t,n)=>{let r=!1,i="";if(e.matched.some((e=>e.meta.requiresAuth))){const t="undefined"!=typeof window?window.localStorage.getItem("adminAccessKey"):null;if(t){const e=HCe(t),n=e.split("-")[2];Date.now()-parseInt(n)<18e5?(r=!0,i=e.split("-")[0]):localStorage.removeItem("accessKey")}r?e.matched.some((e=>e.meta.requiresAdmin))&&"admin"!==i?n({name:"login"}):n():n({name:"login"})}else n()}));const eTe=((...e)=>{const t=(ua||(ua=Cr(ca))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){if(f(e)){return document.querySelector(e)}return e}(e);if(!r)return;const i=t._component;A(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,function(e){if(e instanceof SVGElement)return"svg";if("function"==typeof MathMLElement&&e instanceof MathMLElement)return"mathml"}(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t})(RD);var tTe;(tTe=eTe).use(JPe).use(eF),tTe.config.errorHandler=(e,t,n)=>{e.isAxiosError||JPe.push("/error")},eTe.mount("#app");export{Bx as B,qv as E,Jv as I,py as N,ny as S,iy as W,zs as a,Dn as b,Us as c,Lb as d,sf as e,eo as f,Fv as g,to as h,Gs as i,wi as j,Mi as k,St as l,Ti as m,mB as n,gi as o,fB as p,jEe as q,hn as r,cf as u,sn as w};
